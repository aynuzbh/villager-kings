(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,n,l){e.exports=l("zUnb")},crnd:function(e,n){function l(e){return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}))}l.keys=function(){return[]},l.resolve=l,e.exports=l,l.id="crnd"},zUnb:function(e,n,l){"use strict";function t(e){return"function"==typeof e}l.r(n);let i=!1;const s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){i=e},get useDeprecatedSynchronousErrorHandling(){return i}};function r(e){setTimeout(()=>{throw e},0)}const u={closed:!0,next(e){},error(e){if(s.useDeprecatedSynchronousErrorHandling)throw e;r(e)},complete(){}},o=(()=>Array.isArray||(e=>e&&"number"==typeof e.length))();function a(e){return null!==e&&"object"==typeof e}const c=(()=>{function e(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,n)=>`${n+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e})();let h=(()=>{class e{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}unsubscribe(){let n;if(this.closed)return;let{_parentOrParents:l,_unsubscribe:i,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,l instanceof e)l.remove(this);else if(null!==l)for(let e=0;e<l.length;++e)l[e].remove(this);if(t(i))try{i.call(this)}catch(r){n=r instanceof c?d(r.errors):[r]}if(o(s)){let e=-1,l=s.length;for(;++e<l;){const l=s[e];if(a(l))try{l.unsubscribe()}catch(r){n=n||[],r instanceof c?n=n.concat(d(r.errors)):n.push(r)}}}if(n)throw new c(n)}add(n){let l=n;if(!n)return e.EMPTY;switch(typeof n){case"function":l=new e(n);case"object":if(l===this||l.closed||"function"!=typeof l.unsubscribe)return l;if(this.closed)return l.unsubscribe(),l;if(!(l instanceof e)){const n=l;(l=new e)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+n+" added to Subscription.")}let{_parentOrParents:t}=l;if(null===t)l._parentOrParents=this;else if(t instanceof e){if(t===this)return l;l._parentOrParents=[t,this]}else{if(-1!==t.indexOf(this))return l;t.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[l]:i.push(l),l}remove(e){const n=this._subscriptions;if(n){const l=n.indexOf(e);-1!==l&&n.splice(l,1)}}}return e.EMPTY=function(e){return e.closed=!0,e}(new e),e})();function d(e){return e.reduce((e,n)=>e.concat(n instanceof c?n.errors:n),[])}const g=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class p extends h{constructor(e,n,l){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=u;break;case 1:if(!e){this.destination=u;break}if("object"==typeof e){e instanceof p?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new m(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new m(this,e,n,l)}}[g](){return this}static create(e,n,l){const t=new p(e,n,l);return t.syncErrorThrowable=!1,t}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class m extends p{constructor(e,n,l,i){let s;super(),this._parentSubscriber=e;let r=this;t(n)?s=n:n&&(s=n.next,l=n.error,i=n.complete,n!==u&&(t((r=Object.create(n)).unsubscribe)&&this.add(r.unsubscribe.bind(r)),r.unsubscribe=this.unsubscribe.bind(this))),this._context=r,this._next=s,this._error=l,this._complete=i}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:n}=this;s.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:n}=this,{useDeprecatedSynchronousErrorHandling:l}=s;if(this._error)l&&n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(n.syncErrorThrowable)l?(n.syncErrorValue=e,n.syncErrorThrown=!0):r(e),this.unsubscribe();else{if(this.unsubscribe(),l)throw e;r(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const n=()=>this._complete.call(this._context);s.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,n){try{e.call(this._context,n)}catch(l){if(this.unsubscribe(),s.useDeprecatedSynchronousErrorHandling)throw l;r(l)}}__tryOrSetError(e,n,l){if(!s.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,l)}catch(t){return s.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(r(t),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const f=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function S(){}function E(...e){return v(e)}function v(e){return e?1===e.length?e[0]:function(n){return e.reduce((e,n)=>n(e),n)}:S}let R=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(n){const l=new e;return l.source=this,l.operator=n,l}subscribe(e,n,l){const{operator:t}=this,i=function(e,n,l){if(e){if(e instanceof p)return e;if(e[g])return e[g]()}return e||n||l?new p(e,n,l):new p(u)}(e,n,l);if(i.add(t?t.call(i,this.source):this.source||s.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),s.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(e){try{return this._subscribe(e)}catch(n){s.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=n),function(e){for(;e;){const{closed:n,destination:l,isStopped:t}=e;if(n||t)return!1;e=l&&l instanceof p?l:null}return!0}(e)?e.error(n):console.warn(n)}}forEach(e,n){return new(n=O(n))((n,l)=>{let t;t=this.subscribe(n=>{try{e(n)}catch(i){l(i),t&&t.unsubscribe()}},l,n)})}_subscribe(e){const{source:n}=this;return n&&n.subscribe(e)}[f](){return this}pipe(...e){return 0===e.length?this:v(e)(this)}toPromise(e){return new(e=O(e))((e,n)=>{let l;this.subscribe(e=>l=e,e=>n(e),()=>e(l))})}}return e.create=n=>new e(n),e})();function O(e){if(e||(e=s.Promise||Promise),!e)throw new Error("no Promise impl found");return e}const b=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})();class T extends h{constructor(e,n){super(),this.subject=e,this.subscriber=n,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,n=e.observers;if(this.subject=null,!n||0===n.length||e.isStopped||e.closed)return;const l=n.indexOf(this.subscriber);-1!==l&&n.splice(l,1)}}class C extends p{constructor(e){super(e),this.destination=e}}let I=(()=>{class e extends R{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[g](){return new C(this)}lift(e){const n=new y(this,this);return n.operator=e,n}next(e){if(this.closed)throw new b;if(!this.isStopped){const{observers:n}=this,l=n.length,t=n.slice();for(let i=0;i<l;i++)t[i].next(e)}}error(e){if(this.closed)throw new b;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:n}=this,l=n.length,t=n.slice();for(let i=0;i<l;i++)t[i].error(e);this.observers.length=0}complete(){if(this.closed)throw new b;this.isStopped=!0;const{observers:e}=this,n=e.length,l=e.slice();for(let t=0;t<n;t++)l[t].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new b;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new b;return this.hasError?(e.error(this.thrownError),h.EMPTY):this.isStopped?(e.complete(),h.EMPTY):(this.observers.push(e),new T(this,e))}asObservable(){const e=new R;return e.source=this,e}}return e.create=(e,n)=>new y(e,n),e})();class y extends I{constructor(e,n){super(),this.destination=e,this.source=n}next(e){const{destination:n}=this;n&&n.next&&n.next(e)}error(e){const{destination:n}=this;n&&n.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:n}=this;return n?this.source.subscribe(e):h.EMPTY}}function A(e){return e&&"function"==typeof e.schedule}class N extends p{constructor(e,n,l){super(),this.parent=e,this.outerValue=n,this.outerIndex=l,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const _=e=>n=>{for(let l=0,t=e.length;l<t&&!n.closed;l++)n.next(e[l]);n.complete()};function w(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const P=w(),x=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function k(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}const M=e=>{if(e&&"function"==typeof e[f])return(e=>n=>{const l=e[f]();if("function"!=typeof l.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return l.subscribe(n)})(e);if(x(e))return _(e);if(k(e))return(e=>n=>(e.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,r),n))(e);if(e&&"function"==typeof e[P])return(e=>n=>{const l=e[P]();for(;;){const e=l.next();if(e.done){n.complete();break}if(n.next(e.value),n.closed)break}return"function"==typeof l.return&&n.add(()=>{l.return&&l.return()}),n})(e);{const n=a(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${n} where a stream was expected.`+" You can provide an Observable, Promise, Array, or Iterable.")}};function D(e,n,l,t,i=new N(e,l,t)){if(!i.closed)return n instanceof R?n.subscribe(i):M(n)(i)}class L extends p{notifyNext(e,n,l,t,i){this.destination.next(n)}notifyError(e,n){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}function F(e,n){return function(l){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return l.lift(new U(e,n))}}class U{constructor(e,n){this.project=e,this.thisArg=n}call(e,n){return n.subscribe(new H(e,this.project,this.thisArg))}}class H extends p{constructor(e,n,l){super(e),this.project=n,this.count=0,this.thisArg=l||this}_next(e){let n;try{n=this.project.call(this.thisArg,e,this.count++)}catch(l){return void this.destination.error(l)}this.destination.next(n)}}function G(e,n){return new R(l=>{const t=new h;let i=0;return t.add(n.schedule((function(){i!==e.length?(l.next(e[i++]),l.closed||t.add(this.schedule())):l.complete()}))),t})}function B(e,n){return n?function(e,n){if(null!=e){if(function(e){return e&&"function"==typeof e[f]}(e))return function(e,n){return new R(l=>{const t=new h;return t.add(n.schedule(()=>{const i=e[f]();t.add(i.subscribe({next(e){t.add(n.schedule(()=>l.next(e)))},error(e){t.add(n.schedule(()=>l.error(e)))},complete(){t.add(n.schedule(()=>l.complete()))}}))})),t})}(e,n);if(k(e))return function(e,n){return new R(l=>{const t=new h;return t.add(n.schedule(()=>e.then(e=>{t.add(n.schedule(()=>{l.next(e),t.add(n.schedule(()=>l.complete()))}))},e=>{t.add(n.schedule(()=>l.error(e)))}))),t})}(e,n);if(x(e))return G(e,n);if(function(e){return e&&"function"==typeof e[P]}(e)||"string"==typeof e)return function(e,n){if(!e)throw new Error("Iterable cannot be null");return new R(l=>{const t=new h;let i;return t.add(()=>{i&&"function"==typeof i.return&&i.return()}),t.add(n.schedule(()=>{i=e[P](),t.add(n.schedule((function(){if(l.closed)return;let e,n;try{const l=i.next();e=l.value,n=l.done}catch(t){return void l.error(t)}n?l.complete():(l.next(e),this.schedule())})))})),t})}(e,n)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,n):e instanceof R?e:new R(M(e))}function W(e,n,l=Number.POSITIVE_INFINITY){return"function"==typeof n?t=>t.pipe(W((l,t)=>B(e(l,t)).pipe(F((e,i)=>n(l,e,t,i))),l)):("number"==typeof n&&(l=n),n=>n.lift(new V(e,l)))}class V{constructor(e,n=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=n}call(e,n){return n.subscribe(new z(e,this.project,this.concurrent))}}class z extends L{constructor(e,n,l=Number.POSITIVE_INFINITY){super(e),this.project=n,this.concurrent=l,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let n;const l=this.index++;try{n=this.project(e,l)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(n,e,l)}_innerSub(e,n,l){const t=new N(this,void 0,void 0);this.destination.add(t),D(this,e,n,l,t)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e,n,l,t,i){this.destination.next(n)}notifyComplete(e){const n=this.buffer;this.remove(e),this.active--,n.length>0?this._next(n.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function Y(e){return e}function $(e=Number.POSITIVE_INFINITY){return W(Y,e)}function K(e,n){return n?G(e,n):new R(_(e))}function j(...e){let n=Number.POSITIVE_INFINITY,l=null,t=e[e.length-1];return A(t)?(l=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(n=e.pop())):"number"==typeof t&&(n=e.pop()),null===l&&1===e.length&&e[0]instanceof R?e[0]:$(n)(K(e,l))}function Q(){return function(e){return e.lift(new q(e))}}class q{constructor(e){this.connectable=e}call(e,n){const{connectable:l}=this;l._refCount++;const t=new X(e,l),i=n.subscribe(t);return t.closed||(t.connection=l.connect()),i}}class X extends p{constructor(e,n){super(e),this.connectable=n}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const n=e._refCount;if(n<=0)return void(this.connection=null);if(e._refCount=n-1,n>1)return void(this.connection=null);const{connection:l}=this,t=e._connection;this.connection=null,!t||l&&t!==l||t.unsubscribe()}}class Z extends R{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new h).add(this.source.subscribe(new ee(this.getSubject(),this))),e.closed&&(this._connection=null,e=h.EMPTY)),e}refCount(){return Q()(this)}}const J=(()=>{const e=Z.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class ee extends C{constructor(e,n){super(e),this.connectable=n}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const n=e._connection;e._refCount=0,e._subject=null,e._connection=null,n&&n.unsubscribe()}}}function ne(){return new I}const le="__parameters__";function te(e,n,l){const t=function(e){return function(...n){if(e){const l=e(...n);for(const e in l)this[e]=l[e]}}}(n);function i(...e){if(this instanceof i)return t.apply(this,e),this;const n=new i(...e);return l.annotation=n,l;function l(e,l,t){const i=e.hasOwnProperty(le)?e[le]:Object.defineProperty(e,le,{value:[]})[le];for(;i.length<=t;)i.push(null);return(i[t]=i[t]||[]).push(n),e}}return l&&(i.prototype=Object.create(l.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i}const ie=te("Inject",e=>({token:e})),se=te("Optional"),re=te("Self"),ue=te("SkipSelf");var oe=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});function ae(e){for(let n in e)if(e[n]===ae)return n;throw Error("Could not find renamed property on target object.")}function ce(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function he(e){const n=e[de];return n&&n.token===e?n:null}const de=ae({ngInjectableDef:ae});function ge(e){if("string"==typeof e)return e;if(e instanceof Array)return"["+e.map(ge).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const n=e.toString();if(null==n)return""+n;const l=n.indexOf("\n");return-1===l?n:n.substring(0,l)}const pe=ae({__forward_ref__:ae});function me(e){return e.__forward_ref__=me,e.toString=function(){return ge(this())},e}function fe(e){const n=e;return"function"==typeof n&&n.hasOwnProperty(pe)&&n.__forward_ref__===me?n():e}const Se="undefined"!=typeof globalThis&&globalThis,Ee="undefined"!=typeof window&&window,ve="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Re="undefined"!=typeof global&&global,Oe=Se||Re||Ee||ve;class be{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.ngInjectableDef=ce({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Te=new be("INJECTOR",-1),Ce=new Object,Ie="ngTempTokenPath",ye="ngTokenPath",Ae=/\n/gm,Ne="\u0275",_e="__source",we=ae({provide:String,useValue:ae});let Pe,xe=void 0;function ke(e){const n=xe;return xe=e,n}function Me(e,n=oe.Default){if(void 0===xe)throw new Error("inject() must be called from an injection context");return null===xe?function(e,n,l){const t=he(e);if(t&&"root"==t.providedIn)return void 0===t.value?t.value=t.factory():t.value;if(l&oe.Optional)return null;throw new Error(`Injector: NOT_FOUND [${ge(e)}]`)}(e,0,n):xe.get(e,n&oe.Optional?null:void 0,n)}function De(e,n=oe.Default){return(Pe||Me)(e,n)}const Le=De;class Fe{get(e,n=Ce){if(n===Ce){const n=new Error(`NullInjectorError: No provider for ${ge(e)}!`);throw n.name="NullInjectorError",n}return n}}function Ue(e,n,l,t=null){e=e&&"\n"===e.charAt(0)&&e.charAt(1)==Ne?e.substr(2):e;let i=ge(n);if(n instanceof Array)i=n.map(ge).join(" -> ");else if("object"==typeof n){let e=[];for(let l in n)if(n.hasOwnProperty(l)){let t=n[l];e.push(l+":"+("string"==typeof t?JSON.stringify(t):ge(t)))}i=`{${e.join(", ")}}`}return`${l}${t?"("+t+")":""}[${i}]: ${e.replace(Ae,"\n  ")}`}class He{}class Ge{}function Be(e,n,l){n>=e.length?e.push(l):e.splice(n,0,l)}function We(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}const Ve=function(){var e={Emulated:0,Native:1,None:2,ShadowDom:3};return e[e.Emulated]="Emulated",e[e.Native]="Native",e[e.None]="None",e[e.ShadowDom]="ShadowDom",e}(),ze=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Oe))(),Ye="ngDebugContext",$e="ngOriginalError",Ke="ngErrorLogger";function je(e){return e[Ye]}function Qe(e){return e[$e]}function qe(e,...n){e.error(...n)}class Xe{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e),l=this._findContext(e),t=function(e){return e[Ke]||qe}(e);t(this._console,"ERROR",e),n&&t(this._console,"ORIGINAL ERROR",n),l&&t(this._console,"ERROR CONTEXT",l)}_findContext(e){return e?je(e)?je(e):this._findContext(Qe(e)):null}_findOriginalError(e){let n=Qe(e);for(;n&&Qe(n);)n=Qe(n);return n}}let Ze=!0,Je=!1;function en(){return Je=!0,Ze}class nn{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e),this.inertBodyElement=this.inertDocument.createElement("body"),e.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(e){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}getInertBodyElement_XHR(e){e="<body><remove></remove>"+e+"</body>";try{e=encodeURI(e)}catch(t){return null}const n=new XMLHttpRequest;n.responseType="document",n.open("GET","data:text/html;charset=utf-8,"+e,!1),n.send(void 0);const l=n.response.body;return l.removeChild(l.firstChild),l}getInertBodyElement_DOMParser(e){e="<body><remove></remove>"+e+"</body>";try{const n=(new window.DOMParser).parseFromString(e,"text/html").body;return n.removeChild(n.firstChild),n}catch(n){return null}}getInertBodyElement_InertDocument(e){const n=this.inertDocument.createElement("template");return"content"in n?(n.innerHTML=e,n):(this.inertBodyElement.innerHTML=e,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)}stripCustomNsAttrs(e){const n=e.attributes;for(let t=n.length-1;0<t;t--){const l=n.item(t).name;"xmlns:ns1"!==l&&0!==l.indexOf("ns1:")||e.removeAttribute(l)}let l=e.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const ln=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,tn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function sn(e){return(e=String(e)).match(ln)||e.match(tn)?e:(en()&&console.warn(`WARNING: sanitizing unsafe URL value ${e} (see http://g.co/ng/security#xss)`),"unsafe:"+e)}function rn(e){const n={};for(const l of e.split(","))n[l]=!0;return n}function un(...e){const n={};for(const l of e)for(const e in l)l.hasOwnProperty(e)&&(n[e]=!0);return n}const on=rn("area,br,col,hr,img,wbr"),an=rn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),cn=rn("rp,rt"),hn=un(cn,an),dn=un(on,un(an,rn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),un(cn,rn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),hn),gn=rn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),pn=rn("srcset"),mn=un(gn,pn,rn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),rn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),fn=rn("script,style,template");class Sn{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,l=!0;for(;n;)if(n.nodeType===Node.ELEMENT_NODE?l=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,l&&n.firstChild)n=n.firstChild;else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let e=this.checkClobberedElement(n,n.nextSibling);if(e){n=e;break}n=this.checkClobberedElement(n,n.parentNode)}return this.buf.join("")}startElement(e){const n=e.nodeName.toLowerCase();if(!dn.hasOwnProperty(n))return this.sanitizedSomething=!0,!fn.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const l=e.attributes;for(let i=0;i<l.length;i++){const e=l.item(i),n=e.name,s=n.toLowerCase();if(!mn.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let r=e.value;gn[s]&&(r=sn(r)),pn[s]&&(t=r,r=(t=String(t)).split(",").map(e=>sn(e.trim())).join(", ")),this.buf.push(" ",n,'="',Rn(r),'"')}var t;return this.buf.push(">"),!0}endElement(e){const n=e.nodeName.toLowerCase();dn.hasOwnProperty(n)&&!on.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(Rn(e))}checkClobberedElement(e,n){if(n&&(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return n}}const En=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,vn=/([^\#-~ |!])/g;function Rn(e){return e.replace(/&/g,"&amp;").replace(En,(function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"})).replace(vn,(function(e){return"&#"+e.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let On;function bn(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}const Tn=function(){var e={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return e[e.NONE]="NONE",e[e.HTML]="HTML",e[e.STYLE]="STYLE",e[e.SCRIPT]="SCRIPT",e[e.URL]="URL",e[e.RESOURCE_URL]="RESOURCE_URL",e}();class Cn{}const In=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|Z|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),yn=/^url\(([^)]+)\)$/,An=/([A-Z])/g;function Nn(e){try{return null!=e?e.toString().slice(0,30):e}catch(n){return"[ERROR] Exception while trying to serialize the value"}}let _n=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>wn(),e})();const wn=(...e)=>{},Pn=new be("The presence of this token marks an injector as being the root injector."),xn=function(e,n,l){return new Hn(e,n,l)};let kn=(()=>{class e{static create(e,n){return Array.isArray(e)?xn(e,n,""):xn(e.providers,e.parent,e.name||"")}}return e.THROW_IF_NOT_FOUND=Ce,e.NULL=new Fe,e.ngInjectableDef=ce({token:e,providedIn:"any",factory:()=>De(Te)}),e.__NG_ELEMENT_ID__=-1,e})();const Mn=function(e){return e},Dn=[],Ln=Mn,Fn=function(){return Array.prototype.slice.call(arguments)},Un="\u0275";class Hn{constructor(e,n=kn.NULL,l=null){this.parent=n,this.source=l;const t=this._records=new Map;t.set(kn,{token:kn,fn:Mn,deps:Dn,value:this,useNew:!1}),t.set(Te,{token:Te,fn:Mn,deps:Dn,value:this,useNew:!1}),function e(n,l){if(l)if((l=fe(l))instanceof Array)for(let t=0;t<l.length;t++)e(n,l[t]);else{if("function"==typeof l)throw Bn("Function/Class not supported",l);if(!l||"object"!=typeof l||!l.provide)throw Bn("Unexpected provider",l);{let e=fe(l.provide);const t=function(e){const n=function(e){let n=Dn;const l=e.deps;if(l&&l.length){n=[];for(let e=0;e<l.length;e++){let t=6,i=fe(l[e]);if(i instanceof Array)for(let e=0,n=i;e<n.length;e++){const l=n[e];l instanceof se||l==se?t|=1:l instanceof ue||l==ue?t&=-3:l instanceof re||l==re?t&=-5:i=l instanceof ie?l.token:fe(l)}n.push({token:i,options:t})}}else if(e.useExisting)n=[{token:fe(e.useExisting),options:6}];else if(!(l||we in e))throw Bn("'deps' required",e);return n}(e);let l=Mn,t=Dn,i=!1,s=fe(e.provide);if(we in e)t=e.useValue;else if(e.useFactory)l=e.useFactory;else if(e.useExisting);else if(e.useClass)i=!0,l=fe(e.useClass);else{if("function"!=typeof s)throw Bn("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",e);i=!0,l=s}return{deps:n,fn:l,useNew:i,value:t}}(l);if(!0===l.multi){let t=n.get(e);if(t){if(t.fn!==Fn)throw Gn(e)}else n.set(e,t={token:l.provide,deps:[],useNew:!1,fn:Fn,value:Dn});t.deps.push({token:e=l,options:6})}const i=n.get(e);if(i&&i.fn==Fn)throw Gn(e);n.set(e,t)}}}(t,e)}get(e,n,l=oe.Default){const t=this._records.get(e);try{return function e(n,l,t,i,s,r){try{return function(n,l,t,i,s,r){let u;if(!l||r&oe.SkipSelf)r&oe.Self||(u=i.get(n,s,oe.Default));else{if((u=l.value)==Ln)throw Error(Un+"Circular dependency");if(u===Dn){l.value=Ln;let n=void 0,s=l.useNew,r=l.fn,o=l.deps,a=Dn;if(o.length){a=[];for(let n=0;n<o.length;n++){const l=o[n],s=l.options,r=2&s?t.get(l.token):void 0;a.push(e(l.token,r,t,r||4&s?i:kn.NULL,1&s?null:kn.THROW_IF_NOT_FOUND,oe.Default))}}l.value=u=s?new r(...a):r.apply(n,a)}}return u}(n,l,t,i,s,r)}catch(u){throw u instanceof Error||(u=new Error(u)),(u[Ie]=u[Ie]||[]).unshift(n),l&&l.value==Ln&&(l.value=Dn),u}}(e,t,this._records,this.parent,n,l)}catch(i){return function(e,n,l,t){const i=e[Ie];throw n[_e]&&i.unshift(n[_e]),e.message=Ue("\n"+e.message,i,"StaticInjectorError",t),e[ye]=i,e[Ie]=null,e}(i,e,0,this.source)}}toString(){const e=[];return this._records.forEach((n,l)=>e.push(ge(l))),`StaticInjector[${e.join(", ")}]`}}function Gn(e){return Bn("Cannot mix multi providers and regular providers",e)}function Bn(e,n){return new Error(Ue(e,n,"StaticInjectorError"))}const Wn=new be("AnalyzeForEntryComponents");let Vn=null;function zn(){if(!Vn){const e=Oe.Symbol;if(e&&e.iterator)Vn=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<e.length;++n){const l=e[n];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Vn=l)}}}return Vn}function Yn(e,n){return e===n||"number"==typeof e&&"number"==typeof n&&isNaN(e)&&isNaN(n)}function $n(e,n){const l=jn(e),t=jn(n);if(l&&t)return function(e,n,l){const t=e[zn()](),i=n[zn()]();for(;;){const e=t.next(),n=i.next();if(e.done&&n.done)return!0;if(e.done||n.done)return!1;if(!l(e.value,n.value))return!1}}(e,n,$n);{const i=e&&("object"==typeof e||"function"==typeof e),s=n&&("object"==typeof n||"function"==typeof n);return!(l||!i||t||!s)||Yn(e,n)}}class Kn{constructor(e){this.wrapped=e}static wrap(e){return new Kn(e)}static unwrap(e){return Kn.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof Kn}}function jn(e){return!!Qn(e)&&(Array.isArray(e)||!(e instanceof Map)&&zn()in e)}function Qn(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function qn(e){return!!e&&"function"==typeof e.then}function Xn(e){return!!e&&"function"==typeof e.subscribe}class Zn{constructor(e,n,l){this.previousValue=e,this.currentValue=n,this.firstChange=l}isFirstChange(){return this.firstChange}}class Jn{}class el{}function nl(e){const n=Error(`No component factory found for ${ge(e)}. Did you add it to @NgModule.entryComponents?`);return n[ll]=e,n}const ll="ngComponent";class tl{resolveComponentFactory(e){throw nl(e)}}let il=(()=>{class e{}return e.NULL=new tl,e})();class sl{constructor(e,n,l){this._parent=n,this._ngModule=l,this._factories=new Map;for(let t=0;t<e.length;t++){const n=e[t];this._factories.set(n.componentType,n)}}resolveComponentFactory(e){let n=this._factories.get(e);if(!n&&this._parent&&(n=this._parent.resolveComponentFactory(e)),!n)throw nl(e);return new rl(n,this._ngModule)}}class rl extends el{constructor(e,n){super(),this.factory=e,this.ngModule=n,this.selector=e.selector,this.componentType=e.componentType,this.ngContentSelectors=e.ngContentSelectors,this.inputs=e.inputs,this.outputs=e.outputs}create(e,n,l,t){return this.factory.create(e,n,l,t||this.ngModule)}}function ul(...e){}let ol=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=()=>al(e),e})();const al=ul;class cl{}class hl{}const dl=function(){var e={Important:1,DashCase:2};return e[e.Important]="Important",e[e.DashCase]="DashCase",e}();let gl=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>pl(),e})();const pl=ul;class ml{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const fl=new ml("8.2.14");class Sl{constructor(){}supports(e){return jn(e)}create(e){return new vl(e)}}const El=(e,n)=>n;class vl{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||El}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,l=this._removalsHead,t=0,i=null;for(;n||l;){const s=!l||n&&n.currentIndex<Tl(l,t,i)?n:l,r=Tl(s,t,i),u=s.currentIndex;if(s===l)t--,l=l._nextRemoved;else if(n=n._next,null==s.previousIndex)t++;else{i||(i=[]);const e=r-t,n=u-t;if(e!=n){for(let l=0;l<e;l++){const t=l<i.length?i[l]:i[l]=0,s=t+l;n<=s&&s<e&&(i[l]=t+1)}i[s.previousIndex]=n-e}}r!==u&&e(s,r,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!jn(e))throw new Error(`Error trying to diff '${ge(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n,l,t,i=this._itHead,s=!1;if(Array.isArray(e)){this.length=e.length;for(let n=0;n<this.length;n++)t=this._trackByFn(n,l=e[n]),null!==i&&Yn(i.trackById,t)?(s&&(i=this._verifyReinsertion(i,l,t,n)),Yn(i.item,l)||this._addIdentityChange(i,l)):(i=this._mismatch(i,l,t,n),s=!0),i=i._next}else n=0,function(e,n){if(Array.isArray(e))for(let l=0;l<e.length;l++)n(e[l]);else{const l=e[zn()]();let t;for(;!(t=l.next()).done;)n(t.value)}}(e,e=>{t=this._trackByFn(n,e),null!==i&&Yn(i.trackById,t)?(s&&(i=this._verifyReinsertion(i,e,t,n)),Yn(i.item,e)||this._addIdentityChange(i,e)):(i=this._mismatch(i,e,t,n),s=!0),i=i._next,n++}),this.length=n;return this._truncate(i),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e,n;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=n)e.previousIndex=e.currentIndex,n=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,l,t){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(l,t))?(Yn(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,i,t)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Yn(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,i,t)):e=this._addAfter(new Rl(n,l),i,t),e}_verifyReinsertion(e,n,l,t){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==i?e=this._reinsertAfter(i,e._prev,t):e.currentIndex!=t&&(e.currentIndex=t,this._addToMoves(e,t)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const t=e._prevRemoved,i=e._nextRemoved;return null===t?this._removalsHead=i:t._nextRemoved=i,null===i?this._removalsTail=t:i._prevRemoved=t,this._insertAfter(e,n,l),this._addToMoves(e,l),e}_moveAfter(e,n,l){return this._unlink(e),this._insertAfter(e,n,l),this._addToMoves(e,l),e}_addAfter(e,n,l){return this._insertAfter(e,n,l),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,l){const t=null===n?this._itHead:n._next;return e._next=t,e._prev=n,null===t?this._itTail=e:t._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new bl),this._linkedRecords.put(e),e.currentIndex=l,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,l=e._next;return null===n?this._itHead=l:n._next=l,null===l?this._itTail=n:l._prev=n,e}_addToMoves(e,n){return e.previousIndex===n?e:(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e,e)}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new bl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Rl{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ol{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===n||n<=l.currentIndex)&&Yn(l.trackById,e))return l;return null}remove(e){const n=e._prevDup,l=e._nextDup;return null===n?this._head=l:n._nextDup=l,null===l?this._tail=n:l._prevDup=n,null===this._head}}class bl{constructor(){this.map=new Map}put(e){const n=e.trackById;let l=this.map.get(n);l||(l=new Ol,this.map.set(n,l)),l.add(e)}get(e,n){const l=this.map.get(e);return l?l.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Tl(e,n,l){const t=e.previousIndex;if(null===t)return t;let i=0;return l&&t<l.length&&(i=l[t]),t+n+i}class Cl{constructor(){}supports(e){return e instanceof Map||Qn(e)}create(){return new Il}}class Il{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let n;for(n=this._mapHead;null!==n;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}diff(e){if(e){if(!(e instanceof Map||Qn(e)))throw new Error(`Error trying to diff '${ge(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,l)=>{if(n&&n.key===l)this._maybeAddToChanges(n,e),this._appendAfter=n,n=n._next;else{const t=this._getOrCreateRecordForKey(l,e);n=this._insertBeforeOrAppend(n,t)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let e=n;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){const l=e._prev;return n._next=e,n._prev=l,e._prev=n,l&&(l._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){const l=this._records.get(e);this._maybeAddToChanges(l,n);const t=l._prev,i=l._next;return t&&(t._next=i),i&&(i._prev=t),l._next=null,l._prev=null,l}const l=new yl(e);return this._records.set(e,l),l.currentValue=n,this._addToAdditions(l),l}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Yn(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(l=>n(e[l],l))}}class yl{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let Al=(()=>{class e{constructor(e){this.factories=e}static create(n,l){if(null!=l){const e=l.factories.slice();n=n.concat(e)}return new e(n)}static extend(n){return{provide:e,useFactory:l=>{if(!l)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(n,l)},deps:[[e,new ue,new se]]}}find(e){const n=this.factories.find(n=>n.supports(e));if(null!=n)return n;throw new Error(`Cannot find a differ supporting object '${e}' of type '${l=e,l.name||typeof l}'`);var l}}return e.ngInjectableDef=ce({token:e,providedIn:"root",factory:()=>new e([new Sl])}),e})(),Nl=(()=>{class e{constructor(e){this.factories=e}static create(n,l){if(l){const e=l.factories.slice();n=n.concat(e)}return new e(n)}static extend(n){return{provide:e,useFactory:l=>{if(!l)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(n,l)},deps:[[e,new ue,new se]]}}find(e){const n=this.factories.find(n=>n.supports(e));if(n)return n;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.ngInjectableDef=ce({token:e,providedIn:"root",factory:()=>new e([new Cl])}),e})();const _l=[new Cl],wl=new Al([new Sl]),Pl=new Nl(_l);let xl=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>kl(e,ol),e})();const kl=ul;let Ml=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Dl(e,ol),e})();const Dl=ul;function Ll(e,n,l,t){let i=`ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '${n}'. Current value: '${l}'.`;return t&&(i+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(e,n){const l=new Error(e);return Fl(l,n),l}(i,e)}function Fl(e,n){e[Ye]=n,e[Ke]=n.logError.bind(n)}function Ul(e){return new Error(`ViewDestroyedError: Attempt to use a destroyed view: ${e}`)}function Hl(e,n,l){const t=e.state,i=1792&t;return i===n?(e.state=-1793&t|l,e.initIndex=-1,!0):i===l}function Gl(e,n,l){return(1792&e.state)===n&&e.initIndex<=l&&(e.initIndex=l+1,!0)}function Bl(e,n){return e.nodes[n]}function Wl(e,n){return e.nodes[n]}function Vl(e,n){return e.nodes[n]}function zl(e,n){return e.nodes[n]}function Yl(e,n){return e.nodes[n]}const $l={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0},Kl=()=>{},jl=new Map;function Ql(e){let n=jl.get(e);return n||(n=ge(e)+"_"+jl.size,jl.set(e,n)),n}function ql(e,n,l,t){if(Kn.isWrapped(t)){t=Kn.unwrap(t);const i=e.def.nodes[n].bindingIndex+l,s=Kn.unwrap(e.oldValues[i]);e.oldValues[i]=new Kn(s)}return t}const Xl="$$undefined",Zl="$$empty";function Jl(e){return{id:Xl,styles:e.styles,encapsulation:e.encapsulation,data:e.data}}let et=0;function nt(e,n,l,t){return!(!(2&e.state)&&Yn(e.oldValues[n.bindingIndex+l],t))}function lt(e,n,l,t){return!!nt(e,n,l,t)&&(e.oldValues[n.bindingIndex+l]=t,!0)}function tt(e,n,l,t){const i=e.oldValues[n.bindingIndex+l];if(1&e.state||!$n(i,t)){const s=n.bindings[l].name;throw Ll($l.createDebugContext(e,n.nodeIndex),`${s}: ${i}`,`${s}: ${t}`,0!=(1&e.state))}}function it(e){let n=e;for(;n;)2&n.def.flags&&(n.state|=8),n=n.viewContainerParent||n.parent}function st(e,n){let l=e;for(;l&&l!==n;)l.state|=64,l=l.viewContainerParent||l.parent}function rt(e,n,l,t){try{return it(33554432&e.def.nodes[n].flags?Wl(e,n).componentView:e),$l.handleEvent(e,n,l,t)}catch(i){e.root.errorHandler.handleError(i)}}function ut(e){return e.parent?Wl(e.parent,e.parentNodeDef.nodeIndex):null}function ot(e){return e.parent?e.parentNodeDef.parent:null}function at(e,n){switch(201347067&n.flags){case 1:return Wl(e,n.nodeIndex).renderElement;case 2:return Bl(e,n.nodeIndex).renderText}}function ct(e){return!!e.parent&&!!(32768&e.parentNodeDef.flags)}function ht(e){return!(!e.parent||32768&e.parentNodeDef.flags)}function dt(e){return 1<<e%32}function gt(e){const n={};let l=0;const t={};return e&&e.forEach(([e,i])=>{"number"==typeof e?(n[e]=i,l|=dt(e)):t[e]=i}),{matchedQueries:n,references:t,matchedQueryIds:l}}function pt(e,n){return e.map(e=>{let l,t;return Array.isArray(e)?[t,l]=e:(t=0,l=e),l&&("function"==typeof l||"object"==typeof l)&&n&&Object.defineProperty(l,_e,{value:n,configurable:!0}),{flags:t,token:l,tokenKey:Ql(l)}})}function mt(e,n,l){let t=l.renderParent;return t?0==(1&t.flags)||0==(33554432&t.flags)||t.element.componentRendererType&&t.element.componentRendererType.encapsulation===Ve.Native?Wl(e,l.renderParent.nodeIndex).renderElement:void 0:n}const ft=new WeakMap;function St(e){let n=ft.get(e);return n||((n=e(()=>Kl)).factory=e,ft.set(e,n)),n}function Et(e,n,l,t,i){3===n&&(l=e.renderer.parentNode(at(e,e.def.lastRenderRootNode))),vt(e,n,0,e.def.nodes.length-1,l,t,i)}function vt(e,n,l,t,i,s,r){for(let u=l;u<=t;u++){const l=e.def.nodes[u];11&l.flags&&Ot(e,l,n,i,s,r),u+=l.childCount}}function Rt(e,n,l,t,i,s){let r=e;for(;r&&!ct(r);)r=r.parent;const u=r.parent,o=ot(r),a=o.nodeIndex+o.childCount;for(let c=o.nodeIndex+1;c<=a;c++){const e=u.def.nodes[c];e.ngContentIndex===n&&Ot(u,e,l,t,i,s),c+=e.childCount}if(!u.parent){const r=e.root.projectableNodes[n];if(r)for(let n=0;n<r.length;n++)bt(e,r[n],l,t,i,s)}}function Ot(e,n,l,t,i,s){if(8&n.flags)Rt(e,n.ngContent.index,l,t,i,s);else{const r=at(e,n);if(3===l&&33554432&n.flags&&48&n.bindingFlags?(16&n.bindingFlags&&bt(e,r,l,t,i,s),32&n.bindingFlags&&bt(Wl(e,n.nodeIndex).componentView,r,l,t,i,s)):bt(e,r,l,t,i,s),16777216&n.flags){const r=Wl(e,n.nodeIndex).viewContainer._embeddedViews;for(let e=0;e<r.length;e++)Et(r[e],l,t,i,s)}1&n.flags&&!n.element.name&&vt(e,l,n.nodeIndex+1,n.nodeIndex+n.childCount,t,i,s)}}function bt(e,n,l,t,i,s){const r=e.renderer;switch(l){case 1:r.appendChild(t,n);break;case 2:r.insertBefore(t,n,i);break;case 3:r.removeChild(t,n);break;case 0:s.push(n)}}const Tt=/^:([^:]+):(.+)$/;function Ct(e){if(":"===e[0]){const n=e.match(Tt);return[n[1],n[2]]}return["",e]}function It(e){let n=0;for(let l=0;l<e.length;l++)n|=e[l].flags;return n}function yt(e,n,l,t,i,s,r,u,o,a,c,h,d,g,p,m,f,S,E,v){switch(e){case 1:return n+At(l)+t;case 2:return n+At(l)+t+At(i)+s;case 3:return n+At(l)+t+At(i)+s+At(r)+u;case 4:return n+At(l)+t+At(i)+s+At(r)+u+At(o)+a;case 5:return n+At(l)+t+At(i)+s+At(r)+u+At(o)+a+At(c)+h;case 6:return n+At(l)+t+At(i)+s+At(r)+u+At(o)+a+At(c)+h+At(d)+g;case 7:return n+At(l)+t+At(i)+s+At(r)+u+At(o)+a+At(c)+h+At(d)+g+At(p)+m;case 8:return n+At(l)+t+At(i)+s+At(r)+u+At(o)+a+At(c)+h+At(d)+g+At(p)+m+At(f)+S;case 9:return n+At(l)+t+At(i)+s+At(r)+u+At(o)+a+At(c)+h+At(d)+g+At(p)+m+At(f)+S+At(E)+v;default:throw new Error("Does not support more than 9 expressions")}}function At(e){return null!=e?e.toString():""}const Nt=new Object,_t=Ql(kn),wt=Ql(Te),Pt=Ql(He);function xt(e,n,l,t){return l=fe(l),{index:-1,deps:pt(t,ge(n)),flags:e,token:n,value:l}}function kt(e,n,l=kn.THROW_IF_NOT_FOUND){const t=ke(e);try{if(8&n.flags)return n.token;if(2&n.flags&&(l=null),1&n.flags)return e._parent.get(n.token,l);const r=n.tokenKey;switch(r){case _t:case wt:case Pt:return e}const u=e._def.providersByKey[r];let o;if(u){let n=e._providers[u.index];return void 0===n&&(n=e._providers[u.index]=Mt(e,u)),n===Nt?void 0:n}if((o=he(n.token))&&(i=e,null!=(s=o).providedIn&&(function(e,n){return e._def.modules.indexOf(n)>-1}(i,s.providedIn)||"root"===s.providedIn&&i._def.isRoot))){const l=e._providers.length;return e._def.providers[l]=e._def.providersByKey[n.tokenKey]={flags:5120,value:o.factory,deps:[],index:l,token:n.token},e._providers[l]=Nt,e._providers[l]=Mt(e,e._def.providersByKey[n.tokenKey])}return 4&n.flags?l:e._parent.get(n.token,l)}finally{ke(t)}var i,s}function Mt(e,n){let l;switch(201347067&n.flags){case 512:l=function(e,n,l){const t=l.length;switch(t){case 0:return new n;case 1:return new n(kt(e,l[0]));case 2:return new n(kt(e,l[0]),kt(e,l[1]));case 3:return new n(kt(e,l[0]),kt(e,l[1]),kt(e,l[2]));default:const i=new Array(t);for(let n=0;n<t;n++)i[n]=kt(e,l[n]);return new n(...i)}}(e,n.value,n.deps);break;case 1024:l=function(e,n,l){const t=l.length;switch(t){case 0:return n();case 1:return n(kt(e,l[0]));case 2:return n(kt(e,l[0]),kt(e,l[1]));case 3:return n(kt(e,l[0]),kt(e,l[1]),kt(e,l[2]));default:const i=Array(t);for(let n=0;n<t;n++)i[n]=kt(e,l[n]);return n(...i)}}(e,n.value,n.deps);break;case 2048:l=kt(e,n.deps[0]);break;case 256:l=n.value}return l===Nt||null===l||"object"!=typeof l||131072&n.flags||"function"!=typeof l.ngOnDestroy||(n.flags|=131072),void 0===l?Nt:l}function Dt(e,n){const l=e.viewContainer._embeddedViews;if((null==n||n>=l.length)&&(n=l.length-1),n<0)return null;const t=l[n];return t.viewContainerParent=null,We(l,n),$l.dirtyParentQueries(t),Ft(t),t}function Lt(e,n,l){const t=n?at(n,n.def.lastRenderRootNode):e.renderElement,i=l.renderer.parentNode(t),s=l.renderer.nextSibling(t);Et(l,2,i,s,void 0)}function Ft(e){Et(e,3,null,null,void 0)}const Ut=new Object;function Ht(e,n,l,t,i,s){return new Gt(e,n,l,t,i,s)}class Gt extends el{constructor(e,n,l,t,i,s){super(),this.selector=e,this.componentType=n,this._inputs=t,this._outputs=i,this.ngContentSelectors=s,this.viewDefFactory=l}get inputs(){const e=[],n=this._inputs;for(let l in n)e.push({propName:l,templateName:n[l]});return e}get outputs(){const e=[];for(let n in this._outputs)e.push({propName:n,templateName:this._outputs[n]});return e}create(e,n,l,t){if(!t)throw new Error("ngModule should be provided");const i=St(this.viewDefFactory),s=i.nodes[0].element.componentProvider.nodeIndex,r=$l.createRootView(e,n||[],l,i,t,Ut),u=Vl(r,s).instance;return l&&r.renderer.setAttribute(Wl(r,0).renderElement,"ng-version",fl.full),new Bt(r,new Yt(r),u)}}class Bt extends Jn{constructor(e,n,l){super(),this._view=e,this._viewRef=n,this._component=l,this._elDef=this._view.def.nodes[0],this.hostView=n,this.changeDetectorRef=n,this.instance=l}get location(){return new ol(Wl(this._view,this._elDef.nodeIndex).renderElement)}get injector(){return new Qt(this._view,this._elDef)}get componentType(){return this._component.constructor}destroy(){this._viewRef.destroy()}onDestroy(e){this._viewRef.onDestroy(e)}}function Wt(e,n,l){return new Vt(e,n,l)}class Vt{constructor(e,n,l){this._view=e,this._elDef=n,this._data=l,this._embeddedViews=[]}get element(){return new ol(this._data.renderElement)}get injector(){return new Qt(this._view,this._elDef)}get parentInjector(){let e=this._view,n=this._elDef.parent;for(;!n&&e;)n=ot(e),e=e.parent;return e?new Qt(e,n):new Qt(this._view,null)}clear(){for(let e=this._embeddedViews.length-1;e>=0;e--){const n=Dt(this._data,e);$l.destroyView(n)}}get(e){const n=this._embeddedViews[e];if(n){const e=new Yt(n);return e.attachToViewContainerRef(this),e}return null}get length(){return this._embeddedViews.length}createEmbeddedView(e,n,l){const t=e.createEmbeddedView(n||{});return this.insert(t,l),t}createComponent(e,n,l,t,i){const s=l||this.parentInjector;i||e instanceof rl||(i=s.get(He));const r=e.create(s,t,void 0,i);return this.insert(r.hostView,n),r}insert(e,n){if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");const l=e;return function(e,n,l,t){let i=n.viewContainer._embeddedViews;null==l&&(l=i.length),t.viewContainerParent=e,Be(i,l,t),function(e,n){const l=ut(n);if(!l||l===e||16&n.state)return;n.state|=16;let t=l.template._projectedViews;t||(t=l.template._projectedViews=[]),t.push(n),function(e,n){if(4&n.flags)return;e.nodeFlags|=4,n.flags|=4;let l=n.parent;for(;l;)l.childFlags|=4,l=l.parent}(n.parent.def,n.parentNodeDef)}(n,t),$l.dirtyParentQueries(t),Lt(n,l>0?i[l-1]:null,t)}(this._view,this._data,n,l._view),l.attachToViewContainerRef(this),e}move(e,n){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");const l=this._embeddedViews.indexOf(e._view);return function(e,n,l){const t=e.viewContainer._embeddedViews,i=t[n];We(t,n),null==l&&(l=t.length),Be(t,l,i),$l.dirtyParentQueries(i),Ft(i),Lt(e,l>0?t[l-1]:null,i)}(this._data,l,n),e}indexOf(e){return this._embeddedViews.indexOf(e._view)}remove(e){const n=Dt(this._data,e);n&&$l.destroyView(n)}detach(e){const n=Dt(this._data,e);return n?new Yt(n):null}}function zt(e){return new Yt(e)}class Yt{constructor(e){this._view=e,this._viewContainerRef=null,this._appRef=null}get rootNodes(){return function(e){const n=[];return Et(e,0,void 0,void 0,n),n}(this._view)}get context(){return this._view.context}get destroyed(){return 0!=(128&this._view.state)}markForCheck(){it(this._view)}detach(){this._view.state&=-5}detectChanges(){const e=this._view.root.rendererFactory;e.begin&&e.begin();try{$l.checkAndUpdateView(this._view)}finally{e.end&&e.end()}}checkNoChanges(){$l.checkNoChangesView(this._view)}reattach(){this._view.state|=4}onDestroy(e){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(e)}destroy(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),$l.destroyView(this._view)}detachFromAppRef(){this._appRef=null,Ft(this._view),$l.dirtyParentQueries(this._view)}attachToAppRef(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}attachToViewContainerRef(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e}}function $t(e,n){return new Kt(e,n)}class Kt extends xl{constructor(e,n){super(),this._parentView=e,this._def=n}createEmbeddedView(e){return new Yt($l.createEmbeddedView(this._parentView,this._def,this._def.element.template,e))}get elementRef(){return new ol(Wl(this._parentView,this._def.nodeIndex).renderElement)}}function jt(e,n){return new Qt(e,n)}class Qt{constructor(e,n){this.view=e,this.elDef=n}get(e,n=kn.THROW_IF_NOT_FOUND){return $l.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:e,tokenKey:Ql(e)},n)}}function qt(e,n){const l=e.def.nodes[n];if(1&l.flags){const n=Wl(e,l.nodeIndex);return l.element.template?n.template:n.renderElement}if(2&l.flags)return Bl(e,l.nodeIndex).renderText;if(20240&l.flags)return Vl(e,l.nodeIndex).instance;throw new Error(`Illegal state: read nodeValue for node index ${n}`)}function Xt(e){return new Zt(e.renderer)}class Zt{constructor(e){this.delegate=e}selectRootElement(e){return this.delegate.selectRootElement(e)}createElement(e,n){const[l,t]=Ct(n),i=this.delegate.createElement(t,l);return e&&this.delegate.appendChild(e,i),i}createViewRoot(e){return e}createTemplateAnchor(e){const n=this.delegate.createComment("");return e&&this.delegate.appendChild(e,n),n}createText(e,n){const l=this.delegate.createText(n);return e&&this.delegate.appendChild(e,l),l}projectNodes(e,n){for(let l=0;l<n.length;l++)this.delegate.appendChild(e,n[l])}attachViewAfter(e,n){const l=this.delegate.parentNode(e),t=this.delegate.nextSibling(e);for(let i=0;i<n.length;i++)this.delegate.insertBefore(l,n[i],t)}detachView(e){for(let n=0;n<e.length;n++){const l=e[n],t=this.delegate.parentNode(l);this.delegate.removeChild(t,l)}}destroyView(e,n){for(let l=0;l<n.length;l++)this.delegate.destroyNode(n[l])}listen(e,n,l){return this.delegate.listen(e,n,l)}listenGlobal(e,n,l){return this.delegate.listen(e,n,l)}setElementProperty(e,n,l){this.delegate.setProperty(e,n,l)}setElementAttribute(e,n,l){const[t,i]=Ct(n);null!=l?this.delegate.setAttribute(e,i,l,t):this.delegate.removeAttribute(e,i,t)}setBindingDebugInfo(e,n,l){}setElementClass(e,n,l){l?this.delegate.addClass(e,n):this.delegate.removeClass(e,n)}setElementStyle(e,n,l){null!=l?this.delegate.setStyle(e,n,l):this.delegate.removeStyle(e,n)}invokeElementMethod(e,n,l){e[n].apply(e,l)}setText(e,n){this.delegate.setValue(e,n)}animate(){throw new Error("Renderer.animate is no longer supported!")}}function Jt(e,n,l,t){return new ei(e,n,l,t)}class ei{constructor(e,n,l,t){this._moduleType=e,this._parent=n,this._bootstrapComponents=l,this._def=t,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(e){const n=e._def,l=e._providers=new Array(n.providers.length);for(let t=0;t<n.providers.length;t++){const i=n.providers[t];4096&i.flags||void 0===l[t]&&(l[t]=Mt(e,i))}}(this)}get(e,n=kn.THROW_IF_NOT_FOUND,l=oe.Default){let t=0;return l&oe.SkipSelf?t|=1:l&oe.Self&&(t|=4),kt(this,{token:e,tokenKey:Ql(e),flags:t},n)}get instance(){return this.get(this._moduleType)}get componentFactoryResolver(){return this.get(il)}destroy(){if(this._destroyed)throw new Error(`The ng module ${ge(this.instance.constructor)} has already been destroyed.`);this._destroyed=!0,function(e,n){const l=e._def,t=new Set;for(let i=0;i<l.providers.length;i++)if(131072&l.providers[i].flags){const n=e._providers[i];if(n&&n!==Nt){const e=n.ngOnDestroy;"function"!=typeof e||t.has(n)||(e.apply(n),t.add(n))}}}(this),this._destroyListeners.forEach(e=>e())}onDestroy(e){this._destroyListeners.push(e)}}const ni=Ql(cl),li=Ql(gl),ti=Ql(ol),ii=Ql(Ml),si=Ql(xl),ri=Ql(_n),ui=Ql(kn),oi=Ql(Te);function ai(e,n,l,t,i,s,r,u){const o=[];if(r)for(let c in r){const[e,n]=r[c];o[e]={flags:8,name:c,nonMinifiedName:n,ns:null,securityContext:null,suffix:null}}const a=[];if(u)for(let c in u)a.push({type:1,propName:c,target:null,eventName:u[c]});return di(e,n|=16384,l,t,i,i,s,o,a)}function ci(e,n,l){return di(-1,e|=16,null,0,n,n,l)}function hi(e,n,l,t,i){return di(-1,e,n,0,l,t,i)}function di(e,n,l,t,i,s,r,u,o){const{matchedQueries:a,references:c,matchedQueryIds:h}=gt(l);o||(o=[]),u||(u=[]),s=fe(s);const d=pt(r,ge(i));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:n,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:a,matchedQueryIds:h,references:c,ngContentIndex:-1,childCount:t,bindings:u,bindingFlags:It(u),outputs:o,element:null,provider:{token:i,value:s,deps:d},text:null,query:null,ngContent:null}}function gi(e,n){return Si(e,n)}function pi(e,n){let l=e;for(;l.parent&&!ct(l);)l=l.parent;return Ei(l.parent,ot(l),!0,n.provider.value,n.provider.deps)}function mi(e,n){const l=Ei(e,n.parent,(32768&n.flags)>0,n.provider.value,n.provider.deps);if(n.outputs.length)for(let t=0;t<n.outputs.length;t++){const i=n.outputs[t],s=l[i.propName];if(!Xn(s))throw new Error(`@Output ${i.propName} not initialized in '${l.constructor.name}'.`);{const l=s.subscribe(fi(e,n.parent.nodeIndex,i.eventName));e.disposables[n.outputIndex+t]=l.unsubscribe.bind(l)}}return l}function fi(e,n,l){return t=>rt(e,n,l,t)}function Si(e,n){const l=(8192&n.flags)>0,t=n.provider;switch(201347067&n.flags){case 512:return Ei(e,n.parent,l,t.value,t.deps);case 1024:return function(e,n,l,t,i){const s=i.length;switch(s){case 0:return t();case 1:return t(Ri(e,n,l,i[0]));case 2:return t(Ri(e,n,l,i[0]),Ri(e,n,l,i[1]));case 3:return t(Ri(e,n,l,i[0]),Ri(e,n,l,i[1]),Ri(e,n,l,i[2]));default:const r=Array(s);for(let t=0;t<s;t++)r[t]=Ri(e,n,l,i[t]);return t(...r)}}(e,n.parent,l,t.value,t.deps);case 2048:return Ri(e,n.parent,l,t.deps[0]);case 256:return t.value}}function Ei(e,n,l,t,i){const s=i.length;switch(s){case 0:return new t;case 1:return new t(Ri(e,n,l,i[0]));case 2:return new t(Ri(e,n,l,i[0]),Ri(e,n,l,i[1]));case 3:return new t(Ri(e,n,l,i[0]),Ri(e,n,l,i[1]),Ri(e,n,l,i[2]));default:const r=new Array(s);for(let t=0;t<s;t++)r[t]=Ri(e,n,l,i[t]);return new t(...r)}}const vi={};function Ri(e,n,l,t,i=kn.THROW_IF_NOT_FOUND){if(8&t.flags)return t.token;const s=e;2&t.flags&&(i=null);const r=t.tokenKey;r===ri&&(l=!(!n||!n.element.componentView)),n&&1&t.flags&&(l=!1,n=n.parent);let u=e;for(;u;){if(n)switch(r){case ni:return Xt(Oi(u,n,l));case li:return Oi(u,n,l).renderer;case ti:return new ol(Wl(u,n.nodeIndex).renderElement);case ii:return Wl(u,n.nodeIndex).viewContainer;case si:if(n.element.template)return Wl(u,n.nodeIndex).template;break;case ri:return zt(Oi(u,n,l));case ui:case oi:return jt(u,n);default:const e=(l?n.element.allProviders:n.element.publicProviders)[r];if(e){let n=Vl(u,e.nodeIndex);return n||(n={instance:Si(u,e)},u.nodes[e.nodeIndex]=n),n.instance}}l=ct(u),n=ot(u),u=u.parent,4&t.flags&&(u=null)}const o=s.root.injector.get(t.token,vi);return o!==vi||i===vi?o:s.root.ngModule.injector.get(t.token,i)}function Oi(e,n,l){let t;if(l)t=Wl(e,n.nodeIndex).componentView;else for(t=e;t.parent&&!ct(t);)t=t.parent;return t}function bi(e,n,l,t,i,s){if(32768&l.flags){const n=Wl(e,l.parent.nodeIndex).componentView;2&n.def.flags&&(n.state|=8)}if(n.instance[l.bindings[t].name]=i,524288&l.flags){s=s||{};const n=Kn.unwrap(e.oldValues[l.bindingIndex+t]);s[l.bindings[t].nonMinifiedName]=new Zn(n,i,0!=(2&e.state))}return e.oldValues[l.bindingIndex+t]=i,s}function Ti(e,n){if(!(e.def.nodeFlags&n))return;const l=e.def.nodes;let t=0;for(let i=0;i<l.length;i++){const s=l[i];let r=s.parent;for(!r&&s.flags&n&&Ii(e,i,s.flags&n,t++),0==(s.childFlags&n)&&(i+=s.childCount);r&&1&r.flags&&i===r.nodeIndex+r.childCount;)r.directChildFlags&n&&(t=Ci(e,r,n,t)),r=r.parent}}function Ci(e,n,l,t){for(let i=n.nodeIndex+1;i<=n.nodeIndex+n.childCount;i++){const n=e.def.nodes[i];n.flags&l&&Ii(e,i,n.flags&l,t++),i+=n.childCount}return t}function Ii(e,n,l,t){const i=Vl(e,n);if(!i)return;const s=i.instance;s&&($l.setCurrentNode(e,n),1048576&l&&Gl(e,512,t)&&s.ngAfterContentInit(),2097152&l&&s.ngAfterContentChecked(),4194304&l&&Gl(e,768,t)&&s.ngAfterViewInit(),8388608&l&&s.ngAfterViewChecked(),131072&l&&s.ngOnDestroy())}const yi=new be("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>ze}),Ai={},Ni=function(){var e={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencySymbol:15,CurrencyName:16,Currencies:17,PluralCase:18,ExtraData:19};return e[e.LocaleId]="LocaleId",e[e.DayPeriodsFormat]="DayPeriodsFormat",e[e.DayPeriodsStandalone]="DayPeriodsStandalone",e[e.DaysFormat]="DaysFormat",e[e.DaysStandalone]="DaysStandalone",e[e.MonthsFormat]="MonthsFormat",e[e.MonthsStandalone]="MonthsStandalone",e[e.Eras]="Eras",e[e.FirstDayOfWeek]="FirstDayOfWeek",e[e.WeekendRange]="WeekendRange",e[e.DateFormat]="DateFormat",e[e.TimeFormat]="TimeFormat",e[e.DateTimeFormat]="DateTimeFormat",e[e.NumberSymbols]="NumberSymbols",e[e.NumberFormats]="NumberFormats",e[e.CurrencySymbol]="CurrencySymbol",e[e.CurrencyName]="CurrencyName",e[e.Currencies]="Currencies",e[e.PluralCase]="PluralCase",e[e.ExtraData]="ExtraData",e}(),_i=void 0;var wi=["en",[["a","p"],["AM","PM"],_i],[["AM","PM"],_i,_i],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],_i,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],_i,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",_i,"{1} 'at' {0}",_i],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(e){let n=Math.floor(Math.abs(e)),l=e.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===l?1:5}];function Pi(e){const n=e.toLowerCase().replace(/_/g,"-");let l=Ai[n];if(l)return l;const t=n.split("-")[0];if(l=Ai[t])return l;if("en"===t)return wi;throw new Error(`Missing locale data for the locale "${e}".`)}const xi="en-US";let ki=xi;function Mi(e){var n;n="Expected localeId to be defined",null==e&&function(e){throw new Error(`ASSERTION ERROR: ${e}`)}(n),"string"==typeof e&&(ki=e.toLowerCase().replace(/_/g,"-"))}class Di extends I{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,l){let t,i=e=>null,s=()=>null;e&&"object"==typeof e?(t=this.__isAsync?n=>{setTimeout(()=>e.next(n))}:n=>{e.next(n)},e.error&&(i=this.__isAsync?n=>{setTimeout(()=>e.error(n))}:n=>{e.error(n)}),e.complete&&(s=this.__isAsync?()=>{setTimeout(()=>e.complete())}:()=>{e.complete()})):(t=this.__isAsync?n=>{setTimeout(()=>e(n))}:n=>{e(n)},n&&(i=this.__isAsync?e=>{setTimeout(()=>n(e))}:e=>{n(e)}),l&&(s=this.__isAsync?()=>{setTimeout(()=>l())}:()=>{l()}));const r=super.subscribe(t,i,s);return e instanceof h&&e.add(r),r}}function Li(){return this._results[zn()]()}class Fi{constructor(){this.dirty=!0,this._results=[],this.changes=new Di,this.length=0;const e=zn(),n=Fi.prototype;n[e]||(n[e]=Li)}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e){this._results=function e(n,l){void 0===l&&(l=n);for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)?(l===n&&(l=n.slice(0,t)),e(i,l)):l!==n&&l.push(i)}return l}(e),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}const Ui=new be("Application Initializer");let Hi=(()=>(class{constructor(e){this.appInits=e,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}runInitializers(){if(this.initialized)return;const e=[],n=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const n=this.appInits[l]();qn(n)&&e.push(n)}Promise.all(e).then(()=>{n()}).catch(e=>{this.reject(e)}),0===e.length&&n(),this.initialized=!0}}))();const Gi=new be("AppId");function Bi(){return`${Wi()}${Wi()}${Wi()}`}function Wi(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Vi=new be("Platform Initializer"),zi=new be("Platform ID"),Yi=new be("appBootstrapListener");let $i=(()=>(class{log(e){console.log(e)}warn(e){console.warn(e)}}))();const Ki=new be("LocaleId"),ji=!1;function Qi(){throw new Error("Runtime compiler is not loaded")}const qi=Qi,Xi=Qi,Zi=Qi,Ji=Qi;let es,ns,ls=(()=>(class{constructor(){this.compileModuleSync=qi,this.compileModuleAsync=Xi,this.compileModuleAndAllComponentsSync=Zi,this.compileModuleAndAllComponentsAsync=Ji}clearCache(){}clearCacheFor(e){}getModuleId(e){}}))();class ts{}function is(){const e=Oe.wtf;return!(!e||!(es=e.trace)||(ns=es.events,0))}const ss=is();function rs(e,n){return null}const us=ss?function(e,n=null){return ns.createScope(e,n)}:(e,n)=>rs,os=ss?function(e,n){return es.leaveScope(e,n),n}:(e,n)=>n,as=(()=>Promise.resolve(0))();function cs(e){"undefined"==typeof Zone?as.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class hs{constructor({enableLongStackTrace:e=!1}){if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Di(!1),this.onMicrotaskEmpty=new Di(!1),this.onStable=new Di(!1),this.onError=new Di(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");var n;Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(n=this)._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,l,t,i,s,r)=>{try{return ms(n),e.invokeTask(t,i,s,r)}finally{fs(n)}},onInvoke:(e,l,t,i,s,r,u)=>{try{return ms(n),e.invoke(t,i,s,r,u)}finally{fs(n)}},onHasTask:(e,l,t,i)=>{e.hasTask(t,i),l===t&&("microTask"==i.change?(n.hasPendingMicrotasks=i.microTask,ps(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,l,t,i)=>(e.handleError(t,i),n.runOutsideAngular(()=>n.onError.emit(i)),!1)})}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!hs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(hs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,n,l){return this._inner.run(e,n,l)}runTask(e,n,l,t){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+t,e,gs,ds,ds);try{return i.runTask(s,n,l)}finally{i.cancelTask(s)}}runGuarded(e,n,l){return this._inner.runGuarded(e,n,l)}runOutsideAngular(e){return this._outer.run(e)}}function ds(){}const gs={};function ps(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function ms(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function fs(e){e._nesting--,ps(e)}class Ss{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Di,this.onMicrotaskEmpty=new Di,this.onStable=new Di,this.onError=new Di}run(e){return e()}runGuarded(e){return e()}runOutsideAngular(e){return e()}runTask(e){return e()}}let Es=(()=>(class{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{hs.assertNotInAngularZone(),cs(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())cs(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>!n.updateCb||!n.updateCb(e)||(clearTimeout(n.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,n,l){let t=-1;n&&n>0&&(t=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==t),e(this._didWork,this.getPendingTasks())},n)),this._callbacks.push({doneCb:e,timeoutId:t,updateCb:l})}whenStable(e,n,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,n,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,n,l){return[]}}))(),vs=(()=>{class e{constructor(){this._applications=new Map,bs.addToWindow(this)}registerApplication(e,n){this._applications.set(e,n)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,n=!0){return bs.findTestabilityInTree(this,e,n)}}return e.ctorParameters=()=>[],e})();class Rs{addToWindow(e){}findTestabilityInTree(e,n,l){return null}}let Os,bs=new Rs,Ts=function(e){return e instanceof rl};const Cs=new be("AllowMultipleToken");class Is{constructor(e,n){this.name=e,this.token=n}}function ys(e,n,l=[]){const t=`Platform: ${n}`,i=new be(t);return(n=[])=>{let s=As();if(!s||s.injector.get(Cs,!1))if(e)e(l.concat(n).concat({provide:i,useValue:!0}));else{const e=l.concat(n).concat({provide:i,useValue:!0});!function(e){if(Os&&!Os.destroyed&&!Os.injector.get(Cs,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Os=e.get(Ns);const n=e.get(Vi,null);n&&n.forEach(e=>e())}(kn.create({providers:e,name:t}))}return function(e){const n=As();if(!n)throw new Error("No platform exists!");if(!n.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return n}(i)}}function As(){return Os&&!Os.destroyed?Os:null}let Ns=(()=>(class{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,n){const l="noop"===(i=n?n.ngZone:void 0)?new Ss:("zone.js"===i?void 0:i)||new hs({enableLongStackTrace:en()}),t=[{provide:hs,useValue:l}];var i;return l.run(()=>{const n=kn.create({providers:t,parent:this.injector,name:e.moduleType.name}),i=e.create(n),s=i.injector.get(Xe,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return ji&&Mi(i.injector.get(Ki,xi)||xi),i.onDestroy(()=>Ps(this._modules,i)),l.runOutsideAngular(()=>l.onError.subscribe({next:e=>{s.handleError(e)}})),function(e,n,l){try{const t=l();return qn(t)?t.catch(l=>{throw n.runOutsideAngular(()=>e.handleError(l)),l}):t}catch(t){throw n.runOutsideAngular(()=>e.handleError(t)),t}}(s,l,()=>{const e=i.injector.get(Hi);return e.runInitializers(),e.donePromise.then(()=>(this._moduleDoBootstrap(i),i))})})}bootstrapModule(e,n=[]){const l=_s({},n);return function(e,n,l){return e.get(ts).createCompiler([n]).compileModuleAsync(l)}(this.injector,l,e).then(e=>this.bootstrapModuleFactory(e,l))}_moduleDoBootstrap(e){const n=e.injector.get(ws);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>n.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${ge(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. `+"Please define one of these.");e.instance.ngDoBootstrap(n)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}))();function _s(e,n){return Array.isArray(n)?n.reduce(_s,e):Object.assign({},e,n)}let ws=(()=>{class e{constructor(e,n,l,t,i,s){this._zone=e,this._console=n,this._injector=l,this._exceptionHandler=t,this._componentFactoryResolver=i,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=en(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const r=new R(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),u=new R(e=>{let n;this._zone.runOutsideAngular(()=>{n=this._zone.onStable.subscribe(()=>{hs.assertNotInAngularZone(),cs(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const l=this._zone.onUnstable.subscribe(()=>{hs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{n.unsubscribe(),l.unsubscribe()}});this.isStable=j(r,u.pipe(e=>Q()(function(e,n){return function(n){let l;l="function"==typeof e?e:function(){return e};const t=Object.create(n,J);return t.source=n,t.subjectFactory=l,t}}(ne)(e))))}bootstrap(e,n){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let l;l=e instanceof el?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(l.componentType);const t=Ts(l)?null:this._injector.get(He),i=l.create(kn.NULL,[],n||l.selector,t);i.onDestroy(()=>{this._unloadComponent(i)});const s=i.injector.get(Es,null);return s&&i.injector.get(vs).registerApplication(i.location.nativeElement,s),this._loadComponent(i),en()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");const n=e._tickScope();try{this._runningTick=!0;for(let e of this._views)e.detectChanges();if(this._enforceNoNewChanges)for(let e of this._views)e.checkNoChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1,os(n)}}attachView(e){const n=e;this._views.push(n),n.attachToAppRef(this)}detachView(e){const n=e;Ps(this._views,n),n.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Yi,[]).concat(this._bootstrapListeners).forEach(n=>n(e))}_unloadComponent(e){this.detachView(e.hostView),Ps(this.components,e)}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy())}get viewCount(){return this._views.length}}return e._tickScope=us("ApplicationRef#tick()"),e})();function Ps(e,n){const l=e.indexOf(n);l>-1&&e.splice(l,1)}class xs{}class ks{}const Ms={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Ds=(()=>(class{constructor(e,n){this._compiler=e,this._config=n||Ms}load(e){return!ji&&this._compiler instanceof ls?this.loadFactory(e):this.loadAndCompile(e)}loadAndCompile(e){let[n,t]=e.split("#");return void 0===t&&(t="default"),l("crnd")(n).then(e=>e[t]).then(e=>Ls(e,n,t)).then(e=>this._compiler.compileModuleAsync(e))}loadFactory(e){let[n,t]=e.split("#"),i="NgFactory";return void 0===t&&(t="default",i=""),l("crnd")(this._config.factoryPathPrefix+n+this._config.factoryPathSuffix).then(e=>e[t+i]).then(e=>Ls(e,n,t))}}))();function Ls(e,n,l){if(!e)throw new Error(`Cannot find '${l}' in '${n}'`);return e}class Fs{constructor(e,n){this.name=e,this.callback=n}}class Us{constructor(e,n,l){this.listeners=[],this.parent=null,this._debugContext=l,this.nativeNode=e,n&&n instanceof Hs&&n.addChild(this)}get injector(){return this._debugContext.injector}get componentInstance(){return this._debugContext.component}get context(){return this._debugContext.context}get references(){return this._debugContext.references}get providerTokens(){return this._debugContext.providerTokens}}class Hs extends Us{constructor(e,n,l){super(e,n,l),this.properties={},this.attributes={},this.classes={},this.styles={},this.childNodes=[],this.nativeElement=e}addChild(e){e&&(this.childNodes.push(e),e.parent=this)}removeChild(e){const n=this.childNodes.indexOf(e);-1!==n&&(e.parent=null,this.childNodes.splice(n,1))}insertChildrenAfter(e,n){const l=this.childNodes.indexOf(e);-1!==l&&(this.childNodes.splice(l+1,0,...n),n.forEach(n=>{n.parent&&n.parent.removeChild(n),e.parent=this}))}insertBefore(e,n){const l=this.childNodes.indexOf(e);-1===l?this.addChild(n):(n.parent&&n.parent.removeChild(n),n.parent=this,this.childNodes.splice(l,0,n))}query(e){return this.queryAll(e)[0]||null}queryAll(e){const n=[];return function e(n,l,t){n.childNodes.forEach(n=>{n instanceof Hs&&(l(n)&&t.push(n),e(n,l,t))})}(this,e,n),n}queryAllNodes(e){const n=[];return function e(n,l,t){n instanceof Hs&&n.childNodes.forEach(n=>{l(n)&&t.push(n),n instanceof Hs&&e(n,l,t)})}(this,e,n),n}get children(){return this.childNodes.filter(e=>e instanceof Hs)}triggerEventHandler(e,n){this.listeners.forEach(l=>{l.name==e&&l.callback(n)})}}const Gs=new Map,Bs=function(e){return Gs.get(e)||null};function Ws(e){Gs.set(e.nativeNode,e)}const Vs=ys(null,"core",[{provide:zi,useValue:"unknown"},{provide:Ns,deps:[kn]},{provide:vs,deps:[]},{provide:$i,deps:[]}]);function zs(){return wl}function Ys(){return Pl}function $s(e){return e?(ji&&Mi(e),e):xi}function Ks(e){let n=[];return e.onStable.subscribe(()=>{for(;n.length;)n.pop()()}),function(e){n.push(e)}}let js=(()=>(class{constructor(e){}}))();function Qs(e,n,l,t,i,s){e|=1;const{matchedQueries:r,references:u,matchedQueryIds:o}=gt(n);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:e,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:r,matchedQueryIds:o,references:u,ngContentIndex:l,childCount:t,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:s?St(s):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:i||Kl},provider:null,text:null,query:null,ngContent:null}}function qs(e,n,l,t,i,s,r=[],u,o,a,c,h){a||(a=Kl);const{matchedQueries:d,references:g,matchedQueryIds:p}=gt(l);let m=null,f=null;s&&([m,f]=Ct(s)),u=u||[];const S=new Array(u.length);for(let R=0;R<u.length;R++){const[e,n,l]=u[R],[t,i]=Ct(n);let s=void 0,r=void 0;switch(15&e){case 4:r=l;break;case 1:case 8:s=l}S[R]={flags:e,ns:t,name:i,nonMinifiedName:i,securityContext:s,suffix:r}}o=o||[];const E=new Array(o.length);for(let R=0;R<o.length;R++){const[e,n]=o[R];E[R]={type:0,target:e,eventName:n,propName:null}}const v=(r=r||[]).map(([e,n])=>{const[l,t]=Ct(e);return[l,t,n]});return h=function(e){if(e&&e.id===Xl){const n=null!=e.encapsulation&&e.encapsulation!==Ve.None||e.styles.length||Object.keys(e.data).length;e.id=n?`c${et++}`:Zl}return e&&e.id===Zl&&(e=null),e||null}(h),c&&(n|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:n|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:d,matchedQueryIds:p,references:g,ngContentIndex:t,childCount:i,bindings:S,bindingFlags:It(S),outputs:E,element:{ns:m,name:f,attrs:v,template:null,componentProvider:null,componentView:c||null,componentRendererType:h,publicProviders:null,allProviders:null,handleEvent:a||Kl},provider:null,text:null,query:null,ngContent:null}}function Xs(e,n,l){const t=l.element,i=e.root.selectorOrNode,s=e.renderer;let r;if(e.parent||!i){r=t.name?s.createElement(t.name,t.ns):s.createComment("");const i=mt(e,n,l);i&&s.appendChild(i,r)}else r=s.selectRootElement(i,!!t.componentRendererType&&t.componentRendererType.encapsulation===Ve.ShadowDom);if(t.attrs)for(let u=0;u<t.attrs.length;u++){const[e,n,l]=t.attrs[u];s.setAttribute(r,n,l,e)}return r}function Zs(e,n,l,t){for(let r=0;r<l.outputs.length;r++){const u=l.outputs[r],o=Js(e,l.nodeIndex,(s=u.eventName,(i=u.target)?`${i}:${s}`:s));let a=u.target,c=e;"component"===u.target&&(a=null,c=n);const h=c.renderer.listen(a||t,u.eventName,o);e.disposables[l.outputIndex+r]=h}var i,s}function Js(e,n,l){return t=>rt(e,n,l,t)}function er(e,n,l,t){if(!lt(e,n,l,t))return!1;const i=n.bindings[l],s=Wl(e,n.nodeIndex),r=s.renderElement,u=i.name;switch(15&i.flags){case 1:!function(e,n,l,t,i,s){const r=n.securityContext;let u=r?e.root.sanitizer.sanitize(r,s):s;u=null!=u?u.toString():null;const o=e.renderer;null!=s?o.setAttribute(l,i,u,t):o.removeAttribute(l,i,t)}(e,i,r,i.ns,u,t);break;case 2:!function(e,n,l,t){const i=e.renderer;t?i.addClass(n,l):i.removeClass(n,l)}(e,r,u,t);break;case 4:!function(e,n,l,t,i){let s=e.root.sanitizer.sanitize(Tn.STYLE,i);if(null!=s){s=s.toString();const e=n.suffix;null!=e&&(s+=e)}else s=null;const r=e.renderer;null!=s?r.setStyle(l,t,s):r.removeStyle(l,t)}(e,i,r,u,t);break;case 8:!function(e,n,l,t,i){const s=n.securityContext;let r=s?e.root.sanitizer.sanitize(s,i):i;e.renderer.setProperty(l,t,r)}(33554432&n.flags&&32&i.flags?s.componentView:e,i,r,u,t)}return!0}function nr(e,n,l){let t=[];for(let i in l)t.push({propName:i,bindingType:l[i]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:n,filterId:dt(n),bindings:t},ngContent:null}}function lr(e){const n=e.def.nodeMatchedQueries;for(;e.parent&&ht(e);){let l=e.parentNodeDef;e=e.parent;const t=l.nodeIndex+l.childCount;for(let i=0;i<=t;i++){const t=e.def.nodes[i];67108864&t.flags&&536870912&t.flags&&(t.query.filterId&n)===t.query.filterId&&Yl(e,i).setDirty(),!(1&t.flags&&i+t.childCount<l.nodeIndex)&&67108864&t.childFlags&&536870912&t.childFlags||(i+=t.childCount)}}if(134217728&e.def.nodeFlags)for(let l=0;l<e.def.nodes.length;l++){const n=e.def.nodes[l];134217728&n.flags&&536870912&n.flags&&Yl(e,l).setDirty(),l+=n.childCount}}function tr(e,n){const l=Yl(e,n.nodeIndex);if(!l.dirty)return;let t,i=void 0;if(67108864&n.flags){const l=n.parent.parent;i=ir(e,l.nodeIndex,l.nodeIndex+l.childCount,n.query,[]),t=Vl(e,n.parent.nodeIndex).instance}else 134217728&n.flags&&(i=ir(e,0,e.def.nodes.length-1,n.query,[]),t=e.component);l.reset(i);const s=n.query.bindings;let r=!1;for(let u=0;u<s.length;u++){const e=s[u];let n;switch(e.bindingType){case 0:n=l.first;break;case 1:n=l,r=!0}t[e.propName]=n}r&&l.notifyOnChanges()}function ir(e,n,l,t,i){for(let s=n;s<=l;s++){const n=e.def.nodes[s],l=n.matchedQueries[t.id];if(null!=l&&i.push(sr(e,n,l)),1&n.flags&&n.element.template&&(n.element.template.nodeMatchedQueries&t.filterId)===t.filterId){const l=Wl(e,s);if((n.childMatchedQueries&t.filterId)===t.filterId&&(ir(e,s+1,s+n.childCount,t,i),s+=n.childCount),16777216&n.flags){const e=l.viewContainer._embeddedViews;for(let n=0;n<e.length;n++){const s=e[n],r=ut(s);r&&r===l&&ir(s,0,s.def.nodes.length-1,t,i)}}const r=l.template._projectedViews;if(r)for(let e=0;e<r.length;e++){const n=r[e];ir(n,0,n.def.nodes.length-1,t,i)}}(n.childMatchedQueries&t.filterId)!==t.filterId&&(s+=n.childCount)}return i}function sr(e,n,l){if(null!=l)switch(l){case 1:return Wl(e,n.nodeIndex).renderElement;case 0:return new ol(Wl(e,n.nodeIndex).renderElement);case 2:return Wl(e,n.nodeIndex).template;case 3:return Wl(e,n.nodeIndex).viewContainer;case 4:return Vl(e,n.nodeIndex).instance}}function rr(e,n,l){const t=mt(e,n,l);t&&Rt(e,l.ngContent.index,1,t,null,void 0)}function ur(e,n){return ar(128,e,new Array(n+1))}function or(e,n){const l=Object.keys(n),t=l.length,i=new Array(t);for(let s=0;s<t;s++){const e=l[s];i[n[e]]=e}return ar(64,e,i)}function ar(e,n,l){const t=new Array(l.length);for(let i=0;i<l.length;i++){const e=l[i];t[i]={flags:8,name:e,ns:null,nonMinifiedName:e,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:n,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:t,bindingFlags:It(t),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}function cr(e,n,l){const t=new Array(l.length-1);for(let i=1;i<l.length;i++)t[i-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:l[i]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:n,childCount:0,bindings:t,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:l[0]},query:null,ngContent:null}}function hr(e,n,l){let t;const i=e.renderer;t=i.createText(l.text.prefix);const s=mt(e,n,l);return s&&i.appendChild(s,t),{renderText:t}}function dr(e,n){return(null!=e?e.toString():"")+n.suffix}function gr(e,n,l,t){let i=0,s=0,r=0,u=0,o=0,a=null,c=null,h=!1,d=!1,g=null;for(let p=0;p<n.length;p++){const e=n[p];if(e.nodeIndex=p,e.parent=a,e.bindingIndex=i,e.outputIndex=s,e.renderParent=c,r|=e.flags,o|=e.matchedQueryIds,e.element){const n=e.element;n.publicProviders=a?a.element.publicProviders:Object.create(null),n.allProviders=n.publicProviders,h=!1,d=!1,e.element.template&&(o|=e.element.template.nodeMatchedQueries)}if(mr(a,e,n.length),i+=e.bindings.length,s+=e.outputs.length,!c&&3&e.flags&&(g=e),20224&e.flags){h||(h=!0,a.element.publicProviders=Object.create(a.element.publicProviders),a.element.allProviders=a.element.publicProviders);const n=0!=(32768&e.flags);0==(8192&e.flags)||n?a.element.publicProviders[Ql(e.provider.token)]=e:(d||(d=!0,a.element.allProviders=Object.create(a.element.publicProviders)),a.element.allProviders[Ql(e.provider.token)]=e),n&&(a.element.componentProvider=e)}if(a?(a.childFlags|=e.flags,a.directChildFlags|=e.flags,a.childMatchedQueries|=e.matchedQueryIds,e.element&&e.element.template&&(a.childMatchedQueries|=e.element.template.nodeMatchedQueries)):u|=e.flags,e.childCount>0)a=e,pr(e)||(c=e);else for(;a&&p===a.nodeIndex+a.childCount;){const e=a.parent;e&&(e.childFlags|=a.childFlags,e.childMatchedQueries|=a.childMatchedQueries),c=(a=e)&&pr(a)?a.renderParent:a}}return{factory:null,nodeFlags:r,rootNodeFlags:u,nodeMatchedQueries:o,flags:e,nodes:n,updateDirectives:l||Kl,updateRenderer:t||Kl,handleEvent:(e,l,t,i)=>n[l].element.handleEvent(e,t,i),bindingCount:i,outputCount:s,lastRenderRootNode:g}}function pr(e){return 0!=(1&e.flags)&&null===e.element.name}function mr(e,n,l){const t=n.element&&n.element.template;if(t){if(!t.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(t.lastRenderRootNode&&16777216&t.lastRenderRootNode.flags)throw new Error(`Illegal State: Last root node of a template can't have embedded views, at index ${n.nodeIndex}!`)}if(20224&n.flags&&0==(1&(e?e.flags:0)))throw new Error(`Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index ${n.nodeIndex}!`);if(n.query){if(67108864&n.flags&&(!e||0==(16384&e.flags)))throw new Error(`Illegal State: Content Query nodes need to be children of directives, at index ${n.nodeIndex}!`);if(134217728&n.flags&&e)throw new Error(`Illegal State: View Query nodes have to be top level nodes, at index ${n.nodeIndex}!`)}if(n.childCount){const t=e?e.nodeIndex+e.childCount:l-1;if(n.nodeIndex<=t&&n.nodeIndex+n.childCount>t)throw new Error(`Illegal State: childCount of node leads outside of parent, at index ${n.nodeIndex}!`)}}function fr(e,n,l,t){const i=vr(e.root,e.renderer,e,n,l);return Rr(i,e.component,t),Or(i),i}function Sr(e,n,l){const t=vr(e,e.renderer,null,null,n);return Rr(t,l,l),Or(t),t}function Er(e,n,l,t){const i=n.element.componentRendererType;let s;return s=i?e.root.rendererFactory.createRenderer(t,i):e.root.renderer,vr(e.root,s,e,n.element.componentProvider,l)}function vr(e,n,l,t,i){const s=new Array(i.nodes.length),r=i.outputCount?new Array(i.outputCount):null;return{def:i,parent:l,viewContainerParent:null,parentNodeDef:t,context:null,component:null,nodes:s,state:13,root:e,renderer:n,oldValues:new Array(i.bindingCount),disposables:r,initIndex:-1}}function Rr(e,n,l){e.component=n,e.context=l}function Or(e){let n;ct(e)&&(n=Wl(e.parent,e.parentNodeDef.parent.nodeIndex).renderElement);const l=e.def,t=e.nodes;for(let i=0;i<l.nodes.length;i++){const s=l.nodes[i];let r;switch($l.setCurrentNode(e,i),201347067&s.flags){case 1:const l=Xs(e,n,s);let u=void 0;if(33554432&s.flags){const n=St(s.element.componentView);u=$l.createComponentView(e,s,n,l)}Zs(e,u,s,l),r={renderElement:l,componentView:u,viewContainer:null,template:s.element.template?$t(e,s):void 0},16777216&s.flags&&(r.viewContainer=Wt(e,s,r));break;case 2:r=hr(e,n,s);break;case 512:case 1024:case 2048:case 256:(r=t[i])||4096&s.flags||(r={instance:gi(e,s)});break;case 16:r={instance:pi(e,s)};break;case 16384:(r=t[i])||(r={instance:mi(e,s)}),32768&s.flags&&Rr(Wl(e,s.parent.nodeIndex).componentView,r.instance,r.instance);break;case 32:case 64:case 128:r={value:void 0};break;case 67108864:case 134217728:r=new Fi;break;case 8:rr(e,n,s),r=void 0}t[i]=r}wr(e,_r.CreateViewNodes),Mr(e,201326592,268435456,0)}function br(e){Ir(e),$l.updateDirectives(e,1),Pr(e,_r.CheckNoChanges),$l.updateRenderer(e,1),wr(e,_r.CheckNoChanges),e.state&=-97}function Tr(e){1&e.state?(e.state&=-2,e.state|=2):e.state&=-3,Hl(e,0,256),Ir(e),$l.updateDirectives(e,0),Pr(e,_r.CheckAndUpdate),Mr(e,67108864,536870912,0);let n=Hl(e,256,512);Ti(e,2097152|(n?1048576:0)),$l.updateRenderer(e,0),wr(e,_r.CheckAndUpdate),Mr(e,134217728,536870912,0),Ti(e,8388608|((n=Hl(e,512,768))?4194304:0)),2&e.def.flags&&(e.state&=-9),e.state&=-97,Hl(e,768,1024)}function Cr(e,n,l,t,i,s,r,u,o,a,c,h,d){return 0===l?function(e,n,l,t,i,s,r,u,o,a,c,h){switch(201347067&n.flags){case 1:return function(e,n,l,t,i,s,r,u,o,a,c,h){const d=n.bindings.length;let g=!1;return d>0&&er(e,n,0,l)&&(g=!0),d>1&&er(e,n,1,t)&&(g=!0),d>2&&er(e,n,2,i)&&(g=!0),d>3&&er(e,n,3,s)&&(g=!0),d>4&&er(e,n,4,r)&&(g=!0),d>5&&er(e,n,5,u)&&(g=!0),d>6&&er(e,n,6,o)&&(g=!0),d>7&&er(e,n,7,a)&&(g=!0),d>8&&er(e,n,8,c)&&(g=!0),d>9&&er(e,n,9,h)&&(g=!0),g}(e,n,l,t,i,s,r,u,o,a,c,h);case 2:return function(e,n,l,t,i,s,r,u,o,a,c,h){let d=!1;const g=n.bindings,p=g.length;if(p>0&&lt(e,n,0,l)&&(d=!0),p>1&&lt(e,n,1,t)&&(d=!0),p>2&&lt(e,n,2,i)&&(d=!0),p>3&&lt(e,n,3,s)&&(d=!0),p>4&&lt(e,n,4,r)&&(d=!0),p>5&&lt(e,n,5,u)&&(d=!0),p>6&&lt(e,n,6,o)&&(d=!0),p>7&&lt(e,n,7,a)&&(d=!0),p>8&&lt(e,n,8,c)&&(d=!0),p>9&&lt(e,n,9,h)&&(d=!0),d){let d=n.text.prefix;p>0&&(d+=dr(l,g[0])),p>1&&(d+=dr(t,g[1])),p>2&&(d+=dr(i,g[2])),p>3&&(d+=dr(s,g[3])),p>4&&(d+=dr(r,g[4])),p>5&&(d+=dr(u,g[5])),p>6&&(d+=dr(o,g[6])),p>7&&(d+=dr(a,g[7])),p>8&&(d+=dr(c,g[8])),p>9&&(d+=dr(h,g[9]));const m=Bl(e,n.nodeIndex).renderText;e.renderer.setValue(m,d)}return d}(e,n,l,t,i,s,r,u,o,a,c,h);case 16384:return function(e,n,l,t,i,s,r,u,o,a,c,h){const d=Vl(e,n.nodeIndex),g=d.instance;let p=!1,m=void 0;const f=n.bindings.length;return f>0&&nt(e,n,0,l)&&(p=!0,m=bi(e,d,n,0,l,m)),f>1&&nt(e,n,1,t)&&(p=!0,m=bi(e,d,n,1,t,m)),f>2&&nt(e,n,2,i)&&(p=!0,m=bi(e,d,n,2,i,m)),f>3&&nt(e,n,3,s)&&(p=!0,m=bi(e,d,n,3,s,m)),f>4&&nt(e,n,4,r)&&(p=!0,m=bi(e,d,n,4,r,m)),f>5&&nt(e,n,5,u)&&(p=!0,m=bi(e,d,n,5,u,m)),f>6&&nt(e,n,6,o)&&(p=!0,m=bi(e,d,n,6,o,m)),f>7&&nt(e,n,7,a)&&(p=!0,m=bi(e,d,n,7,a,m)),f>8&&nt(e,n,8,c)&&(p=!0,m=bi(e,d,n,8,c,m)),f>9&&nt(e,n,9,h)&&(p=!0,m=bi(e,d,n,9,h,m)),m&&g.ngOnChanges(m),65536&n.flags&&Gl(e,256,n.nodeIndex)&&g.ngOnInit(),262144&n.flags&&g.ngDoCheck(),p}(e,n,l,t,i,s,r,u,o,a,c,h);case 32:case 64:case 128:return function(e,n,l,t,i,s,r,u,o,a,c,h){const d=n.bindings;let g=!1;const p=d.length;if(p>0&&lt(e,n,0,l)&&(g=!0),p>1&&lt(e,n,1,t)&&(g=!0),p>2&&lt(e,n,2,i)&&(g=!0),p>3&&lt(e,n,3,s)&&(g=!0),p>4&&lt(e,n,4,r)&&(g=!0),p>5&&lt(e,n,5,u)&&(g=!0),p>6&&lt(e,n,6,o)&&(g=!0),p>7&&lt(e,n,7,a)&&(g=!0),p>8&&lt(e,n,8,c)&&(g=!0),p>9&&lt(e,n,9,h)&&(g=!0),g){const g=zl(e,n.nodeIndex);let m;switch(201347067&n.flags){case 32:m=new Array(d.length),p>0&&(m[0]=l),p>1&&(m[1]=t),p>2&&(m[2]=i),p>3&&(m[3]=s),p>4&&(m[4]=r),p>5&&(m[5]=u),p>6&&(m[6]=o),p>7&&(m[7]=a),p>8&&(m[8]=c),p>9&&(m[9]=h);break;case 64:m={},p>0&&(m[d[0].name]=l),p>1&&(m[d[1].name]=t),p>2&&(m[d[2].name]=i),p>3&&(m[d[3].name]=s),p>4&&(m[d[4].name]=r),p>5&&(m[d[5].name]=u),p>6&&(m[d[6].name]=o),p>7&&(m[d[7].name]=a),p>8&&(m[d[8].name]=c),p>9&&(m[d[9].name]=h);break;case 128:const e=l;switch(p){case 1:m=e.transform(l);break;case 2:m=e.transform(t);break;case 3:m=e.transform(t,i);break;case 4:m=e.transform(t,i,s);break;case 5:m=e.transform(t,i,s,r);break;case 6:m=e.transform(t,i,s,r,u);break;case 7:m=e.transform(t,i,s,r,u,o);break;case 8:m=e.transform(t,i,s,r,u,o,a);break;case 9:m=e.transform(t,i,s,r,u,o,a,c);break;case 10:m=e.transform(t,i,s,r,u,o,a,c,h)}}g.value=m}return g}(e,n,l,t,i,s,r,u,o,a,c,h);default:throw"unreachable"}}(e,n,t,i,s,r,u,o,a,c,h,d):function(e,n,l){switch(201347067&n.flags){case 1:return function(e,n,l){let t=!1;for(let i=0;i<l.length;i++)er(e,n,i,l[i])&&(t=!0);return t}(e,n,l);case 2:return function(e,n,l){const t=n.bindings;let i=!1;for(let s=0;s<l.length;s++)lt(e,n,s,l[s])&&(i=!0);if(i){let i="";for(let e=0;e<l.length;e++)i+=dr(l[e],t[e]);i=n.text.prefix+i;const s=Bl(e,n.nodeIndex).renderText;e.renderer.setValue(s,i)}return i}(e,n,l);case 16384:return function(e,n,l){const t=Vl(e,n.nodeIndex),i=t.instance;let s=!1,r=void 0;for(let u=0;u<l.length;u++)nt(e,n,u,l[u])&&(s=!0,r=bi(e,t,n,u,l[u],r));return r&&i.ngOnChanges(r),65536&n.flags&&Gl(e,256,n.nodeIndex)&&i.ngOnInit(),262144&n.flags&&i.ngDoCheck(),s}(e,n,l);case 32:case 64:case 128:return function(e,n,l){const t=n.bindings;let i=!1;for(let s=0;s<l.length;s++)lt(e,n,s,l[s])&&(i=!0);if(i){const i=zl(e,n.nodeIndex);let s;switch(201347067&n.flags){case 32:s=l;break;case 64:s={};for(let i=0;i<l.length;i++)s[t[i].name]=l[i];break;case 128:const e=l[0],n=l.slice(1);s=e.transform(...n)}i.value=s}return i}(e,n,l);default:throw"unreachable"}}(e,n,t)}function Ir(e){const n=e.def;if(4&n.nodeFlags)for(let l=0;l<n.nodes.length;l++){const t=n.nodes[l];if(4&t.flags){const n=Wl(e,l).template._projectedViews;if(n)for(let l=0;l<n.length;l++){const t=n[l];t.state|=32,st(t,e)}}else 0==(4&t.childFlags)&&(l+=t.childCount)}}function yr(e,n,l,t,i,s,r,u,o,a,c,h,d){return 0===l?function(e,n,l,t,i,s,r,u,o,a,c,h){const d=n.bindings.length;d>0&&tt(e,n,0,l),d>1&&tt(e,n,1,t),d>2&&tt(e,n,2,i),d>3&&tt(e,n,3,s),d>4&&tt(e,n,4,r),d>5&&tt(e,n,5,u),d>6&&tt(e,n,6,o),d>7&&tt(e,n,7,a),d>8&&tt(e,n,8,c),d>9&&tt(e,n,9,h)}(e,n,t,i,s,r,u,o,a,c,h,d):function(e,n,l){for(let t=0;t<l.length;t++)tt(e,n,t,l[t])}(e,n,t),!1}function Ar(e,n){if(Yl(e,n.nodeIndex).dirty)throw Ll($l.createDebugContext(e,n.nodeIndex),`Query ${n.query.id} not dirty`,`Query ${n.query.id} dirty`,0!=(1&e.state))}function Nr(e){if(!(128&e.state)){if(Pr(e,_r.Destroy),wr(e,_r.Destroy),Ti(e,131072),e.disposables)for(let n=0;n<e.disposables.length;n++)e.disposables[n]();!function(e){if(!(16&e.state))return;const n=ut(e);if(n){const l=n.template._projectedViews;l&&(We(l,l.indexOf(e)),$l.dirtyParentQueries(e))}}(e),e.renderer.destroyNode&&function(e){const n=e.def.nodes.length;for(let l=0;l<n;l++){const n=e.def.nodes[l];1&n.flags?e.renderer.destroyNode(Wl(e,l).renderElement):2&n.flags?e.renderer.destroyNode(Bl(e,l).renderText):(67108864&n.flags||134217728&n.flags)&&Yl(e,l).destroy()}}(e),ct(e)&&e.renderer.destroy(),e.state|=128}}const _r=function(){var e={CreateViewNodes:0,CheckNoChanges:1,CheckNoChangesProjectedViews:2,CheckAndUpdate:3,CheckAndUpdateProjectedViews:4,Destroy:5};return e[e.CreateViewNodes]="CreateViewNodes",e[e.CheckNoChanges]="CheckNoChanges",e[e.CheckNoChangesProjectedViews]="CheckNoChangesProjectedViews",e[e.CheckAndUpdate]="CheckAndUpdate",e[e.CheckAndUpdateProjectedViews]="CheckAndUpdateProjectedViews",e[e.Destroy]="Destroy",e}();function wr(e,n){const l=e.def;if(33554432&l.nodeFlags)for(let t=0;t<l.nodes.length;t++){const i=l.nodes[t];33554432&i.flags?xr(Wl(e,t).componentView,n):0==(33554432&i.childFlags)&&(t+=i.childCount)}}function Pr(e,n){const l=e.def;if(16777216&l.nodeFlags)for(let t=0;t<l.nodes.length;t++){const i=l.nodes[t];if(16777216&i.flags){const l=Wl(e,t).viewContainer._embeddedViews;for(let e=0;e<l.length;e++)xr(l[e],n)}else 0==(16777216&i.childFlags)&&(t+=i.childCount)}}function xr(e,n){const l=e.state;switch(n){case _r.CheckNoChanges:0==(128&l)&&(12==(12&l)?br(e):64&l&&kr(e,_r.CheckNoChangesProjectedViews));break;case _r.CheckNoChangesProjectedViews:0==(128&l)&&(32&l?br(e):64&l&&kr(e,n));break;case _r.CheckAndUpdate:0==(128&l)&&(12==(12&l)?Tr(e):64&l&&kr(e,_r.CheckAndUpdateProjectedViews));break;case _r.CheckAndUpdateProjectedViews:0==(128&l)&&(32&l?Tr(e):64&l&&kr(e,n));break;case _r.Destroy:Nr(e);break;case _r.CreateViewNodes:Or(e)}}function kr(e,n){Pr(e,n),wr(e,n)}function Mr(e,n,l,t){if(!(e.def.nodeFlags&n&&e.def.nodeFlags&l))return;const i=e.def.nodes.length;for(let s=0;s<i;s++){const i=e.def.nodes[s];if(i.flags&n&&i.flags&l)switch($l.setCurrentNode(e,i.nodeIndex),t){case 0:tr(e,i);break;case 1:Ar(e,i)}i.childFlags&n&&i.childFlags&l||(s+=i.childCount)}}let Dr=!1;function Lr(e,n,l,t,i,s){const r=i.injector.get(hl);return Sr(Ur(e,i,r,n,l),t,s)}function Fr(e,n,l,t,i,s){const r=i.injector.get(hl),u=Ur(e,i,new fu(r),n,l),o=jr(t);return pu(eu.create,Sr,null,[u,o,s])}function Ur(e,n,l,t,i){const s=n.injector.get(Cn),r=n.injector.get(Xe),u=l.createRenderer(null,null);return{ngModule:n,injector:e,projectableNodes:t,selectorOrNode:i,sanitizer:s,rendererFactory:l,renderer:u,errorHandler:r}}function Hr(e,n,l,t){const i=jr(l);return pu(eu.create,fr,null,[e,n,i,t])}function Gr(e,n,l,t){return l=zr.get(n.element.componentProvider.provider.token)||jr(l),pu(eu.create,Er,null,[e,n,l,t])}function Br(e,n,l,t){return Jt(e,n,l,function(e){const{hasOverrides:n,hasDeprecatedOverrides:l}=function(e){let n=!1,l=!1;return 0===Wr.size?{hasOverrides:n,hasDeprecatedOverrides:l}:(e.providers.forEach(e=>{const t=Wr.get(e.token);3840&e.flags&&t&&(n=!0,l=l||t.deprecatedBehavior)}),e.modules.forEach(e=>{Vr.forEach((t,i)=>{he(i).providedIn===e&&(n=!0,l=l||t.deprecatedBehavior)})}),{hasOverrides:n,hasDeprecatedOverrides:l})}(e);return n?(function(e){for(let n=0;n<e.providers.length;n++){const t=e.providers[n];l&&(t.flags|=4096);const i=Wr.get(t.token);i&&(t.flags=-3841&t.flags|i.flags,t.deps=pt(i.deps),t.value=i.value)}if(Vr.size>0){let n=new Set(e.modules);Vr.forEach((t,i)=>{if(n.has(he(i).providedIn)){let n={token:i,flags:t.flags|(l?4096:0),deps:pt(t.deps),value:t.value,index:e.providers.length};e.providers.push(n),e.providersByKey[Ql(i)]=n}})}}(e=e.factory(()=>Kl)),e):e}(t))}const Wr=new Map,Vr=new Map,zr=new Map;function Yr(e){let n;Wr.set(e.token,e),"function"==typeof e.token&&(n=he(e.token))&&"function"==typeof n.providedIn&&Vr.set(e.token,e)}function $r(e,n){const l=St(n.viewDefFactory),t=St(l.nodes[0].element.componentView);zr.set(e,t)}function Kr(){Wr.clear(),Vr.clear(),zr.clear()}function jr(e){if(0===Wr.size)return e;const n=function(e){const n=[];let l=null;for(let t=0;t<e.nodes.length;t++){const i=e.nodes[t];1&i.flags&&(l=i),l&&3840&i.flags&&Wr.has(i.provider.token)&&(n.push(l.nodeIndex),l=null)}return n}(e);if(0===n.length)return e;e=e.factory(()=>Kl);for(let t=0;t<n.length;t++)l(e,n[t]);return e;function l(e,n){for(let l=n+1;l<e.nodes.length;l++){const n=e.nodes[l];if(1&n.flags)return;if(3840&n.flags){const e=n.provider,l=Wr.get(e.token);l&&(n.flags=-3841&n.flags|l.flags,e.deps=pt(l.deps),e.value=l.value)}}}}function Qr(e,n,l,t,i,s,r,u,o,a,c,h,d){const g=e.def.nodes[n];return Cr(e,g,l,t,i,s,r,u,o,a,c,h,d),224&g.flags?zl(e,n).value:void 0}function qr(e,n,l,t,i,s,r,u,o,a,c,h,d){const g=e.def.nodes[n];return yr(e,g,l,t,i,s,r,u,o,a,c,h,d),224&g.flags?zl(e,n).value:void 0}function Xr(e){return pu(eu.detectChanges,Tr,null,[e])}function Zr(e){return pu(eu.checkNoChanges,br,null,[e])}function Jr(e){return pu(eu.destroy,Nr,null,[e])}const eu=function(){var e={create:0,detectChanges:1,checkNoChanges:2,destroy:3,handleEvent:4};return e[e.create]="create",e[e.detectChanges]="detectChanges",e[e.checkNoChanges]="checkNoChanges",e[e.destroy]="destroy",e[e.handleEvent]="handleEvent",e}();let nu,lu,tu;function iu(e,n){lu=e,tu=n}function su(e,n,l,t){return iu(e,n),pu(eu.handleEvent,e.def.handleEvent,null,[e,n,l,t])}function ru(e,n){if(128&e.state)throw Ul(eu[nu]);return iu(e,cu(e,0)),e.def.updateDirectives((function(e,l,t,...i){const s=e.def.nodes[l];return 0===n?ou(e,s,t,i):au(e,s,t,i),16384&s.flags&&iu(e,cu(e,l)),224&s.flags?zl(e,s.nodeIndex).value:void 0}),e)}function uu(e,n){if(128&e.state)throw Ul(eu[nu]);return iu(e,hu(e,0)),e.def.updateRenderer((function(e,l,t,...i){const s=e.def.nodes[l];return 0===n?ou(e,s,t,i):au(e,s,t,i),3&s.flags&&iu(e,hu(e,l)),224&s.flags?zl(e,s.nodeIndex).value:void 0}),e)}function ou(e,n,l,t){if(Cr(e,n,l,...t)){const r=1===l?t[0]:t;if(16384&n.flags){const l={};for(let e=0;e<n.bindings.length;e++){const t=n.bindings[e],u=r[e];8&t.flags&&(l[(i=t.nonMinifiedName,s=void 0,s=i.replace(/[$@]/g,"_"),`ng-reflect-${i=s.replace(An,(...e)=>"-"+e[1].toLowerCase())}`)]=Nn(u))}const t=n.parent,u=Wl(e,t.nodeIndex).renderElement;if(t.element.name)for(let n in l){const t=l[n];null!=t?e.renderer.setAttribute(u,n,t):e.renderer.removeAttribute(u,n)}else e.renderer.setValue(u,`bindings=${JSON.stringify(l,null,2)}`)}}var i,s}function au(e,n,l,t){yr(e,n,l,...t)}function cu(e,n){for(let l=n;l<e.def.nodes.length;l++){const n=e.def.nodes[l];if(16384&n.flags&&n.bindings&&n.bindings.length)return l}return null}function hu(e,n){for(let l=n;l<e.def.nodes.length;l++){const n=e.def.nodes[l];if(3&n.flags&&n.bindings&&n.bindings.length)return l}return null}class du{constructor(e,n){this.view=e,this.nodeIndex=n,null==n&&(this.nodeIndex=n=0),this.nodeDef=e.def.nodes[n];let l=this.nodeDef,t=e;for(;l&&0==(1&l.flags);)l=l.parent;if(!l)for(;!l&&t;)l=ot(t),t=t.parent;this.elDef=l,this.elView=t}get elOrCompView(){return Wl(this.elView,this.elDef.nodeIndex).componentView||this.view}get injector(){return jt(this.elView,this.elDef)}get component(){return this.elOrCompView.component}get context(){return this.elOrCompView.context}get providerTokens(){const e=[];if(this.elDef)for(let n=this.elDef.nodeIndex+1;n<=this.elDef.nodeIndex+this.elDef.childCount;n++){const l=this.elView.def.nodes[n];20224&l.flags&&e.push(l.provider.token),n+=l.childCount}return e}get references(){const e={};if(this.elDef){gu(this.elView,this.elDef,e);for(let n=this.elDef.nodeIndex+1;n<=this.elDef.nodeIndex+this.elDef.childCount;n++){const l=this.elView.def.nodes[n];20224&l.flags&&gu(this.elView,l,e),n+=l.childCount}}return e}get componentRenderElement(){const e=function(e){for(;e&&!ct(e);)e=e.parent;return e.parent?Wl(e.parent,ot(e).nodeIndex):null}(this.elOrCompView);return e?e.renderElement:void 0}get renderNode(){return 2&this.nodeDef.flags?at(this.view,this.nodeDef):at(this.elView,this.elDef)}logError(e,...n){let l,t;2&this.nodeDef.flags?(l=this.view.def,t=this.nodeDef.nodeIndex):(l=this.elView.def,t=this.elDef.nodeIndex);const i=function(e,n){let l=-1;for(let t=0;t<=n;t++)3&e.nodes[t].flags&&l++;return l}(l,t);let s=-1;l.factory(()=>++s===i?e.error.bind(e,...n):Kl),s<i&&(e.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),e.error(...n))}}function gu(e,n,l){for(let t in n.references)l[t]=sr(e,n,n.references[t])}function pu(e,n,l,t){const i=nu,s=lu,r=tu;try{nu=e;const u=n.apply(l,t);return lu=s,tu=r,nu=i,u}catch(u){if(je(u)||!lu)throw u;throw function(e,n){return e instanceof Error||(e=new Error(e.toString())),Fl(e,n),e}(u,mu())}}function mu(){return lu?new du(lu,tu):null}class fu{constructor(e){this.delegate=e}createRenderer(e,n){return new Su(this.delegate.createRenderer(e,n))}begin(){this.delegate.begin&&this.delegate.begin()}end(){this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)}}class Su{constructor(e){this.delegate=e,this.debugContextFactory=mu,this.data=this.delegate.data}createDebugContext(e){return this.debugContextFactory(e)}destroyNode(e){const n=Bs(e);!function(e){Gs.delete(e.nativeNode)}(n),n instanceof Us&&(n.listeners.length=0),this.delegate.destroyNode&&this.delegate.destroyNode(e)}destroy(){this.delegate.destroy()}createElement(e,n){const l=this.delegate.createElement(e,n),t=this.createDebugContext(l);if(t){const n=new Hs(l,null,t);n.name=e,Ws(n)}return l}createComment(e){const n=this.delegate.createComment(e),l=this.createDebugContext(n);return l&&Ws(new Us(n,null,l)),n}createText(e){const n=this.delegate.createText(e),l=this.createDebugContext(n);return l&&Ws(new Us(n,null,l)),n}appendChild(e,n){const l=Bs(e),t=Bs(n);l&&t&&l instanceof Hs&&l.addChild(t),this.delegate.appendChild(e,n)}insertBefore(e,n,l){const t=Bs(e),i=Bs(n),s=Bs(l);t&&i&&t instanceof Hs&&t.insertBefore(s,i),this.delegate.insertBefore(e,n,l)}removeChild(e,n){const l=Bs(e),t=Bs(n);l&&t&&l instanceof Hs&&l.removeChild(t),this.delegate.removeChild(e,n)}selectRootElement(e,n){const l=this.delegate.selectRootElement(e,n),t=mu();return t&&Ws(new Hs(l,null,t)),l}setAttribute(e,n,l,t){const i=Bs(e);i&&i instanceof Hs&&(i.attributes[t?t+":"+n:n]=l),this.delegate.setAttribute(e,n,l,t)}removeAttribute(e,n,l){const t=Bs(e);t&&t instanceof Hs&&(t.attributes[l?l+":"+n:n]=null),this.delegate.removeAttribute(e,n,l)}addClass(e,n){const l=Bs(e);l&&l instanceof Hs&&(l.classes[n]=!0),this.delegate.addClass(e,n)}removeClass(e,n){const l=Bs(e);l&&l instanceof Hs&&(l.classes[n]=!1),this.delegate.removeClass(e,n)}setStyle(e,n,l,t){const i=Bs(e);i&&i instanceof Hs&&(i.styles[n]=l),this.delegate.setStyle(e,n,l,t)}removeStyle(e,n,l){const t=Bs(e);t&&t instanceof Hs&&(t.styles[n]=null),this.delegate.removeStyle(e,n,l)}setProperty(e,n,l){const t=Bs(e);t&&t instanceof Hs&&(t.properties[n]=l),this.delegate.setProperty(e,n,l)}listen(e,n,l){if("string"!=typeof e){const t=Bs(e);t&&t.listeners.push(new Fs(n,l))}return this.delegate.listen(e,n,l)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setValue(e,n){return this.delegate.setValue(e,n)}}function Eu(e,n,l){return new vu(e,n,l)}class vu extends Ge{constructor(e,n,l){super(),this.moduleType=e,this._bootstrapComponents=n,this._ngModuleDefFactory=l}create(e){!function(){if(Dr)return;Dr=!0;const e=en()?{setCurrentNode:iu,createRootView:Fr,createEmbeddedView:Hr,createComponentView:Gr,createNgModuleRef:Br,overrideProvider:Yr,overrideComponentView:$r,clearOverrides:Kr,checkAndUpdateView:Xr,checkNoChangesView:Zr,destroyView:Jr,createDebugContext:(e,n)=>new du(e,n),handleEvent:su,updateDirectives:ru,updateRenderer:uu}:{setCurrentNode:()=>{},createRootView:Lr,createEmbeddedView:fr,createComponentView:Er,createNgModuleRef:Jt,overrideProvider:Kl,overrideComponentView:Kl,clearOverrides:Kl,checkAndUpdateView:Tr,checkNoChangesView:br,destroyView:Nr,createDebugContext:(e,n)=>new du(e,n),handleEvent:(e,n,l,t)=>e.def.handleEvent(e,n,l,t),updateDirectives:(e,n)=>e.def.updateDirectives(0===n?Qr:qr,e),updateRenderer:(e,n)=>e.def.updateRenderer(0===n?Qr:qr,e)};$l.setCurrentNode=e.setCurrentNode,$l.createRootView=e.createRootView,$l.createEmbeddedView=e.createEmbeddedView,$l.createComponentView=e.createComponentView,$l.createNgModuleRef=e.createNgModuleRef,$l.overrideProvider=e.overrideProvider,$l.overrideComponentView=e.overrideComponentView,$l.clearOverrides=e.clearOverrides,$l.checkAndUpdateView=e.checkAndUpdateView,$l.checkNoChangesView=e.checkNoChangesView,$l.destroyView=e.destroyView,$l.resolveDep=Ri,$l.createDebugContext=e.createDebugContext,$l.handleEvent=e.handleEvent,$l.updateDirectives=e.updateDirectives,$l.updateRenderer=e.updateRenderer,$l.dirtyParentQueries=lr}();const n=function(e){const n=Array.from(e.providers),l=Array.from(e.modules),t={};for(const i in e.providersByKey)t[i]=e.providersByKey[i];return{factory:e.factory,isRoot:e.isRoot,providers:n,modules:l,providersByKey:t}}(St(this._ngModuleDefFactory));return $l.createNgModuleRef(this.moduleType,e||kn.NULL,this._bootstrapComponents,n)}}var Ru=function(e){return e[e.ALL=0]="ALL",e[e.CONSTRUCTION=1]="CONSTRUCTION",e[e.DECONSTRUCTION=2]="DECONSTRUCTION",e[e.HUT=3]="HUT",e[e.HOUSE=4]="HOUSE",e[e.MARKETPLACE=5]="MARKETPLACE",e[e.WAREHOUSE=6]="WAREHOUSE",e[e.SMITHY=7]="SMITHY",e[e.BAKERY=8]="BAKERY",e[e.WORKSHOP=9]="WORKSHOP",e[e.SHRINE=10]="SHRINE",e[e.TAILOR=11]="TAILOR",e[e.BREWERY=12]="BREWERY",e[e.TAVERN=13]="TAVERN",e[e.CHURCH=14]="CHURCH",e[e.STOCKADE=15]="STOCKADE",e[e.BARRACKS=16]="BARRACKS",e[e.TRAINING_SQUARE=17]="TRAINING_SQUARE",e[e.WOODEN_TOWER=18]="WOODEN_TOWER",e[e.STONE_TOWER=19]="STONE_TOWER",e[e.STASH=20]="STASH",e[e.LOGGERS_HUT=21]="LOGGERS_HUT",e[e.SAWMILL=22]="SAWMILL",e[e.FORESTER=23]="FORESTER",e[e.HUNTER_LODGE=24]="HUNTER_LODGE",e[e.GATHERER=25]="GATHERER",e[e.TANNERY=26]="TANNERY",e[e.FARM=27]="FARM",e[e.FIELD=28]="FIELD",e[e.ORCHARD=29]="ORCHARD",e[e.PASTURE=30]="PASTURE",e[e.WINDMILL=31]="WINDMILL",e[e.BUTCHER=32]="BUTCHER",e[e.COTTON_MILL=33]="COTTON_MILL",e[e.WINERY=34]="WINERY",e[e.PIT_MINE=35]="PIT_MINE",e[e.QUARRY=36]="QUARRY",e[e.GEOLOGIST=37]="GEOLOGIST",e[e.STONEMASON=38]="STONEMASON",e[e.MINT=39]="MINT",e[e.FISHERS_HUT=40]="FISHERS_HUT",e[e.SCHOOL_OF_FISH=41]="SCHOOL_OF_FISH",e[e.SHARKS=42]="SHARKS",e[e.STONEHENGE=43]="STONEHENGE",e[e.PYRAMID=44]="PYRAMID",e[e.HANGING_GARDEN=45]="HANGING_GARDEN",e[e.COLOSSUS=46]="COLOSSUS",e[e.UNDERGROUND_CITY=47]="UNDERGROUND_CITY",e[e.GREAT_LIGHTHOUSE=48]="GREAT_LIGHTHOUSE",e[e.SACRED_GROVE=49]="SACRED_GROVE",e[e.ASCENSION_TEMPLE=50]="ASCENSION_TEMPLE",e[e.MANUFACTURE=51]="MANUFACTURE",e[e.LONGHOUSE=52]="LONGHOUSE",e[e.EMBASSY=53]="EMBASSY",e[e.PAPER_MILL=54]="PAPER_MILL",e[e.DEEP_MINE=55]="DEEP_MINE",e[e.GATHERERS_CAMP=56]="GATHERERS_CAMP",e[e.BARN=57]="BARN",e[e.KITCHEN=58]="KITCHEN",e[e.CLAY_PIT=59]="CLAY_PIT",e[e.TUDOR_HOUSE=60]="TUDOR_HOUSE",e[e.LOGGERS_CAMP=61]="LOGGERS_CAMP",e[e.METEORITE=62]="METEORITE",e[e.BOAT_BUILDER=63]="BOAT_BUILDER",e[e.SHIPYARD=64]="SHIPYARD",e[e.PIER=65]="PIER",e[e.HARBOUR=66]="HARBOUR",e[e.LIGHTHOUSE=67]="LIGHTHOUSE",e[e.CARTOGRAPHER=68]="CARTOGRAPHER",e[e.SETTLEMENT=69]="SETTLEMENT",e[e.SCHOLARS_LAB=70]="SCHOLARS_LAB",e[e.TAX_COLLECTOR=71]="TAX_COLLECTOR",e}({}),Ou=function(e){return e[e.DEV=0]="DEV",e[e.V1_0_0=1]="V1_0_0",e}({}),bu=function(e){return e[e.NOTHING=0]="NOTHING",e[e.FOOD=1]="FOOD",e[e.LOG=2]="LOG",e[e.BRUSHWOOD=3]="BRUSHWOOD",e[e.STONE=4]="STONE",e[e.FUR=5]="FUR",e[e.WHEAT=6]="WHEAT",e[e.BARLEY=7]="BARLEY",e[e.HOP=8]="HOP",e[e.COTTON=9]="COTTON",e[e.HAY=10]="HAY",e[e.CHICKEN=11]="CHICKEN",e[e.COW=12]="COW",e[e.PIG=13]="PIG",e[e.HORSE=14]="HORSE",e[e.COAL=15]="COAL",e[e.GOLD_ORE=16]="GOLD_ORE",e[e.SILVER_ORE=17]="SILVER_ORE",e[e.COPPER_ORE=18]="COPPER_ORE",e[e.TIN_ORE=19]="TIN_ORE",e[e.IRON_ORE=20]="IRON_ORE",e[e.PLANK=21]="PLANK",e[e.CUT_STONE=22]="CUT_STONE",e[e.FUEL=23]="FUEL",e[e.FLOUR=24]="FLOUR",e[e.FABRIC=25]="FABRIC",e[e.LEATHER=26]="LEATHER",e[e.COINS=27]="COINS",e[e.COPPER=28]="COPPER",e[e.GOLD=29]="GOLD",e[e.SILVER=30]="SILVER",e[e.TIN=31]="TIN",e[e.BRONZE=32]="BRONZE",e[e.IRON=33]="IRON",e[e.STEEL=34]="STEEL",e[e.BERRY=35]="BERRY",e[e.MUSHROOM=36]="MUSHROOM",e[e.FISH=37]="FISH",e[e.APPLE=38]="APPLE",e[e.GRAPE=39]="GRAPE",e[e.BREAD=40]="BREAD",e[e.MEAT=41]="MEAT",e[e.EGG=42]="EGG",e[e.MILK=43]="MILK",e[e.COOKED_MEAT=44]="COOKED_MEAT",e[e.VEGETABLE_SOUP=45]="VEGETABLE_SOUP",e[e.MEAT_SOUP=46]="MEAT_SOUP",e[e.BEER=47]="BEER",e[e.WINE=48]="WINE",e[e.CLOTHES=49]="CLOTHES",e[e.BOW=50]="BOW",e[e.PICKAXE=51]="PICKAXE",e[e.SHOVEL=52]="SHOVEL",e[e.AXE=53]="AXE",e[e.SPEAR=54]="SPEAR",e[e.HAMMER=55]="HAMMER",e[e.SWORD=56]="SWORD",e[e.SHIELD=57]="SHIELD",e[e.LEATHER_ARMOR=58]="LEATHER_ARMOR",e[e.LIGHT_ARMOR=59]="LIGHT_ARMOR",e[e.HEAVY_ARMOR=60]="HEAVY_ARMOR",e[e.FISH_FOOD=61]="FISH_FOOD",e[e.CHEESE=62]="CHEESE",e[e.HERBS=63]="HERBS",e[e.HERBAL_MEDICINE=64]="HERBAL_MEDICINE",e[e.COOKED_FISH=65]="COOKED_FISH",e[e.SHEEP=66]="SHEEP",e[e.WOOL=67]="WOOL",e[e.PAPER=68]="PAPER",e[e.GLASS=69]="GLASS",e[e.CLAY=70]="CLAY",e[e.POTTERY=71]="POTTERY",e[e.BRICKS=72]="BRICKS",e[e.OMELETTE=73]="OMELETTE",e[e.PIE=74]="PIE",e[e.NAILS=75]="NAILS",e[e.MAP=76]="MAP",e[e.CANNON=77]="CANNON",e[e.BOUILLABAISSE=78]="BOUILLABAISSE",e[e.GEMS=79]="GEMS",e[e.JEWELRY=80]="JEWELRY",e}({});!function(e){e.values=function(){return Object.keys(e).filter(e=>isNaN(e)&&"values"!==e)}}(bu||(bu={}));var Tu=function(e){return e[e.MOTIVATION_SPEECH=0]="MOTIVATION_SPEECH",e[e.ROYAL_PROPHECY=1]="ROYAL_PROPHECY",e[e.HERITAGE=2]="HERITAGE",e[e.FAMILY_JEWELS=3]="FAMILY_JEWELS",e[e.KING_OF_THE_FOREST=4]="KING_OF_THE_FOREST",e[e.KING_OF_THE_SEAS=5]="KING_OF_THE_SEAS",e[e.KING_OF_THE_PEOPLE=6]="KING_OF_THE_PEOPLE",e[e.KING_OF_THE_WAR=7]="KING_OF_THE_WAR",e[e.CALL_TO_ARMS=8]="CALL_TO_ARMS",e[e.UNITE_WITH_THE_PEOPLE=9]="UNITE_WITH_THE_PEOPLE",e[e.JESTER=10]="JESTER",e[e.ROYAL_ORDERS=11]="ROYAL_ORDERS",e[e.ROYAL_ARCHIVES=12]="ROYAL_ARCHIVES",e[e.ASTROLOGICAL_NOTE=13]="ASTROLOGICAL_NOTE",e[e.ROYAL_FESTIVAL=14]="ROYAL_FESTIVAL",e[e.ROYAL_RESERVE=15]="ROYAL_RESERVE",e[e.ANCIENT_SEA_MAPS=16]="ANCIENT_SEA_MAPS",e[e.ROYAL_GARDENS=17]="ROYAL_GARDENS",e[e.HIRE_MERCENARIES=18]="HIRE_MERCENARIES",e[e.HIRE_PIRATES=19]="HIRE_PIRATES",e[e.ANCIENT_PROTECTION=20]="ANCIENT_PROTECTION",e[e.ROYAL_TRADITIONS=21]="ROYAL_TRADITIONS",e}({}),Cu=function(e){return e[e.MANAGEMENT=0]="MANAGEMENT",e[e.STONE_AXE=1]="STONE_AXE",e[e.STONE_PICKAXE=2]="STONE_PICKAXE",e[e.STONE_SHOVEL=3]="STONE_SHOVEL",e[e.STONE_HAMMER=4]="STONE_HAMMER",e[e.HUNTING=5]="HUNTING",e[e.FIRE=6]="FIRE",e[e.BIGGER_FIRE=7]="BIGGER_FIRE",e[e.COOKING=8]="COOKING",e[e.TRADE=9]="TRADE",e[e.ALCOHOL=10]="ALCOHOL",e[e.WONDER_BUILDINGS=11]="WONDER_BUILDINGS",e[e.TRADE_ROUTES=12]="TRADE_ROUTES",e[e.BUFF_PRODUCTION=13]="BUFF_PRODUCTION",e[e.STONE_SPEAR=14]="STONE_SPEAR",e[e.BOW=15]="BOW",e[e.BARRACKS=16]="BARRACKS",e[e.WOODEN_DEFENCES=17]="WOODEN_DEFENCES",e[e.STONE_DEFENCES=18]="STONE_DEFENCES",e[e.STASH=19]="STASH",e[e.SCIENTIFIC_METHOD=20]="SCIENTIFIC_METHOD",e[e.FORESIGHT=21]="FORESIGHT",e[e.CALENDAR=22]="CALENDAR",e[e.WEATHER=23]="WEATHER",e[e.HISTORY=24]="HISTORY",e[e.URBAN_PLANNING=25]="URBAN_PLANNING",e[e.MATHEMATICS=26]="MATHEMATICS",e[e.PROSPECTING_FOR_ORE=27]="PROSPECTING_FOR_ORE",e[e.ADVANCED_PROSPECTING=28]="ADVANCED_PROSPECTING",e[e.MASTER_PROSPECTING=29]="MASTER_PROSPECTING",e[e.SAWMILL=30]="SAWMILL",e[e.MINING=31]="MINING",e[e.PIT_MINE=32]="PIT_MINE",e[e.UNDERGROUND_MINE=33]="UNDERGROUND_MINE",e[e.WINDMILL=34]="WINDMILL",e[e.MORTAR=35]="MORTAR",e[e.HOUSE=36]="HOUSE",e[e.TANNERY=37]="TANNERY",e[e.FABRIC=38]="FABRIC",e[e.TAILORING=39]="TAILORING",e[e.ORE_PROCESSING=40]="ORE_PROCESSING",e[e.ADVANCED_ORE_PROCESSING=41]="ADVANCED_ORE_PROCESSING",e[e.MASTER_ORE_PROCESSING=42]="MASTER_ORE_PROCESSING",e[e.COINS_MINTING=43]="COINS_MINTING",e[e.METALLURGY=44]="METALLURGY",e[e.ADVANCED_METALLURGY=45]="ADVANCED_METALLURGY",e[e.PICKAXE_DESIGN=46]="PICKAXE_DESIGN",e[e.AGRICULTURE=47]="AGRICULTURE",e[e.FORESTRY=48]="FORESTRY",e[e.FISHING=49]="FISHING",e[e.ANIMALS=50]="ANIMALS",e[e.COTTON=51]="COTTON",e[e.FERTILIZER=52]="FERTILIZER",e[e.HUMAN_RESOURCES=53]="HUMAN_RESOURCES",e[e.FISH_FOOD=54]="FISH_FOOD",e[e.SPECIALISED_PRODUCTION=55]="SPECIALISED_PRODUCTION",e[e.LONGHOUSE=56]="LONGHOUSE",e[e.HERBAL_MEDICINE=57]="HERBAL_MEDICINE",e[e.HERBALISM=58]="HERBALISM",e[e.CARTOGRAPHY=59]="CARTOGRAPHY",e[e.PARCHMENT=60]="PARCHMENT",e[e.PAPER_MILL=61]="PAPER_MILL",e[e.DEEP_MINE=62]="DEEP_MINE",e[e.ADVANCED_MATHEMATICS=63]="ADVANCED_MATHEMATICS",e[e.IMPROVED_FORESIGHT=64]="IMPROVED_FORESIGHT",e[e.LOGISTICS=65]="LOGISTICS",e[e.PRODUCTION_ZONES=66]="PRODUCTION_ZONES",e[e.CROPS_STORAGE=67]="CROPS_STORAGE",e[e.COPPER_TOOLS=68]="COPPER_TOOLS",e[e.BRONZE_TOOLS=69]="BRONZE_TOOLS",e[e.IRON_TOOLS=70]="IRON_TOOLS",e[e.BAKERY=71]="BAKERY",e[e.KITCHEN=72]="KITCHEN",e[e.DIGGING=73]="DIGGING",e[e.POTTERY=74]="POTTERY",e[e.BRICKS=75]="BRICKS",e[e.TUDOR_HOUSE=76]="TUDOR_HOUSE",e[e.IMPROVED_COOKING=77]="IMPROVED_COOKING",e[e.BOAT_BUILDING=78]="BOAT_BUILDING",e[e.CANNON=79]="CANNON",e[e.GALLEON=80]="GALLEON",e[e.BIGGER_SHIPS=81]="BIGGER_SHIPS",e[e.SEA_NAVIGATION=82]="SEA_NAVIGATION",e[e.SEA_CARTOGRAPHY=83]="SEA_CARTOGRAPHY",e[e.SEA_CUISINE=84]="SEA_CUISINE",e[e.SETTLEMENT=85]="SETTLEMENT",e[e.SCHOLAR=86]="SCHOLAR",e[e.TAX=87]="TAX",e[e.JEWELRY=88]="JEWELRY",e}({}),Iu=function(e){return e[e.WEATHER=0]="WEATHER",e[e.MARKET=1]="MARKET",e[e.MANAGEMENT=2]="MANAGEMENT",e[e.CRAFTING=3]="CRAFTING",e[e.RESEARCH=4]="RESEARCH",e[e.ARMY=5]="ARMY",e[e.RELIGION=6]="RELIGION",e[e.FORT=7]="FORT",e[e.SEA=8]="SEA",e[e.FIELD=9]="FIELD",e[e.MOUNTAINS=10]="MOUNTAINS",e[e.PLATEAU=11]="PLATEAU",e[e.HOUSE=12]="HOUSE",e[e.SHRINE=13]="SHRINE",e[e.CHURCH=14]="CHURCH",e[e.TAILOR=15]="TAILOR",e[e.TAVERN=16]="TAVERN",e[e.BAKERY=17]="BAKERY",e[e.MARKETPLACE=18]="MARKETPLACE",e[e.BARRACKS=19]="BARRACKS",e[e.STOCKADE=20]="STOCKADE",e[e.WOODEN_TOWER=21]="WOODEN_TOWER",e[e.STONE_TOWER=22]="STONE_TOWER",e[e.STASH=23]="STASH",e[e.FORESTER=24]="FORESTER",e[e.SAWMILL=25]="SAWMILL",e[e.HUNTER=26]="HUNTER",e[e.TANNERY=27]="TANNERY",e[e.WINDMILL=28]="WINDMILL",e[e.FARM=29]="FARM",e[e.PASTURE=30]="PASTURE",e[e.BUTCHER=31]="BUTCHER",e[e.BREWERY=32]="BREWERY",e[e.WINERY=33]="WINERY",e[e.COTTON_MILL=34]="COTTON_MILL",e[e.PIT_MINE=35]="PIT_MINE",e[e.GEOLOGIST=36]="GEOLOGIST",e[e.SMITHY=37]="SMITHY",e[e.MINT=38]="MINT",e[e.FISHERS_HUT=39]="FISHERS_HUT",e[e.CALENDAR=40]="CALENDAR",e[e.FIRE=41]="FIRE",e[e.URBAN_PLANNING=42]="URBAN_PLANNING",e[e.ALCOHOL=43]="ALCOHOL",e[e.GOLD=44]="GOLD",e[e.SILVER=45]="SILVER",e[e.BRONZE=46]="BRONZE",e[e.IRON=47]="IRON",e[e.STEEL=48]="STEEL",e[e.ADVANCED_ORE_PROCESSING=49]="ADVANCED_ORE_PROCESSING",e[e.BUFFS=50]="BUFFS",e[e.COTTON=51]="COTTON",e[e.BARLEY=52]="BARLEY",e[e.HOPS=53]="HOPS",e[e.BUILT_QUARRY=54]="BUILT_QUARRY",e[e.BUILT_SMITHY=55]="BUILT_SMITHY",e[e.HUMAN_RESOURCES=56]="HUMAN_RESOURCES",e[e.FISH_FOOD=57]="FISH_FOOD",e[e.SPECIALISED_PRODUCTION=58]="SPECIALISED_PRODUCTION",e[e.MANUFACTURE=59]="MANUFACTURE",e[e.STONEMASON=60]="STONEMASON",e[e.LONGHOUSE=61]="LONGHOUSE",e[e.HERITAGE=62]="HERITAGE",e[e.HERBALISM=63]="HERBALISM",e[e.EMBASSY=64]="EMBASSY",e[e.CARTOGRAPHY=65]="CARTOGRAPHY",e[e.PAPER_MILL=66]="PAPER_MILL",e[e.DEEP_MINE=67]="DEEP_MINE",e[e.LOGISTICS=68]="LOGISTICS",e[e.PRODUCTION_ZONES=69]="PRODUCTION_ZONES",e[e.BARN=70]="BARN",e[e.KITCHEN=71]="KITCHEN",e[e.CLAY_PIT=72]="CLAY_PIT",e[e.TUDOR_HOUSE=73]="TUDOR_HOUSE",e[e.NAVY=74]="NAVY",e[e.PIER=75]="PIER",e[e.BOAT_BUILDER=76]="BOAT_BUILDER",e[e.HARBOUR=77]="HARBOUR",e[e.SHIPYARD=78]="SHIPYARD",e[e.BRIGANTINE=79]="BRIGANTINE",e[e.GALLEON=80]="GALLEON",e[e.LIGHTHOUSE=81]="LIGHTHOUSE",e[e.CARTOGRAPHER=82]="CARTOGRAPHER",e[e.SETTLEMENT=83]="SETTLEMENT",e[e.SCHOLARS_LAB=84]="SCHOLARS_LAB",e[e.TAX_COLLECTOR=85]="TAX_COLLECTOR",e[e.JEWELRY=86]="JEWELRY",e}({}),yu=function(e){return e[e.BLESSING=0]="BLESSING",e[e.PREACH=1]="PREACH",e[e.FAITH_SHIELD=2]="FAITH_SHIELD",e[e.SOLDIER_PRAYER=3]="SOLDIER_PRAYER",e[e.FAITHFUL_RESEARCH=4]="FAITHFUL_RESEARCH",e[e.BABY_BOOM=5]="BABY_BOOM",e[e.LIFE_CYCLE=6]="LIFE_CYCLE",e[e.HOLY_WAR=7]="HOLY_WAR",e[e.PRAY=8]="PRAY",e}({}),Au=function(e){return e[e.SPY=0]="SPY",e[e.DIVERSION=1]="DIVERSION",e[e.PLUNDER=2]="PLUNDER",e[e.EXPEDITION=3]="EXPEDITION",e[e.CONQUER=4]="CONQUER",e[e.COLONIZE=5]="COLONIZE",e[e.MOVE=6]="MOVE",e[e.BUILD=7]="BUILD",e[e.FISHING=8]="FISHING",e[e.HUNTING=9]="HUNTING",e[e.TREASURE=10]="TREASURE",e[e.CARTOGRAPHY=11]="CARTOGRAPHY",e[e.SEA_BATTLE=12]="SEA_BATTLE",e[e.SEA_PLUNDER=13]="SEA_PLUNDER",e[e.SEA_CONQUER=14]="SEA_CONQUER",e[e.SEA_MOVE=15]="SEA_MOVE",e}({}),Nu=function(e){return e[e.NONE=0]="NONE",e[e.WHEAT=1]="WHEAT",e[e.BARLEY=2]="BARLEY",e[e.HAY=3]="HAY",e[e.HOP=4]="HOP",e[e.COTTON=5]="COTTON",e[e.BERRY=6]="BERRY",e[e.GRAPE=7]="GRAPE",e[e.APPLE=8]="APPLE",e[e.HERBS=9]="HERBS",e[e.MUSHROOM=10]="MUSHROOM",e}({}),_u=function(e){return e[e.ALL=0]="ALL",e[e.NONE=1]="NONE",e[e.RAW=2]="RAW",e[e.PROCESSED=3]="PROCESSED",e[e.FOOD=4]="FOOD",e[e.TOOLS=5]="TOOLS",e[e.OTHER=6]="OTHER",e[e.WOODEN=7]="WOODEN",e[e.METAL=8]="METAL",e[e.STONE=9]="STONE",e[e.ANIMAL=10]="ANIMAL",e[e.FUEL=11]="FUEL",e[e.CONSUMABLE=12]="CONSUMABLE",e}({}),wu=function(e){return e[e.NONE=0]="NONE",e[e.FERTILITY=1]="FERTILITY",e[e.NATURE=2]="NATURE",e[e.TECHNOLOGY=3]="TECHNOLOGY",e[e.WAR=4]="WAR",e}({}),Pu=function(e){return e[e.ALL=0]="ALL",e[e.MILITIA=1]="MILITIA",e[e.SPEARMAN=2]="SPEARMAN",e[e.ARCHER=3]="ARCHER",e[e.SWORDSMAN=4]="SWORDSMAN",e[e.LIGHT_CAVALRY=5]="LIGHT_CAVALRY",e[e.SPY=6]="SPY",e[e.COLONIST=7]="COLONIST",e[e.HORSE_ARCHER=8]="HORSE_ARCHER",e[e.BOAT=9]="BOAT",e[e.BRIGANTINE=10]="BRIGANTINE",e[e.GALLEON=11]="GALLEON",e[e.GUARD_TOWER=12]="GUARD_TOWER",e}({}),xu=function(e){return e[e.NONE=0]="NONE",e[e.OFFENSE=1]="OFFENSE",e[e.DEFENSE=2]="DEFENSE",e[e.ECONOMY=3]="ECONOMY",e[e.PEACE=4]="PEACE",e}({}),ku=function(e){return e[e.SPECIAL=0]="SPECIAL",e[e.PLAYER=1]="PLAYER",e[e.NEUTRAL=2]="NEUTRAL",e[e.EXPEDITION=3]="EXPEDITION",e[e.CLEADAL=4]="CLEADAL",e[e.GRIERIA=5]="GRIERIA",e[e.BOTHIL=6]="BOTHIL",e[e.DOSHOR=7]="DOSHOR",e[e.CREURUS=8]="CREURUS",e[e.ESTRAILA=9]="ESTRAILA",e[e.NONE=10]="NONE",e[e.PIRATES=11]="PIRATES",e}({}),Mu=function(e){return e[e.FLU=0]="FLU",e[e.COLD=1]="COLD",e[e.PNEUMONIA=2]="PNEUMONIA",e}({}),Du=function(e){return e[e.VILLAGE=0]="VILLAGE",e[e.FORT=1]="FORT",e[e.FOREST=2]="FOREST",e[e.FIELD=3]="FIELD",e[e.MOUNTAINS=4]="MOUNTAINS",e[e.SEA=5]="SEA",e[e.PLATEAU=6]="PLATEAU",e}({}),Lu=function(e){return e[e.FISH=0]="FISH",e[e.SHARK=1]="SHARK",e[e.TREASURE=2]="TREASURE",e[e.PIRATES=3]="PIRATES",e[e.PIRATES_BASE=4]="PIRATES_BASE",e[e.WHIRLPOOL=5]="WHIRLPOOL",e[e.CARTOGRAPHY=6]="CARTOGRAPHY",e}({}),Fu=function(e){return e[e.FOOD=0]="FOOD",e[e.VARIOUS_FOOD=1]="VARIOUS_FOOD",e[e.MONOTONOUS_FOOD=2]="MONOTONOUS_FOOD",e[e.RAW_FOOD=3]="RAW_FOOD",e[e.CLOTHES=4]="CLOTHES",e[e.FUR_CLOTHES=5]="FUR_CLOTHES",e[e.ALCOHOL=6]="ALCOHOL",e[e.TAX=7]="TAX",e[e.DONATION=8]="DONATION",e[e.FREEZING=9]="FREEZING",e[e.SICKNESS_DEATH=10]="SICKNESS_DEATH",e[e.FESTIVAL=11]="FESTIVAL",e[e.ROYAL_FESTIVAL=12]="ROYAL_FESTIVAL",e[e.RELIGION=13]="RELIGION",e[e.PRAYER=14]="PRAYER",e[e.POPULATION_SIZE=15]="POPULATION_SIZE",e[e.LOW_QUALITY_HOUSING=16]="LOW_QUALITY_HOUSING",e[e.SUCCESSFUL_CONQUER=17]="SUCCESSFUL_CONQUER",e[e.RECENTLY_INVADED=18]="RECENTLY_INVADED",e[e.RECENTLY_CONQUERED=19]="RECENTLY_CONQUERED",e[e.PIRATES_DEFEATED=20]="PIRATES_DEFEATED",e[e.PIRATES_BASE_PRESENT=21]="PIRATES_BASE_PRESENT",e[e.ROYAL_GARDENS=22]="ROYAL_GARDENS",e}({});class Uu{static round(e,n){return e.toFixed(n)}static titleCase(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}static prepareResourceName(e){const n=bu[e];return n?this.titleCase(n.replace(/_/g," ")):"(error: r"+e+")"}static prepareRegionName(e){const n=Du[e];return n?this.titleCase(n.replace(/_/g," ")):"(error: reg"+e+")"}static prepareResourceTypeName(e){const n=_u[e];return n?this.titleCase(n.replace(/_/g," ")):"(error: rt"+e+")"}static preparePerkName(e){const n=Tu[e];return n?this.titleCase(n.replace(/_/g," ")):"(error: rp"+e+")"}static prepareTechName(e){const n=Cu[e];return n?this.titleCase(n.replace(/_/g," ")):"(error: r"+e+")"}static prepareFlagName(e){const n=Iu[e];return n?this.titleCase(n.replace(/_/g," ")):"(error: f"+e+")"}static prepareBuildingName(e){const n=Ru[e];return n?this.titleCase(n.replace(/_/g," ")):"(error: b"+e+")"}static prepareSeaEventName(e){const n=Lu[e];return n?this.titleCase(n.replace(/_/g," ")):"(error: se"+e+")"}static preparePrayerName(e){const n=yu[e];return n?this.titleCase(n.replace(/_/g," ")):"(error: p"+e+")"}static prepareReligionName(e){const n=wu[e];return n?this.titleCase(n.replace(/_/g," ")):"(error: rel"+e+")"}static prepareTroopName(e){const n=Pu[e];return n?this.titleCase(n.replace(/_/g," ")):"(error: t"+e+")"}static prepareMissionName(e){const n=Au[e];return n?this.titleCase(n.replace(/_/g," ")):"(error: m"+e+")"}static prepareCropName(e){const n=Nu[e];return n?this.titleCase(n.replace(/_/g," ")):"(error: c"+e+")"}static prepareFocusName(e){const n=xu[e];return n?this.titleCase(n.replace(/_/g," ")):"(error: foc"+e+")"}static prepareCountryName(e){const n=ku[e];return n?this.titleCase(n.replace(/_/g," ")):"(error: co"+e+")"}static prepareSicknessName(e){const n=Mu[e];return n?this.titleCase(n.replace(/_/g," ")):"(error: si"+e+")"}static prepareHappinessEffectName(e){const n=Fu[e];return n?this.titleCase(n.replace(/_/g," ")):"(error: he"+e+")"}static resourcesArraysDiff(e,n){return e.filter(e=>n.findIndex(n=>n.resource===e.resource)<0)}static prepareResourcesNamesList(e){let n="";return e.forEach(e=>n+=Uu.prepareResourceName(e.resource)+", "),(n=n.substr(0,n.length-2)).toLowerCase()}static copyResourceArray(e){const n=[];return e.forEach(e=>n.push({resource:e.resource,amount:e.amount})),n}}var Hu=function(e){return e[e.SUN=0]="SUN",e[e.CLOUDS=1]="CLOUDS",e[e.RAIN=2]="RAIN",e[e.WIND=3]="WIND",e[e.STORM=4]="STORM",e[e.SNOW=5]="SNOW",e}({}),Gu=function(e){return e[e.PLANK=0]="PLANK",e[e.CUT_STONE=1]="CUT_STONE",e[e.FABRIC=2]="FABRIC",e[e.LEATHER=3]="LEATHER",e[e.GOLD=4]="GOLD",e[e.SILVER=5]="SILVER",e[e.COPPER=6]="COPPER",e[e.TIN=7]="TIN",e[e.BRONZE=8]="BRONZE",e[e.IRON=9]="IRON",e[e.STEEL=10]="STEEL",e[e.FUEL_BRUSHWOOD=11]="FUEL_BRUSHWOOD",e[e.FUEL_LOG=12]="FUEL_LOG",e[e.FUEL_COAL=13]="FUEL_COAL",e[e.STONE_AXE=14]="STONE_AXE",e[e.STONE_PICKAXE=15]="STONE_PICKAXE",e[e.STONE_SHOVEL=16]="STONE_SHOVEL",e[e.STONE_SPEAR=17]="STONE_SPEAR",e[e.STONE_HAMMER=18]="STONE_HAMMER",e[e.BOW=19]="BOW",e[e.CLOTHES_FUR=20]="CLOTHES_FUR",e[e.CLOTHES_FABRIC=21]="CLOTHES_FABRIC",e[e.SWORD=22]="SWORD",e[e.WOODEN_SHIELD=23]="WOODEN_SHIELD",e[e.LEATHER_ARMOR=24]="LEATHER_ARMOR",e[e.LIGHT_ARMOR=25]="LIGHT_ARMOR",e[e.HEAVY_ARMOR=26]="HEAVY_ARMOR",e[e.COOKED_MEAT=27]="COOKED_MEAT",e[e.FLOUR=28]="FLOUR",e[e.BREAD=29]="BREAD",e[e.VEGETABLE_SOUP_BERRY=30]="VEGETABLE_SOUP_BERRY",e[e.VEGETABLE_SOUP_MUSHROOM=31]="VEGETABLE_SOUP_MUSHROOM",e[e.MEAT_SOUP=32]="MEAT_SOUP",e[e.CHEESE=33]="CHEESE",e[e.HERBAL_MEDICINE=34]="HERBAL_MEDICINE",e[e.COOKED_FISH=35]="COOKED_FISH",e[e.FABRIC_WOOL=36]="FABRIC_WOOL",e[e.PARCHMENT=37]="PARCHMENT",e[e.VEGETABLE_SOUP_BERRY_MUSHROOM=38]="VEGETABLE_SOUP_BERRY_MUSHROOM",e[e.COPPER_AXE=39]="COPPER_AXE",e[e.COPPER_PICKAXE=40]="COPPER_PICKAXE",e[e.COPPER_SHOVEL=41]="COPPER_SHOVEL",e[e.COPPER_SPEAR=42]="COPPER_SPEAR",e[e.COPPER_HAMMER=43]="COPPER_HAMMER",e[e.BRONZE_AXE=44]="BRONZE_AXE",e[e.BRONZE_PICKAXE=45]="BRONZE_PICKAXE",e[e.BRONZE_SHOVEL=46]="BRONZE_SHOVEL",e[e.BRONZE_SPEAR=47]="BRONZE_SPEAR",e[e.BRONZE_HAMMER=48]="BRONZE_HAMMER",e[e.IRON_AXE=49]="IRON_AXE",e[e.IRON_PICKAXE=50]="IRON_PICKAXE",e[e.IRON_SHOVEL=51]="IRON_SHOVEL",e[e.IRON_SPEAR=52]="IRON_SPEAR",e[e.IRON_HAMMER=53]="IRON_HAMMER",e[e.POTTERY=54]="POTTERY",e[e.BRICKS=55]="BRICKS",e[e.OMELETTE=56]="OMELETTE",e[e.PIE=57]="PIE",e[e.COPPER_NAILS=58]="COPPER_NAILS",e[e.BRONZE_NAILS=59]="BRONZE_NAILS",e[e.IRON_NAILS=60]="IRON_NAILS",e[e.CANNON=61]="CANNON",e[e.BOUILLABAISSE=62]="BOUILLABAISSE",e[e.JEWELRY=63]="JEWELRY",e[e.BRONZE_SWORD=64]="BRONZE_SWORD",e[e.IRON_SWORD=65]="IRON_SWORD",e[e.BRONZE_SHIELD=66]="BRONZE_SHIELD",e[e.IRON_SHIELD=67]="IRON_SHIELD",e}({}),Bu=function(e){return e[e.GENERAL=0]="GENERAL",e[e.MILITARY=1]="MILITARY",e[e.SCIENCE=2]="SCIENCE",e[e.TECHNOLOGY=3]="TECHNOLOGY",e[e.AGRICULTURE=4]="AGRICULTURE",e}({}),Wu=function(e){return e[e.GAME=0]="GAME",e[e.LOG=1]="LOG",e[e.MODAL=2]="MODAL",e[e.RESOURCES=3]="RESOURCES",e[e.LAND=4]="LAND",e[e.RESEARCH=5]="RESEARCH",e[e.CRAFTING=6]="CRAFTING",e[e.RECIPE=7]="RECIPE",e[e.RELIGION=8]="RELIGION",e[e.WEATHER=9]="WEATHER",e[e.CALENDAR=10]="CALENDAR",e[e.EFFECTS=11]="EFFECTS",e[e.ARMY=12]="ARMY",e[e.HAPPINESS=13]="HAPPINESS",e[e.MANAGEMENT=14]="MANAGEMENT",e[e.ROYAL=15]="ROYAL",e[e.MARKET=16]="MARKET",e[e.VILLAGE=17]="VILLAGE",e[e.FORT=18]="FORT",e[e.FOREST=19]="FOREST",e[e.FIELD=20]="FIELD",e[e.MOUNTAINS=21]="MOUNTAINS",e[e.SEA=22]="SEA",e[e.PLATEAU=23]="PLATEAU",e[e.BUILDING_FACTORY=24]="BUILDING_FACTORY",e[e.SERIALIZER=25]="SERIALIZER",e[e.KONGREGATE=26]="KONGREGATE",e[e.ID=27]="ID",e[e.TICKER=28]="TICKER",e[e.HERITAGE=29]="HERITAGE",e[e.WORLD=30]="WORLD",e[e.MISSION_FACTORY=31]="MISSION_FACTORY",e[e.SOUND=32]="SOUND",e[e.TUTORIAL=33]="TUTORIAL",e[e.NAVY=34]="NAVY",e}({});class Vu{constructor(e,n,l,t,i=0){this.name=e,this.building=n,this.effect=l,this.duration=t,this.buff=i}isPermanent(){return this.duration<0}isRoyal(){return-10===this.duration}isWonder(){return-9===this.duration}isBuff(){return this.buff>0}}let zu=(()=>{class e{}return e.PERMANENT=-1,e.WONDER=-9,e.ROYAL=-10,e})(),Yu=(()=>{class e{static randomElement(e,n=!1,l=10){let t=0;if(e.forEach(e=>t+=e.chance),t>100||t<100&&n){const n=100/t;e.forEach(e=>e.chance=Math.floor(e.chance*n))}const i=this.randomBetween(1,100*l);let s=0;for(const r of e){if(s+1<=i&&s+r.chance*l>=i)return r.item;s+=r.chance*l}for(;t>100;)for(const n of e){if(s+1<=i&&s+n.chance*l>=i)return n.item;s+=n.chance*l}return null}static chance(e){return Math.random()<e}static randomExcept(e,n){const l=e.filter((function(e){return n.indexOf(e)<0}));return l[this.randomBetween(0,l.length-1)]}static randomArrayElement(e){return e[this.randomBetween(0,e.length-1)]}static randomBetween(e,n){return Math.floor(Math.random()*(n-e+1))+e}static randomBetweenFloat(e,n){return Math.random()*(n-e+1)+e}static randomWeightedExcept(e,n){const l=e.filter((function(e){return n.indexOf(e.item)<0}));let t=0;l.forEach(e=>t+=e.chance);const i=this.randomBetween(1,t);let s=0;for(let r=0;r<l.length;r++){if(s<i&&i<=s+l[r].chance)return l[r].item;s+=l[r].chance}}}return e.ngInjectableDef=ce({factory:function(){return new e},token:e,providedIn:"root"}),e})();class $u{constructor(e,n,l,t){this.name=e,this.troop=n,this.effect=l,this.duration=t}isPermanent(){return this.duration<0}isRoyal(){return-10===this.duration}isWonder(){return-9===this.duration}}class Ku{constructor(e,n,l){this.name=e,this.effect=n,this.duration=l}isPermanent(){return this.duration<0}isRoyal(){return-10===this.duration}isWonder(){return-9===this.duration}}var ju=function(e){return e.ALL="all",e.BUILD="build-modal",e.IMPORT="import-modal",e.EXPORT="export-modal",e.HARD_RESET="hard-reset-modal",e.INFO="info-modal",e.OPTIONS="options-modal",e.CONFIRM="confirm-modal",e.INPUT="input-modal",e.ROYAL="royal-modal",e.MISSION="mission-modal",e.MARKET="market-modal",e.WORK_MANAGEMENT="work-management-modal",e.TUTORIAL="tutorial-modal",e.CHANGELOG="changelog-modal",e.RESOURCE_MANAGEMENT="resource-management-modal",e.RECIPE="recipe-modal",e.WORLD="world-modal",e.WORLD_BUILD="world-build-modal",e.FIGHT_REPORT="fight-report-modal",e.ABDICATION="abdication-modal",e.ASCENSION="ascension-modal",e.RESEARCH_UNLOCK="research-unlock-modal",e.SHIPYARD="shipyard-modal",e.FESTIVAL="festival-modal",e.ERROR="error-modal",e}({}),Qu=function(e){return e[e.METEORITE=0]="METEORITE",e[e.SMALL_REFUGEE=1]="SMALL_REFUGEE",e[e.MEDIUM_REFUGEE=2]="MEDIUM_REFUGEE",e}({}),qu=function(e){return e[e.LOG=0]="LOG",e[e.WARNING=1]="WARNING",e[e.SUCCESS=2]="SUCCESS",e[e.MYSTICAL=3]="MYSTICAL",e[e.FIGHT_REPORT=4]="FIGHT_REPORT",e[e.ERROR=5]="ERROR",e}({}),Xu=function(e){return e[e.DISABLED=0]="DISABLED",e[e.EASY=1]="EASY",e[e.MEDIUM=2]="MEDIUM",e[e.HARD=3]="HARD",e}({}),Zu=function(e){return e[e.DEFENSES=0]="DEFENSES",e[e.ROADS=1]="ROADS",e[e.WATCHTOWER=2]="WATCHTOWER",e[e.GUARD_TOWER=3]="GUARD_TOWER",e[e.HARBOUR=4]="HARBOUR",e}({});const Ju={AUTO_SAVE_STATUS:!0,AUTO_SAVE_PERIOD:5,METRIC:!0,SAVE_LOGS:!1,PAUSE_ON_INIT:!1,KEEP_RESERVATION_SETTINGS_ON_RESET:!1,KEEP_MANAGEMENT_SETTINGS_ON_RESET:!1,KEEP_AUTO_TRADE_ON_RESET:!1,SOUND_MASTER:!0,SOUND_MASTER_VOLUME:50,SOUND_MUSIC:!0,SOUND_MUSIC_VOLUME:50,SOUND_EFFECTS:!0,SOUND_EFFECTS_VOLUME:50,SOUND_EFFECT_MARKET:!0,SOUND_EFFECT_RESEARCH:!0,SOUND_EFFECT_INVASION:!0,SOUND_EFFECT_SEASON:!0,VISUAL_PROGRESS_BARS:!0,AUTO_TEXT_FITTING:!0,PAGED_VIEW:!1,BUILDINGS_PER_PAGE:12,POSITIVE_COLOUR:"#006400",NEGATIVE_COLOUR:"#8B0000",PLAYER_COLOUR:"#006400",AI_DIFFICULTY:Xu.MEDIUM},eo={getBuilding(e){const n=this.getBuildings().find(n=>n[0]===Ru[e]);if(n)return n[1];console.warn("Invalid building: "+Uu.prepareBuildingName(e))},getBuildings(){return Object.entries(this.VILLAGE).concat(Object.entries(this.FORT)).concat(Object.entries(this.FOREST)).concat(Object.entries(this.FIELD)).concat(Object.entries(this.MOUNTAINS)).concat(Object.entries(this.PLATEAU)).concat(Object.entries(this.SEA))},getBuildingRegion(e){return Object.keys(this.FOREST).includes(Ru[e])?Du.FOREST:Object.keys(this.VILLAGE).includes(Ru[e])?Du.VILLAGE:Object.keys(this.MOUNTAINS).includes(Ru[e])?Du.MOUNTAINS:Object.keys(this.FIELD).includes(Ru[e])?Du.FIELD:Object.keys(this.FORT).includes(Ru[e])?Du.FORT:Object.keys(this.SEA).includes(Ru[e])?Du.SEA:Object.keys(this.PLATEAU).includes(Ru[e])?Du.PLATEAU:void 0},DEMOLITION_RETURN:.3,FOREST:{LOGGERS_HUT:{BASE_POWER:5,SIZE:5,COMPLEXITY:5,DESCRIPTION:"Loggers cut trees in the forest",COST:[{resource:bu.LOG,amount:10}],WEATHER:[{weather:Hu.RAIN,effect:-50},{weather:Hu.STORM,effect:-100}],BUFF:{name:"New tools",effect:10,duration:360,cost:[{resource:bu.AXE,amount:5}]},UPGRADES:[{BASE_POWER:7.5,COMPLEXITY:10,PREREQUISITES:[Iu.URBAN_PLANNING],COST:[{resource:bu.PLANK,amount:10},{resource:bu.CUT_STONE,amount:10},{resource:bu.HAMMER,amount:5},{resource:bu.AXE,amount:5}]},{BASE_POWER:10,COMPLEXITY:20,PREREQUISITES:[],COST:[{resource:bu.PLANK,amount:20},{resource:bu.CUT_STONE,amount:20},{resource:bu.COPPER,amount:10},{resource:bu.AXE,amount:10}]}]},LOGGERS_CAMP:{BASE_POWER:5,SIZE:20,COMPLEXITY:5,DESCRIPTION:"Loggers cut trees in the forest",COST:[{resource:bu.LOG,amount:30},{resource:bu.PLANK,amount:10},{resource:bu.CUT_STONE,amount:10}],WEATHER:[{weather:Hu.RAIN,effect:-50},{weather:Hu.STORM,effect:-100}],BUFF:{name:"New tools",effect:10,duration:360,cost:[{resource:bu.AXE,amount:20}]},UPGRADES:[{BASE_POWER:7.5,COMPLEXITY:10,PREREQUISITES:[Iu.URBAN_PLANNING],COST:[{resource:bu.PLANK,amount:40},{resource:bu.CUT_STONE,amount:40},{resource:bu.HAMMER,amount:20},{resource:bu.AXE,amount:20}]},{BASE_POWER:10,COMPLEXITY:20,PREREQUISITES:[],COST:[{resource:bu.PLANK,amount:80},{resource:bu.BRICKS,amount:40},{resource:bu.BRONZE,amount:20},{resource:bu.AXE,amount:40}]}]},FORESTER:{BASE_POWER:10,SIZE:10,COMPLEXITY:10,DESCRIPTION:"Forester can plant new trees and control natural growth of the forest",COST:[{resource:bu.LOG,amount:10},{resource:bu.SHOVEL,amount:2}],WEATHER:[{weather:Hu.RAIN,effect:-100},{weather:Hu.STORM,effect:-100}],BUFF:{name:"New tools",effect:10,duration:360,cost:[{resource:bu.SHOVEL,amount:5}]}},SAWMILL:{BASE_POWER:3,SIZE:20,COMPLEXITY:15,DESCRIPTION:"Sawmill cut logs into planks",COST:[{resource:bu.LOG,amount:20},{resource:bu.CUT_STONE,amount:10}],TEXT:"cutting",INPUT_RESOURCES:[{resource:bu.LOG,amount:3}],OUTPUT_RESOURCES:[{resource:bu.PLANK,amount:1}]},GATHERER:{BASE_POWER:10,SIZE:5,COMPLEXITY:3,DESCRIPTION:"Gatherer can find all kinds of useful things in the forest.<br>They can look for either food or resources",COST:[{resource:bu.LOG,amount:10},{resource:bu.STONE,amount:5}],WEATHER:[{weather:Hu.RAIN,effect:-75},{weather:Hu.STORM,effect:-100}],CAN_PRODUCE:[bu.BERRY,bu.MUSHROOM,bu.WHEAT,bu.HERBS,bu.BRUSHWOOD,bu.STONE,bu.LOG,bu.COPPER],BERRY_CHANCE:30,MUSHROOM_CHANCE:30,WHEAT_CHANCE:3,BRUSHWOOD_CHANCE:35,STONE_CHANCE:15,LOG_CHANCE:5,COPPER_CHANCE:.5,HERBS_CHANCE:2},GATHERERS_CAMP:{BASE_POWER:10,SIZE:20,COMPLEXITY:15,DESCRIPTION:"It is more efficient to group gatherers together in one place",COST:[{resource:bu.LOG,amount:30},{resource:bu.PLANK,amount:10},{resource:bu.CUT_STONE,amount:10}],WEATHER:[{weather:Hu.RAIN,effect:-75},{weather:Hu.STORM,effect:-100}],CAN_PRODUCE:[bu.BERRY,bu.MUSHROOM,bu.WHEAT,bu.HERBS,bu.BRUSHWOOD,bu.STONE,bu.LOG,bu.COPPER],BERRY_CHANCE:30,MUSHROOM_CHANCE:30,WHEAT_CHANCE:3,BRUSHWOOD_CHANCE:35,STONE_CHANCE:15,LOG_CHANCE:5,COPPER_CHANCE:.5,HERBS_CHANCE:2},HUNTER_LODGE:{BASE_POWER:2,SIZE:5,COMPLEXITY:8,DESCRIPTION:"Hunts animals for meat and fur",COST:[{resource:bu.LOG,amount:15},{resource:bu.PLANK,amount:5},{resource:bu.BOW,amount:1}],WEATHER:[{weather:Hu.RAIN,effect:-100},{weather:Hu.STORM,effect:-100}],CAN_PRODUCE:[bu.MEAT,bu.FUR],BUFF:{name:"New tools",effect:10,duration:360,cost:[{resource:bu.BOW,amount:5}]}},TANNERY:{BASE_POWER:5,SIZE:5,COMPLEXITY:5,DESCRIPTION:"Turns furs into leather",COST:[{resource:bu.LOG,amount:20},{resource:bu.PLANK,amount:10}],TEXT:"tanning",INPUT_RESOURCES:[{resource:bu.FUR,amount:1}],OUTPUT_RESOURCES:[{resource:bu.LEATHER,amount:1}]},PAPER_MILL:{BASE_POWER:2,SIZE:20,COMPLEXITY:20,DESCRIPTION:"Produces paper from logs",COST:[{resource:bu.LOG,amount:20},{resource:bu.CUT_STONE,amount:10},{resource:bu.PLANK,amount:10}],TEXT:"producing",INPUT_RESOURCES:[{resource:bu.LOG,amount:3}],OUTPUT_RESOURCES:[{resource:bu.PAPER,amount:1}]}},MOUNTAINS:{QUARRY:{BASE_POWER:5,SIZE:20,COMPLEXITY:15,DESCRIPTION:"Cuts stone out of mountains",COST:[{resource:bu.LOG,amount:40},{resource:bu.PLANK,amount:20}],WEATHER:[{weather:Hu.RAIN,effect:-100},{weather:Hu.STORM,effect:-100}],CAN_PRODUCE:[bu.STONE],BUFF:{name:"New tools",effect:10,duration:360,cost:[{resource:bu.PICKAXE,amount:5}]}},GEOLOGIST:{BASE_POWER:1,SIZE:5,COMPLEXITY:10,DESCRIPTION:"Looks for useful rocks",COST:[{resource:bu.LOG,amount:10},{resource:bu.STONE,amount:5}],WEATHER:[{weather:Hu.RAIN,effect:-100},{weather:Hu.STORM,effect:-100}],COAL_CHANCE:20,GOLD_CHANCE:4,SILVER_CHANCE:8,COPPER_CHANCE:10,TIN_CHANCE:6,IRON_CHANCE:4},PIT_MINE:{BASE_POWER:2,SIZE:20,COMPLEXITY:15,DESCRIPTION:"Allows workers to mine ores",COST:[{resource:bu.LOG,amount:60},{resource:bu.PICKAXE,amount:5}],WEATHER:[{weather:Hu.RAIN,effect:-100},{weather:Hu.STORM,effect:-100}],GEM_CHANCE:.001,BUFF:{name:"New tools",effect:10,duration:360,cost:[{resource:bu.PICKAXE,amount:5},{resource:bu.SHOVEL,amount:5}]}},METEORITE:{BASE_POWER:3,SIZE:0,COMPLEXITY:0,DESCRIPTION:"Pieces of metal that fell from the sky",COST:[],WEATHER:[{weather:Hu.RAIN,effect:-100},{weather:Hu.STORM,effect:-100}]},DEEP_MINE:{BASE_POWER:1,SIZE:20,COMPLEXITY:30,DESCRIPTION:"Allows workers to mine ores from under the ground",COST:[{resource:bu.LOG,amount:100},{resource:bu.PLANK,amount:50},{resource:bu.CUT_STONE,amount:50},{resource:bu.PICKAXE,amount:20},{resource:bu.SHOVEL,amount:20},{resource:bu.HAMMER,amount:10}],WEATHER:[],GEM_CHANCE:.002,BUFF:{name:"New tools",effect:10,duration:360,cost:[{resource:bu.PICKAXE,amount:10},{resource:bu.SHOVEL,amount:10}]},UPGRADES:[{BASE_POWER:1,COMPLEXITY:40,PREREQUISITES:[],COST:[{resource:bu.LOG,amount:20},{resource:bu.PLANK,amount:20},{resource:bu.CUT_STONE,amount:10},{resource:bu.PICKAXE,amount:5},{resource:bu.HAMMER,amount:5},{resource:bu.SHOVEL,amount:5}]},{BASE_POWER:1,COMPLEXITY:50,PREREQUISITES:[],COST:[{resource:bu.LOG,amount:20},{resource:bu.PLANK,amount:20},{resource:bu.CUT_STONE,amount:10},{resource:bu.PICKAXE,amount:5},{resource:bu.HAMMER,amount:5},{resource:bu.SHOVEL,amount:5}]},{BASE_POWER:1,COMPLEXITY:60,PREREQUISITES:[],COST:[{resource:bu.LOG,amount:20},{resource:bu.PLANK,amount:20},{resource:bu.CUT_STONE,amount:10},{resource:bu.PICKAXE,amount:5},{resource:bu.HAMMER,amount:5},{resource:bu.SHOVEL,amount:5}]},{BASE_POWER:1,COMPLEXITY:70,PREREQUISITES:[],COST:[{resource:bu.LOG,amount:20},{resource:bu.PLANK,amount:20},{resource:bu.CUT_STONE,amount:10},{resource:bu.PICKAXE,amount:5},{resource:bu.HAMMER,amount:5},{resource:bu.SHOVEL,amount:5}]}]},STONEMASON:{BASE_POWER:3,SIZE:5,COMPLEXITY:10,DESCRIPTION:"Shapes stones for building",COST:[{resource:bu.LOG,amount:10},{resource:bu.STONE,amount:10}],TEXT:"cutting",INPUT_RESOURCES:[{resource:bu.STONE,amount:3}],OUTPUT_RESOURCES:[{resource:bu.CUT_STONE,amount:1}]},SMITHY:{BASE_POWER:5,SIZE:10,COMPLEXITY:20,DESCRIPTION:"Provides furnace for smelting ore and metal items",COST:[{resource:bu.LOG,amount:20},{resource:bu.PLANK,amount:10},{resource:bu.CUT_STONE,amount:10},{resource:bu.COPPER,amount:5}],RECIPES:[{recipe:Gu.COPPER,prerequisite:Iu.SMITHY},{recipe:Gu.TIN,prerequisite:Iu.SMITHY},{recipe:Gu.BRONZE,prerequisite:Iu.BRONZE},{recipe:Gu.GOLD,prerequisite:Iu.ADVANCED_ORE_PROCESSING},{recipe:Gu.SILVER,prerequisite:Iu.ADVANCED_ORE_PROCESSING},{recipe:Gu.IRON,prerequisite:Iu.IRON},{recipe:Gu.STEEL,prerequisite:Iu.STEEL},{recipe:Gu.SWORD,prerequisite:Iu.SMITHY},{recipe:Gu.BRONZE_SWORD,prerequisite:Iu.BRONZE},{recipe:Gu.IRON_SWORD,prerequisite:Iu.IRON},{recipe:Gu.BRONZE_SHIELD,prerequisite:Iu.BRONZE},{recipe:Gu.IRON_SHIELD,prerequisite:Iu.IRON},{recipe:Gu.LIGHT_ARMOR,prerequisite:Iu.SMITHY},{recipe:Gu.HEAVY_ARMOR,prerequisite:Iu.BRONZE}]},MINT:{BASE_POWER:3,SIZE:40,COMPLEXITY:20,DESCRIPTION:"Produces coins from gold",COST:[{resource:bu.LOG,amount:20},{resource:bu.PLANK,amount:10},{resource:bu.CUT_STONE,amount:10},{resource:bu.BRONZE,amount:10}],TEXT:"minting",INPUT_RESOURCES:[{resource:bu.GOLD,amount:1},{resource:bu.SILVER,amount:1}],OUTPUT_RESOURCES:[{resource:bu.COINS,amount:150}]}},VILLAGE:{HUT:{BASE_POWER:.5,FUEL_EFFICIENCY:0,SIZE:10,COMPLEXITY:5,STORAGE:100,TAX:1,DESCRIPTION:"Very primitive shelter but keeps rain and cold away. Houses 2 villagers",COST:[{resource:bu.FOOD,amount:100},{resource:bu.LOG,amount:10},{resource:bu.BRUSHWOOD,amount:10}],MAX_OCCUPANTS:2,UPGRADES:[{BASE_POWER:0,SIZE:15,COMPLEXITY:15,NEW_BUILDING:Ru.HOUSE,PREREQUISITES:[Iu.HOUSE],COST:[{resource:bu.FOOD,amount:100},{resource:bu.LOG,amount:15},{resource:bu.BRUSHWOOD,amount:5},{resource:bu.PLANK,amount:20}]}]},HOUSE:{BASE_POWER:.7,FUEL_EFFICIENCY:.2,SIZE:25,COMPLEXITY:15,STORAGE:200,TAX:1,DESCRIPTION:"Bigger and more durable shelter. Houses 6 villagers.<br>It's more efficient to heat than multiple huts",COST:[{resource:bu.FOOD,amount:200},{resource:bu.LOG,amount:20},{resource:bu.PLANK,amount:20},{resource:bu.BRUSHWOOD,amount:10}],MAX_OCCUPANTS:6,UPGRADES:[{BASE_POWER:0,SIZE:20,COMPLEXITY:20,NEW_BUILDING:Ru.LONGHOUSE,PREREQUISITES:[Iu.LONGHOUSE],COST:[{resource:bu.FOOD,amount:100},{resource:bu.LOG,amount:30},{resource:bu.PLANK,amount:30},{resource:bu.CUT_STONE,amount:20},{resource:bu.HAY,amount:10}]}]},LONGHOUSE:{BASE_POWER:.9,FUEL_EFFICIENCY:.3,SIZE:45,COMPLEXITY:20,STORAGE:300,TAX:2,DESCRIPTION:"Long building for multiple families. Houses 15 villagers",COST:[{resource:bu.FOOD,amount:300},{resource:bu.LOG,amount:40},{resource:bu.PLANK,amount:40},{resource:bu.CUT_STONE,amount:20},{resource:bu.HAY,amount:10}],MAX_OCCUPANTS:15,UPGRADES:[{BASE_POWER:0,SIZE:55,COMPLEXITY:30,NEW_BUILDING:Ru.TUDOR_HOUSE,PREREQUISITES:[Iu.TUDOR_HOUSE],COST:[{resource:bu.FOOD,amount:500},{resource:bu.LOG,amount:80},{resource:bu.PLANK,amount:60},{resource:bu.CUT_STONE,amount:10},{resource:bu.BRICKS,amount:50}]}]},TUDOR_HOUSE:{BASE_POWER:1.1,FUEL_EFFICIENCY:.35,SIZE:100,COMPLEXITY:30,STORAGE:800,TAX:2,DESCRIPTION:"Very big and durable house. Houses 40 villagers",COST:[{resource:bu.FOOD,amount:800},{resource:bu.LOG,amount:100},{resource:bu.PLANK,amount:80},{resource:bu.CUT_STONE,amount:20},{resource:bu.BRICKS,amount:50}],MAX_OCCUPANTS:40,UPGRADES:[{BASE_POWER:0,SIZE:100,COMPLEXITY:60,NEW_BUILDING:Ru.SETTLEMENT,PREREQUISITES:[Iu.SETTLEMENT],COST:[{resource:bu.FOOD,amount:800},{resource:bu.LOG,amount:150},{resource:bu.PLANK,amount:110},{resource:bu.CUT_STONE,amount:40},{resource:bu.BRICKS,amount:25},{resource:bu.NAILS,amount:100},{resource:bu.HAMMER,amount:20},{resource:bu.SHOVEL,amount:20}]}]},SETTLEMENT:{BASE_POWER:1.3,FUEL_EFFICIENCY:.38,SIZE:200,COMPLEXITY:60,STORAGE:1600,TAX:3,DESCRIPTION:"A group of small buildings that can house up to 90 villagers",COST:[{resource:bu.FOOD,amount:1600},{resource:bu.LOG,amount:200},{resource:bu.PLANK,amount:150},{resource:bu.CUT_STONE,amount:50},{resource:bu.BRICKS,amount:50},{resource:bu.NAILS,amount:100},{resource:bu.HAMMER,amount:20},{resource:bu.SHOVEL,amount:20}],MAX_OCCUPANTS:90},WAREHOUSE:{BASE_POWER:0,SIZE:50,COMPLEXITY:10,DESCRIPTION:"Stores selected type of resources",COST:[{resource:bu.LOG,amount:20},{resource:bu.PLANK,amount:10},{resource:bu.CUT_STONE,amount:5}]},WORKSHOP:{BASE_POWER:5,RESEARCH_POWER:1,CRAFTING_POWER:1.5,SIZE:15,COMPLEXITY:15,DESCRIPTION:"At the workshop workers can do research projects or build complex things",COST:[{resource:bu.LOG,amount:20},{resource:bu.BRUSHWOOD,amount:10}]},TAX_COLLECTOR:{BASE_POWER:0,SIZE:20,COMPLEXITY:15,DESCRIPTION:"Tax collector gathers taxes from villagers or give donations",COST:[{resource:bu.LOG,amount:10},{resource:bu.PLANK,amount:20},{resource:bu.BRICKS,amount:20},{resource:bu.PAPER,amount:30}]},SCHOLARS_LAB:{BASE_POWER:2.5,RESEARCH_POWER:4,SIZE:15,COMPLEXITY:25,DESCRIPTION:"Scholars cannot craft items but they are more efficient at research (each cycle generates 4 research points)",COST:[{resource:bu.LOG,amount:10},{resource:bu.PLANK,amount:20},{resource:bu.HAY,amount:20},{resource:bu.PAPER,amount:20}]},KITCHEN:{BASE_POWER:12.5,CRAFTING_POWER:1.5,SIZE:5,COMPLEXITY:10,DESCRIPTION:"Kitchen focuses on processing raw food",COST:[{resource:bu.LOG,amount:10},{resource:bu.PLANK,amount:5},{resource:bu.CUT_STONE,amount:5},{resource:bu.POTTERY,amount:5}]},MANUFACTURE:{BASE_POWER:7,CRAFTING_POWER:1.5,SIZE:5,COMPLEXITY:20,DESCRIPTION:"Manufacture specialises in crafting one recipe and it takes time to change production but it produces slightly faster than workshop",COST:[{resource:bu.LOG,amount:20},{resource:bu.PLANK,amount:10},{resource:bu.CUT_STONE,amount:10},{resource:bu.HAMMER,amount:5}]},MARKETPLACE:{BASE_POWER:1,SIZE:20,COMPLEXITY:5,DESCRIPTION:"Place for trading with other villages",COST:[{resource:bu.LOG,amount:10},{resource:bu.PLANK,amount:10},{resource:bu.STONE,amount:20}]},TAVERN:{BASE_POWER:1,SIZE:10,COMPLEXITY:20,DESCRIPTION:"Meeting place where villagers can relax and cheer up<br>Consume wine and beer but increase happiness",COST:[{resource:bu.LOG,amount:10},{resource:bu.PLANK,amount:20},{resource:bu.CUT_STONE,amount:20},{resource:bu.BRUSHWOOD,amount:20}],WEATHER:[{weather:Hu.RAIN,effect:25},{weather:Hu.STORM,effect:25}]},BAKERY:{BASE_POWER:10,SIZE:5,COMPLEXITY:10,DESCRIPTION:"Bakes bread from flour",COST:[{resource:bu.LOG,amount:10},{resource:bu.PLANK,amount:10},{resource:bu.STONE,amount:10},{resource:bu.CUT_STONE,amount:10}],TEXT:"baking",INPUT_RESOURCES:[{resource:bu.FLOUR,amount:2},{resource:bu.FUEL,amount:1}],OUTPUT_RESOURCES:[{resource:bu.BREAD,amount:1}],BUFF:{name:"Bread oven",effect:10,duration:360,cost:[{resource:bu.CUT_STONE,amount:20}]}},TAILOR:{BASE_POWER:5,SIZE:5,COMPLEXITY:10,DESCRIPTION:"Produces clothes from fabric",COST:[{resource:bu.LOG,amount:10},{resource:bu.PLANK,amount:10}],TEXT:"sewing",INPUT_RESOURCES:[{resource:bu.FABRIC,amount:3}],OUTPUT_RESOURCES:[{resource:bu.CLOTHES,amount:1}]},SHRINE:{BASE_POWER:2,POPULATION:8,SIZE:2,COMPLEXITY:8,DESCRIPTION:"Place for prayer and offerings",COST:[{resource:bu.LOG,amount:5},{resource:bu.CUT_STONE,amount:5},{resource:bu.BERRY,amount:10},{resource:bu.MUSHROOM,amount:10},{resource:bu.MEAT,amount:10}]},CHURCH:{BASE_POWER:1,POPULATION:20,SIZE:10,COMPLEXITY:10,DESCRIPTION:"Place of prayer and contemplation",COST:[{resource:bu.LOG,amount:40},{resource:bu.CUT_STONE,amount:30}],BUFF:{name:"Offering",effect:10,duration:360,cost:[{resource:bu.COINS,amount:200}]}}},FORT:{BARRACKS:{BASE_POWER:0,SIZE:10,COMPLEXITY:10,DESCRIPTION:"Housing for troops",COST:[{resource:bu.LOG,amount:20},{resource:bu.CUT_STONE,amount:10}]},TRAINING_SQUARE:{BASE_POWER:10,SIZE:10,COMPLEXITY:3,DESCRIPTION:"Place for training recruits",COST:[{resource:bu.STONE,amount:40}],WEATHER:[{weather:Hu.RAIN,effect:-50},{weather:Hu.STORM,effect:-100}]},EMBASSY:{BASE_POWER:1,SIZE:20,COMPLEXITY:10,DESCRIPTION:"Ambassadors work here to improve relations with other kingdoms",COST:[{resource:bu.PLANK,amount:30},{resource:bu.CUT_STONE,amount:30}]},STOCKADE:{BASE_POWER:10,SIZE:50,COMPLEXITY:100,DESCRIPTION:"Protective wall around the village to protect against attackers",COST:[{resource:bu.LOG,amount:100},{resource:bu.STONE,amount:10}],DEFENSE:2,DURABILITY:50},WOODEN_TOWER:{BASE_POWER:10,SIZE:10,COMPLEXITY:30,DESCRIPTION:" Provide passive defense power",COST:[{resource:bu.LOG,amount:40},{resource:bu.PLANK,amount:20}],DEFENSE:3,DURABILITY:50},STONE_TOWER:{BASE_POWER:10,SIZE:10,COMPLEXITY:30,DESCRIPTION:"Provide passive defense power, more durable than wooden tower",COST:[{resource:bu.CUT_STONE,amount:40},{resource:bu.PLANK,amount:20}],DEFENSE:3,DURABILITY:100},STASH:{BASE_POWER:1,SIZE:10,COMPLEXITY:30,DESCRIPTION:"Complex hidden tunnels allow us to hide some resources in case of invasion",COST:[{resource:bu.LOG,amount:30},{resource:bu.CUT_STONE,amount:10},{resource:bu.PLANK,amount:10},{resource:bu.PICKAXE,amount:5}]}},FIELD:{FARM:{BASE_POWER:20,SIZE:15,COMPLEXITY:10,DESCRIPTION:"Farm allows workers to work on fields, orchard and pastures",COST:[{resource:bu.LOG,amount:40},{resource:bu.PLANK,amount:20},{resource:bu.STONE,amount:10}],WEATHER:[{weather:Hu.RAIN,effect:-50},{weather:Hu.STORM,effect:-100}],BUFF:{name:"New tools",effect:10,duration:360,cost:[{resource:bu.SHOVEL,amount:5}]},UPGRADES:[{BASE_POWER:22,COMPLEXITY:10,PREREQUISITES:[Iu.URBAN_PLANNING],COST:[{resource:bu.LOG,amount:20},{resource:bu.PLANK,amount:20},{resource:bu.CUT_STONE,amount:10},{resource:bu.HAMMER,amount:5},{resource:bu.SHOVEL,amount:5}]}]},BARN:{BASE_POWER:0,SIZE:50,COMPLEXITY:10,DESCRIPTION:"Stores selected type of crops",COST:[{resource:bu.LOG,amount:40},{resource:bu.PLANK,amount:20},{resource:bu.HAY,amount:20},{resource:bu.CUT_STONE,amount:10}]},WINDMILL:{BASE_POWER:10,SIZE:20,COMPLEXITY:15,DESCRIPTION:"Windmill turns wheat into flour",COST:[{resource:bu.LOG,amount:30},{resource:bu.PLANK,amount:10},{resource:bu.FABRIC,amount:20}],TEXT:"milling",INPUT_RESOURCES:[{resource:bu.WHEAT,amount:1}],OUTPUT_RESOURCES:[{resource:bu.FLOUR,amount:2}],WEATHER:[{weather:Hu.WIND,effect:50},{weather:Hu.STORM,effect:-100}]},COTTON_MILL:{BASE_POWER:5,SIZE:10,COMPLEXITY:10,DESCRIPTION:"Spins cotton into fabric",COST:[{resource:bu.LOG,amount:10},{resource:bu.PLANK,amount:10}],TEXT:"spinning",INPUT_RESOURCES:[{resource:bu.COTTON,amount:2}],OUTPUT_RESOURCES:[{resource:bu.FABRIC,amount:1}]},BREWERY:{BASE_POWER:1,SIZE:25,COMPLEXITY:20,DESCRIPTION:"Brews delicious beer",COST:[{resource:bu.LOG,amount:30},{resource:bu.PLANK,amount:30},{resource:bu.COPPER,amount:5},{resource:bu.POTTERY,amount:10}],TEXT:"brewing",INPUT_RESOURCES:[{resource:bu.BARLEY,amount:10},{resource:bu.HOP,amount:5},{resource:bu.FUEL,amount:3}],OUTPUT_RESOURCES:[{resource:bu.BEER,amount:20}]},FIELD:{BASE_POWER:1,SIZE:50,COMPLEXITY:1,DESCRIPTION:"Various crops can be grown here (Farm required to work on fields)",COST:[{resource:bu.STONE,amount:4}],WEATHER:[{weather:Hu.RAIN,effect:50},{weather:Hu.SUN,effect:50},{weather:Hu.CLOUDS,effect:-25}]},BUTCHER:{BASE_POWER:5,SIZE:15,COMPLEXITY:10,DESCRIPTION:"Turns animals from pastures into meat",COST:[{resource:bu.LOG,amount:15},{resource:bu.PLANK,amount:10},{resource:bu.CUT_STONE,amount:5}]},ORCHARD:{BASE_POWER:1,SIZE:50,COMPLEXITY:1,DESCRIPTION:"Various fruit trees and bushes can be grown here (Farm required to work on orchards)",COST:[{resource:bu.LOG,amount:5}],WEATHER:[{weather:Hu.RAIN,effect:50},{weather:Hu.SUN,effect:50},{weather:Hu.CLOUDS,effect:-25}]},PASTURE:{BASE_POWER:1,SIZE:50,COMPLEXITY:3,DESCRIPTION:"Many animals can be grown here (Farm required to work on pastures). <br>After building pasture and selecting animal type it is possible to use hunter lodges to tame animals or buy them from market.<br>Animals start to breed if there are at least two of them in a pasture.",COST:[{resource:bu.LOG,amount:10},{resource:bu.PLANK,amount:20}]},CLAY_PIT:{BASE_POWER:5,SIZE:15,COMPLEXITY:15,DESCRIPTION:"We can extract clay here",COST:[{resource:bu.LOG,amount:15},{resource:bu.PLANK,amount:5}],WEATHER:[{weather:Hu.RAIN,effect:-100},{weather:Hu.STORM,effect:-100}],CAN_PRODUCE:[bu.CLAY]},WINERY:{BASE_POWER:1,SIZE:25,COMPLEXITY:10,DESCRIPTION:"Extracts and ferments grape juices",COST:[{resource:bu.LOG,amount:20},{resource:bu.PLANK,amount:20},{resource:bu.COPPER,amount:5},{resource:bu.POTTERY,amount:10}],TEXT:"fermenting",INPUT_RESOURCES:[{resource:bu.GRAPE,amount:35}],OUTPUT_RESOURCES:[{resource:bu.WINE,amount:16}]}},SEA:{FISHERS_HUT:{BASE_POWER:5,SIZE:5,COMPLEXITY:5,DESCRIPTION:"Fishers catch fish in the sea",COST:[{resource:bu.LOG,amount:10},{resource:bu.PLANK,amount:5},{resource:bu.COPPER,amount:1}],WEATHER:[{weather:Hu.RAIN,effect:25},{weather:Hu.STORM,effect:-100},{weather:Hu.WIND,effect:25}]},PIER:{BASE_POWER:0,SIZE:25,HARBOUR_SIZE:80,COMPLEXITY:40,DESCRIPTION:"Pier is where your boats can dock",COST:[{resource:bu.LOG,amount:30},{resource:bu.PLANK,amount:20},{resource:bu.COPPER,amount:10}]},HARBOUR:{BASE_POWER:0,SIZE:200,HARBOUR_SIZE:800,COMPLEXITY:60,DESCRIPTION:"Harbour can dock many more boats and ships than pier",COST:[{resource:bu.CUT_STONE,amount:50},{resource:bu.LOG,amount:30},{resource:bu.PLANK,amount:20},{resource:bu.BRONZE,amount:20},{resource:bu.IRON,amount:20}]},LIGHTHOUSE:{BASE_POWER:0,SIZE:20,COMPLEXITY:20,DESCRIPTION:"Sailors can better navigate at sea when lighthouse light guide them",COST:[{resource:bu.CUT_STONE,amount:20},{resource:bu.LOG,amount:10},{resource:bu.BRONZE,amount:5},{resource:bu.FUEL,amount:5}]},BOAT_BUILDER:{BASE_POWER:1,SIZE:20,COMPLEXITY:30,DESCRIPTION:"Boat builder can craft small boats",COST:[{resource:bu.LOG,amount:30},{resource:bu.PLANK,amount:20},{resource:bu.CUT_STONE,amount:20},{resource:bu.HAMMER,amount:10}]},SHIPYARD:{BASE_POWER:2,SIZE:50,COMPLEXITY:50,DESCRIPTION:"Shipyards excel in building even the biggest ships",COST:[{resource:bu.LOG,amount:100},{resource:bu.PLANK,amount:50},{resource:bu.BRICKS,amount:50},{resource:bu.HAMMER,amount:20}]},CARTOGRAPHER:{BASE_POWER:2,SIZE:10,COMPLEXITY:10,DESCRIPTION:"Gathers information produced by sea missions and by creating star maps to help navigating to distant lands",COST:[{resource:bu.LOG,amount:20},{resource:bu.PLANK,amount:10},{resource:bu.PAPER,amount:50}]}},PLATEAU:{STONEHENGE:{BASE_POWER:3,SIZE:50,COMPLEXITY:0,DESCRIPTION:"Huge rocks mark place for old rituals and scientific experiments",COST:[],STAGES:[{cost:[{resource:bu.SHOVEL,amount:10},{resource:bu.PICKAXE,amount:10},{resource:bu.HAMMER,amount:10}],progress:10},{cost:[{resource:bu.LOG,amount:50},{resource:bu.PLANK,amount:50}],progress:10},{cost:[{resource:bu.LOG,amount:50},{resource:bu.PLANK,amount:50}],progress:10},{cost:[{resource:bu.STONE,amount:100}],progress:10},{cost:[{resource:bu.CUT_STONE,amount:100}],progress:10},{cost:[{resource:bu.STONE,amount:100}],progress:10},{cost:[{resource:bu.CUT_STONE,amount:100}],progress:10},{cost:[{resource:bu.LOG,amount:50},{resource:bu.PLANK,amount:50}],progress:10},{cost:[{resource:bu.STONE,amount:100}],progress:10},{cost:[{resource:bu.CUT_STONE,amount:100}],progress:10}],BUILDING_EFFECTS:[{building:Ru.WORKSHOP,value:20},{building:Ru.KITCHEN,value:10},{building:Ru.MANUFACTURE,value:10}],RP:20},PYRAMID:{BASE_POWER:3,SIZE:100,COMPLEXITY:0,DESCRIPTION:"Although it's just \"putting one rock on the other\", our construction worker's skill will be put to the test with this huge project",COST:[],STAGES:[{cost:[{resource:bu.SHOVEL,amount:10},{resource:bu.PICKAXE,amount:10},{resource:bu.HAMMER,amount:10}],progress:10},{cost:[{resource:bu.CUT_STONE,amount:50}],progress:10},{cost:[{resource:bu.LOG,amount:50},{resource:bu.PLANK,amount:50}],progress:10},{cost:[{resource:bu.CUT_STONE,amount:100}],progress:10},{cost:[{resource:bu.LOG,amount:50},{resource:bu.PLANK,amount:50}],progress:10},{cost:[{resource:bu.CUT_STONE,amount:100}],progress:10},{cost:[{resource:bu.LOG,amount:50},{resource:bu.PLANK,amount:50}],progress:10},{cost:[{resource:bu.CUT_STONE,amount:100}],progress:5},{cost:[{resource:bu.CUT_STONE,amount:100}],progress:5},{cost:[{resource:bu.LOG,amount:50},{resource:bu.PLANK,amount:50}],progress:10},{cost:[{resource:bu.CUT_STONE,amount:100}],progress:5},{cost:[{resource:bu.CUT_STONE,amount:100}],progress:5}],BUILDING_EFFECTS:[{building:Ru.CONSTRUCTION,value:10},{building:Ru.DECONSTRUCTION,value:10}],RP:20},HANGING_GARDEN:{BASE_POWER:3,SIZE:30,COMPLEXITY:0,DESCRIPTION:"With all those plants that cover entire buildings we truly became masters of flora",COST:[],STAGES:[{cost:[{resource:bu.SHOVEL,amount:10},{resource:bu.HAMMER,amount:10},{resource:bu.AXE,amount:10}],progress:10},{cost:[{resource:bu.LOG,amount:100},{resource:bu.PLANK,amount:50}],progress:10},{cost:[{resource:bu.BERRY,amount:75},{resource:bu.MUSHROOM,amount:75}],progress:10},{cost:[{resource:bu.SHOVEL,amount:20}],progress:10},{cost:[{resource:bu.WHEAT,amount:100}],progress:10},{cost:[{resource:bu.BARLEY,amount:100}],progress:10},{cost:[{resource:bu.APPLE,amount:100}],progress:10},{cost:[{resource:bu.HOP,amount:100}],progress:10},{cost:[{resource:bu.COTTON,amount:100}],progress:10},{cost:[{resource:bu.GRAPE,amount:100}],progress:10}],BUILDING_EFFECTS:[{building:Ru.FARM,value:15}],RP:20},COLOSSUS:{BASE_POWER:3,SIZE:50,COMPLEXITY:0,DESCRIPTION:"This giant statue watches over our troops both during defense and attack",COST:[],STAGES:[{cost:[{resource:bu.SHOVEL,amount:10},{resource:bu.PICKAXE,amount:10},{resource:bu.HAMMER,amount:10}],progress:10},{cost:[{resource:bu.LOG,amount:100},{resource:bu.PLANK,amount:50}],progress:10},{cost:[{resource:bu.STONE,amount:75},{resource:bu.CUT_STONE,amount:75}],progress:10},{cost:[{resource:bu.LOG,amount:100},{resource:bu.PLANK,amount:50}],progress:10},{cost:[{resource:bu.STONE,amount:75},{resource:bu.CUT_STONE,amount:75}],progress:10},{cost:[{resource:bu.LOG,amount:100},{resource:bu.PLANK,amount:50}],progress:10},{cost:[{resource:bu.STONE,amount:75},{resource:bu.CUT_STONE,amount:75}],progress:10},{cost:[{resource:bu.LOG,amount:100},{resource:bu.PLANK,amount:50}],progress:10},{cost:[{resource:bu.STONE,amount:75},{resource:bu.CUT_STONE,amount:75}],progress:10},{cost:[{resource:bu.COPPER,amount:100},{resource:bu.HAMMER,amount:20}],progress:10}],ARMY_EFFECTS:[{troop:Pu.ALL,value:15}],RP:20},UNDERGROUND_CITY:{BASE_POWER:3,SIZE:0,COMPLEXITY:0,DESCRIPTION:"After connecting empty mines tunnels and repurposing them we will create entire underground city",COST:[],STAGES:[{cost:[{resource:bu.SHOVEL,amount:10},{resource:bu.HAMMER,amount:10},{resource:bu.PICKAXE,amount:10}],progress:10},{cost:[{resource:bu.LOG,amount:100}],progress:10},{cost:[{resource:bu.SHOVEL,amount:20},{resource:bu.HAMMER,amount:20},{resource:bu.PICKAXE,amount:20}],progress:10},{cost:[{resource:bu.LOG,amount:100}],progress:10},{cost:[{resource:bu.SHOVEL,amount:20},{resource:bu.HAMMER,amount:20},{resource:bu.PICKAXE,amount:20}],progress:10},{cost:[{resource:bu.LOG,amount:100}],progress:10},{cost:[{resource:bu.SHOVEL,amount:20},{resource:bu.HAMMER,amount:20},{resource:bu.PICKAXE,amount:20}],progress:10},{cost:[{resource:bu.LOG,amount:100}],progress:10},{cost:[{resource:bu.SHOVEL,amount:20},{resource:bu.HAMMER,amount:20},{resource:bu.PICKAXE,amount:20}],progress:10},{cost:[{resource:bu.LOG,amount:50},{resource:bu.CUT_STONE,amount:50}],progress:10}],BUILDING_EFFECTS:[{building:Ru.DEEP_MINE,value:15},{building:Ru.PIT_MINE,value:15},{building:Ru.QUARRY,value:15},{building:Ru.GEOLOGIST,value:15}],RP:20},GREAT_LIGHTHOUSE:{BASE_POWER:3,SIZE:50,COMPLEXITY:0,DESCRIPTION:"Light from this building can be seen as far as anyone would like to ever travel",COST:[],STAGES:[{cost:[{resource:bu.SHOVEL,amount:10},{resource:bu.HAMMER,amount:10},{resource:bu.PICKAXE,amount:10}],progress:10},{cost:[{resource:bu.LOG,amount:100},{resource:bu.PLANK,amount:50}],progress:10},{cost:[{resource:bu.CUT_STONE,amount:100}],progress:10},{cost:[{resource:bu.LOG,amount:100},{resource:bu.PLANK,amount:50}],progress:10},{cost:[{resource:bu.CUT_STONE,amount:100}],progress:10},{cost:[{resource:bu.LOG,amount:100},{resource:bu.PLANK,amount:50}],progress:10},{cost:[{resource:bu.CUT_STONE,amount:100}],progress:10},{cost:[{resource:bu.LOG,amount:100},{resource:bu.PLANK,amount:50}],progress:10},{cost:[{resource:bu.CUT_STONE,amount:100}],progress:10},{cost:[{resource:bu.PLANK,amount:100}],progress:10}],BUILDING_EFFECTS:[{building:Ru.BOAT_BUILDER,value:20},{building:Ru.SHIPYARD,value:10}],ARMY_EFFECTS:[{troop:Pu.BOAT,value:10},{troop:Pu.BRIGANTINE,value:10},{troop:Pu.GALLEON,value:10}],RP:20},SACRED_GROVE:{BASE_POWER:3,SIZE:50,COMPLEXITY:0,DESCRIPTION:"Collection of the oldest and greatest forest fauna and flora in one place",COST:[],STAGES:[{cost:[{resource:bu.SHOVEL,amount:10},{resource:bu.HAMMER,amount:10},{resource:bu.PICKAXE,amount:10}],progress:10},{cost:[{resource:bu.BERRY,amount:100},{resource:bu.MUSHROOM,amount:100}],progress:10},{cost:[{resource:bu.CHICKEN,amount:20},{resource:bu.HORSE,amount:10},{resource:bu.PIG,amount:10}],progress:10},{cost:[{resource:bu.BERRY,amount:200},{resource:bu.MUSHROOM,amount:200}],progress:10},{cost:[{resource:bu.BERRY,amount:100},{resource:bu.MUSHROOM,amount:100}],progress:10},{cost:[{resource:bu.CHICKEN,amount:20},{resource:bu.HORSE,amount:10},{resource:bu.PIG,amount:10}],progress:10},{cost:[{resource:bu.BERRY,amount:100},{resource:bu.MUSHROOM,amount:100}],progress:10},{cost:[{resource:bu.CHICKEN,amount:20},{resource:bu.HORSE,amount:10},{resource:bu.PIG,amount:10}],progress:10},{cost:[{resource:bu.BERRY,amount:100},{resource:bu.MUSHROOM,amount:100}],progress:10},{cost:[{resource:bu.BERRY,amount:200},{resource:bu.MUSHROOM,amount:200}],progress:10}],BUILDING_EFFECTS:[{building:Ru.FORESTER,value:10},{building:Ru.LOGGERS_HUT,value:10},{building:Ru.LOGGERS_CAMP,value:10},{building:Ru.HUNTER_LODGE,value:10},{building:Ru.GATHERER,value:10},{building:Ru.GATHERERS_CAMP,value:10}],RP:20},ASCENSION_TEMPLE:{BASE_POWER:1.5,SIZE:100,COMPLEXITY:0,DESCRIPTION:"Mystical place where your fate will be determined",COST:[],STAGES:[{cost:[{resource:bu.SHOVEL,amount:10},{resource:bu.HAMMER,amount:10},{resource:bu.PICKAXE,amount:10}],progress:5},{cost:[{resource:bu.LOG,amount:100},{resource:bu.PLANK,amount:100}],progress:5},{cost:[{resource:bu.CUT_STONE,amount:100},{resource:bu.PLANK,amount:100}],progress:10},{cost:[{resource:bu.COPPER,amount:50},{resource:bu.IRON,amount:50},{resource:bu.STEEL,amount:50}],progress:5},{cost:[{resource:bu.GOLD,amount:50},{resource:bu.SILVER,amount:50}],progress:5},{cost:[{resource:bu.CUT_STONE,amount:100},{resource:bu.PLANK,amount:100}],progress:10},{cost:[{resource:bu.COPPER,amount:50},{resource:bu.IRON,amount:50},{resource:bu.STEEL,amount:50}],progress:5},{cost:[{resource:bu.GOLD,amount:50},{resource:bu.SILVER,amount:50}],progress:5},{cost:[{resource:bu.CUT_STONE,amount:100},{resource:bu.PLANK,amount:100}],progress:10},{cost:[{resource:bu.COPPER,amount:50},{resource:bu.IRON,amount:50},{resource:bu.STEEL,amount:50}],progress:5},{cost:[{resource:bu.GOLD,amount:50},{resource:bu.SILVER,amount:50}],progress:5},{cost:[{resource:bu.CUT_STONE,amount:100},{resource:bu.PLANK,amount:100}],progress:10},{cost:[{resource:bu.COPPER,amount:50},{resource:bu.IRON,amount:50},{resource:bu.STEEL,amount:50}],progress:5},{cost:[{resource:bu.GOLD,amount:50},{resource:bu.SILVER,amount:50}],progress:5},{cost:[{resource:bu.GOLD,amount:100},{resource:bu.SILVER,amount:100}],progress:10}],RP:50}},CONSTRUCTION_SITE:{BASE_POWER:10,SIZE:0,COMPLEXITY:0,DESCRIPTION:"",COST:[],WEATHER:[{weather:Hu.RAIN,effect:-75},{weather:Hu.STORM,effect:-100}]},DECONSTRUCTION_SITE:{BASE_POWER:10,SIZE:0,COMPLEXITY:0,DESCRIPTION:"",COST:[],WEATHER:[{weather:Hu.RAIN,effect:-75},{weather:Hu.STORM,effect:-100}]}},no={getResource(e){const n=this.getResources().find(n=>n[0]===bu[e]);if(n)return n[1];console.warn("Invalid resource: "+Uu.prepareResourceName(e))},getResourcesByType(e){const n=this.getResources().filter(n=>n[1].TYPES.includes(e));if(n)return n;console.warn("Invalid resource type: "+Uu.prepareResourceTypeName(e))},getResources(){return Object.entries(this.RAW).concat(Object.entries(this.PROCESSED)).concat(Object.entries(this.FOOD)).concat(Object.entries(this.TOOLS))},DEFAULT_AMOUNT:0,DEFAULT_LIMIT:50,DEFAULT_VISIBLE:!1,DEFAULT_HIGHLIGHTED:!1,RAW:{LOG:{TYPES:[_u.RAW,_u.FUEL],TRADE_VALUE:2,AMOUNT:20,LIMIT:100,VISIBLE:!0,HIGHLIGHTED:!0,FUEL_PRIORITY:3,POWER:10},BRUSHWOOD:{TYPES:[_u.RAW,_u.FUEL],TRADE_VALUE:1,AMOUNT:20,LIMIT:100,VISIBLE:!0,HIGHLIGHTED:!0,FUEL_PRIORITY:4,POWER:5.5},STONE:{TYPES:[_u.RAW],TRADE_VALUE:3,AMOUNT:20,LIMIT:100,VISIBLE:!0},FUR:{TYPES:[_u.RAW],TRADE_VALUE:3},WHEAT:{TYPES:[_u.RAW],TRADE_VALUE:2},BARLEY:{TYPES:[_u.RAW],TRADE_VALUE:3},HOP:{TYPES:[_u.RAW],TRADE_VALUE:3},COTTON:{TYPES:[_u.RAW],TRADE_VALUE:3},WOOL:{TYPES:[_u.RAW],TRADE_VALUE:3},HERBS:{TYPES:[_u.RAW],TRADE_VALUE:2},HAY:{TYPES:[_u.RAW],TRADE_VALUE:2},CLAY:{TYPES:[_u.RAW],TRADE_VALUE:2},CHICKEN:{TYPES:[_u.RAW,_u.ANIMAL],LIMIT:0,SIZE:2,MEAT:8,FUR:0,REPRODUCTION_SPEED:6,BUTCHERING_DIFFICULTY:1,TRADE_VALUE:20},SHEEP:{TYPES:[_u.RAW,_u.ANIMAL],LIMIT:0,SIZE:3,MEAT:16,FUR:1,REPRODUCTION_SPEED:4,BUTCHERING_DIFFICULTY:1,TRADE_VALUE:25},COW:{TYPES:[_u.RAW,_u.ANIMAL],LIMIT:0,SIZE:5,MEAT:60,FUR:3,REPRODUCTION_SPEED:1,BUTCHERING_DIFFICULTY:3,TRADE_VALUE:40},PIG:{TYPES:[_u.RAW,_u.ANIMAL],LIMIT:0,SIZE:3,MEAT:30,FUR:2,REPRODUCTION_SPEED:5,BUTCHERING_DIFFICULTY:3,TRADE_VALUE:30},HORSE:{TYPES:[_u.RAW,_u.ANIMAL],LIMIT:0,SIZE:5,MEAT:20,FUR:1,REPRODUCTION_SPEED:1,BUTCHERING_DIFFICULTY:5,TRADE_VALUE:50},COAL:{TYPES:[_u.RAW,_u.FUEL],TRADE_VALUE:8,FUEL_PRIORITY:2,POWER:50},GOLD_ORE:{TYPES:[_u.RAW],TRADE_VALUE:40},SILVER_ORE:{TYPES:[_u.RAW],TRADE_VALUE:20},COPPER_ORE:{TYPES:[_u.RAW],TRADE_VALUE:13},TIN_ORE:{TYPES:[_u.RAW],TRADE_VALUE:20},IRON_ORE:{TYPES:[_u.RAW],TRADE_VALUE:40},GEMS:{TYPES:[_u.RAW],TRADE_VALUE:100}},PROCESSED:{PLANK:{TYPES:[_u.PROCESSED],TRADE_VALUE:3,VISIBLE:!0},CUT_STONE:{TYPES:[_u.PROCESSED],TRADE_VALUE:5},FUEL:{TYPES:[_u.PROCESSED,_u.FUEL],TRADE_VALUE:3,FUEL_PRIORITY:1,POWER:12.5},FLOUR:{TYPES:[_u.PROCESSED],TRADE_VALUE:3},FABRIC:{TYPES:[_u.PROCESSED],TRADE_VALUE:7},LEATHER:{TYPES:[_u.PROCESSED],TRADE_VALUE:4},PAPER:{TYPES:[_u.PROCESSED],TRADE_VALUE:8},POTTERY:{TYPES:[_u.PROCESSED],TRADE_VALUE:10},BRICKS:{TYPES:[_u.PROCESSED],TRADE_VALUE:17},COINS:{TYPES:[_u.PROCESSED],TRADE_VALUE:1,LIMIT:Number.MAX_SAFE_INTEGER},COPPER:{TYPES:[_u.PROCESSED],TRADE_VALUE:32},GOLD:{TYPES:[_u.PROCESSED],TRADE_VALUE:90},SILVER:{TYPES:[_u.PROCESSED],TRADE_VALUE:45},TIN:{TYPES:[_u.PROCESSED],TRADE_VALUE:45},BRONZE:{TYPES:[_u.PROCESSED],TRADE_VALUE:50},IRON:{TYPES:[_u.PROCESSED],TRADE_VALUE:135},STEEL:{TYPES:[_u.PROCESSED],TRADE_VALUE:190},FISH_FOOD:{TYPES:[_u.PROCESSED],TRADE_VALUE:5}},FOOD:{BERRY:{TYPES:[_u.FOOD,_u.CONSUMABLE],TRADE_VALUE:2,AMOUNT:50,LIMIT:100,VISIBLE:!0,HIGHLIGHTED:!0,POWER:50},MUSHROOM:{TYPES:[_u.FOOD,_u.CONSUMABLE],TRADE_VALUE:2,AMOUNT:50,LIMIT:100,VISIBLE:!0,HIGHLIGHTED:!0,POWER:50},FISH:{TYPES:[_u.FOOD,_u.CONSUMABLE],TRADE_VALUE:3,POWER:75},APPLE:{TYPES:[_u.FOOD,_u.CONSUMABLE],TRADE_VALUE:1,POWER:25},GRAPE:{TYPES:[_u.FOOD,_u.CONSUMABLE],TRADE_VALUE:1,POWER:20},BREAD:{TYPES:[_u.FOOD,_u.CONSUMABLE],TRADE_VALUE:10,POWER:300},MEAT:{TYPES:[_u.FOOD,_u.CONSUMABLE],TRADE_VALUE:3,POWER:75},EGG:{TYPES:[_u.FOOD,_u.CONSUMABLE],TRADE_VALUE:1,POWER:25},MILK:{TYPES:[_u.FOOD,_u.CONSUMABLE],TRADE_VALUE:1,POWER:25},CHEESE:{TYPES:[_u.FOOD,_u.CONSUMABLE],TRADE_VALUE:9,POWER:200},COOKED_FISH:{TYPES:[_u.FOOD,_u.CONSUMABLE],TRADE_VALUE:8,POWER:175},COOKED_MEAT:{TYPES:[_u.FOOD,_u.CONSUMABLE],TRADE_VALUE:8,POWER:175},VEGETABLE_SOUP:{TYPES:[_u.FOOD,_u.CONSUMABLE],TRADE_VALUE:10,POWER:225},MEAT_SOUP:{TYPES:[_u.FOOD,_u.CONSUMABLE],TRADE_VALUE:10,POWER:225},OMELETTE:{TYPES:[_u.FOOD,_u.CONSUMABLE],TRADE_VALUE:10,POWER:225},PIE:{TYPES:[_u.FOOD,_u.CONSUMABLE],TRADE_VALUE:12,POWER:250},BOUILLABAISSE:{TYPES:[_u.FOOD,_u.CONSUMABLE],TRADE_VALUE:32,POWER:900},BEER:{TYPES:[_u.FOOD],TRADE_VALUE:3},WINE:{TYPES:[_u.FOOD],TRADE_VALUE:5},HERBAL_MEDICINE:{TYPES:[_u.FOOD],TRADE_VALUE:15}},TOOLS:{CLOTHES:{TYPES:[_u.TOOLS],VISIBLE:!0,AMOUNT:10,TRADE_VALUE:25},PICKAXE:{TYPES:[_u.TOOLS],TRADE_VALUE:35},SHOVEL:{TYPES:[_u.TOOLS],TRADE_VALUE:35},AXE:{TYPES:[_u.TOOLS],TRADE_VALUE:35},HAMMER:{TYPES:[_u.TOOLS],TRADE_VALUE:35},BOW:{TYPES:[_u.TOOLS],TRADE_VALUE:35},SPEAR:{TYPES:[_u.TOOLS],TRADE_VALUE:35},NAILS:{TYPES:[_u.TOOLS],TRADE_VALUE:12},MAP:{TYPES:[_u.TOOLS],TRADE_VALUE:1e3},SWORD:{TYPES:[_u.TOOLS],TRADE_VALUE:190},SHIELD:{TYPES:[_u.TOOLS],TRADE_VALUE:30},LEATHER_ARMOR:{TYPES:[_u.TOOLS],TRADE_VALUE:50},LIGHT_ARMOR:{TYPES:[_u.TOOLS],TRADE_VALUE:400},HEAVY_ARMOR:{TYPES:[_u.TOOLS],TRADE_VALUE:550},CANNON:{TYPES:[_u.TOOLS],TRADE_VALUE:2e3},JEWELRY:{TYPES:[_u.TOOLS],TRADE_VALUE:300}}},lo={getTroop(e){const n=Object.entries(this.TROOPS).find(n=>n[0]===Pu[e]);if(n)return n[1];console.warn("Invalid troop: "+Uu.prepareTroopName(e))},getMission(e){const n=Object.entries(this.MISSIONS).find(n=>n[0]===Au[e]);if(n)return n[1];console.warn("Invalid mission: "+Uu.prepareMissionName(e))},TROOPS:{COLONIST:{SIZE:1,CARGO:0,SPEED:3},SPY:{SIZE:1,CARGO:0,RECRUIT_TIME:10,STRENGTH:0,DEFENSE:1,PAY:5,SPEED:10,COST:[{resource:bu.CLOTHES,amount:1},{resource:bu.COINS,amount:20}]},MILITIA:{SIZE:1,CARGO:0,RECRUIT_TIME:3,STRENGTH:0,DEFENSE:2,PAY:0,SPEED:3,COST:[{resource:bu.FUR,amount:5}],AI_COST:3},SPEARMAN:{SIZE:1,CARGO:0,RECRUIT_TIME:12,STRENGTH:5,DEFENSE:2,PAY:2,SPEED:6,COST:[{resource:bu.SPEAR,amount:1},{resource:bu.LEATHER_ARMOR,amount:1}],AI_COST:6},ARCHER:{SIZE:1,CARGO:0,RECRUIT_TIME:12,STRENGTH:2,DEFENSE:5,PAY:2,SPEED:6,COST:[{resource:bu.BOW,amount:1},{resource:bu.LEATHER_ARMOR,amount:1}],AI_COST:6},SWORDSMAN:{SIZE:2,CARGO:0,RECRUIT_TIME:22,STRENGTH:9,DEFENSE:4,PAY:5,SPEED:5,COST:[{resource:bu.SWORD,amount:1},{resource:bu.SHIELD,amount:1},{resource:bu.LEATHER_ARMOR,amount:1}],AI_COST:10},LIGHT_CAVALRY:{SIZE:3,CARGO:0,RECRUIT_TIME:30,STRENGTH:15,DEFENSE:6,PAY:10,SPEED:10,COST:[{resource:bu.HORSE,amount:1},{resource:bu.SWORD,amount:1},{resource:bu.LIGHT_ARMOR,amount:1}],AI_COST:15},HORSE_ARCHER:{SIZE:3,CARGO:0,RECRUIT_TIME:30,STRENGTH:6,DEFENSE:15,PAY:10,SPEED:10,COST:[{resource:bu.HORSE,amount:1},{resource:bu.BOW,amount:1},{resource:bu.LIGHT_ARMOR,amount:1}],AI_COST:15},BOAT:{SIZE:5,CARGO:5,COMPLEXITY:5,SPEED:5,STRENGTH:0,DEFENSE:0,COST:[{resource:bu.PLANK,amount:10},{resource:bu.LOG,amount:5},{resource:bu.FABRIC,amount:10},{resource:bu.HAMMER,amount:5},{resource:bu.NAILS,amount:10}],PAY:10,CREW:1,AI_COST:0},BRIGANTINE:{SIZE:40,CARGO:40,COMPLEXITY:20,SPEED:15,STRENGTH:6,DEFENSE:6,COST:[{resource:bu.PLANK,amount:100},{resource:bu.LOG,amount:50},{resource:bu.FABRIC,amount:40},{resource:bu.IRON,amount:20},{resource:bu.HAMMER,amount:20},{resource:bu.NAILS,amount:40},{resource:bu.CANNON,amount:6}],PAY:80,CREW:10,AI_COST:0},GALLEON:{SIZE:150,CARGO:300,COMPLEXITY:50,SPEED:10,STRENGTH:30,DEFENSE:30,COST:[{resource:bu.PLANK,amount:350},{resource:bu.LOG,amount:200},{resource:bu.FABRIC,amount:200},{resource:bu.IRON,amount:80},{resource:bu.HAMMER,amount:50},{resource:bu.NAILS,amount:200},{resource:bu.CANNON,amount:20}],PAY:300,CREW:25,AI_COST:0},GUARD_TOWER:{SIZE:0,CARGO:0,COMPLEXITY:0,SPEED:0,STRENGTH:0,DEFENSE:10,COST:[],PAY:0,CREW:0,AI_COST:10}},MISSIONS:{MOVE:{TIME:3,ICON:"move",DESCRIPTION:"Move your troops to another region",COST:[{resource:bu.FOOD,amount:20}]},BUILD:{TIME:10,ICON:"build",DESCRIPTION:"Improve region defenses",COST:[{resource:bu.LOG,amount:20},{resource:bu.CUT_STONE,amount:20}]},COLONIZE:{TIME:3,ICON:"colonize",DESCRIPTION:"Connect this unowned land to your kingdom",COST:[{resource:bu.FOOD,amount:200},{resource:bu.LOG,amount:3},{resource:bu.BRUSHWOOD,amount:2},{resource:bu.FUEL,amount:1}]},SPY:{TIME:7,ICON:"spy",DESCRIPTION:"Try to find out military strength of the enemy and region wealth",COST:[{resource:bu.FOOD,amount:100}]},PLUNDER:{TIME:2,ICON:"plunder",DESCRIPTION:"Plunder your enemies",COST:[{resource:bu.FOOD,amount:100}]},CONQUER:{TIME:3,ICON:"conquer",DESCRIPTION:"Conquer your enemies and claim their land",COST:[{resource:bu.FOOD,amount:200}]},FISHING:{TIME:3,ICON:"fish",DESCRIPTION:"Catch fish from the sea",COST:[{resource:bu.FOOD,amount:200}]},HUNTING:{TIME:3,ICON:"hunting",DESCRIPTION:"Hunt the bigger fish",COST:[{resource:bu.FOOD,amount:200}]},TREASURE:{TIME:2,ICON:"treasure",DESCRIPTION:"Collect treasure",COST:[{resource:bu.FOOD,amount:200}]},CARTOGRAPHY:{TIME:3,ICON:"cartography",DESCRIPTION:"Gather information about all islands and stars during night",COST:[{resource:bu.FOOD,amount:200}]},EXPEDITION:{TIME:12,ICON:"expedition",DESCRIPTION:"Discover distant lands",COST:[{resource:bu.FOOD,amount:20}]},SEA_BATTLE:{TIME:2,ICON:"battle",DESCRIPTION:"Sea battle with other ships",COST:[{resource:bu.FOOD,amount:200}]},SEA_PLUNDER:{TIME:2,ICON:"plunder",DESCRIPTION:"Plunder your enemies",COST:[{resource:bu.FOOD,amount:100}]},SEA_CONQUER:{TIME:3,ICON:"conquer",DESCRIPTION:"Conquer your enemies and claim their land",COST:[{resource:bu.FOOD,amount:200}]},SEA_MOVE:{TIME:3,ICON:"move",DESCRIPTION:"Move your troops to another region",COST:[{resource:bu.FOOD,amount:20}]}}},to={getCrop(e){const n=this.getCrops().find(n=>n[0]===Nu[e]);if(n)return n[1];console.warn("Invalid crop: "+Uu.prepareCropName(e))},getCrops(){return Object.entries(this.FIELD).concat(Object.entries(this.ORCHARD))},FIELD:{WHEAT:{CROP:Nu.WHEAT,GROWTH:20,YIELD_MULTIPLIER:2},BARLEY:{CROP:Nu.BARLEY,GROWTH:20,YIELD_MULTIPLIER:2,PREREQUISITE:Iu.BARLEY},HAY:{CROP:Nu.HAY,GROWTH:10,YIELD_MULTIPLIER:1.5},HOP:{CROP:Nu.HOP,GROWTH:20,YIELD_MULTIPLIER:2,PREREQUISITE:Iu.HOPS},HERBS:{CROP:Nu.HERBS,GROWTH:20,YIELD_MULTIPLIER:4,PREREQUISITE:Iu.HERBALISM},MUSHROOM:{CROP:Nu.MUSHROOM,GROWTH:10,YIELD_MULTIPLIER:1},COTTON:{CROP:Nu.COTTON,GROWTH:20,YIELD_MULTIPLIER:2,PREREQUISITE:Iu.COTTON}},ORCHARD:{BERRY:{CROP:Nu.BERRY,GROWTH:25,FRUITING:15,YIELD_MULTIPLIER:1},GRAPE:{CROP:Nu.GRAPE,GROWTH:50,FRUITING:15,YIELD_MULTIPLIER:1},APPLE:{CROP:Nu.APPLE,GROWTH:75,FRUITING:25,YIELD_MULTIPLIER:2}}},io={SCIENTIFIC_METHOD:{CATEGORY:Bu.SCIENCE,COST:[],RESEARCH_POINT:5,DESCRIPTION:"Maybe there is something we don't know about yet?",FINISH_DESCRIPTION:"We learned how to research things",PREREQUISITES:[],FINISH:function(e){e.getLogService().log("New research projects unlocked")}},FORESIGHT:{CATEGORY:Bu.SCIENCE,COST:[],RESEARCH_POINT:20,DESCRIPTION:"If only we knew what we don't know",FINISH_DESCRIPTION:"We gained insight into what can be researched in close future",PREREQUISITES:[Cu.SCIENTIFIC_METHOD],FINISH:function(e){e.getTechService().increaseForesight(1),e.getLogService().log("Foresight level increased")}},CARTOGRAPHY:{CATEGORY:Bu.SCIENCE,COST:[],RESEARCH_POINT:50,DESCRIPTION:"What if we combine all the information we get from visitors and scouts?",FINISH_DESCRIPTION:"We unlocked world map and gained insight into what happens in the world",PREREQUISITES:[Cu.FORESIGHT],FINISH:function(e){e.getGameService().enable(Iu.CARTOGRAPHY),e.getLogService().log("World map unlocked")}},MANAGEMENT:{CATEGORY:Bu.GENERAL,COST:[],RESEARCH_POINT:30,DESCRIPTION:"Maybe we could make some hard decisions which could help us survive?",FINISH_DESCRIPTION:"Now we have access to many management options",PREREQUISITES:[Cu.FORESIGHT],FINISH:function(e){e.getGameService().enable(Iu.MANAGEMENT),e.getLogService().log("Management tab unlocked")}},TAX:{CATEGORY:Bu.GENERAL,COST:[],RESEARCH_POINT:100,DESCRIPTION:"Could we gather money from citizens?",FINISH_DESCRIPTION:"We invented tax and donations",PREREQUISITES:[Cu.MANAGEMENT,Cu.LONGHOUSE],FINISH:function(e){e.getGameService().enable(Iu.TAX_COLLECTOR),e.getLogService().log("Tax collector unlocked")}},FISHING:{CATEGORY:Bu.AGRICULTURE,COST:[{resource:bu.BERRY,amount:20}],RESEARCH_POINT:30,DESCRIPTION:"Could there be something edible in the water?",FINISH_DESCRIPTION:"We learned how to get fish out of the sea",PREREQUISITES:[Cu.SCIENTIFIC_METHOD],FINISH:function(e){e.getGameService().enable(Iu.SEA),e.getLogService().log("Sea unlocked"),e.getGameService().enable(Iu.FISHERS_HUT),e.getLogService().log("Fisher's hut invented")}},ANIMALS:{CATEGORY:Bu.AGRICULTURE,COST:[{resource:bu.HAY,amount:20}],RESEARCH_POINT:70,DESCRIPTION:"Is it possible to breed animals near farms?",FINISH_DESCRIPTION:"Now we know how to breed animals on pastures",PREREQUISITES:[Cu.AGRICULTURE,Cu.HUNTING],FINISH:function(e){e.getGameService().enable(Iu.PASTURE),e.getLogService().log("Pastures invented"),e.getGameService().enable(Iu.BUTCHER),e.getLogService().log("Butcher invented")}},TRADE:{CATEGORY:Bu.GENERAL,COST:[],RESEARCH_POINT:50,DESCRIPTION:"If others have resources we need maybe we could trade with them?",FINISH_DESCRIPTION:"We learned how to trade on marketplace",PREREQUISITES:[Cu.MANAGEMENT,Cu.CARTOGRAPHY],FINISH:function(e){e.getGameService().enable(Iu.MARKETPLACE),e.getLogService().log("Marketplace invented"),e.getResourcesService().makeVisible(bu.COINS)}},TANNERY:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.FUR,amount:20}],RESEARCH_POINT:50,DESCRIPTION:"Could we use dead animals fur in our advantage?",FINISH_DESCRIPTION:"Tanned fur is much better for armour",PREREQUISITES:[Cu.SCIENTIFIC_METHOD,Cu.HUNTING],FINISH:function(e){e.getGameService().enable(Iu.TANNERY),e.getLogService().log("Tannery invented"),e.getRecipeService().enable(Gu.LEATHER)}},COTTON:{CATEGORY:Bu.AGRICULTURE,COST:[],RESEARCH_POINT:50,DESCRIPTION:"Maybe we can plant cotton?",FINISH_DESCRIPTION:"Now we can plant cotton on fields",PREREQUISITES:[Cu.AGRICULTURE],FINISH:function(e){e.getGameService().enable(Iu.COTTON),e.getLogService().log("Cotton planting unlocked"),e.getResourcesService().makeVisible(bu.COTTON)}},PARCHMENT:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.FUR,amount:10}],RESEARCH_POINT:50,DESCRIPTION:"What if we make leather even thinner?",FINISH_DESCRIPTION:"We learned how to make parchment (paper) out of fur",PREREQUISITES:[Cu.TANNERY],FINISH:function(e){e.getLogService().log("Parchment recipe unlocked"),e.getResourcesService().makeVisible(bu.PAPER),e.getRecipeService().enable(Gu.PARCHMENT)}},PAPER_MILL:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.PAPER,amount:5}],RESEARCH_POINT:50,DESCRIPTION:"Maybe we could use trees to make paper?",FINISH_DESCRIPTION:"We invented paper mill where we can produce paper from logs",PREREQUISITES:[Cu.PARCHMENT,Cu.SAWMILL],FINISH:function(e){e.getLogService().log("Paper mill invented"),e.getGameService().enable(Iu.PAPER_MILL)}},HERBALISM:{CATEGORY:Bu.AGRICULTURE,COST:[{resource:bu.HERBS,amount:10}],RESEARCH_POINT:100,DESCRIPTION:"Is it possible to effectively plant herbs?",FINISH_DESCRIPTION:"We learned to how to plant herbs on fields",PREREQUISITES:[Cu.AGRICULTURE],FINISH:function(e){e.getGameService().enable(Iu.HERBALISM),e.getLogService().log("Herbs planting unlocked"),e.getResourcesService().makeVisible(bu.HERBS)}},FABRIC:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.COTTON,amount:20}],RESEARCH_POINT:50,DESCRIPTION:"Could we make fabric using cotton?",FINISH_DESCRIPTION:"We invented cotton mill and ways to spint cotton into fabric",PREREQUISITES:[Cu.COTTON],FINISH:function(e){e.getGameService().enable(Iu.COTTON_MILL),e.getLogService().log("Cotton mill invented"),e.getRecipeService().enable(Gu.FABRIC),e.getRecipeService().enable(Gu.FABRIC_WOOL)}},TAILORING:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.FABRIC,amount:5},{resource:bu.FUR,amount:10}],RESEARCH_POINT:100,DESCRIPTION:"How can me make new clothes?",FINISH_DESCRIPTION:"We can now make clothes out of fabric and fur",PREREQUISITES:[Cu.FABRIC],FINISH:function(e){e.getGameService().enable(Iu.TAILOR),e.getLogService().log("Tailor invented"),e.getRecipeService().enable(Gu.CLOTHES_FABRIC),e.getRecipeService().enable(Gu.CLOTHES_FUR)}},SCHOLAR:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.FOOD,amount:1e4},{resource:bu.PAPER,amount:30}],RESEARCH_POINT:200,DESCRIPTION:"Can we focus on science?",FINISH_DESCRIPTION:"We learned how to research new technologies more efficiently",PREREQUISITES:[Cu.PAPER_MILL,Cu.IMPROVED_FORESIGHT],FINISH:function(e){e.getGameService().enable(Iu.SCHOLARS_LAB),e.getLogService().log("Scholar labs invented")}},ALCOHOL:{CATEGORY:Bu.GENERAL,COST:[],RESEARCH_POINT:100,DESCRIPTION:"Would it boost our moods if we took some time to have fun??",FINISH_DESCRIPTION:"We learned how to plants hops and barley, how to build buildings that will make alcohol and tavern where we can drink it",PREREQUISITES:[Cu.SCIENTIFIC_METHOD,Cu.COOKING,Cu.AGRICULTURE],FINISH:function(e){e.getGameService().enable(Iu.ALCOHOL),e.getGameService().enable(Iu.TAVERN),e.getLogService().log("Tavern invented"),e.getGameService().enable(Iu.BREWERY),e.getLogService().log("Brewery invented"),e.getGameService().enable(Iu.WINERY),e.getLogService().log("Winery invented"),e.getGameService().enable(Iu.BARLEY),e.getLogService().log("Barley planting unlocked"),e.getResourcesService().makeVisible(bu.BARLEY),e.getGameService().enable(Iu.HOPS),e.getLogService().log("Hops planting unlocked"),e.getResourcesService().makeVisible(bu.HOP),e.getResourcesService().makeVisible(bu.BEER),e.getResourcesService().makeVisible(bu.WINE)}},CALENDAR:{CATEGORY:Bu.SCIENCE,COST:[{resource:bu.LOG,amount:10}],RESEARCH_POINT:30,DESCRIPTION:"Is there some pattern to seasons?",FINISH_DESCRIPTION:"Now we know what day it is today",PREREQUISITES:[Cu.SCIENTIFIC_METHOD],FINISH:function(e){e.getGameService().enable(Iu.CALENDAR),e.getLogService().log("We are now able to track years and seasons")}},WEATHER:{CATEGORY:Bu.SCIENCE,COST:[{resource:bu.LOG,amount:10},{resource:bu.STONE,amount:10},{resource:bu.PLANK,amount:10}],RESEARCH_POINT:50,DESCRIPTION:"Would it be good to know the weather in advance?",FINISH_DESCRIPTION:"We can now predict weather for a few days ahead",PREREQUISITES:[Cu.FORESIGHT],FINISH:function(e){e.getGameService().enable(Iu.WEATHER),e.getLogService().log("We now can predict weather"),e.getWeatherService().increaseForecastPeriod(4)}},AGRICULTURE:{CATEGORY:Bu.AGRICULTURE,COST:[{resource:bu.LOG,amount:10},{resource:bu.BERRY,amount:20},{resource:bu.WHEAT,amount:20},{resource:bu.SHOVEL,amount:5}],RESEARCH_POINT:100,DESCRIPTION:"Why should we risk looking for food in the forest if we can grow it it the open?",FINISH_DESCRIPTION:"We discovered how to build farms and cultivate crops on fields and orchards",PREREQUISITES:[Cu.WEATHER,Cu.CALENDAR,Cu.STONE_SHOVEL],FINISH:function(e){e.getGameService().isEnabled(Iu.FIELD)||(e.getGameService().enable(Iu.FIELD),e.getLogService().log("Field unlocked")),e.getGameService().enable(Iu.FARM),e.getLogService().log("Farm invented"),e.getResourcesService().makeVisible(bu.WHEAT),e.getResourcesService().makeVisible(bu.BARLEY),e.getResourcesService().makeVisible(bu.HAY),e.getResourcesService().makeVisible(bu.APPLE),e.getResourcesService().makeVisible(bu.GRAPE)}},CROPS_STORAGE:{CATEGORY:Bu.AGRICULTURE,COST:[{resource:bu.FOOD,amount:5e3}],RESEARCH_POINT:50,DESCRIPTION:"Would it be more efficient if we had a storage building for crops closer to the fields?",FINISH_DESCRIPTION:"We found out that it is better to have a special building for storing crops",PREREQUISITES:[Cu.AGRICULTURE],FINISH:function(e){e.getGameService().enable(Iu.BARN),e.getLogService().log("Barn invented")}},BOW:{CATEGORY:Bu.GENERAL,COST:[{resource:bu.LOG,amount:20},{resource:bu.BRUSHWOOD,amount:20}],RESEARCH_POINT:25,DESCRIPTION:"Could we kill without coming closer?",FINISH_DESCRIPTION:"We learned how to craft bows",PREREQUISITES:[Cu.SCIENTIFIC_METHOD],FINISH:function(e){e.getRecipeService().enable(Gu.BOW)}},HUNTING:{CATEGORY:Bu.GENERAL,COST:[{resource:bu.LOG,amount:5},{resource:bu.BRUSHWOOD,amount:5},{resource:bu.STONE,amount:5},{resource:bu.BOW,amount:2}],RESEARCH_POINT:50,DESCRIPTION:"What if hunted became the hunter?",FINISH_DESCRIPTION:"We learned how to hunt animals in the forest",PREREQUISITES:[Cu.BOW],FINISH:function(e){e.getGameService().enable(Iu.HUNTER),e.getLogService().log("Hunter invented")}},FIRE:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.BRUSHWOOD,amount:20},{resource:bu.STONE,amount:2}],RESEARCH_POINT:30,DESCRIPTION:"Would it be useful if we could start fire on demand?",FINISH_DESCRIPTION:"We discovered ways to process brushwood into more efficient fuel",PREREQUISITES:[Cu.SCIENTIFIC_METHOD],FINISH:function(e){e.getGameService().enable(Iu.FIRE),e.getRecipeService().enable(Gu.FUEL_BRUSHWOOD)}},BIGGER_FIRE:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.LOG,amount:10},{resource:bu.STONE,amount:2}],RESEARCH_POINT:50,DESCRIPTION:"Could we make our fire bigger and last for longer?",FINISH_DESCRIPTION:"We learned how to turn logs into fuel",PREREQUISITES:[Cu.SCIENTIFIC_METHOD,Cu.FIRE],FINISH:function(e){e.getRecipeService().enable(Gu.FUEL_LOG)}},COOKING:{CATEGORY:Bu.GENERAL,COST:[{resource:bu.FUEL,amount:20},{resource:bu.BERRY,amount:20},{resource:bu.MUSHROOM,amount:20}],RESEARCH_POINT:30,DESCRIPTION:"What would happen if we heat up raw food?",FINISH_DESCRIPTION:"We discovered the art of cooking. We can prepare things with more nutrition value",PREREQUISITES:[Cu.SCIENTIFIC_METHOD,Cu.FIRE],FINISH:function(e){e.getRecipeService().enable(Gu.COOKED_MEAT),e.getRecipeService().enable(Gu.COOKED_FISH),e.getRecipeService().enable(Gu.BREAD),e.getRecipeService().enable(Gu.VEGETABLE_SOUP_BERRY),e.getRecipeService().enable(Gu.VEGETABLE_SOUP_MUSHROOM),e.getRecipeService().enable(Gu.VEGETABLE_SOUP_BERRY_MUSHROOM),e.getRecipeService().enable(Gu.MEAT_SOUP),e.getRecipeService().enable(Gu.CHEESE)}},IMPROVED_COOKING:{CATEGORY:Bu.GENERAL,COST:[{resource:bu.FUEL,amount:30},{resource:bu.EGG,amount:20},{resource:bu.FLOUR,amount:20}],RESEARCH_POINT:70,DESCRIPTION:"Are there any better things to cook?",FINISH_DESCRIPTION:"We invented new cooking recipes",PREREQUISITES:[Cu.COOKING,Cu.BIGGER_FIRE],FINISH:function(e){e.getRecipeService().enable(Gu.OMELETTE),e.getRecipeService().enable(Gu.PIE)}},KITCHEN:{CATEGORY:Bu.GENERAL,COST:[{resource:bu.FUEL,amount:20},{resource:bu.CUT_STONE,amount:5},{resource:bu.COPPER,amount:2},{resource:bu.POTTERY,amount:5}],RESEARCH_POINT:70,DESCRIPTION:"Can we improve food production rate?",FINISH_DESCRIPTION:"We realised that specialised building for food making can improve cooking speed",PREREQUISITES:[Cu.COOKING,Cu.POTTERY],FINISH:function(e){e.getGameService().enable(Iu.KITCHEN),e.getLogService().log("Kitchen invented"),e.getLogService().log("Kitchen orders can be now placed in it's own submenu of crafting menu")}},BAKERY:{CATEGORY:Bu.GENERAL,COST:[{resource:bu.FUEL,amount:20},{resource:bu.FLOUR,amount:20},{resource:bu.CUT_STONE,amount:10}],RESEARCH_POINT:70,DESCRIPTION:"Could we improve bread making?",FINISH_DESCRIPTION:"We found out that by using special bread ovens we can greatly increase bread production",PREREQUISITES:[Cu.SCIENTIFIC_METHOD,Cu.COOKING],FINISH:function(e){e.getGameService().enable(Iu.BAKERY),e.getLogService().log("Bakery invented")}},MORTAR:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.STONE,amount:20}],RESEARCH_POINT:20,DESCRIPTION:"Would it be useful to grind things up?",FINISH_DESCRIPTION:"Now we can grind things up",PREREQUISITES:[Cu.SCIENTIFIC_METHOD],FINISH:function(e){e.getRecipeService().enable(Gu.FLOUR)}},STONE_SPEAR:{CATEGORY:Bu.MILITARY,COST:[{resource:bu.STONE,amount:10},{resource:bu.LOG,amount:5}],RESEARCH_POINT:25,DESCRIPTION:"Would we have better chance of survival if we keep enemy at distance?",FINISH_DESCRIPTION:"We learned how to craft stone spear",PREREQUISITES:[Cu.SCIENTIFIC_METHOD],FINISH:function(e){e.getRecipeService().enable(Gu.STONE_SPEAR)}},STONE_AXE:{CATEGORY:Bu.GENERAL,COST:[{resource:bu.STONE,amount:10},{resource:bu.LOG,amount:5}],RESEARCH_POINT:25,DESCRIPTION:"It's probably more effective to hit trees with sharp stone?",FINISH_DESCRIPTION:"We learned how to craft stone axe",PREREQUISITES:[Cu.SCIENTIFIC_METHOD],FINISH:function(e){e.getRecipeService().enable(Gu.STONE_AXE)}},STONE_PICKAXE:{CATEGORY:Bu.GENERAL,COST:[{resource:bu.STONE,amount:10},{resource:bu.LOG,amount:5}],RESEARCH_POINT:25,DESCRIPTION:"Would stone win against stone?",FINISH_DESCRIPTION:"We learned how to craft stone pickaxe",PREREQUISITES:[Cu.SCIENTIFIC_METHOD],FINISH:function(e){e.getRecipeService().enable(Gu.STONE_PICKAXE)}},STONE_HAMMER:{CATEGORY:Bu.GENERAL,COST:[{resource:bu.STONE,amount:10},{resource:bu.LOG,amount:5}],RESEARCH_POINT:25,DESCRIPTION:"Can hitting with stone be easier?",FINISH_DESCRIPTION:"We learned how to craft stone hammer",PREREQUISITES:[Cu.SCIENTIFIC_METHOD],FINISH:function(e){e.getRecipeService().enable(Gu.STONE_HAMMER)}},STONE_SHOVEL:{CATEGORY:Bu.GENERAL,COST:[{resource:bu.STONE,amount:10},{resource:bu.LOG,amount:5}],RESEARCH_POINT:25,DESCRIPTION:"It should be better to get your stone dirty and not your hands?",FINISH_DESCRIPTION:"We learned how to craft stone shovel",PREREQUISITES:[Cu.SCIENTIFIC_METHOD],FINISH:function(e){e.getRecipeService().enable(Gu.STONE_SHOVEL)}},COPPER_TOOLS:{CATEGORY:Bu.GENERAL,COST:[{resource:bu.LOG,amount:20},{resource:bu.COPPER,amount:20},{resource:bu.HAMMER,amount:2}],RESEARCH_POINT:50,DESCRIPTION:"Could we make better tools with metal instead of stone? ",FINISH_DESCRIPTION:"We learned how to craft copper tools",PREREQUISITES:[Cu.ORE_PROCESSING,Cu.STONE_SHOVEL,Cu.STONE_PICKAXE,Cu.STONE_AXE,Cu.STONE_HAMMER,Cu.STONE_SPEAR],FINISH:function(e){e.getRecipeService().enable(Gu.COPPER_AXE),e.getRecipeService().enable(Gu.COPPER_PICKAXE),e.getRecipeService().enable(Gu.COPPER_SHOVEL),e.getRecipeService().enable(Gu.COPPER_SPEAR),e.getRecipeService().enable(Gu.COPPER_HAMMER),e.getRecipeService().enable(Gu.COPPER_NAILS)}},BRONZE_TOOLS:{CATEGORY:Bu.GENERAL,COST:[{resource:bu.LOG,amount:20},{resource:bu.BRONZE,amount:20},{resource:bu.HAMMER,amount:2}],RESEARCH_POINT:100,DESCRIPTION:"Would bronze tools be even better than copper ones?",FINISH_DESCRIPTION:"We learned how to craft bronze tools",PREREQUISITES:[Cu.COPPER_TOOLS,Cu.METALLURGY],FINISH:function(e){e.getRecipeService().enable(Gu.BRONZE_AXE),e.getRecipeService().enable(Gu.BRONZE_PICKAXE),e.getRecipeService().enable(Gu.BRONZE_SHOVEL),e.getRecipeService().enable(Gu.BRONZE_SPEAR),e.getRecipeService().enable(Gu.BRONZE_HAMMER),e.getRecipeService().enable(Gu.BRONZE_NAILS),e.getRecipeService().enable(Gu.BRONZE_SWORD),e.getRecipeService().enable(Gu.BRONZE_SHIELD)}},IRON_TOOLS:{CATEGORY:Bu.GENERAL,COST:[{resource:bu.LOG,amount:20},{resource:bu.IRON,amount:20},{resource:bu.HAMMER,amount:2}],RESEARCH_POINT:200,DESCRIPTION:"Can we craft tools from iron?",FINISH_DESCRIPTION:"We learned how to craft iron tools",PREREQUISITES:[Cu.BRONZE_TOOLS,Cu.MASTER_ORE_PROCESSING],FINISH:function(e){e.getRecipeService().enable(Gu.IRON_AXE),e.getRecipeService().enable(Gu.IRON_PICKAXE),e.getRecipeService().enable(Gu.IRON_SHOVEL),e.getRecipeService().enable(Gu.IRON_SPEAR),e.getRecipeService().enable(Gu.IRON_HAMMER),e.getRecipeService().enable(Gu.IRON_NAILS),e.getRecipeService().enable(Gu.IRON_SWORD),e.getRecipeService().enable(Gu.IRON_SHIELD)}},MINING:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.LOG,amount:10},{resource:bu.STONE,amount:5},{resource:bu.PICKAXE,amount:1}],RESEARCH_POINT:50,DESCRIPTION:"If we dig deep enough maybe there is something nice?",FINISH_DESCRIPTION:"We discovered that stone can be harvested in the mountains",PREREQUISITES:[Cu.SCIENTIFIC_METHOD,Cu.STONE_PICKAXE],FINISH:function(e){e.getGameService().isEnabled(Iu.MOUNTAINS)||(e.getGameService().enable(Iu.MOUNTAINS),e.getLogService().log("Mountains unlocked"))}},DIGGING:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.LOG,amount:10},{resource:bu.SHOVEL,amount:1}],RESEARCH_POINT:30,DESCRIPTION:"How can we move soil away efficiently?",FINISH_DESCRIPTION:"We discovered good ways of digging",PREREQUISITES:[Cu.SCIENTIFIC_METHOD,Cu.STONE_SHOVEL],FINISH:function(e){e.getGameService().isEnabled(Iu.FIELD)||(e.getGameService().enable(Iu.FIELD),e.getLogService().log("Field unlocked")),e.getGameService().enable(Iu.CLAY_PIT),e.getLogService().log("Clay pit unlocked"),e.getResourcesService().makeVisible(bu.CLAY)}},POTTERY:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.LOG,amount:10},{resource:bu.FUEL,amount:5},{resource:bu.CLAY,amount:10}],RESEARCH_POINT:50,DESCRIPTION:"Can we do something useful with all that clay?",FINISH_DESCRIPTION:"We invented how to make pottery from clay",PREREQUISITES:[Cu.DIGGING,Cu.FIRE],FINISH:function(e){e.getRecipeService().enable(Gu.POTTERY),e.getResourcesService().makeVisible(bu.POTTERY)}},BRICKS:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.LOG,amount:10},{resource:bu.FUEL,amount:5},{resource:bu.CLAY,amount:10}],RESEARCH_POINT:100,DESCRIPTION:"Maybe we can use clay for building?",FINISH_DESCRIPTION:"We discovered how to make bricks from clay and hay",PREREQUISITES:[Cu.POTTERY,Cu.BIGGER_FIRE,Cu.LONGHOUSE],FINISH:function(e){e.getRecipeService().enable(Gu.BRICKS),e.getResourcesService().makeVisible(bu.BRICKS)}},PROSPECTING_FOR_ORE:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.PICKAXE,amount:10}],RESEARCH_POINT:50,DESCRIPTION:"There must be something useful under all this dirt",FINISH_DESCRIPTION:"We discovered that trained geologist can find ores deposits in the mountains",PREREQUISITES:[Cu.MINING],FINISH:function(e){e.getGameService().enable(Iu.GEOLOGIST),e.getLogService().log("Geologist invented")}},ADVANCED_PROSPECTING:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.PICKAXE,amount:20}],RESEARCH_POINT:75,DESCRIPTION:"There must be something even more valuable under the ground?",FINISH_DESCRIPTION:"We learned about more resources that mountains have to offer",PREREQUISITES:[Cu.PROSPECTING_FOR_ORE],FINISH:function(e){e.getGameService().enable(Iu.GOLD),e.getGameService().enable(Iu.SILVER)}},MASTER_PROSPECTING:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.PICKAXE,amount:40}],RESEARCH_POINT:100,DESCRIPTION:"Is there anything else to find?",FINISH_DESCRIPTION:"We discovered iron",PREREQUISITES:[Cu.ADVANCED_PROSPECTING,Cu.IMPROVED_FORESIGHT],FINISH:function(e){e.getGameService().enable(Iu.IRON)}},PIT_MINE:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.STONE,amount:20},{resource:bu.LOG,amount:20},{resource:bu.PICKAXE,amount:10}],RESEARCH_POINT:100,DESCRIPTION:"Could we get precious resources from under the ground?",FINISH_DESCRIPTION:"We invented a way to mine ore deposits from the ground",PREREQUISITES:[Cu.PROSPECTING_FOR_ORE],FLAG_PREREQUISITES:[Iu.BUILT_QUARRY],FINISH:function(e){e.getGameService().enable(Iu.PIT_MINE),e.getLogService().log("Pit mine invented"),e.getRecipeService().enable(Gu.FUEL_COAL)}},DEEP_MINE:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.LOG,amount:40},{resource:bu.PLANK,amount:40},{resource:bu.CUT_STONE,amount:20},{resource:bu.PICKAXE,amount:10}],RESEARCH_POINT:100,DESCRIPTION:"Do we have to move all the dirt or could we just dig tunnels?",FINISH_DESCRIPTION:"It's now possible to build deep mines to mine ore",PREREQUISITES:[Cu.PIT_MINE,Cu.ADVANCED_MATHEMATICS],FLAG_PREREQUISITES:[],FINISH:function(e){e.getGameService().enable(Iu.DEEP_MINE),e.getLogService().log("Deep mine invented")}},ORE_PROCESSING:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.CUT_STONE,amount:40},{resource:bu.STONE,amount:20},{resource:bu.HAMMER,amount:10},{resource:bu.COPPER_ORE,amount:20}],RESEARCH_POINT:100,DESCRIPTION:"What happens if we heat ore in fire?",FINISH_DESCRIPTION:"We discovered how to process ore into metal",PREREQUISITES:[Cu.PROSPECTING_FOR_ORE],FINISH:function(e){e.getGameService().enable(Iu.SMITHY),e.getLogService().log("Smithy invented")}},ADVANCED_ORE_PROCESSING:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.CUT_STONE,amount:40},{resource:bu.STONE,amount:20},{resource:bu.HAMMER,amount:5},{resource:bu.GOLD_ORE,amount:5},{resource:bu.SILVER_ORE,amount:5}],RESEARCH_POINT:150,DESCRIPTION:"What about heating other ores?",FINISH_DESCRIPTION:"We discovered how to process gold and silver ore",PREREQUISITES:[Cu.ADVANCED_PROSPECTING,Cu.ORE_PROCESSING],FLAG_PREREQUISITES:[Iu.BUILT_SMITHY],FINISH:function(e){e.getGameService().enable(Iu.ADVANCED_ORE_PROCESSING),e.getGameService().isEnabled(Iu.BUILT_SMITHY)&&(e.getRecipeService().enable(Gu.GOLD),e.getRecipeService().enable(Gu.SILVER))}},MASTER_ORE_PROCESSING:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.CUT_STONE,amount:40},{resource:bu.STONE,amount:20},{resource:bu.HAMMER,amount:5},{resource:bu.IRON_ORE,amount:10}],RESEARCH_POINT:200,DESCRIPTION:"Can we smelt any ore we want?",FINISH_DESCRIPTION:"We learned to process iron ore",PREREQUISITES:[Cu.MASTER_PROSPECTING,Cu.ADVANCED_ORE_PROCESSING],FLAG_PREREQUISITES:[Iu.BUILT_SMITHY],FINISH:function(e){e.getGameService().enable(Iu.IRON),e.getGameService().isEnabled(Iu.BUILT_SMITHY)&&e.getRecipeService().enable(Gu.IRON)}},METALLURGY:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.COPPER,amount:10},{resource:bu.TIN,amount:10}],RESEARCH_POINT:100,DESCRIPTION:"What would happen if we mix two metals?",FINISH_DESCRIPTION:"We discovered that mixing multiple metals can give better results",PREREQUISITES:[Cu.ORE_PROCESSING],FLAG_PREREQUISITES:[Iu.BUILT_SMITHY],FINISH:function(e){e.getGameService().enable(Iu.BRONZE),e.getGameService().isEnabled(Iu.BUILT_SMITHY)&&e.getRecipeService().enable(Gu.BRONZE)}},ADVANCED_METALLURGY:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.IRON,amount:10},{resource:bu.COAL,amount:50}],RESEARCH_POINT:200,DESCRIPTION:"Could we mix iron with coal to make it stronger?",FINISH_DESCRIPTION:"We invented steel",PREREQUISITES:[Cu.MASTER_ORE_PROCESSING],FLAG_PREREQUISITES:[Iu.BUILT_SMITHY,Iu.IRON],FINISH:function(e){e.getGameService().enable(Iu.STEEL),e.getGameService().isEnabled(Iu.BUILT_SMITHY)&&e.getRecipeService().enable(Gu.STEEL)}},COINS_MINTING:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.GOLD,amount:10},{resource:bu.SILVER,amount:20}],RESEARCH_POINT:100,DESCRIPTION:"Maybe we can make our own coins?",FINISH_DESCRIPTION:"We learned how to mint our own coins",PREREQUISITES:[Cu.ADVANCED_ORE_PROCESSING],FLAG_PREREQUISITES:[Iu.BUILT_SMITHY],FINISH:function(e){e.getGameService().enable(Iu.MINT),e.getLogService().log("Mint invented")}},JEWELRY:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.GOLD,amount:10},{resource:bu.SILVER,amount:20},{resource:bu.GEMS,amount:5}],RESEARCH_POINT:200,DESCRIPTION:"Could we show our status by wearing expensive and beautiful things?",FINISH_DESCRIPTION:"We learned how to make jewelry",PREREQUISITES:[Cu.COINS_MINTING],FINISH:function(e){e.getGameService().enable(Iu.JEWELRY),e.getRecipeService().enable(Gu.JEWELRY),e.getLogService().log("Jewelry invented")}},HOUSE:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.LOG,amount:50},{resource:bu.PLANK,amount:50}],RESEARCH_POINT:100,DESCRIPTION:"What if huts were bigger?",FINISH_DESCRIPTION:"We learned how to build bigger and more efficient buildings for living",PREREQUISITES:[Cu.SCIENTIFIC_METHOD,Cu.STONE_HAMMER,Cu.STONE_SHOVEL],FINISH:function(e){e.getGameService().enable(Iu.HOUSE),e.getLogService().log("House invented")}},LONGHOUSE:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.LOG,amount:50},{resource:bu.PLANK,amount:50},{resource:bu.CUT_STONE,amount:20},{resource:bu.HAY,amount:20},{resource:bu.HAMMER,amount:5}],RESEARCH_POINT:200,DESCRIPTION:"Could we house multiple families in one building?",FINISH_DESCRIPTION:"Now we can build longhouses that can house multiple families",PREREQUISITES:[Cu.HOUSE,Cu.AGRICULTURE],FINISH:function(e){e.getGameService().enable(Iu.LONGHOUSE),e.getLogService().log("Longhouse invented")}},TUDOR_HOUSE:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.LOG,amount:70},{resource:bu.PLANK,amount:50},{resource:bu.BRICKS,amount:40},{resource:bu.HAMMER,amount:10}],RESEARCH_POINT:400,DESCRIPTION:"Can we use better building materials to build bigger houses?",FINISH_DESCRIPTION:"We worked out how to build tudor houses",PREREQUISITES:[Cu.LONGHOUSE,Cu.BRICKS],FINISH:function(e){e.getGameService().enable(Iu.TUDOR_HOUSE),e.getLogService().log("Tudor House invented")}},SETTLEMENT:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.LOG,amount:70},{resource:bu.PLANK,amount:50},{resource:bu.BRICKS,amount:40},{resource:bu.NAILS,amount:50},{resource:bu.HAMMER,amount:10}],RESEARCH_POINT:800,DESCRIPTION:"Could we build a new settlement to house more people?",FINISH_DESCRIPTION:"We can now construct whole settlements",PREREQUISITES:[Cu.TUDOR_HOUSE,Cu.BRICKS,Cu.TAILORING,Cu.COPPER_TOOLS],FINISH:function(e){e.getGameService().enable(Iu.SETTLEMENT),e.getLogService().log("Settlements invented")}},URBAN_PLANNING:{CATEGORY:Bu.SCIENCE,COST:[],RESEARCH_POINT:50,DESCRIPTION:"Maybe we could rearrange buildings?",FINISH_DESCRIPTION:"Now we can combine and split some buildings like fields, orchards, pastures and warehouses",PREREQUISITES:[Cu.MANAGEMENT,Cu.MATHEMATICS],FINISH:function(e){e.getGameService().enable(Iu.URBAN_PLANNING)}},WONDER_BUILDINGS:{CATEGORY:Bu.GENERAL,COST:[],RESEARCH_POINT:500,DESCRIPTION:"What if we built something remarkable?",FINISH_DESCRIPTION:"We learned that by building wonders we can boost future generations progress",PREREQUISITES:[Cu.HOUSE,Cu.URBAN_PLANNING,Cu.ADVANCED_MATHEMATICS],FINISH:function(e){e.getGameService().enable(Iu.PLATEAU),e.getLogService().log("Plateau unlocked")}},SAWMILL:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.LOG,amount:50},{resource:bu.PLANK,amount:10},{resource:bu.COPPER,amount:5}],RESEARCH_POINT:100,DESCRIPTION:"Is it possible to produce planks even faster?",FINISH_DESCRIPTION:"We discovered sawmill that efficiently turns logs into planks",PREREQUISITES:[Cu.SCIENTIFIC_METHOD,Cu.STONE_HAMMER,Cu.STONE_AXE],FINISH:function(e){e.getGameService().enable(Iu.SAWMILL),e.getLogService().log("Sawmill invented")}},WINDMILL:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.LOG,amount:50},{resource:bu.PLANK,amount:10},{resource:bu.COPPER,amount:5}],RESEARCH_POINT:100,DESCRIPTION:"Could we use wind to do hard work for us?",FINISH_DESCRIPTION:"We invented windmill that can effortlessly turn wheat into flour",PREREQUISITES:[Cu.AGRICULTURE,Cu.MORTAR,Cu.MATHEMATICS],FINISH:function(e){e.getGameService().enable(Iu.WINDMILL),e.getLogService().log("Windmill invented"),e.getResourcesService().makeVisible(bu.FABRIC)}},FORESTRY:{CATEGORY:Bu.AGRICULTURE,COST:[{resource:bu.LOG,amount:20},{resource:bu.BRUSHWOOD,amount:20},{resource:bu.SHOVEL,amount:2}],RESEARCH_POINT:50,DESCRIPTION:"Is there any reason why trees grow out of dirt?",FINISH_DESCRIPTION:"We now can hire foresters to plant new trees and manage forest better",PREREQUISITES:[Cu.SCIENTIFIC_METHOD,Cu.MANAGEMENT,Cu.STONE_SHOVEL],FINISH:function(e){e.getGameService().enable(Iu.FORESTER),e.getLogService().log("Forester invented"),e.getLogService().log("Forest management unlocked")}},BARRACKS:{CATEGORY:Bu.MILITARY,COST:[{resource:bu.LOG,amount:20},{resource:bu.PLANK,amount:20},{resource:bu.SPEAR,amount:5}],RESEARCH_POINT:100,DESCRIPTION:"How can we make those of us more aggressive less of a threat to others?",FINISH_DESCRIPTION:"We found out that we can form army and use it to our advantage",PREREQUISITES:[Cu.SCIENTIFIC_METHOD,Cu.CALENDAR,Cu.STONE_SPEAR],FINISH:function(e){e.getGameService().isEnabled(Iu.FORT)||(e.getGameService().enable(Iu.FORT),e.getLogService().log("Fort unlocked")),e.getRecipeService().enable(Gu.WOODEN_SHIELD),e.getRecipeService().enable(Gu.LEATHER_ARMOR),e.getGameService().enable(Iu.BARRACKS),e.getLogService().log("Barracks invented")}},STASH:{CATEGORY:Bu.MILITARY,COST:[{resource:bu.LOG,amount:20},{resource:bu.PLANK,amount:10}],RESEARCH_POINT:30,DESCRIPTION:"Can we hide our goods somewhere?",FINISH_DESCRIPTION:"We learned how to hide goods from invaders",PREREQUISITES:[Cu.FORESIGHT],FINISH:function(e){e.getGameService().isEnabled(Iu.FORT)||(e.getGameService().enable(Iu.FORT),e.getLogService().log("Fort unlocked")),e.getGameService().enable(Iu.STASH)}},WOODEN_DEFENCES:{CATEGORY:Bu.MILITARY,COST:[{resource:bu.LOG,amount:50}],RESEARCH_POINT:100,DESCRIPTION:"Maybe we could use logs to defend ourselves?",FINISH_DESCRIPTION:"Now we can build simple wooden defences that will delay invasions",PREREQUISITES:[Cu.BARRACKS],FINISH:function(e){e.getGameService().enable(Iu.STOCKADE),e.getLogService().log("Stockade invented"),e.getGameService().enable(Iu.WOODEN_TOWER),e.getLogService().log("Wooden tower invented")}},STONE_DEFENCES:{CATEGORY:Bu.MILITARY,COST:[{resource:bu.STONE,amount:50},{resource:bu.CUT_STONE,amount:50}],RESEARCH_POINT:200,DESCRIPTION:"Maybe we could use stone to defend ourselves?",FINISH_DESCRIPTION:"We learned how to build more durable defences",PREREQUISITES:[Cu.WOODEN_DEFENCES],FINISH:function(e){e.getGameService().enable(Iu.STONE_TOWER),e.getLogService().log("Stone tower invented")}},MATHEMATICS:{CATEGORY:Bu.SCIENCE,COST:[{resource:bu.FOOD,amount:1e3}],RESEARCH_POINT:50,DESCRIPTION:"What if we calculate things first?",FINISH_DESCRIPTION:"By calculating things we are better at constructing and deconstructing buildings",PREREQUISITES:[Cu.FORESIGHT],FINISH:function(e){e.getEffectsService().addBuildingEffect(new Vu("Mathematics",Ru.CONSTRUCTION,10,zu.PERMANENT)),e.getEffectsService().addBuildingEffect(new Vu("Mathematics",Ru.DECONSTRUCTION,10,zu.PERMANENT))}},ADVANCED_MATHEMATICS:{CATEGORY:Bu.SCIENCE,COST:[{resource:bu.FOOD,amount:4e3},{resource:bu.PAPER,amount:20}],RESEARCH_POINT:200,DESCRIPTION:"Are there any better ways of calculations?",FINISH_DESCRIPTION:"Our calculations methods improved and we are now able to research more advanced things",PREREQUISITES:[Cu.MATHEMATICS,Cu.PARCHMENT],FINISH:function(e){}},IMPROVED_FORESIGHT:{CATEGORY:Bu.SCIENCE,COST:[{resource:bu.FOOD,amount:5e3},{resource:bu.PAPER,amount:50}],RESEARCH_POINT:300,DESCRIPTION:"Can we use our knowledge to foresight what we could learn?",FINISH_DESCRIPTION:"With our knowledge we can look further into the unknown and foresight future researches",PREREQUISITES:[Cu.ADVANCED_MATHEMATICS,Cu.PARCHMENT],FINISH:function(e){e.getTechService().increaseForesight(1),e.getLogService().log("Foresight level increased")}},LOGISTICS:{CATEGORY:Bu.MILITARY,COST:[{resource:bu.STONE,amount:100},{resource:bu.CLOTHES,amount:25}],RESEARCH_POINT:200,DESCRIPTION:"Can we improve travel speed between world regions?",FINISH_DESCRIPTION:"With improved military clothing and roads we can move faster between world regions",PREREQUISITES:[Cu.ADVANCED_MATHEMATICS],FINISH:function(e){e.getGameService().enable(Iu.LOGISTICS),e.getLogService().log("Logistics invented")}},FERTILIZER:{CATEGORY:Bu.AGRICULTURE,COST:[{resource:bu.FOOD,amount:3e3}],RESEARCH_POINT:100,DESCRIPTION:"Could we reuse what animals produce?",FINISH_DESCRIPTION:"By using animals manure we boost growth on fields and orchards",PREREQUISITES:[Cu.ANIMALS],FINISH:function(e){e.getEffectsService().addBuildingEffect(new Vu("Fertilizer",Ru.FIELD,10,zu.PERMANENT)),e.getEffectsService().addBuildingEffect(new Vu("Fertilizer",Ru.ORCHARD,10,zu.PERMANENT))}},PICKAXE_DESIGN:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.LOG,amount:10},{resource:bu.CUT_STONE,amount:10},{resource:bu.PICKAXE,amount:5}],RESEARCH_POINT:100,DESCRIPTION:"Maybe we could redesign our pickaxes?",FINISH_DESCRIPTION:"We discovered different pickaxe design that improved mining speed",PREREQUISITES:[Cu.MINING],FINISH:function(e){e.getEffectsService().addBuildingEffect(new Vu("Pickaxe Design",Ru.QUARRY,10,zu.PERMANENT)),e.getEffectsService().addBuildingEffect(new Vu("Pickaxe Design",Ru.PIT_MINE,10,zu.PERMANENT)),e.getEffectsService().addBuildingEffect(new Vu("Pickaxe Design",Ru.GEOLOGIST,10,zu.PERMANENT)),e.getEffectsService().addBuildingEffect(new Vu("Pickaxe Design",Ru.DEEP_MINE,10,zu.PERMANENT))}},TRADE_ROUTES:{CATEGORY:Bu.GENERAL,COST:[{resource:bu.COINS,amount:400}],RESEARCH_POINT:50,DESCRIPTION:"Is it possible to attract more merchants?",FINISH_DESCRIPTION:"By optimizing roads system we will have more visiting merchants",PREREQUISITES:[Cu.TRADE,Cu.MATHEMATICS],FINISH:function(e){e.getEffectsService().addBuildingEffect(new Vu("Trade Routes",Ru.MARKETPLACE,15,zu.PERMANENT))}},BUFF_PRODUCTION:{CATEGORY:Bu.GENERAL,COST:[{resource:bu.AXE,amount:2},{resource:bu.SHOVEL,amount:2},{resource:bu.PICKAXE,amount:2},{resource:bu.HAMMER,amount:2}],RESEARCH_POINT:50,DESCRIPTION:"Would people work better if we give them better tools?",FINISH_DESCRIPTION:"Now we can replace used tools to boost some buildings production",PREREQUISITES:[Cu.MANAGEMENT],FINISH:function(e){e.getGameService().enable(Iu.BUFFS),e.getLogService().log("Production buffs invented")}},HUMAN_RESOURCES:{CATEGORY:Bu.GENERAL,COST:[{resource:bu.FOOD,amount:5e3}],RESEARCH_POINT:50,DESCRIPTION:"Maybe we can optimize work?",FINISH_DESCRIPTION:"We discovered automated work management for some buildings",PREREQUISITES:[Cu.MANAGEMENT],FINISH:function(e){e.getGameService().enable(Iu.HUMAN_RESOURCES),e.getLogService().log("Automated work management available in management tab")}},SPECIALISED_PRODUCTION:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.FOOD,amount:3e3},{resource:bu.HAMMER,amount:5},{resource:bu.AXE,amount:5},{resource:bu.PICKAXE,amount:5},{resource:bu.SHOVEL,amount:5}],RESEARCH_POINT:50,DESCRIPTION:"Can we specialise in crafting one thing to do it better and faster?",FINISH_DESCRIPTION:"We realized that if we focus on crafting only one thing we can do it more efficiently",PREREQUISITES:[Cu.MATHEMATICS,Cu.STONE_HAMMER,Cu.STONE_AXE,Cu.STONE_PICKAXE,Cu.STONE_SHOVEL],FINISH:function(e){e.getGameService().enable(Iu.SPECIALISED_PRODUCTION),e.getLogService().log("Manufacture invented")}},HERBAL_MEDICINE:{CATEGORY:Bu.SCIENCE,COST:[{resource:bu.HERBS,amount:20}],RESEARCH_POINT:25,DESCRIPTION:"Would we heal faster if we used herbs?",FINISH_DESCRIPTION:"We learned how to craft medicine from herbs",PREREQUISITES:[Cu.MORTAR],FINISH:function(e){e.getRecipeService().enable(Gu.HERBAL_MEDICINE)}},PRODUCTION_ZONES:{CATEGORY:Bu.GENERAL,COST:[{resource:bu.FOOD,amount:5e3}],RESEARCH_POINT:50,DESCRIPTION:"Would creating production camps help with productivity?",FINISH_DESCRIPTION:"We discovered that groups of production buildings can increase production",PREREQUISITES:[Cu.HUMAN_RESOURCES],FINISH:function(e){e.getGameService().enable(Iu.PRODUCTION_ZONES),e.getLogService().log("Unlocked buildings camps")}},BOAT_BUILDING:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.LOG,amount:50},{resource:bu.PLANK,amount:100},{resource:bu.NAILS,amount:50},{resource:bu.FABRIC,amount:20}],RESEARCH_POINT:200,DESCRIPTION:"Could we utilize floating things to find better fishing spots or get from one place to another?",FINISH_DESCRIPTION:"We invented boats and boats builders",PREREQUISITES:[Cu.FISHING,Cu.COPPER_TOOLS],FINISH:function(e){e.getGameService().enable(Iu.PIER),e.getGameService().enable(Iu.BOAT_BUILDER),e.getLogService().log("Invented boat builder and pier")}},CANNON:{CATEGORY:Bu.MILITARY,COST:[{resource:bu.IRON,amount:50},{resource:bu.LOG,amount:50}],RESEARCH_POINT:200,DESCRIPTION:"How can we make our ships perform better in fights?",FINISH_DESCRIPTION:"We invented cannons that we can put on our ships",PREREQUISITES:[Cu.MASTER_ORE_PROCESSING,Cu.BOAT_BUILDING],FINISH:function(e){e.getRecipeService().enable(Gu.CANNON),e.getLogService().log("Invented cannons crafting")}},BIGGER_SHIPS:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.LOG,amount:100},{resource:bu.PLANK,amount:200},{resource:bu.NAILS,amount:200},{resource:bu.HAMMER,amount:40},{resource:bu.FABRIC,amount:50}],RESEARCH_POINT:400,DESCRIPTION:"Could our ships get bigger?",FINISH_DESCRIPTION:"We invented new ship design and construction methods",PREREQUISITES:[Cu.BOAT_BUILDING,Cu.CANNON],FINISH:function(e){e.getGameService().enable(Iu.HARBOUR),e.getGameService().enable(Iu.SHIPYARD),e.getGameService().enable(Iu.BRIGANTINE),e.getLogService().log("Invented Harbour, Shipyard and Brigantine")}},GALLEON:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.LOG,amount:100},{resource:bu.PLANK,amount:200},{resource:bu.NAILS,amount:200},{resource:bu.HAMMER,amount:40},{resource:bu.FABRIC,amount:60}],RESEARCH_POINT:700,DESCRIPTION:"How can we build even bigger ships?",FINISH_DESCRIPTION:"We learned how to build huge ships",PREREQUISITES:[Cu.BIGGER_SHIPS],FINISH:function(e){e.getGameService().enable(Iu.GALLEON),e.getLogService().log("Invented Galleons")}},SEA_NAVIGATION:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.CUT_STONE,amount:50},{resource:bu.BRICKS,amount:50},{resource:bu.LOG,amount:50},{resource:bu.PLANK,amount:50}],RESEARCH_POINT:300,DESCRIPTION:"Can we improve sea navigation?",FINISH_DESCRIPTION:"We invented lighthouse to guide our ships at the sea",PREREQUISITES:[Cu.BIGGER_SHIPS],FINISH:function(e){e.getGameService().enable(Iu.LIGHTHOUSE),e.getLogService().log("Invented Lighthouse")}},SEA_CARTOGRAPHY:{CATEGORY:Bu.TECHNOLOGY,COST:[{resource:bu.FOOD,amount:5e3}],RESEARCH_POINT:300,DESCRIPTION:"Can we discover new lands across the sea?",FINISH_DESCRIPTION:"We discovered what data to gather from the sea to help create maps to distant lands",PREREQUISITES:[Cu.SEA_NAVIGATION],FINISH:function(e){e.getGameService().enable(Iu.CARTOGRAPHER),e.getResourcesService().makeVisible(bu.MAP),e.getLogService().log("Invented sea cartographer")}},SEA_CUISINE:{CATEGORY:Bu.GENERAL,COST:[{resource:bu.FISH,amount:30},{resource:bu.HERBS,amount:20},{resource:bu.BREAD,amount:10}],RESEARCH_POINT:200,DESCRIPTION:"Can we make better dishes from what sea offers?",FINISH_DESCRIPTION:"We invented how to craft Bouillabaisse",PREREQUISITES:[Cu.KITCHEN,Cu.FISHING,Cu.BAKERY],FINISH:function(e){e.getRecipeService().enable(Gu.BOUILLABAISSE),e.getLogService().log("Invented Bouillabaisse")}}},so={START_CRAFTING_QUEUE_SIZE:2,START_COOKING_QUEUE_SIZE:2,RECIPES:{PLANK:{RESOURCE:bu.PLANK,AMOUNT:1,COST:[{resource:bu.LOG,amount:5}],CRAFTING:5},CUT_STONE:{RESOURCE:bu.CUT_STONE,AMOUNT:1,COST:[{resource:bu.STONE,amount:5}],CRAFTING:10},LEATHER:{RESOURCE:bu.LEATHER,AMOUNT:1,COST:[{resource:bu.FUR,amount:2}],CRAFTING:10},POTTERY:{RESOURCE:bu.POTTERY,AMOUNT:1,COST:[{resource:bu.FUEL,amount:1},{resource:bu.CLAY,amount:4}],CRAFTING:13},BRICKS:{RESOURCE:bu.BRICKS,AMOUNT:1,COST:[{resource:bu.FUEL,amount:1},{resource:bu.CLAY,amount:5},{resource:bu.HAY,amount:1}],CRAFTING:15},STONE_AXE:{NAME:"STONE AXE",RESOURCE:bu.AXE,AMOUNT:1,COST:[{resource:bu.BRUSHWOOD,amount:1},{resource:bu.LOG,amount:2},{resource:bu.STONE,amount:5}],CRAFTING:15},STONE_PICKAXE:{NAME:"STONE PICKAXE",RESOURCE:bu.PICKAXE,AMOUNT:1,COST:[{resource:bu.BRUSHWOOD,amount:1},{resource:bu.LOG,amount:2},{resource:bu.STONE,amount:5}],CRAFTING:15},STONE_SHOVEL:{NAME:"STONE SHOVEL",RESOURCE:bu.SHOVEL,AMOUNT:1,COST:[{resource:bu.BRUSHWOOD,amount:1},{resource:bu.LOG,amount:2},{resource:bu.STONE,amount:5}],CRAFTING:15},STONE_SPEAR:{NAME:"STONE SPEAR",RESOURCE:bu.SPEAR,AMOUNT:1,COST:[{resource:bu.BRUSHWOOD,amount:1},{resource:bu.LOG,amount:2},{resource:bu.STONE,amount:5}],CRAFTING:15},STONE_HAMMER:{NAME:"STONE HAMMER",RESOURCE:bu.HAMMER,AMOUNT:1,COST:[{resource:bu.BRUSHWOOD,amount:1},{resource:bu.LOG,amount:2},{resource:bu.STONE,amount:5}],CRAFTING:15},COPPER_AXE:{NAME:"COPPER AXE",RESOURCE:bu.AXE,AMOUNT:2,COST:[{resource:bu.LOG,amount:2},{resource:bu.COPPER,amount:1}],CRAFTING:12},COPPER_PICKAXE:{NAME:"COPPER PICKAXE",RESOURCE:bu.PICKAXE,AMOUNT:2,COST:[{resource:bu.LOG,amount:2},{resource:bu.COPPER,amount:1}],CRAFTING:12},COPPER_SHOVEL:{NAME:"COPPER SHOVEL",RESOURCE:bu.SHOVEL,AMOUNT:2,COST:[{resource:bu.LOG,amount:2},{resource:bu.COPPER,amount:1}],CRAFTING:12},COPPER_SPEAR:{NAME:"COPPER SPEAR",RESOURCE:bu.SPEAR,AMOUNT:2,COST:[{resource:bu.LOG,amount:2},{resource:bu.COPPER,amount:1}],CRAFTING:12},COPPER_HAMMER:{NAME:"COPPER HAMMER",RESOURCE:bu.HAMMER,AMOUNT:2,COST:[{resource:bu.LOG,amount:2},{resource:bu.COPPER,amount:1}],CRAFTING:12},COPPER_NAILS:{NAME:"COPPER NAILS",RESOURCE:bu.NAILS,AMOUNT:4,COST:[{resource:bu.COPPER,amount:2}],CRAFTING:6},BRONZE_AXE:{NAME:"BRONZE AXE",RESOURCE:bu.AXE,AMOUNT:4,COST:[{resource:bu.LOG,amount:2},{resource:bu.BRONZE,amount:1}],CRAFTING:15},BRONZE_PICKAXE:{NAME:"BRONZE PICKAXE",RESOURCE:bu.PICKAXE,AMOUNT:4,COST:[{resource:bu.LOG,amount:2},{resource:bu.BRONZE,amount:1}],CRAFTING:15},BRONZE_SHOVEL:{NAME:"BRONZE SHOVEL",RESOURCE:bu.SHOVEL,AMOUNT:4,COST:[{resource:bu.LOG,amount:2},{resource:bu.BRONZE,amount:1}],CRAFTING:15},BRONZE_SPEAR:{NAME:"BRONZE SPEAR",RESOURCE:bu.SPEAR,AMOUNT:4,COST:[{resource:bu.LOG,amount:2},{resource:bu.BRONZE,amount:1}],CRAFTING:15},BRONZE_HAMMER:{NAME:"BRONZE HAMMER",RESOURCE:bu.HAMMER,AMOUNT:4,COST:[{resource:bu.LOG,amount:2},{resource:bu.BRONZE,amount:1}],CRAFTING:15},BRONZE_NAILS:{NAME:"BRONZE NAILS",RESOURCE:bu.NAILS,AMOUNT:5,COST:[{resource:bu.BRONZE,amount:1}],CRAFTING:8},IRON_AXE:{NAME:"IRON AXE",RESOURCE:bu.AXE,AMOUNT:8,COST:[{resource:bu.LOG,amount:2},{resource:bu.IRON,amount:1}],CRAFTING:12},IRON_PICKAXE:{NAME:"IRON PICKAXE",RESOURCE:bu.PICKAXE,AMOUNT:8,COST:[{resource:bu.LOG,amount:2},{resource:bu.IRON,amount:1}],CRAFTING:12},IRON_SHOVEL:{NAME:"IRON SHOVEL",RESOURCE:bu.SHOVEL,AMOUNT:8,COST:[{resource:bu.LOG,amount:2},{resource:bu.IRON,amount:1}],CRAFTING:12},IRON_SPEAR:{NAME:"IRON SPEAR",RESOURCE:bu.SPEAR,AMOUNT:8,COST:[{resource:bu.LOG,amount:2},{resource:bu.IRON,amount:1}],CRAFTING:12},IRON_HAMMER:{NAME:"IRON HAMMER",RESOURCE:bu.HAMMER,AMOUNT:8,COST:[{resource:bu.LOG,amount:2},{resource:bu.IRON,amount:1}],CRAFTING:12},IRON_NAILS:{NAME:"IRON NAILS",RESOURCE:bu.NAILS,AMOUNT:15,COST:[{resource:bu.IRON,amount:1}],CRAFTING:6},BOW:{RESOURCE:bu.BOW,AMOUNT:1,COST:[{resource:bu.BRUSHWOOD,amount:5},{resource:bu.LOG,amount:10}],CRAFTING:15},PARCHMENT:{RESOURCE:bu.PAPER,AMOUNT:1,COST:[{resource:bu.FUR,amount:2}],CRAFTING:15},SWORD:{RESOURCE:bu.SWORD,AMOUNT:1,COST:[{resource:bu.COPPER,amount:5},{resource:bu.LOG,amount:1},{resource:bu.FUEL,amount:5}],CRAFTING:20},BRONZE_SWORD:{NAME:"BRONZE SWORD",RESOURCE:bu.SWORD,AMOUNT:2,COST:[{resource:bu.BRONZE,amount:4},{resource:bu.LOG,amount:1},{resource:bu.FUEL,amount:7}],CRAFTING:25},IRON_SWORD:{NAME:"IRON SWORD",RESOURCE:bu.SWORD,AMOUNT:3,COST:[{resource:bu.IRON,amount:3},{resource:bu.LOG,amount:1},{resource:bu.FUEL,amount:10}],CRAFTING:30},WOODEN_SHIELD:{NAME:"WOODEN SHIELD",RESOURCE:bu.SHIELD,AMOUNT:1,COST:[{resource:bu.PLANK,amount:5},{resource:bu.LOG,amount:2},{resource:bu.LEATHER,amount:1}],CRAFTING:20},BRONZE_SHIELD:{NAME:"BRONZE SHIELD",RESOURCE:bu.SHIELD,AMOUNT:2,COST:[{resource:bu.BRONZE,amount:1},{resource:bu.LEATHER,amount:1}],CRAFTING:25},IRON_SHIELD:{NAME:"IRON SHIELD",RESOURCE:bu.SHIELD,AMOUNT:4,COST:[{resource:bu.IRON,amount:1},{resource:bu.LEATHER,amount:1}],CRAFTING:30},LEATHER_ARMOR:{RESOURCE:bu.LEATHER_ARMOR,AMOUNT:1,COST:[{resource:bu.LEATHER,amount:10}],CRAFTING:20},LIGHT_ARMOR:{RESOURCE:bu.LIGHT_ARMOR,AMOUNT:1,COST:[{resource:bu.COPPER,amount:10},{resource:bu.LEATHER,amount:5},{resource:bu.FUEL,amount:10}],CRAFTING:25},HEAVY_ARMOR:{RESOURCE:bu.HEAVY_ARMOR,AMOUNT:1,COST:[{resource:bu.BRONZE,amount:8},{resource:bu.LEATHER,amount:5},{resource:bu.FUEL,amount:10}],CRAFTING:30},CANNON:{RESOURCE:bu.CANNON,AMOUNT:1,COST:[{resource:bu.IRON,amount:10},{resource:bu.PLANK,amount:10},{resource:bu.FUEL,amount:5}],CRAFTING:30},FUEL_BRUSHWOOD:{NAME:"BRUSHWOOD FUEL",RESOURCE:bu.FUEL,AMOUNT:2,COST:[{resource:bu.BRUSHWOOD,amount:4}],CRAFTING:2},FUEL_LOG:{NAME:"LOG FUEL",RESOURCE:bu.FUEL,AMOUNT:4,COST:[{resource:bu.LOG,amount:4}],CRAFTING:5},FUEL_COAL:{NAME:"COAL FUEL",RESOURCE:bu.FUEL,AMOUNT:12,COST:[{resource:bu.COAL,amount:2}],CRAFTING:5},COOKED_FISH:{RESOURCE:bu.COOKED_FISH,AMOUNT:1,COST:[{resource:bu.FISH,amount:1},{resource:bu.FUEL,amount:1}],CRAFTING:5},COOKED_MEAT:{RESOURCE:bu.COOKED_MEAT,AMOUNT:1,COST:[{resource:bu.MEAT,amount:1},{resource:bu.FUEL,amount:1}],CRAFTING:5},CHEESE:{RESOURCE:bu.CHEESE,AMOUNT:1,COST:[{resource:bu.MILK,amount:3}],CRAFTING:7},OMELETTE:{RESOURCE:bu.OMELETTE,AMOUNT:1,COST:[{resource:bu.EGG,amount:5},{resource:bu.FUEL,amount:1}],CRAFTING:3},PIE:{RESOURCE:bu.PIE,AMOUNT:1,COST:[{resource:bu.APPLE,amount:3},{resource:bu.FLOUR,amount:1},{resource:bu.EGG,amount:1},{resource:bu.FUEL,amount:1}],CRAFTING:5},FLOUR:{RESOURCE:bu.FLOUR,AMOUNT:1,COST:[{resource:bu.WHEAT,amount:2}],CRAFTING:3},BREAD:{RESOURCE:bu.BREAD,AMOUNT:1,COST:[{resource:bu.FLOUR,amount:2},{resource:bu.FUEL,amount:1}],CRAFTING:5},BOUILLABAISSE:{RESOURCE:bu.BOUILLABAISSE,AMOUNT:1,COST:[{resource:bu.FISH,amount:3},{resource:bu.BREAD,amount:1},{resource:bu.HERBS,amount:2},{resource:bu.FUEL,amount:1}],CRAFTING:5},VEGETABLE_SOUP_BERRY:{RESOURCE:bu.VEGETABLE_SOUP,AMOUNT:1,COST:[{resource:bu.BERRY,amount:2},{resource:bu.HERBS,amount:1},{resource:bu.FUEL,amount:1}],CRAFTING:5},VEGETABLE_SOUP_MUSHROOM:{RESOURCE:bu.VEGETABLE_SOUP,AMOUNT:1,COST:[{resource:bu.MUSHROOM,amount:2},{resource:bu.HERBS,amount:1},{resource:bu.FUEL,amount:1}],CRAFTING:5},VEGETABLE_SOUP_BERRY_MUSHROOM:{RESOURCE:bu.VEGETABLE_SOUP,AMOUNT:1,COST:[{resource:bu.BERRY,amount:1},{resource:bu.MUSHROOM,amount:1},{resource:bu.HERBS,amount:1},{resource:bu.FUEL,amount:1}],CRAFTING:5},MEAT_SOUP:{RESOURCE:bu.MEAT_SOUP,AMOUNT:1,COST:[{resource:bu.MEAT,amount:1},{resource:bu.HERBS,amount:1},{resource:bu.FUEL,amount:1}],CRAFTING:5},FABRIC:{NAME:"COTTON FABRIC",RESOURCE:bu.FABRIC,AMOUNT:1,COST:[{resource:bu.COTTON,amount:2}],CRAFTING:5},FABRIC_WOOL:{NAME:"WOOL FABRIC",RESOURCE:bu.FABRIC,AMOUNT:1,COST:[{resource:bu.WOOL,amount:3}],CRAFTING:5},CLOTHES_FABRIC:{NAME:"FABRIC CLOTHES",RESOURCE:bu.CLOTHES,AMOUNT:1,COST:[{resource:bu.FABRIC,amount:10}],CRAFTING:20},CLOTHES_FUR:{NAME:"FUR CLOTHES",RESOURCE:bu.CLOTHES,AMOUNT:1,COST:[{resource:bu.FUR,amount:15}],CRAFTING:20},GOLD:{RESOURCE:bu.GOLD,AMOUNT:1,COST:[{resource:bu.GOLD_ORE,amount:2},{resource:bu.FUEL,amount:1}],CRAFTING:10},SILVER:{RESOURCE:bu.SILVER,AMOUNT:1,COST:[{resource:bu.SILVER_ORE,amount:2},{resource:bu.FUEL,amount:1}],CRAFTING:10},COPPER:{RESOURCE:bu.COPPER,AMOUNT:1,COST:[{resource:bu.COPPER_ORE,amount:2},{resource:bu.FUEL,amount:1}],CRAFTING:20},TIN:{RESOURCE:bu.TIN,AMOUNT:1,COST:[{resource:bu.TIN_ORE,amount:2},{resource:bu.FUEL,amount:1}],CRAFTING:20},BRONZE:{RESOURCE:bu.BRONZE,AMOUNT:2,COST:[{resource:bu.COPPER,amount:1},{resource:bu.TIN,amount:1},{resource:bu.FUEL,amount:1}],CRAFTING:30},IRON:{RESOURCE:bu.IRON,AMOUNT:1,COST:[{resource:bu.IRON_ORE,amount:3},{resource:bu.FUEL,amount:3}],CRAFTING:30},STEEL:{RESOURCE:bu.STEEL,AMOUNT:1,COST:[{resource:bu.IRON,amount:1},{resource:bu.COAL,amount:5},{resource:bu.FUEL,amount:1}],CRAFTING:40},HERBAL_MEDICINE:{RESOURCE:bu.HERBAL_MEDICINE,AMOUNT:1,COST:[{resource:bu.HERBS,amount:5}],CRAFTING:15},JEWELRY:{RESOURCE:bu.JEWELRY,AMOUNT:1,COST:[{resource:bu.GOLD,amount:1},{resource:bu.SILVER,amount:1},{resource:bu.GEMS,amount:1}],CRAFTING:20}}},ro={getReligion(e){const n=Object.entries(this.RELIGIONS).find(n=>n[0]===wu[e]);if(n)return n[1];console.warn("Invalid religion: "+Uu.prepareReligionName(e))},RELIGIONS:{NONE:{FAITH_LEVEL:0,FAITH:0,TIME:0,OFFERING:[]},NATURE:{FAITH_LEVEL:1,FAITH:20,TIME:10,OFFERING:[{resource:bu.LOG,amount:40},{resource:bu.BERRY,amount:20},{resource:bu.MUSHROOM,amount:20}]},FERTILITY:{FAITH_LEVEL:1,FAITH:30,TIME:10,OFFERING:[{resource:bu.WHEAT,amount:40},{resource:bu.BERRY,amount:40},{resource:bu.APPLE,amount:40}]},TECHNOLOGY:{FAITH_LEVEL:1,FAITH:40,TIME:10,OFFERING:[{resource:bu.PLANK,amount:20},{resource:bu.CUT_STONE,amount:20},{resource:bu.HAMMER,amount:5},{resource:bu.PICKAXE,amount:5}]},WAR:{FAITH_LEVEL:1,FAITH:50,TIME:10,OFFERING:[{resource:bu.SPEAR,amount:5},{resource:bu.LEATHER_ARMOR,amount:5},{resource:bu.FUR,amount:10},{resource:bu.LEATHER,amount:10},{resource:bu.FOOD,amount:1e3}]}},PRAYERS:{PRAY:{FAITH:20,FAITH_LEVEL:1,RELIGION:wu.NONE,DESCRIPTION:"We feel better after prayer",FINISH:function(e){e.getHappinessService().addHappinessEffect(0,Fu.PRAYER,2,180)}},BLESSING:{FAITH:50,FAITH_LEVEL:2,RELIGION:wu.NONE,DESCRIPTION:"May everything go according to our plans",FINISH:function(e){const n=[];Object.values(Du).filter(e=>!isNaN(e)).forEach(l=>{e.getServiceByRegion(l).getBuildings().forEach(e=>{n.includes(e.getBuildingType())||n.push(e.getBuildingType())})});const l=Yu.randomExcept(n,[Ru.ALL,Ru.CONSTRUCTION,Ru.DECONSTRUCTION,Ru.BARN,Ru.FIELD,Ru.ORCHARD,Ru.PASTURE,Ru.WAREHOUSE,Ru.SMITHY,Ru.ASCENSION_TEMPLE,Ru.COLOSSUS,Ru.GREAT_LIGHTHOUSE,Ru.HANGING_GARDEN,Ru.PYRAMID,Ru.SACRED_GROVE,Ru.STONEHENGE,Ru.UNDERGROUND_CITY,Ru.PIER,Ru.HARBOUR,Ru.LIGHTHOUSE,Ru.TAX_COLLECTOR,Ru.STASH,Ru.WOODEN_TOWER,Ru.BARRACKS,Ru.STONE_TOWER,Ru.STOCKADE]);e.getLogService().log(Uu.prepareBuildingName(l)+" blessed"),e.getEffectsService().addBuildingEffect(new Vu("Blessing",l,25,180))}},PREACH:{FAITH:20,FAITH_LEVEL:1,RELIGION:wu.NONE,DESCRIPTION:"We shall spread our beliefs to others",FINISH:function(e){e.getService(Wu.RELIGION).increaseFaithLevel(1)}},FAITH_SHIELD:{FAITH:50,FAITH_LEVEL:3,RELIGION:wu.NONE,DESCRIPTION:"Our faith will protect us from harm",FINISH:function(e){let n=25;n+=e.getService(Wu.RELIGION).getFaithLevel(),e.getService(Wu.RELIGION).increaseFaithShield(n)}},SOLDIER_PRAYER:{FAITH:50,FAITH_LEVEL:5,RELIGION:wu.NONE,DESCRIPTION:"We shall win any enemy with our faith. All troops buffed 20% for one year",FINISH:function(e){e.getEffectsService().addArmyEffect(new $u("Soldier prayer",Pu.ALL,20,360))}},FAITHFUL_RESEARCH:{FAITH:100,FAITH_LEVEL:5,RELIGION:wu.TECHNOLOGY,DESCRIPTION:"We live to improve our knowledge. Gain 100 research points spent only on current research",FINISH:function(e){e.getTechService().progressTech(100)}},BABY_BOOM:{FAITH:100,FAITH_LEVEL:5,RELIGION:wu.FERTILITY,DESCRIPTION:"May we have a lot of children",FINISH:function(e){e.getEffectsService().addBuildingEffect(new Vu("Baby boom",Ru.HUT,100,180)),e.getEffectsService().addBuildingEffect(new Vu("Baby boom",Ru.HOUSE,100,180)),e.getEffectsService().addBuildingEffect(new Vu("Baby boom",Ru.LONGHOUSE,100,180)),e.getEffectsService().addBuildingEffect(new Vu("Baby boom",Ru.TUDOR_HOUSE,100,180)),e.getEffectsService().addBuildingEffect(new Vu("Baby boom",Ru.SETTLEMENT,100,180))}},LIFE_CYCLE:{FAITH:100,FAITH_LEVEL:5,RELIGION:wu.NATURE,DESCRIPTION:"We pray for all live to thrive. 10% buff to natural sources for 5 years",FINISH:function(e){e.getEffectsService().addNatureEffect(new Ku("Life cycle",10,1800))}},HOLY_WAR:{FAITH:100,FAITH_LEVEL:5,RELIGION:wu.WAR,DESCRIPTION:"The only true faith must be spread at all cost. All troops buffed 10% for 5 years",FINISH:function(e){e.getEffectsService().addArmyEffect(new $u("Holy War",Pu.ALL,10,1800))}}}},uo={GOLDEN_ITEMS:{GOLDEN_FISH_CHANCE:3e-4,GOLDEN_EGG_CHANCE:3e-4,GOLDEN_APPLE_CHANCE:3e-4,GOLDEN_FLEECE_CHANCE:3e-4},PERKS:{MOTIVATION_SPEECH:{DESCRIPTION:"Use your royal position to motivate people to harder work.<br>25% production upgrade for all buildings for 100 years or until reset (single use)",USAGES:0,MAX_USAGES:0,COST:20,RESET:function(e,n){},EFFECT:function(e,n){e.getEffectsService().addBuildingEffect(new Vu("Motivation speech",Ru.ALL,25,36e3)),e.getRoyalService().unlockCallback(n)}},ROYAL_PROPHECY:{DESCRIPTION:"Your royal blood allows prophets to look into the future.<br>Unlocks certain research for each perk level (awarded immediately and after any soft reset or abdication)",USAGES:0,MAX_USAGES:3,COST:50,RESET:function(e,n){n.usages>=1&&e.getTechService().finishTech(Cu.FIRE),n.usages>=2&&e.getTechService().finishTech(Cu.COOKING),3===n.usages&&(e.getTechService().finishTech(Cu.BOW),e.getTechService().finishTech(Cu.HUNTING))},EFFECT:function(e,n){switch(n.usages){case 0:e.getTechService().finishTech(Cu.FIRE);break;case 1:e.getTechService().finishTech(Cu.COOKING);break;case 2:e.getTechService().finishTech(Cu.BOW),e.getTechService().finishTech(Cu.HUNTING)}e.getRoyalService().unlockCallback(n)}},HERITAGE:{DESCRIPTION:"Your predecessors ruled better.<br>You start with extra building (awarded after any soft reset or abdication)",USAGES:0,MAX_USAGES:2,COST:20,RESET:function(e,n){n.usages>=1&&(e.getService(Wu.FOREST).addBuilding(Ru.GATHERER),e.getLandService().takeLand(eo.FOREST.GATHERER.SIZE)),2===n.usages&&(e.getVillageService().addBuilding(Ru.WORKSHOP),e.getLandService().takeLand(eo.VILLAGE.WORKSHOP.SIZE))},EFFECT:function(e,n){e.getRoyalService().unlockCallback(n)}},ROYAL_ARCHIVES:{DESCRIPTION:"With archives unlocked we can schedule one more research to be worked on.",USAGES:0,MAX_USAGES:1,COST:50,RESET:function(e,n){e.getTechService().increaseTechQueueSize()},EFFECT:function(e,n){e.getTechService().increaseTechQueueSize(),e.getRoyalService().unlockCallback(n)}},FAMILY_JEWELS:{DESCRIPTION:"Your predecessors left you with more riches.<br>You start with extra resources (awarded after any soft reset or abdication)",USAGES:0,MAX_USAGES:3,COST:20,RESET:function(e,n){n.usages>=1&&(e.getResourcesService().increaseResource(bu.LOG,20,"Royal",!0),e.getResourcesService().increaseResource(bu.BRUSHWOOD,10,"Royal",!0),e.getResourcesService().increaseResource(bu.BERRY,20,"Royal",!0),e.getResourcesService().increaseResource(bu.MUSHROOM,20,"Royal",!0)),n.usages>=2&&(e.getResourcesService().increaseResource(bu.STONE,30,"Royal",!0),e.getResourcesService().increaseResource(bu.PLANK,20,"Royal",!0),e.getResourcesService().increaseResource(bu.FUEL,5,"Royal",!0),e.getResourcesService().increaseResource(bu.LEATHER,5,"Royal",!0)),3===n.usages&&e.getResourcesService().increaseResource(bu.COINS,300,"Royal",!0)},EFFECT:function(e,n){e.getRoyalService().unlockCallback(n)}},KING_OF_THE_FOREST:{DESCRIPTION:"You rule everything in the forests.<br>You start with a few forest buildings unlocked (awarded after any soft reset or abdication)",USAGES:0,MAX_USAGES:1,COST:50,RESET:function(e,n){1===n.usages&&(e.getService(Wu.FOREST).addBuilding(Ru.GATHERER),e.getService(Wu.FOREST).addBuilding(Ru.FORESTER),e.getService(Wu.FOREST).addBuilding(Ru.HUNTER_LODGE),e.getLandService().takeLand(eo.FOREST.GATHERER.SIZE+eo.FOREST.FORESTER.SIZE+eo.FOREST.HUNTER_LODGE.SIZE))},EFFECT:function(e,n){e.getRoyalService().unlockCallback(n)}},KING_OF_THE_PEOPLE:{DESCRIPTION:"People love you unconditionally.<br>You start with House unlocked and built instead of huts (awarded after any soft reset or abdication)",USAGES:0,MAX_USAGES:1,COST:50,RESET:function(e,n){1===n.usages&&(e.getTechService().finishTech(Cu.HOUSE),e.getVillageService().replaceWithHouses())},EFFECT:function(e,n){e.getRoyalService().unlockCallback(n)}},KING_OF_THE_SEAS:{DESCRIPTION:"Seas obey your will.<br>You start with sea unlocked, pier building built, one boat and 120 coins",USAGES:0,MAX_USAGES:1,COST:100,RESET:function(e,n){e.getGameService().enable(Iu.SEA),e.getGameService().enable(Iu.NAVY),e.getService(Wu.SEA).addBuilding(Ru.PIER),e.getNavyService().addShip(Pu.BOAT),e.getLandService().takeLand(eo.SEA.PIER.SIZE),e.getResourcesService().increaseResource(bu.COINS,120,"Royal",!0)},EFFECT:function(e,n){e.getRoyalService().unlockCallback(n)}},KING_OF_THE_WAR:{DESCRIPTION:"War is your game.<br>You start with military unlocked and small army (awarded after any soft reset or abdication)",USAGES:0,MAX_USAGES:1,COST:50,RESET:function(e,n){e.getGameService().enable(Iu.ARMY),e.getGameService().enable(Iu.FORT);const l=e.getArmyService();e.getService(Wu.FORT).addBuilding(Ru.BARRACKS),e.getService(Wu.FORT).addBuilding(Ru.BARRACKS),e.getLandService().takeLand(2*eo.FORT.BARRACKS.SIZE),l.addMilitia(20)},EFFECT:function(e,n){e.getRoyalService().unlockCallback(n)}},CALL_TO_ARMS:{DESCRIPTION:"We will fight till the last of us drops dead.<br>You can convert up to 10 villagers to militia (single use)",USAGES:0,MAX_USAGES:0,COST:10,RESET:function(e,n){},EFFECT:function(e,n){const l=e.getResourcesService(),t=e.getModalService(),i=e.getArmyService(),s=e.getRoyalService();t.open(ju.INPUT),t.setModalText("How many villagers would you like to convert to militia?<br>"+l.getPeople()+" recruits available");const r=t.registerForValueResponse().subscribe(e=>{if(r.unsubscribe(),null!==e&&!isNaN(e)){const r=l.getPeople();if(r>10)return void t.info("You can only convert up to 10 villagers");if(i.getFreeBarracks()<e)return void t.info("Not enough barracks space for so many militia");if(e>r)return void t.info("Not enough recruits");if(e<=0)return void t.info("Invalid amount of recruits");if(s.getRoyalPoints()<n.cost)return void t.info("Not enough royal points");l.removeRecruit(Number(e)),i.addMilitia(Number(e)),s.unlockCallback(n)}})}},UNITE_WITH_THE_PEOPLE:{DESCRIPTION:"You step down from your throne and live with others.<br>Permanent 20% upgrade to all buildings (persists through soft resets and abdications)",USAGES:0,MAX_USAGES:0,COST:100,RESET:function(e,n){},EFFECT:function(e,n){e.getEffectsService().addBuildingEffect(new Vu("Unite with the people",Ru.ALL,20,zu.ROYAL)),e.getRoyalService().unlockCallback(n)}},JESTER:{DESCRIPTION:"You hired jester to entertain you but who knows what can you expect from him?<br>Jester will pick random unlocked resource (except coins) and fill it to max storage.<br>Each time he fills resource or picks already full resource he has 50% chance to pick another one (single use)",USAGES:0,MAX_USAGES:0,COST:25,RESET:function(e,n){},EFFECT:function(e,n){const l=Array.from(e.getResourcesService().getResources().values()).filter(e=>e.isVisible()&&e.resource!==bu.COINS);for(;;){const n=l[Yu.randomBetween(0,l.length-1)];if(n.amount<n.limit?(n.amount=n.limit,e.getLogService().success("Jester filled "+Uu.prepareResourceName(n.resource)+" storage!")):e.getLogService().warning("Jester couldn't fill "+Uu.prepareResourceName(n.resource)+" storage!"),Yu.chance(.5))break}e.getRoyalService().unlockCallback(n)}},ASTROLOGICAL_NOTE:{DESCRIPTION:"Royal archives contain notes about old astrological events.<br>You unlock one meteorite in the mountains",USAGES:0,MAX_USAGES:0,COST:10,RESET:function(e,n){},EFFECT:function(e,n){e.getGameService().isEnabled(Iu.MOUNTAINS)||(e.getGameService().enable(Iu.MOUNTAINS),e.getLogService().log("Mountains unlocked")),e.getService(Wu.MOUNTAINS).addMeteorite(),e.getRoyalService().unlockCallback(n)}},ROYAL_FESTIVAL:{DESCRIPTION:"You organize a royal festival for your people.<br>You gain positive happiness boost for 6 months",USAGES:0,MAX_USAGES:0,COST:10,RESET:function(e,n){},EFFECT:function(e,n){e.getHappinessService().addHappinessEffect(0,Fu.ROYAL_FESTIVAL,10,180),e.getLogService().success("Royal festival has started!"),e.getRoyalService().unlockCallback(n)}},ROYAL_RESERVE:{DESCRIPTION:"You use gold from royal treasury that was reserved for a hard times.<br>You gain 2000 coins",USAGES:0,MAX_USAGES:0,COST:10,RESET:function(e,n){},EFFECT:function(e,n){e.getResourcesService().increaseResource(bu.COINS,2e3,"Royal reserve",!0),e.getLogService().success("You gained 2000 coins"),e.getRoyalService().unlockCallback(n)}},ANCIENT_SEA_MAPS:{DESCRIPTION:"You found sea maps that show you places on the sea with something interesting.<br>You unlock up to 5 positive sea events",USAGES:0,MAX_USAGES:0,COST:20,RESET:function(e,n){},EFFECT:function(e,n){e.getWorldService().ROYAL_spawnPositiveSeaEvents(),e.getRoyalService().unlockCallback(n)}},ROYAL_ORDERS:{DESCRIPTION:"Your people work harder when you give them orders.<br>Your initial crafting queue is increased by 1 for each perk level",USAGES:0,MAX_USAGES:5,COST:10,RESET:function(e,n){n.usages>0&&e.getService(Wu.CRAFTING).increaseCraftingQueueSize(n.usages)},EFFECT:function(e,n){e.getService(Wu.CRAFTING).increaseCraftingQueueSize(1),e.getRoyalService().unlockCallback(n)}},ROYAL_TRADITIONS:{DESCRIPTION:"You show royal traditions to the people.You gain 10 Heritage Points",USAGES:0,MAX_USAGES:0,COST:50,RESET:function(e,n){},EFFECT:function(e,n){e.getService(Wu.HERITAGE).increaseHeritagePoints(10),e.getRoyalService().unlockCallback(n)}},ROYAL_GARDENS:{DESCRIPTION:"You open royal gardens for public use.<br>Permanent 1 point happiness effect per perk level",USAGES:0,MAX_USAGES:3,COST:25,RESET:function(e,n){1===n.usages?e.getHappinessService().addHappinessEffect(0,Fu.ROYAL_GARDENS,1,-1):2===n.usages?e.getHappinessService().addHappinessEffect(0,Fu.ROYAL_GARDENS,2,-1):3===n.usages&&e.getHappinessService().addHappinessEffect(0,Fu.ROYAL_GARDENS,3,-1)},EFFECT:function(e,n){e.getHappinessService().updateHappiness(Fu.ROYAL_GARDENS,n.usages+1,-1),e.getLogService().success("Royal gardens unlocked!"),e.getRoyalService().unlockCallback(n)}},HIRE_MERCENARIES:{DESCRIPTION:"Using your royal position you managed to convince mercenaries to fight for you.You gain 10 light cavalry units and 200 coins",USAGES:0,MAX_USAGES:0,COST:30,RESET:function(e,n){},EFFECT:function(e,n){const l=e.getModalService(),t=e.getArmyService(),i=e.getRoyalService();t.getFreeBarracks()<10?l.info("Not enough barracks space for 10 light cavalry units"):i.getRoyalPoints()<n.cost?l.info("Not enough royal points"):(t.addLightCavalry(10),e.getLogService().success("Mercenaries hired!"),e.getResourcesService().increaseResource(bu.COINS,200,"Royal",!0),i.unlockCallback(n))}},HIRE_PIRATES:{DESCRIPTION:"Using your royal position you managed to convince pirates to fight for you.You gain 2 brigantines and 320 coins",USAGES:0,MAX_USAGES:0,COST:30,RESET:function(e,n){},EFFECT:function(e,n){const l=e.getModalService(),t=e.getNavyService(),i=e.getRoyalService();t.getFreeHarbourSpace()<80?l.info("Not enough harbour space for 2 brigantines"):i.getRoyalPoints()<n.cost?l.info("Not enough royal points"):(t.addBrigantines(2),e.getLogService().success("Pirates hired!"),e.getResourcesService().increaseResource(bu.COINS,320,"Royal",!0),i.unlockCallback(n))}},ANCIENT_PROTECTION:{DESCRIPTION:"Using this ancient artifact will prevent any attacks.<br>Enemies won't be able to plunder or conquer your regions for a year.",USAGES:0,MAX_USAGES:0,COST:30,RESET:function(e,n){},EFFECT:function(e,n){const l=e.getLogService(),t=e.getWorldService(),i=e.getRoyalService();t.addProtection(360),l.success("Ancient protection enabled!"),i.unlockCallback(n)}}}},oo={getSeaEvent(e){const n=Object.entries(this.SEA_EVENTS).find(n=>n[0]===Lu[e]);if(n)return n[1];console.warn("Invalid sea event: "+e)},KING_DEATH_CHANCE:.02,ROADS_DISTANCE_MODIFIER:.8,REGIONS:[{ID:0,PATH:"m 126.49907,133.07398 7.34991,7.88445 11.67185,8.93323 4.23333,15.875 11.37709,2.64584 7.14375,8.46666 0.26458,8.59896 13.89063,3.96875 15.08125,-9.525 -1.19063,-16.40417 9.78958,-4.36562 11.2448,5.68854 11.77395,-5.42396 17.33021,3.83646 3.57188,-11.50937 -7.80521,-10.58334 0.66146,-10.45104 7.40833,-7.14375 0.79375,-5.15937 -6.48229,-1.32292 -2.24896,-7.40833 -10.05417,-5.29167 -9.12812,3.96875 -1.71979,-6.21771 1.45521,-8.069789 0.66145,-5.89643 -6.04761,-5.858629 -11.90625,-0.944941 -15.11905,5.669645 -13.08608,0.871196 -12.96258,5.345393 -10.28987,7.617185 -5.07812,-7.750818 -10.55715,5.211754 -6.5481,6.681744 8.68626,10.15624 -7.75082,0.53454 z",LAND:500,FOREST:500,MOUNTAINS:100,CENTER:{x:187,y:127},NEIGHBOURS:[-1,1,2,13],WEALTH:0,HARBOUR:!0,TROOPS:[]},{ID:1,PATH:"m 126.49907,133.07398 -24.13484,-2.04836 -6.013569,-14.96709 -11.49259,-7.61718 4.677217,-1.33635 5.479026,-16.971615 -3.608139,-3.073598 3.741775,-19.510677 -2.405428,-3.340867 13.497118,-6.414468 11.22531,10.15624 11.09169,-3.073598 5.21176,5.211754 10.55714,-4.409945 2.53906,1.336347 4.00905,5.211754 -7.61719,5.479026 21.19488,15.545464 -10.28987,7.617183 -5.07812,-7.750816 -10.55715,5.211754 -6.5481,6.681742 8.68626,10.15624 -7.75082,0.53454 -6.41447,17.37252",LAND:80,FOREST:100,MOUNTAINS:0,CENTER:{x:116,y:97},NEIGHBOURS:[0,2,3,4,7,13,15],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:2,PATH:"m 126.49907,133.07398 -24.13484,-2.04836 0.4009,8.01809 -21.782464,-3.60814 -12.828937,12.96257 v 8.95353 l -11.893494,18.04069 -0.80181,16.83798 19.510677,-3.20723 14.03165,-4.67722 2.138156,-10.28988 9.488072,2.40543 6.949,-8.15172 5.61266,-0.80181 1.46999,12.82894 0.13363,11.49259 3.87541,0.53454 3.87541,-3.34087 3.20723,-9.75534 -0.53454,-8.81989 9.62171,2.13815 -6.28084,-10.28987 6.5481,-11.75986 -1.25576,-9.57787 z",LAND:80,FOREST:100,MOUNTAINS:0,CENTER:{x:100,y:155},NEIGHBOURS:[-1,0,1,3,5],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:3,PATH:"m 56.260235,175.39236 -5.233451,-16.73165 -9.827379,-12.28422 11.433778,-11.43378 1.039435,-11.2448 4.346725,-8.59895 0.566965,-9.92188 6.803573,-0.56696 V 92.703868 l 15.119045,1.700893 10.897249,-7.344976 3.608138,3.073598 -5.479026,16.971617 -4.677217,1.33635 11.49259,7.61718 6.01357,14.96709 0.4009,8.01809 -21.782464,-3.60814 -12.828937,12.96257 v 8.95353 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{x:71,y:125},NEIGHBOURS:[1,2,4,5],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:4,PATH:"m 41.199405,146.37649 -10.997948,-3.99191 -13.363477,-1.33635 4.577637,-11.0537 -3.508559,-16.87597 10.429075,-11.27348 6.676174,-23.33792 1.469982,-7.483546 14.83346,3.741772 2.405425,-8.285356 -1.202711,-5.879928 12.160763,-1.603618 7.617179,8.151722 8.953529,6.548102 13.898015,-6.1472 -3.741774,19.510677 -10.897251,7.344976 -15.119043,-1.700895 v 11.906254 l -6.803573,0.56696 -0.566965,9.92188 -4.346725,8.59895 -1.039435,11.2448 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{x:48,y:98},NEIGHBOURS:[1,3,5,6,7],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:5,PATH:"m 6.2808339,146.92816 -14.9670935,3.74177 6.2808339,12.02713 2.00452142,12.6953 -10.82441572,8.28536 0.534539,6.68174 8.9535291,6.949 12.1607629,0.66818 5.479026,8.01808 7.082642,5.07812 h 7.082642 l 0.400905,-10.0226 10.958049,-1.87089 6.013566,3.47451 7.082642,-2.93997 0.935442,-7.48355 0.80181,-16.83798 -5.233451,-16.73165 -9.827379,-12.28422 -10.997948,-3.99191 -13.363477,-1.33635 z",LAND:40,FOREST:70,MOUNTAINS:0,CENTER:{x:25,y:175},NEIGHBOURS:[-1,2,3,4,6,25],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:6,PATH:"M 16.83798,141.04823 6.2808339,146.92816 -0.13363471,129.0211 -12.828937,117.39488 l 4.0090427,-7.88446 -9.3544327,-9.48806 9.0871631,-4.810855 -4.2763121,-4.276313 0.133635,-15.234361 10.2898762,-5.746295 10.9580504,-0.935445 1.0690783,-7.349911 3.7417731,-6.414468 8.819894,3.207234 2.939965,4.009044 1.603617,-2.939966 7.483547,-1.603618 2.806329,13.096208 -1.469982,7.483544 -6.676174,23.337922 -10.429075,11.27348 3.508559,16.87597 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{x:10,y:92},NEIGHBOURS:[4,5,7,25,106],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:7,PATH:"M 36.482289,71.023614 33.67596,57.927406 26.192413,59.531024 24.588796,62.47099 21.648831,58.461946 12.828937,55.254712 10.824416,52.314747 7.4835466,48.706608 6.8153729,34.674958 19.91158,32.002264 l 9.888972,1.603616 4.81085,-10.289877 4.409948,3.474504 5.746295,1.469982 14.03165,-4.543581 10.423512,5.879928 16.169806,0.133636 4.276313,9.220798 7.082641,-2.405425 3.474503,2.80633 1.20271,6.815372 -7.349906,5.746295 -1.336353,12.294399 2.405428,3.340867 -13.898017,6.1472 -8.953527,-6.548102 -7.617179,-8.151722 -12.160763,1.603618 1.202711,5.879928 -2.405425,8.285356 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{x:56,y:44},NEIGHBOURS:[1,4,6,15,18,106],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:8,PATH:"m 130.40178,245.02827 -7.37053,9.26042 -11.33929,2.07887 -2.26785,7.18154 1.32291,11.15031 6.61459,6.42559 -3.96875,9.82737 -6.23661,1.13395 0.94494,2.64583 3.59077,1.70087 6.61459,-2.64583 1.13392,-3.77976 6.23661,-1.7009 7.55953,-0.94493 3.59077,-5.48066 1.88988,-1.13392 6.61458,1.13392 10.01637,-4.72469 6.99256,6.99257 5.85863,-8.12649 -5.10268,-6.04764 v -10.01636 l 2.26786,-7.9375 -7.37053,-6.23661 -11.1503,-1.88988 -5.29167,6.23661 -2.83482,-5.85863 -6.61458,-6.04762 z",LAND:40,FOREST:50,MOUNTAINS:0,CENTER:{x:138,y:265},NEIGHBOURS:[-1,9,10,11],WEALTH:0,HARBOUR:!0,TROOPS:[]},{ID:9,PATH:"m 165.36458,252.02083 6.22245,-3.26298 4.94449,-4.94449 8.41899,0.66817 5.61266,-5.21175 1.46998,-3.87541 1.73726,0.80181 -0.13364,2.80633 2.27179,4.27631 4.54358,0.66817 2.13816,4.54359 4.54358,0.4009 2.13816,4.94449 1.33635,7.61718 -0.66818,6.1472 -3.87541,4.67722 2.40543,0.93544 2.67269,-0.93544 2.6727,1.33633 -0.13364,2.80633 -4.94448,1.20272 -4.54358,-1.33633 -3.34087,-3.60815 -3.0736,-1.20272 -3.60814,2.53908 -0.53454,5.07812 3.20723,3.74176 3.87541,0.93544 -0.13363,3.8754 -4.14268,1.0691 -6.94901,1.46997 -7.21627,-1.73725 -5.47903,-3.8754 -5.61266,0.66817 -8.84536,-1.09132 5.85863,-8.12649 -5.10268,-6.04764 v -10.01636 z",LAND:40,FOREST:40,MOUNTAINS:10,CENTER:{x:186,y:263},NEIGHBOURS:[-1,8,11],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:10,PATH:"m 111.69196,296.43302 -4.51688,2.97241 -4.94449,1.60362 -1.87088,4.40994 v 6.68173 l 3.4745,-1.06907 -0.26727,4.81084 1.06908,4.9445 5.47902,2.93995 -0.8018,5.07812 5.34539,-1.46997 -1.06908,9.75534 -5.07812,4.6772 0.4009,3.47451 3.34087,0.13364 1.46998,-2.93997 5.87993,-1.20272 2.93997,4.40995 5.61266,2.00453 0.66817,5.21177 6.5481,2.53904 2.40543,-2.67269 5.87993,-2.00453 -0.40091,-4.40994 6.54811,-1.60362 -2.00452,-4.40994 1.87088,-3.34087 4.14268,-4.67722 2.13816,-5.87992 -8.01809,-3.47451 -1.73725,-6.28083 1.87089,-7.88445 -0.26727,-5.47902 0.4009,-6.94902 5.07812,-3.60815 -1.33635,-6.01355 -6.61088,-4.82918 -6.61458,-1.13392 -1.88988,1.13392 -3.59077,5.48066 -7.55953,0.94493 -6.23661,1.7009 -1.13392,3.77976 z",LAND:20,FOREST:50,MOUNTAINS:20,CENTER:{x:130,y:316},NEIGHBOURS:[-1,8,11],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:11,PATH:"m 200.58578,287.64555 3.20723,4.67723 6.41447,5.47901 0.13363,5.47905 4.54359,1.06907 1.06908,7.88445 3.60814,8.95353 -3.60814,5.61266 -4.40995,-1.60361 -4.00904,-0.53454 -0.80181,4.00905 -3.47451,4.14266 -11.89349,-0.4009 -0.13363,-4.54358 2.80633,-1.73726 v -4.00904 l -5.7463,-0.4009 -1.60362,3.60815 -2.53906,4.94448 -6.01356,2.4054 -4.14268,-5.34537 1.73725,-5.21176 5.47903,-5.74631 0.13363,-5.34537 -4.54358,-3.74177 -5.47903,4.94448 -0.53453,7.34992 -2.13816,7.88445 -6.94901,-2.80633 -5.74629,1.73725 -8.01809,-3.47451 -1.73725,-6.28083 1.87089,-7.88445 -0.26727,-5.47902 0.4009,-6.94902 5.07812,-3.60815 -1.33635,-6.01355 -6.61088,-4.82918 10.01637,-4.72469 6.99256,6.99257 8.84536,1.09132 5.61266,-0.66817 5.47903,3.8754 7.21627,1.73725 z",LAND:70,FOREST:20,MOUNTAINS:0,CENTER:{x:188,y:303},NEIGHBOURS:[-1,8,9,10],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:12,PATH:"m 263.52775,322.65786 0.26727,9.62171 -7.48355,5.3454 -1.06907,5.87992 3.74177,4.27632 h 7.7508 l 8.0181,6.94899 1.33635,6.68174 8.81989,2.40543 4.27633,-1.60361 10.4235,1.60361 1.33635,-4.2763 -6.94901,-5.87994 -0.53454,-5.87992 4.81084,2.40541 6.94901,0.53454 3.74177,-5.87992 -4.00902,-5.87994 -6.68176,-2.67269 4.54358,-5.07812 -1.87087,-7.75081 -9.08716,-2.67269 -5.07813,3.20723 -6.41447,-6.1472 -8.0181,0.8018 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{x:282,y:340},NEIGHBOURS:[-1],WEALTH:0,HARBOUR:!0,TROOPS:[]},{ID:13,PATH:"M 177.41392,87.905422 190.5,87.034226 l 15.11905,-5.669645 11.90625,0.944941 6.04761,5.858631 c -1.13392,0.377976 4.15774,-1.511905 4.15774,-1.511905 v -3.401785 l -6.99256,-7.9375 2.64583,-9.449403 h 6.04763 l -1.32292,-6.425597 -15.11905,-2.456844 -12.09524,-6.614583 -13.79613,3.023809 -7.18155,-8.882441 -9.82738,-4.157739 0.37798,-10.016368 -3.59077,-8.126488 -15.49703,-3.590774 -17.76488,13.040178 -0.37797,14.363097 1.32291,13.229166 9.76602,6.42525 2.53906,1.336347 4.00905,5.211752 -7.61719,5.479026 21.19488,15.545464 z",LAND:80,FOREST:40,MOUNTAINS:50,CENTER:{x:169,y:61},NEIGHBOURS:[-1,0,1,15,14],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:14,PATH:"m 228.10863,59.441963 7.18154,-1.700892 5.10268,2.834822 6.4256,-2.456847 -5.10268,-6.236607 -6.99256,-4.535712 10.20536,-1.133931 7.55952,3.590775 2.07887,-6.047619 5.10268,-6.236607 -0.18899,-7.559524 -8.12649,-8.126488 -12.28422,-2.834821 0.56696,-7.181548 -16.06399,1.322917 -26.45833,-2.456846 -6.42559,-5.6696423 -15.875,3.2127975 -7.9375,13.9851188 3.59077,8.126488 -0.37798,10.016368 9.82738,4.157739 7.18155,8.882441 13.79613,-3.023809 12.09524,6.614583 z",LAND:50,FOREST:80,MOUNTAINS:0,CENTER:{x:210,y:32},NEIGHBOURS:[-1,13,15,16],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:15,PATH:"m 85.392611,29.730472 -0.536956,-8.275115 13.985118,-2.267858 9.449407,-5.291666 4.91369,-7.7485118 12.47321,0.9449405 V -4.0580357 l 12.6622,-2.0788691 12.85119,4.7247023 -0.94494,5.6696428 3.96875,2.8348214 6.80358,-3.779762 8.12648,2.2678572 5.66965,2.6458333 -7.9375,13.9851188 -15.49703,-3.590774 -17.76488,13.040178 -0.37797,14.363097 1.32291,13.229166 9.76602,6.42525 -10.55714,4.409943 -5.21176,-5.211752 -11.09169,3.073596 -11.22531,-10.156237 -13.497121,6.414465 1.336355,-12.294399 7.349906,-5.746295 -1.20271,-6.815372 -3.474505,-2.80633 -7.082639,2.405425 z",LAND:50,FOREST:60,MOUNTAINS:50,CENTER:{x:119,y:32},NEIGHBOURS:[1,7,13,14,16,17,18],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:16,PATH:"m 138.33928,-6.1369048 -1.13392,-15.6860122 14.93005,-5.102678 3.2128,5.291667 15.30804,-5.858632 5.29166,-7.9375 12.09524,5.10268 15.30804,-12.662204 13.79613,0.566965 5.10268,10.772322 4.34672,-0.377975 4.34673,-5.291667 4.7247,3.023809 -2.07887,8.315475 1.88988,10.583334 7.9375,12.0952374 -12.47321,9.4494048 -7.37054,6.9925598 -26.45833,-2.456846 -6.42559,-5.6696423 -15.875,3.2127975 -5.66965,-2.6458333 -8.12648,-2.2678572 -6.80358,3.779762 -3.96875,-2.8348214 0.94494,-5.6696428 z",LAND:30,FOREST:30,MOUNTAINS:10,CENTER:{x:194,y:-12},NEIGHBOURS:[-1,14,15,17,108],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:17,PATH:"m 121.38705,-45.729911 -13.47485,-20.883184 -10.016368,9.827382 -14.174107,2.078868 0.755951,8.882441 6.803573,3.96875 3.96875,11.339285 -5.669643,6.047619 0.755952,9.449405 6.614581,7.9374999 0.188989,8.8824402 6.236612,3.0238094 6.04762,-2.6458332 3.77976,3.9687499 12.47321,0.9449405 V -4.0580357 l 12.6622,-2.0788691 -1.13392,-15.6860122 1.96547,-11.320386 z",LAND:20,FOREST:60,MOUNTAINS:50,CENTER:{x:114,y:-21},NEIGHBOURS:[15,16,18,19,20,108],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:18,PATH:"M 0.75595238,29.581845 -3.7797618,20.888392 -13.418155,15.029762 -9.8273808,6.5252975 0.56696427,3.8794642 6.8035714,8.9821426 5.6696427,-1.6011906 l 5.6696433,-2.6458333 4.157738,3.40178565 11.339285,-7.55952375 4.157739,-7.181547 13.229166,-1.133929 7.181546,9.8273808 5.858632,-4.9136908 -2.456844,-5.291666 10.583333,2.267857 5.102677,6.9925592 6.614584,-10.3943452 13.229166,3.212798 6.614583,7.9374997 0.188989,8.8824404 6.23661,3.0238094 6.04762,-2.6458332 3.77976,3.9687499 -4.91369,7.7485118 -9.449407,5.291666 -13.985118,2.267858 0.536956,8.275115 L 69.222807,29.596836 58.799295,23.716908 44.767645,28.260489 39.02135,26.790507 34.611402,23.316003 29.800552,33.60588 19.91158,32.002264 6.8153729,34.674958 Z",LAND:20,FOREST:80,MOUNTAINS:30,CENTER:{x:48,y:7},NEIGHBOURS:[7,15,17,19,22,106],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:19,PATH:"m 30.994048,-15.586309 -9.638393,-5.858632 -3.02381,-8.598956 -5.386161,-0.472472 2.173363,-3.590774 4.724703,-1.228421 0.377976,-6.331103 4.252232,-7.559522 5.669642,1.41741 7.087055,-1.795388 7.654018,-4.346726 4.630208,3.779763 7.559524,-1.417412 4.157737,-3.779761 3.685267,3.496281 1.228424,5.38616 3.401784,-0.850448 3.02381,-5.008184 4.535715,-2.267857 6.614583,-0.09449 0.755949,8.882441 6.803575,3.96875 3.96875,11.339285 -5.669645,6.047619 0.755954,9.449405 -13.229166,-3.212798 -6.614584,10.3943452 -5.102677,-6.9925592 -10.583333,-2.267857 2.456844,5.291666 -5.858632,4.9136908 -7.181546,-9.8273808 z",LAND:20,FOREST:60,MOUNTAINS:40,CENTER:{x:54,y:-32},NEIGHBOURS:[17,18,20,21,22],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:20,PATH:"m 109.80208,-78.519342 -8.23966,-5.473369 -4.543584,-9.354434 -10.557144,-1.469982 -10.557148,5.078121 -3.340867,6.68174 -11.49259,-0.668176 -4.276312,-7.082642 -13.096208,-0.400904 -7.082642,7.349913 -3.608139,6.681737 -13.363476,-5.078122 -8.018086,8.819896 -2.5390601,9.755339 -10.02260723,6.280832 3.47450383,7.082642 8.8198945,3.207234 8.862771,5.44285 4.252232,-7.559522 5.669642,1.41741 7.087055,-1.795388 7.654018,-4.346726 4.630208,3.779763 7.559524,-1.417412 4.157737,-3.779761 3.685267,3.496281 1.228424,5.38616 3.401784,-0.850448 3.02381,-5.008184 4.535715,-2.267857 6.614583,-0.09449 14.174104,-2.078874 10.016371,-9.827382 z",LAND:20,FOREST:40,MOUNTAINS:20,CENTER:{x:53,y:-68},NEIGHBOURS:[-1,17,19,21,33,108],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:21,PATH:"m -12.428033,-35.483294 -4.944486,-3.340867 -7.216277,0.400904 -4.409947,-4.142676 -1.603618,-7.082645 3.207234,-4.81085 7.884452,-2.672696 8.953529,3.608139 3.8754078,-4.81085 5.74629489,0.935442 3.47450381,7.082642 8.8198945,3.207234 8.862771,5.44285 -0.377976,6.331103 -4.724703,1.228421 -2.173363,3.590774 -8.1348325,-0.02244 -7.884451,5.61266 -4.8108512,-3.60814 0.5345388,-5.211754 z",LAND:10,FOREST:10,MOUNTAINS:20,CENTER:{x:-4,y:-42},NEIGHBOURS:[19,20,22,31,32,33],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:22,PATH:"m 12.945684,-30.516369 -8.1348325,-0.02244 -7.884451,5.61266 -4.8108514,-3.60814 0.534539,-5.211754 -5.0781211,-1.737252 -3.340869,5.61266 0.400904,6.280834 -13.22984,0.133635 -5.345391,5.34539 -9.621702,0.400904 -12.160766,5.345391 -3.741772,6.5481032 0.668174,7.7508163 -4.009044,5.2117558 -7.082641,2.0045214 3.608138,2.9399643 11.091685,6.548104 3.608139,9.888971 8.285356,-0.534537 6.414468,3.608138 6.815373,-0.53454 -0.400905,8.285356 9.354434,3.207234 3.727387,7.811127 6.425596,-6.236608 6.8035709,-3.212798 -0.7559524,-7.9375 5.66964288,-3.401785 -4.53571418,-8.693453 -9.6383932,-5.85863 3.5907742,-8.5044645 10.39434507,-2.6458333 6.23660713,5.1026782 -1.1339287,-10.583333 5.6696433,-2.6458333 4.157738,3.40178565 11.339285,-7.55952375 4.157739,-7.181547 -9.638393,-5.858632 -3.02381,-8.598956 z",LAND:30,FOREST:50,MOUNTAINS:20,CENTER:{x:-25,y:2},NEIGHBOURS:[18,19,21,23,30,31,106],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:23,PATH:"m -17.386905,50.370536 -3.727387,-7.811127 -9.354434,-3.207234 0.400905,-8.285356 -6.815373,0.53454 -6.414468,-3.608138 -8.285356,0.534537 -3.608139,-9.888971 -11.091685,-6.548104 -12.828936,3.34087 -8.151723,7.617181 -0.801806,10.690781 -8.285356,2.405425 1.069078,6.013564 -11.893495,6.414468 2.27179,2.672697 6.414471,-0.801809 -2.672701,8.953529 -5.21175,6.548104 8.819893,9.087164 3.059332,6.331924 6.614581,-0.755954 5.858634,-10.961307 3.779758,-11.150298 10.016371,2.645833 14.174108,-0.566962 8.504462,8.126487 14.363096,-1.700893 13.418154,-7.181548 z",LAND:30,FOREST:80,MOUNTAINS:0,CENTER:{x:-62,y:44},NEIGHBOURS:[22,24,28,29,30,106],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:24,PATH:"m -91.848214,135.22619 -10.016366,-6.80357 -2.26786,-8.50447 -10.58333,-7.9375 6.2366,-7.9375 12.851195,2.64584 8.504465,-10.583337 -6.992561,-7.74851 -0.377976,-6.992562 6.614583,-0.755952 5.858632,-10.961309 3.77976,-11.150298 10.016371,2.645833 14.174108,-0.566962 8.504462,8.126487 14.363096,-1.700893 -7.181548,7.748511 -2.267857,12.662204 1.889881,10.77232 -9.449405,5.858628 -4.157737,8.50447 5.669642,7.37053 -7.937499,7.18155 -3.212799,6.23661 -4.724701,3.40178 -13.607143,-3.59077 -9.07143,3.59077 z",LAND:40,FOREST:90,MOUNTAINS:40,CENTER:{x:-68,y:97},NEIGHBOURS:[23,25,26,28,106,109],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:25,PATH:"m -11.22532,183.67772 -14.855037,-2.33844 -17.197917,2.26786 -3.023809,-6.04762 5.669643,-3.96875 -7.370535,-6.61458 -12.851191,-1.51191 -1.889882,-10.39434 5.858632,-4.34673 4.157739,-11.52827 -5.10268,-5.85863 3.212799,-6.23661 7.937499,-7.18155 9.827382,-1.70089 0.755952,-7.37053 10.016368,-1.7009 7.90603,-9.12347 9.3544327,9.48806 -4.0090427,7.88446 12.69530229,11.62622 6.41446861,17.90706 -14.9670935,3.74177 6.2808339,12.02713 2.00452142,12.6953 z",LAND:30,FOREST:80,MOUNTAINS:20,CENTER:{x:-29,y:146},NEIGHBOURS:[-1,5,6,24,26,106],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:26,PATH:"m -60.854166,165.46428 -11.528274,8.31548 -4.913691,12.47321 -4.724701,13.04018 -16.063989,0.75595 -14.174109,4.72471 -9.63839,-5.85863 -2.83482,-9.6384 -8.50447,-11.52827 1.32292,-5.85863 0.56697,-10.96131 10.01636,-8.12649 16.63096,-3.40178 -1.13393,-8.12649 4.34672,1.13393 2.834826,4.53571 3.96875,2.83482 3.590774,-6.61458 -0.755954,-7.9375 6.614583,1.5119 9.07143,-3.59077 13.607143,3.59077 4.724701,-3.40178 5.10268,5.85863 -4.157739,11.52827 -5.858632,4.34673 z",LAND:30,FOREST:60,MOUNTAINS:30,CENTER:{x:-96,y:170},NEIGHBOURS:[-1,24,25,27,109],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:27,PATH:"m -133.23661,177.74851 -6.14445,7.53282 0.93545,7.75082 1.87088,10.15624 -4.54358,9.75534 -8.95353,-3.60814 0.26727,-6.1472 -3.87541,-5.74629 2.13816,-5.61266 -5.34539,0.4009 -5.07812,6.41447 -0.13364,6.54811 -8.68626,-2.53906 -8.01808,1.60361 -4.14268,-6.28083 2.6727,-5.61266 -6.28084,-0.93545 -3.87541,-7.88445 6.1472,-4.27631 4.00905,-9.2208 h 7.08264 l 2.40542,-7.61718 -1.73725,-4.27631 7.48355,-0.80181 3.60814,4.40995 1.73725,5.34539 6.41447,-8.95353 11.22532,-0.53454 2.93996,5.21176 7.76707,-1.90213 -0.56697,10.96131 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{x:-158,y:180},NEIGHBOURS:[-1,26,39,40,109],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:28,PATH:"m -180.86161,118.40625 0.75596,-10.20536 10.20535,-6.99256 -4.53571,-5.480652 10.96131,1.511903 5.48065,-0.944938 3.59078,-11.150299 16.81994,2.456844 5.29167,-8.693451 -3.96875,-3.96875 1.5119,-3.401785 8.12649,3.401785 6.42559,-1.700893 -0.18899,-8.88244 5.29167,4.157739 8.72048,-2.5679 8.819893,9.087162 3.059332,6.331926 0.377976,6.992562 6.992559,7.748508 -8.504465,10.583339 -12.851195,-2.64584 -6.2366,7.9375 10.58333,7.9375 -9.54722,7.96695 -7.27652,2.27925 -4.4037,-4.96972 -0.28353,-14.18749 -10.61059,6.01356 -1.6838,7.64391 -6.21548,5.63935 -11.19493,3.03235 -8.12649,-7.74851 -11.33929,4.15773 z",LAND:10,FOREST:60,MOUNTAINS:50,CENTER:{x:-130,y:100},NEIGHBOURS:[23,24,29,38,39,109],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:29,PATH:"m -154.40327,85.144342 -7.18155,-7.748511 2.26786,-8.315476 -10.96131,-9.449403 -1.88988,-13.04018 3.77976,-9.071427 6.61458,-8.693452 -2.07887,-9.071429 11.33929,6.236607 11.71726,0.377976 6.99256,-7.9375 -2.64583,-7.370536 10.58333,3.212798 6.23661,11.90625 10.77232,3.401786 10.205356,-5.669643 11.388283,-0.863468 -0.801804,10.690781 -8.285358,2.405425 1.069078,6.013564 -11.893495,6.414468 2.27179,2.672697 6.414471,-0.801809 -2.672701,8.953529 -5.21175,6.548104 -8.72048,2.5679 -5.29167,-4.157739 0.18899,8.882438 -6.42559,1.700895 -8.12649,-3.401785 -1.5119,3.401785 3.96875,3.96875 -5.29167,8.693449 z",LAND:30,FOREST:80,MOUNTAINS:20,CENTER:{x:-140,y:51},NEIGHBOURS:[23,28,30,37,38,107],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:30,PATH:"m -59.467469,-5.8163777 -9.220798,-5.8799263 -12.294399,1.603617 -1.603618,-9.087164 4.009043,-4.009043 -6.147199,-2.939964 -7.750815,7.216276 -12.027135,-3.474503 -3.20723,-8.285357 -13.63075,7.483548 -3.20723,8.552625 -15.7689,4.8108514 1.60362,11.7598591 6.94901,4.0090428 -4.68553,5.1175267 10.58333,3.212798 6.23661,11.90625 10.77232,3.401786 10.205356,-5.669643 11.388283,-0.863468 8.151723,-7.617181 12.828936,-3.34087 -3.608138,-2.9399675 7.082641,-2.0045214 4.009044,-5.2117556 z",LAND:30,FOREST:50,MOUNTAINS:0,CENTER:{x:-104,y:-2},NEIGHBOURS:[22,23,29,31,32,36,37],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:31,PATH:"m -84.72444,-26.128858 13.630746,-4.276312 4.276312,-8.285356 -1.603616,-4.810852 5.34539,-1.870887 0.80181,8.018086 4.543581,0.267269 4.810852,-9.354434 22.317004,-3.207234 1.603618,7.082645 4.409947,4.142676 7.216277,-0.400904 4.944486,3.340867 -3.340869,5.612659 0.400904,6.280834 -13.22984,0.133635 -5.345391,5.34539 -9.621702,0.400904 -12.160766,5.345391 -3.741772,6.5481033 -9.220798,-5.8799263 -12.294399,1.603617 -1.603618,-9.087164 4.009043,-4.009043 z",LAND:20,FOREST:60,MOUNTAINS:50,CENTER:{x:-50,y:-28},NEIGHBOURS:[21,22,30,32],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:32,PATH:"m -64.946495,-102.83521 -1.069078,10.42351 -9.888971,5.879928 -5.34539,11.49259 -9.621705,1.336347 -2.138157,8.552627 6.414471,-0.801809 5.879928,3.474503 -2.939965,8.285355 -2.939963,12.561668 -10.156242,-1.870887 -3.207235,8.552624 -7.750818,4.276312 3.20723,8.285357 12.027137,3.474503 7.750813,-7.216276 13.630746,-4.276312 4.276312,-8.285356 -1.603616,-4.810852 5.34539,-1.870887 0.80181,8.018086 4.543581,0.267269 4.810852,-9.354434 22.317004,-3.207234 3.207234,-4.81085 7.884452,-2.672696 8.953529,3.608139 -3.427973,-6.663516 4.1577382,-10.583333 4.5357142,-7.559521 -6.9925594,-6.614581 -5.102679,-1.322919 -9.072777,-2.402073 -15.234365,0.267269 -12.561667,-1.603616 z",LAND:20,FOREST:40,MOUNTAINS:90,CENTER:{x:-57,y:-64},NEIGHBOURS:[21,30,31,33,34,35,36,52],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:33,PATH:"m 56.794775,-90.808084 0.846593,-10.200846 11.339287,-10.01637 -9.092728,-8.51199 -10.075318,-5.00147 -5.635252,-10.79329 -7.313215,1.72579 -1.716291,5.14658 -4.468898,3.86557 -14.384054,0.56892 -4.199661,-7.69708 -6.5002804,4.10109 -3.9743132,9.24176 -7.6666341,4.15346 0.6681736,7.75293 -7.1898919,3.9522 -4.819197,16.252975 5.102679,1.322917 6.9925594,6.614583 -4.5357142,7.559521 -4.1577382,10.583333 3.427973,6.663516 3.8754078,-4.81085 5.74629489,0.935442 10.02260701,-6.280832 2.5390603,-9.755339 8.018086,-8.819896 13.363476,5.078122 3.608139,-6.681737 7.082642,-7.349911 z",LAND:30,FOREST:50,MOUNTAINS:70,CENTER:{x:20,y:-101},NEIGHBOURS:[-1,20,21,32,34],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:34,PATH:"m 5.5949574,-127.62118 -12.8112346,-9.42453 -4.8108518,-9.6217 -10.95805,-2.6727 -5.879928,-10.42351 -9.354434,5.34539 -9.087165,9.88897 -16.83798,-4.00904 -5.612659,7.75082 9.888972,14.43255 2.672696,14.96709 -7.750818,8.55263 10.690781,12.828935 12.561667,1.603616 15.234365,-0.267269 9.072777,2.402073 4.819197,-16.252975 7.189892,-3.9522 -0.6681737,-7.75293 7.6666341,-4.15346 z",LAND:30,FOREST:60,MOUNTAINS:50,CENTER:{x:-34,y:-117},NEIGHBOURS:[-1,32,33,35],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:35,PATH:"m -69.757345,-140.78748 -4.276315,-2.53906 -8.819893,1.46998 -4.142676,8.68626 -7.216278,0.53454 -2.004523,4.94448 -9.88897,1.87089 1.06908,6.28083 7.349908,7.34992 -1.870885,8.81989 7.349911,6.280834 3.741774,8.552624 6.414468,3.207234 0.801812,10.289876 5.345388,-11.49259 9.888971,-5.879928 1.069078,-10.42351 7.750818,-8.55263 -2.672696,-14.96709 z",LAND:20,FOREST:10,MOUNTAINS:20,CENTER:{x:-81,y:-112},NEIGHBOURS:[-1,32,34,52,53],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:36,PATH:"m -121.34037,-23.188894 -6.949,-5.879929 -1.06908,-12.561668 -8.28535,-0.267269 -4.54359,5.34539 -5.61266,-10.423511 5.34539,-10.156243 12.2944,-4.81085 -4.27631,-8.285355 0.53454,-16.570712 4.27631,4.009044 1.87089,5.879928 6.68174,5.078121 9.35443,-4.81085 6.94901,4.009041 3.20723,-7.483546 10.690783,6.414468 -2.138159,8.552627 6.414471,-0.801809 5.879928,3.474503 -2.939965,8.285355 -2.939963,12.561668 -10.15624,-1.870887 -3.207237,8.552624 -7.750818,4.276312 z",LAND:20,FOREST:60,MOUNTAINS:10,CENTER:{x:-114,y:-52},NEIGHBOURS:[30,32,37,50,51,52],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:37,PATH:"m -192.57887,9.1711303 7.37054,2e-7 4.53571,-4.9136905 7.9375,2.8348215 5.29167,3.5907735 5.85863,-3.4017854 5.48066,0.9449403 3.96875,-7.37053545 -6.23661,-5.66964285 -2.07887,-5.2916666 6.42559,0.3779764 4.91369,-3.7797624 -0.18898,-6.236607 h 7.55952 l 6.23661,-3.212797 1.70089,-5.480656 5.5142,-0.631322 6.949,5.879929 -3.20723,8.552625 -15.7689,4.8108514 1.60362,11.7598591 6.94901,4.0090428 -4.68553,5.1175267 2.64583,7.370536 -6.99256,7.9375 -11.71726,-0.377976 -11.33929,-6.236607 -16.28698,1.423383 -20.31248,-8.552624 7.30631,-0.241295 z",LAND:10,FOREST:30,MOUNTAINS:10,CENTER:{x:-146,y:10},NEIGHBOURS:[29,30,36,49,50,107],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:38,PATH:"m -210.91071,87.979162 -16.80293,-8.536559 5.3454,-13.898015 17.35916,-9.795427 17.53764,3.566014 15.30329,-12.724403 1.88988,13.04018 10.96131,9.449403 -2.26786,8.315476 7.18155,7.748511 -3.59078,11.150301 -5.48065,0.944938 -10.96131,-1.511903 4.53571,5.480652 -10.20535,6.99256 -12.66221,-5.85863 -3.0238,-12.095238 -10.20536,-10.961309 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{x:-183,y:80},NEIGHBOURS:[-2,28,29,47,107],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:39,PATH:"m -249.46428,177.74851 0.75595,-13.41816 16.06399,-11.33928 -5.10268,-10.01637 -5.85863,-12.09524 17.19791,-4.53571 2.64584,-7.74851 -6.4256,-8.12649 6.23661,-2.26786 6.99256,7.9375 -1.51191,12.47321 13.41816,-6.42559 7.55952,-10.58333 16.63095,6.80357 6.04762,11.33928 11.33929,-4.15773 8.12649,7.74851 -3.02381,14.74107 5.09295,10.0761 -6.41447,8.95353 -1.73725,-5.34539 -3.60814,-4.40995 -7.48355,0.80181 1.73725,4.27631 -2.40542,7.61718 h -7.08264 l -4.00905,9.2208 -6.1472,4.27631 -13.29962,-11.84314 -0.18899,8.50441 -14.74107,1.32297 -12.66221,-7.18155 0.56697,9.82733 -13.60714,7.9375 z",LAND:20,FOREST:100,MOUNTAINS:50,CENTER:{x:-202,y:151},NEIGHBOURS:[-2,27,28,40,41,109],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:40,PATH:"m -182.94599,197.97664 -6.23109,10.57693 5.85863,10.20536 -14.93006,0.18898 -2.91317,-7.67206 -6.15826,-0.0764 -4.7247,6.4256 5.48065,10.20535 -3.21279,10.39435 -8.88244,6.99256 -5.66965,2.45684 -4.34672,-3.59077 -9.82738,-4.53571 1.13392,-13.60715 6.61459,-9.26041 -0.94494,-6.61459 -6.12787,-0.5266 -9.93612,6.76321 -4.15774,10.96131 -7.35164,10.34705 -1.33945,-7.70599 0.5646,-10.76755 -2.06955,-10.52743 6.53439,-10.09117 11.22118,-6.4067 13.60714,-7.9375 -0.56697,-9.82738 12.66221,7.18155 14.74107,-1.32292 0.18899,-8.50446 13.29962,11.84314 3.87541,7.8845 6.28084,0.93545 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{x:-220,y:202},NEIGHBOURS:[-1,27,39,41],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:41,PATH:"m -260.61222,229.9045 -16.25534,-4.53099 0.56697,9.63839 -25.13541,3.40179 -11.71726,-3.02381 -4.72472,-13.98512 4.91371,-13.79613 -8.31548,-13.98512 6.61458,-10.39435 14.1741,4.91369 7.9375,-11.33928 12.28423,-7.55953 2.07886,-11.33928 13.60715,5.10268 0.18899,11.1503 14.93006,3.59077 5.10268,14.36309 -11.22118,6.40675 -6.53439,10.09117 2.06955,10.52738 z",LAND:20,FOREST:60,MOUNTAINS:10,CENTER:{x:-283,y:201},NEIGHBOURS:[-1,-2,39,40,42,43],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:42,PATH:"m -317.87798,221.40476 -5.25087,-3.51654 -10.15624,5.07812 1.60361,10.15624 -5.3454,5.61266 -12.56165,3.74177 -10.42352,-6.949 2.67268,-9.88898 -8.28534,-6.41447 1.33635,-8.28535 7.48356,-9.6217 -3.47451,-8.01809 11.75986,-2.93996 10.15624,-2.13816 6.41445,-8.01809 5.3454,4.00905 11.93819,-0.9831 -6.61458,10.39435 8.31548,13.98512 z",LAND:10,FOREST:60,MOUNTAINS:20,CENTER:{x:-340,y:210},NEIGHBOURS:[-1,41,43,44,65],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:43,PATH:"m -314.66517,183.22916 -11.93819,0.9831 -5.3454,-4.00905 -8.5526,-0.8018 1.60361,-12.02713 -4.27633,-10.15625 7.48356,0.26728 8.28534,8.81989 -1.33633,-10.15624 -7.48355,-9.35444 5.61266,-6.68173 5.87994,1.33634 -4.54358,-11.75986 14.79986,-0.88868 4.15774,12.47322 19.65476,3.77976 12.4732,12.85119 -2.07886,11.33928 -12.28423,7.55953 -7.9375,11.33928 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{x:-308,y:163},NEIGHBOURS:[-2,41,42,44,45],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:44,PATH:"m -339.69957,130.22381 -10.4235,1.60362 -3.74179,7.75082 -8.01806,5.07812 -5.87994,15.50163 8.28534,7.75082 -4.54358,12.56166 -11.49257,7.75082 2.4054,12.2944 8.81991,10.42351 7.48356,-9.6217 -3.47451,-8.01809 21.9161,-5.07812 6.41445,-8.01809 -8.5526,-0.8018 1.60361,-12.02713 -4.27633,-10.15625 7.48356,0.26728 8.28534,8.81989 -1.33633,-10.15624 -7.48355,-9.35444 5.61266,-6.68173 5.87994,1.33634 -4.54358,-11.75986 -4.27633,4.00905 z",LAND:20,FOREST:40,MOUNTAINS:10,CENTER:{x:-351,y:162},NEIGHBOURS:[42,43,45,63,64,65],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:45,PATH:"m -320.45616,56.190154 -13.89801,2.405425 -12.82895,-2.672693 -0.53454,10.958049 -10.4235,12.561668 11.75986,3.207234 -2.40544,13.630746 8.0181,15.768897 8.55263,1.87089 -7.48356,16.30344 6.1472,3.47451 4.27633,-4.00905 14.79986,-0.88868 8.31546,-15.11904 -14.36309,-25.324407 12.85121,-1.13393 -14.11992,-9.116957 -4.00904,-12.561668 z",LAND:20,FOREST:50,MOUNTAINS:0,CENTER:{x:-330,y:97},NEIGHBOURS:[-2,43,44,46,62,63],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:46,PATH:"m -307.6726,87.223213 -14.11992,-9.116957 -4.00904,-12.561668 5.3454,-9.354434 -1.33636,-14.699823 -10.69078,-1.336347 -2.67269,-8.552625 6.41448,-2.138156 19.24341,-3.207235 8.81989,4.810851 13.63075,-10.69078 17.37251,-4.810852 14.16529,4.009043 9.35443,-0.534539 11.75986,-5.61266 10.95805,7.750816 -8.55263,15.501634 -7.21627,-1.870888 -8.8199,-6.147199 -6.41447,9.087165 1.60362,9.888971 -12.56167,0.267269 -10.95804,-4.009043 -8.01809,2.405427 1.60361,11.225318 7.75081,13.898018 -17.90705,7.483546 0.75181,9.827051 z",LAND:30,FOREST:60,MOUNTAINS:80,CENTER:{x:-286,y:38},NEIGHBOURS:[-2,45,47,48,60,61,62],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:47,PATH:"m -292.17559,88.735116 -0.75181,-9.827051 17.90705,-7.483546 -7.75081,-13.898018 -1.60361,-11.225318 8.01809,-2.405427 10.95804,4.009043 12.56167,-0.267269 -1.60362,-9.888971 6.41447,-9.087165 8.8199,6.147199 7.21627,1.870888 8.55263,9.621702 1.06908,19.243405 -5.3454,13.898015 16.80293,8.536559 -21.92262,5.291669 h -15.875 l -9.07143,17.008929 -19.65475,-1.88988 -10.96132,-9.071428 z",LAND:10,FOREST:60,MOUNTAINS:50,CENTER:{x:-254,y:73},NEIGHBOURS:[-2,38,46,107],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:48,PATH:"m -234.39537,13.427031 1.18406,-11.2484599 -5.66964,-8.5044643 3.77976,-9.4494048 4.15774,2.834822 3.2128,-7.9375 -6.23661,-6.99256 2.83482,-9.071427 13.41816,-4.535715 11.52827,7.9375 2.07887,12.473214 8.50446,0.755952 3.02381,6.992559 -0.37797,12.47321459 -5.48066,2.45684521 5.85863,7.5595237 -0.56696,3.2127975 -7.30631,0.241295 -22.98518,8.552624 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{x:-216,y:-3},NEIGHBOURS:[-3,37,46,49,60,107],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:49,PATH:"m -149.11161,-13.507441 -8.69345,-3.96875 1.32292,-8.504464 -9.07143,-3.968749 -7.37054,4.157737 -2.64583,-5.85863 -7.18155,-5.669642 -7.74851,0.377976 -5.66964,-6.425597 -7.37054,3.023809 -2.64583,6.803573 2.07887,12.473214 8.50446,0.755952 3.02381,6.992559 -0.37797,12.47321459 -5.48066,2.45684521 5.85863,7.5595235 h 7.37054 l 4.53571,-4.9136903 7.9375,2.8348215 5.29167,3.5907735 5.85863,-3.4017854 5.48066,0.9449401 3.96875,-7.37053525 -6.23661,-5.66964285 -2.07887,-5.2916666 6.42559,0.3779766 z",LAND:20,FOREST:40,MOUNTAINS:0,CENTER:{x:-177,y:-11},NEIGHBOURS:[-3,37,48,50],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:50,PATH:"m -178.02678,-53.572917 8.12648,-2.078869 3.2128,-7.181548 -5.10268,-9.260416 6.99256,0.94494 4.34673,3.590775 3.40178,-5.858632 -3.77976,-4.724702 7.9375,-2.078868 9.6384,0.944941 1.70089,7.370535 7.11551,1.676434 4.27631,8.285353 -12.2944,4.81085 -5.34539,10.156243 5.61266,10.423511 4.54359,-5.34539 8.28535,0.267269 1.06908,12.561668 -5.5142,0.631322 -1.70089,5.480656 -6.23661,3.212797 h -7.55952 l 0.18898,6.236607 -8.69345,-3.96875 1.32292,-8.504464 -9.07143,-3.968749 -0.56696,-6.425597 -10.39435,-1.322917 1.32292,-7.370534 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{x:-159,y:-47},NEIGHBOURS:[-3,36,37,49,51],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:51,PATH:"m -188.23214,-70.581845 4.61798,-8.199109 7.75081,-0.801809 -3.4745,-8.018087 9.88897,-3.474503 -7.21627,-6.147199 3.20723,-2.405425 2.67269,2.405425 5.87993,-1.069078 -0.53454,-6.1472 5.87993,-1.33635 3.47451,-3.74177 8.81989,1.46998 6.28084,4.54359 -3.74178,2.67269 4.54358,5.07812 8.8199,-2.806326 6.81537,1.336346 1.60362,4.27631 4.00904,-1.603616 5.07812,4.409948 -3.34087,3.073601 5.7463,5.612659 -0.26727,4.81085 -9.35443,4.81085 -6.68174,-5.078121 -1.87089,-5.879928 -4.27631,-4.009044 -0.53454,16.570714 -7.11551,-1.676434 -1.70089,-7.370535 -9.6384,-0.944941 -7.9375,2.078868 3.77976,4.724702 -3.40178,5.858632 -4.34673,-3.590775 -6.99256,-0.944938 5.10268,9.260414 -3.2128,7.181548 -8.12648,2.078869 -8.12649,-9.638393 z",LAND:10,FOREST:30,MOUNTAINS:50,CENTER:{x:-153,y:-90},NEIGHBOURS:[-3,36,50,52,55,56],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:52,PATH:"m -111.71866,-76.642798 0.26727,-4.810852 -5.7463,-5.612659 3.34087,-3.073601 -5.07812,-4.409946 -4.00904,1.603616 -1.60362,-4.276312 2.93997,-5.879928 -2.53906,-4.40995 4.67721,-2.13815 1.60362,-5.21176 4.40995,-4.81085 8.41899,0.13363 7.34991,7.34992 -1.870887,8.81989 7.349913,6.280836 3.741772,8.552622 6.414468,3.207234 0.801812,10.289876 -9.621705,1.336347 -10.690783,-6.414466 -3.20723,7.483544 z",LAND:10,FOREST:20,MOUNTAINS:10,CENTER:{x:-107,y:-93},NEIGHBOURS:[35,36,51,53,55],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:53,PATH:"m -82.853553,-141.85656 -4.810852,-2.27179 -0.400902,-7.48355 -4.409948,-3.20723 -10.824415,-0.13364 -4.00904,4.94449 -6.01357,-1.20271 0.53454,-7.88446 -4.94449,0.40091 -9.88897,2.27179 -0.4009,7.21628 -4.67722,5.74629 3.60814,5.34539 7.34991,3.20723 -0.26727,7.88446 2.00452,6.28083 -2.00452,5.7463 4.14268,0.13363 4.40995,-4.81085 8.41899,0.13363 -1.06908,-6.28083 9.88897,-1.87089 2.004523,-4.94448 7.216278,-0.53454 z",LAND:10,FOREST:10,MOUNTAINS:10,CENTER:{x:-111,y:-137},NEIGHBOURS:[-1,35,52,54,55],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:54,PATH:"m -158.08992,-140.25295 -6.94901,-1.60361 -3.20724,-3.34087 -6.68173,-1.06908 -2.00453,-3.87541 -0.26727,-2.27179 2.53907,-5.74629 11.35895,-3.20724 6.5481,4.67722 7.34992,-3.74178 5.34539,3.07361 2.53906,3.74177 6.5481,-4.27631 7.34991,1.46998 -0.4009,7.21628 -4.67722,5.74629 -0.80181,4.81085 -4.14267,0.93545 -7.61719,-0.80181 -4.54358,-4.67722 z",LAND:10,FOREST:10,MOUNTAINS:0,CENTER:{x:-153,y:-150},NEIGHBOURS:[-1,53,55,56],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:55,PATH:"m -124.5476,-97.22255 -6.81537,-1.336349 -8.8199,2.806329 -4.54358,-5.07812 3.74178,-2.67269 -6.28084,-4.54359 -0.53454,-6.949 -8.28535,-2.13816 -4.00904,-5.47903 3.8754,-5.21175 -4.40994,-5.21176 2.53906,-7.21628 8.28535,-2.93996 4.54358,4.67722 7.61719,0.80181 4.14267,-0.93545 0.80181,-4.81085 3.60814,5.34539 7.34991,3.20723 -0.26727,7.88446 2.00452,6.28083 -2.00452,5.7463 4.14268,0.13363 -1.60362,5.21176 -4.67721,2.13815 2.53906,4.40995 z",LAND:10,FOREST:20,MOUNTAINS:0,CENTER:{x:-136,y:-119},NEIGHBOURS:[51,52,53,54,56],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:56,PATH:"m -174.9279,-146.26651 -8.57954,-0.28855 -7.37053,-6.80357 2.64583,-6.04762 -12.47321,0.37798 -7.37054,8.69345 -9.44941,3.40179 -8.12648,7.37053 6.2366,8.12649 8.12649,1.32292 -2.45684,6.61458 -11.52828,2.64583 1.13393,7.37054 -1.88988,10.96131 2.64583,10.016367 4.91369,1.511904 1.88989,10.205357 6.99255,1.511906 -2.07886,3.212798 6.42559,5.669643 17.00893,-0.18899 4.61798,-8.199109 7.75081,-0.801809 -3.4745,-8.018087 9.88897,-3.474503 -7.21627,-6.147197 3.20723,-2.405424 2.67269,2.405424 5.87993,-1.069078 -0.53454,-6.147202 5.87993,-1.33635 3.47451,-3.74177 8.81989,1.46998 -0.53454,-6.949 -8.28535,-2.13816 -4.00904,-5.47903 3.8754,-5.21175 -4.40994,-5.21176 2.53906,-7.21628 -6.94901,-1.60361 -3.20724,-3.34087 z",LAND:10,FOREST:80,MOUNTAINS:40,CENTER:{x:-192,y:-118},NEIGHBOURS:[-1,-3,51,54,55,57,58],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:57,PATH:"m -225.65178,-139.5625 -6.99256,0.94494 -4.15774,-5.29167 1.13393,-5.10267 -4.34673,-7.9375 -8.50446,-0.75596 -10.96131,3.96875 -6.80358,6.04762 3.40179,13.04018 -5.66964,4.7247 -4.53573,10.01637 7.55955,9.6384 9.26041,-1.32292 4.53571,8.69345 7.74851,4.15774 7.74851,-1.32292 5.10268,6.236611 3.2128,3.779761 4.53571,-2.456845 -2.64583,-10.016367 1.88988,-10.96131 -1.13393,-7.37054 11.52828,-2.64583 2.45684,-6.61458 -8.12649,-1.32292 z",LAND:30,FOREST:60,MOUNTAINS:50,CENTER:{x:-248,y:-125},NEIGHBOURS:[-1,56,58,75,76],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:58,PATH:"m -251.73214,-102.89881 -4.15774,4.535716 2.45685,4.913691 -2.26786,7.74851 -4.7247,4.724702 2.26785,6.614583 -4.34672,5.480656 -4.7247,0.755952 0.56697,3.212798 3.21279,2.456847 4.91369,0.566962 -1.32292,4.913691 6.23661,5.480656 6.42559,-4.724705 -4.7247,-7.74851 7.74851,-6.992559 17.76488,0.94494 14.74108,-6.047618 2.07886,-3.212798 -6.99255,-1.511906 -1.88989,-10.205355 -4.91369,-1.511906 -4.53571,2.456847 -8.31548,-10.016374 -7.74851,1.32292 z",LAND:30,FOREST:60,MOUNTAINS:20,CENTER:{x:-241,y:-84},NEIGHBOURS:[-3,56,57,59,75],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:59,PATH:"m -295.86737,-44.035916 0.66797,-5.568251 4.72471,-5.102678 0.37796,-7.181548 7.37055,0.377976 4.5357,-5.858629 0.94496,-6.425597 5.85861,-1.322917 5.66966,-4.346725 7.55951,5.102677 -4.34672,5.480656 -4.7247,0.755954 0.56697,3.212796 3.21279,2.456847 4.91369,0.566962 -1.32292,4.913691 6.23661,5.480656 6.42559,-4.724705 8.31548,1.511906 1.70089,3.96875 -11.15029,3.212799 -4.53572,7.74851 1.51191,7.559524 -7.9375,1.133928 -7.55952,5.291667 -13.98513,-1.322917 -0.86577,-5.963283 9.08716,2.405425 2.40544,-9.087162 -8.55263,-7.216277 -6.68174,-4.276312 z",LAND:10,FOREST:60,MOUNTAINS:0,CENTER:{x:-267,y:-50},NEIGHBOURS:[-3,58,60,61,74,75],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:60,PATH:"m -287.04746,20.376039 -7.77396,-7.614135 3.02382,-10.5833329 -6.23663,-1.1339286 -2.07886,-4.5357142 4.5357,-3.0238094 h 6.42562 l 6.2366,1.3229166 3.49628,-3.9687502 -7.27604,-6.6145833 -1.7009,-6.614583 7.55952,-4.724703 13.98513,1.322917 7.55952,-5.291667 7.9375,-1.133928 3.96875,2.456844 8.31547,-3.77976 h 2.83482 l 2.26786,5.669642 6.23661,6.99256 -3.2128,7.9375 -4.15774,-2.834822 -3.77976,9.4494048 5.66964,8.5044643 -1.18406,11.2484599 -11.75986,5.61266 -9.35443,0.534539 -14.16529,-4.009043 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{x:-262,y:-5},NEIGHBOURS:[-3,46,48,59,61],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:61,PATH:"m -336.22506,9.9525269 1.87089,-6.4144683 -6.14719,-7.216277 2.93994,-9.3544336 6.41448,-6.681738 -5.61266,-9.621702 2.40543,-10.156243 10.15625,-5.078121 10.69078,5.34539 7.21627,-9.087162 10.4235,4.276312 10.42352,-7.216277 6.68174,4.276312 8.55263,7.216277 -2.40544,9.087162 -9.08716,-2.405425 0.86577,5.963283 -7.55952,4.724703 1.7009,6.614583 7.27604,6.6145833 -3.49628,3.9687502 -6.2366,-1.3229166 h -6.42562 l -4.5357,3.0238094 2.07886,4.5357142 6.23663,1.1339286 -3.02382,10.5833329 7.77396,7.614135 -13.63075,10.69078 -8.81989,-4.810851 -6.41448,-9.354433 -12.56167,0.801808 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{x:-313,y:-14},NEIGHBOURS:[46,59,60,62,72,73,74],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:62,PATH:"m -395.36309,71.726189 -0.46307,-6.716139 9.08717,-6.949008 -2.13818,-9.087165 -9.35442,-8.285356 7.48355,-4.00904 8.01809,2.405425 8.28535,-0.534541 2.40543,-6.147196 5.34538,-8.819896 7.48355,-5.61266 7.75081,3.741773 4.27631,-4.276312 2.67271,-9.621703 8.28535,2.1381561 7.75081,7.7508159 12.56167,-0.801808 6.41448,9.354433 -19.24341,3.207235 -6.41448,2.138156 2.67269,8.552625 10.69078,1.336347 1.33636,14.699823 -13.89801,2.405425 -12.82895,-2.672693 -0.53454,10.958049 -15.51744,4.467278 -8.69347,5.291664 z",LAND:40,FOREST:50,MOUNTAINS:50,CENTER:{x:-355,y:44},NEIGHBOURS:[45,46,61,63,70,71,72],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:63,PATH:"m -361.88292,144.65637 -14.95933,1.53113 -10.20535,-6.80357 -6.80358,-11.33929 -19.65476,5.29167 -3.4018,-19.65476 9.44941,-6.4256 4.53573,4.91369 13.60712,-3.02381 2.26788,-10.205354 -9.44941,-15.119048 -11.3393,-4.535715 12.47322,-7.559524 23.43452,4.91369 8.69347,-5.291666 15.51744,-4.467278 -10.4235,12.561668 11.75986,3.207234 -2.40544,13.630746 8.0181,15.768897 8.55263,1.87089 -7.48356,16.30344 -10.4235,1.60362 -3.74179,7.75082 z",LAND:30,FOREST:100,MOUNTAINS:10,CENTER:{x:-370,y:112},NEIGHBOURS:[44,45,62,64,68,69],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:64,PATH:"m -408.65509,185.5486 -2.40543,-5.07812 7.48355,-5.34539 -2.67272,-6.68174 8.81992,-1.06907 3.20722,4.81085 5.34538,-2.6727 -3.20723,-6.41447 -5.07812,-2.13815 0.53454,-6.41447 5.61266,-2.6727 2.67271,-6.68173 1.29501,-5.80698 10.20535,6.80357 14.95933,-1.53113 -5.87994,15.50163 8.28534,7.75082 -4.54358,12.56166 -11.49257,7.75082 2.4054,12.2944 -15.7689,3.74177 -8.5526,-5.61266 -1.33636,-12.02713 z",LAND:10,FOREST:10,MOUNTAINS:40,CENTER:{x:-380,y:174},NEIGHBOURS:[44,63,65,67,68],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:65,PATH:"m -373.10827,200.5157 -15.7689,3.74177 -8.5526,-5.61266 -6.41448,-8.28535 -8.81989,12.56166 -9.6217,6.68174 -0.80182,13.63075 6.68173,10.95805 7.75084,4.54358 1.87087,-6.41447 -4.2763,-4.81085 9.35442,-0.80181 8.01809,4.81085 5.87994,-3.74177 3.74177,9.35443 6.14719,-5.34539 8.01809,-1.06908 12.56165,-5.07812 -8.28534,-6.41447 1.33635,-8.28535 z",LAND:10,FOREST:70,MOUNTAINS:0,CENTER:{x:-392,y:217},NEIGHBOURS:[-1,42,44,64,66,67],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:66,PATH:"m -408.65509,238.73524 -11.75988,4.81085 -2.40541,9.6217 -9.35445,9.35444 2.40543,11.22531 -4.81084,6.68174 -6.68176,2.40543 -11.22532,1.33636 -6.41445,-2.93997 1.33633,-4.54359 7.48356,-0.80182 6.94901,-2.67268 1.06908,-6.1472 -1.8709,-7.48355 -13.09621,1.06908 -6.94899,-4.27631 -5.87994,-14.16529 4.54358,-9.08716 5.07812,-8.55262 7.48356,4.81085 11.75985,0.80181 7.21628,-4.00905 10.69078,-2.93996 6.68173,10.95805 z",LAND:10,FOREST:50,MOUNTAINS:20,CENTER:{x:-444,y:246},NEIGHBOURS:[-1,65,67,90],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:67,PATH:"m -476.80882,228.31173 4.2763,-8.28536 -2.93997,-9.35443 9.35445,-4.00904 v -5.61266 l 4.54358,-8.55263 3.47449,2.6727 -2.13816,6.68174 1.60362,4.00904 9.08717,-4.81085 0.53453,-8.28536 8.81991,-6.949 10.69079,0.8018 6.68173,5.07812 6.41445,-5.61266 7.75084,-0.53454 9.88896,1.06908 1.33636,12.02713 -6.41448,-8.28535 -8.81989,12.56166 -9.6217,6.68174 -0.80182,13.63075 -10.69078,2.93996 -7.21628,4.00905 -11.75985,-0.80181 -7.48356,-4.81085 -5.07812,8.55262 z",LAND:20,FOREST:60,MOUNTAINS:20,CENTER:{x:-443,y:211},NEIGHBOURS:[64,65,66,68,89,90,91],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:68,PATH:"m -449.01281,192.76488 -4.36962,-7.07887 5.48066,-5.48066 -11.52829,-7.55952 -3.77976,-10.39434 16.06399,-4.15774 8.12649,-6.99256 3.40178,-8.88244 -2.45684,-6.99256 6.2366,-6.99256 8.50447,0.37797 -0.18899,-9.07142 -4.72469,-4.91369 5.29167,-1.13393 6.0476,0.18899 3.4018,19.65476 19.65476,-5.29167 6.80358,11.33929 -1.29501,5.80698 -2.67271,6.68173 -5.61266,2.6727 -0.53454,6.41447 5.07812,2.13815 3.20723,6.41447 -5.34538,2.6727 -3.20722,-4.81085 -8.81992,1.06907 2.67272,6.68174 -7.48355,5.34539 2.40543,5.07812 -7.75084,0.53454 -6.41445,5.61266 -6.68173,-5.07812 -10.69079,-0.8018 z",LAND:30,FOREST:50,MOUNTAINS:30,CENTER:{x:-423,y:160},NEIGHBOURS:[63,64,67,69,87,88,89],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:69,PATH:"m -430.78607,119.90506 -6.73414,-7.05377 2.13815,-8.55262 6.41448,-6.949009 -11.22532,-2.672694 -10.15624,5.345393 -1.60364,-7.750818 6.41448,-4.810853 -6.41448,-5.612659 7.2163,-7.483549 10.69078,-2.405425 -4.27633,-4.276312 5.07812,-9.621702 14.16529,4.009043 4.81087,10.423512 6.43144,6.792116 11.3393,4.535715 9.44941,15.119048 -2.26788,10.205354 -13.60712,3.02381 -4.53573,-4.91369 -9.44941,6.4256 -6.0476,-0.18899 -5.29167,1.13393 z",LAND:30,FOREST:50,MOUNTAINS:0,CENTER:{x:-420,y:91},NEIGHBOURS:[63,68,70,87,88],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:70,PATH:"m -407.83631,79.285713 -6.43144,-6.792116 -4.81087,-10.423512 -14.16529,-4.009043 -11.22531,3.474503 -0.53454,-13.096206 8.55263,-7.750818 0.26725,-8.285352 5.34541,-8.285357 -4.54359,-4.810852 15.76891,-0.534539 9.08716,8.819895 10.69078,-5.345391 10.95804,2.405426 6.14722,14.432555 -8.01809,-2.405425 -7.48355,4.00904 9.35442,8.285356 2.13818,9.087165 -9.08717,6.949008 0.46307,6.716139 z",LAND:20,FOREST:60,MOUNTAINS:50,CENTER:{x:-417,y:47},NEIGHBOURS:[62,63,69,71,85,87],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:71,PATH:"m -366.69379,23.583273 -3.72287,-9.876428 -9.82739,-5.1026787 -7.74851,-0.3779764 -1.13393,-6.2366069 0.37799,-6.047619 -6.99257,-0.1889881 -3.40177,4.34672617 -7.74851,-1.88988097 -6.23663,-6.8035713 -4.15774,3.5907736 -5.48063,5.85863105 -10.20538,-4.72470225 -3.21278,-6.4255952 -5.85864,2.6458331 0.37798,6.0476191 6.2366,4.1577381 0.94493,7.3705356 -5.29166,5.1026781 -0.37796,5.858631 -2.45684,6.614585 6.42622,4.900192 5.34541,-8.285357 -4.54359,-4.810852 15.76891,-0.534539 9.08716,8.819895 10.69078,-5.345391 10.95804,2.405426 6.14722,14.432555 8.28535,-0.534541 2.40543,-6.147196 z",LAND:10,FOREST:40,MOUNTAINS:20,CENTER:{x:-405,y:10},NEIGHBOURS:[62,70,72,84,85],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:72,PATH:"m -395.74107,-4.2470241 -2.45684,-6.8035709 4.34673,-4.724703 -3.21281,-6.425595 -7.37052,-2.456845 5.29167,-4.157739 -0.189,-4.157736 4.15775,-2.834823 0.75594,-6.80357 -5.85862,-3.401787 3.77976,-1.511903 3.02379,1.889879 5.48066,-1.133928 2.64583,-4.346726 11.15031,9.638393 6.2366,-1.322917 -1.13393,6.992559 -6.80357,0.755952 -1.32292,3.779763 11.15031,1.511903 3.40178,5.10268 -1.13393,5.858631 7.37053,5.291666 9.07145,-3.023809 9.79868,3.498598 -2.93994,9.3544336 6.14719,7.216277 -1.87089,6.4144683 -8.28535,-2.1381559 -2.67271,9.621703 -4.27631,4.276312 -7.75081,-3.741773 -7.48355,5.61266 -3.72287,-9.876428 -9.82739,-5.1026787 -7.74851,-0.3779766 -1.13393,-6.2366067 0.37799,-6.047619 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{x:-373,y:-5},NEIGHBOURS:[61,62,71,73,83,84],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:73,PATH:"m -337.56142,-13.032652 -9.79868,-3.498598 -9.07145,3.023809 -7.37053,-5.291666 1.13393,-5.858631 -3.40178,-5.10268 -11.15031,-1.511903 1.32292,-3.779763 6.80357,-0.755952 1.13393,-6.992559 -6.42559,-4.346726 7.37052,-7.748513 3.96875,5.669645 9.26042,-1.13393 1.7009,-5.858632 8.88243,-6.992559 7.9375,3.212799 11.3393,-1.889882 6.42559,7.559524 4.72469,6.992559 6.48444,-0.975918 -7.21627,9.087162 -10.69078,-5.34539 -10.15625,5.078121 -2.40543,10.156243 5.61266,9.621702 z",LAND:10,FOREST:60,MOUNTAINS:0,CENTER:{x:-348,y:-39},NEIGHBOURS:[61,72,74,82,83],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:74,PATH:"m -343.20239,-63.21131 -2.10984,-6.883386 3.87541,-3.608139 8.95352,-2.00452 -3.34086,-5.345391 3.8754,-2.138156 5.07812,0.400905 5.21176,-3.34087 2.53908,-4.944486 5.87991,-1.469982 5.47902,-4.944486 3.11206,-1.251249 3.4018,10.583333 -11.3393,5.10268 1.51191,9.449403 9.82739,8.882441 8.50445,-2.267857 2.64583,5.102677 -0.37796,7.181548 -4.72471,5.102678 -0.66797,5.568251 -10.4235,-4.276312 -6.48444,0.975918 -4.72469,-6.992559 -6.42559,-7.559524 -11.3393,1.889882 z",LAND:10,FOREST:60,MOUNTAINS:50,CENTER:{x:-319,y:-67},NEIGHBOURS:[59,61,73,75,77,82],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:75,PATH:"m -273.08781,-119.90774 h -6.99254 l -13.04017,4.15774 -4.53573,-6.04762 -10.01635,3.59078 -2.07889,4.7247 -1.51191,6.80357 5.85865,-2.26786 3.96875,4.15774 -3.21281,6.04762 3.4018,10.583333 -11.3393,5.102678 1.51191,9.449405 9.82739,8.882441 8.50445,-2.267857 2.64583,5.102677 7.37055,0.377976 4.5357,-5.858629 0.94496,-6.425597 5.85861,-1.322917 5.66966,-4.346725 7.55951,5.102677 -2.26785,-6.614583 4.7247,-4.724702 2.26786,-7.748508 -2.45685,-4.913691 4.15774,-4.535718 -4.53571,-8.69345 -9.26041,1.32292 z",LAND:30,FOREST:60,MOUNTAINS:50,CENTER:{x:-282,y:-93},NEIGHBOURS:[57,58,59,74,76,77],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:76,PATH:"m -336.96576,-143.15327 -3.21281,-2.83482 7.37055,-3.40179 v -6.04762 l 4.72469,-5.48065 -3.96875,-6.61459 -7.74851,2.45685 -3.21281,-4.53572 0.56698,-5.85863 3.02382,-6.04762 16.44195,0.37798 9.26041,8.12649 7.37055,-3.59078 7.18154,3.40179 6.80357,9.4494 9.26042,-6.2366 5.29166,4.15774 8.50448,-2.83483 6.23659,-5.48065 6.4256,7.74851 -2.64583,8.31548 -0.18899,4.34672 -6.80358,6.04762 3.40179,13.04018 -5.66964,4.7247 -4.53573,10.01637 h -6.99254 l -13.04017,4.15774 1.88987,-6.80357 -0.56695,-7.9375 -2.26788,-7.9375 -7.37052,3.2128 -9.07143,-1.32292 -7.74851,-5.66964 -6.61458,3.02381 -3.02382,-3.59078 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{x:-300,y:-150},NEIGHBOURS:[-1,57,75,77,78],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:77,PATH:"m -335.82416,-81.052746 -7.18924,-0.301421 -11.33927,0.755954 -5.29167,-6.803572 3.77976,-9.260417 -6.42559,-6.047618 -9.44941,-1.51191 5.85864,-8.69345 12.09522,-2.26785 1.32292,-8.88245 13.22916,-8.31547 2.26788,-10.77232 9.07142,0.37797 3.02382,3.59078 6.61458,-3.02381 7.74851,5.66964 9.07143,1.32292 7.37052,-3.2128 2.26788,7.9375 0.56695,7.9375 -1.88987,6.80357 -4.53573,-6.04762 -10.01635,3.59078 -2.07889,4.7247 -1.51191,6.80357 5.85865,-2.26786 3.96875,4.15774 -3.21281,6.04762 -3.11206,1.251249 -5.47902,4.944488 -5.87991,1.46998 -2.53908,4.944486 -5.21176,3.34087 -5.07812,-0.400905 z",LAND:30,FOREST:60,MOUNTAINS:50,CENTER:{x:-334,y:-112},NEIGHBOURS:[74,75,76,78,81,82],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:78,PATH:"m -343.0134,-169.61161 -4.72469,3.59078 -8.31548,-5.48066 -2.83483,-5.10268 -7.37052,-2.07886 -6.42559,5.29166 -3.77976,-5.48065 -6.23663,8.50446 3.96875,9.63839 6.99257,1.7009 2.83483,6.99256 -4.91369,4.34672 -3.4018,10.01637 -7.18153,3.40179 2.64583,3.96875 6.2366,6.04762 7.9375,-5.85863 5.66965,2.07886 6.80355,-0.56696 2.64584,4.53571 13.22916,-8.31547 2.26788,-10.77232 -3.21281,-2.83482 7.37055,-3.40179 v -6.04762 l 4.72469,-5.48065 -3.96875,-6.61459 -7.74851,2.45685 z",LAND:30,FOREST:60,MOUNTAINS:50,CENTER:{x:-357,y:-147},NEIGHBOURS:[-1,76,77,79,81],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:79,PATH:"m -395.17409,-137.48363 -8.50448,-4.34673 -3.40177,-6.04762 2.83482,-8.88244 -6.42562,-4.7247 0.18899,-9.63839 5.29167,-5.48066 -3.77976,-6.04761 7.18156,-2.64584 5.48066,2.45685 7.37052,-2.64584 6.04761,6.23661 4.72472,-6.04762 7.9375,-3.2128 7.18153,4.34673 4.15774,7.55952 -7.37052,-2.07886 -6.42559,5.29166 -3.77976,-5.48065 -6.23663,8.50446 3.96875,9.63839 6.99257,1.7009 2.83483,6.99256 -4.91369,4.34672 -3.4018,10.01637 -5.29166,-2.83482 -6.04761,-1.32292 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{x:-394,y:-160},NEIGHBOURS:[-1,78,80,81],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:80,PATH:"m -408.97024,-182.65178 -6.42559,-3.77976 0.18899,-4.9137 -3.59076,-7.37053 -10.20538,2.45684 -2.45684,6.04762 -0.75594,9.07143 -9.44941,2.83482 -6.2366,7.18155 -1.7009,6.04762 3.96875,4.91369 -2.64583,8.31547 10.39434,2.26786 -2.64583,5.48066 7.37052,2.07887 5.48066,4.53571 6.99257,-0.18899 4.15774,5.85863 8.69344,-2.26785 8.12649,1.88988 4.53573,-5.29167 -8.50448,-4.34673 -3.40177,-6.04762 2.83482,-8.88244 -6.42562,-4.7247 0.18899,-9.63839 5.29167,-5.48066 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{x:-427,y:-161},NEIGHBOURS:[-1,79,81,105],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:81,PATH:"m -393.66219,-108.00149 -7.18155,-0.37797 -3.21281,-3.59078 -9.26042,-4.53571 0.94496,-5.66964 -1.88989,-4.72471 6.42559,-7.18154 8.12649,1.88988 4.53573,-5.29167 6.61458,-4.34673 6.04761,1.32292 5.29166,2.83482 -7.18153,3.40179 2.64583,3.96875 6.2366,6.04762 7.9375,-5.85863 5.66965,2.07886 6.80355,-0.56696 2.64584,4.53571 -1.32292,8.88245 -12.09522,2.26785 -9.26041,-4.34672 -3.02382,4.91369 -6.04763,3.96875 z",LAND:10,FOREST:60,MOUNTAINS:40,CENTER:{x:-395,y:-121},NEIGHBOURS:[77,78,79,80,82,105],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:82,PATH:"m -405.37947,-74.550592 -3.02379,-2.338731 5.33359,-4.84282 -1.64554,-6.324385 -5.19996,-0.290198 3.314,-5.734492 6.70236,-0.880091 1.7009,-6.803571 4.53572,-6.23661 9.44939,-0.37797 6.04763,-3.96875 3.02382,-4.91369 9.26041,4.34672 -5.85864,8.69345 9.44941,1.51191 6.42559,6.047618 -3.77976,9.260417 5.29167,6.803572 11.33927,-0.755954 7.18924,0.301421 3.34086,5.345393 -8.95352,2.004518 -3.87541,3.608139 2.10984,6.883386 -8.88243,6.992559 -1.7009,5.858632 -9.26042,1.13393 1.32292,-7.9375 -6.99254,-6.236607 -2.64583,-7.748514 -3.96875,-5.102677 -6.4256,4.535712 -8.69346,-4.346723 -8.29649,2.953056 z",LAND:30,FOREST:60,MOUNTAINS:50,CENTER:{x:-378,y:-89},NEIGHBOURS:[74,77,81,83,103,105],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:83,PATH:"m -393.47322,-45.635417 0.18899,-4.913689 -9.63837,-1.322916 -8.50448,-5.291667 0.37799,-6.803572 5.66962,-10.583333 6.63358,1.441152 8.29649,-2.953058 8.69346,4.346725 6.4256,-4.535712 3.96875,5.102677 2.64583,7.748514 6.99254,6.236607 -1.32292,7.9375 -3.96875,-5.669645 -7.37052,7.748513 6.42559,4.346726 -6.2366,1.322917 -11.15031,-9.638393 -2.64583,4.346726 z",LAND:10,FOREST:60,MOUNTAINS:0,CENTER:{x:-388,y:-61},NEIGHBOURS:[72,73,82,84,103],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:84,PATH:"m -411.42708,-57.163689 -4.91368,5.480653 1.32292,4.913691 -4.72472,6.425594 -8.50445,2.078871 -4.72472,6.614583 h -7.9375 l -8.12649,3.779761 -0.37796,-6.047618 -4.34673,-2.267858 -6.2366,10.205357 -0.75597,6.614583 3.4018,6.52009 7.74851,-2.078869 5.00819,-5.197173 7.55952,2.834821 8.59896,-1.984375 3.59076,5.953125 7.55952,8.3154764 4.15774,-3.5907736 6.23663,6.8035713 7.74851,1.88988097 3.40177,-4.34672617 -2.45684,-6.8035709 4.34673,-4.724703 -3.21281,-6.425595 -7.37052,-2.456845 5.29167,-4.157739 -0.189,-4.157736 4.15775,-2.834823 0.75594,-6.80357 -5.85862,-3.401787 3.77976,-1.511903 3.02379,1.889879 0.18899,-4.913689 -9.63837,-1.322916 z",LAND:20,FOREST:40,MOUNTAINS:0,CENTER:{x:-418,y:-28},NEIGHBOURS:[71,72,83,85,102,103],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:85,PATH:"m -480.40774,26.180059 -5.85861,-0.377977 -0.18899,-7.559523 5.57514,-3.212798 1.51191,-7.0870533 3.21278,-6.1421129 9.54392,0.188988 -1.51191,-7.9374999 6.04761,-1.8898809 4.72471,-5.008184 7.74851,-2.078869 5.00819,-5.197173 7.55952,2.834821 8.59896,-1.984375 3.59076,5.953125 7.55952,8.3154764 -5.48063,5.85863105 -10.20538,-4.72470225 -3.21278,-6.4255952 -5.85864,2.6458331 0.37798,6.0476191 6.2366,4.1577381 0.94493,7.3705354 -5.29166,5.1026783 -0.37796,5.858631 -2.45684,6.614585 6.42622,4.900192 -0.26725,8.285352 -5.97001,-5.815009 -7.55951,-2.078869 -9.26042,-2.834822 -8.69344,-0.755952 -9.07143,2.456844 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{x:-457,y:11},NEIGHBOURS:[70,71,84,87,98,99,102],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:86,PATH:"",LAND:0,FOREST:0,MOUNTAINS:0,CENTER:{x:0,y:0},NEIGHBOURS:[],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:87,PATH:"m -450.34914,100.02236 -1.60364,-7.750818 6.41448,-4.810855 -6.41448,-5.612657 7.2163,-7.483549 10.69078,-2.405425 -4.27633,-4.276312 5.07812,-9.621702 -11.22531,3.474503 -0.53454,-13.096206 8.55263,-7.750818 -5.97001,-5.815009 -7.55951,-2.078869 -1.32292,5.102678 1.7009,4.724701 -5.85864,5.480656 -7.9375,-7.9375 -7.37053,2.078869 -3.2128,4.157739 2.64583,4.346725 9.44941,4.157737 0.94493,8.315478 -6.42559,4.535713 -0.18899,5.669642 -1.90236,2.808288 -4.27633,1.870887 -1.46997,3.34087 -3.47451,2.138156 1.33636,8.018084 -3.87543,0.400902 0.13364,6.280838 7.48356,2.138154 3.34086,6.68174 -3.74176,1.87089 -1.47,2.93996 7.08266,-0.13363 2.80633,3.74177 5.74627,-0.93544 5.3454,-0.13364 -2.53907,2.93996 1.47,3.60814 6.94902,-3.60814 6.68173,-0.13363 4.40994,-4.40995 2.13815,-8.55262 6.41448,-6.949009 -11.22532,-2.672694 z",LAND:30,FOREST:50,MOUNTAINS:0,CENTER:{x:-459,y:82},NEIGHBOURS:[69,70,85,88,95,98],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:88,PATH:"m -437.52021,112.85129 -4.40994,4.40995 -6.68173,0.13363 -6.94902,3.60814 -1.47,-3.60814 2.53907,-2.93996 -5.3454,0.13364 -2.80633,3.74177 -7.34991,3.0736 2.13818,3.0736 -7.34992,4.00904 -7.08265,-3.34087 -2.40541,5.34539 -1.47,8.68626 2.40543,4.14268 2.80633,2.13816 -1.46997,7.75081 6.68173,-7.21627 6.68174,0.53453 5.34538,-9.35443 6.94901,1.87089 9.08717,-0.26727 12.05889,3.44231 -2.45684,-6.99256 6.2366,-6.99256 8.50447,0.37797 -0.18899,-9.07142 -4.72469,-4.91369 -2.53905,5.27857 z",LAND:30,FOREST:30,MOUNTAINS:0,CENTER:{x:-456,y:130},NEIGHBOURS:[68,69,87,89,95],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:89,PATH:"m -466.11804,206.6629 -12.02714,-5.61266 2.40543,-5.87993 -9.6217,-5.34539 -1.8709,-13.89802 3.20723,-9.6217 -7.75081,-6.41447 1.8709,-8.01809 7.48355,1.33635 6.68173,-7.21627 6.68174,0.53453 5.34538,-9.35443 6.94901,1.87089 9.08717,-0.26727 12.05889,3.44231 -3.40178,8.88244 -8.12649,6.99256 -16.06399,4.15774 3.77976,10.39434 11.52829,7.55952 -5.48066,5.48066 4.36962,7.07887 -0.53453,8.28536 -9.08717,4.81085 -1.60362,-4.00904 2.13816,-6.68174 -3.47449,-2.6727 -4.54358,8.55263 z",LAND:10,FOREST:30,MOUNTAINS:40,CENTER:{x:-474,y:170},NEIGHBOURS:[67,68,91,94,95],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:90,PATH:"m -463.97989,256.37503 -7.75081,4.81085 -12.64187,1.22944 -1.7907,-9.24753 -2.6326,-1.87088 -4.75739,0.66817 -3.47451,2.28516 -1.80407,4.07586 -5.5993,4.34313 -10.98477,-4.58367 -0.14701,-8.65954 -3.47448,-9.08716 3.74176,-8.8199 9.35442,-8.01808 9.08717,-3.20724 10.69078,8.01809 h 9.35445 l 11.49257,4.81085 -4.54358,9.08716 z",LAND:20,FOREST:60,MOUNTAINS:20,CENTER:{x:-493,y:237},NEIGHBOURS:[-1,66,67,91],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:91,PATH:"m -519.0374,240.33886 -8.80634,4.50042 -11.71726,-0.18899 -2.07889,-15.30803 2.45687,-8.88244 7.9375,-3.96875 7.9375,-0.94494 5.48063,-6.61459 5.10271,-4.53571 8.69344,0.75595 10.01635,2.83482 9.6384,-2.83482 1.32292,-4.34672 7.31382,-5.63475 -2.40543,5.87993 12.02714,5.61266 -9.35445,4.00904 2.93997,9.35443 -4.2763,8.28536 h -9.35445 l -10.69078,-8.01809 -9.08717,3.20724 -9.35442,8.01808 z",LAND:10,FOREST:50,MOUNTAINS:10,CENTER:{x:-509,y:216},NEIGHBOURS:[-1,67,89,90,92,94],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:92,PATH:"m -539.18302,220.45982 1.43674,-6.84792 -1.06907,-8.28535 -6.68174,1.33635 -10.42352,0.53454 -7.21627,-6.94901 -1.33636,-8.01809 9.6217,-4.27631 8.28535,-7.48355 9.35445,3.20724 8.81989,-5.07812 5.87994,-9.88898 7.75081,3.47451 5.34537,9.6217 2.67272,10.15624 6.41445,7.48355 6.31367,8.53998 -10.01635,-2.83482 -8.69344,-0.75595 -5.10271,4.53571 -5.48063,6.61459 -7.9375,0.94494 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{x:-529,y:196},NEIGHBOURS:[-1,91,93,94],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:93,PATH:"m -517.96833,134.23285 -3.20725,-6.949 -12.02711,-4.00904 -7.75084,3.74177 -3.74176,-7.48355 -8.81989,-2.13816 -5.61266,11.49259 8.01809,8.28536 -0.80182,8.28536 -7.21627,-4.00905 -5.07812,-6.68173 -8.81991,-2.40543 -2.93995,3.74177 2.40541,9.88898 -4.2763,13.0962 5.34538,8.28536 -5.07813,11.49259 -10.15621,3.74177 4.2763,5.34539 6.1472,9.88897 6.68173,-4.27631 7.48356,6.68174 -1.33636,-8.01809 9.6217,-4.27631 8.28535,-7.48355 9.35445,3.20724 8.81989,-5.07812 5.87994,-9.88898 -0.80182,-7.75081 -4.2763,-8.01809 6.14719,-6.949 z",LAND:20,FOREST:60,MOUNTAINS:20,CENTER:{x:-550,y:161},NEIGHBOURS:[-1,92,94,95,96],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:94,PATH:"m -522.51191,168.71062 -0.80182,-7.75081 -4.2763,-8.01809 6.14719,-6.949 3.47451,-11.75987 7.75081,-1.33634 2.13815,8.55262 6.41448,5.07812 1.60361,10.15625 10.15625,-4.81086 -1.8709,8.01809 7.75081,6.41447 -3.20723,9.6217 1.8709,13.89802 9.6217,5.34539 -7.31382,5.63475 -1.32292,4.34672 -9.6384,2.83482 -6.31367,-8.53998 -6.41445,-7.48355 -2.67272,-10.15624 -5.34537,-9.6217 z",LAND:10,FOREST:20,MOUNTAINS:40,CENTER:{x:-504,y:168},NEIGHBOURS:[89,91,92,93,95],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:95,PATH:"m -521.17558,127.28385 3.34819,-4.90885 10.20538,-0.56697 2.83483,-7.9375 -1.70091,-6.2366 6.4256,0.37797 0.56697,2.83483 6.2366,-2.64584 1.32292,-5.85863 8.31548,0.37798 1.88987,7.18154 7.72816,-0.92589 -1.47,2.93996 7.08266,-0.13363 2.80633,3.74177 5.74627,-0.93544 -2.80633,3.74177 -7.34991,3.0736 2.13818,3.0736 -7.34992,4.00904 -7.08265,-3.34087 -2.40541,5.34539 -1.47,8.68626 2.40543,4.14268 2.80633,2.13816 -1.46997,7.75081 -7.48355,-1.33635 -10.15625,4.81086 -1.60361,-10.15625 -6.41448,-5.07812 -2.13815,-8.55262 -7.75081,1.33634 z",LAND:30,FOREST:40,MOUNTAINS:0,CENTER:{x:-495,y:127},NEIGHBOURS:[87,88,89,93,94,96,98],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:96,PATH:"m -544.69529,119.53303 3.43339,-6.04047 -5.29167,-6.61458 -2.07886,-9.638399 -6.61458,-3.779761 3.59077,-3.401785 4.15774,2.645833 7.55951,-1.322916 h 8.31549 l 6.2366,-4.535715 7.9375,5.291666 3.59076,-3.590774 1.7009,-3.96875 6.99257,3.023809 8.12649,-0.566962 -0.75596,7.181546 5.10267,2.834822 0.75597,5.291666 -1.32292,5.85863 -6.2366,2.64584 -0.56697,-2.83483 -6.4256,-0.37797 1.70091,6.2366 -2.83483,7.9375 -10.20538,0.56697 -3.34819,4.90885 -12.02711,-4.00904 -7.75084,3.74177 z",LAND:20,FOREST:30,MOUNTAINS:10,CENTER:{x:-523,y:107},NEIGHBOURS:[-1,93,95,97,98],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:97,PATH:"m -539.93899,91.380952 -2.26784,-5.669643 -4.26125,-5.654448 1.71228,-5.871928 -2.26978,-6.225209 -0.18896,-10.919524 8.65927,-2.642033 5.31982,5.061077 3.69081,-2.096149 0.93544,-3.320824 -0.36278,-5.33464 4.5566,-4.339129 7.15497,5.813044 0.37798,8.504465 8.69344,2.83482 7.18156,10.583331 -8.12649,5.480658 -3.02382,6.992557 -1.7009,3.96875 -3.59076,3.590774 -7.9375,-5.291664 -6.2366,4.535715 z",LAND:20,FOREST:20,MOUNTAINS:20,CENTER:{x:-523,y:74},NEIGHBOURS:[-1,96,98],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:98,PATH:"m -512.15774,84.577377 3.02382,-6.992557 8.12649,-5.480656 -7.18156,-10.583333 -8.69344,-2.83482 -0.37798,-8.504465 7.18156,-9.827381 -0.94496,-8.126487 10.39434,-2.078868 12.09524,5.102677 8.12649,-9.071428 3.4018,5.480654 9.07143,-2.456844 8.69344,0.755952 9.26042,2.834822 -1.32292,5.102678 1.7009,4.724701 -5.85864,5.480656 -7.9375,-7.9375 -7.37053,2.078869 -3.2128,4.157739 2.64583,4.346725 9.44941,4.157737 0.94493,8.315478 -6.42559,4.535713 -0.18899,5.669642 -1.90236,2.808288 -4.27633,1.870887 -1.46997,3.34087 -3.47451,2.138156 1.33636,8.018084 -3.87543,0.400902 0.13364,6.280838 7.48356,2.138154 3.34086,6.68174 -3.74176,1.87089 -7.72816,0.92589 -1.88987,-7.18154 -8.31548,-0.37798 -0.75597,-5.291668 -5.10267,-2.83482 0.75596,-7.181546 -8.12649,0.56696 z",LAND:30,FOREST:60,MOUNTAINS:30,CENTER:{x:-488,y:62},NEIGHBOURS:[-1,85,87,95,96,97,99],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:99,PATH:"m -500.62947,30.14881 -3.02379,-4.724703 -9.07142,0.377976 -10.01639,-1.700893 -5.48066,-5.480655 -0.18899,-8.315476 3.59079,-5.6696427 -7.18156,-2.6458333 -6.80357,1.7008928 -0.94493,-6.0476189 7.37052,-4.7247022 3.21281,-8.3154767 7.9375,3.401786 7.37052,-3.023809 12.47323,0.94494 3.40177,6.4255951 13.79615,-4.9136901 3.59076,7.3705355 4.44122,6.9925593 -3.21278,6.1421129 -1.51191,7.0870533 -5.57514,3.212798 0.18899,7.559523 5.85861,0.377977 -8.12649,9.071428 z",LAND:30,FOREST:50,MOUNTAINS:0,CENTER:{x:-507,y:8},NEIGHBOURS:[-1,85,98,100,102],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:100,PATH:"m -497.03868,-59.431546 -8.31548,0.944941 -6.04761,4.724701 -5.1027,-4.157739 -0.94493,-4.913691 -7.37053,1.13393 -7.55954,5.102678 -5.48063,-3.96875 -4.91371,1.700892 v 3.779763 l 4.34673,2.456845 2.26785,5.858631 4.15774,3.401785 5.66966,-0.377976 3.40177,2.645834 -0.18899,2.078868 -3.40178,0.188989 -6.42559,-0.944941 -7.55951,2.456847 -8.1265,-0.377979 -3.77975,6.047621 3.40177,4.535713 5.48066,2.267858 4.5357,1.889881 -0.18897,6.992559 3.96875,3.96875 6.04761,-3.401786 7.9375,3.401786 7.37052,-3.023809 12.47323,0.94494 3.77976,-3.023809 -6.04761,-6.425596 -1.32292,-8.504462 6.04761,-4.346729 1.13393,-7.9375 -2.26785,-6.047618 z",LAND:20,FOREST:50,MOUNTAINS:0,CENTER:{x:-517,y:-32},NEIGHBOURS:[-1,99,101,102],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:101,PATH:"m -478.13989,-71.526785 -4.91368,-2.078869 -2.26785,-4.157739 -5.48066,-3.401785 -8.50447,1.700893 -3.96875,-5.480656 -6.04761,1.700895 -5.66965,-1.700895 -1.88987,-5.102677 -5.10267,-1.511906 -12.09524,3.590774 0.37795,4.535715 5.10271,2.456844 1.70087,5.858631 -3.40177,3.212799 2.45684,4.913691 3.02381,5.291666 7.37053,-1.13393 0.94493,4.913691 5.1027,4.157739 6.04761,-4.724701 8.31548,-0.944941 5.85862,-5.858632 7.37055,-1.133927 z",LAND:20,FOREST:20,MOUNTAINS:0,CENTER:{x:-509,y:-69},NEIGHBOURS:[-1,100,102,104],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:102,PATH:"m -457.35118,-12.845982 -3.4018,-6.52009 0.75597,-6.614583 6.2366,-10.205357 -1.51191,-6.614583 4.91368,-3.212798 0.189,-7.559524 -3.40178,-4.157737 -2.26785,-8.504465 6.2366,-4.157736 -0.18899,-3.968753 -6.04761,0.188989 -5.48066,3.212799 -5.66965,1.133927 -3.40177,-5.669642 -6.23663,0.377975 -1.51191,3.590775 -5.66962,5.10268 -7.37055,1.133927 -5.85862,5.858632 -3.02381,9.071427 2.26785,6.047618 -1.13393,7.9375 -6.04761,4.346729 1.32292,8.504462 6.04761,6.425596 -3.77976,3.023809 3.40177,6.4255951 13.79615,-4.9136901 3.59076,7.3705355 4.44122,6.9925593 9.54392,0.188988 -1.51191,-7.9374999 6.04761,-1.8898809 z",LAND:50,FOREST:60,MOUNTAINS:0,CENTER:{x:-480,y:-37},NEIGHBOURS:[84,85,99,100,101,103,104],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:103,PATH:"m -409.91517,-88.346726 -6.04763,-1.700892 -5.29167,4.346725 -1.32292,5.480656 -5.66962,2.078868 -6.80358,3.401785 -0.56697,5.669645 -3.96875,8.126487 -6.61458,1.322916 -3.21279,-4.157736 -6.42559,-2.456847 2.26785,8.504465 3.40178,4.157737 -0.189,7.559524 -4.91368,3.212798 1.51191,6.614583 4.34673,2.267858 0.37796,6.047618 8.12649,-3.779761 h 7.9375 l 4.72472,-6.614583 8.50445,-2.078871 4.72472,-6.425594 -1.32292,-4.913691 4.91368,-5.480653 0.37799,-6.803572 5.66962,-10.583331 -3.02379,-2.338731 5.3336,-4.84282 -1.64555,-6.324383 z",LAND:10,FOREST:30,MOUNTAINS:0,CENTER:{x:-429,y:-54},NEIGHBOURS:[82,83,84,102,104,105],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:104,PATH:"m -485.32142,-77.763393 2.07886,-5.480653 6.04763,-1.889882 6.42559,-3.023809 2.07886,-3.779763 4.91371,-4.157737 5.85862,-0.188989 5.66965,-0.755952 6.61458,4.157737 5.29167,3.590774 5.48066,-3.401785 7.18153,1.700893 -0.75594,-5.102678 -2.64584,-3.023809 3.96875,-0.944944 4.5357,2.645837 0.56698,3.77976 6.99257,-0.377975 -0.94496,3.968752 -5.29167,4.346723 -1.32292,5.480656 -5.66962,2.078868 -6.80358,3.401785 -0.56697,5.669645 -3.96875,8.126487 -6.61458,1.322916 -3.21279,-4.157736 -6.42559,-2.456847 6.2366,-4.157736 -0.18899,-3.968753 -6.04761,0.188989 -5.48066,3.212799 -5.66965,1.133927 -3.40177,-5.669642 -6.23663,0.377975 -1.51191,3.590775 -4.91368,-2.078869 z",LAND:20,FOREST:30,MOUNTAINS:30,CENTER:{x:-449,y:-82},NEIGHBOURS:[-1,101,102,103,105],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:105,PATH:"m -452.2485,-97.040178 2.26785,-6.236602 -2.64584,-6.04762 6.04764,-4.34673 0.37796,-4.7247 -4.91369,-7.55953 3.21281,-6.04762 -2.45687,-5.29166 0.94496,-6.23661 8.88244,-0.56696 7.37052,2.07887 5.48066,4.53571 6.99257,-0.18899 4.15774,5.85863 8.69344,-2.26785 -6.42559,7.18154 1.88989,4.72471 -0.94496,5.66964 9.26042,4.53571 3.21281,3.59078 7.18155,0.37797 -4.53572,6.23661 -1.7009,6.803573 -6.70235,0.880089 -3.31401,5.734492 -6.04763,-1.70089 0.94496,-3.96875 -6.99257,0.377973 -0.56698,-3.779758 -4.5357,-2.645839 -3.96875,0.944944 2.64584,3.023809 0.75594,5.10268 -7.18153,-1.700895 -5.48066,3.401785 z",LAND:30,FOREST:60,MOUNTAINS:0,CENTER:{x:-429,y:-115},NEIGHBOURS:[-1,80,81,82,103,104],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:106,PATH:"m -46.680059,119.91815 -5.669642,-7.37053 4.157737,-8.50447 9.449405,-5.858628 -1.889881,-10.77232 2.267857,-12.662204 7.181548,-7.748511 13.418154,-7.181548 0.377976,-9.449403 6.425596,-6.236608 6.8035709,-3.212798 -0.7559524,-7.9375 5.66964288,-3.401785 6.05942052,5.093113 0.6681737,14.03165 3.3408694,3.608139 2.004521,2.939965 -3.7417733,6.414468 -1.0690783,7.349911 -10.9580502,0.935445 -10.2898762,5.746295 -0.133635,15.234359 4.2763123,4.276315 -9.0871633,4.810855 -7.90603,9.12347 -10.016368,1.7009 -0.755952,7.37053 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{x:-20,y:75},NEIGHBOURS:[6,7,18,22,23,24,25],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:107,PATH:"m -231.98995,36.679481 8.55263,9.621702 1.06908,19.243405 17.35916,-9.795428 17.53764,3.566015 15.30329,-12.724403 3.77976,-9.071427 6.61458,-8.693452 -2.07887,-9.071429 -16.28698,1.423383 -20.31248,-8.552624 -22.98518,8.552624 z",LAND:20,FOREST:50,MOUNTAINS:0,CENTER:{x:-200,y:36},NEIGHBOURS:[29,37,38,46,47,48],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:108,PATH:"m 175.94791,-35.43006 4.49792,-4.781399 9.12813,-5.423958 -3.3073,-6.746875 -6.35,-0.132292 -6.61458,-3.307292 -1.45521,-5.688541 5.95313,-5.291667 -0.66146,-4.630208 -5.15938,-6.35 -1.5875,4.7625 0.66146,3.96875 -3.57187,4.233333 -6.21771,-0.132292 -9.12813,-3.968749 0.66146,-7.672917 -4.63021,-5.688542 -11.64166,-4.365625 -4.49792,2.778125 -10.31875,3.836459 -5.29166,-1.719792 -6.61459,3.2317 -1.88988,11.906247 13.47485,20.883184 17.78378,12.586608 -1.96547,11.320386 14.93005,-5.102678 3.2128,5.291667 15.30804,-5.858632 z",LAND:20,FOREST:60,MOUNTAINS:0,CENTER:{x:150,y:-48},NEIGHBOURS:[-1,16,17,20],WEALTH:0,HARBOUR:!1,TROOPS:[]},{ID:109,PATH:"m -155.34821,133.33631 -3.02381,14.74107 5.09295,10.0761 11.22532,-0.53454 2.93996,5.21176 7.76707,-1.90213 10.01636,-8.12649 16.63096,-3.40178 -1.13393,-8.12649 4.34672,1.13393 2.834826,4.53571 3.96875,2.83482 3.590774,-6.61458 -0.755954,-7.9375 -10.016366,-6.80357 -2.26786,-8.50447 -9.54722,7.96695 -7.27652,2.27925 -4.4037,-4.96972 -0.28353,-14.18749 -10.61059,6.01356 -1.6838,7.64391 -6.21548,5.63935 z",LAND:20,FOREST:30,MOUNTAINS:0,CENTER:{x:-129,y:140},NEIGHBOURS:[24,26,27,28,39],WEALTH:0,HARBOUR:!1,TROOPS:[]}],COUNTRIES:[{COUNTRY:ku.PLAYER,NAME:"Player nation",DIPLOMACY:0,POTENTIAL:0,COLOUR:"darkgreen",FOCUS:xu.NONE,REGIONS:[0],CAPITAL:0},{COUNTRY:ku.NEUTRAL,NAME:"none",DIPLOMACY:0,COLOUR:"gray",FOCUS:xu.NONE,REGIONS:[1,2,3,4,5,7,13,14,15,16,17,18,22,27,30,31,37,38,39,40,41,42,43,44,45,47,48,49,50,51,53,54,55,56,58,59,63,64,69,73,74,82,83,87,88,93,95,96,97,98,99,100,101,102,103,104,107,108],CAPITAL:-1},{COUNTRY:ku.CLEADAL,NAME:"Cleadal",DIPLOMACY:0,COLOUR:"darkred",FOCUS:xu.ECONOMY,REGIONS:[6,23,24,25,26,28,29,106,109],CAPITAL:24},{COUNTRY:ku.GRIERIA,NAME:"Grieria",DIPLOMACY:0,COLOUR:"#bcaa4f",FOCUS:xu.PEACE,REGIONS:[8,9,10,11,12],CAPITAL:10},{COUNTRY:ku.BOTHIL,NAME:"Bothil",DIPLOMACY:0,COLOUR:"#286fbc",FOCUS:xu.DEFENSE,REGIONS:[19,20,21,32,33,34,35,36,52],CAPITAL:34},{COUNTRY:ku.DOSHOR,NAME:"Doshor",DIPLOMACY:0,COLOUR:"#a163bc",FOCUS:xu.OFFENSE,REGIONS:[57,75,76,77,78,79,80,81,105],CAPITAL:80},{COUNTRY:ku.CREURUS,NAME:"Creurus",DIPLOMACY:0,COLOUR:"#bc6935",FOCUS:xu.OFFENSE,REGIONS:[65,66,67,68,89,90,91,92,94],CAPITAL:90},{COUNTRY:ku.ESTRAILA,NAME:"Estraila",DIPLOMACY:0,COLOUR:"#49a37e",FOCUS:xu.ECONOMY,REGIONS:[46,60,61,62,70,71,72,84,85],CAPITAL:71}],SEA_AREAS:[{ID:-1,CENTER:{x:226,y:203},R:15,NEIGHBOURS:[-2,-46,-55,0,9]},{ID:-2,CENTER:{x:273,y:172},R:15,NEIGHBOURS:[-1,-3,-55,-57,-58]},{ID:-3,CENTER:{x:275,y:110},R:15,NEIGHBOURS:[-2,-4,-58,13]},{ID:-4,CENTER:{x:286,y:66},R:15,NEIGHBOURS:[-3,-5,-58,-59,14,13]},{ID:-5,CENTER:{x:280,y:9},R:15,NEIGHBOURS:[-4,-6,-59,14]},{ID:-6,CENTER:{x:256,y:-49},R:15,NEIGHBOURS:[-5,-7,-59,-60,16]},{ID:-7,CENTER:{x:210,y:-89},R:15,NEIGHBOURS:[-6,-8,-60,16]},{ID:-8,CENTER:{x:149,y:-118},R:15,NEIGHBOURS:[-7,-9,-60,-61,20,108]},{ID:-9,CENTER:{x:94,y:-137},R:15,NEIGHBOURS:[-8,-10,-61,20]},{ID:-10,CENTER:{x:33,y:-161},R:15,NEIGHBOURS:[-9,-11,-61,-62,33]},{ID:-11,CENTER:{x:-17,y:-182},R:15,NEIGHBOURS:[-10,-12,-62,35,34]},{ID:-12,CENTER:{x:-76,y:-176},R:15,NEIGHBOURS:[-11,-13,-62,-63,54,53,35,34]},{ID:-13,CENTER:{x:-131,y:-187},R:15,NEIGHBOURS:[-12,-14,-63,56,54]},{ID:-14,CENTER:{x:-185,y:-189},R:15,NEIGHBOURS:[-13,-15,-63,56,54]},{ID:-15,CENTER:{x:-224,y:-170},R:15,NEIGHBOURS:[-14,-16,57,56,54]},{ID:-16,CENTER:{x:-262,y:-190},R:15,NEIGHBOURS:[-15,-17,-64,76]},{ID:-17,CENTER:{x:-318,y:-196},R:15,NEIGHBOURS:[-16,-18,-64,78,76]},{ID:-18,CENTER:{x:-367,y:-209},R:15,NEIGHBOURS:[-17,-19,-64,79,78]},{ID:-19,CENTER:{x:-417,y:-214},R:15,NEIGHBOURS:[-18,-20,-65,80,79]},{ID:-20,CENTER:{x:-460,y:-202},R:15,NEIGHBOURS:[-19,-21,-65,-66,80]},{ID:-21,CENTER:{x:-469,y:-161},R:15,NEIGHBOURS:[-20,-22,-66,80]},{ID:-22,CENTER:{x:-471,y:-121},R:15,NEIGHBOURS:[-21,-23,104,105,80]},{ID:-23,CENTER:{x:-507,y:-105},R:15,NEIGHBOURS:[-22,-24,-66,104]},{ID:-24,CENTER:{x:-544,y:-102},R:15,NEIGHBOURS:[-23,-25,-66,-67]},{ID:-25,CENTER:{x:-563,y:-63},R:15,NEIGHBOURS:[-24,-26,-67,101]},{ID:-26,CENTER:{x:-570,y:-15},R:15,NEIGHBOURS:[-25,-27,-67,100]},{ID:-27,CENTER:{x:-553,y:20},R:15,NEIGHBOURS:[-26,-28,97,98,99]},{ID:-28,CENTER:{x:-563,y:60},R:15,NEIGHBOURS:[-27,-29,-68,97,98]},{ID:-29,CENTER:{x:-582,y:105},R:15,NEIGHBOURS:[-28,-30,-68,96]},{ID:-30,CENTER:{x:-597,y:154},R:15,NEIGHBOURS:[-29,-31,-69,93,96]},{ID:-31,CENTER:{x:-599,y:204},R:15,NEIGHBOURS:[-30,-32,-69,91]},{ID:-32,CENTER:{x:-570,y:242},R:15,NEIGHBOURS:[-31,-33,-70,91,92]},{ID:-33,CENTER:{x:-527,y:280},R:15,NEIGHBOURS:[-32,-34,-70,66,90,91]},{ID:-34,CENTER:{x:-476,y:294},R:15,NEIGHBOURS:[-33,-35,-71,66,90]},{ID:-35,CENTER:{x:-424,y:296},R:15,NEIGHBOURS:[-34,-36,-71,-72]},{ID:-36,CENTER:{x:-395,y:259},R:15,NEIGHBOURS:[-35,-37,42,65]},{ID:-37,CENTER:{x:-338,y:259},R:15,NEIGHBOURS:[-36,-38,-72,41,42]},{ID:-38,CENTER:{x:-279,y:261},R:15,NEIGHBOURS:[-37,-39,-72,40,41]},{ID:-39,CENTER:{x:-234,y:265},R:15,NEIGHBOURS:[-38,-40,-73]},{ID:-40,CENTER:{x:-174,y:250},R:15,NEIGHBOURS:[-39,-41,-73,27]},{ID:-41,CENTER:{x:-126,y:232},R:15,NEIGHBOURS:[-40,-42,26]},{ID:-42,CENTER:{x:-67,y:224},R:15,NEIGHBOURS:[-41,-43,-74,25,26]},{ID:-43,CENTER:{x:-10,y:223},R:15,NEIGHBOURS:[-42,-44,-74]},{ID:-44,CENTER:{x:48,y:233},R:15,NEIGHBOURS:[-43,-45,-47,2,5]},{ID:-45,CENTER:{x:103,y:229},R:15,NEIGHBOURS:[-44,-46,-47,2,5]},{ID:-46,CENTER:{x:167,y:215},R:15,NEIGHBOURS:[-45,-1]},{ID:-47,CENTER:{x:75,y:280},R:15,NEIGHBOURS:[-44,-45,-48,-74,8]},{ID:-48,CENTER:{x:76,y:338},R:15,NEIGHBOURS:[-47,-49,-74,-75]},{ID:-49,CENTER:{x:124,y:381},R:15,NEIGHBOURS:[-48,-50,-75,10]},{ID:-50,CENTER:{x:192,y:367},R:15,NEIGHBOURS:[-49,-51,-56,-76,11]},{ID:-51,CENTER:{x:250,y:381},R:15,NEIGHBOURS:[-50,-52,-56,-76]},{ID:-52,CENTER:{x:316,y:384},R:15,NEIGHBOURS:[-51,-53,-77]},{ID:-53,CENTER:{x:330,y:331},R:15,NEIGHBOURS:[-52,-54,-78]},{ID:-54,CENTER:{x:287,y:293},R:15,NEIGHBOURS:[-53,-55,-56,-57,12]},{ID:-55,CENTER:{x:243,y:253},R:15,NEIGHBOURS:[-54,-1,-2,-56,-57,9]},{ID:-56,CENTER:{x:237,y:334},R:15,NEIGHBOURS:[-50,-54,-55,-51,11]},{ID:-57,CENTER:{x:350,y:229},R:58,NEIGHBOURS:[-78,-58,-79,-54,-55,-2]},{ID:-58,CENTER:{x:366,y:97},R:58,NEIGHBOURS:[-57,-58,-59,-79,-80,-2,-3,-4]},{ID:-59,CENTER:{x:361,y:-30},R:58,NEIGHBOURS:[-58,-60,-80,-4,-5,-6]},{ID:-60,CENTER:{x:271,y:-144},R:58,NEIGHBOURS:[-59,-61,-81,-6,-7,-8]},{ID:-61,CENTER:{x:147,y:-212},R:58,NEIGHBOURS:[-60,-62,-81,-82,-8,-9,-10]},{ID:-62,CENTER:{x:4,y:-256},R:58,NEIGHBOURS:[-61,-63,-82,-83,-10,-11,-12]},{ID:-63,CENTER:{x:-146,y:-265},R:58,NEIGHBOURS:[-62,-64,-83,-12,-13,-14]},{ID:-64,CENTER:{x:-289,y:-271},R:58,NEIGHBOURS:[-63,-65,-83,-84,-16,-17,-18]},{ID:-65,CENTER:{x:-433,y:-291},R:58,NEIGHBOURS:[-64,-66,-84,-85,-19,-20]},{ID:-66,CENTER:{x:-556,y:-189},R:58,NEIGHBOURS:[-65,-67,-85,-86,-20,-21,-23,-24]},{ID:-67,CENTER:{x:-648,y:-80},R:58,NEIGHBOURS:[-66,-68,-86,-87,-24,-25,-26]},{ID:-68,CENTER:{x:-663,y:58},R:58,NEIGHBOURS:[-67,-69,-87,-28,-29]},{ID:-69,CENTER:{x:-688,y:195},R:58,NEIGHBOURS:[-68,-70,-87,-88,-30,-31]},{ID:-70,CENTER:{x:-609,y:320},R:58,NEIGHBOURS:[-69,-71,-88,-89,-32,-33]},{ID:-71,CENTER:{x:-476,y:370},R:58,NEIGHBOURS:[-70,-72,-89,-90,-35,-34]},{ID:-72,CENTER:{x:-336,y:341},R:58,NEIGHBOURS:[-71,-73,-90,-91,-35,-37,-38]},{ID:-73,CENTER:{x:-185,y:332},R:58,NEIGHBOURS:[-72,-74,-90,-91,-39,-40]},{ID:-74,CENTER:{x:-37,y:307},R:58,NEIGHBOURS:[-73,-75,-91,-42,-43,-47,-48]},{ID:-75,CENTER:{x:52,y:423},R:58,NEIGHBOURS:[-74,-76,-91,-92,-48,-49]},{ID:-76,CENTER:{x:202,y:456},R:58,NEIGHBOURS:[-75,-77,-92,-50,-51]},{ID:-77,CENTER:{x:348,y:455},R:58,NEIGHBOURS:[-76,-78,-92,-93,-94,-52]},{ID:-78,CENTER:{x:421,y:339},R:58,NEIGHBOURS:[-77,-79,-94,-53,-57]},{ID:-79,CENTER:{x:575,y:187},R:120,NEIGHBOURS:[-80,-94,-57,-58,-78,-9999]},{ID:-80,CENTER:{x:552,y:-76},R:120,NEIGHBOURS:[-79,-81,-58,-59]},{ID:-81,CENTER:{x:401,y:-296},R:120,NEIGHBOURS:[-80,-82,-60,-61]},{ID:-82,CENTER:{x:165,y:-412},R:120,NEIGHBOURS:[-81,-83,-61,-62]},{ID:-83,CENTER:{x:-97,y:-460},R:120,NEIGHBOURS:[-82,-84,-62,-63,-64]},{ID:-84,CENTER:{x:-358,y:-479},R:120,NEIGHBOURS:[-83,-85,-64,-65]},{ID:-85,CENTER:{x:-614,y:-397},R:120,NEIGHBOURS:[-84,-86,-65,-66]},{ID:-86,CENTER:{x:-809,y:-216},R:120,NEIGHBOURS:[-85,-87,-66,-67]},{ID:-87,CENTER:{x:-873,y:47},R:120,NEIGHBOURS:[-86,-88,-67,-68,-69]},{ID:-88,CENTER:{x:-863,y:312},R:120,NEIGHBOURS:[-87,-89,-69,-70]},{ID:-89,CENTER:{x:-654,y:515},R:120,NEIGHBOURS:[-88,-90,-70,-71]},{ID:-90,CENTER:{x:-379,y:552},R:120,NEIGHBOURS:[-89,-91,-71,-72,-73]},{ID:-91,CENTER:{x:-111,y:534},R:120,NEIGHBOURS:[-90,-92,-72,-73,-74,-75]},{ID:-92,CENTER:{x:150,y:643},R:120,NEIGHBOURS:[-91,-93,-75,-76,-77]},{ID:-93,CENTER:{x:420,y:654},R:120,NEIGHBOURS:[-92,-94,-77]},{ID:-94,CENTER:{x:598,y:456},R:120,NEIGHBOURS:[-93,-79,-77,-78]},{ID:0,CENTER:{x:203,y:161},R:0,NEIGHBOURS:[-1]},{ID:2,CENTER:{x:112,y:169},R:0,NEIGHBOURS:[-45,-44]},{ID:5,CENTER:{x:31,y:202},R:0,NEIGHBOURS:[-44,-45]},{ID:25,CENTER:{x:-48,y:168},R:0,NEIGHBOURS:[-42]},{ID:26,CENTER:{x:-98,y:201},R:0,NEIGHBOURS:[-41,-42]},{ID:27,CENTER:{x:-156,y:193},R:0,NEIGHBOURS:[-40]},{ID:40,CENTER:{x:-233,y:211},R:0,NEIGHBOURS:[-38]},{ID:41,CENTER:{x:-305,y:238},R:0,NEIGHBOURS:[-38,-37]},{ID:42,CENTER:{x:-350,y:243},R:0,NEIGHBOURS:[-37,-36]},{ID:65,CENTER:{x:-388,y:229},R:0,NEIGHBOURS:[-36]},{ID:66,CENTER:{x:-445,y:260},R:0,NEIGHBOURS:[-34,-33]},{ID:90,CENTER:{x:-489,y:252},R:0,NEIGHBOURS:[-34,-33]},{ID:91,CENTER:{x:-540,y:245},R:0,NEIGHBOURS:[-33,-32,-31]},{ID:92,CENTER:{x:-539,y:206},R:0,NEIGHBOURS:[-32]},{ID:93,CENTER:{x:-574,y:167},R:0,NEIGHBOURS:[-30]},{ID:96,CENTER:{x:-549,y:98},R:0,NEIGHBOURS:[-29,-30]},{ID:97,CENTER:{x:-530,y:48},R:0,NEIGHBOURS:[-28,-27]},{ID:98,CENTER:{x:-511,y:36},R:0,NEIGHBOURS:[-28,-27]},{ID:99,CENTER:{x:-526,y:5},R:0,NEIGHBOURS:[-27]},{ID:100,CENTER:{x:-540,y:-22},R:0,NEIGHBOURS:[-26]},{ID:101,CENTER:{x:-528,y:-76},R:0,NEIGHBOURS:[-25]},{ID:104,CENTER:{x:-472,y:-89},R:0,NEIGHBOURS:[-23,-22]},{ID:105,CENTER:{x:-447,y:-115},R:0,NEIGHBOURS:[-22]},{ID:80,CENTER:{x:-449,y:-171},R:0,NEIGHBOURS:[-21,-20,-19,-22]},{ID:79,CENTER:{x:-396,y:-184},R:0,NEIGHBOURS:[-19,-18]},{ID:78,CENTER:{x:-355,y:-172},R:0,NEIGHBOURS:[-17,-18]},{ID:76,CENTER:{x:-270,y:-169},R:0,NEIGHBOURS:[-16,-17]},{ID:57,CENTER:{x:-232,y:-140},R:0,NEIGHBOURS:[-15]},{ID:56,CENTER:{x:-195,y:-160},R:0,NEIGHBOURS:[-15,-14,-13]},{ID:54,CENTER:{x:-149,y:-161},R:0,NEIGHBOURS:[-15,-14,-13,-12]},{ID:53,CENTER:{x:-112,y:-152},R:0,NEIGHBOURS:[-12]},{ID:35,CENTER:{x:-80,y:-143},R:0,NEIGHBOURS:[-12,-11]},{ID:34,CENTER:{x:-48,y:-146},R:0,NEIGHBOURS:[-12,-11]},{ID:33,CENTER:{x:17,y:-125},R:0,NEIGHBOURS:[-10]},{ID:20,CENTER:{x:86,y:-96},R:0,NEIGHBOURS:[-9,-8]},{ID:108,CENTER:{x:167,y:-66},R:0,NEIGHBOURS:[-8]},{ID:16,CENTER:{x:221,y:-35},R:0,NEIGHBOURS:[-7,-6]},{ID:14,CENTER:{x:256,y:44},R:0,NEIGHBOURS:[-5,-4]},{ID:13,CENTER:{x:222,y:75},R:0,NEIGHBOURS:[-4,-3]},{ID:8,CENTER:{x:115,y:281},R:0,NEIGHBOURS:[-47]},{ID:9,CENTER:{x:203,y:247},R:0,NEIGHBOURS:[-1,-55]},{ID:10,CENTER:{x:128,y:348},R:0,NEIGHBOURS:[-49]},{ID:11,CENTER:{x:209,y:326},R:0,NEIGHBOURS:[-50,-56]},{ID:12,CENTER:{x:287,y:323},R:0,NEIGHBOURS:[-54]},{ID:-9999,CENTER:{x:1204,y:149},R:0,NEIGHBOURS:[-79]}],SEA_EVENTS:{FISH:{FOR_RADIUS:0,NUMBER_INIT:5,SPAWN_CHANCE:.01,SPAWN_DECREASE:5e-4,NUMBER_MIN:1,NUMBER_MAX:15,POWER_MIN:500,POWER_MAX:1e3,TIME_MIN:10,TIME_MAX:0},SHARK:{FOR_RADIUS:0,NUMBER_INIT:4,SPAWN_CHANCE:.005,SPAWN_DECREASE:4e-4,NUMBER_MIN:0,NUMBER_MAX:10,POWER_MIN:250,POWER_MAX:750,TIME_MIN:0,TIME_MAX:0},TREASURE:{FOR_RADIUS:0,NUMBER_INIT:2,SPAWN_CHANCE:.001,SPAWN_DECREASE:3e-4,NUMBER_MIN:1,NUMBER_MAX:3,POWER_MIN:500,POWER_MAX:2e3,TIME_MIN:0,TIME_MAX:0},PIRATES:{FOR_RADIUS:0,NUMBER_INIT:3,SPAWN_CHANCE:.002,SPAWN_DECREASE:2e-4,NUMBER_MIN:1,NUMBER_MAX:7,POWER_MIN:100,POWER_MAX:1e3,TIME_MIN:0,TIME_MAX:0},PIRATES_BASE:{FOR_RADIUS:100,NUMBER_INIT:0,SPAWN_CHANCE:5e-4,SPAWN_DECREASE:4e-4,NUMBER_MIN:0,NUMBER_MAX:1,POWER_MIN:2e3,POWER_MAX:3e3,TIME_MIN:100,TIME_MAX:300},WHIRLPOOL:{FOR_RADIUS:0,NUMBER_INIT:2,SPAWN_CHANCE:.012,SPAWN_DECREASE:.002,NUMBER_MIN:0,NUMBER_MAX:5,POWER_MIN:1,POWER_MAX:1,TIME_MIN:100,TIME_MAX:360},CARTOGRAPHY:{FOR_RADIUS:20,NUMBER_INIT:1,SPAWN_CHANCE:.1,SPAWN_DECREASE:.03,NUMBER_MIN:1,NUMBER_MAX:3,POWER_MIN:50,POWER_MAX:300,TIME_MIN:0,TIME_MAX:0}},REGION_BUILDINGS:{DEFENSES:{REGION_BUILDING:Zu.DEFENSES,NAME:"Defenses",DESCRIPTION:"Each defense level decreases attacking unit strength by 1 but only up to half of that unit total strength",COST:[]},ROADS:{REGION_BUILDING:Zu.ROADS,NAME:"Roads",DESCRIPTION:"Roads allow troops to travel faster through the region",COST:[{resource:bu.LOG,amount:20},{resource:bu.PLANK,amount:10},{resource:bu.STONE,amount:100},{resource:bu.CUT_STONE,amount:50}]},WATCHTOWER:{REGION_BUILDING:Zu.WATCHTOWER,NAME:"Watchtower",DESCRIPTION:"Watchtower allows to gain insight into enemy neighbour regions troops information",COST:[{resource:bu.LOG,amount:50},{resource:bu.PLANK,amount:80},{resource:bu.BRICKS,amount:20}]},GUARD_TOWER:{REGION_BUILDING:Zu.GUARD_TOWER,NAME:"Guard tower",DESCRIPTION:"Guard tower adds passive defenses forces that cannot move to another region",COST:[{resource:bu.LOG,amount:50},{resource:bu.PLANK,amount:50},{resource:bu.BOW,amount:5}]},HARBOUR:{REGION_BUILDING:Zu.HARBOUR,NAME:"Harbour",DESCRIPTION:"Harbour allow your ships to station in this region",COST:[{resource:bu.LOG,amount:50},{resource:bu.PLANK,amount:50},{resource:bu.COPPER,amount:20}]}}},ao={getSickness(e){const n=Object.entries(this.SICKNESS).find(n=>n[0]===Mu[e]);if(n)return n[1];console.warn("Invalid sickness: "+Uu.prepareSicknessName(e))},SICKNESS:{COLD:{CHANCE:20,DURATION:20,LETHALITY:20},FLU:{CHANCE:10,DURATION:30,LETHALITY:40},PNEUMONIA:{CHANCE:5,DURATION:60,LETHALITY:70}}},co={SMALL_REFUGEE:{EVENT:Qu.SMALL_REFUGEE,CHANCE:.0023,MIN_POWER:3,MAX_POWER:7,PREREQUISITES:[],LOG:{MESSAGE:"Small group of refugees came to your village",LOG_TYPE:qu.LOG}},MEDIUM_REFUGEE:{EVENT:Qu.MEDIUM_REFUGEE,CHANCE:33e-5,MIN_POWER:10,MAX_POWER:20,PREREQUISITES:[Iu.LONGHOUSE],LOG:{MESSAGE:"Medium group of refugees came to your village",LOG_TYPE:qu.LOG}},METEORITE:{EVENT:Qu.METEORITE,CHANCE:18e-5,MIN_POWER:100,MAX_POWER:200,PREREQUISITES:[Iu.MOUNTAINS],LOG:{MESSAGE:"A meteoroid has fallen somewhere in the mountains",LOG_TYPE:qu.SUCCESS}}};var ho=function(e){return e[e.DEV=0]="DEV",e[e.KONGREGATE=1]="KONGREGATE",e[e.VK=2]="VK",e}({});const go={production:!0,target:ho.KONGREGATE,gameName:"Villager Kings",saveName:"VillagerKingsSave",versionString:"1.3.7",saveVersion:Ou.V1_0_0},po={name:"New King",building:Ru.ALL,effect:100,duration:90},mo=.2,fo=15,So=750,Eo=10,vo=360,Ro="Welcome to <b>Villager Kings</b><br>You start as a leader of a small village.<br>Will you manage to lead your people to greatness? <br>First thing you need to focus on is to make sure that your people will survive winter.<br>You will need to increase food production and have some wood to heat houses.<br>Remember that winter is not the only threat to your people!<br>Good luck!",Oo=Ju,bo={VILLAGE_TUTORIAL:[{text:"Welcome to this quick tutorial that will guide you through basic controls of Villager Kings",position:{width:"250px",top:"180px",left:"275px"}},{text:'To the left you can see navigation menu that will allow you to browse tabs representing different aspects of your village<br><div class="tutorialCenter"><img src="assets/pictures/tutorials/village2.png"></div>',position:{width:"400px",top:"50px",left:"110px"}},{text:"Right now we are in the village tab and using top menu you can navigate between village regions",position:{width:"200px",top:"65px",left:"130px"}},{text:'In the middle of the village region you can see your buildings.<div class="tutorialCenter"><img src="assets/pictures/tutorials/village3.png"></div>There are many different types of buildings in this game. <br> Some of them produce items, others consume them to produce more advanced items. <br>Currently in your village there are only Huts which produce workers for your village.<br>Housing buildings cannot be stopped and require constant supply of food, fuel (in winter) and clothes',position:{width:"600px",top:"220px",left:"200px"}},{text:'Above your buildings you can see most important metrics for current region.<div class="tutorialCenter"><img src="assets/pictures/tutorials/village4.png"></div>For village those are:<br>1. Population of your village/max population<br>2. Free workers that can be assigned to work<br>3. Size of your empty land where you can build<br>4. Size of your whole village (all regions)<br>5. Your people happiness, which will influence their productivity<br>',position:{width:"400px",top:"130px",left:"110px"}},{text:"That's all here for now let's move into the Forest region using top menu and continue the tutorial there<br><img src=\"assets/pictures/tutorials/village1.png\">",position:{width:"400px",top:"180px",left:"200px"}}],FOREST_TUTORIAL:[{text:"In the forest you have two working buildings<br>Logger's hut that cuts forest trees and produces logs<br>and Gatherer that collects various resources when wandering in the forest.<br><br>Gatherer has two operating modes<br>Worker working here can either focus on looking for food or useful and sometimes rare resources",position:{width:"400px",top:"240px",left:"200px"}},{text:'There are two icons on both sides of building name.<br>To the left there is details icon. If you hover over it, <br>a tooltip with more technical details regarding a building will popup (not active during tutorial).<div class="tutorialCenter"><img src="assets/pictures/tutorials/forest1.png"></div><br>To the right you can see a cog icon which allows you to stop and start production by hiring or firing worker<div class="tutorialCenter"><img src="assets/pictures/tutorials/forest2.png"></div>',position:{width:"450px",top:"200px",left:"150px"}},{text:"Above buildings you can see 'Build' and 'Demolish' buttons.<br>First one opens a window with all buildings you can build in this region.<br>In future you will discover many more types of building to build.<br>Second one allows you to set buildings to be demolished by free worker<br>You will receive small portion of resources used to build demolished building",position:{width:"450px",top:"100px",left:"50px"}},{text:"Now let's order your people to build more gatherers and continue to the 'Resources' tab in the left menu",position:{width:"250px",top:"180px",left:"275px"}}],FIELD_TUTORIAL:[{text:"Field region has many buildings with different mechanics than other regions.<br>Field, Orchard and Pasture buildings require Farm with workers <br>who will work on planting, sowing, harvesting and tending to animals.<br><br>Fields yearly cycle starts in spring, after you have selected what type of crops should be planted,<br>your Farm workers will start plowing the land and then sowing selected crop.<br>After sowing is completed your crops will start to grow until Autumn.<br>On autumn all crops will stop growing and will be ready for harvest performed by Farm workers.<br>If there are any crops not harvested by the beginning of winter they will wither and will be lost.<br><br>",position:{width:"400px",top:"150px",left:"200px"}},{text:"Orchards are a bit different. Those also need to be plowed and plants need to be planted,<br>after that they keep growing for several years without any work input.<br>Once they matured they will fruit every year with only harvest work required.<br><br>",position:{width:"400px",top:"150px",left:"200px"}},{text:"Pastures allow animals breeding. They require work input for the whole year (chores)<br>and animals require Hay to eat during winter.<br>If no hay is available animals can starve to death.<br> They eat grass and other natural food during other seasons.<br>Some animals produce animals products like eggs and milk which add to your food supplies.<br>All animals can be butchered for meat when butcher building is built.<br>Once animals are researched Hunters can try to tame animals for which there is empty pasture space.",position:{width:"400px",top:"150px",left:"200px"}}],MOUNTAINS_TUTORIAL:[{text:"Most mountains buildings require mountains space instead of free land.<br>This mountain area is finite and after the building deplete resources it can be demolished to add empty land instead of back to mountains.<br><br>To gain more mountains areas you will need to run expeditions or conquer enemies (Army).<br><br>After geologist is unlocked and built he will start looking for ores deposits which is very slow process.<br>Once 20 deposits of certain resource has been found Pit Mine can be used to mine it.",position:{width:"400px",top:"150px",left:"200px"}}],PLATEAU_TUTORIAL:[{text:"In this special area Wonder buildings can be constructed.<br>These require much more resources and much more work to be completed.<br>Each Wonder building adds permanent buff corresponding to it's nature.<br>Wonder building also allows you to abdicate what performs soft reset and additionally award you with Royal Points to spend on Royal perks.<br>Wonder building and it's buff persist through soft resets and abdications.",position:{width:"400px",top:"150px",left:"200px"}}],SEA_TUTORIAL:[{text:"By the sea fishers can catch fish from the sea.<br>",position:{width:"400px",top:"150px",left:"200px"}}],RESOURCES_TUTORIAL:[{text:"In this tab you can browse all of the resources that you have discovered<br>Next to the resource icon there is current amount that you have and storage limit for that resource.<br><br>Storage can be extended by building warehouses in the village",position:{width:"400px",top:"150px",left:"200px"}},{text:"To the right there are two additional icons present for each resource<br>First one allows you to set amount that will be reserved and no automated action can use them<br>Player initiated action can on the other hand use reserved resources<br>(keep in mind that some actions like for example invasion can still reduce resources below reserved amount!)<br><br>Second icon toggles which resources should be highlighted in the game header",position:{width:"400px",top:"150px",left:"200px"}},{text:"In the header you can highlight resources to know their amounts in any tab of the game",position:{width:"400px",top:"30px",left:"30px"}},{text:"That's all for the basics.<br>To really start progressing you should work towards building Workshop in the village which will open new opportunities<br>",position:{width:"400px",top:"150px",left:"200px"}}],WINTER_TUTORIAL:[{text:"<br>Winter is coming!<br>",position:{width:"400px",top:"150px",left:"200px"}},{text:"During winter things get much harder.<br><br>Your people will need to start heating their houses or they will freeze, get sick and die.<br><br> To stop freezing your people will need a good supply of things to burn.<br>To heat houses villagers can use Fuel, coal, logs or brushwood",position:{width:"400px",top:"150px",left:"200px"}},{text:"It may be a good idea to reserve or entirely block your people from burning some important resources that you need for building or cooking food.",position:{width:"400px",top:"30px",left:"30px"}},{text:"If your people get sick you will need medicine to increase their chance for getting better.<br><br>Pasture animals may also die during winter when you do not have enough hay to feed them.",position:{width:"400px",top:"150px",left:"200px"}}]},To={ALLOW_FUR_CLOTHES:!0,SHOW_FOOD_NUTRITION:!0,FOOD_RATIONS:2,CLOTHES_RATIONS:1,ALCOHOL_RATIONS:1,TAX_RATE:0,LOG_FIRED_WORKERS:!0,LOG_AUTO_TRADE:!0,LOG_SICKNESS:!0,LOG_MERCHANT:!0,COMPLEX_WORK_MANAGEMENT:!1,SECOND_HEADER_ROW:!1,SHOW_FREE_WORKERS:!1,SHOW_POPULATION:!1,SHOW_RESEARCH_PROGRESS:!1,SHOW_FAITH:!1,SHOW_HAPPINESS:!1,SHOW_RAW:!1,SHOW_PROCESSED:!1,SHOW_FOOD:!1,SHOW_TOOLS:!1,DEFAULT_WORKSHOP_RESEARCH:!0,DEFAULT_GATHERER_FOOD:!0,SWITCH_HUNTER_FROM_TAMING:!0,PLOW_IN_SUMMER:!1},Co={START_LAND:500,START_FOREST:500,START_MOUNTAINS:100,FOREST_GROW_PERCENTAGE:.05,MINIMAL_FOREST_GROWTH:100,FOREST_GROW_TICKS:3600},Io=[{population:0,name:"Village"},{population:2e3,name:"Town"}],yo=eo,Ao=no,No=lo,_o=to,wo=io,Po=so,xo=ro,ko=uo,Mo=oo,Do=ao,Lo=co;class Fo{}class Uo{constructor(){this.title="app"}isIE(){return-1!==navigator.userAgent.indexOf("MSIE")||1==!!document.documentMode}catchContextMenu(e){return!1}}class Ho{}const Go=new be("Location Initialized");class Bo{}const Wo=new be("appBaseHref");let Vo=(()=>{class e{constructor(n,l){this._subject=new Di,this._urlChangeListeners=[],this._platformStrategy=n;const t=this._platformStrategy.getBaseHref();this._platformLocation=l,this._baseHref=e.stripTrailingSlash(zo(t)),this._platformStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(n,l=""){return this.path()==this.normalize(n+e.normalizeQueryParams(l))}normalize(n){return e.stripTrailingSlash(function(e,n){return e&&n.startsWith(e)?n.substring(e.length):n}(this._baseHref,zo(n)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(n,l="",t=null){this._platformStrategy.pushState(t,"",n,l),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+e.normalizeQueryParams(l)),t)}replaceState(n,l="",t=null){this._platformStrategy.replaceState(t,"",n,l),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+e.normalizeQueryParams(l)),t)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(e){this._urlChangeListeners.push(e),this.subscribe(e=>{this._notifyUrlChangeListeners(e.url,e.state)})}_notifyUrlChangeListeners(e="",n){this._urlChangeListeners.forEach(l=>l(e,n))}subscribe(e,n,l){return this._subject.subscribe({next:e,error:n,complete:l})}static normalizeQueryParams(e){return e&&"?"!==e[0]?"?"+e:e}static joinWithSlash(e,n){if(0==e.length)return n;if(0==n.length)return e;let l=0;return e.endsWith("/")&&l++,n.startsWith("/")&&l++,2==l?e+n.substring(1):1==l?e+n:e+"/"+n}static stripTrailingSlash(e){const n=e.match(/#|\?|$/),l=n&&n.index||e.length;return e.slice(0,l-("/"===e[l-1]?1:0))+e.slice(l)}}return e})();function zo(e){return e.replace(/\/index.html$/,"")}let Yo=(()=>(class extends Bo{constructor(e,n){super(),this._platformLocation=e,this._baseHref="",null!=n&&(this._baseHref=n)}onPopState(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}getBaseHref(){return this._baseHref}path(e=!1){let n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n}prepareExternalUrl(e){const n=Vo.joinWithSlash(this._baseHref,e);return n.length>0?"#"+n:n}pushState(e,n,l,t){let i=this.prepareExternalUrl(l+Vo.normalizeQueryParams(t));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,n,i)}replaceState(e,n,l,t){let i=this.prepareExternalUrl(l+Vo.normalizeQueryParams(t));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,n,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}))(),$o=(()=>(class extends Bo{constructor(e,n){if(super(),this._platformLocation=e,null==n&&(n=this._platformLocation.getBaseHrefFromDOM()),null==n)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=n}onPopState(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Vo.joinWithSlash(this._baseHref,e)}path(e=!1){const n=this._platformLocation.pathname+Vo.normalizeQueryParams(this._platformLocation.search),l=this._platformLocation.hash;return l&&e?`${n}${l}`:n}pushState(e,n,l,t){const i=this.prepareExternalUrl(l+Vo.normalizeQueryParams(t));this._platformLocation.pushState(e,n,i)}replaceState(e,n,l,t){const i=this.prepareExternalUrl(l+Vo.normalizeQueryParams(t));this._platformLocation.replaceState(e,n,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}))();const Ko=function(){var e={Decimal:0,Percent:1,Currency:2,Scientific:3};return e[e.Decimal]="Decimal",e[e.Percent]="Percent",e[e.Currency]="Currency",e[e.Scientific]="Scientific",e}(),jo=function(){var e={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return e[e.Zero]="Zero",e[e.One]="One",e[e.Two]="Two",e[e.Few]="Few",e[e.Many]="Many",e[e.Other]="Other",e}(),Qo=function(){var e={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};return e[e.Decimal]="Decimal",e[e.Group]="Group",e[e.List]="List",e[e.PercentSign]="PercentSign",e[e.PlusSign]="PlusSign",e[e.MinusSign]="MinusSign",e[e.Exponential]="Exponential",e[e.SuperscriptingExponent]="SuperscriptingExponent",e[e.PerMille]="PerMille",e[e.Infinity]="Infinity",e[e.NaN]="NaN",e[e.TimeSeparator]="TimeSeparator",e[e.CurrencyDecimal]="CurrencyDecimal",e[e.CurrencyGroup]="CurrencyGroup",e}();function qo(e,n){const l=Pi(e),t=l[Ni.NumberSymbols][n];if(void 0===t){if(n===Qo.CurrencyDecimal)return l[Ni.NumberSymbols][Qo.Decimal];if(n===Qo.CurrencyGroup)return l[Ni.NumberSymbols][Qo.Group]}return t}const Xo=/^(\d+)?\.((\d+)(-(\d+))?)?$/,Zo=22,Jo=".",ea="0",na=";",la=",",ta="#";function ia(e){const n=parseInt(e);if(isNaN(n))throw new Error("Invalid integer literal when parsing "+e);return n}const sa=new be("UseV4Plurals");class ra{}let ua=(()=>(class extends ra{constructor(e,n){super(),this.locale=e,this.deprecatedPluralFn=n}getPluralCategory(e,n){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(n||this.locale,e):function(e){return Pi(e)[Ni.PluralCase]}(n||this.locale)(e)){case jo.Zero:return"zero";case jo.One:return"one";case jo.Two:return"two";case jo.Few:return"few";case jo.Many:return"many";default:return"other"}}}))();function oa(e,n){n=encodeURIComponent(n);for(const l of e.split(";")){const e=l.indexOf("="),[t,i]=-1==e?[l,""]:[l.slice(0,e),l.slice(e+1)];if(t.trim()===n)return decodeURIComponent(i)}return null}class aa{}let ca=(()=>(class{constructor(e,n,l,t){this._iterableDiffers=e,this._keyValueDiffers=n,this._ngEl=l,this._renderer=t,this._initialClasses=[]}getValue(){return null}setClass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}setNgClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(jn(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}applyChanges(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachChangedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachRemovedItem(e=>{e.previousValue&&this._toggleClass(e.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(e=>{if("string"!=typeof e.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${ge(e.item)}`);this._toggleClass(e.item,!0)}),e.forEachRemovedItem(e=>this._toggleClass(e.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!0)):Object.keys(e).forEach(n=>this._toggleClass(n,!!e[n])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!1)):Object.keys(e).forEach(e=>this._toggleClass(e,!1)))}_toggleClass(e,n){(e=e.trim())&&e.split(/\s+/g).forEach(e=>{n?this._renderer.addClass(this._ngEl.nativeElement,e):this._renderer.removeClass(this._ngEl.nativeElement,e)})}}))(),ha=(()=>{class e{constructor(e){this._delegate=e}getValue(){return this._delegate.getValue()}}return e.ngDirectiveDef=void 0,e})(),da=(()=>(class extends ha{constructor(e){super(e)}set klass(e){this._delegate.setClass(e)}set ngClass(e){this._delegate.setNgClass(e)}ngDoCheck(){this._delegate.applyChanges()}}))();class ga{constructor(e,n,l,t){this.$implicit=e,this.ngForOf=n,this.index=l,this.count=t}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let pa=(()=>(class{constructor(e,n,l){this._viewContainer=e,this._template=n,this._differs=l,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){en()&&null!=e&&"function"!=typeof e&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(e)}. `+"See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const l=this._ngForOf;if(!this._differ&&l)try{this._differ=this._differs.find(l).create(this.ngForTrackBy)}catch(n){throw new Error(`Cannot find a differ supporting object '${l}' of type '${e=l,e.name||typeof e}'. NgFor only supports binding to Iterables such as Arrays.`)}}var e;if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const n=[];e.forEachOperation((e,l,t)=>{if(null==e.previousIndex){const l=this._viewContainer.createEmbeddedView(this._template,new ga(null,this._ngForOf,-1,-1),null===t?void 0:t),i=new ma(e,l);n.push(i)}else if(null==t)this._viewContainer.remove(null===l?void 0:l);else if(null!==l){const i=this._viewContainer.get(l);this._viewContainer.move(i,t);const s=new ma(e,i);n.push(s)}});for(let l=0;l<n.length;l++)this._perViewChange(n[l].view,n[l].record);for(let l=0,t=this._viewContainer.length;l<t;l++){const e=this._viewContainer.get(l);e.context.index=l,e.context.count=t,e.context.ngForOf=this._ngForOf}e.forEachIdentityChange(e=>{this._viewContainer.get(e.currentIndex).context.$implicit=e.item})}_perViewChange(e,n){e.context.$implicit=n.item}static ngTemplateContextGuard(e,n){return!0}}))();class ma{constructor(e,n){this.record=e,this.view=n}}let fa=(()=>(class{constructor(e,n){this._viewContainer=e,this._context=new Sa,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Ea("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Ea("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}))();class Sa{constructor(){this.$implicit=null,this.ngIf=null}}function Ea(e,n){if(n&&!n.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${ge(n)}'.`)}class va{constructor(e,n){this._viewContainerRef=e,this._templateRef=n,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let Ra=(()=>(class{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const n=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||n,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),n}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let n=0;n<this._defaultViews.length;n++)this._defaultViews[n].enforceState(e)}}}))(),Oa=(()=>(class{constructor(e,n,l){this.ngSwitch=l,l._addCase(),this._view=new va(e,n)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}))();class ba{}let Ta=(()=>(class{constructor(e,n,l){this._ngEl=e,this._differs=n,this._renderer=l}getValue(){return null}setNgStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}applyChanges(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_applyChanges(e){e.forEachRemovedItem(e=>this._setStyle(e.key,null)),e.forEachAddedItem(e=>this._setStyle(e.key,e.currentValue)),e.forEachChangedItem(e=>this._setStyle(e.key,e.currentValue))}_setStyle(e,n){const[l,t]=e.split(".");null!=(n=null!=n&&t?`${n}${t}`:n)?this._renderer.setStyle(this._ngEl.nativeElement,l,n):this._renderer.removeStyle(this._ngEl.nativeElement,l)}}))(),Ca=(()=>{class e{constructor(e){this._delegate=e}getValue(){return this._delegate.getValue()}}return e.ngDirectiveDef=void 0,e})(),Ia=(()=>(class extends Ca{constructor(e){super(e)}set ngStyle(e){this._delegate.setNgStyle(e)}ngDoCheck(){this._delegate.applyChanges()}}))();function ya(e,n){return Error(`InvalidPipeArgument: '${n}' for pipe '${ge(e)}'`)}const Aa=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])\S*/g;let Na=(()=>{class e{transform(n){if(!n)return n;if("string"!=typeof n)throw ya(e,n);return n.replace(Aa,e=>e[0].toUpperCase()+e.substr(1).toLowerCase())}}return e})(),_a=(()=>(class{constructor(e){this.differs=e,this.keyValues=[]}transform(e,n=wa){if(!e||!(e instanceof Map)&&"object"!=typeof e)return null;this.differ||(this.differ=this.differs.find(e).create());const l=this.differ.diff(e);return l&&(this.keyValues=[],l.forEachItem(e=>{this.keyValues.push(function(e,n){return{key:e,value:n}}(e.key,e.currentValue))}),this.keyValues.sort(n)),this.keyValues}}))();function wa(e,n){const l=e.key,t=n.key;if(l===t)return 0;if(void 0===l)return 1;if(void 0===t)return-1;if(null===l)return 1;if(null===t)return-1;if("string"==typeof l&&"string"==typeof t)return l<t?-1:1;if("number"==typeof l&&"number"==typeof t)return l-t;if("boolean"==typeof l&&"boolean"==typeof t)return l<t?-1:1;const i=String(l),s=String(t);return i==s?0:i<s?-1:1}let Pa=(()=>{class e{constructor(e){this._locale=e}transform(n,l,t){if(function(e){return null==e||""===e||e!=e}(n))return null;t=t||this._locale;try{return function(e,n,l){return function(e,n,l,t,i,s,r=!1){let u="",o=!1;if(isFinite(e)){let a=function(e){let n,l,t,i,s,r=Math.abs(e)+"",u=0;for((l=r.indexOf(Jo))>-1&&(r=r.replace(Jo,"")),(t=r.search(/e/i))>0?(l<0&&(l=t),l+=+r.slice(t+1),r=r.substring(0,t)):l<0&&(l=r.length),t=0;r.charAt(t)===ea;t++);if(t===(s=r.length))n=[0],l=1;else{for(s--;r.charAt(s)===ea;)s--;for(l-=t,n=[],i=0;t<=s;t++,i++)n[i]=Number(r.charAt(t))}return l>Zo&&(n=n.splice(0,Zo-1),u=l-1,l=1),{digits:n,exponent:u,integerLen:l}}(e);r&&(a=function(e){if(0===e.digits[0])return e;const n=e.digits.length-e.integerLen;return e.exponent?e.exponent+=2:(0===n?e.digits.push(0,0):1===n&&e.digits.push(0),e.integerLen+=2),e}(a));let c=n.minInt,h=n.minFrac,d=n.maxFrac;if(s){const e=s.match(Xo);if(null===e)throw new Error(`${s} is not a valid digit info`);const n=e[1],l=e[3],t=e[5];null!=n&&(c=ia(n)),null!=l&&(h=ia(l)),null!=t?d=ia(t):null!=l&&h>d&&(d=h)}!function(e,n,l){if(n>l)throw new Error(`The minimum number of digits after fraction (${n}) is higher than the maximum (${l}).`);let t=e.digits,i=t.length-e.integerLen;const s=Math.min(Math.max(n,i),l);let r=s+e.integerLen,u=t[r];if(r>0){t.splice(Math.max(e.integerLen,r));for(let e=r;e<t.length;e++)t[e]=0}else{i=Math.max(0,i),e.integerLen=1,t.length=Math.max(1,r=s+1),t[0]=0;for(let e=1;e<r;e++)t[e]=0}if(u>=5)if(r-1<0){for(let n=0;n>r;n--)t.unshift(0),e.integerLen++;t.unshift(1),e.integerLen++}else t[r-1]++;for(;i<Math.max(0,s);i++)t.push(0);let o=0!==s;const a=n+e.integerLen,c=t.reduceRight((function(e,n,l,t){return t[l]=(n+=e)<10?n:n-10,o&&(0===t[l]&&l>=a?t.pop():o=!1),n>=10?1:0}),0);c&&(t.unshift(c),e.integerLen++)}(a,h,d);let g=a.digits,p=a.integerLen;const m=a.exponent;let f=[];for(o=g.every(e=>!e);p<c;p++)g.unshift(0);for(;p<0;p++)g.unshift(0);p>0?f=g.splice(p,g.length):(f=g,g=[0]);const S=[];for(g.length>=n.lgSize&&S.unshift(g.splice(-n.lgSize,g.length).join(""));g.length>n.gSize;)S.unshift(g.splice(-n.gSize,g.length).join(""));g.length&&S.unshift(g.join("")),u=S.join(qo(l,t)),f.length&&(u+=qo(l,i)+f.join("")),m&&(u+=qo(l,Qo.Exponential)+"+"+m)}else u=qo(l,Qo.Infinity);return e<0&&!o?n.negPre+u+n.negSuf:n.posPre+u+n.posSuf}(e,function(e,n="-"){const l={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},t=e.split(na),i=t[0],s=t[1],r=-1!==i.indexOf(Jo)?i.split(Jo):[i.substring(0,i.lastIndexOf(ea)+1),i.substring(i.lastIndexOf(ea)+1)],u=r[0],o=r[1]||"";l.posPre=u.substr(0,u.indexOf(ta));for(let c=0;c<o.length;c++){const e=o.charAt(c);e===ea?l.minFrac=l.maxFrac=c+1:e===ta?l.maxFrac=c+1:l.posSuf+=e}const a=u.split(la);if(l.gSize=a[1]?a[1].length:0,l.lgSize=a[2]||a[1]?(a[2]||a[1]).length:0,s){const e=i.length-l.posPre.length-l.posSuf.length,n=s.indexOf(ta);l.negPre=s.substr(0,n).replace(/'/g,""),l.negSuf=s.substr(n+e).replace(/'/g,"")}else l.negPre=n+l.posPre,l.negSuf=l.posSuf;return l}(function(e,n){return Pi(e)[Ni.NumberFormats][n]}(n,Ko.Decimal),qo(n,Qo.MinusSign)),n,Qo.Group,Qo.Decimal,l)}(function(e){if("string"==typeof e&&!isNaN(Number(e)-parseFloat(e)))return Number(e);if("number"!=typeof e)throw new Error(`${e} is not a number`);return e}(n),t,l)}catch(i){throw ya(e,i.message)}}}return e})(),xa=(()=>(class{}))();const ka=new be("DocumentToken"),Ma="browser";let Da=(()=>{class e{}return e.ngInjectableDef=ce({token:e,providedIn:"root",factory:()=>new La(De(ka),window,De(Xe))}),e})();class La{constructor(e,n,l){this.document=e,this.window=n,this.errorHandler=l,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(e){this.supportScrollRestoration()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(this.supportScrollRestoration()){e=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(e):e.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{const n=this.document.querySelector(`#${e}`);if(n)return void this.scrollToElement(n);const l=this.document.querySelector(`[name='${e}']`);if(l)return void this.scrollToElement(l)}catch(n){this.errorHandler.handleError(n)}}}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=e)}}scrollToElement(e){const n=e.getBoundingClientRect(),l=n.left+this.window.pageXOffset,t=n.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(l-i[0],t-i[1])}supportScrollRestoration(){try{return!!this.window&&!!this.window.scrollTo}catch(e){return!1}}}function Fa(...e){let n=e[e.length-1];return A(n)?(e.pop(),G(e,n)):K(e)}class Ua extends I{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return n&&!n.closed&&e.next(this._value),n}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new b;return this._value}next(e){super.next(this._value=e)}}const Ha=(()=>{function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e})(),Ga={};class Ba{constructor(e){this.resultSelector=e}call(e,n){return n.subscribe(new Wa(e,this.resultSelector))}}class Wa extends L{constructor(e,n){super(e),this.resultSelector=n,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(Ga),this.observables.push(e)}_complete(){const e=this.observables,n=e.length;if(0===n)this.destination.complete();else{this.active=n,this.toRespond=n;for(let l=0;l<n;l++){const n=e[l];this.add(D(this,n,n,l))}}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,n,l,t,i){const s=this.values,r=this.toRespond?s[l]===Ga?--this.toRespond:this.toRespond:0;s[l]=n,0===r&&(this.resultSelector?this._tryResultSelector(s):this.destination.next(s.slice()))}_tryResultSelector(e){let n;try{n=this.resultSelector.apply(this,e)}catch(l){return void this.destination.error(l)}this.destination.next(n)}}const Va=new R(e=>e.complete());function za(e){return e?function(e){return new R(n=>e.schedule(()=>n.complete()))}(e):Va}function Ya(e){return new R(n=>{let l;try{l=e()}catch(t){return void n.error(t)}return(l?B(l):za()).subscribe(n)})}function $a(){return $(1)}function Ka(e,n){return function(l){return l.lift(new ja(e,n))}}class ja{constructor(e,n){this.predicate=e,this.thisArg=n}call(e,n){return n.subscribe(new Qa(e,this.predicate,this.thisArg))}}class Qa extends p{constructor(e,n,l){super(e),this.predicate=n,this.thisArg=l,this.count=0}_next(e){let n;try{n=this.predicate.call(this.thisArg,e,this.count++)}catch(l){return void this.destination.error(l)}n&&this.destination.next(e)}}const qa=(()=>{function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e})();function Xa(e){return function(n){return 0===e?za():n.lift(new Za(e))}}class Za{constructor(e){if(this.total=e,this.total<0)throw new qa}call(e,n){return n.subscribe(new Ja(e,this.total))}}class Ja extends p{constructor(e,n){super(e),this.total=n,this.ring=new Array,this.count=0}_next(e){const n=this.ring,l=this.total,t=this.count++;n.length<l?n.push(e):n[t%l]=e}_complete(){const e=this.destination;let n=this.count;if(n>0){const l=this.count>=this.total?this.total:this.count,t=this.ring;for(let i=0;i<l;i++){const i=n++%l;e.next(t[i])}}e.complete()}}function ec(e=tc){return n=>n.lift(new nc(e))}class nc{constructor(e){this.errorFactory=e}call(e,n){return n.subscribe(new lc(e,this.errorFactory))}}class lc extends p{constructor(e,n){super(e),this.errorFactory=n,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let n;try{n=this.errorFactory()}catch(e){n=e}this.destination.error(n)}}}function tc(){return new Ha}function ic(e=null){return n=>n.lift(new sc(e))}class sc{constructor(e){this.defaultValue=e}call(e,n){return n.subscribe(new rc(e,this.defaultValue))}}class rc extends p{constructor(e,n){super(e),this.defaultValue=n,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function uc(e,n){const l=arguments.length>=2;return t=>t.pipe(e?Ka((n,l)=>e(n,l,t)):Y,Xa(1),l?ic(n):ec(()=>new Ha))}function oc(e){return function(n){const l=new ac(e),t=n.lift(l);return l.caught=t}}class ac{constructor(e){this.selector=e}call(e,n){return n.subscribe(new cc(e,this.selector,this.caught))}}class cc extends L{constructor(e,n,l){super(e),this.selector=n,this.caught=l}error(e){if(!this.isStopped){let l;try{l=this.selector(e,this.caught)}catch(n){return void super.error(n)}this._unsubscribeAndRecycle();const t=new N(this,void 0,void 0);this.add(t),D(this,l,void 0,void 0,t)}}}function hc(e){return n=>0===e?za():n.lift(new dc(e))}class dc{constructor(e){if(this.total=e,this.total<0)throw new qa}call(e,n){return n.subscribe(new gc(e,this.total))}}class gc extends p{constructor(e,n){super(e),this.total=n,this.count=0}_next(e){const n=this.total,l=++this.count;l<=n&&(this.destination.next(e),l===n&&(this.destination.complete(),this.unsubscribe()))}}function pc(e,n){const l=arguments.length>=2;return t=>t.pipe(e?Ka((n,l)=>e(n,l,t)):Y,hc(1),l?ic(n):ec(()=>new Ha))}class mc{constructor(e,n,l){this.predicate=e,this.thisArg=n,this.source=l}call(e,n){return n.subscribe(new fc(e,this.predicate,this.thisArg,this.source))}}class fc extends p{constructor(e,n,l,t){super(e),this.predicate=n,this.thisArg=l,this.source=t,this.index=0,this.thisArg=l||this}notifyComplete(e){this.destination.next(e),this.destination.complete()}_next(e){let n=!1;try{n=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(l){return void this.destination.error(l)}n||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function Sc(e,n){return"function"==typeof n?l=>l.pipe(Sc((l,t)=>B(e(l,t)).pipe(F((e,i)=>n(l,e,t,i))))):n=>n.lift(new Ec(e))}class Ec{constructor(e){this.project=e}call(e,n){return n.subscribe(new vc(e,this.project))}}class vc extends L{constructor(e,n){super(e),this.project=n,this.index=0}_next(e){let n;const l=this.index++;try{n=this.project(e,l)}catch(t){return void this.destination.error(t)}this._innerSub(n,e,l)}_innerSub(e,n,l){const t=this.innerSubscription;t&&t.unsubscribe();const i=new N(this,void 0,void 0);this.destination.add(i),this.innerSubscription=D(this,e,n,l,i)}_complete(){const{innerSubscription:e}=this;e&&!e.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(e,n,l,t,i){this.destination.next(n)}}function Rc(...e){return $a()(Fa(...e))}function Oc(...e){const n=e[e.length-1];return A(n)?(e.pop(),l=>Rc(e,l,n)):n=>Rc(e,n)}function bc(e,n){let l=!1;return arguments.length>=2&&(l=!0),function(t){return t.lift(new Tc(e,n,l))}}class Tc{constructor(e,n,l=!1){this.accumulator=e,this.seed=n,this.hasSeed=l}call(e,n){return n.subscribe(new Cc(e,this.accumulator,this.seed,this.hasSeed))}}class Cc extends p{constructor(e,n,l,t){super(e),this.accumulator=n,this._seed=l,this.hasSeed=t,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const n=this.index++;let l;try{l=this.accumulator(this.seed,e,n)}catch(t){this.destination.error(t)}this.seed=l,this.destination.next(l)}}function Ic(e,n){return W(e,n,1)}function yc(e,n,l){return function(t){return t.lift(new Ac(e,n,l))}}class Ac{constructor(e,n,l){this.nextOrObserver=e,this.error=n,this.complete=l}call(e,n){return n.subscribe(new Nc(e,this.nextOrObserver,this.error,this.complete))}}class Nc extends p{constructor(e,n,l,i){super(e),this._tapNext=S,this._tapError=S,this._tapComplete=S,this._tapError=l||S,this._tapComplete=i||S,t(n)?(this._context=this,this._tapNext=n):n&&(this._context=n,this._tapNext=n.next||S,this._tapError=n.error||S,this._tapComplete=n.complete||S)}_next(e){try{this._tapNext.call(this._context,e)}catch(n){return void this.destination.error(n)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}class _c{constructor(e){this.callback=e}call(e,n){return n.subscribe(new wc(e,this.callback))}}class wc extends p{constructor(e,n){super(e),this.add(new h(n))}}let Pc=null;function xc(){return Pc}class kc{constructor(){this.resourceLoaderType=null}get attrToPropMap(){return this._attrToPropMap}set attrToPropMap(e){this._attrToPropMap=e}}class Mc extends kc{constructor(){super(),this._animationPrefix=null,this._transitionEnd=null;try{const e=this.createElement("div",document);if(null!=this.getStyle(e,"animationName"))this._animationPrefix="";else{const n=["Webkit","Moz","O","ms"];for(let l=0;l<n.length;l++)if(null!=this.getStyle(e,n[l]+"AnimationName")){this._animationPrefix="-"+n[l].toLowerCase()+"-";break}}const n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(n).forEach(l=>{null!=this.getStyle(e,l)&&(this._transitionEnd=n[l])})}catch(e){this._animationPrefix=null,this._transitionEnd=null}}getDistributedNodes(e){return e.getDistributedNodes()}resolveAndSetHref(e,n,l){e.href=null==l?n:n+"/../"+l}supportsDOMEvents(){return!0}supportsNativeShadowDOM(){return"function"==typeof document.body.createShadowRoot}getAnimationPrefix(){return this._animationPrefix?this._animationPrefix:""}getTransitionEnd(){return this._transitionEnd?this._transitionEnd:""}supportsAnimation(){return null!=this._animationPrefix&&null!=this._transitionEnd}}const Dc={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},Lc=3,Fc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Uc={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Hc=(()=>{if(Oe.Node)return Oe.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))}})();class Gc extends Mc{parse(e){throw new Error("parse not implemented")}static makeCurrent(){var e;e=new Gc,Pc||(Pc=e)}hasProperty(e,n){return n in e}setProperty(e,n,l){e[n]=l}getProperty(e,n){return e[n]}invoke(e,n,l){e[n](...l)}logError(e){window.console&&(console.error?console.error(e):console.log(e))}log(e){window.console&&window.console.log&&window.console.log(e)}logGroup(e){window.console&&window.console.group&&window.console.group(e)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}get attrToPropMap(){return Dc}contains(e,n){return Hc.call(e,n)}querySelector(e,n){return e.querySelector(n)}querySelectorAll(e,n){return e.querySelectorAll(n)}on(e,n,l){e.addEventListener(n,l,!1)}onAndCancel(e,n,l){return e.addEventListener(n,l,!1),()=>{e.removeEventListener(n,l,!1)}}dispatchEvent(e,n){e.dispatchEvent(n)}createMouseEvent(e){const n=this.getDefaultDocument().createEvent("MouseEvent");return n.initEvent(e,!0,!0),n}createEvent(e){const n=this.getDefaultDocument().createEvent("Event");return n.initEvent(e,!0,!0),n}preventDefault(e){e.preventDefault(),e.returnValue=!1}isPrevented(e){return e.defaultPrevented||null!=e.returnValue&&!e.returnValue}getInnerHTML(e){return e.innerHTML}getTemplateContent(e){return"content"in e&&this.isTemplateElement(e)?e.content:null}getOuterHTML(e){return e.outerHTML}nodeName(e){return e.nodeName}nodeValue(e){return e.nodeValue}type(e){return e.type}content(e){return this.hasProperty(e,"content")?e.content:e}firstChild(e){return e.firstChild}nextSibling(e){return e.nextSibling}parentElement(e){return e.parentNode}childNodes(e){return e.childNodes}childNodesAsList(e){const n=e.childNodes,l=new Array(n.length);for(let t=0;t<n.length;t++)l[t]=n[t];return l}clearNodes(e){for(;e.firstChild;)e.removeChild(e.firstChild)}appendChild(e,n){e.appendChild(n)}removeChild(e,n){e.removeChild(n)}replaceChild(e,n,l){e.replaceChild(n,l)}remove(e){return e.parentNode&&e.parentNode.removeChild(e),e}insertBefore(e,n,l){e.insertBefore(l,n)}insertAllBefore(e,n,l){l.forEach(l=>e.insertBefore(l,n))}insertAfter(e,n,l){e.insertBefore(l,n.nextSibling)}setInnerHTML(e,n){e.innerHTML=n}getText(e){return e.textContent}setText(e,n){e.textContent=n}getValue(e){return e.value}setValue(e,n){e.value=n}getChecked(e){return e.checked}setChecked(e,n){e.checked=n}createComment(e){return this.getDefaultDocument().createComment(e)}createTemplate(e){const n=this.getDefaultDocument().createElement("template");return n.innerHTML=e,n}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createElementNS(e,n,l){return(l=l||this.getDefaultDocument()).createElementNS(e,n)}createTextNode(e,n){return(n=n||this.getDefaultDocument()).createTextNode(e)}createScriptTag(e,n,l){const t=(l=l||this.getDefaultDocument()).createElement("SCRIPT");return t.setAttribute(e,n),t}createStyleElement(e,n){const l=(n=n||this.getDefaultDocument()).createElement("style");return this.appendChild(l,this.createTextNode(e,n)),l}createShadowRoot(e){return e.createShadowRoot()}getShadowRoot(e){return e.shadowRoot}getHost(e){return e.host}clone(e){return e.cloneNode(!0)}getElementsByClassName(e,n){return e.getElementsByClassName(n)}getElementsByTagName(e,n){return e.getElementsByTagName(n)}classList(e){return Array.prototype.slice.call(e.classList,0)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}hasClass(e,n){return e.classList.contains(n)}setStyle(e,n,l){e.style[n]=l}removeStyle(e,n){e.style[n]=""}getStyle(e,n){return e.style[n]}hasStyle(e,n,l){const t=this.getStyle(e,n)||"";return l?t==l:t.length>0}tagName(e){return e.tagName}attributeMap(e){const n=new Map,l=e.attributes;for(let t=0;t<l.length;t++){const e=l.item(t);n.set(e.name,e.value)}return n}hasAttribute(e,n){return e.hasAttribute(n)}hasAttributeNS(e,n,l){return e.hasAttributeNS(n,l)}getAttribute(e,n){return e.getAttribute(n)}getAttributeNS(e,n,l){return e.getAttributeNS(n,l)}setAttribute(e,n,l){e.setAttribute(n,l)}setAttributeNS(e,n,l,t){e.setAttributeNS(n,l,t)}removeAttribute(e,n){e.removeAttribute(n)}removeAttributeNS(e,n,l){e.removeAttributeNS(n,l)}templateAwareRoot(e){return this.isTemplateElement(e)?this.content(e):e}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}getBoundingClientRect(e){try{return e.getBoundingClientRect()}catch(n){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}}getTitle(e){return e.title}setTitle(e,n){e.title=n||""}elementMatches(e,n){return!!this.isElementNode(e)&&(e.matches&&e.matches(n)||e.msMatchesSelector&&e.msMatchesSelector(n)||e.webkitMatchesSelector&&e.webkitMatchesSelector(n))}isTemplateElement(e){return this.isElementNode(e)&&"TEMPLATE"===e.nodeName}isTextNode(e){return e.nodeType===Node.TEXT_NODE}isCommentNode(e){return e.nodeType===Node.COMMENT_NODE}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}hasShadowRoot(e){return null!=e.shadowRoot&&e instanceof HTMLElement}isShadowRoot(e){return e instanceof DocumentFragment}importIntoDoc(e){return document.importNode(this.templateAwareRoot(e),!0)}adoptNode(e){return document.adoptNode(e)}getHref(e){return e.getAttribute("href")}getEventKey(e){let n=e.key;if(null==n){if(null==(n=e.keyIdentifier))return"Unidentified";n.startsWith("U+")&&(n=String.fromCharCode(parseInt(n.substring(2),16)),e.location===Lc&&Uc.hasOwnProperty(n)&&(n=Uc[n]))}return Fc[n]||n}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(e){const n=Wc||(Wc=document.querySelector("base"))?Wc.getAttribute("href"):null;return null==n?null:(l=n,Bc||(Bc=document.createElement("a")),Bc.setAttribute("href",l),"/"===Bc.pathname.charAt(0)?Bc.pathname:"/"+Bc.pathname);var l}resetBaseElement(){Wc=null}getUserAgent(){return window.navigator.userAgent}setData(e,n,l){this.setAttribute(e,"data-"+n,l)}getData(e,n){return this.getAttribute(e,"data-"+n)}getComputedStyle(e){return getComputedStyle(e)}supportsWebAnimation(){return"function"==typeof Element.prototype.animate}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(e){return oa(document.cookie,e)}setCookie(e,n){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(n)}}let Bc,Wc=null;function Vc(){return!!window.history.pushState}let zc=(()=>{class e extends Ho{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=xc().getLocation(),this._history=xc().getHistory()}getBaseHrefFromDOM(){return xc().getBaseHref(this._doc)}onPopState(e){xc().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)}onHashChange(e){xc().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,n,l){Vc()?this._history.pushState(e,n,l):this.location.hash=l}replaceState(e,n,l){Vc()?this._history.replaceState(e,n,l):this.location.hash=l}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return e.ctorParameters=()=>[{type:void 0,decorators:[{type:ie,args:[ka]}]}],e})();const Yc=new be("TRANSITION_ID"),$c=[{provide:Ui,useFactory:function(e,n,l){return()=>{l.get(Hi).donePromise.then(()=>{const l=xc();Array.prototype.slice.apply(l.querySelectorAll(n,"style[ng-transition]")).filter(n=>l.getAttribute(n,"ng-transition")===e).forEach(e=>l.remove(e))})}},deps:[Yc,ka,kn],multi:!0}];class Kc{static init(){var e;e=new Kc,bs=e}addToWindow(e){Oe.getAngularTestability=(n,l=!0)=>{const t=e.findTestabilityInTree(n,l);if(null==t)throw new Error("Could not find testability for element.");return t},Oe.getAllAngularTestabilities=()=>e.getAllTestabilities(),Oe.getAllAngularRootElements=()=>e.getAllRootElements(),Oe.frameworkStabilizers||(Oe.frameworkStabilizers=[]),Oe.frameworkStabilizers.push(e=>{const n=Oe.getAllAngularTestabilities();let l=n.length,t=!1;const i=function(n){t=t||n,0==--l&&e(t)};n.forEach((function(e){e.whenStable(i)}))})}findTestabilityInTree(e,n,l){if(null==n)return null;const t=e.getTestability(n);return null!=t?t:l?xc().isShadowRoot(n)?this.findTestabilityInTree(e,xc().getHost(n),!0):this.findTestabilityInTree(e,xc().parentElement(n),!0):null}}function jc(e,n){"undefined"!=typeof COMPILED&&COMPILED||((Oe.ng=Oe.ng||{})[e]=n)}const Qc=(()=>({ApplicationRef:ws,NgZone:hs}))();function qc(e){return Bs(e)}const Xc=new be("EventManagerPlugins");let Zc=(()=>(class{constructor(e,n){this._zone=n,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,n,l){return this._findPluginFor(n).addEventListener(e,n,l)}addGlobalEventListener(e,n,l){return this._findPluginFor(n).addGlobalEventListener(e,n,l)}getZone(){return this._zone}_findPluginFor(e){const n=this._eventNameToPlugin.get(e);if(n)return n;const l=this._plugins;for(let t=0;t<l.length;t++){const n=l[t];if(n.supports(e))return this._eventNameToPlugin.set(e,n),n}throw new Error(`No event manager plugin found for event ${e}`)}}))();class Jc{constructor(e){this._doc=e}addGlobalEventListener(e,n,l){const t=xc().getGlobalEventTarget(this._doc,e);if(!t)throw new Error(`Unsupported event target ${t} for event ${n}`);return this.addEventListener(t,n,l)}}let eh=(()=>(class{constructor(){this._stylesSet=new Set}addStyles(e){const n=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),n.add(e))}),this.onStylesAdded(n)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}))(),nh=(()=>(class extends eh{constructor(e){super(),this._doc=e,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(e.head)}_addStylesToHost(e,n){e.forEach(e=>{const l=this._doc.createElement("style");l.textContent=e,this._styleNodes.add(n.appendChild(l))})}addHost(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)}removeHost(e){this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach(n=>this._addStylesToHost(e,n))}ngOnDestroy(){this._styleNodes.forEach(e=>xc().remove(e))}}))();const lh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},th=/%COMP%/g,ih="_nghost-%COMP%",sh="_ngcontent-%COMP%";function rh(e,n,l){for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)?rh(e,i,l):(i=i.replace(th,e),l.push(i))}return l}function uh(e){return n=>{!1===e(n)&&(n.preventDefault(),n.returnValue=!1)}}let oh=(()=>(class{constructor(e,n,l){this.eventManager=e,this.sharedStylesHost=n,this.appId=l,this.rendererByCompId=new Map,this.defaultRenderer=new ah(e)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;switch(n.encapsulation){case Ve.Emulated:{let l=this.rendererByCompId.get(n.id);return l||(l=new dh(this.eventManager,this.sharedStylesHost,n,this.appId),this.rendererByCompId.set(n.id,l)),l.applyToHost(e),l}case Ve.Native:case Ve.ShadowDom:return new gh(this.eventManager,this.sharedStylesHost,e,n);default:if(!this.rendererByCompId.has(n.id)){const e=rh(n.id,n.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(n.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}))();class ah{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,n){return n?document.createElementNS(lh[n]||n,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,n){e.appendChild(n)}insertBefore(e,n,l){e&&e.insertBefore(n,l)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let l="string"==typeof e?document.querySelector(e):e;if(!l)throw new Error(`The selector "${e}" did not match any elements`);return n||(l.textContent=""),l}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,l,t){if(t){n=t+":"+n;const i=lh[t];i?e.setAttributeNS(i,n,l):e.setAttribute(n,l)}else e.setAttribute(n,l)}removeAttribute(e,n,l){if(l){const t=lh[l];t?e.removeAttributeNS(t,n):e.removeAttribute(`${l}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,l,t){t&dl.DashCase?e.style.setProperty(n,l,t&dl.Important?"important":""):e.style[n]=l}removeStyle(e,n,l){l&dl.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,l){hh(n,"property"),e[n]=l}setValue(e,n){e.nodeValue=n}listen(e,n,l){return hh(n,"listener"),"string"==typeof e?this.eventManager.addGlobalEventListener(e,n,uh(l)):this.eventManager.addEventListener(e,n,uh(l))}}const ch=(()=>"@".charCodeAt(0))();function hh(e,n){if(e.charCodeAt(0)===ch)throw new Error(`Found the synthetic ${n} ${e}. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.`)}class dh extends ah{constructor(e,n,l,t){super(e),this.component=l;const i=rh(t+"-"+l.id,l.styles,[]);n.addStyles(i),this.contentAttr=sh.replace(th,t+"-"+l.id),this.hostAttr=function(e){return ih.replace(th,e)}(t+"-"+l.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,n){const l=super.createElement(e,n);return super.setAttribute(l,this.contentAttr,""),l}}class gh extends ah{constructor(e,n,l,t){super(e),this.sharedStylesHost=n,this.hostEl=l,this.component=t,this.shadowRoot=t.encapsulation===Ve.ShadowDom?l.attachShadow({mode:"open"}):l.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const i=rh(t.id,t.styles,[]);for(let s=0;s<i.length;s++){const e=document.createElement("style");e.textContent=i[s],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,l){return super.insertBefore(this.nodeOrShadowRoot(e),n,l)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}const ph=(()=>"undefined"!=typeof Zone&&Zone.__symbol__||function(e){return"__zone_symbol__"+e})(),mh=ph("addEventListener"),fh=ph("removeEventListener"),Sh={},Eh="__zone_symbol__propagationStopped",vh=(()=>{const e="undefined"!=typeof Zone&&Zone[ph("BLACK_LISTED_EVENTS")];if(e){const n={};return e.forEach(e=>{n[e]=e}),n}})(),Rh=function(e){return!!vh&&vh.hasOwnProperty(e)},Oh=function(e){const n=Sh[e.type];if(!n)return;const l=this[n];if(!l)return;const t=[e];if(1===l.length){const e=l[0];return e.zone!==Zone.current?e.zone.run(e.handler,this,t):e.handler.apply(this,t)}{const n=l.slice();for(let l=0;l<n.length&&!0!==e[Eh];l++){const e=n[l];e.zone!==Zone.current?e.zone.run(e.handler,this,t):e.handler.apply(this,t)}}};let bh=(()=>(class extends Jc{constructor(e,n,l){super(e),this.ngZone=n,l&&function(e){return"server"===e}(l)||this.patchEvent()}patchEvent(){if("undefined"==typeof Event||!Event||!Event.prototype)return;if(Event.prototype.__zone_symbol__stopImmediatePropagation)return;const e=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[Eh]=!0),e&&e.apply(this,arguments)}}supports(e){return!0}addEventListener(e,n,l){let t=l;if(!e[mh]||hs.isInAngularZone()&&!Rh(n))e.addEventListener(n,t,!1);else{let l=Sh[n];l||(l=Sh[n]=ph("ANGULAR"+n+"FALSE"));let i=e[l];const s=i&&i.length>0;i||(i=e[l]=[]);const r=Rh(n)?Zone.root:Zone.current;if(0===i.length)i.push({zone:r,handler:t});else{let e=!1;for(let n=0;n<i.length;n++)if(i[n].handler===t){e=!0;break}e||i.push({zone:r,handler:t})}s||e[mh](n,Oh,!1)}return()=>this.removeEventListener(e,n,t)}removeEventListener(e,n,l){let t=e[fh];if(!t)return e.removeEventListener.apply(e,[n,l,!1]);let i=Sh[n],s=i&&e[i];if(!s)return e.removeEventListener.apply(e,[n,l,!1]);let r=!1;for(let u=0;u<s.length;u++)if(s[u].handler===l){r=!0,s.splice(u,1);break}r?0===s.length&&t.apply(e,[n,Oh,!1]):e.removeEventListener.apply(e,[n,l,!1])}}))();const Th={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},Ch=new be("HammerGestureConfig"),Ih=new be("HammerLoader");let yh=(()=>(class{constructor(){this.events=[],this.overrides={}}buildHammer(e){const n=new Hammer(e,this.options);n.get("pinch").set({enable:!0}),n.get("rotate").set({enable:!0});for(const l in this.overrides)n.get(l).set(this.overrides[l]);return n}}))(),Ah=(()=>(class extends Jc{constructor(e,n,l,t){super(e),this._config=n,this.console=l,this.loader=t}supports(e){return!(!Th.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e)||!window.Hammer&&!this.loader&&(this.console.warn(`The "${e}" event cannot be bound because Hammer.JS is not `+"loaded and no custom loader has been specified."),1))}addEventListener(e,n,l){const t=this.manager.getZone();if(n=n.toLowerCase(),!window.Hammer&&this.loader){let t=!1,i=()=>{t=!0};return this.loader().then(()=>{if(!window.Hammer)return this.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(i=()=>{});t||(i=this.addEventListener(e,n,l))}).catch(()=>{this.console.warn(`The "${n}" event cannot be bound because the custom `+"Hammer.JS loader failed."),i=()=>{}}),()=>{i()}}return t.runOutsideAngular(()=>{const i=this._config.buildHammer(e),s=function(e){t.runGuarded((function(){l(e)}))};return i.on(n,s),()=>{i.off(n,s),"function"==typeof i.destroy&&i.destroy()}})}isCustomEvent(e){return this._config.events.indexOf(e)>-1}}))();const Nh=["alt","control","meta","shift"],_h={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let wh=(()=>{class e extends Jc{constructor(e){super(e)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,l,t){const i=e.parseEventName(l),s=e.eventCallback(i.fullKey,t,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>xc().onAndCancel(n,i.domEventName,s))}static parseEventName(n){const l=n.toLowerCase().split("."),t=l.shift();if(0===l.length||"keydown"!==t&&"keyup"!==t)return null;const i=e._normalizeKey(l.pop());let s="";if(Nh.forEach(e=>{const n=l.indexOf(e);n>-1&&(l.splice(n,1),s+=e+".")}),s+=i,0!=l.length||0===i.length)return null;const r={};return r.domEventName=t,r.fullKey=s,r}static getEventFullKey(e){let n="",l=xc().getEventKey(e);return" "===(l=l.toLowerCase())?l="space":"."===l&&(l="dot"),Nh.forEach(t=>{t!=l&&(0,_h[t])(e)&&(n+=t+".")}),n+=l}static eventCallback(n,l,t){return i=>{e.getEventFullKey(i)===n&&t.runGuarded(()=>l(i))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return e})();class Ph{}let xh=(()=>(class extends Ph{constructor(e){super(),this._doc=e}sanitize(e,n){if(null==n)return null;switch(e){case Tn.NONE:return n;case Tn.HTML:return n instanceof Mh?n.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(n,"HTML"),function(e,n){let l=null;try{On=On||new nn(e);let t=n?String(n):"";l=On.getInertBodyElement(t);let i=5,s=t;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,t=s,s=l.innerHTML,l=On.getInertBodyElement(t)}while(t!==s);const r=new Sn,u=r.sanitizeChildren(bn(l)||l);return en()&&r.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),u}finally{if(l){const e=bn(l)||l;for(;e.firstChild;)e.removeChild(e.firstChild)}}}(this._doc,String(n)));case Tn.STYLE:return n instanceof Dh?n.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(n,"Style"),function(e){if(!(e=String(e).trim()))return"";const n=e.match(yn);return n&&sn(n[1])===n[1]||e.match(In)&&function(e){let n=!0,l=!0;for(let t=0;t<e.length;t++){const i=e.charAt(t);"'"===i&&l?n=!n:'"'===i&&n&&(l=!l)}return n&&l}(e)?e:(en()&&console.warn(`WARNING: sanitizing unsafe style value ${e} (see http://g.co/ng/security#xss).`),"unsafe")}(n));case Tn.SCRIPT:if(n instanceof Lh)return n.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(n,"Script"),new Error("unsafe value used in a script context");case Tn.URL:return n instanceof Uh||n instanceof Fh?n.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(n,"URL"),sn(String(n)));case Tn.RESOURCE_URL:if(n instanceof Uh)return n.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(n,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see http://g.co/ng/security#xss)`)}}checkNotSafeValue(e,n){if(e instanceof kh)throw new Error(`Required a safe ${n}, got a ${e.getTypeName()} `+"(see http://g.co/ng/security#xss)")}bypassSecurityTrustHtml(e){return new Mh(e)}bypassSecurityTrustStyle(e){return new Dh(e)}bypassSecurityTrustScript(e){return new Lh(e)}bypassSecurityTrustUrl(e){return new Fh(e)}bypassSecurityTrustResourceUrl(e){return new Uh(e)}}))();class kh{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity}`+" (see http://g.co/ng/security#xss)"}}class Mh extends kh{getTypeName(){return"HTML"}}class Dh extends kh{getTypeName(){return"Style"}}class Lh extends kh{getTypeName(){return"Script"}}class Fh extends kh{getTypeName(){return"URL"}}class Uh extends kh{getTypeName(){return"ResourceURL"}}const Hh=ys(Vs,"browser",[{provide:zi,useValue:Ma},{provide:Vi,useValue:function(){Gc.makeCurrent(),Kc.init()},multi:!0},{provide:Ho,useClass:zc,deps:[ka]},{provide:ka,useFactory:function(){return document},deps:[]}]);function Gh(){return new Xe}let Bh=(()=>{class e{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(n){return{ngModule:e,providers:[{provide:Gi,useValue:n.appId},{provide:Yc,useExisting:Gi},$c]}}}return e})();"undefined"!=typeof window&&window;class Wh{constructor(e,n){this.id=e,this.url=n}}class Vh extends Wh{constructor(e,n,l="imperative",t=null){super(e,n),this.navigationTrigger=l,this.restoredState=t}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class zh extends Wh{constructor(e,n,l){super(e,n),this.urlAfterRedirects=l}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Yh extends Wh{constructor(e,n,l){super(e,n),this.reason=l}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class $h extends Wh{constructor(e,n,l){super(e,n),this.error=l}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Kh extends Wh{constructor(e,n,l,t){super(e,n),this.urlAfterRedirects=l,this.state=t}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jh extends Wh{constructor(e,n,l,t){super(e,n),this.urlAfterRedirects=l,this.state=t}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qh extends Wh{constructor(e,n,l,t,i){super(e,n),this.urlAfterRedirects=l,this.state=t,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class qh extends Wh{constructor(e,n,l,t){super(e,n),this.urlAfterRedirects=l,this.state=t}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xh extends Wh{constructor(e,n,l,t){super(e,n),this.urlAfterRedirects=l,this.state=t}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zh{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Jh{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ed{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nd{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ld{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class td{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class id{constructor(e,n,l){this.routerEvent=e,this.position=n,this.anchor=l}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let sd=(()=>(class{}))();const rd="primary";class ud{constructor(e){this.params=e||{}}has(e){return this.params.hasOwnProperty(e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function od(e){return new ud(e)}const ad="ngNavigationCancelingError";function cd(e){const n=Error("NavigationCancelingError: "+e);return n[ad]=!0,n}function hd(e,n,l){const t=l.path.split("/");if(t.length>e.length)return null;if("full"===l.pathMatch&&(n.hasChildren()||t.length<e.length))return null;const i={};for(let s=0;s<t.length;s++){const n=t[s],l=e[s];if(n.startsWith(":"))i[n.substring(1)]=l;else if(n!==l.path)return null}return{consumed:e.slice(0,t.length),posParams:i}}class dd{constructor(e,n){this.routes=e,this.module=n}}function gd(e,n=""){for(let l=0;l<e.length;l++){const t=e[l];pd(t,md(n,t))}}function pd(e,n){if(!e)throw new Error(`\n      Invalid configuration of route '${n}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(e))throw new Error(`Invalid configuration of route '${n}': Array cannot be specified`);if(!e.component&&!e.children&&!e.loadChildren&&e.outlet&&e.outlet!==rd)throw new Error(`Invalid configuration of route '${n}': a componentless route without children or loadChildren cannot have a named outlet set`);if(e.redirectTo&&e.children)throw new Error(`Invalid configuration of route '${n}': redirectTo and children cannot be used together`);if(e.redirectTo&&e.loadChildren)throw new Error(`Invalid configuration of route '${n}': redirectTo and loadChildren cannot be used together`);if(e.children&&e.loadChildren)throw new Error(`Invalid configuration of route '${n}': children and loadChildren cannot be used together`);if(e.redirectTo&&e.component)throw new Error(`Invalid configuration of route '${n}': redirectTo and component cannot be used together`);if(e.path&&e.matcher)throw new Error(`Invalid configuration of route '${n}': path and matcher cannot be used together`);if(void 0===e.redirectTo&&!e.component&&!e.children&&!e.loadChildren)throw new Error(`Invalid configuration of route '${n}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===e.path&&void 0===e.matcher)throw new Error(`Invalid configuration of route '${n}': routes must have either a path or a matcher specified`);if("string"==typeof e.path&&"/"===e.path.charAt(0))throw new Error(`Invalid configuration of route '${n}': path cannot start with a slash`);if(""===e.path&&void 0!==e.redirectTo&&void 0===e.pathMatch)throw new Error(`Invalid configuration of route '{path: "${n}", redirectTo: "${e.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==e.pathMatch&&"full"!==e.pathMatch&&"prefix"!==e.pathMatch)throw new Error(`Invalid configuration of route '${n}': pathMatch can only be set to 'prefix' or 'full'`);e.children&&gd(e.children,n)}function md(e,n){return n?e||n.path?e&&!n.path?`${e}/`:!e&&n.path?n.path:`${e}/${n.path}`:"":e}function fd(e){const n=e.children&&e.children.map(fd),l=n?Object.assign({},e,{children:n}):Object.assign({},e);return!l.component&&(n||l.loadChildren)&&l.outlet&&l.outlet!==rd&&(l.component=sd),l}function Sd(e,n){const l=Object.keys(e),t=Object.keys(n);if(!l||!t||l.length!=t.length)return!1;let i;for(let s=0;s<l.length;s++)if(e[i=l[s]]!==n[i])return!1;return!0}function Ed(e){return Array.prototype.concat.apply([],e)}function vd(e){return e.length>0?e[e.length-1]:null}function Rd(e,n){for(const l in e)e.hasOwnProperty(l)&&n(e[l],l)}function Od(e){return Xn(e)?e:qn(e)?B(Promise.resolve(e)):Fa(e)}function bd(e,n,l){return l?function(e,n){return Sd(e,n)}(e.queryParams,n.queryParams)&&function e(n,l){if(!yd(n.segments,l.segments))return!1;if(n.numberOfChildren!==l.numberOfChildren)return!1;for(const t in l.children){if(!n.children[t])return!1;if(!e(n.children[t],l.children[t]))return!1}return!0}(e.root,n.root):function(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(l=>n[l]===e[l])}(e.queryParams,n.queryParams)&&function e(n,l){return function n(l,t,i){if(l.segments.length>i.length)return!!yd(l.segments.slice(0,i.length),i)&&!t.hasChildren();if(l.segments.length===i.length){if(!yd(l.segments,i))return!1;for(const n in t.children){if(!l.children[n])return!1;if(!e(l.children[n],t.children[n]))return!1}return!0}{const e=i.slice(0,l.segments.length),s=i.slice(l.segments.length);return!!yd(l.segments,e)&&!!l.children[rd]&&n(l.children[rd],t,s)}}(n,l,l.segments)}(e.root,n.root)}class Td{constructor(e,n,l){this.root=e,this.queryParams=n,this.fragment=l}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=od(this.queryParams)),this._queryParamMap}toString(){return wd.serialize(this)}}class Cd{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Rd(n,(e,n)=>e.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Pd(this)}}class Id{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=od(this.parameters)),this._parameterMap}toString(){return Fd(this)}}function yd(e,n){return e.length===n.length&&e.every((e,l)=>e.path===n[l].path)}function Ad(e,n){let l=[];return Rd(e.children,(e,t)=>{t===rd&&(l=l.concat(n(e,t)))}),Rd(e.children,(e,t)=>{t!==rd&&(l=l.concat(n(e,t)))}),l}class Nd{}class _d{parse(e){const n=new Wd(e);return new Td(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){var n;return`${`/${function e(n,l){if(!n.hasChildren())return Pd(n);if(l){const l=n.children[rd]?e(n.children[rd],!1):"",t=[];return Rd(n.children,(n,l)=>{l!==rd&&t.push(`${l}:${e(n,!1)}`)}),t.length>0?`${l}(${t.join("//")})`:l}{const l=Ad(n,(l,t)=>t===rd?[e(n.children[rd],!1)]:[`${t}:${e(l,!1)}`]);return`${Pd(n)}/(${l.join("//")})`}}(e.root,!0)}`}${function(e){const n=Object.keys(e).map(n=>{const l=e[n];return Array.isArray(l)?l.map(e=>`${kd(n)}=${kd(e)}`).join("&"):`${kd(n)}=${kd(l)}`});return n.length?`?${n.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const wd=new _d;function Pd(e){return e.segments.map(e=>Fd(e)).join("/")}function xd(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function kd(e){return xd(e).replace(/%3B/gi,";")}function Md(e){return xd(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Dd(e){return decodeURIComponent(e)}function Ld(e){return Dd(e.replace(/\+/g,"%20"))}function Fd(e){return`${Md(e.path)}${n=e.parameters,Object.keys(n).map(e=>`;${Md(e)}=${Md(n[e])}`).join("")}`;var n}const Ud=/^[^\/()?;=#]+/;function Hd(e){const n=e.match(Ud);return n?n[0]:""}const Gd=/^[^=?&#]+/,Bd=/^[^?&#]+/;class Wd{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Cd([],{}):new Cd([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let l={};return this.peekStartsWith("(")&&(l=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(l[rd]=new Cd(e,n)),l}parseSegment(){const e=Hd(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Id(Dd(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=Hd(this.remaining);if(!n)return;this.capture(n);let l="";if(this.consumeOptional("=")){const e=Hd(this.remaining);e&&this.capture(l=e)}e[Dd(n)]=Dd(l)}parseQueryParam(e){const n=function(e){const n=e.match(Gd);return n?n[0]:""}(this.remaining);if(!n)return;this.capture(n);let l="";if(this.consumeOptional("=")){const e=function(e){const n=e.match(Bd);return n?n[0]:""}(this.remaining);e&&this.capture(l=e)}const t=Ld(n),i=Ld(l);if(e.hasOwnProperty(t)){let n=e[t];Array.isArray(n)||(e[t]=n=[n]),n.push(i)}else e[t]=i}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const l=Hd(this.remaining),t=this.remaining[l.length];if("/"!==t&&")"!==t&&";"!==t)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;l.indexOf(":")>-1?(i=l.substr(0,l.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=rd);const s=this.parseChildren();n[i]=1===Object.keys(s).length?s[rd]:new Cd([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Vd{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=zd(e,this._root);return n?n.children.map(e=>e.value):[]}firstChild(e){const n=zd(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=Yd(e,this._root);return n.length<2?[]:n[n.length-2].children.map(e=>e.value).filter(n=>n!==e)}pathFromRoot(e){return Yd(e,this._root).map(e=>e.value)}}function zd(e,n){if(e===n.value)return n;for(const l of n.children){const n=zd(e,l);if(n)return n}return null}function Yd(e,n){if(e===n.value)return[n];for(const l of n.children){const t=Yd(e,l);if(t.length)return t.unshift(n),t}return[]}class $d{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function Kd(e){const n={};return e&&e.children.forEach(e=>n[e.value.outlet]=e),n}class jd extends Vd{constructor(e,n){super(e),this.snapshot=n,eg(this,e)}toString(){return this.snapshot.toString()}}function Qd(e,n){const l=function(e,n){const l=new Zd([],{},{},"",{},rd,n,null,e.root,-1,{});return new Jd("",new $d(l,[]))}(e,n),t=new Ua([new Id("",{})]),i=new Ua({}),s=new Ua({}),r=new Ua({}),u=new Ua(""),o=new qd(t,i,r,u,s,rd,n,l.root);return o.snapshot=l.root,new jd(new $d(o,[]),l)}class qd{constructor(e,n,l,t,i,s,r,u){this.url=e,this.params=n,this.queryParams=l,this.fragment=t,this.data=i,this.outlet=s,this.component=r,this._futureSnapshot=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(F(e=>od(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(F(e=>od(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Xd(e,n="emptyOnly"){const l=e.pathFromRoot;let t=0;if("always"!==n)for(t=l.length-1;t>=1;){const e=l[t],n=l[t-1];if(e.routeConfig&&""===e.routeConfig.path)t--;else{if(n.component)break;t--}}return function(e){return e.reduce((e,n)=>({params:Object.assign({},e.params,n.params),data:Object.assign({},e.data,n.data),resolve:Object.assign({},e.resolve,n._resolvedData)}),{params:{},data:{},resolve:{}})}(l.slice(t))}class Zd{constructor(e,n,l,t,i,s,r,u,o,a,c){this.url=e,this.params=n,this.queryParams=l,this.fragment=t,this.data=i,this.outlet=s,this.component=r,this.routeConfig=u,this._urlSegment=o,this._lastPathIndex=a,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=od(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=od(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(e=>e.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Jd extends Vd{constructor(e,n){super(n),this.url=e,eg(this,n)}toString(){return ng(this._root)}}function eg(e,n){n.value._routerState=e,n.children.forEach(n=>eg(e,n))}function ng(e){const n=e.children.length>0?` { ${e.children.map(ng).join(", ")} } `:"";return`${e.value}${n}`}function lg(e){if(e.snapshot){const n=e.snapshot,l=e._futureSnapshot;e.snapshot=l,Sd(n.queryParams,l.queryParams)||e.queryParams.next(l.queryParams),n.fragment!==l.fragment&&e.fragment.next(l.fragment),Sd(n.params,l.params)||e.params.next(l.params),function(e,n){if(e.length!==n.length)return!1;for(let l=0;l<e.length;++l)if(!Sd(e[l],n[l]))return!1;return!0}(n.url,l.url)||e.url.next(l.url),Sd(n.data,l.data)||e.data.next(l.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function tg(e,n){var l,t;return Sd(e.params,n.params)&&yd(l=e.url,t=n.url)&&l.every((e,n)=>Sd(e.parameters,t[n].parameters))&&!(!e.parent!=!n.parent)&&(!e.parent||tg(e.parent,n.parent))}function ig(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function sg(e,n,l,t,i){let s={};return t&&Rd(t,(e,n)=>{s[n]=Array.isArray(e)?e.map(e=>`${e}`):`${e}`}),new Td(l.root===e?n:function e(n,l,t){const i={};return Rd(n.children,(n,s)=>{i[s]=n===l?t:e(n,l,t)}),new Cd(n.segments,i)}(l.root,e,n),s,i)}class rg{constructor(e,n,l){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=l,e&&l.length>0&&ig(l[0]))throw new Error("Root segment cannot have matrix parameters");const t=l.find(e=>"object"==typeof e&&null!=e&&e.outlets);if(t&&t!==vd(l))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ug{constructor(e,n,l){this.segmentGroup=e,this.processChildren=n,this.index=l}}function og(e){return"object"==typeof e&&null!=e&&e.outlets?e.outlets[rd]:`${e}`}function ag(e,n,l){if(e||(e=new Cd([],{})),0===e.segments.length&&e.hasChildren())return cg(e,n,l);const t=function(e,n,l){let t=0,i=n;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(t>=l.length)return s;const n=e.segments[i],r=og(l[t]),u=t<l.length-1?l[t+1]:null;if(i>0&&void 0===r)break;if(r&&u&&"object"==typeof u&&void 0===u.outlets){if(!pg(r,u,n))return s;t+=2}else{if(!pg(r,{},n))return s;t++}i++}return{match:!0,pathIndex:i,commandIndex:t}}(e,n,l),i=l.slice(t.commandIndex);if(t.match&&t.pathIndex<e.segments.length){const n=new Cd(e.segments.slice(0,t.pathIndex),{});return n.children[rd]=new Cd(e.segments.slice(t.pathIndex),e.children),cg(n,0,i)}return t.match&&0===i.length?new Cd(e.segments,{}):t.match&&!e.hasChildren()?hg(e,n,l):t.match?cg(e,0,i):hg(e,n,l)}function cg(e,n,l){if(0===l.length)return new Cd(e.segments,{});{const t=function(e){return"object"!=typeof e[0]?{[rd]:e}:void 0===e[0].outlets?{[rd]:e}:e[0].outlets}(l),i={};return Rd(t,(l,t)=>{null!==l&&(i[t]=ag(e.children[t],n,l))}),Rd(e.children,(e,n)=>{void 0===t[n]&&(i[n]=e)}),new Cd(e.segments,i)}}function hg(e,n,l){const t=e.segments.slice(0,n);let i=0;for(;i<l.length;){if("object"==typeof l[i]&&void 0!==l[i].outlets){const e=dg(l[i].outlets);return new Cd(t,e)}if(0===i&&ig(l[0])){t.push(new Id(e.segments[n].path,l[0])),i++;continue}const s=og(l[i]),r=i<l.length-1?l[i+1]:null;s&&r&&ig(r)?(t.push(new Id(s,gg(r))),i+=2):(t.push(new Id(s,{})),i++)}return new Cd(t,{})}function dg(e){const n={};return Rd(e,(e,l)=>{null!==e&&(n[l]=hg(new Cd([],{}),0,e))}),n}function gg(e){const n={};return Rd(e,(e,l)=>n[l]=`${e}`),n}function pg(e,n,l){return e==l.path&&Sd(n,l.parameters)}const mg=(e,n,l)=>F(t=>(new fg(n,t.targetRouterState,t.currentRouterState,l).activate(e),t));class fg{constructor(e,n,l,t){this.routeReuseStrategy=e,this.futureState=n,this.currState=l,this.forwardEvent=t}activate(e){const n=this.futureState._root,l=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,l,e),lg(this.futureState.root),this.activateChildRoutes(n,l,e)}deactivateChildRoutes(e,n,l){const t=Kd(n);e.children.forEach(e=>{const n=e.value.outlet;this.deactivateRoutes(e,t[n],l),delete t[n]}),Rd(t,(e,n)=>{this.deactivateRouteAndItsChildren(e,l)})}deactivateRoutes(e,n,l){const t=e.value,i=n?n.value:null;if(t===i)if(t.component){const i=l.getContext(t.outlet);i&&this.deactivateChildRoutes(e,n,i.children)}else this.deactivateChildRoutes(e,n,l);else i&&this.deactivateRouteAndItsChildren(n,l)}deactivateRouteAndItsChildren(e,n){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const l=n.getContext(e.value.outlet);if(l&&l.outlet){const n=l.outlet.detach(),t=l.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:n,route:e,contexts:t})}}deactivateRouteAndOutlet(e,n){const l=n.getContext(e.value.outlet);if(l){const t=Kd(e),i=e.value.component?l.children:n;Rd(t,(e,n)=>this.deactivateRouteAndItsChildren(e,i)),l.outlet&&(l.outlet.deactivate(),l.children.onOutletDeactivated())}}activateChildRoutes(e,n,l){const t=Kd(n);e.children.forEach(e=>{this.activateRoutes(e,t[e.value.outlet],l),this.forwardEvent(new td(e.value.snapshot))}),e.children.length&&this.forwardEvent(new nd(e.value.snapshot))}activateRoutes(e,n,l){const t=e.value,i=n?n.value:null;if(lg(t),t===i)if(t.component){const i=l.getOrCreateContext(t.outlet);this.activateChildRoutes(e,n,i.children)}else this.activateChildRoutes(e,n,l);else if(t.component){const n=l.getOrCreateContext(t.outlet);if(this.routeReuseStrategy.shouldAttach(t.snapshot)){const e=this.routeReuseStrategy.retrieve(t.snapshot);this.routeReuseStrategy.store(t.snapshot,null),n.children.onOutletReAttached(e.contexts),n.attachRef=e.componentRef,n.route=e.route.value,n.outlet&&n.outlet.attach(e.componentRef,e.route.value),Sg(e.route)}else{const l=function(e){for(let n=e.parent;n;n=n.parent){const e=n.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(t.snapshot),i=l?l.module.componentFactoryResolver:null;n.attachRef=null,n.route=t,n.resolver=i,n.outlet&&n.outlet.activateWith(t,i),this.activateChildRoutes(e,null,n.children)}}else this.activateChildRoutes(e,null,l)}}function Sg(e){lg(e.value),e.children.forEach(Sg)}function Eg(e){return"function"==typeof e}function vg(e){return e instanceof Td}class Rg{constructor(e){this.segmentGroup=e||null}}class Og{constructor(e){this.urlTree=e}}function bg(e){return new R(n=>n.error(new Rg(e)))}function Tg(e){return new R(n=>n.error(new Og(e)))}function Cg(e){return new R(n=>n.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e}'`)))}class Ig{constructor(e,n,l,t,i){this.configLoader=n,this.urlSerializer=l,this.urlTree=t,this.config=i,this.allowRedirects=!0,this.ngModule=e.get(He)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,rd).pipe(F(e=>this.createUrlTree(e,this.urlTree.queryParams,this.urlTree.fragment))).pipe(oc(e=>{if(e instanceof Og)return this.allowRedirects=!1,this.match(e.urlTree);if(e instanceof Rg)throw this.noMatchError(e);throw e}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,rd).pipe(F(n=>this.createUrlTree(n,e.queryParams,e.fragment))).pipe(oc(e=>{if(e instanceof Rg)throw this.noMatchError(e);throw e}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,n,l){const t=e.segments.length>0?new Cd([],{[rd]:e}):e;return new Td(t,n,l)}expandSegmentGroup(e,n,l,t){return 0===l.segments.length&&l.hasChildren()?this.expandChildren(e,n,l).pipe(F(e=>new Cd([],e))):this.expandSegment(e,l,n,l.segments,t,!0)}expandChildren(e,n,l){return function(e,n){if(0===Object.keys(e).length)return Fa({});const l=[],t=[],i={};return Rd(e,(e,s)=>{const r=n(s,e).pipe(F(e=>i[s]=e));s===rd?l.push(r):t.push(r)}),Fa.apply(null,l.concat(t)).pipe($a(),uc(),F(()=>i))}(l.children,(l,t)=>this.expandSegmentGroup(e,n,t,l))}expandSegment(e,n,l,t,i,s){return Fa(...l).pipe(F(r=>this.expandSegmentAgainstRoute(e,n,l,r,t,i,s).pipe(oc(e=>{if(e instanceof Rg)return Fa(null);throw e}))),$a(),pc(e=>!!e),oc((e,l)=>{if(e instanceof Ha||"EmptyError"===e.name){if(this.noLeftoversInUrl(n,t,i))return Fa(new Cd([],{}));throw new Rg(n)}throw e}))}noLeftoversInUrl(e,n,l){return 0===n.length&&!e.children[l]}expandSegmentAgainstRoute(e,n,l,t,i,s,r){return _g(t)!==s?bg(n):void 0===t.redirectTo?this.matchSegmentAgainstRoute(e,n,t,i):r&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,n,l,t,i,s):bg(n)}expandSegmentAgainstRouteUsingRedirect(e,n,l,t,i,s){return"**"===t.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,l,t,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,l,t,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,l,t){const i=this.applyRedirectCommands([],l.redirectTo,{});return l.redirectTo.startsWith("/")?Tg(i):this.lineralizeSegments(l,i).pipe(W(l=>{const i=new Cd(l,{});return this.expandSegment(e,i,n,l,t,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,l,t,i,s){const{matched:r,consumedSegments:u,lastChild:o,positionalParamSegments:a}=yg(n,t,i);if(!r)return bg(n);const c=this.applyRedirectCommands(u,t.redirectTo,a);return t.redirectTo.startsWith("/")?Tg(c):this.lineralizeSegments(t,c).pipe(W(t=>this.expandSegment(e,n,l,t.concat(i.slice(o)),s,!1)))}matchSegmentAgainstRoute(e,n,l,t){if("**"===l.path)return l.loadChildren?this.configLoader.load(e.injector,l).pipe(F(e=>(l._loadedConfig=e,new Cd(t,{})))):Fa(new Cd(t,{}));const{matched:i,consumedSegments:s,lastChild:r}=yg(n,l,t);if(!i)return bg(n);const u=t.slice(r);return this.getChildConfig(e,l,t).pipe(W(e=>{const l=e.module,t=e.routes,{segmentGroup:i,slicedSegments:r}=function(e,n,l,t){return l.length>0&&function(e,n,l){return l.some(l=>Ng(e,n,l)&&_g(l)!==rd)}(e,l,t)?{segmentGroup:Ag(new Cd(n,function(e,n){const l={};l[rd]=n;for(const t of e)""===t.path&&_g(t)!==rd&&(l[_g(t)]=new Cd([],{}));return l}(t,new Cd(l,e.children)))),slicedSegments:[]}:0===l.length&&function(e,n,l){return l.some(l=>Ng(e,n,l))}(e,l,t)?{segmentGroup:Ag(new Cd(e.segments,function(e,n,l,t){const i={};for(const s of l)Ng(e,n,s)&&!t[_g(s)]&&(i[_g(s)]=new Cd([],{}));return Object.assign({},t,i)}(e,l,t,e.children))),slicedSegments:l}:{segmentGroup:e,slicedSegments:l}}(n,s,u,t);return 0===r.length&&i.hasChildren()?this.expandChildren(l,t,i).pipe(F(e=>new Cd(s,e))):0===t.length&&0===r.length?Fa(new Cd(s,{})):this.expandSegment(l,i,t,r,rd,!0).pipe(F(e=>new Cd(s.concat(e.segments),e.children)))}))}getChildConfig(e,n,l){return n.children?Fa(new dd(n.children,e)):n.loadChildren?void 0!==n._loadedConfig?Fa(n._loadedConfig):function(e,n,l){const t=n.canLoad;return t&&0!==t.length?B(t).pipe(F(t=>{const i=e.get(t);let s;if(function(e){return e&&Eg(e.canLoad)}(i))s=i.canLoad(n,l);else{if(!Eg(i))throw new Error("Invalid CanLoad guard");s=i(n,l)}return Od(s)})).pipe($a(),(i=e=>!0===e,e=>e.lift(new mc(i,void 0,e)))):Fa(!0);var i}(e.injector,n,l).pipe(W(l=>l?this.configLoader.load(e.injector,n).pipe(F(e=>(n._loadedConfig=e,e))):function(e){return new R(n=>n.error(cd(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`)))}(n))):Fa(new dd([],e))}lineralizeSegments(e,n){let l=[],t=n.root;for(;;){if(l=l.concat(t.segments),0===t.numberOfChildren)return Fa(l);if(t.numberOfChildren>1||!t.children[rd])return Cg(e.redirectTo);t=t.children[rd]}}applyRedirectCommands(e,n,l){return this.applyRedirectCreatreUrlTree(n,this.urlSerializer.parse(n),e,l)}applyRedirectCreatreUrlTree(e,n,l,t){const i=this.createSegmentGroup(e,n.root,l,t);return new Td(i,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const l={};return Rd(e,(e,t)=>{if("string"==typeof e&&e.startsWith(":")){const i=e.substring(1);l[t]=n[i]}else l[t]=e}),l}createSegmentGroup(e,n,l,t){const i=this.createSegments(e,n.segments,l,t);let s={};return Rd(n.children,(n,i)=>{s[i]=this.createSegmentGroup(e,n,l,t)}),new Cd(i,s)}createSegments(e,n,l,t){return n.map(n=>n.path.startsWith(":")?this.findPosParam(e,n,t):this.findOrReturn(n,l))}findPosParam(e,n,l){const t=l[n.path.substring(1)];if(!t)throw new Error(`Cannot redirect to '${e}'. Cannot find '${n.path}'.`);return t}findOrReturn(e,n){let l=0;for(const t of n){if(t.path===e.path)return n.splice(l),t;l++}return e}}function yg(e,n,l){if(""===n.path)return"full"===n.pathMatch&&(e.hasChildren()||l.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const t=(n.matcher||hd)(l,e,n);return t?{matched:!0,consumedSegments:t.consumed,lastChild:t.consumed.length,positionalParamSegments:t.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Ag(e){if(1===e.numberOfChildren&&e.children[rd]){const n=e.children[rd];return new Cd(e.segments.concat(n.segments),n.children)}return e}function Ng(e,n,l){return(!(e.hasChildren()||n.length>0)||"full"!==l.pathMatch)&&""===l.path&&void 0!==l.redirectTo}function _g(e){return e.outlet||rd}class wg{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Pg{constructor(e,n){this.component=e,this.route=n}}function xg(e,n,l){const t=e._root;return function e(n,l,t,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const r=Kd(l);return n.children.forEach(n=>{!function(n,l,t,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const r=n.value,u=l?l.value:null,o=t?t.getContext(n.value.outlet):null;if(u&&r.routeConfig===u.routeConfig){const a=function(e,n,l){if("function"==typeof l)return l(e,n);switch(l){case"pathParamsChange":return!yd(e.url,n.url);case"pathParamsOrQueryParamsChange":return!yd(e.url,n.url)||!Sd(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!tg(e,n)||!Sd(e.queryParams,n.queryParams);case"paramsChange":default:return!tg(e,n)}}(u,r,r.routeConfig.runGuardsAndResolvers);a?s.canActivateChecks.push(new wg(i)):(r.data=u.data,r._resolvedData=u._resolvedData),e(n,l,r.component?o?o.children:null:t,i,s),a&&s.canDeactivateChecks.push(new Pg(o&&o.outlet&&o.outlet.component||null,u))}else u&&Mg(l,o,s),s.canActivateChecks.push(new wg(i)),e(n,null,r.component?o?o.children:null:t,i,s)}(n,r[n.value.outlet],t,i.concat([n.value]),s),delete r[n.value.outlet]}),Rd(r,(e,n)=>Mg(e,t.getContext(n),s)),s}(t,n?n._root:null,l,[t.value])}function kg(e,n,l){const t=function(e){if(!e)return null;for(let n=e.parent;n;n=n.parent){const e=n.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(n);return(t?t.module.injector:l).get(e)}function Mg(e,n,l){const t=Kd(e),i=e.value;Rd(t,(e,t)=>{Mg(e,i.component?n?n.children.getContext(t):null:n,l)}),l.canDeactivateChecks.push(new Pg(i.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,i))}const Dg=Symbol("INITIAL_VALUE");function Lg(){return Sc(e=>(function(...e){let n=null,l=null;return A(e[e.length-1])&&(l=e.pop()),"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&o(e[0])&&(e=e[0]),K(e,l).lift(new Ba(n))})(...e.map(e=>e.pipe(hc(1),Oc(Dg)))).pipe(bc((e,n)=>{let l=!1;return n.reduce((e,t,i)=>{if(e!==Dg)return e;if(t===Dg&&(l=!0),!l){if(!1===t)return t;if(i===n.length-1||vg(t))return t}return e},e)},Dg),Ka(e=>e!==Dg),F(e=>vg(e)?e:!0===e),hc(1)))}function Fg(e,n){return null!==e&&n&&n(new ld(e)),Fa(!0)}function Ug(e,n){return null!==e&&n&&n(new ed(e)),Fa(!0)}function Hg(e,n,l){const t=n.routeConfig?n.routeConfig.canActivate:null;return t&&0!==t.length?Fa(t.map(t=>Ya(()=>{const i=kg(t,n,l);let s;if(function(e){return e&&Eg(e.canActivate)}(i))s=Od(i.canActivate(n,e));else{if(!Eg(i))throw new Error("Invalid CanActivate guard");s=Od(i(n,e))}return s.pipe(pc())}))).pipe(Lg()):Fa(!0)}function Gg(e,n,l){const t=n[n.length-1],i=n.slice(0,n.length-1).reverse().map(e=>(function(e){const n=e.routeConfig?e.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:e,guards:n}:null})(e)).filter(e=>null!==e).map(n=>Ya(()=>Fa(n.guards.map(i=>{const s=kg(i,n.node,l);let r;if(function(e){return e&&Eg(e.canActivateChild)}(s))r=Od(s.canActivateChild(t,e));else{if(!Eg(s))throw new Error("Invalid CanActivateChild guard");r=Od(s(t,e))}return r.pipe(pc())})).pipe(Lg())));return Fa(i).pipe(Lg())}class Bg{}class Wg{constructor(e,n,l,t,i,s){this.rootComponentType=e,this.config=n,this.urlTree=l,this.url=t,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=s}recognize(){try{const e=Yg(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,n=this.processSegmentGroup(this.config,e,rd),l=new Zd([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},rd,this.rootComponentType,null,this.urlTree.root,-1,{}),t=new $d(l,n),i=new Jd(this.url,t);return this.inheritParamsAndData(i._root),Fa(i)}catch(e){return new R(n=>n.error(e))}}inheritParamsAndData(e){const n=e.value,l=Xd(n,this.paramsInheritanceStrategy);n.params=Object.freeze(l.params),n.data=Object.freeze(l.data),e.children.forEach(e=>this.inheritParamsAndData(e))}processSegmentGroup(e,n,l){return 0===n.segments.length&&n.hasChildren()?this.processChildren(e,n):this.processSegment(e,n,n.segments,l)}processChildren(e,n){const l=Ad(n,(n,l)=>this.processSegmentGroup(e,n,l));return function(e){const n={};e.forEach(e=>{const l=n[e.value.outlet];if(l){const n=l.url.map(e=>e.toString()).join("/"),t=e.value.url.map(e=>e.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${n}' and '${t}'.`)}n[e.value.outlet]=e.value})}(l),l.sort((e,n)=>e.value.outlet===rd?-1:n.value.outlet===rd?1:e.value.outlet.localeCompare(n.value.outlet)),l}processSegment(e,n,l,t){for(const s of e)try{return this.processSegmentAgainstRoute(s,n,l,t)}catch(i){if(!(i instanceof Bg))throw i}if(this.noLeftoversInUrl(n,l,t))return[];throw new Bg}noLeftoversInUrl(e,n,l){return 0===n.length&&!e.children[l]}processSegmentAgainstRoute(e,n,l,t){if(e.redirectTo)throw new Bg;if((e.outlet||rd)!==t)throw new Bg;let i,s=[],r=[];if("**"===e.path){const s=l.length>0?vd(l).parameters:{};i=new Zd(l,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,jg(e),t,e.component,e,Vg(n),zg(n)+l.length,Qg(e))}else{const u=function(e,n,l){if(""===n.path){if("full"===n.pathMatch&&(e.hasChildren()||l.length>0))throw new Bg;return{consumedSegments:[],lastChild:0,parameters:{}}}const t=(n.matcher||hd)(l,e,n);if(!t)throw new Bg;const i={};Rd(t.posParams,(e,n)=>{i[n]=e.path});const s=t.consumed.length>0?Object.assign({},i,t.consumed[t.consumed.length-1].parameters):i;return{consumedSegments:t.consumed,lastChild:t.consumed.length,parameters:s}}(n,e,l);s=u.consumedSegments,r=l.slice(u.lastChild),i=new Zd(s,u.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,jg(e),t,e.component,e,Vg(n),zg(n)+s.length,Qg(e))}const u=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),{segmentGroup:o,slicedSegments:a}=Yg(n,s,r,u,this.relativeLinkResolution);if(0===a.length&&o.hasChildren()){const e=this.processChildren(u,o);return[new $d(i,e)]}if(0===u.length&&0===a.length)return[new $d(i,[])];const c=this.processSegment(u,o,a,rd);return[new $d(i,c)]}}function Vg(e){let n=e;for(;n._sourceSegment;)n=n._sourceSegment;return n}function zg(e){let n=e,l=n._segmentIndexShift?n._segmentIndexShift:0;for(;n._sourceSegment;)l+=(n=n._sourceSegment)._segmentIndexShift?n._segmentIndexShift:0;return l-1}function Yg(e,n,l,t,i){if(l.length>0&&function(e,n,l){return l.some(l=>$g(e,n,l)&&Kg(l)!==rd)}(e,l,t)){const i=new Cd(n,function(e,n,l,t){const i={};i[rd]=t,t._sourceSegment=e,t._segmentIndexShift=n.length;for(const s of l)if(""===s.path&&Kg(s)!==rd){const l=new Cd([],{});l._sourceSegment=e,l._segmentIndexShift=n.length,i[Kg(s)]=l}return i}(e,n,t,new Cd(l,e.children)));return i._sourceSegment=e,i._segmentIndexShift=n.length,{segmentGroup:i,slicedSegments:[]}}if(0===l.length&&function(e,n,l){return l.some(l=>$g(e,n,l))}(e,l,t)){const s=new Cd(e.segments,function(e,n,l,t,i,s){const r={};for(const u of t)if($g(e,l,u)&&!i[Kg(u)]){const l=new Cd([],{});l._sourceSegment=e,l._segmentIndexShift="legacy"===s?e.segments.length:n.length,r[Kg(u)]=l}return Object.assign({},i,r)}(e,n,l,t,e.children,i));return s._sourceSegment=e,s._segmentIndexShift=n.length,{segmentGroup:s,slicedSegments:l}}const s=new Cd(e.segments,e.children);return s._sourceSegment=e,s._segmentIndexShift=n.length,{segmentGroup:s,slicedSegments:l}}function $g(e,n,l){return(!(e.hasChildren()||n.length>0)||"full"!==l.pathMatch)&&""===l.path&&void 0===l.redirectTo}function Kg(e){return e.outlet||rd}function jg(e){return e.data||{}}function Qg(e){return e.resolve||{}}function qg(e,n,l,t){const i=kg(e,n,t);return Od(i.resolve?i.resolve(n,l):i(n,l))}function Xg(e){return function(n){return n.pipe(Sc(n=>{const l=e(n);return l?B(l).pipe(F(()=>n)):B([n])}))}}class Zg{}class Jg{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}const ep=new be("ROUTES");class np{constructor(e,n,l,t){this.loader=e,this.compiler=n,this.onLoadStartListener=l,this.onLoadEndListener=t}load(e,n){return this.onLoadStartListener&&this.onLoadStartListener(n),this.loadModuleFactory(n.loadChildren).pipe(F(l=>{this.onLoadEndListener&&this.onLoadEndListener(n);const t=l.create(e);return new dd(Ed(t.injector.get(ep)).map(fd),t)}))}loadModuleFactory(e){return"string"==typeof e?B(this.loader.load(e)):Od(e()).pipe(W(e=>e instanceof Ge?Fa(e):B(this.compiler.compileModuleAsync(e))))}}class lp{}class tp{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,n){return e}}function ip(e){throw e}function sp(e,n,l){return n.parse("/")}function rp(e,n){return Fa(null)}class up{constructor(e,n,l,t,i,s,r,u){this.rootComponentType=e,this.urlSerializer=n,this.rootContexts=l,this.location=t,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new I,this.errorHandler=ip,this.malformedUriErrorHandler=sp,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:rp,afterPreactivation:rp},this.urlHandlingStrategy=new tp,this.routeReuseStrategy=new Jg,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=i.get(He),this.console=i.get($i);const o=i.get(hs);this.isNgZoneEnabled=o instanceof hs,this.resetConfig(u),this.currentUrlTree=new Td(new Cd([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new np(s,r,e=>this.triggerEvent(new Zh(e)),e=>this.triggerEvent(new Jh(e))),this.routerState=Qd(this.currentUrlTree,this.rootComponentType),this.transitions=new Ua({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(e){const n=this.events;return e.pipe(Ka(e=>0!==e.id),F(e=>Object.assign({},e,{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl)})),Sc(e=>{let l=!1,t=!1;return Fa(e).pipe(yc(e=>{this.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign({},this.lastSuccessfulNavigation,{previousNavigation:null}):null}}),Sc(e=>{const l=!this.navigated||e.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||l)&&this.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return Fa(e).pipe(Sc(e=>{const l=this.transitions.getValue();return n.next(new Vh(e.id,this.serializeUrl(e.extractedUrl),e.source,e.restoredState)),l!==this.transitions.getValue()?Va:[e]}),Sc(e=>Promise.resolve(e)),function(e,n,l,t){return function(i){return i.pipe(Sc(i=>(function(e,n,l,t,i){return new Ig(e,n,l,t,i).apply()})(e,n,l,i.extractedUrl,t).pipe(F(e=>Object.assign({},i,{urlAfterRedirects:e})))))}}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),yc(e=>{this.currentNavigation=Object.assign({},this.currentNavigation,{finalUrl:e.urlAfterRedirects})}),function(e,n,l,t,i){return function(s){return s.pipe(W(s=>(function(e,n,l,t,i="emptyOnly",s="legacy"){return new Wg(e,n,l,t,i,s).recognize()})(e,n,s.urlAfterRedirects,l(s.urlAfterRedirects),t,i).pipe(F(e=>Object.assign({},s,{targetSnapshot:e})))))}}(this.rootComponentType,this.config,e=>this.serializeUrl(e),this.paramsInheritanceStrategy,this.relativeLinkResolution),yc(e=>{"eager"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(e.urlAfterRedirects,!!e.extras.replaceUrl,e.id,e.extras.state),this.browserUrlTree=e.urlAfterRedirects)}),yc(e=>{const l=new Kh(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);n.next(l)}));if(l&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:l,extractedUrl:t,source:i,restoredState:s,extras:r}=e,u=new Vh(l,this.serializeUrl(t),i,s);n.next(u);const o=Qd(t,this.rootComponentType).snapshot;return Fa(Object.assign({},e,{targetSnapshot:o,urlAfterRedirects:t,extras:Object.assign({},r,{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=e.rawUrl,this.browserUrlTree=e.urlAfterRedirects,e.resolve(null),Va}),Xg(e=>{const{targetSnapshot:n,id:l,extractedUrl:t,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:r}}=e;return this.hooks.beforePreactivation(n,{navigationId:l,appliedUrlTree:t,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!r})}),yc(e=>{const n=new jh(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(n)}),F(e=>Object.assign({},e,{guards:xg(e.targetSnapshot,e.currentSnapshot,this.rootContexts)})),function(e,n){return function(l){return l.pipe(W(l=>{const{targetSnapshot:t,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:r}}=l;return 0===r.length&&0===s.length?Fa(Object.assign({},l,{guardsResult:!0})):function(e,n,l,t){return B(e).pipe(W(e=>(function(e,n,l,t,i){const s=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return s&&0!==s.length?Fa(s.map(s=>{const r=kg(s,n,i);let u;if(function(e){return e&&Eg(e.canDeactivate)}(r))u=Od(r.canDeactivate(e,n,l,t));else{if(!Eg(r))throw new Error("Invalid CanDeactivate guard");u=Od(r(e,n,l,t))}return u.pipe(pc())})).pipe(Lg()):Fa(!0)})(e.component,e.route,l,n,t)),pc(e=>!0!==e,!0))}(r,t,i,e).pipe(W(l=>l&&function(e){return"boolean"==typeof e}(l)?function(e,n,l,t){return B(n).pipe(Ic(n=>B([Ug(n.route.parent,t),Fg(n.route,t),Gg(e,n.path,l),Hg(e,n.route,l)]).pipe($a(),pc(e=>!0!==e,!0))),pc(e=>!0!==e,!0))}(t,s,e,n):Fa(l)),F(e=>Object.assign({},l,{guardsResult:e})))}))}}(this.ngModule.injector,e=>this.triggerEvent(e)),yc(e=>{if(vg(e.guardsResult)){const n=cd(`Redirecting to "${this.serializeUrl(e.guardsResult)}"`);throw n.url=e.guardsResult,n}}),yc(e=>{const n=new Qh(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);this.triggerEvent(n)}),Ka(e=>{if(!e.guardsResult){this.resetUrlToCurrentUrlTree();const l=new Yh(e.id,this.serializeUrl(e.extractedUrl),"");return n.next(l),e.resolve(!1),!1}return!0}),Xg(e=>{if(e.guards.canActivateChecks.length)return Fa(e).pipe(yc(e=>{const n=new qh(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(n)}),function(e,n){return function(l){return l.pipe(W(l=>{const{targetSnapshot:t,guards:{canActivateChecks:i}}=l;return i.length?B(i).pipe(Ic(l=>(function(e,n,l,t){return function(e,n,l,t){const i=Object.keys(e);if(0===i.length)return Fa({});if(1===i.length){const s=i[0];return qg(e[s],n,l,t).pipe(F(e=>({[s]:e})))}const s={};return B(i).pipe(W(i=>qg(e[i],n,l,t).pipe(F(e=>(s[i]=e,e))))).pipe(uc(),F(()=>s))}(e._resolve,e,n,t).pipe(F(n=>(e._resolvedData=n,e.data=Object.assign({},e.data,Xd(e,l).resolve),null)))})(l.route,t,e,n)),function(e,n){return arguments.length>=2?function(l){return E(bc(e,n),Xa(1),ic(n))(l)}:function(n){return E(bc((n,l,t)=>e(n,l,t+1)),Xa(1))(n)}}((e,n)=>e),F(e=>l)):Fa(l)}))}}(this.paramsInheritanceStrategy,this.ngModule.injector),yc(e=>{const n=new Xh(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(n)}))}),Xg(e=>{const{targetSnapshot:n,id:l,extractedUrl:t,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:r}}=e;return this.hooks.afterPreactivation(n,{navigationId:l,appliedUrlTree:t,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!r})}),F(e=>{const n=function(e,n,l){const t=function e(n,l,t){if(t&&n.shouldReuseRoute(l.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=l.value;const s=function(n,l,t){return l.children.map(l=>{for(const i of t.children)if(n.shouldReuseRoute(i.value.snapshot,l.value))return e(n,l,i);return e(n,l)})}(n,l,t);return new $d(i,s)}{const t=n.retrieve(l.value);if(t){const e=t.route;return function e(n,l){if(n.value.routeConfig!==l.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==l.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");l.value._futureSnapshot=n.value;for(let t=0;t<n.children.length;++t)e(n.children[t],l.children[t])}(l,e),e}{const t=new qd(new Ua((i=l.value).url),new Ua(i.params),new Ua(i.queryParams),new Ua(i.fragment),new Ua(i.data),i.outlet,i.component,i),s=l.children.map(l=>e(n,l));return new $d(t,s)}}var i}(e,n._root,l?l._root:void 0);return new jd(t,n)}(this.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign({},e,{targetRouterState:n})}),yc(e=>{this.currentUrlTree=e.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl),this.routerState=e.targetRouterState,"deferred"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!e.extras.replaceUrl,e.id,e.extras.state),this.browserUrlTree=e.urlAfterRedirects)}),mg(this.rootContexts,this.routeReuseStrategy,e=>this.triggerEvent(e)),yc({next(){l=!0},complete(){l=!0}}),function(e){return n=>n.lift(new _c(e))}(()=>{if(!l&&!t){this.resetUrlToCurrentUrlTree();const l=new Yh(e.id,this.serializeUrl(e.extractedUrl),`Navigation ID ${e.id} is not equal to the current navigation id ${this.navigationId}`);n.next(l),e.resolve(!1)}this.currentNavigation=null}),oc(l=>{if(t=!0,function(e){return e&&e[ad]}(l)){const t=vg(l.url);t||(this.navigated=!0,this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));const i=new Yh(e.id,this.serializeUrl(e.extractedUrl),l.message);n.next(i),e.resolve(!1),t&&this.navigateByUrl(l.url)}else{this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);const t=new $h(e.id,this.serializeUrl(e.extractedUrl),l);n.next(t);try{e.resolve(this.errorHandler(l))}catch(i){e.reject(i)}}return Va}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign({},this.getTransition(),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{let n=this.parseUrl(e.url);const l="popstate"===e.type?"popstate":"hashchange",t=e.state&&e.state.navigationId?e.state:null;setTimeout(()=>{this.scheduleNavigation(n,l,t,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){gd(e),this.config=e.map(fd),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(e,n={}){const{relativeTo:l,queryParams:t,fragment:i,preserveQueryParams:s,queryParamsHandling:r,preserveFragment:u}=n;en()&&s&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const o=l||this.routerState.root,a=u?this.currentUrlTree.fragment:i;let c=null;if(r)switch(r){case"merge":c=Object.assign({},this.currentUrlTree.queryParams,t);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=t||null}else c=s?this.currentUrlTree.queryParams:t||null;return null!==c&&(c=this.removeEmptyProps(c)),function(e,n,l,t,i){if(0===l.length)return sg(n.root,n.root,n,t,i);const s=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new rg(!0,0,e);let n=0,l=!1;const t=e.reduce((e,t,i)=>{if("object"==typeof t&&null!=t){if(t.outlets){const n={};return Rd(t.outlets,(e,l)=>{n[l]="string"==typeof e?e.split("/"):e}),[...e,{outlets:n}]}if(t.segmentPath)return[...e,t.segmentPath]}return"string"!=typeof t?[...e,t]:0===i?(t.split("/").forEach((t,i)=>{0==i&&"."===t||(0==i&&""===t?l=!0:".."===t?n++:""!=t&&e.push(t))}),e):[...e,t]},[]);return new rg(l,n,t)}(l);if(s.toRoot())return sg(n.root,new Cd([],{}),n,t,i);const r=function(e,n,l){if(e.isAbsolute)return new ug(n.root,!0,0);if(-1===l.snapshot._lastPathIndex)return new ug(l.snapshot._urlSegment,!0,0);const t=ig(e.commands[0])?0:1;return function(e,n,l){let t=e,i=n,s=l;for(;s>i;){if(s-=i,!(t=t.parent))throw new Error("Invalid number of '../'");i=t.segments.length}return new ug(t,!1,i-s)}(l.snapshot._urlSegment,l.snapshot._lastPathIndex+t,e.numberOfDoubleDots)}(s,n,e),u=r.processChildren?cg(r.segmentGroup,r.index,s.commands):ag(r.segmentGroup,r.index,s.commands);return sg(r.segmentGroup,u,n,t,i)}(o,this.currentUrlTree,e,c,a)}navigateByUrl(e,n={skipLocationChange:!1}){en()&&this.isNgZoneEnabled&&!hs.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const l=vg(e)?e:this.parseUrl(e),t=this.urlHandlingStrategy.merge(l,this.rawUrlTree);return this.scheduleNavigation(t,"imperative",null,n)}navigate(e,n={skipLocationChange:!1}){return function(e){for(let n=0;n<e.length;n++){const l=e[n];if(null==l)throw new Error(`The requested path contains ${l} segment at index ${n}`)}}(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let n;try{n=this.urlSerializer.parse(e)}catch(l){n=this.malformedUriErrorHandler(l,this.urlSerializer,e)}return n}isActive(e,n){if(vg(e))return bd(this.currentUrlTree,e,n);const l=this.parseUrl(e);return bd(this.currentUrlTree,l,n)}removeEmptyProps(e){return Object.keys(e).reduce((n,l)=>{const t=e[l];return null!=t&&(n[l]=t),n},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.events.next(new zh(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,e.resolve(!0)},e=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(e,n,l,t){const i=this.getTransition();if(i&&"imperative"!==n&&"imperative"===i.source&&i.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(i&&"hashchange"==n&&"popstate"===i.source&&i.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(i&&"popstate"==n&&"hashchange"===i.source&&i.rawUrl.toString()===e.toString())return Promise.resolve(!0);let s=null,r=null;const u=new Promise((e,n)=>{s=e,r=n}),o=++this.navigationId;return this.setTransition({id:o,source:n,restoredState:l,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:t,resolve:s,reject:r,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(e=>Promise.reject(e))}setBrowserUrl(e,n,l,t){const i=this.urlSerializer.serialize(e);t=t||{},this.location.isCurrentPathEqualTo(i)||n?this.location.replaceState(i,"",Object.assign({},t,{navigationId:l})):this.location.go(i,"",Object.assign({},t,{navigationId:l}))}resetStateAndUrl(e,n,l){this.routerState=e,this.currentUrlTree=n,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,l),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}let op=(()=>(class{constructor(e,n,l,t,i){this.router=e,this.route=n,this.commands=[],null==l&&t.setAttribute(i.nativeElement,"tabindex","0")}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}set preserveQueryParams(e){en()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=e}onClick(){const e={skipLocationChange:cp(this.skipLocationChange),replaceUrl:cp(this.replaceUrl)};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:cp(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:cp(this.preserveFragment)})}}))(),ap=(()=>(class{constructor(e,n,l){this.router=e,this.route=n,this.locationStrategy=l,this.commands=[],this.subscription=e.events.subscribe(e=>{e instanceof zh&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}set preserveQueryParams(e){en()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=e}ngOnChanges(e){this.updateTargetUrlAndHref()}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,n,l,t){if(0!==e||n||l||t)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const i={skipLocationChange:cp(this.skipLocationChange),replaceUrl:cp(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,i),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:cp(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:cp(this.preserveFragment)})}}))();function cp(e){return""===e||!!e}let hp=(()=>(class{constructor(e,n,l,t,i){this.router=e,this.element=n,this.renderer=l,this.link=t,this.linkWithHref=i,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.subscription=e.events.subscribe(e=>{e instanceof zh&&this.update()})}ngAfterContentInit(){this.links.changes.subscribe(e=>this.update()),this.linksWithHrefs.changes.subscribe(e=>this.update()),this.update()}set routerLinkActive(e){const n=Array.isArray(e)?e:e.split(" ");this.classes=n.filter(e=>!!e)}ngOnChanges(e){this.update()}ngOnDestroy(){this.subscription.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const e=this.hasActiveLinks();this.isActive!==e&&(this.isActive=e,this.classes.forEach(n=>{e?this.renderer.addClass(this.element.nativeElement,n):this.renderer.removeClass(this.element.nativeElement,n)}))})}isLinkActive(e){return n=>e.isActive(n.urlTree,this.routerLinkActiveOptions.exact)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}))();class dp{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new gp,this.attachRef=null}}class gp{constructor(){this.contexts=new Map}onChildOutletCreated(e,n){const l=this.getOrCreateContext(e);l.outlet=n,this.contexts.set(e,l)}onChildOutletDestroyed(e){const n=this.getContext(e);n&&(n.outlet=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new dp,this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}}let pp=(()=>(class{constructor(e,n,l,t,i){this.parentContexts=e,this.location=n,this.resolver=l,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new Di,this.deactivateEvents=new Di,this.name=t||rd,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const l=(n=n||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),t=this.parentContexts.getOrCreateContext(this.name).children,i=new mp(e,t,this.location.injector);this.activated=this.location.createComponent(l,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}))();class mp{constructor(e,n,l){this.route=e,this.childContexts=n,this.parent=l}get(e,n){return e===qd?this.route:e===gp?this.childContexts:this.parent.get(e,n)}}class fp{}class Sp{preload(e,n){return n().pipe(oc(()=>Fa(null)))}}class Ep{preload(e,n){return Fa(null)}}let vp=(()=>(class{constructor(e,n,l,t,i){this.router=e,this.injector=t,this.preloadingStrategy=i,this.loader=new np(n,l,n=>e.triggerEvent(new Zh(n)),n=>e.triggerEvent(new Jh(n)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ka(e=>e instanceof zh),Ic(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(He);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription.unsubscribe()}processRoutes(e,n){const l=[];for(const t of n)if(t.loadChildren&&!t.canLoad&&t._loadedConfig){const e=t._loadedConfig;l.push(this.processRoutes(e.module,e.routes))}else t.loadChildren&&!t.canLoad?l.push(this.preloadConfig(e,t)):t.children&&l.push(this.processRoutes(e,t.children));return B(l).pipe($(),F(e=>void 0))}preloadConfig(e,n){return this.preloadingStrategy.preload(n,()=>this.loader.load(e.injector,n).pipe(W(e=>(n._loadedConfig=e,this.processRoutes(e.module,e.routes)))))}}))();class Rp{constructor(e,n,l={}){this.router=e,this.viewportScroller=n,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Vh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof zh&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof id&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,n){this.router.triggerEvent(new id(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}const Op=new be("ROUTER_CONFIGURATION"),bp=new be("ROUTER_FORROOT_GUARD"),Tp=[Vo,{provide:Nd,useClass:_d},{provide:up,useFactory:wp,deps:[ws,Nd,gp,Vo,kn,xs,ls,ep,Op,[lp,new se],[Zg,new se]]},gp,{provide:qd,useFactory:Pp,deps:[up]},{provide:xs,useClass:Ds},vp,Ep,Sp,{provide:Op,useValue:{enableTracing:!1}}];function Cp(){return new Is("Router",up)}let Ip=(()=>{class e{constructor(e,n){}static forRoot(n,l){return{ngModule:e,providers:[Tp,_p(n),{provide:bp,useFactory:Np,deps:[[up,new se,new ue]]},{provide:Op,useValue:l||{}},{provide:Bo,useFactory:Ap,deps:[Ho,[new ie(Wo),new se],Op]},{provide:Rp,useFactory:yp,deps:[up,Da,Op]},{provide:fp,useExisting:l&&l.preloadingStrategy?l.preloadingStrategy:Ep},{provide:Is,multi:!0,useFactory:Cp},[xp,{provide:Ui,multi:!0,useFactory:kp,deps:[xp]},{provide:Dp,useFactory:Mp,deps:[xp]},{provide:Yi,multi:!0,useExisting:Dp}]]}}static forChild(n){return{ngModule:e,providers:[_p(n)]}}}return e})();function yp(e,n,l){return l.scrollOffset&&n.setOffset(l.scrollOffset),new Rp(e,n,l)}function Ap(e,n,l={}){return l.useHash?new Yo(e,n):new $o(e,n)}function Np(e){if(e)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function _p(e){return[{provide:Wn,multi:!0,useValue:e},{provide:ep,multi:!0,useValue:e}]}function wp(e,n,l,t,i,s,r,u,o={},a,c){const h=new up(null,n,l,t,i,s,r,Ed(u));if(a&&(h.urlHandlingStrategy=a),c&&(h.routeReuseStrategy=c),o.errorHandler&&(h.errorHandler=o.errorHandler),o.malformedUriErrorHandler&&(h.malformedUriErrorHandler=o.malformedUriErrorHandler),o.enableTracing){const e=xc();h.events.subscribe(n=>{e.logGroup(`Router Event: ${n.constructor.name}`),e.log(n.toString()),e.log(n),e.logGroupEnd()})}return o.onSameUrlNavigation&&(h.onSameUrlNavigation=o.onSameUrlNavigation),o.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=o.paramsInheritanceStrategy),o.urlUpdateStrategy&&(h.urlUpdateStrategy=o.urlUpdateStrategy),o.relativeLinkResolution&&(h.relativeLinkResolution=o.relativeLinkResolution),h}function Pp(e){return e.routerState.root}let xp=(()=>(class{constructor(e){this.injector=e,this.initNavigation=!1,this.resultOfPreactivationDone=new I}appInitializer(){return this.injector.get(Go,Promise.resolve(null)).then(()=>{let e=null;const n=new Promise(n=>e=n),l=this.injector.get(up),t=this.injector.get(Op);if(this.isLegacyDisabled(t)||this.isLegacyEnabled(t))e(!0);else if("disabled"===t.initialNavigation)l.setUpLocationChangeListener(),e(!0);else{if("enabled"!==t.initialNavigation)throw new Error(`Invalid initialNavigation options: '${t.initialNavigation}'`);l.hooks.afterPreactivation=()=>this.initNavigation?Fa(null):(this.initNavigation=!0,e(!0),this.resultOfPreactivationDone),l.initialNavigation()}return n})}bootstrapListener(e){const n=this.injector.get(Op),l=this.injector.get(vp),t=this.injector.get(Rp),i=this.injector.get(up),s=this.injector.get(ws);e===s.components[0]&&(this.isLegacyEnabled(n)?i.initialNavigation():this.isLegacyDisabled(n)&&i.setUpLocationChangeListener(),l.setUpPreloading(),t.init(),i.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(e){return"legacy_enabled"===e.initialNavigation||!0===e.initialNavigation||void 0===e.initialNavigation}isLegacyDisabled(e){return"legacy_disabled"===e.initialNavigation||!1===e.initialNavigation}}))();function kp(e){return e.appInitializer.bind(e)}function Mp(e){return e.bootstrapListener.bind(e)}const Dp=new be("Router Initializer");var Lp=Jl({encapsulation:2,styles:[],data:{}});function Fp(e){return gr(0,[(e()(),qs(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),ai(1,212992,null,0,pp,[gp,Ml,il,[8,null],_n],null,null)],(function(e,n){e(n,1,0)}),null)}function Up(e){return gr(0,[(e()(),qs(0,0,null,null,1,"ng-component",[],null,null,null,Fp,Lp)),ai(1,49152,null,0,sd,[],null,null)],null,null)}var Hp=Ht("ng-component",sd,Up,{},{},[]);class Gp{constructor(e){this.router=e}ngOnInit(){}goToVillage(){this.router.navigate(["/village"])}}var Bp=Jl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:10px;font-size:4vw;text-align:center}button[_ngcontent-%COMP%]{font-size:1.5vw}"]],data:{}});function Wp(e){return gr(0,[(e()(),qs(0,0,null,null,4,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),cr(-1,null,[" Page not found "])),(e()(),qs(2,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(3,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.goToVillage()&&t),t}),null,null)),(e()(),cr(-1,null,["Village"]))],null,null)}function Vp(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-not-found",[],null,null,null,Wp,Bp)),ai(1,114688,null,0,Gp,[up],null,null)],(function(e,n){e(n,1,0)}),null)}var zp=Ht("app-not-found",Gp,Vp,{},{},[]);class Yp{constructor(){this.xMargin=20,this.yMargin=20}onmousemove(e){const n=document.getElementById(this.elementId);if(n){const l=e.clientX+this.xMargin;let t=e.clientY+this.yMargin;t+n.offsetHeight>740&&(t-=n.offsetHeight+2*this.yMargin),n.style.top=t+"px",n.style.left=l+"px"}}}class $p{constructor(){this.margin="0"}ngOnInit(){}getTitle(){return""===this.title?"":this.title?this.title:"Food"===this.name?"Food nutrition":Uu.titleCase(this.name).replace("_"," ")}getPath(){let e="assets/";return this.path&&(e+=this.path+"/"),e}}var Kp=Jl({encapsulation:0,styles:[["[_nghost-%COMP%]{display:inline-block;vertical-align:middle;height:24px}#wrapper[_ngcontent-%COMP%]{display:inline-block;height:24px;margin:0;padding:0}img[_ngcontent-%COMP%]{display:inline-block;margin:0;padding:0;height:24px;width:24px}"]],data:{}});function jp(e){return gr(0,[(e()(),qs(0,0,null,null,4,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,3,"img",[["class","resourceIcon"],["draggable","false"],["ondragstart","return false;"],["onerror","if (this.src !== 'assets/question_mark.svg') this.src = 'assets/question_mark.svg';"]],[[8,"src",4],[8,"title",0],[8,"alt",0]],null,null,null,null)),hi(512,null,ba,Ta,[ol,Nl,gl]),ai(3,278528,null,0,Ia,[ba],{ngStyle:[0,"ngStyle"]},null),or(4,{margin:0})],(function(e,n){var l=e(n,4,0,n.component.margin);e(n,3,0,l)}),(function(e,n){var l=n.component;e(n,1,0,yt(1,"",l.getPath()+l.name.replace(" ","_").toLowerCase(),".svg"),yt(1,"",l.getTitle(),""),yt(1,"",l.name,""))}))}function Qp(e,n){return new R(l=>{const t=e.length;if(0===t)return void l.complete();const i=new Array(t);let s=0,r=0;for(let u=0;u<t;u++){const o=B(e[u]);let a=!1;l.add(o.subscribe({next:e=>{a||(a=!0,r++),i[u]=e},error:e=>l.error(e),complete:()=>{++s!==t&&a||(r===t&&l.next(n?n.reduce((e,n,l)=>(e[n]=i[l],e),{}):i),l.complete())}}))}})}const qp=new be("NgValueAccessor");let Xp=(()=>(class{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}))();const Zp=new be("CompositionEventMode");let Jp=(()=>(class{constructor(e,n,l){this._renderer=e,this._elementRef=n,this._compositionMode=l,this.onChange=e=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const e=xc()?xc().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}))();class em{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(e){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class nm extends em{get formDirective(){return null}get path(){return null}}function lm(){throw new Error("unimplemented")}class tm extends em{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return lm()}get asyncValidator(){return lm()}}let im=(()=>(class extends class{constructor(e){this._cd=e}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}{constructor(e){super(e)}}))();function sm(e){return null==e||0===e.length}const rm=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class um{static min(e){return n=>{if(sm(n.value)||sm(e))return null;const l=parseFloat(n.value);return!isNaN(l)&&l<e?{min:{min:e,actual:n.value}}:null}}static max(e){return n=>{if(sm(n.value)||sm(e))return null;const l=parseFloat(n.value);return!isNaN(l)&&l>e?{max:{max:e,actual:n.value}}:null}}static required(e){return sm(e.value)?{required:!0}:null}static requiredTrue(e){return!0===e.value?null:{required:!0}}static email(e){return sm(e.value)?null:rm.test(e.value)?null:{email:!0}}static minLength(e){return n=>{if(sm(n.value))return null;const l=n.value?n.value.length:0;return l<e?{minlength:{requiredLength:e,actualLength:l}}:null}}static maxLength(e){return n=>{const l=n.value?n.value.length:0;return l>e?{maxlength:{requiredLength:e,actualLength:l}}:null}}static pattern(e){if(!e)return um.nullValidator;let n,l;return"string"==typeof e?(l="","^"!==e.charAt(0)&&(l+="^"),l+=e,"$"!==e.charAt(e.length-1)&&(l+="$"),n=new RegExp(l)):(l=e.toString(),n=e),e=>{if(sm(e.value))return null;const t=e.value;return n.test(t)?null:{pattern:{requiredPattern:l,actualValue:t}}}}static nullValidator(e){return null}static compose(e){if(!e)return null;const n=e.filter(om);return 0==n.length?null:function(e){return cm(function(e,n){return n.map(n=>n(e))}(e,n))}}static composeAsync(e){if(!e)return null;const n=e.filter(om);return 0==n.length?null:function(e){return function(...e){if(1===e.length){const n=e[0];if(o(n))return Qp(n,null);if(a(n)&&Object.getPrototypeOf(n)===Object.prototype){const e=Object.keys(n);return Qp(e.map(e=>n[e]),e)}}if("function"==typeof e[e.length-1]){const n=e.pop();return Qp(e=1===e.length&&o(e[0])?e[0]:e,null).pipe(F(e=>n(...e)))}return Qp(e,null)}(function(e,n){return n.map(n=>n(e))}(e,n).map(am)).pipe(F(cm))}}}function om(e){return null!=e}function am(e){const n=qn(e)?B(e):e;if(!Xn(n))throw new Error("Expected validator to return Promise or Observable.");return n}function cm(e){const n=e.reduce((e,n)=>null!=n?Object.assign({},e,n):e,{});return 0===Object.keys(n).length?null:n}function hm(e){return e.validate?n=>e.validate(n):e}function dm(e){return e.validate?n=>e.validate(n):e}let gm=(()=>(class{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}registerOnChange(e){this.onChange=n=>{e(""==n?null:parseFloat(n))}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}))(),pm=(()=>(class{constructor(){this._accessors=[]}add(e,n){this._accessors.push([e,n])}remove(e){for(let n=this._accessors.length-1;n>=0;--n)if(this._accessors[n][1]===e)return void this._accessors.splice(n,1)}select(e){this._accessors.forEach(n=>{this._isSameGroup(n,e)&&n[1]!==e&&n[1].fireUncheck(e.value)})}_isSameGroup(e,n){return!!e[0].control&&e[0]._parent===n._control._parent&&e[1].name===n.name}}))(),mm=(()=>(class{constructor(e,n,l,t){this._renderer=e,this._elementRef=n,this._registry=l,this._injector=t,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(tm),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(e){this._fn=e,this.onChange=()=>{e(this.value),this._registry.select(this)}}fireUncheck(e){this.writeValue(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}))(),fm=(()=>(class{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))}registerOnChange(e){this.onChange=n=>{e(""==n?null:parseFloat(n))}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}))();const Sm={formControlName:'\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',formGroupName:'\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',formArrayName:'\n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });',ngModelGroup:'\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',ngModelWithFormGroup:'\n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  '};function Em(e,n){return null==e?`${n}`:(n&&"object"==typeof n&&(n="Object"),`${e}: ${n}`.slice(0,50))}let vm=(()=>(class{constructor(e,n){this._renderer=e,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=e=>{},this.onTouched=()=>{},this._compareWith=Yn}set compareWith(e){if("function"!=typeof e)throw new Error(`compareWith must be a function, but received ${JSON.stringify(e)}`);this._compareWith=e}writeValue(e){this.value=e;const n=this._getOptionId(e);null==n&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const l=Em(n,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",l)}registerOnChange(e){this.onChange=n=>{this.value=this._getOptionValue(n),e(this.value)}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const n of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(n),e))return n;return null}_getOptionValue(e){const n=function(e){return e.split(":")[0]}(e);return this._optionMap.has(n)?this._optionMap.get(n):e}}))(),Rm=(()=>(class{constructor(e,n,l){this._element=e,this._renderer=n,this._select=l,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(Em(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}))();function Om(e,n){return null==e?`${n}`:("string"==typeof n&&(n=`'${n}'`),n&&"object"==typeof n&&(n="Object"),`${e}: ${n}`.slice(0,50))}let bm=(()=>(class{constructor(e,n){this._renderer=e,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=e=>{},this.onTouched=()=>{},this._compareWith=Yn}set compareWith(e){if("function"!=typeof e)throw new Error(`compareWith must be a function, but received ${JSON.stringify(e)}`);this._compareWith=e}writeValue(e){let n;if(this.value=e,Array.isArray(e)){const l=e.map(e=>this._getOptionId(e));n=(e,n)=>{e._setSelected(l.indexOf(n.toString())>-1)}}else n=(e,n)=>{e._setSelected(!1)};this._optionMap.forEach(n)}registerOnChange(e){this.onChange=n=>{const l=[];if(n.hasOwnProperty("selectedOptions")){const e=n.selectedOptions;for(let n=0;n<e.length;n++){const t=e.item(n),i=this._getOptionValue(t.value);l.push(i)}}else{const e=n.options;for(let n=0;n<e.length;n++){const t=e.item(n);if(t.selected){const e=this._getOptionValue(t.value);l.push(e)}}}this.value=l,e(l)}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_registerOption(e){const n=(this._idCounter++).toString();return this._optionMap.set(n,e),n}_getOptionId(e){for(const n of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(n)._value,e))return n;return null}_getOptionValue(e){const n=function(e){return e.split(":")[0]}(e);return this._optionMap.has(n)?this._optionMap.get(n)._value:e}}))(),Tm=(()=>(class{constructor(e,n,l){this._element=e,this._renderer=n,this._select=l,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(Om(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(Om(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}))();function Cm(e,n){return[...n.path,e]}function Im(e,n){e||Am(n,"Cannot find control with"),n.valueAccessor||Am(n,"No value accessor for form control with"),e.validator=um.compose([e.validator,n.validator]),e.asyncValidator=um.composeAsync([e.asyncValidator,n.asyncValidator]),n.valueAccessor.writeValue(e.value),function(e,n){n.valueAccessor.registerOnChange(l=>{e._pendingValue=l,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&ym(e,n)})}(e,n),function(e,n){e.registerOnChange((e,l)=>{n.valueAccessor.writeValue(e),l&&n.viewToModelUpdate(e)})}(e,n),function(e,n){n.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&ym(e,n),"submit"!==e.updateOn&&e.markAsTouched()})}(e,n),n.valueAccessor.setDisabledState&&e.registerOnDisabledChange(e=>{n.valueAccessor.setDisabledState(e)}),n._rawValidators.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(()=>e.updateValueAndValidity())}),n._rawAsyncValidators.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(()=>e.updateValueAndValidity())})}function ym(e,n){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Am(e,n){let l;throw l=e.path.length>1?`path: '${e.path.join(" -> ")}'`:e.path[0]?`name: '${e.path}'`:"unspecified name attribute",new Error(`${n} ${l}`)}function Nm(e){return null!=e?um.compose(e.map(hm)):null}function _m(e){return null!=e?um.composeAsync(e.map(dm)):null}const wm=[Xp,fm,gm,vm,bm,mm],Pm="VALID",xm="INVALID",km="PENDING",Mm="DISABLED";function Dm(e){const n=Fm(e)?e.validators:e;return Array.isArray(n)?Nm(n):n||null}function Lm(e,n){const l=Fm(n)?n.asyncValidators:e;return Array.isArray(l)?_m(l):l||null}function Fm(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class Um{constructor(e,n){this.validator=e,this.asyncValidator=n,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return this.status===Pm}get invalid(){return this.status===xm}get pending(){return this.status==km}get disabled(){return this.status===Mm}get enabled(){return this.status!==Mm}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this.validator=Dm(e)}setAsyncValidators(e){this.asyncValidator=Lm(e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=km,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Mm,this.errors=null,this._forEachChild(n=>{n.disable(Object.assign({},e,{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign({},e,{skipPristineCheck:n})),this._onDisabledChange.forEach(e=>e(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Pm,this._forEachChild(n=>{n.enable(Object.assign({},e,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign({},e,{skipPristineCheck:n})),this._onDisabledChange.forEach(e=>e(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==Pm&&this.status!==km||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Mm:Pm}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=km;const n=am(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(n=>this.setErrors(n,{emitEvent:e}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){return function(e,n,l){return null==n?null:(n instanceof Array||(n=n.split(".")),n instanceof Array&&0===n.length?null:n.reduce((e,n)=>e instanceof Gm?e.controls.hasOwnProperty(n)?e.controls[n]:null:e instanceof Bm&&e.at(n)||null,e))}(this,e)}getError(e,n){const l=n?this.get(n):this;return l&&l.errors?l.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Di,this.statusChanges=new Di}_calculateStatus(){return this._allControlsDisabled()?Mm:this.errors?xm:this._anyControlsHaveStatus(km)?km:this._anyControlsHaveStatus(xm)?xm:Pm}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Fm(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class Hm extends Um{constructor(e=null,n,l){super(Dm(n),Lm(l,n)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(n),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(e=>e(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=null,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Gm extends Um{constructor(e,n,l){super(Dm(n),Lm(l,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n){this.registerControl(e,n),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()}setControl(e,n){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity(),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(l=>{this._throwIfControlMissing(l),this.controls[l].setValue(e[l],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){Object.keys(e).forEach(l=>{this.controls[l]&&this.controls[l].patchValue(e[l],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}reset(e={},n={}){this._forEachChild((l,t)=>{l.reset(e[t],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,l)=>(e[l]=n instanceof Hm?n.value:n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(e,n)=>!!n._syncPendingControls()||e);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(n=>e(this.controls[n],n))}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){let n=!1;return this._forEachChild((l,t)=>{n=n||this.contains(t)&&e(l)}),n}_reduceValue(){return this._reduceChildren({},(e,n,l)=>((n.enabled||this.disabled)&&(e[l]=n.value),e))}_reduceChildren(e,n){let l=e;return this._forEachChild((e,t)=>{l=n(l,e,t)}),l}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((n,l)=>{if(void 0===e[l])throw new Error(`Must supply a value for form control with name: '${l}'.`)})}}class Bm extends Um{constructor(e,n,l){super(Dm(n),Lm(l,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(e){return this.controls[e]}push(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()}insert(e,n){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity()}removeAt(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity()}setControl(e,n){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),n&&(this.controls.splice(e,0,n),this._registerControl(n)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){this._checkAllValuesPresent(e),e.forEach((e,l)=>{this._throwIfControlMissing(l),this.at(l).setValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e.forEach((e,l)=>{this.at(l)&&this.at(l).patchValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}reset(e=[],n={}){this._forEachChild((l,t)=>{l.reset(e[t],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e instanceof Hm?e.value:e.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let e=this.controls.reduce((e,n)=>!!n._syncPendingControls()||e,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((n,l)=>{e(n,l)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((n,l)=>{if(void 0===e[l])throw new Error(`Must supply a value for form control at index: ${l}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const Wm=(()=>Promise.resolve(null))();let Vm=(()=>(class extends nm{constructor(e,n){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new Di,this.form=new Gm({},Nm(e),_m(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Wm.then(()=>{const n=this._findContainer(e.path);e.control=n.registerControl(e.name,e.control),Im(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Wm.then(()=>{const n=this._findContainer(e.path);n&&n.removeControl(e.name),function(e,n){const l=e.indexOf(n);l>-1&&e.splice(l,1)}(this._directives,e)})}addFormGroup(e){Wm.then(()=>{const n=this._findContainer(e.path),l=new Gm({});(function(e,n){null==e&&Am(n,"Cannot find control with"),e.validator=um.compose([e.validator,n.validator]),e.asyncValidator=um.composeAsync([e.asyncValidator,n.asyncValidator])})(l,e),n.registerControl(e.name,l),l.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Wm.then(()=>{const n=this._findContainer(e.path);n&&n.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,n){Wm.then(()=>{this.form.get(e.path).setValue(n)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,n=this._directives,this.form._syncPendingControls(),n.forEach(e=>{const n=e.control;"submit"===n.updateOn&&n._pendingChange&&(e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)}),this.ngSubmit.emit(e),!1;var n}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}))();class zm{static modelParentException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup's partner directive "formControlName" instead.  Example:\n\n      ${Sm.formControlName}\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      ${Sm.ngModelWithFormGroup}`)}static formGroupNameException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ${Sm.formGroupName}\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ${Sm.ngModelGroup}`)}static missingNameException(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}static modelGroupParentException(){throw new Error(`\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ${Sm.formGroupName}\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ${Sm.ngModelGroup}`)}static ngFormWarning(){console.warn("\n    It looks like you're using 'ngForm'.\n\n    Support for using the 'ngForm' element selector has been deprecated in Angular v6 and will be removed\n    in Angular v9.\n\n    Use 'ng-form' instead.\n\n    Before:\n    <ngForm #myForm=\"ngForm\">\n\n    After:\n    <ng-form #myForm=\"ngForm\">\n    ")}}const Ym=new be("NgFormSelectorWarning");class $m extends nm{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Cm(this.name,this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return Nm(this._validators)}get asyncValidator(){return _m(this._asyncValidators)}_checkParentType(){}}let Km=(()=>{class e extends $m{constructor(e,n,l){super(),this._parent=e,this._validators=n,this._asyncValidators=l}_checkParentType(){this._parent instanceof e||this._parent instanceof Vm||zm.modelGroupParentException()}}return e})();const jm=(()=>Promise.resolve(null))();let Qm=(()=>(class extends tm{constructor(e,n,l,t){super(),this.control=new Hm,this._registered=!1,this.update=new Di,this._parent=e,this._rawValidators=n||[],this._rawAsyncValidators=l||[],this.valueAccessor=function(e,n){if(!n)return null;Array.isArray(n)||Am(e,"Value accessor was not provided as an array for form control with");let l=void 0,t=void 0,i=void 0;return n.forEach(n=>{n.constructor===Jp?l=n:function(e){return wm.some(n=>e.constructor===n)}(n)?(t&&Am(e,"More than one built-in value accessor matches form control with"),t=n):(i&&Am(e,"More than one custom value accessor matches form control with"),i=n)}),i||t||l||(Am(e,"No valid value accessor for form control with"),null)}(this,t)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(e,n){if(!e.hasOwnProperty("model"))return!1;const l=e.model;return!!l.isFirstChange()||!Yn(n,l.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?Cm(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return Nm(this._rawValidators)}get asyncValidator(){return _m(this._rawAsyncValidators)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Im(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){!(this._parent instanceof Km)&&this._parent instanceof $m?zm.formGroupNameException():this._parent instanceof Km||this._parent instanceof Vm||zm.modelParentException()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||zm.missingNameException()}_updateValue(e){jm.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const n=e.isDisabled.currentValue,l=""===n||n&&"false"!==n;jm.then(()=>{l&&!this.control.disabled?this.control.disable():!l&&this.control.disabled&&this.control.enable()})}}))(),qm=(()=>(class{}))(),Xm=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:Ym,useValue:n.warnOnDeprecatedNgFormSelector}]}}}return e})();class Zm{constructor(e,n=!1,l=0,t=!1){this.name=e,this.enabled=n,this.reserved=l,this.reservedPercent=t}}class Jm{constructor(e=!1,n=0,l=!1,t=0,i=!1,s=0,r=!1,u=0){this.autoSellEnabled=e,this.autoSellAmount=n,this.autoSellPercentage=l,this.autoSellOrder=t,this.autoBuyEnabled=i,this.autoBuyAmount=s,this.autoBuyPercentage=r,this.autoBuyOrder=u}static clone(e){return new Jm(e.autoSellEnabled,e.autoSellAmount,e.autoSellPercentage,e.autoSellOrder,e.autoBuyEnabled,e.autoBuyAmount,e.autoBuyPercentage,e.autoBuyOrder)}}class ef{constructor(e,n=0,l=[new Zm("Crafting"),new Zm("Kitchen"),new Zm("Manufacture"),new Zm("Hut"),new Zm("House"),new Zm("Longhouse"),new Zm("Tudor house"),new Zm("Settlement"),new Zm("Bakery"),new Zm("Tailor"),new Zm("Tavern"),new Zm("Tannery"),new Zm("Sawmill"),new Zm("Windmill"),new Zm("Cotton mill"),new Zm("Brewery"),new Zm("Winery"),new Zm("Stonemason"),new Zm("Mint"),new Zm("Fishers hut"),new Zm("Paper mill")].sort((e,n)=>e.name.localeCompare(n.name)),t=!1,i=null){this.resource=e,this.reserve=n,this.reservePercent=t,this.consumers=l,this.autoTrade=null===i?new Jm:i}static clone(e){const n=[];return e.consumers.forEach(e=>n.push(new Zm(e.name,e.enabled,e.reserved,e.reservedPercent))),new ef(e.resource,e.reserve,n,e.reservePercent,Jm.clone(e.autoTrade))}getReservedAmountBySource(e,n,l){let t=0,i=!1;return l?0:(t=this.reserve,i=this.reservePercent,this.consumers.forEach(n=>{n.enabled&&n.name===e&&(t=n.reserved,i=n.reservedPercent)}),i?Math.floor(t/100*n.getLimit()):t)}isUsed(){let e=!1;return 0!==this.reserve||(this.consumers.forEach(n=>{n.enabled&&(e=!0)}),(this.autoTrade.autoSellEnabled||this.autoTrade.autoBuyEnabled)&&(e=!0),e)}}class nf{constructor(e,n,l,t,i,s,r,u){this.resource=e,this.name=n,this.amount=l,this.limit=t,this.resourceTypes=i,this.visible=s,this.highlighted=r,this.prioritise=u,this.options=new ef(e)}toJSON(){return{amount:this.amount,limit:this.limit,visible:this.visible,highlighted:this.highlighted,prioritise:this.prioritise,options:this.options}}addResource(e){return this.amount+e>this.limit?(this.amount=this.limit,this.amount):(this.amount+=e,this.amount)}removeResource(e){return this.amount-e>0&&(this.amount-=e,!0)}getResource(){return this.resource}getName(){return this.name}getAmount(){return this.amount}getLimit(){return this.limit}getResourceTypes(){return this.resourceTypes}hasResourceType(e){return this.resourceTypes.indexOf(e)>-1}isVisible(){return this.visible}toggleVisible(){return this.visible=!this.visible,this.visible}isHighlighted(){return this.highlighted}toggleHighlighted(){return this.highlighted=!this.highlighted,this.highlighted}getFreeSpace(){return this.limit-this.amount}}class lf{constructor(){this.amount=0,this.limit=0,this.resourceTypes=[],this.visible=!1,this.highlighted=!1,this.prioritise=!1}forResource(e){return this.resource=e,this}withName(e){return this.name=e,this}withAmount(e){return this.amount=e,this}withLimit(e){return this.limit=e,this}withResourceTypes(e){return e.forEach(e=>this.resourceTypes.push(e)),this}withResourceType(e){return this.resourceTypes.push(e),this}withVisible(e){return this.visible=e,this}withHighlighted(e){return this.highlighted=e,this}withPrioritise(e){return this.prioritise=e,this}build(){const e=new nf(this.resource,this.name,this.amount,this.limit,this.resourceTypes,this.visible,this.highlighted,this.prioritise);return this.resource=void 0,this.name=void 0,this.amount=0,this.limit=0,this.resourceTypes=[],this.visible=!1,this.highlighted=!1,this.prioritise=!1,e}}class tf{constructor(e,n,l,t=null){this.type=n,this.day=l,this.message=e,this.data=t}}let sf=(()=>{class e{constructor(){this.services=new Map}addService(e,n){this.services.set(e,n)}getService(e){return this.services.get(e)}getIdService(){return this.services.get(Wu.ID)}getKongregateService(){return this.services.get(Wu.KONGREGATE)}getWeatherService(){return this.services.get(Wu.WEATHER)}getManagementService(){return this.services.get(Wu.MANAGEMENT)}getTechService(){return this.services.get(Wu.RESEARCH)}getHappinessService(){return this.services.get(Wu.HAPPINESS)}getEffectsService(){return this.services.get(Wu.EFFECTS)}getRecipeService(){return this.services.get(Wu.RECIPE)}getLandService(){return this.services.get(Wu.LAND)}getResourcesService(){return this.services.get(Wu.RESOURCES)}getVillageService(){return this.services.get(Wu.VILLAGE)}getCalendarService(){return this.services.get(Wu.CALENDAR)}getRoyalService(){return this.services.get(Wu.ROYAL)}getWorldService(){return this.services.get(Wu.WORLD)}getModalService(){return this.services.get(Wu.MODAL)}getArmyService(){return this.services.get(Wu.ARMY)}getNavyService(){return this.services.get(Wu.NAVY)}getLogService(){return this.services.get(Wu.LOG)}getGameService(){return this.services.get(Wu.GAME)}getServiceByRegion(e){switch(e){case Du.VILLAGE:return this.services.get(Wu.VILLAGE);case Du.FORT:return this.services.get(Wu.FORT);case Du.FIELD:return this.services.get(Wu.FIELD);case Du.FOREST:return this.services.get(Wu.FOREST);case Du.MOUNTAINS:return this.services.get(Wu.MOUNTAINS);case Du.SEA:return this.services.get(Wu.SEA);case Du.PLATEAU:return this.services.get(Wu.PLATEAU);default:console.error("Region service not found for ["+Du[e]+"]")}}}return e.ngInjectableDef=ce({factory:function(){return new e},token:e,providedIn:"root"}),e})();var rf=function(e){return e[e.AUTO_SAVE_STATUS=0]="AUTO_SAVE_STATUS",e[e.AUTO_SAVE_PERIOD=1]="AUTO_SAVE_PERIOD",e[e.METRIC=2]="METRIC",e[e.SAVE_LOGS=3]="SAVE_LOGS",e[e.SOUND_MASTER=4]="SOUND_MASTER",e[e.SOUND_MASTER_VOLUME=5]="SOUND_MASTER_VOLUME",e[e.VISUAL_PROGRESS_BARS=6]="VISUAL_PROGRESS_BARS",e[e.AUTO_TEXT_FITTING=7]="AUTO_TEXT_FITTING",e[e.POSITIVE_COLOUR=8]="POSITIVE_COLOUR",e[e.NEGATIVE_COLOUR=9]="NEGATIVE_COLOUR",e[e.PAGED_VIEW=10]="PAGED_VIEW",e[e.BUILDINGS_PER_PAGE=11]="BUILDINGS_PER_PAGE",e[e.KEEP_RESERVATION_SETTINGS_ON_RESET=12]="KEEP_RESERVATION_SETTINGS_ON_RESET",e[e.KEEP_MANAGEMENT_SETTINGS_ON_RESET=13]="KEEP_MANAGEMENT_SETTINGS_ON_RESET",e[e.PAUSE_ON_INIT=14]="PAUSE_ON_INIT",e[e.KEEP_AUTO_TRADE_ON_RESET=15]="KEEP_AUTO_TRADE_ON_RESET",e[e.AI_DIFFICULTY=16]="AI_DIFFICULTY",e[e.SOUND_MUSIC=17]="SOUND_MUSIC",e[e.SOUND_MUSIC_VOLUME=18]="SOUND_MUSIC_VOLUME",e[e.SOUND_EFFECTS=19]="SOUND_EFFECTS",e[e.SOUND_EFFECTS_VOLUME=20]="SOUND_EFFECTS_VOLUME",e[e.SOUND_EFFECT_MARKET=21]="SOUND_EFFECT_MARKET",e[e.SOUND_EFFECT_RESEARCH=22]="SOUND_EFFECT_RESEARCH",e[e.SOUND_EFFECT_INVASION=23]="SOUND_EFFECT_INVASION",e[e.SOUND_EFFECT_SEASON=24]="SOUND_EFFECT_SEASON",e[e.PLAYER_COLOUR=25]="PLAYER_COLOUR",e}({});let uf=(()=>{class e{constructor(e){this.servicesService=e,this.optionsSubject=new I,this.options=new Map}init(){this.options.set(rf.AUTO_SAVE_STATUS,Oo.AUTO_SAVE_STATUS),this.options.set(rf.AUTO_SAVE_PERIOD,Oo.AUTO_SAVE_PERIOD),this.options.set(rf.METRIC,Oo.METRIC),this.options.set(rf.SAVE_LOGS,Oo.SAVE_LOGS),this.options.set(rf.PAUSE_ON_INIT,Oo.PAUSE_ON_INIT),this.options.set(rf.KEEP_RESERVATION_SETTINGS_ON_RESET,Oo.KEEP_RESERVATION_SETTINGS_ON_RESET),this.options.set(rf.KEEP_MANAGEMENT_SETTINGS_ON_RESET,Oo.KEEP_MANAGEMENT_SETTINGS_ON_RESET),this.options.set(rf.KEEP_AUTO_TRADE_ON_RESET,Oo.KEEP_AUTO_TRADE_ON_RESET),this.options.set(rf.SOUND_MASTER,Oo.SOUND_MASTER),this.options.set(rf.SOUND_MASTER_VOLUME,Oo.SOUND_MASTER_VOLUME),this.options.set(rf.SOUND_MUSIC,Oo.SOUND_MUSIC),this.options.set(rf.SOUND_MUSIC_VOLUME,Oo.SOUND_MUSIC_VOLUME),this.options.set(rf.SOUND_EFFECTS,Oo.SOUND_EFFECTS),this.options.set(rf.SOUND_EFFECTS_VOLUME,Oo.SOUND_EFFECTS_VOLUME),this.options.set(rf.SOUND_EFFECT_MARKET,Oo.SOUND_EFFECT_MARKET),this.options.set(rf.SOUND_EFFECT_RESEARCH,Oo.SOUND_EFFECT_RESEARCH),this.options.set(rf.SOUND_EFFECT_INVASION,Oo.SOUND_EFFECT_INVASION),this.options.set(rf.SOUND_EFFECT_SEASON,Oo.SOUND_EFFECT_SEASON),this.options.set(rf.VISUAL_PROGRESS_BARS,Oo.VISUAL_PROGRESS_BARS),this.options.set(rf.AUTO_TEXT_FITTING,Oo.AUTO_TEXT_FITTING),this.options.set(rf.PAGED_VIEW,Oo.PAGED_VIEW),this.options.set(rf.BUILDINGS_PER_PAGE,Oo.BUILDINGS_PER_PAGE),this.options.set(rf.POSITIVE_COLOUR,Oo.POSITIVE_COLOUR),this.options.set(rf.NEGATIVE_COLOUR,Oo.NEGATIVE_COLOUR),this.options.set(rf.PLAYER_COLOUR,Oo.PLAYER_COLOUR),this.options.set(rf.AI_DIFFICULTY,Oo.AI_DIFFICULTY),this.changePositiveColour(),this.changeNegativeColour(),this.optionsSubject.next()}getName(){return"OptionsService"}load(e){this.options=new Map(JSON.parse(e.options)),this.options.has(rf.KEEP_RESERVATION_SETTINGS_ON_RESET)||this.options.set(rf.KEEP_RESERVATION_SETTINGS_ON_RESET,Oo.KEEP_RESERVATION_SETTINGS_ON_RESET),this.options.has(rf.KEEP_MANAGEMENT_SETTINGS_ON_RESET)||this.options.set(rf.KEEP_MANAGEMENT_SETTINGS_ON_RESET,Oo.KEEP_MANAGEMENT_SETTINGS_ON_RESET),this.options.has(rf.KEEP_AUTO_TRADE_ON_RESET)||this.options.set(rf.KEEP_AUTO_TRADE_ON_RESET,Oo.KEEP_AUTO_TRADE_ON_RESET),this.options.has(rf.VISUAL_PROGRESS_BARS)||this.options.set(rf.VISUAL_PROGRESS_BARS,Oo.VISUAL_PROGRESS_BARS),this.options.has(rf.SOUND_MASTER)||this.options.set(rf.SOUND_MASTER,Oo.SOUND_MASTER),this.options.has(rf.SOUND_MASTER_VOLUME)||this.options.set(rf.SOUND_MASTER_VOLUME,Oo.SOUND_MASTER_VOLUME),this.options.has(rf.SOUND_MUSIC)||this.options.set(rf.SOUND_MUSIC,Oo.SOUND_MUSIC),this.options.has(rf.SOUND_MUSIC_VOLUME)||this.options.set(rf.SOUND_MUSIC_VOLUME,Oo.SOUND_MUSIC_VOLUME),this.options.has(rf.SOUND_EFFECTS)||this.options.set(rf.SOUND_EFFECTS,Oo.SOUND_EFFECTS),this.options.has(rf.SOUND_EFFECTS_VOLUME)||this.options.set(rf.SOUND_EFFECTS_VOLUME,Oo.SOUND_EFFECTS_VOLUME),this.options.has(rf.SOUND_EFFECT_MARKET)||this.options.set(rf.SOUND_EFFECT_MARKET,Oo.SOUND_EFFECT_MARKET),this.options.has(rf.SOUND_EFFECT_RESEARCH)||this.options.set(rf.SOUND_EFFECT_RESEARCH,Oo.SOUND_EFFECT_RESEARCH),this.options.has(rf.SOUND_EFFECT_INVASION)||this.options.set(rf.SOUND_EFFECT_INVASION,Oo.SOUND_EFFECT_INVASION),this.options.has(rf.SOUND_EFFECT_SEASON)||this.options.set(rf.SOUND_EFFECT_SEASON,Oo.SOUND_EFFECT_SEASON),this.options.has(rf.AUTO_TEXT_FITTING)||this.options.set(rf.AUTO_TEXT_FITTING,Oo.AUTO_TEXT_FITTING),this.options.has(rf.PAGED_VIEW)||this.options.set(rf.PAGED_VIEW,Oo.PAGED_VIEW),this.options.has(rf.BUILDINGS_PER_PAGE)||this.options.set(rf.BUILDINGS_PER_PAGE,Oo.BUILDINGS_PER_PAGE),this.options.has(rf.POSITIVE_COLOUR)||this.options.set(rf.POSITIVE_COLOUR,Oo.POSITIVE_COLOUR),this.options.has(rf.NEGATIVE_COLOUR)||this.options.set(rf.NEGATIVE_COLOUR,Oo.NEGATIVE_COLOUR),this.options.has(rf.PLAYER_COLOUR)||this.options.set(rf.PLAYER_COLOUR,Oo.PLAYER_COLOUR),this.options.has(rf.PAUSE_ON_INIT)||this.options.set(rf.PAUSE_ON_INIT,Oo.PAUSE_ON_INIT),this.options.has(rf.AI_DIFFICULTY)||this.options.set(rf.AI_DIFFICULTY,Oo.AI_DIFFICULTY),this.changePositiveColour(),this.changeNegativeColour(),this.changePlayerColour(),this.optionsSubject.next()}save(){return{options:JSON.stringify(Array.from(this.options.entries()))}}reset(e,n){}registerForOptionsChange(){return this.optionsSubject.asObservable()}setOption(e,n){this.options.set(e,n),this.optionsSubject.next()}setOptions(e){for(const n of e)this.options.set(n.option,n.value);this.optionsSubject.next()}getOption(e){return this.options.get(e)}setPositiveColour(e){this.options.set(rf.POSITIVE_COLOUR,e),this.changePositiveColour()}setNegativeColour(e){this.options.set(rf.NEGATIVE_COLOUR,e),this.changeNegativeColour()}setPlayerColour(e){this.options.set(rf.PLAYER_COLOUR,e),this.changePlayerColour()}changePositiveColour(){document.getElementById("VillagerKings").style.setProperty("--positive-colour",this.options.get(rf.POSITIVE_COLOUR))}changeNegativeColour(){document.getElementById("VillagerKings").style.setProperty("--negative-colour",this.options.get(rf.NEGATIVE_COLOUR))}changePlayerColour(){this.servicesService.getService(Wu.WORLD).setPlayerColour(this.options.get(rf.PLAYER_COLOUR))}}return e.ngInjectableDef=ce({factory:function(){return new e(De(sf))},token:e,providedIn:"root"}),e})();var of=function(e){return e[e.SPRING=0]="SPRING",e[e.SUMMER=1]="SUMMER",e[e.AUTUMN=2]="AUTUMN",e[e.WINTER=3]="WINTER",e}({});class af{constructor(e,n){this.day=e,this.year=n}}let cf=(()=>{class e{constructor(e,n){this.servicesService=e,this.optionsService=n,this.audios=[],this.musicFiles=["assets/sounds/medieval_life.mp3","assets/sounds/medieval_village.mp3"],e.addService(Wu.SOUND,this),this.optionsService.registerForOptionsChange().subscribe(()=>{const e=this.optionsService.getOption(rf.SOUND_MASTER)&&this.optionsService.getOption(rf.SOUND_MUSIC),n=this.optionsService.getOption(rf.SOUND_MASTER)&&this.optionsService.getOption(rf.SOUND_EFFECTS);this.audios.forEach(l=>{l.audio.volume=l.effect?n?this.optionsService.getOption(rf.SOUND_MASTER_VOLUME)/100*(this.optionsService.getOption(rf.SOUND_EFFECTS_VOLUME)/100):0:e?this.optionsService.getOption(rf.SOUND_MASTER_VOLUME)/100*(this.optionsService.getOption(rf.SOUND_MUSIC_VOLUME)/100):0})})}playAudio(e,n=!0){this.audios=this.audios.filter(e=>!e.audio.ended),e.load();const l=this.optionsService.getOption(rf.SOUND_MASTER)&&this.optionsService.getOption(rf.SOUND_MUSIC),t=this.optionsService.getOption(rf.SOUND_MASTER)&&this.optionsService.getOption(rf.SOUND_EFFECTS);return e.volume=n?t?this.optionsService.getOption(rf.SOUND_MASTER_VOLUME)/100*(this.optionsService.getOption(rf.SOUND_EFFECTS_VOLUME)/100):0:l?this.optionsService.getOption(rf.SOUND_MASTER_VOLUME)/100*(this.optionsService.getOption(rf.SOUND_MUSIC_VOLUME)/100):0,e.play(),this.audios.push({audio:e,effect:n}),e}playMarket(){this.optionsService.getOption(rf.SOUND_EFFECT_MARKET)&&this.playAudio(new Audio("assets/sounds/village_bells.mp3"))}playResearch(){this.optionsService.getOption(rf.SOUND_EFFECT_RESEARCH)&&this.playAudio(new Audio("assets/sounds/village_bells.mp3"))}playBattle(){this.optionsService.getOption(rf.SOUND_EFFECT_INVASION)&&this.playAudio(new Audio("assets/sounds/battle.mp3"))}playSeason(e){if(this.optionsService.getOption(rf.SOUND_EFFECT_SEASON))switch(e){case of.SPRING:this.playAudio(new Audio("assets/sounds/spring.mp3"));break;case of.SUMMER:this.playAudio(new Audio("assets/sounds/summer.mp3"));break;case of.AUTUMN:this.playAudio(new Audio("assets/sounds/autumn.mp3"));break;case of.WINTER:this.playAudio(new Audio("assets/sounds/winter.mp3"))}}playMusic(){const e=this.servicesService;this.playAudio(new Audio(Yu.randomArrayElement(this.musicFiles)),!1).addEventListener("ended",(function(){e.getService(Wu.SOUND).checkForMusic()}))}checkForMusic(){this.audios=this.audios.filter(e=>!e.audio.ended),this.audios.find(e=>!e.effect)||this.playMusic()}}return e.ngInjectableDef=ce({factory:function(){return new e(De(sf),De(uf))},token:e,providedIn:"root"}),e})(),hf=(()=>{class e{constructor(e,n){this.servicesService=e,this.soundService=n,this.daySubject=new I,this.monthSubject=new I,this.yearSubject=new I,this.year=1,this.day=1,this.tickInDay=1,this.season=of.SPRING,e.addService(Wu.CALENDAR,this)}getName(){return"CalendarService"}load(e){this.day=e.day,this.year=e.year,this.season=e.season,this.tickInDay=e.tickInDay}save(){return{day:this.day,year:this.year,season:this.season,tickInDay:this.tickInDay}}reset(e,n){this.day=1,this.tickInDay=1,this.season=of.SPRING,e?this.year=1:this.year+=1}tick(e){this.tickInDay+=1,this.tickInDay===Eo+1&&(this.tickInDay=1,this.day+=1,this.day===vo+1&&(this.day=1,this.year+=1,this.servicesService.getGameService().isEnabled(Iu.CALENDAR)&&(this.servicesService.getLogService().success("New Year!"),this.monthSubject.next(Math.floor(this.day/30+1))),this.yearSubject.next(this.year)),this.daySubject.next(this.day),this.day%30==1&&0!==Math.floor(this.day/30)&&this.monthSubject.next(Math.floor(this.day/30+1)));const n=this.season;this.day>=1&&this.day<=vo/4?this.season=of.SPRING:this.day>vo/4&&this.day<=vo/2?this.season=of.SUMMER:this.day>vo/2&&this.day<=vo/4*3?(this.season!==of.AUTUMN&&(this.servicesService.getResourcesService().checkResourcesBeforeWinter(),this.servicesService.getService(Wu.TUTORIAL).checkWinterTutorial()),this.season=of.AUTUMN):this.day>vo/4*3&&this.day<=vo&&(this.season=of.WINTER),n!==this.season&&this.soundService.playSeason(this.season)}getDay(){return this.day}getYear(){return this.year}getSeason(){return this.season}getAbsoluteDay(){return(this.year-1)*vo+this.day}getSeasonForAbsoluteDay(e){const n=(e-1)%vo+1;return n>=1&&n<=vo/4?of.SPRING:n>vo/4&&n<=vo/2?of.SUMMER:n>vo/2&&n<=vo/4*3?of.AUTUMN:n>vo/4*3&&n<=vo?of.WINTER:void 0}registerForDayChange(){return this.daySubject.asObservable()}registerForMonthChange(){return this.monthSubject.asObservable()}registerForYearChange(){return this.yearSubject.asObservable()}getDate(){return new af(this.day,this.year)}progressDays(e){this.day+=10}getTickInDay(){return this.tickInDay}}return e.ngInjectableDef=ce({factory:function(){return new e(De(sf),De(cf))},token:e,providedIn:"root"}),e})(),df=(()=>{class e{constructor(e,n,l){this.servicesService=e,this.calendarService=n,this.optionsService=l,this.entries=[],this.servicesService.addService(Wu.LOG,this),this.logSubject=new I}customLog(e,n){this.entries.push(new tf(e,n,this.calendarService.getDay())),this.logSubject.next()}log(e){this.entries.push(new tf(e,qu.LOG,this.calendarService.getDay())),this.logSubject.next()}warning(e){this.entries.push(new tf(e,qu.WARNING,this.calendarService.getDay())),this.logSubject.next()}success(e){this.entries.push(new tf(e,qu.SUCCESS,this.calendarService.getDay())),this.logSubject.next()}mystical(e){this.entries.push(new tf(e,qu.MYSTICAL,this.calendarService.getDay())),this.logSubject.next()}fightReport(e){this.entries.push(new tf(e.message,qu.FIGHT_REPORT,this.calendarService.getDay(),e)),this.logSubject.next()}errorReport(e){this.entries.push(new tf(e.message,qu.ERROR,this.calendarService.getDay(),e)),this.logSubject.next()}autoSave(){if(this.entries.length>0){const e=this.entries[this.entries.length-1];if(e.message&&e.message.includes("Auto saved")){let n=2;const l=e.message.replace("Auto saved","").replace(" ","");l.length>0&&(n=Number(l)+1),e.message="Auto saved "+n,this.logSubject.next()}else this.log("Auto saved")}else this.log("Auto saved")}registerForLogs(){return this.logSubject.asObservable()}getEntries(){return this.entries}clearEntries(){this.entries=[],this.logSubject.next()}getName(){return"LogService"}load(e){this.entries=e.logs}reset(e,n){this.entries=e?[]:this.entries.slice(-5).filter(e=>e.type===qu.MYSTICAL)}save(){return this.optionsService.getOption(rf.SAVE_LOGS)?{logs:this.entries.slice(Math.max(0,this.entries.length-100),this.entries.length)}:{logs:[]}}}return e.ngInjectableDef=ce({factory:function(){return new e(De(sf),De(hf),De(uf))},token:e,providedIn:"root"}),e})();var gf=function(e){return e.ERROR_1="ERROR_1: Copying failed",e.ERROR_2="ERROR_2: Resource limit below 0",e.ERROR_3="ERROR_3: Workers below 0",e.ERROR_4="ERROR_4: Population Cap below 0",e.ERROR_5="ERROR_5: ",e.ERROR_6="ERROR_6: ",e.ERROR_7="ERROR_7: ",e.ERROR_8="ERROR_8: ",e}({});let pf=(()=>{class e{constructor(e){this.servicesService=e,this.textSubject=new I,this.errorSubject=new I,this.missionDataSubject=new I,this.returnRegionSubject=new I,this.regionSelectionSubject=new I,this.shipyardLimitBoat=new I,this.buildingSubject=new I,this.tutorialSubject=new I,this.tutorialResponseSubject=new I,this.valueSubject=new I,this.onOpenSubject=new I,this.confirmationSubject=new I,this.abdicationSubject=new I,this.closeSubject=new I,this.valueResponseSubject=new I,this.regionSubject=new I,this.worldRegionSubject=new I,this.fightReportSubject=new I,this.techSubject=new I,this.resourceOptionsSubject=new I,this.resourceOptionsResponseSubject=new I,this.modals=[],this.servicesService.addService(Wu.MODAL,this)}add(e){this.modals.push(e)}remove(e){this.modals=this.modals.filter(n=>n.id!==e)}open(e){this.modals.find(n=>n.id===e).open(),this.onOpenSubject.next(e)}close(e){this.modals.find(n=>n.id===e).close(),this.closeSubject.next(e)}registerForText(){return this.textSubject.asObservable()}registerForErrorReport(){return this.errorSubject.asObservable()}registerForOnOpen(){return this.onOpenSubject.asObservable()}registerForConfirmation(){return this.confirmationSubject.asObservable()}sendConfirmationResult(e){this.confirmationSubject.next(e)}registerForAbdication(){return this.abdicationSubject.asObservable()}sendAbdicationResult(e){this.abdicationSubject.next(e)}setModalText(e){this.textSubject.next(e)}setModalErrorReport(e){this.errorSubject.next(e)}registerForRegion(){return this.regionSubject.asObservable()}setRegion(e){this.regionSubject.next(e)}registerForCloseModal(){return this.closeSubject.asObservable()}sendCloseSignal(e){this.closeSubject.next(e)}registerForValue(){return this.valueSubject.asObservable()}setModalValue(e){this.valueSubject.next(e)}sendValueInput(e){this.valueResponseSubject.next(e)}registerForValueResponse(){return this.valueResponseSubject.asObservable()}registerForMissionData(){return this.missionDataSubject.asObservable()}registerForBuilding(){return this.buildingSubject.asObservable()}setMissionData(e){this.missionDataSubject.next(e)}setBuilding(e){this.buildingSubject.next(e)}info(e){this.open(ju.INFO),this.setModalText(e)}openTutorialModal(e){const n=this.modals.find(e=>e.id===ju.TUTORIAL);n.close(),n.openTutorialWindow(e)}registerForTutorial(){return this.tutorialSubject.asObservable()}setTutorial(e){this.tutorialSubject.next(e)}registerForTutorialResponse(){return this.tutorialResponseSubject.asObservable()}sendTutorialResponse(e){this.tutorialResponseSubject.next(e)}registerForResourceOptions(){return this.resourceOptionsSubject.asObservable()}setResourceOptions(e){this.resourceOptionsSubject.next(e)}registerForResourceOptionsResponse(){return this.resourceOptionsResponseSubject.asObservable()}sendResourceOptionsResponse(e){return this.resourceOptionsResponseSubject.next(e)}registerForReturnRegion(){return this.returnRegionSubject.asObservable()}setReturnRegion(e){this.returnRegionSubject.next(e)}registerForRegionSelectionOrder(){return this.regionSelectionSubject.asObservable()}setRegionSelection(e){this.regionSelectionSubject.next(e)}registerForShipyardLimitBoat(){return this.shipyardLimitBoat.asObservable()}setShipyardLimitBoat(e){this.shipyardLimitBoat.next(e)}registerForWorldRegion(){return this.worldRegionSubject.asObservable()}setWorldRegion(e){this.worldRegionSubject.next(e)}registerForFightReport(){return this.fightReportSubject.asObservable()}setFightReport(e){this.fightReportSubject.next(e)}registerForTech(){return this.techSubject.asObservable()}setTech(e){this.techSubject.next(e)}}return e.ngInjectableDef=ce({factory:function(){return new e(De(sf))},token:e,providedIn:"root"}),e})(),mf=(()=>{class e{constructor(e,n,l){this.modalService=e,this.servicesService=n,this.router=l,this.tutorialsEnabled=!1,this.villageTutorialState=0,this.forestTutorialState=0,this.fieldTutorialState=0,this.mountainsTutorialState=0,this.plateauTutorialState=0,this.seaTutorialState=0,this.resourcesTutorialState=0,this.winterTutorialState=0,n.addService(Wu.TUTORIAL,this)}getName(){return"TutorialService"}load(e){this.villageTutorialState=void 0!==e.villageTutorialState?e.villageTutorialState:0,this.forestTutorialState=void 0!==e.forestTutorialState?e.forestTutorialState:0,this.resourcesTutorialState=void 0!==e.resourcesTutorialState?e.resourcesTutorialState:0,this.fieldTutorialState=void 0!==e.fieldTutorialState?e.fieldTutorialState:0,this.mountainsTutorialState=void 0!==e.mountainsTutorialState?e.mountainsTutorialState:0,this.plateauTutorialState=void 0!==e.plateauTutorialState?e.plateauTutorialState:0,this.seaTutorialState=void 0!==e.seaTutorialState?e.seaTutorialState:0,this.winterTutorialState=void 0!==e.winterTutorialState?e.winterTutorialState:0}save(){return{villageTutorialState:this.villageTutorialState,forestTutorialState:this.forestTutorialState,resourcesTutorialState:this.resourcesTutorialState,fieldTutorialState:this.fieldTutorialState,mountainsTutorialState:this.mountainsTutorialState,plateauTutorialState:this.plateauTutorialState,seaTutorialState:this.seaTutorialState,winterTutorialState:this.winterTutorialState}}reset(e,n){}checkRegionTutorial(e){if(this.tutorialsEnabled)switch(e){case Du.VILLAGE:if(0===this.villageTutorialState){this.startTutorial(bo.VILLAGE_TUTORIAL);const e=this.modalService.registerForTutorialResponse().subscribe(n=>{e.unsubscribe(),this.villageTutorialState=n})}break;case Du.FOREST:if(0===this.forestTutorialState){this.startTutorial(bo.FOREST_TUTORIAL);const e=this.modalService.registerForTutorialResponse().subscribe(n=>{e.unsubscribe(),this.forestTutorialState=n})}break;case Du.FIELD:if(0===this.fieldTutorialState){this.startTutorial(bo.FIELD_TUTORIAL);const e=this.modalService.registerForTutorialResponse().subscribe(n=>{e.unsubscribe(),this.fieldTutorialState=n})}break;case Du.MOUNTAINS:if(0===this.mountainsTutorialState){this.startTutorial(bo.MOUNTAINS_TUTORIAL);const e=this.modalService.registerForTutorialResponse().subscribe(n=>{e.unsubscribe(),this.mountainsTutorialState=n})}break;case Du.PLATEAU:if(0===this.plateauTutorialState){this.startTutorial(bo.PLATEAU_TUTORIAL);const e=this.modalService.registerForTutorialResponse().subscribe(n=>{e.unsubscribe(),this.plateauTutorialState=n})}break;case Du.SEA:if(0===this.seaTutorialState){this.startTutorial(bo.SEA_TUTORIAL);const e=this.modalService.registerForTutorialResponse().subscribe(n=>{e.unsubscribe(),this.seaTutorialState=n})}}}checkResourcesTutorial(){if(0===this.resourcesTutorialState){this.startTutorial(bo.RESOURCES_TUTORIAL);const e=this.modalService.registerForTutorialResponse().subscribe(n=>{e.unsubscribe(),this.resourcesTutorialState=n})}}enableTutorials(){this.tutorialsEnabled=!0}resetTutorials(){this.villageTutorialState=0,this.forestTutorialState=0,this.fieldTutorialState=0,this.mountainsTutorialState=0,this.plateauTutorialState=0,this.seaTutorialState=0,this.resourcesTutorialState=0,this.winterTutorialState=0,this.router.url.endsWith("village")?this.checkRegionTutorial(Du.VILLAGE):this.router.url.endsWith("forest")?this.checkRegionTutorial(Du.FOREST):this.router.url.endsWith("field")?this.checkRegionTutorial(Du.FIELD):this.router.url.endsWith("mountains")?this.checkRegionTutorial(Du.MOUNTAINS):this.router.url.endsWith("plateau")?this.checkRegionTutorial(Du.PLATEAU):this.router.url.endsWith("sea")?this.checkRegionTutorial(Du.SEA):this.router.url.endsWith("resources")?this.checkResourcesTutorial():this.modalService.info("Tutorials have been enabled")}startTutorial(e){this.modalService.setTutorial(e),this.servicesService.getService(Wu.TICKER).stop(),this.modalService.openTutorialModal(e[0].position)}showCurrentViewTutorial(){this.router.url.endsWith("village")?this.startTutorial(bo.VILLAGE_TUTORIAL):this.router.url.endsWith("forest")?this.startTutorial(bo.FOREST_TUTORIAL):this.router.url.endsWith("field")?this.startTutorial(bo.FIELD_TUTORIAL):this.router.url.endsWith("mountains")?this.startTutorial(bo.MOUNTAINS_TUTORIAL):this.router.url.endsWith("plateau")?this.startTutorial(bo.PLATEAU_TUTORIAL):this.router.url.endsWith("sea")?this.startTutorial(bo.SEA_TUTORIAL):this.router.url.endsWith("resources")?this.startTutorial(bo.RESOURCES_TUTORIAL):this.modalService.info("There is no tutorial for this tab")}checkWinterTutorial(){if(0===this.winterTutorialState){this.startTutorial(bo.WINTER_TUTORIAL);const e=this.modalService.registerForTutorialResponse().subscribe(n=>{e.unsubscribe(),this.winterTutorialState=n})}}}return e.ngInjectableDef=ce({factory:function(){return new e(De(pf),De(sf),De(up))},token:e,providedIn:"root"}),e})();const ff=[{VERSION:"v1.0.1",MESSAGE:['<ul><li>Fixed barracks not unlocking after being researched</li><li>Fixed weather research description</li><li>Shrine and Church will be available earlier</li><li>"New year!" message will appear on day 1 and only after researching calendar</li><li>Shrine and Church will now log when they become available</li><li>Fixed wrapper boxes sizes</li><li>Pit mine research description changed</li><li>Reduced building button and dropdown font size to prevent overflow</li><li>Aligned building icon and text</li><li>Reduced amount of fur produced by hunter</li><li>Fixed merchant buying items for 0 coins</li><li>Reduced required research points for forestry</li><li>Last tutorial step no longer has "skip tutorial" button</li><li>Available nutrition metric doesn\'t include reserved food</li><li>Researching animals require hay</li><li>Fixed geologist last find description</li></ul>']},{VERSION:"v1.0.2",MESSAGE:["<ul><li>Fixed building line icons alignment</li><li>Refactored dev message window into changelog</li><li>Reduced low happiness severity</li><li>Doubled starting food amount</li><li>Buffed berry and mushroom find chance</li></ul>"]},{VERSION:"v1.0.3",MESSAGE:["<ul><li><b>Famine is now satisfied with 50% less food</b></li><li><b>Refactored happiness so that multiple things combined cannot bring it down to 0</b></li><li>It is now possible to pause the game through settings dropdown menu</li><li>The game is now paused during tutorials</li><li>Reduced brushwood cost of stone tools and bow.</li><li>Buildings are now taking action in random order instead of left to right top to bottom</li><li>Tavern decrease happiness over 75% when no alcohol is available</li><li>Changed Tavern building lines to show amount of alcohols</li><li>Added option to produce fish food for fishers</li><li>Added option to boost school of fish with fish food</li><li>Fixed new school of fish not spawning</li><li>Fixed new sharks not spawning</li><li>Added new Research for Fish Food</li><li>Added tutorials for Field, Mountains, Sea and Plateau regions</li><li>Added close button for royal points modal</li><li>Greatly increased animal taming chance <br>(Taming is supposed to be slow, as this only to be used to kick-start pastures. Another method is to buy animals on the market)</li><li>Fixed animal amount calculation errors resulting in negative, doubled<br> or over the limit amount of animals</li><li>Added notification to market tab if there is no marketplace</li><li>Changed marketplace bribe button text</li></ul>"]},{VERSION:"v1.0.4",MESSAGE:["<ul><li><b>Fixed demolishing huts and houses</b></li><li>Fixed Crafting tab display for Chrome and Edge</li><li>Increased gatherer chance for finding stone and brushwood</li><li>Added several warning for low forest size</li><li>Increased minimal yearly forest growth</li></ul>"]},{VERSION:"v1.0.5",MESSAGE:['<ul><li><b>Fixed wrong army mission being started</b></li><li><b>Fixed Food nutrition value displaying NaN and blocking anything that requires FOOD nutrition as cost</b></li><li>Fixed "Spy" mission not displaying enemy power</li><li>Church will now unlock Religion tab when built</li><li>Urban Planning no longer require house to be researched</li></ul>']},{VERSION:"v1.0.6",MESSAGE:["Bug fixes:<ul><li><b>Fixed King of the People royal perk not allowing to build houses</b></li><li><b>Fixed royal perks not processing unlocked research correctly</b></li><li><b>Fixed research permanent effects not to persist through soft reset and abdication</b></li><li><b>Fixed geologist not finding gold, silver and iron</b></li><li><b>Fixed Tavern not appearing after being researched</b></li><li><b>Fixed fields, orchards and pastures splitting value</b></li><li><b>Fixed 'Blessing' prayer and excluded a lot of buildings that would not benefit from it</b></li><li><b>Fixed changing religion to be player action</b></li></ul>Performance:<ul><li>Improved performance for reloading region<br>It will still take regular time on the first visit but after that I got about 3 times better loading time for region with 36 buildings</li></ul>Other:<ul><li>Improved butcher meat transporting. It no longer requires whole warehouse space to be available at once</li><li>Increased geologist deposits find chances</li><li>Renamed 'Entertainment' research to 'Alcohol'</li><li>Housing buildings show when they are using fuel</li><li>Added research tab warning when no workshop is set to research</li><li>Added button to show finished research projects</li><li>Increased average meat production for hunter lodge</li><li>Improved scrolling in modals</li><li>Urban planning research points requirement greatly reduced</li><li>Improved some prayers descriptions</li><li>Nature effects are now logged when added</li><li>Decreased recruitment times for all troops</li><li>Fishers huts will now work during rain (apparently fish can catch even better during rain due to more oxygen in the water)</li></ul>"]},{VERSION:"v1.0.7",MESSAGE:["Bug fixes:<ul><li><b>Fixed forecast period saving. It will no longer go back to one day after researching weather and reloading game</b></li><li><b>Fixed pastures filling only one butcher. Pasture will now give animal to butcher with shortest queue</b></li><li><b>Fixed demolishing buildings other than housing buildings</b></li><li><b>Fixed work management output to start with maxed output resources</b></li><li><b>Fixed mission not returning troops</b></li><li><b>Fixed possibility to build next wonder without researching</b></li><li><b>Lost wonder effects will be restored on abdication or soft reset</b></li><li><b>Fixed harvesting from field in summer</b></li><li><b>Fixed buying animal filling entire pasture</b></li><li><b>Fixed animals produce filling warehouse when chores went over 50</b></li></ul>Other:<ul><li><b>Changed expedition to take longer and cost more but give more land and kill less troops</b></li><li><b>Improved building filtering and made it persistent</b></li><li><b>Increased game size by about 25%</b></li><li><b>Arrange doesn't require to be researched anymore</b></li><li><b>New option to change visual progress bars to text progress value</b></li><li>Workshops show what is being researched</li><li>Geologist is no longer limited by mountains size</li><li>Slightly improved Royal perks descriptions</li><li>Added special warning for demolishing housing building when there is no enough free space to move all occupants to</li><li>Increased amount of fuel crafted from coal and heating power of coal</li><li>Pit mine now warn that it requires 20 deposits</li><li>Slightly corrected research display</li><li>Changes for Royal Points granting events</li><li>Disabled Ascension temple until it will be fixed</li></ul>Information:<ul><li>Drag and drop arrange seems to work on some computers and not on others. I have tested on a PC and laptop with the same operating system and browser version and it does work on PC and not on laptop.</li></ul>"]},{VERSION:"v1.0.8",MESSAGE:['Bug fixes:<ul><li><b>Fixed workshop display that caused buildings to display in two columns</b></li><li><b>Changes regarding workshop logic that might fix locking issue</b></li><li><b>Fixed "R Quarry" and "R Smithy" prerequisites display</b></li><li><b>Fixed incorrect animals moving when splitting or demolishing pasture</b></li><li><b>Gatherers won\'t lock on warehouse. Locking resource will be removed</b></li><li><b>Fixed field and orchard harvest scale display</b></li><li><b>Fixed bread recipe wheat cost to 2 instead of 1</b></li><li><b>Work management will fire worker after finishing work cycle if rules are not satisfied</b></li><li><b>Fixed and enabled Ascension Temple (requires conditions to be met to become available)</b></li><li><b>Fixed Missions again</b></li><li><b>Fixed some metals recipes not adding after research and smithy built</b></li><li><b>Fixed smithy demolishing</b></li></ul>Other:<ul><li><b>Added tooltips to resources in resource tab.<br>Consumable resources display nutrition<br>Fuel resources display heating power</b></li><li><b>Resources tooltip will now show what building/action used each resource in previous 30 days.</b></li><li>Increased hay consumption of animals by 30%</li><li>Increased apples nutrition value</li><li>Increased apples harvest multiplier</li><li>Increased great lighthouse royal points temporary (to make up for no effects)</li></ul>']},{VERSION:"v1.0.9",MESSAGE:["New features<ul><li><b>Implemented new extended reserver that can define different limit for most of the consumers</b></li></ul>Bug fixes:<ul><li><b>Fixed building Smithy required to research tech allowing to build it</b></li><li><b>Fixed limited buildings allowed to build over the limit</b></li><li><b>Fixed missions finishing without calculating outcome</b></li><li><b>Most probably fixed overscrolling from game to kongregate window</b></li></ul>Other:<ul><li>Doubled iron deposit find chance</li><li>Ore deposits found limited at 50 each</li><li>Troops multiplier now shows multiplied required resources in tooltip. If you cannot afford - troop turns grey</li><li>Slightly increased happiness reduction from half food rations</li><li>Buildings number limit is now added to build window</li><li>Decreased brushwood fuel cost and increased brushwood energy</li></ul>"]},{VERSION:"v1.0.10",MESSAGE:["New features<ul><li><b>Added more production details to buildings in build window</b></li><li><b>Added Manufacture building for specialised crafting</b></li><li><b>Added Specialised production research to unlock manufacture</b></li></ul>Bug fixes:<ul><li><b>Fixed and improved building power modifier display to include permanent effects and correctly use weather multiplier</b></li><li><b>Fixed pastures limits updating to resources tab</b></li><li><b>Fixed wooden tower starting with decreased health</b></li><li><b>Fixed metallurgy to add bronze recipe</b></li><li><b>Fixed orchard harvest calculation when in autumn</b></li><li><b>Fixed bug with New King buff lasting 0 days after reset or abdication</b></li></ul>Other:<ul><li>Changed work management option description (management tab) and added description message after researching Human Resources</li><li>Extended some buildings descriptions</li><li>Increased fur production from hunters</li></ul>"]},{VERSION:"v1.0.11",MESSAGE:["New features<ul><li><b>Forest management improved and moved into management tab</b></li></ul>Bug fixes:<ul><li><b>Fixed some wonders add effects after each reset</b></li><li><b>Fixed Forester not returning land when demolished</b></li></ul>Other:<ul><li>Added option to show only current view tutorial</li><li>Added buttons to hire/fire workers in all currently viewed buildings</li><li>Removed autofill '1' for crafting amount input</li><li>Increased expeditions cost</li><li>Decreased chicken and pigs breeding speed </li><li>Forestry research now requires management to be researched</li><li>Added Stonehenge effect for manufacture</li><li>Changed wonders to reapply missing effects on soft reset or abdication</li><li>Changed some missions times</li><li>Added troops list to mission in progress</li></ul>"]},{VERSION:"v1.0.12",MESSAGE:["New features<ul><li><b>Added new housing building</b></li><li><b>Added crafting cheese from milk (might require new run)</b></li><li><b>Added new army troop</b></li></ul>Bug fixes:<ul><li><b>Fixed huts and houses ignoring fuel items reserved amounts</b></li><li><b>Smithy can no longer be blessed</b></li><li><b>Fixed manufacture producing even when there are no required resources</b></li><li><b>Fixed pastures not producing when there is more than 1000 animals</b></li><li><b>Fixed some imperfections on the background image</b></li><li><b>Fixed orchard resources not available in resources and market before discovered via harvest</b></li></ul>Other:<ul><li><b>Warehouses can be combined and split</b></li><li>Warehouse building size increased (resource storage stays the same)</li><li>Nutrition display has been moved to header (might cause highlighted items to overflow)</li><li>Increased hay required by animals during winter</li><li>Animals now require food for the whole year ( less food required during spring, summer and autumn than in winter )</li><li>Added tooltip to market offers to show more information regarding the offer</li><li>Removed horse cost from expeditions</li><li>Manufacture moved closer in the research tree and has cost decreased</li><li>Mint now requires gold and silver to make coins</li><li>Added nutrition usage to header nutrition tooltip</li><li>Forest low size warnings will now display only when forestry is not researched</li><li>Crafting tab orders will now display how many workshops are crafting particular item</li></ul>"]},{VERSION:"v1.0.13",MESSAGE:["New features<ul><li><b>Added new health resources (no use yet)</b></li><li><b>It's now possible to switch reserved value to be interpreted as reserve % of total limit</b></li><li><b>Added possibility to add second row to header through management menu</b></li><li><b>Added Heritage system that awards points based on population size on reset</b></li></ul>Performance<ul><li><b>Big performance improvement</b></li><li><b>New performance option in settings (give current default performance a try before changing options)</b></li></ul>Bug fixes:<ul><li><b>Fixed wonder construction not benefiting from construction effects</b></li><li><b>Church will employ worker when finished building</b></li></ul>Other:<ul><li><b>Changed arrange drag and drop to click and click</b></li><li>Researching windmill will now make fabric visible and tradeable</li><li>Upgrade arrow will now have green outline</li><li>Farm can now be upgraded to level 2</li><li>Shrine and Church now have diminishing return from population size</li><li>Apples growth time reduced by 25%</li><li>Greatly reduced alcohol consumption rate</li><li>Invasions will now only happen when village reach certain size</li><li>Invasions will now have a recharge period when invasion threat will not grow</li><li>Workers and population can now be added to header</li><li>Nutrition value will show in the header from the start</li></ul>"]},{VERSION:"v1.0.14",MESSAGE:["New features<ul><li><b>Army troops will now require soldiers pay every 30 days.<br>If there is no enough coins to pay soldier has 25% chance to desert</b></li><li><b>Added new buildings filter for all/working/idle buildings</b></li></ul>Bug fixes:<ul><li><b>Fixed iron recipe not added after researching</b></li></ul>Other:<ul><li>Renamed 'Leather' research to 'Tannery' and removed it from tailor prerequisites</li><li>Added warning about low heating resources on start of autumn</li><li>Added herbs to gatherer building description</li><li>Vegetable and meat soups now require herbs</li><li>Increased high (90-100) happiness effect from 35% to 50%</li><li>Prioritized resources have higher chance to appear on market</li><li>Added new royal perk</li><li>Added a window for nature effects in effects management</li><li>Increased workshops building size</li><li>Decreased animals reproduction rate</li><li>Farm upgrade increases farm power</li></ul>"]},{VERSION:"v1.0.15",MESSAGE:["New features<ul><li><b>Added 'Herbalism' research that allows to plant herbs at fields</b></li></ul>Bug fixes:<ul><li><b>Fixed field harvest display and yield calculation</b></li><li><b>Fixed House building awarded with King of the People perk. It now starts with 3 occupants</b></li><li><b>Fixed game freeze when coins were reserved</b></li></ul>Other:<ul><li>Manufacture no longer stops production during storm</li><li>Mint building size increased, power decreased, output coins increased to be worth more than input resources</li><li>Initial housing buildings start equipped with clothes</li><li>Mathematics research will now also buff deconstructions</li><li>Added pause/resume button in the footer</li><li>Added options to change positive and negative colours to user defined</li></ul>"]},{VERSION:"v1.0.16",MESSAGE:["New features<ul><li><b>Added food priority to management</b></li></ul>Performance<ul><li><b>Added settings option that allows to paginate buildings in regions.<br>Number of buildings per page can be also defined in settings</b></li></ul>Bug fixes:<ul><li><b>Fixed king of the people House building having too much population from start (6 instead of 3)</b></li><li><b>Fixed selling animals removing more than it should</b></li><li><b>Fixed pit mine mining only 199 resources</b></li></ul>Other:<ul><li>Pit mine base power reduced</li><li>Workshops now show what resource they are waiting to deposit</li><li>Workshops won't start crafting if there is no space in warehouse or if warehouse will be filled to full by other workshops</li></ul>"]},{VERSION:"v1.0.17",MESSAGE:["New features<ul><li><b>Resources tooltips will now show who produced that item in the last 30 days</b></li></ul>Bug fixes:<ul><li><b>Fixed mountains tab deposits causing scroll bar to go below the screen</b></li><li><b>Tooltips should no longer go under the screen</b></li><li><b>Probably fixed tavern bug</b></li><li><b>Fixed army payday countdown stuck and invasions being tied to this countdown</b></li><li><b>Fixed day being 11 ticks instead of 10</b></li><li><b>Fixed golden items not resetting correctly</b></li></ul>Other:<ul><li>Changed 'Royal prophecy' 3rd perk to grant 'Bow' and 'Hunting' research instead of 'Mortar'</li><li>Added display of what golden items have been found during current run</li><li>Farms will now work on pastures during rain</li><li>Pastures details now show how much meat current animals will yield</li><li>Alcohol unlocks beer and wine resources</li><li>Windmill power and flour amount doubled, flour recipe cost reduced</li><li>Longhouse require hay instead of fabric (for roof), House require brushwood (also for roof)</li><li>Limited tavern to 1 (having more might be bad if they lack alcohol as negative/positive effects would be applied multiple times)</li></ul>"]},{VERSION:"v1.0.18",MESSAGE:["Bug fixes:<ul><li><b>Fixed huts not arranging correctly</b></li><li><b>Fixed importing showing researches blocked and as done</b></li><li><b>Fixed temperature in weather tab not showing in fahrenheit</b></li><li><b>Fixed workshop waiting for warehouse text breaking buildings order</b></li></ul>Other:<ul><li>Added description to finished research projects describing what has been learned</li></ul>"]},{VERSION:"v1.0.19",MESSAGE:["New features<ul><li><b>Added cooked fish. Researching 'cooking' required to get recipe</b></li><li><b>Added sheep and wool. Wool can be used to craft fabric</b></li></ul>Bug fixes:<ul></ul>Other:<ul><li><b>Reservation settings carry over soft resets/abdications but are deactivated. Added settings option to carry over activated reservations.</b></li><li><b>Management menu options carry over soft resets/abdications if settings option is enabled. Some options require research to become available so until they are researched default values will be used.</b></li><li>Mushrooms can now be planted on farms</li><li>Increased shrine building power</li><li>Increased single buildings buffs power from 5% to 10%. Added more buff information to buff tooltip</li><li>Added agriculture as prerequisite for alcohol</li><li>Unlocking shrine or church will log in green</li><li>Leather recipe no longer available from start</li><li>Removed 'waiting for trees' from loggers hut if forest is available</li><li>Added management option to display research progress in the header</li><li>Quarry and pit mine will log when resources finished</li><li>Increased bigger housing buildings food and fuel storage. Changed their cost to that value.</li></ul>"]},{VERSION:"v1.0.20",MESSAGE:["Bug fixes:<ul><li><b>Produced/used by data will no longer persist through resets</b></li></ul>Other:<ul><li>Added pasture description to hint where to find first animals</li><li>Added management option to display faith in the header</li><li>Added new royal perk to increase initial crafting queue size</li><li>Increased 'Motivation Speech' perk to last 5 years instead of just 1 year</li><li>Soft reset and abdication now shows how many people are needed for the next heritage point</li><li>Chores cap now scale with pasture size</li><li>Hay nutrition for animals reduced from 25 to 10</li><li>'Auto save' messages will now combine into one with number of total saves</li><li>Added log message when worker is removed from the building. This can be disabled in management</li><li>Used up building (quarry, pit mine) will now have greyed out background</li><li>Greatly increased fruiting rate for all orchard crops. Orchards can now fruit also in summer</li></ul>"]},{VERSION:"v1.1.0",MESSAGE:["New Features:<ul><li><b>Introduced world map tab with new mechanics and reworked army missions</b></li><li><b>New buildings: Embassy, Paper mill, Deep mine</b></li><li><b>A few new researches</b></li><li><b>Added average daily nutrition production display to nutrition tooltip</b></li></ul>Bug fixes:<ul><li>Lack of alcohol now reduces happiness again down to 75%</li><li>Added better verification to auto save period input</li><li>Fixed stuck payday counter when no pay is due</li></ul>Other:<ul><li><b>New level of 'Family jewels' that add coins to starting resources</b></li><li>'Motivation speech' duration increased to 100 years</li><li>Reduced alcohol consumption and happiness increase/decrease</li><li>Used up buildings (quarry, pit mine) will not require demolish confirmation anymore</li><li>Wiki link added to footer</li><li>Pit mine base power decreased</li></ul>"]},{VERSION:"v1.1.1",MESSAGE:["Bug fixes:<ul><li><b>Fixed deep mine not working after upgrade</b></li><li><b>Underground City will now also buff deep mine</b></li><li><b>Player plunder and conquer no longer will fight player region when conquered</b></li><li><b>Fixed issue with region selection moving map instead</b></li></ul>Other:<ul><li><b>Increased cost for AI colonization (so that it happens less frequently)</b></li><li><b>Increased cost for AI troops</b></li><li>Deep mine will take longer to find new ores and longer to upgrade</li><li>Royal perks split into permanent and one time use groups</li><li>When demolishing housing buildings villagers will take their share of food, fuel and clothes to the new building</li><li>There are reports about golden apples in the orchards!</li><li>Removed stone from colonization cost</li></ul>"]},{VERSION:"v1.1.2",MESSAGE:["New Features:<ul><li><b>Auto trade options in resource settings window</b></li></ul>Bug fixes:<ul><li><b>Fixed pasture chores to use farm power bonus</b></li><li><b>Fixed player regions being attacked even with friendly standing</b></li></ul>Other:<ul><li>Reduced troops training time</li><li>Reduced AI attacks chance</li><li>Removed fabric from paper mill cost</li><li>Pit mine require only 20 mountains again</li><li>Added confirm window when trying to buy resource over the limit</li></ul>"]},{VERSION:"v1.1.3",MESSAGE:["New Features:<ul><li><b>Work management has now a season rule</b></li><li><b>Work management can be set to craft always to max</b></li><li><b>Work management for training square added</b></li><li><b>Work management can be set to all buildings of the same type</b></li><li><b>Work management for farm added</b></li></ul>Bug fixes:<ul><li><b>Added Paper mill to resource settings</b></li><li><b>Fixed spy mission</b></li><li><b>'Move' mission troops will return if target region has been conquered</b></li></ul>Other:<ul><li><b>Reduced AI income</b></li><li>Reduced number of AI starting regions</li><li>Changed shrine cost to raw resources</li><li>Deep mine ore finding rate per ore increase with each building level</li><li>Added logs when player region is conquered</li></ul>"]},{VERSION:"v1.1.4",MESSAGE:["New Features:<ul><li><b>Added fight reports</b></li></ul>Other:<ul><li>Diplomacy will be decreased much more after hostile actions towards friendly kingdoms</li><li>AI regions will start with 2 archers to slow down early rush</li><li>Added settings option that will pause the game on page open/refresh</li></ul>"]},{VERSION:"v1.1.5",MESSAGE:["Bug fixes:<ul><li><b>Added missing fight reports on won defense</b></li><li><b>Fixed missing path connection from one of the regions</b></li><li><b>Fixed farm work management not saving</b></li><li><b>Added scroll bar to general management tab to prevent food priority hiding</b></li><li><b>Fixed player kingdom name changing</b></li><li><b>Loot message will combine the same resources</b></li><li><b>'Pickaxe design' will now add bonus to deep mine</b></li></ul>Other:<ul><li>Max colonists set to 20 (as there is no point in sending more)</li><li>Reduced hay yield multiplier from 2 to 1.5</li><li>Reduced the cost of 'specialised production' research</li><li>Increased pit mine base power</li><li>Reduced wine fermenting time from 1 year to 30 days</li><li>Recruits can be 'drag and drop' arranged</li><li>Soft reset/abdication message will now say on what year current run has started</li></ul>"]},{VERSION:"v1.1.6",MESSAGE:["New Features:<ul><li><b>Added research crafting queue</b></li><li><b>Added Buildings auto-sort.<br>Order of buildings will be the same as the order of appearance.</b></li></ul>Bug fixes:<ul><li><b>Chrome map bugs should be fixed now</b></li><li><b>Fixed building confirmation (triggered by button) to work incorrectly when confirmed with enter</b></li></ul>Other:<ul><li>Village region will be now remembered and redirected on reentry</li><li>Added management switch to change default workshop mode</li><li>Added management switch to prevent hunters stop taming</li></ul>"]},{VERSION:"v1.1.7",MESSAGE:["New Features:<ul><li><b>Added percentage auto trade</b></li></ul>Bug fixes:<ul><li><b>Fixed research progress resetting on load. Might not work for research already in the queue (finish or cancel and add again)</b></li></ul>Other:<ul><li>Added queue size display to research tab</li><li>Added pause 'p' and world map 'm' hotkeys</li><li>Improved pasture, field and orchard splitting and combining</li><li>Added management option to allow summer plowing</li><li>Added focus on input to some popup windows</li><li>Added settings option to keep auto trade on after reset</li><li>Added management option to disable auto trade logs</li><li>Changed skirmish win chance calculation</li><li>Added army bonus to each skirmish if army is at least twice the size of the enemy army</li><li>Reduce attack/defense of troop that won skirmish by 1 (tiredness)</li></ul>"]},{VERSION:"v1.1.8",MESSAGE:["Bug fixes:<ul><li><b>Fixed winter happiness from clothes not being applied</b></li></ul>Other:<ul><li>Soft reset renamed to abdication</li><li>World map regions ownership won't reset on abdications unless ordered to</li><li>Added map switch to show capitals, armies and spies</li></ul>"]},{VERSION:"v1.1.9",MESSAGE:["New Features:<ul><li><b>Added Gatherers camp (upgrades will come in future patches)</b></li><li><b>Added sickness mechanic. Freezing villagers will get sick.<br>Each sickness has a chance that sick villager will die.<br>Sick villagers cannot work<br>Herbal medicine reduces sickness time (and indirectly lethality)</b></li><li><b>Added research unlocking with Heritage Points</b></li></ul>Bug fixes:<ul><li><b>Fixed research queue entry canceling when selecting 'no' in confirmation window</b></li><li><b>Fixed header size when importing save with 2-line header on 1-line header state</b></li><li><b>Added Gatherers camp (upgrades will come in future patches)</b></li></ul>Other:<ul><li>Added heating efficiency descriptions to house building</li><li>Auto sort should now also consider manufacture recipe while sorting</li><li>Added log message when faith is full</li><li>Added header entries that list all resources of each category</li><li>Slightly changed buildings sizes</li></ul>"]},{VERSION:"v1.1.10",MESSAGE:["Bug fixes:<ul><li><b>Added Gatherers camp effect from sacred grove</b></li><li><b>Removed 'reset heritage' from abdication</b></li><li><b>Fixed auto sort buildings disappearing when sorting with manufacture without recipe</b></li><li><b>Gatherers camp local storage cleared when mode is changed</b></li><li><b>Fixed colonizing player owned regions would gain extra land</b></li><li><b>Fixed tavern not applying negative alcohol happiness when disabled</b></li><li><b>Fixed research unlocking blocked by buildings prerequisites even if those are fulfilled</b></li></ul>Other:<ul><li>Moved food priority section of management tab higher</li><li>Doubled amount of alcohol added to tavern (1 beer adds 2 beer in tavern, same for wine)</li><li>Increased amount of hay consumed by animals during winter by 50%</li></ul>"]},{VERSION:"v1.1.11",MESSAGE:["New Features:<ul><li><b>Added cloud(server) saving to settings window. Can only be triggered manually during testing period</b></li></ul>Bug fixes:<ul><li><b>QUICKFIX: fixed critical population related bug that could cause game being stuck in infinite loop</b></li><li><b>Fixed research spending HPs when prerequisites are not met</b></li><li><b>More fixes to auto sort function (for manufactures)</b></li></ul>Other:<ul><li>Loot will be sorted alphabetically</li></ul>"]},{VERSION:"v1.1.12",MESSAGE:["New Features:<ul><li><b>Added AI difficulty settings to options menu</b></li></ul>Bug fixes:<ul><li><b>QUICKFIX: Fixed report of defeated units showing for enemy colonisation</b></li><li><b>Fixed AI bug that caused AI daily code to be executed multiple times a day after abdication</b></li><li><b>Fixed server related popups</b></li><li><b>Fixed move army mission not to return from neutral regions</b></li><li><b>Fixed land, forest and mountains not being reset correctly on abdication</b></li><li><b>Fixed gatherers camps, their local storage can now store 1 of each item they can find in current mode.<br>Workers assigned here will work until local storage has all of the resources they can find</b></li></ul>Other:<ul><li>Slightly changed Troops stats</li><li>Militia can no longer be used to attack enemy</li><li>Reduced Spy troop gold cost</li><li>Work management buildings will start with output resources 'full' enabled</li><li>Reduced troops training time</li><li>Removed 50% progress start from gatherer when no resource is found</li></ul>"]},{VERSION:"v1.1.13",MESSAGE:["New Features:<ul><li><b>Added option to build multiple buildings at once</b></li></ul>Bug fixes:<ul><li><b>King of kingdom that has been conquered will no longer die</b></li><li><b>Fixed army effects not applying correctly to troops</b></li><li><b>Pasture will now add 'produced by' and 'used by' data to resources</b></li><li><b>Fixed some of the world map army sending bugs</b></li></ul>Other:<ul><li>World map display option will now be saved</li><li>Changed troops skirmish win calculation to linear function to benefit from army effects</li><li>Changed pig icon to one that looks more like a pig</li><li>Added new vegetable soup recipe that takes 1 berry and 1 mushroom (abdication required to enable)</li><li>Deep mine can now also mine stone</li></ul>"]},{VERSION:"v1.1.14",MESSAGE:["New Features:<ul><li><b>Added 'Royal Archives' royal perk</b></li><li><b>Added 'Barn' building for specialised storage of some crops<br>and a research project to unlock it</b></li><li><b>Added 'Golden fleece'</b></li><li><b>Tools can now be crafted also from copper, bronze and iron</b></li></ul>Other:<ul><li>'Stone' removed from tools names</li><li>Improved crafting recipe naming for some recipes</li></ul>"]},{VERSION:"v1.1.15",MESSAGE:["New Features:<ul><li><b>Added background music and new settings to control sound volume</b></li><li><b>Added different sound effect for invasion</b></li></ul>Bug fixes:<ul><li><b>Fixed one of the regions not being connected to the other one (Creurus land)</b></li></ul>Other:<ul><li>Each sound effect can be enabled/disabled in settings</li></ul>"]},{VERSION:"v1.1.16",MESSAGE:["New Features:<ul><li><b>Added Kitchen building and separate cooking order list in Crafting menu</b></li><li><b>Added Clay pit building</b></li><li><b>Added Tudor House building</b></li><li><b>Added clay, pottery and bricks resources</b></li></ul>Bug fixes:<ul><li><b>Research projects unlocked by royal perks will now correctly show as finished</b></li><li><b>Fixed adding research to queue over queue size</b></li></ul>Other:<ul><li>Reduced brushwood fuel crafting difficulty</li><li>Added Herbs and Berries to Barn storage options</li><li>Increased amount of alcohol added to tavern by 25%</li><li>Winery and Brewery now require pottery to build</li><li>Heating fuel used by housing building will now be affected by building size and heating efficiency</li><li>Bakery now needs to be researched separately after researching cooking</li><li>Increased food rations can now increase happiness more than regular rations <br>(1.5 rations up to 30 happiness and double rations up to 40 happiness)</li></ul>"]},{VERSION:"v1.1.17",MESSAGE:["Bug fixes:<ul><li><b>Digging will now unlock field region</b></li></ul>Other:<ul><li>Changed heritage points calculation to make it harder to acquire the more HPs player has</li><li>Abdicating through top right menu will now add RPs for wonder buildings</li><li>Pasture can breed animals into another pasture of the same type with free space for animals</li><li>Iron prospecting and processing technologies have been moved higher in the tech tree</li><li>Butchers will now acquire fur from animals</li><li>Planks can no longer be burned to heat houses</li><li>Added first winter tutorial</li><li>Improved village and forest tutorials</li></ul>"]},{VERSION:"v1.1.18",MESSAGE:["New Features:<ul><li><b>Added new food recipes: omelette and pie</b></li><li><b>Added new research for cooking recipes</b></li><li><b>Housing buildings can be disabled when there is no occupants inside</b></li></ul>Bug fixes:<ul><li><b>Fixed animals transforming to another animals when switching pasture type</b></li></ul>Other:<ul><li>Changed heritage points algorithm to allows for partial progress carry over</li><li>Decreased heritage points acquiring difficulty</li><li>Decreased land amount from heritage</li><li>Deep mine require ore deposits to recharge</li><li>Kitchen is now faster</li><li>Added resources list filter for empty and non active resources</li></ul>"]},{VERSION:"v1.1.19",MESSAGE:["New Features:<ul><li><b>Added troops speed stat that influence travel speed</b></li><li><b>It's now possible to cancel move, plunder and conquer missions before they reach their target</b></li><li><b>New troop: Horse archer</b></li></ul>Bug fixes:<ul><li><b>Ascension is no longer possible through abdication menu</b></li><li><b>Fixed heritage points xp calculation</b></li></ul>Other:<ul><li>Unite with the people now shows how much times it has been acquired</li><li>Added 'clear all' and 'select all' buttons to troops selection in mission window</li><li>AI will not attack player troops in neutral regions if diplomacy standing allows to</li><li>AI won't send militia to attack</li><li>AI returning army will try to conquer it's origin region if it has been conquered while army was on mission</li><li>AI capitals will keep being displayed after conquered <br>(this can prevent capitals from displaying at all before reset/abdication)</li><li>AI will try to reclaim their capital with high priority</li><li>AI and player missions can now evaluate paths to find shorter path during mission</li><li>AI and player missions will need to fight enemy if passing through enemy region</li></ul>"]},{VERSION:"v1.1.20",MESSAGE:["New Features:<ul><li><b>Housing buildings can be upgraded to the next tier building once it is unlocked</b></li></ul>Bug fixes:<ul><li><b>Added missing resource reservation entry for 'Tudor house' and moved kitchen reservation <br>to separate entry instead of included in crafting</b></li><li><b>Fixed headers entry text in effects management</b></li><li><b>Fixed strength calculation not including defender \"defense\" stat for first attacker troop</b></li><li><b>Fixed defense building mission from freezing the game</b></li></ul>Other:<ul><li>Doubled production output of brewery and winery</li><li>Reduced coins value of beer and wine</li></ul>"]},{VERSION:"v1.1.21",MESSAGE:["New Features:<ul><li><b>Added loggers camps building</b></li><li><b>Added simple summary page for buildings (management menu)</b></li><li><b>Added events engine with a few initial events (more to come in the future)</b></li></ul>Bug fixes:<ul><li><b>Fixed gatherer camps not to get stuck on resources</b></li><li><b>Fixed and improved win chance calculation</b></li></ul>Other:<ul><li>Gatherer camps will get small bonus chance to find resources that are not in the local storage already</li><li>Added log message after researching kitchen that says where to place orders</li><li>Improved butcher resources transport logic and  status reporting</li></ul>"]},{VERSION:"v1.1.22",MESSAGE:['New Features:<ul><li><b>Crafting to % percent of total storage</b></li></ul>Bug fixes:<ul><li><b>Added missing buff for loggers camp from Sacred grove</b></li><li><b>Fixed meteorite not to allow mining below 0</b></li><li><b>Fixed Unite with the people perk not displaying usages when RPs 100 or more</b></li></ul>Other:<ul><li>Added management option to disable "merchant arrived" logging</li></ul>']},{VERSION:"v1.1.23",MESSAGE:["Bug fixes:<ul><li><b>Blessing won't target Barn building anymore</b></li><li><b>'all on' button will now fill up partially staffed multi workers buildings</b></li></ul>Other:<ul><li>Changed basic tools icons (hammer, pickaxe, axe and shovel)</li><li>Bakery research now requires Scientific Method to be researched</li><li>Technical changes regarding buildings with multiple workers</li><li>Added 'reset' button to resource management window</li><li>Changed heritage menu display</li></ul>"]},{VERSION:"v1.1.24",MESSAGE:["New Features:<ul><li><b>It's now possible to dismiss army and recruits</b></li></ul>Bug fixes:<ul><li><b>Fixed Cooking % crafting order showing warnings for missing resources</b></li><li><b>Fixed gatherer camps not being able to collect more than 1 of each resource in each cycle</b></li><li><b>Changed ascension temple stages cost (and number of stages) to avoid icons overflow building box.<br>Total cost remains unchanged</b></li></ul>Other:<ul><li>Added management option to switch default gatherers mode</li><li>Changed Orchard status text to avoid confusion</li><li>Improved Butcher status reporting and added local storage to details list</li><li>Doubled pasture animals produce progress each tick</li><li>Nation name in world map will include Kongregate username by default</li></ul>"]},{VERSION:"v1.1.25",MESSAGE:["Bug fixes:<ul><li><b>Baby boom prayer will now also affect Tudor house</b></li></ul>Other:<ul><li>It's now possible to add crafting and cooking orders to the top of the list by shift clicking on the recipe</li><li>Added help tooltips to crafting and cooking tabs</li><li>Fixed text align to icons for food priority</li><li>Added upgrades to loggers camp</li><li>Added local storage display to loggers camp details</li><li>In build window header with filters and number of buildings will follow when buildings are scrolled</li></ul>"]},{VERSION:"v1.2.0",MESSAGE:["<b>The Sea Update!</b><br><br>New Features:<ul><li><b>Reworked sea region with many new buildings</b></li><li><b>New sea based events and missions</b></li><li><b>New tools resources</b></li><li><b>New Royal perk to unlock</b></li></ul>Bug fixes:<ul><li><b>Fixed deep mine mining below 0 resources</b></li><li><b>Changed recipes filters to also match recipe name</b></li></ul>Other:<ul><li>Changed missions to follow shortest path in terms of real distance and not number of regions 'hops'</li><li>Great Lighthouse RP bonus reduced but bonus effects added that affect some sea buildings and ships</li></ul>"]},{VERSION:"v1.2.1",MESSAGE:["Bug fixes:<ul><li><b>Fixed navy related data being \"NaN\"</b></li><li><b>Fixed doubled report for sea conquer mission</b></li><li><b>Fixed sea missions travel speed being influenced by land troops</b></li><li><b>Fixed 'sea move' mission button not visible when no land troops are present</b></li><li><b>Fixed fight reports breaking after page reload</b></li><li><b>QUICKFIX: Fixed pre 1.2.0 save files loading</b></li></ul>Other:<ul><li>Added 'cancel mission' to all sea missions</li><li>Added tooltip to ships in navy tab and shipyard window</li><li>It's now possible to decommission navy units</li><li>Added total cargo display to the sea mission description</li></ul>"]},{VERSION:"v1.2.2",MESSAGE:["Bug fixes:<ul><li><b>Fixed pirates sea event freezing the game</b></li><li><b>Fixed sea cartography research freezing the game</b></li></ul>"]},{VERSION:"v1.2.3",MESSAGE:["Bug fixes:<ul><li><b>Fixed boat builder and shipyard invalid values freezing game</b></li><li><b>Fixed fisher huts being stuck on waiting for fish after update</b></li><li><b>Added logic to clear corrupted save of pirates and pirates base events</b></li><li><b>Fixed expedition not consuming correct amount of resources</b></li><li><b>Probably fixed negative amount of mountains from expeditions</b></li><li><b>Fixed shipyard turning off on load and destroying employed people</b></li><li><b>Fixed ascension temple being available too soon</b></li></ul>Other:<ul><li>Improved game error handling to reduce chance for game freezing (game will now pause due to internal errors)</li><li>Land discovered on expeditions will be preserved through abdication</li><li>Expedition mission cargo is also restricted by the amount of food required for the mission</li><li>Ships no longer cost food on missions</li><li>Reduced small components wraps in resources, crafting and cooking tabs</li><li>Improved mission progress display to be calculated based on total distance to travel and not 20% per region</li></ul>"]},{VERSION:"v1.2.4",MESSAGE:["Bug fixes:<ul><li><b>Fixed some buildings showing error message on upgrade</b></li><li><b>Fixed butcher being stuck on waiting for fur warehouse space</b></li><li><b>Fixed mission movement attack friendly region when passing by sometimes</b></li><li><b>Fixed port size calculation when selecting ship to build</b></li><li><b>Fixed loggers camp consuming land on upgrade</b></li><li><b>Buildings from royal perks will now take correct amount of land</b></li><li><b>QUICKFIX: Additional fix for buildings upgrading issues</b></li></ul>Other:<ul><li>'Village' text changes depending on population cap</li><li>Build window will now focus text filter input by default</li><li>Added effective speed display to mission description</li></ul>"]},{VERSION:"v1.2.5",MESSAGE:["New Features:<ul><li><b>Added new housing building</b></li><li><b>Added new research building</b></li></ul>Bug fixes:<ul><li><b>Fixed forest and mountains from expedition not being saved</b></li><li><b>Fixed food cargo space being required for sea missions other than expeditions</b></li><li><b>Fixed sea plunder and sea conquer icons not displayed in world map buttons</b></li><li><b>Fixed NaN cargo value for some sea missions</b></li><li><b>Fixed cooking menu not showing number of items being crafted</b></li></ul>Other:<ul><li>Added circle ticker for next day</li><li>It's now possible to dismiss market offers</li><li>Added sounds for season changes</li><li>Crafting type selection won't change when switching tabs</li><li>Market filter selection won't change when switching tabs</li><li>When a spy is killed it will generate a fight report so that players can remember the last known army size</li><li>Added display option to change player regions colour</li></ul>"]},{VERSION:"v1.2.6",MESSAGE:["Bug fixes:<ul><li><b>Added missing settlement resource reservation</b></li><li><b>Fixed forest found on expeditions reducing land</b></li></ul></ul>"]},{VERSION:"v1.3.0",MESSAGE:["<b>The Happiness Update!</b><br><br>New Features:<ul><li><b>Reworked happiness system</b></li><li><b>Added new prayer</b></li><li><b>Added tax collector building and tax settings to management</b></li><li><b>Added new resources</b></li><li><b>New Royal perks</b></li></ul>Bug fixes:<ul><li><b>Fixed orchard grown crops switching</b></li><li><b>Added additional value checks for boat builder and shipyard</b></li><li><b>Fixed world map issue that reset world map progress</b></li></ul></ul>"]},{VERSION:"v1.3.1",MESSAGE:["Bug fixes:<ul><li><b>Fixed happiness effects calculation causing NaN happiness value</b></li><li><b>Added additional check for invalid value in building progress data</b></li></ul></ul>"]},{VERSION:"v1.3.2",MESSAGE:["Bug fixes:<ul><li><b>Fixed fired worker log message reporting wrong building</b></li><li><b>Fixed deep mine not starting after upgrade is finished</b></li><li><b>Fixed tavern happiness effect causing NaN and not clearing after tavern is disabled</b></li><li><b>Fixed fur clothes happiness effect getting stuck</b></li></ul>Other:<ul><li>Happiness management show duration setting will now save it's state</li><li>Surplus animals added to storage will be sent to butchers</li><li>Reduced refugees events chance</li><li>Combinable buildings that are compatible will no longer require confirmation</li><li>Added auto merge option that combines all compatible buildings in the region</li><li>Limited number of log entries being saved to 100</li><li>Added error reports that show more error information for better reporting<br>(this will be extended with option to send error reports to the server)</li></ul>"]},{VERSION:"v1.3.3",MESSAGE:["Bug fixes:<ul><li><b>Fixed festivals being blocked after abdication due to locked resources</b></li><li><b>Fixed sea missions calculating failing when previous mission removed the event</b></li><li><b>Fixed pirates base negative happiness effect not removed after defeating pirates base</b></li></ul>Other:<ul><li>Reduced gem chance for deep mine</li></ul>"]},{VERSION:"v1.3.4",MESSAGE:["New Features:<ul><li><b>Added new options to world map region build mission (roads, watchtower, guard towers and harbour)</b></li></ul>Bug fixes:<ul><li><b>Fixed settlement buildings consuming food faster than restocking causing famine while there was food available</b></li></ul>Other:<ul><li>Added action buttons to switch all workshops to crafting or researching</li><li>Added new recipes to craft swords, shields from bronze and iron</li><li>Changed heavy armor cost from copper to bronze</li></ul>"]},{VERSION:"v1.3.5",MESSAGE:["Bug fixes:<ul><li><b>Fixed sea missions causing type error while calculating distance</b></li></ul>"]},{VERSION:"v1.3.6",MESSAGE:["Bug fixes:<ul><li><b>Fixed stuck AI missions</b></li></ul>Other:<ul><li>Added text reason for why mission cannot be started to most reasons</li></ul>"]},{VERSION:"v1.3.7",MESSAGE:["Bug fixes:<ul><li><b>Fixed building buffing affecting every building of that type after reloading</b></li><li><b>Fixed disabled housing building accepting occupants but not resuming resources consumption</b></li><li><b>Probably fixed unexpected negative fur clothes issue (could not reproduce the issue)</b></li></ul>Other:<ul><li>AI can no longer build new guard towers</li><li>Changed watchtowers cost from nails to bricks</li></ul>"]}];let Sf=(()=>{class e{constructor(e,n,l,t,i){this.servicesService=e,this.modalService=n,this.logService=l,this.calendarService=t,this.tutorialsService=i,this.flags=[],this.gameState=0,this.abdicationLevel=0,this.gameStartedYear=1,this.devMessage=Number.MAX_SAFE_INTEGER,this.headerRowsSubject=new I,this.demolishReturn=yo.DEMOLITION_RETURN,this.servicesService.addService(Wu.GAME,this)}init(){go.production?this.flags=[]:(this.flags=[],Object.values(Iu).filter(e=>!isNaN(e)).forEach(e=>this.flags.push(e)))}getName(){return"GameService"}load(e){this.flags=e.flags,this.gameState=e.gameState,this.demolishReturn=e.demolishReturn,this.devMessage=e.devMessage,this.abdicationLevel=e.abdicationLevel,this.gameStartedYear=void 0!==e.gameStartedYear?e.gameStartedYear:1}save(){return{flags:this.flags,gameState:this.gameState,demolishReturn:this.demolishReturn,devMessage:this.devMessage,abdicationLevel:this.abdicationLevel,gameStartedYear:this.gameStartedYear}}reset(e,n){this.flags=[],this.gameState=0,this.gameStartedYear=this.calendarService.getYear(),this.demolishReturn=yo.DEMOLITION_RETURN,this.init(),e&&(this.devMessage=Number.MAX_SAFE_INTEGER,this.abdicationLevel=0,this.gameStartedYear=1),n&&(this.abdicationLevel=0)}isEnabled(e){return this.flags.includes(e)}enable(e){this.flags.includes(e)||this.flags.push(e)}disable(e){this.flags.includes(e)&&this.flags.splice(this.flags.indexOf(e),1)}setGameState(e){this.gameState=e}getGameState(){return this.gameState}tick(e){0===this.getGameState()&&(this.displayWelcomeModal(),this.addStartBoost(),this.tutorialsService.checkRegionTutorial(Du.VILLAGE),this.setGameState(1)),this.displayDevMessage()}displayWelcomeModal(){this.modalService.info(Ro);const e=this.modalService.registerForCloseModal().subscribe(()=>{this.devMessage===Number.MAX_SAFE_INTEGER&&(this.devMessage=0),e.unsubscribe()})}displayDevMessage(){const e=ff.length;this.devMessage<e&&(this.showDevNotes(),this.devMessage=e)}showDevNotes(){this.modalService.open(ju.CHANGELOG)}addStartBoost(){po&&this.servicesService.getEffectsService().addBuildingEffect(new Vu(po.name,po.building,po.effect,po.duration))}getAbdicationLevel(){return this.abdicationLevel}incrementAbdicationLevel(){this.abdicationLevel+=1,this.abdicationLevel>=7&&this.logService.mystical("As you finish last wonder building strange thoughts of ancient structures appear in your head. Who knows what purpose this building serve")}updateHeader(e){this.headerRowsSubject.next(e)}registerForHeaderRowsChange(){return this.headerRowsSubject.asObservable()}getGameStartedYear(){return this.gameStartedYear}}return e.ngInjectableDef=ce({factory:function(){return new e(De(sf),De(pf),De(df),De(hf),De(mf))},token:e,providedIn:"root"}),e})();class Ef{constructor(e,n,l,t,i,s,r){this.perk=e,this.usages=n,this.maxUsages=l,this.description=t,this.cost=i,this.reset=s,this.effect=r}}let vf=(()=>{class e{constructor(e,n,l){this.modalService=e,this.logService=n,this.servicesService=l,this.royalPoints=0,this.perks=[],this.goldenFish=!1,this.goldenEgg=!1,this.goldenApple=!1,this.goldenFleece=!1,this.servicesService.addService(Wu.ROYAL,this),this.initPerks()}initPerks(){this.perks=[],Object.entries(ko.PERKS).forEach(e=>{this.perks.push(new Ef(Tu[e[0]],e[1].USAGES,e[1].MAX_USAGES,e[1].DESCRIPTION,e[1].COST,e[1].RESET,e[1].EFFECT))})}getName(){return"RoyalService"}load(e){this.royalPoints=e.royalPoints,this.goldenFish=void 0!==e.goldenFish&&e.goldenFish,this.goldenEgg=void 0!==e.goldenEgg&&e.goldenEgg,this.goldenApple=void 0!==e.goldenApple&&e.goldenApple,this.goldenFleece=void 0!==e.goldenFleece&&e.goldenFleece,e.progress.forEach(e=>{const n=this.perks.find(n=>n.perk===e[0]);n&&(n.usages=e[1])})}save(){const e=[];return this.perks.forEach(n=>e.push([n.perk,n.usages])),{royalPoints:this.royalPoints,progress:e,goldenFish:this.goldenFish,goldenEgg:this.goldenEgg,goldenApple:this.goldenApple,goldenFleece:this.goldenFleece}}reset(e,n){e?(this.royalPoints=0,this.initPerks()):this.perks.forEach(e=>{e.reset&&e.usages>0&&e.reset(this.servicesService,e)}),this.goldenFish=!1,this.goldenEgg=!1,this.goldenApple=!1,this.goldenFleece=!1}getRoyalPoints(){return this.royalPoints}buyRoyalPoints(){this.modalService.open(ju.ROYAL)}increaseRoyalPoints(e){this.royalPoints+=e}getRoyalPerks(){return this.perks}unlock(e){(0===e.maxUsages||e.usages<e.maxUsages)&&(this.royalPoints>=e.cost?this.perks.find(n=>e===n).effect(this.servicesService,e):this.modalService.info("Not enough Royal Points!<br>"+e.cost+" RP required but only "+this.royalPoints+" available"))}unlockCallback(e){this.royalPoints-=Number(e.cost),e.usages+=1}isGoldenFishCaught(){return this.goldenFish}isGoldenEggLaid(){return this.goldenEgg}isGoldenApplePicked(){return this.goldenApple}isGoldenFleeceFound(){return this.goldenFleece}catchGoldenFish(){return!(this.goldenFish||!Yu.chance(ko.GOLDEN_ITEMS.GOLDEN_FISH_CHANCE)||(this.increaseRoyalPoints(5),this.logService.mystical("You have caught a golden fish. You let it go and it granted you 5 Royal Points"),this.goldenFish=!0,0))}layGoldenEgg(){return!(this.goldenEgg||!Yu.chance(ko.GOLDEN_ITEMS.GOLDEN_EGG_CHANCE)||(this.increaseRoyalPoints(5),this.logService.mystical("Your chicken laid golden egg. You decided to keep it and was granted 5 Royal Points"),this.goldenEgg=!0,0))}pickGoldenApple(){return!(this.goldenApple||!Yu.chance(ko.GOLDEN_ITEMS.GOLDEN_APPLE_CHANCE)||(this.increaseRoyalPoints(5),this.logService.mystical("You picked golden apple in the orchard. You decided to keep it and was granted 5 Royal Points"),this.goldenApple=!0,0))}getGoldenFleece(){return!(this.goldenFleece||!Yu.chance(ko.GOLDEN_ITEMS.GOLDEN_FLEECE_CHANCE)||(this.increaseRoyalPoints(5),this.logService.mystical("You got a golden fleece from one of your sheep. You decided to keep it and was granted 5 Royal Points"),this.goldenFleece=!0,0))}}return e.ngInjectableDef=ce({factory:function(){return new e(De(pf),De(df),De(sf))},token:e,providedIn:"root"}),e})(),Rf=(()=>{class e{constructor(e,n,l,t){this.servicesService=e,this.modalService=n,this.royalService=l,this.logService=t,e.addService(Wu.KONGREGATE,this);try{kongregateAPI.loadAPI((function(){window.kongregate=kongregateAPI.getAPI();const e=[],n=function(n){if(n.success){const t=e.find(e=>e[0]===n.id);t&&l.increaseRoyalPoints(t[1])}};window.kongregate.mtx.requestUserItemList(null,(function(l){if(l.success)for(let t=0;t<l.data.length;t++){const i=l.data[t];e.push([i.id,Number(i.identifier.replace("rp_pack",""))]),window.kongregate.mtx.useItemInstance(i.id,n)}}))}))}catch(i){console.error(i)}}isSet(){return!!window.kongregate}isAvailable(){return window.kongregate&&0!==this.getUserId()}submitStat(e,n){window.kongregate.stats.submit(e,n)}getUsername(){if(this.isSet())return window.kongregate.services.getUsername()}isGuest(){return!this.isSet()||window.kongregate.services.isGuest()}getUserId(){if(this.isSet())return window.kongregate.services.getUserId()}getGameAuthToken(){if(this.isSet())return window.kongregate.services.getGameAuthToken()}buyItem(e){const n=this.modalService,l=this.royalService,t=this.logService,i=[],s=function(e){if(e.success){const n=i.find(n=>n[0]===e.id);n&&(l.increaseRoyalPoints(n[1]),t.log("Added "+n[1]+" Royal Points"))}},r=function(e){if(e.success)for(let n=0;n<e.data.length;n++){const l=e.data[n];i.push([l.id,Number(l.identifier.replace("rp_pack",""))]),window.kongregate.mtx.useItemInstance(l.id,s)}};window.kongregate.mtx.purchaseItems([e],(function(e){e.success&&(n.close(ju.ROYAL),window.kongregate.mtx.requestUserItemList(null,r))}))}}return e.ngInjectableDef=ce({factory:function(){return new e(De(sf),De(pf),De(vf),De(df))},token:e,providedIn:"root"}),e})();class Of{constructor(e,n,l,t){this.id=e,this.effect=n,this.value=l,this.duration=t}}let bf=(()=>{class e{constructor(e,n){this.servicesService=e,this.calendarService=n,this.happiness=fo,this.happinessEffects=[],this.foodHappiness={value:0,weight:0},this.clothesHappiness={value:0,weight:0},this.freezingHappiness={value:0,weight:0},this.housingQuality={value:0,weight:0},this.furClothes=[],this.showDuration=!1,e.addService(Wu.HAPPINESS,this),n.registerForDayChange().subscribe(e=>{this.servicesService.getGameService().isEnabled(Iu.GALLEON)&&this.servicesService.getWorldService().hasPiratesBase()?this.updateHappiness(Fu.PIRATES_BASE_PRESENT,-3,-1):this.updateHappiness(Fu.PIRATES_BASE_PRESENT,0,-1),this.happinessEffects.filter(e=>e.duration>0).forEach(e=>e.duration-=1),this.happinessEffects=this.happinessEffects.filter(e=>0!==e.duration)})}getName(){return"HappinessService"}load(e){const n=this.servicesService.getVillageService();this.happiness=null==e.happiness||isNaN(e.happiness)?15:e.happiness,this.happinessEffects=void 0!==e.effects?e.effects:[],this.furClothes=void 0!==e.furClothes?e.furClothes.filter(e=>n.hasBuilding(e.id)):[],this.foodHappiness=void 0!==e.foodHappiness?e.foodHappiness:{value:0,weight:0},this.clothesHappiness=void 0!==e.clothesHappiness?e.clothesHappiness:{value:0,weight:0},this.freezingHappiness=void 0!==e.freezingHappiness?e.freezingHappiness:{value:0,weight:0},this.housingQuality=void 0!==e.housingQuality?e.housingQuality:{value:0,weight:0},this.showDuration=void 0!==e.showDuration&&e.showDuration}save(){return{happiness:this.happiness,effects:this.happinessEffects,foodHappiness:this.foodHappiness,clothesHappiness:this.clothesHappiness,freezingHappiness:this.freezingHappiness,housingQuality:this.housingQuality,furClothes:this.furClothes,showDuration:this.showDuration}}reset(e,n){this.happiness=fo,this.happinessEffects=[],this.furClothes=[],this.foodHappiness={value:0,weight:0},this.clothesHappiness={value:0,weight:0},this.freezingHappiness={value:0,weight:0}}processSpecialHappiness(e,n){const l=Math.floor(e.value/(0!==e.weight?e.weight:1)),t=this.getHappinessEffectByEffect(n);0!==l?t?t.value=l:this.addHappinessEffect(0,n,l,-1):this.happinessEffects=this.happinessEffects.filter(e=>e.effect!==n),e.value=0,e.weight=0}tick(e){if(this.processSpecialHappiness(this.foodHappiness,Fu.FOOD),this.processSpecialHappiness(this.clothesHappiness,Fu.CLOTHES),this.processSpecialHappiness(this.freezingHappiness,Fu.FREEZING),this.processSpecialHappiness(this.housingQuality,Fu.LOW_QUALITY_HOUSING),this.furClothes=this.furClothes.filter(e=>this.servicesService.getVillageService().hasBuilding(e.id)&&void 0!==this.servicesService.getVillageService().getBuildings().find(n=>n.getBuildingId()===e.id).getOccupants&&this.servicesService.getVillageService().getBuildings().find(n=>n.getBuildingId()===e.id).isWorking()),this.furClothes.length>0){let e=0;if(this.furClothes.forEach(n=>{n.fur&&(e-=1)}),0!==e){const n=this.furClothes.length+e;e=Math.floor(e/(0!==n?n:-e)),this.updateHappiness(Fu.FUR_CLOTHES,e,-1)}else this.updateHappiness(Fu.FUR_CLOTHES,0,-1)}this.happiness+=this.calculateDailyChange()/Eo,this.happiness<0?this.happiness=0:this.happiness>100&&(this.happiness=100)}updateHappiness(e,n,l){const t=this.getHappinessEffectByEffect(e);t?(t.value=n,t.duration=l):this.addHappinessEffect(0,e,n,l)}getHappiness(){return this.happiness}updateFurClothes(e,n){const l=this.furClothes.find(n=>n.id===e);l?l.fur=n:this.furClothes.push({id:e,fur:n})}getHappinessEffect(){return this.happiness>=0&&this.happiness<=10?-10:this.happiness>10&&this.happiness<=40?0:this.happiness>40&&this.happiness<=60?10:this.happiness>60&&this.happiness<=90?20:this.happiness>90&&this.happiness<=100?50:void 0}registerFoodHappiness(e){this.foodHappiness.value+=e,this.foodHappiness.weight+=1}registerClothesHappiness(e,n){this.clothesHappiness.value+=e,this.clothesHappiness.weight+=n}registerFreezingHappiness(e,n){this.freezingHappiness.value+=e,this.freezingHappiness.weight+=n}registerHouseQualityHappiness(e,n){this.housingQuality.value+=e,this.housingQuality.weight+=n}resetHappiness(){this.happiness<fo&&(this.happiness=fo),this.clear()}addHappinessEffect(e,n,l,t){this.happinessEffects.push(new Of(e,n,l,t))}getHappinessEffectById(e){return this.happinessEffects.filter(n=>n.id===e)}getHappinessEffects(){return this.happinessEffects.filter(e=>0!==e.value)}getHappinessEffectByEffect(e){return this.happinessEffects.find(n=>n.effect===e)}calculateDailyChange(){let e=0;return this.happinessEffects.forEach(n=>e+=n.value),e/300}clear(){this.happinessEffects=[]}toggleShowDuration(){this.showDuration=!this.showDuration}getShowDuration(){return this.showDuration}}return e.ngInjectableDef=ce({factory:function(){return new e(De(sf),De(hf))},token:e,providedIn:"root"}),e})();class Tf{constructor(e,n,l=0){this.userName=e,this.value=n,this.daysAgo=l}incrementDaysAgo(){this.daysAgo+=1}}class Cf{constructor(e,n,l=0){this.producerName=e,this.value=n,this.daysAgo=l}incrementDaysAgo(){this.daysAgo+=1}}class If{constructor(e,n=0,l=0){this.sickness=e,this.progress=n,this.medicine=l}}let yf=(()=>{class e{constructor(e,n,l,t,i,s,r,u){this.logService=e,this.servicesService=n,this.gameService=l,this.modalService=t,this.optionsService=i,this.happinessService=s,this.calendarService=r,this.kongregateService=u,this.resources=new Map,this.resourcesUse=new Map,this.resourcesProduction=new Map,this.sick=[],this.populationScore=0,this.resourcesSubject=new I,this.callbacks=new Map,this.hideEmpty=!1,n.addService(Wu.RESOURCES,this),this.init(),r.registerForDayChange().subscribe(()=>{Array.from(this.resourcesUse.keys()).forEach(e=>{this.resourcesUse.set(e,this.resourcesUse.get(e).filter(e=>e.daysAgo<30)),this.resourcesUse.get(e).forEach(e=>e.incrementDaysAgo()),0===this.resourcesUse.get(e).length&&this.resourcesUse.delete(e)}),Array.from(this.resourcesProduction.keys()).forEach(e=>{this.resourcesProduction.set(e,this.resourcesProduction.get(e).filter(e=>e.daysAgo<30)),this.resourcesProduction.get(e).forEach(e=>e.incrementDaysAgo()),0===this.resourcesProduction.get(e).length&&this.resourcesProduction.delete(e)})})}init(){const e=new lf;Ao.getResources().forEach(n=>{this.resources.set(bu[n[0]],e.forResource(bu[n[0]]).withName(Uu.prepareResourceName(bu[n[0]])).withAmount(void 0!==n[1].AMOUNT?n[1].AMOUNT:Ao.DEFAULT_AMOUNT).withLimit(void 0!==n[1].LIMIT?n[1].LIMIT:Ao.DEFAULT_LIMIT).withResourceTypes(n[1].TYPES).withResourceType(_u.ALL).withVisible(void 0!==n[1].VISIBLE?n[1].VISIBLE:Ao.DEFAULT_VISIBLE).withHighlighted(void 0!==n[1].HIGHLIGHTED?n[1].HIGHLIGHTED:Ao.DEFAULT_HIGHLIGHTED).build())}),this.people=1,this.workers=0,this.populationCap=1,go.production||this.resources.forEach(e=>e.visible=!0)}getResource(e){return this.resources.get(e)}makeVisible(e){this.resources.get(e).visible=!0}increaseResource(e,n,l,t=!1){if(e===bu.FOOD||e===bu.NOTHING)return!0;const i=this.resources.get(e);if(i.getResourceTypes().includes(_u.ANIMAL)){const i=this.servicesService.getServiceByRegion(Du.FIELD),s=i.getBuildings().filter(e=>e.getBuildingType()===Ru.PASTURE).map(e=>e).filter(n=>n.getResourceType()===e);let r=0;if(s.forEach(e=>r+=e.getMaxAnimals()-e.getAnimals()),n>r&&!t)return!1;if(t&&n>r){let l=n-r;n=r;let t=i.getBuildings().filter(e=>e.getBuildingType()===Ru.BUTCHER).map(e=>e).filter(e=>e.getFreeSpace()>0);for(;t.length>0&&l>0;)t[0].addAnimalToButcher(e),l-=1,t=t.filter(e=>e.getFreeSpace()>0)}for(;n>0&&r>0;)for(const t of s){for(;t.getAnimals()<t.getMaxAnimals()&&n>0;)t.increaseAnimal(1),n-=1,this.addResourceProduction(e,l,1),r-=1;if(0===n)return!0}return!0}return!(!t&&i.amount+n>i.limit||(i.amount+=n,this.addResourceProduction(e,l,n),i.amount>i.limit&&(i.amount=i.limit),this.resourcesSubject.next(this.resources),i.isVisible()||(i.toggleVisible(),this.logService.log("New resource discovered: "+Uu.prepareResourceName(e))),0))}decreaseResource(e,n,l,t=!1){if(e===bu.FOOD)return this.getFoodValue(l,t)>=n&&(this.getFood(n,l,t),!0);const i=this.resources.get(e);if(i.getResourceTypes().includes(_u.ANIMAL)){const t=this.servicesService.getServiceByRegion(Du.FIELD).getBuildings().filter(e=>e.getBuildingType()===Ru.PASTURE).map(e=>e).filter(n=>n.getResourceType()===e&&n.getAnimals()>0);let i=0;if(t.forEach(e=>i+=e.getAnimals()),i>=n){for(const i of t){for(;n>0&&i.getAnimals()>0;)i.decreaseAnimal(1),this.addResourceUse(e,l,1),n-=1;if(0===n)return!0}return!0}return!1}return 0!==this.hasResource(e,n,l,t)?(this.resourcesSubject.next(this.resources),!1):(i.amount-=n,this.addResourceUse(e,l,n),this.resourcesSubject.next(this.resources),!0)}hasResource(e,n,l,t=!1){if(e===bu.FOOD)return this.getFoodValue(l,t)>=n?0:n-this.getFoodValue(l,t);const i=this.resources.get(e);return t?i.amount>=n?0:n-this.resources.get(e).amount:i.amount-i.options.getReservedAmountBySource(l,i,t)>=n?0:n-(i.amount-i.options.getReservedAmountBySource(l,i,t))}hasLimit(e){return this.resources.get(e).amount<this.resources.get(e).limit}decreaseResources(e,n,l=!1,t=1,i=!1){let s="",r=!0;for(const[u,o]of Array.from(e)){const e=this.hasResource(u,o*t,n,l);0!==e&&(s+="Missing "+e+" "+Uu.prepareResourceName(u)+"<br>",r=!1)}if(!r)return!i&&(this.modalService.info(s),!1);for(const[u,o]of Array.from(e))this.decreaseResource(u,o*t,n,l);return!0}hasResources(e,n,l=1,t=!1){let i=!0;for(const[s,r]of Array.from(e))0!==this.hasResource(s,r*l,n,t)&&(i=!1);return i}increaseLimit(e,n){this.resources.forEach(l=>{l.getResourceTypes().includes(e)&&!l.getResourceTypes().includes(_u.ANIMAL)&&(l.limit+=n)})}increaseResourceLimit(e,n){this.resources.get(e).limit+=n}decreaseLimit(e,n){this.resources.forEach(l=>{l.getResourceTypes().includes(e)&&!l.getResourceTypes().includes(_u.ANIMAL)&&(l.limit-=n,l.limit<0&&(l.limit=0,console.error(gf.ERROR_2,l.getResource(),l.limit)),l.amount>l.limit&&(l.amount=l.limit))})}decreaseResourceLimit(e,n){const l=this.resources.get(e);l.limit-=n,l.limit<0&&(l.limit=0,console.error(gf.ERROR_2,l.getResource(),l.limit)),l.amount>l.limit&&(l.amount=l.limit)}getResources(){return this.resources}save(){let e="[";return this.resources.forEach(n=>{e+="["+n.resource+","+JSON.stringify(n)+"],"}),{resources:e=e.slice(0,-1)+"]",people:this.people,workers:this.workers,sick:this.sick,populationCap:this.populationCap}}getName(){return"ResourcesService"}load(e){JSON.parse(e.resources).forEach(e=>{if(this.resources.get(e[0]).amount=e[1].amount,this.resources.get(e[0]).limit=e[1].limit,this.resources.get(e[0]).visible=e[1].visible,this.resources.get(e[0]).highlighted=e[1].highlighted,this.resources.get(e[0]).prioritise=e[1].prioritise,e[1].reserved)this.resources.get(e[0]).options=new ef(this.resources.get(e[0]).resource,e[1].reserved);else if(e[1].options){let n=[];const l=new Jm;e[1].options.consumers.forEach(e=>{n.push(new Zm(e.name,e.enabled,e.reserved,void 0!==e.reservedPercent&&e.reservedPercent))}),n.find(e=>"Paper mill"===e.name)||n.push(new Zm("Paper mill")),n.find(e=>"Tudor house"===e.name)||n.push(new Zm("Tudor house")),n.find(e=>"Settlement"===e.name)||n.push(new Zm("Settlement")),n.find(e=>"Kitchen"===e.name)||n.push(new Zm("Kitchen")),e[1].options.autoTrade&&(l.autoSellEnabled=e[1].options.autoTrade.autoSellEnabled,l.autoSellAmount=e[1].options.autoTrade.autoSellAmount,l.autoSellOrder=e[1].options.autoTrade.autoSellOrder,l.autoBuyEnabled=e[1].options.autoTrade.autoBuyEnabled,l.autoBuyAmount=e[1].options.autoTrade.autoBuyAmount,l.autoBuyOrder=e[1].options.autoTrade.autoBuyOrder,void 0!==e[1].options.autoTrade.autoSellPercentage?(l.autoSellPercentage=e[1].options.autoTrade.autoSellPercentage,l.autoBuyPercentage=e[1].options.autoTrade.autoBuyPercentage):(l.autoSellPercentage=!1,l.autoBuyPercentage=!1)),n=n.sort((e,n)=>e.name.localeCompare(n.name)),this.resources.get(e[0]).options=new ef(e[1].options.resource,e[1].options.reserve,n,void 0!==e[1].options.reservePercent&&e[1].options.reservePercent,l)}else this.resources.get(e[0]).options=new ef(this.resources.get(e[0]).resource)}),this.sick=void 0!==e.sick?e.sick:[],this.people=e.people,this.workers=e.workers,this.populationCap=e.populationCap,this.resourcesSubject.next(this.resources)}reset(e,n){if(!e){const e=this.servicesService.getService(Wu.HERITAGE).calculateHeritagePoints(!0);e.hp>0&&this.servicesService.getService(Wu.HERITAGE).increaseHeritagePoints(e.hp),e.xp>0&&this.servicesService.getService(Wu.HERITAGE).increaseXP(e.xp)}const l=this.resources;this.resources=new Map,this.people=1,this.workers=0,this.populationCap=1,this.sick=[],this.populationScore=0,this.resourcesUse=new Map,this.resourcesProduction=new Map,this.init(),e||Array.from(this.resources.values()).forEach(e=>{this.optionsService.getOption(rf.KEEP_RESERVATION_SETTINGS_ON_RESET)?e.options=l.get(e.resource).options:(e.options=l.get(e.resource).options,e.options.reservePercent=!1,e.options.reserve=0,e.options.consumers.forEach(e=>e.enabled=!1)),this.optionsService.getOption(rf.KEEP_AUTO_TRADE_ON_RESET)||(e.options.autoTrade.autoSellEnabled=!1,e.options.autoTrade.autoBuyEnabled=!1)}),this.resourcesSubject.next(this.resources)}registerForResourcesChange(){return this.resourcesSubject.asObservable()}createPeople(e){this.people+=e}removePeople(e){if(this.people-=e,this.people-e<0)for(;this.people<0;)if(this.sick.length>0)this.sick.shift(),this.people+=1;else{const e=Math.floor(Math.random()*this.callbacks.size);Array.from(this.callbacks.values())[e].fireRandomWorker()}}hireWorker(){return this.people>0&&(this.people-=1,this.workers+=1,!0)}fireWorker(e=1){0===this.workers&&console.error(gf.ERROR_3),this.workers-=e,this.people+=e}getPeople(){return this.people}getWorkers(){return this.workers}getPopulationCap(){return this.populationCap}increasePopulationCap(e){return this.populationCap+=e}decreasePopulationCap(e){return this.populationCap-e<0&&console.error(gf.ERROR_4),this.populationCap-=e}addCallback(e,n){this.callbacks.set(n,e)}tick(e){this.kongregateService.isAvailable()&&this.getTotalPeople()>this.populationScore&&(this.populationScore=this.getTotalPeople(),this.kongregateService.submitStat("Population",this.populationScore)),1===this.getTotalPeople()&&this.happinessService.resetHappiness(),this.people+this.workers>=yo.VILLAGE.SHRINE.POPULATION&&(this.gameService.isEnabled(Iu.SHRINE)||(this.gameService.enable(Iu.SHRINE),this.logService.success("Shrine unlocked"))),this.people+this.workers>=yo.VILLAGE.CHURCH.POPULATION&&(this.gameService.isEnabled(Iu.CHURCH)||(this.gameService.enable(Iu.CHURCH),this.logService.success("Church unlocked"))),this.getTotalPeople()>1500?this.happinessService.updateHappiness(Fu.POPULATION_SIZE,-3,-1):this.getTotalPeople()>500?this.happinessService.updateHappiness(Fu.POPULATION_SIZE,-2,-1):this.getTotalPeople()>100&&this.happinessService.updateHappiness(Fu.POPULATION_SIZE,-1,-1),this.sick=this.sick.filter(e=>!Yu.chance(Do.getSickness(e.sickness).LETHALITY/100/(Do.getSickness(e.sickness).DURATION*Eo))||(this.callbacks.get(Du.VILLAGE).removeRecruit(1,!1),this.servicesService.getManagementService().getLogSickness()&&(this.logService.warning("Villager died from "+Uu.prepareSicknessName(e.sickness)),this.happinessService.addHappinessEffect(0,Fu.SICKNESS_DEATH,-2,Yu.randomBetween(20,40))),!1)),this.sick.forEach(e=>{0===e.medicine&&this.decreaseResource(bu.HERBAL_MEDICINE,1,"Sickness")&&(e.medicine=1),e.progress+=e.medicine>0?100/(Do.getSickness(e.sickness).DURATION*Eo)*2:100/(Do.getSickness(e.sickness).DURATION*Eo)}),this.sick.forEach(e=>{e.progress>=100&&(this.people+=1)}),this.sick=this.sick.filter(e=>e.progress<100)}getPriorityFood(e,n=!1){const l=this.servicesService.getManagementService().getFoodPriority();for(const t in l){const i=l[t].filter(l=>this.getAvailableAmount(l,e,n)>0);if(i.length>0&&i.length>0){const l=i[Math.floor(Math.random()*i.length)];return this.decreaseResource(l,1,e,n),Ao.getResource(l).POWER}}return 0}getFood(e,n,l=!1){for(;e>0;)e-=this.getPriorityFood(n,l)}getFoodValue(e,n=!1){let l,t=0;return n?(l=Array.from(this.resources.entries()).filter(e=>e[1].resourceTypes.includes(_u.CONSUMABLE)&&e[1].amount>0)).forEach(e=>t+=Ao.getResource(e[0]).POWER*e[1].amount):(l=Array.from(this.resources.entries()).filter(l=>l[1].resourceTypes.includes(_u.CONSUMABLE)&&l[1].amount-l[1].options.getReservedAmountBySource(e,l[1],n)>0)).forEach(e=>t+=Ao.getResource(e[0]).POWER*(e[1].amount-e[1].options.reserve)),t}getResourceTypes(e){return this.resources.get(e).getResourceTypes()}increaseResources(e,n,l=!1){for(const[t,i]of Array.from(e))this.increaseResource(t,i,n,l)}removeRecruit(e){return this.people>=e&&this.callbacks.get(Du.VILLAGE).removeRecruit(e)}getFuel(e){const n=Ao.getResourcesByType(_u.FUEL).sort((e,n)=>e[1].FUEL_PRIORITY-n[1].FUEL_PRIORITY);for(const l of n)if(this.decreaseResource(bu[String(l[0])],1,e))return l[1].POWER;return 0}getTotalPeople(){return this.people+this.workers+this.sick.length}getResourcesValue(){let e=0;return this.resources.forEach(n=>{n.amount>0&&(e+=Ao.getResource(n.resource).TRADE_VALUE*n.getAmount())}),e}getAvailableAmount(e,n,l=!1){const t=this.resources.get(e);let i=t.amount-t.options.getReservedAmountBySource(n,t,l);return i<0&&(i=0),i}updateAnimals(){const e=Array.from(this.getResources().values()).filter(e=>e.getResourceTypes().includes(_u.ANIMAL)),n=this.servicesService.getServiceByRegion(Du.FIELD).getBuildings().filter(e=>e.getBuildingType()===Ru.PASTURE).map(e=>e);e.forEach(e=>{let l=0,t=0;n.filter(n=>n.getResourceType()===e.resource).forEach(e=>{l+=e.getAnimals(),t+=e.getMaxAnimals()}),e.amount=l,e.limit=t})}getLimit(e){const n=this.resources.get(e);return n.limit-n.amount}addResourceUse(e,n,l){this.resourcesUse.has(e)?this.resourcesUse.get(e).push(new Tf(n,l)):this.resourcesUse.set(e,[new Tf(n,l)])}addResourceProduction(e,n,l){this.resourcesProduction.has(e)?this.resourcesProduction.get(e).push(new Cf(n,l)):this.resourcesProduction.set(e,[new Cf(n,l)])}getResourceUses(e){return this.resourcesUse.get(e)}getResourceProductions(e){return this.resourcesProduction.get(e)}getResourcesByType(e){return Array.from(this.resources.values()).filter(n=>n.getResourceTypes().includes(e))}getFuelValue(){let e=0;return Array.from(this.resources.values()).filter(e=>e.getResourceTypes().includes(_u.FUEL)).forEach(n=>e+=n.amount*Ao.getResource(n.resource).POWER),e}checkResourcesBeforeWinter(){160*this.servicesService.getVillageService().getHousingBuildings().length>this.getFuelValue()&&this.logService.warning("We might not have enough available resources to heat our homes during winter!")}getAverageNutritionProduction(){let e=0,n=1;return this.getResourcesByType(_u.CONSUMABLE).forEach(l=>{const t=this.getResourceProductions(l.resource);t&&t.forEach(t=>{t.daysAgo>n&&(n=t.daysAgo),e+=t.value*Ao.getResource(l.resource).POWER})}),e/n}addSick(e){if(this.people-=1,this.sick.push(new If(e)),this.people-1<0)for(;this.people<0;){const e=Math.floor(Math.random()*this.callbacks.size);Array.from(this.callbacks.values())[e].fireRandomWorker()}}getSick(){return this.sick}addAnimalProducedData(e,n,l){this.addResourceProduction(e,n,l)}addAnimalUsedData(e,n,l){this.addResourceUse(e,n,l)}getHideEmpty(){return this.hideEmpty}toggleHideEmpty(){this.hideEmpty=!this.hideEmpty}}return e.ngInjectableDef=ce({factory:function(){return new e(De(df),De(sf),De(Sf),De(pf),De(uf),De(bf),De(hf),De(Rf))},token:e,providedIn:"root"}),e})();class Af{constructor(e,n,l,t){this.resourcesService=e,this.modalService=n,this.tutorialService=l,this.gameService=t,this.filterText=""}ngOnInit(){this.categories=Object.keys(_u),this.categories=[_u[_u.RAW],_u[_u.PROCESSED],_u[_u.FOOD],_u[_u.TOOLS]],this.resources=this.resourcesService.getResources(),this.resourcesService.registerForResourcesChange().subscribe(e=>{this.resources=e}),this.tutorialService.checkResourcesTutorial()}getResourcesList(e){return Array.from(this.resourcesService.getResources().entries()).filter(n=>n[1].getResourceTypes().includes(_u[e])&&Uu.prepareResourceName(n[1].getResource()).toLowerCase().includes(this.filterText)).filter(e=>!this.resourcesService.getHideEmpty()||0!==e[1].amount||!!this.resourcesService.getResourceProductions(e[0])&&!!this.resourcesService.getResourceUses(e[0])).map(e=>e[1])}openManageModal(e){this.modalService.open(ju.RESOURCE_MANAGEMENT),this.modalService.setResourceOptions(e.options);const n=this.modalService.registerForResourceOptionsResponse().subscribe(l=>{n.unsubscribe(),l&&(e.options=l)})}isMarketEnabled(){return this.gameService.isEnabled(Iu.MARKET)}highlightResource(e){e.highlighted?e.highlighted=!1:(Array.from(this.resourcesService.getResources().values()).filter(e=>e.highlighted),e.highlighted=!0)}isNotCoins(e){return e.resource!==bu.COINS}isDev(){return!go.production}addDevRes(e,n){this.resourcesService.increaseResource(e,e===bu.COINS?1e3:n.shiftKey?200:5,"Dev",!0)}getResourceDescription(e){let n="";return e.hasResourceType(_u.CONSUMABLE)&&(n+="nutrition: "+Ao.getResource(e.resource).POWER),e.hasResourceType(_u.FUEL)&&(n+="heating energy: "+Ao.getResource(e.resource).POWER),""!==n?"<hr>"+n:n}getResourceConsumers(e){let n="",l="<b>used by:</b><br>";const t=this.resourcesService.getResourceUses(e.resource),i=[];t&&(t.slice().forEach(e=>{const n=i.find(n=>n[0]===e.userName);n?n[1]+=e.value:i.push([e.userName,e.value])}),i.sort((e,n)=>e[0].localeCompare(n[0])).forEach(e=>{l+=e[0]+": "+e[1]+"<br>"})),"<b>used by:</b><br>"!==l&&(n+="<hr>"+l),l="<b>produced by:</b><br>";const s=this.resourcesService.getResourceProductions(e.resource),r=[];return s&&(s.slice().forEach(e=>{const n=r.find(n=>n[0]===e.producerName);n?n[1]+=e.value:r.push([e.producerName,e.value])}),r.sort((e,n)=>e[0].localeCompare(n[0])).forEach(e=>{l+=e[0]+": "+e[1]+"<br>"})),"<b>produced by:</b><br>"!==l&&(n+="<hr>"+l),n}}var Nf=Jl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em;margin:.7%;text-align:center}#resourcesTitle[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;font-size:1.3em;font-weight:bolder;vertical-align:middle}#center[_ngcontent-%COMP%]{-webkit-box-flex:10;flex:10 0 auto}.side[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 38%;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;font-size:.6em;width:15%;margin:3px;display:inline-block}#categories[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;border:1px solid #000;height:94.8%;text-align:center}.category[_ngcontent-%COMP%]{text-align:left;-webkit-box-flex:1;flex:1 0 0;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;border:1px solid #000}.resource[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;margin-left:3px;width:100%;vertical-align:middle;margin-top:-1px}.title[_ngcontent-%COMP%]{text-align:center;padding:2px 0;width:100%;font-weight:bolder;font-size:1em;margin-bottom:5px;display:block;border-bottom:1px solid #000}.highlight[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1 0 auto;text-align:right;margin-right:3px}.highlight[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}app-icon[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 auto;margin-right:3px}.manage[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:22px;width:22px}.greyout[_ngcontent-%COMP%]{opacity:.3}.prioritise[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:22px;width:22px}.full[_ngcontent-%COMP%]{font-weight:600}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}hr[_ngcontent-%COMP%]{border-color:#000}.center[_ngcontent-%COMP%]{text-align:center}"]],data:{}});function _f(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.addDevRes(e.parent.parent.context.$implicit.resource,l)&&t),t}),null,null)),(e()(),cr(-1,null,["+"]))],null,null)}function wf(e){return gr(0,[(e()(),qs(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),cr(1,null,["","/",""]))],null,(function(e,n){var l=n.parent.parent.context.$implicit.getAmount(),t=n.parent.parent.context.$implicit.getLimit();e(n,1,0,l,t)}))}function Pf(e){return gr(0,[(e()(),qs(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),cr(1,null,["","/",""]))],null,(function(e,n){var l=n.parent.parent.context.$implicit.getAmount(),t=n.parent.parent.context.$implicit.getLimit();e(n,1,0,l,t)}))}function xf(e){return gr(0,[(e()(),qs(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),cr(1,null,["",""]))],null,(function(e,n){var l=n.parent.parent.context.$implicit.getAmount();e(n,1,0,l)}))}function kf(e){return gr(0,[(e()(),qs(0,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,4,"span",[["class","prioritise"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=0!=(e.parent.parent.context.$implicit.prioritise=!e.parent.parent.context.$implicit.prioritise)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(3,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(4,{greyout:0}),(e()(),qs(5,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/trade.svg"],["title","prioritise on market"]],null,null,null,null,null))],(function(e,n){var l=e(n,4,0,!n.parent.parent.context.$implicit.prioritise);e(n,3,0,"prioritise",l)}),null)}function Mf(e){return gr(0,[(e()(),qs(0,0,null,null,31,"div",[["class","resource"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,17,"span",[["class","icon"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,8,"span",[["appTooltip",""],["class","tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==qt(e,3).onmousemove(l)&&t),t}),null,null)),ai(3,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),qs(4,0,null,null,4,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),qs(5,0,null,null,1,"div",[["class","center"]],null,null,null,null,null)),(e()(),cr(6,null,["",""])),(e()(),qs(7,0,null,null,0,"div",[["class","center"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),qs(8,0,null,null,0,"div",[["class","center"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),qs(9,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(10,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),Qs(16777216,null,null,1,null,_f)),ai(12,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,wf)),ai(14,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,Pf)),ai(16,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,xf)),ai(18,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(19,0,null,null,12,"span",[["class","highlight"]],null,null,null,null,null)),(e()(),qs(20,0,null,null,4,"span",[["class","manage"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.openManageModal(e.parent.context.$implicit)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(22,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(23,{greyout:0}),(e()(),qs(24,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/manage.svg"],["title","management"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,kf)),ai(26,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(27,0,null,null,4,"span",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.highlightResource(e.parent.context.$implicit)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(29,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(30,{greyout:0}),(e()(),qs(31,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/eye.svg"],["title","add to header"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,3,0,n.parent.context.$implicit.resource);var t=n.parent.context.$implicit.getName();e(n,10,0,t,"resources",""),e(n,12,0,l.isDev());var i=n.parent.context.$implicit.getAmount()===n.parent.context.$implicit.getLimit();e(n,14,0,i);var s=l.isNotCoins(n.parent.context.$implicit)&&n.parent.context.$implicit.getAmount()!==n.parent.context.$implicit.getLimit();e(n,16,0,s),e(n,18,0,!l.isNotCoins(n.parent.context.$implicit));var r=e(n,23,0,!n.parent.context.$implicit.options.isUsed());e(n,22,0,"manage",r),e(n,26,0,l.isMarketEnabled());var u=e(n,30,0,!n.parent.context.$implicit.highlighted);e(n,29,0,u)}),(function(e,n){var l=n.component;e(n,4,0,yt(1,"",n.parent.context.$implicit.resource,"")),e(n,6,0,n.parent.context.$implicit.name),e(n,7,0,l.getResourceDescription(n.parent.context.$implicit)),e(n,8,0,l.getResourceConsumers(n.parent.context.$implicit))}))}function Df(e){return gr(0,[(e()(),qs(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,Mf)),ai(2,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){e(n,2,0,n.context.$implicit.visible)}),null)}function Lf(e){return gr(0,[(e()(),qs(0,0,null,null,4,"div",[["class","category"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),cr(2,null,["",""])),(e()(),Qs(16777216,null,null,1,null,Df)),ai(4,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,4,0,n.component.getResourcesList(n.context.$implicit))}),(function(e,n){e(n,2,0,n.context.$implicit)}))}function Ff(e){return gr(0,[(e()(),qs(0,0,null,null,19,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,15,"span",[["id","resourcesTitle"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,0,"span",[["class","side"]],null,null,null,null,null)),(e()(),qs(3,0,null,null,1,"span",[["id","center"]],null,null,null,null,null)),(e()(),cr(-1,null,["Resources"])),(e()(),qs(5,0,null,null,11,"span",[["class","side"]],null,null,null,null,null)),(e()(),qs(6,0,null,null,3,"span",[["class","inline"]],null,null,null,null,null)),(e()(),qs(7,0,null,null,1,"label",[["for","hideEmpty"]],null,null,null,null,null)),(e()(),cr(-1,null,["hide empty"])),(e()(),qs(9,0,null,null,0,"input",[["id","hideEmpty"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.resourcesService.toggleHideEmpty()&&t),t}),null,null)),(e()(),qs(10,0,null,null,6,"span",[["class","inline"]],null,null,null,null,null)),(e()(),qs(11,0,null,null,5,"input",[["placeholder","filter"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,12)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,12).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,12)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,12)._compositionEnd(l.target.value)&&t),"ngModelChange"===n&&(t=!1!==(i.filterText=l)&&t),t}),null,null)),ai(12,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),hi(1024,null,qp,(function(e){return[e]}),[Jp]),ai(14,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(16,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(17,0,null,null,2,"div",[["id","categories"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,Lf)),ai(19,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,14,0,l.filterText),e(n,19,0,l.categories)}),(function(e,n){e(n,9,0,n.component.resourcesService.getHideEmpty()),e(n,11,0,qt(n,16).ngClassUntouched,qt(n,16).ngClassTouched,qt(n,16).ngClassPristine,qt(n,16).ngClassDirty,qt(n,16).ngClassValid,qt(n,16).ngClassInvalid,qt(n,16).ngClassPending)}))}function Uf(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-resources",[],null,null,null,Ff,Nf)),ai(1,114688,null,0,Af,[yf,pf,mf,Sf],null,null)],(function(e,n){e(n,1,0)}),null)}var Hf=Ht("app-resources",Af,Uf,{},{},[]);class Gf{constructor(e,n,l,t,i,s,r=!1){this.canceled=!1,this.id=e,this.title=n,this.resource=l,this.amount=t,this.cost=i,this.craftingDifficulty=s,this.available=r}getResource(){return this.resource}}let Bf,Wf=(()=>{class e{constructor(e,n){this.servicesService=e,this.resourcesService=n,this.recipes=[],e.addService(Wu.RECIPE,this),this.initRecipes()}initRecipes(){this.recipes=[],Object.entries(Po.RECIPES).forEach(e=>{const n=new Map;e[1].COST.forEach(e=>n.set(e.resource,e.amount)),this.recipes.push(new Gf(Gu[e[0]],void 0!==e[1].NAME?e[1].NAME:Uu.prepareResourceName(e[1].RESOURCE),e[1].RESOURCE,e[1].AMOUNT?e[1].AMOUNT:1,n,e[1].CRAFTING,!1))}),this.recipes.find(e=>e.id===Gu.PLANK).available=!0,this.recipes.find(e=>e.id===Gu.CUT_STONE).available=!0,go.production||Object.values(Gu).filter(e=>!isNaN(e)).forEach(e=>this.enable(e))}getRecipes(){return this.recipes.filter(e=>e.available)}getCookingRecipes(){return this.recipes.filter(e=>e.available&&this.resourcesService.getResource(e.resource).getResourceTypes().includes(_u.CONSUMABLE))}getRecipeById(e){return this.recipes.find(n=>n.id===e)}enable(e){const n=this.recipes.find(n=>n.id===e);this.resourcesService.makeVisible(n.getResource()),Array.from(n.cost.keys()).forEach(e=>this.resourcesService.makeVisible(e)),n.available=!0}disable(e){const n=this.recipes.find(n=>n.id===e);this.resourcesService.makeVisible(n.getResource()),n.available=!1}getName(){return"RecipeService"}load(e){this.initRecipes(),e.recipes.forEach(e=>{const n=this.recipes.find(n=>n.id===e);n&&(n.available=!0)})}save(){return{recipes:this.recipes.filter(e=>e.available).map(e=>e.id)}}reset(e,n){this.initRecipes()}}return e.ngInjectableDef=ce({factory:function(){return new e(De(sf),De(yf))},token:e,providedIn:"root"}),e})();try{Bf="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(WG){Bf=!1}let Vf,zf=(()=>{class e{constructor(e){this._platformId=e,this.isBrowser=this._platformId?this._platformId===Ma:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Bf)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return e.ngInjectableDef=ce({factory:function(){return new e(De(zi,8))},token:e,providedIn:"root"}),e})();function Yf(e){return function(){if(null==Vf&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Vf=!0}))}finally{Vf=Vf||!1}return Vf}()?e:!!e.capture}function $f(e){return null!=e&&"false"!==`${e}`}function Kf(e){return e instanceof ol?e.nativeElement:e}function jf(e,n,l,i){return t(l)&&(i=l,l=void 0),i?jf(e,n,l).pipe(F(e=>o(e)?i(...e):i(e))):new R(t=>{!function e(n,l,t,i,s){let r;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(n)){const e=n;n.addEventListener(l,t,s),r=()=>e.removeEventListener(l,t,s)}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(n)){const e=n;n.on(l,t),r=()=>e.off(l,t)}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(n)){const e=n;n.addListener(l,t),r=()=>e.removeListener(l,t)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let r=0,u=n.length;r<u;r++)e(n[r],l,t,i,s)}i.add(r)}(e,n,(function(e){t.next(arguments.length>1?Array.prototype.slice.call(arguments):e)}),t,l)})}class Qf extends h{constructor(e,n){super()}schedule(e,n=0){return this}}class qf extends Qf{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){if(this.closed)return this;this.state=e;const l=this.id,t=this.scheduler;return null!=l&&(this.id=this.recycleAsyncId(t,l,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(t,this.id,n),this}requestAsyncId(e,n,l=0){return setInterval(e.flush.bind(e,this),l)}recycleAsyncId(e,n,l=0){if(null!==l&&this.delay===l&&!1===this.pending)return n;clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const l=this._execute(e,n);if(l)return l;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let l=!1,t=void 0;try{this.work(e)}catch(i){l=!0,t=!!i&&i||new Error(i)}if(l)return this.unsubscribe(),t}_unsubscribe(){const e=this.id,n=this.scheduler,l=n.actions,t=l.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==t&&l.splice(t,1),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null}}let Xf=(()=>{class e{constructor(n,l=e.now){this.SchedulerAction=n,this.now=l}schedule(e,n=0,l){return new this.SchedulerAction(this,e).schedule(l,n)}}return e.now=()=>Date.now(),e})();class Zf extends Xf{constructor(e,n=Xf.now){super(e,()=>Zf.delegate&&Zf.delegate!==this?Zf.delegate.now():n()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,n=0,l){return Zf.delegate&&Zf.delegate!==this?Zf.delegate.schedule(e,n,l):super.schedule(e,n,l)}flush(e){const{actions:n}=this;if(this.active)return void n.push(e);let l;this.active=!0;do{if(l=e.execute(e.state,e.delay))break}while(e=n.shift());if(this.active=!1,l){for(;e=n.shift();)e.unsubscribe();throw l}}}const Jf=new Zf(qf);class eS{constructor(e){this.durationSelector=e}call(e,n){return n.subscribe(new nS(e,this.durationSelector))}}class nS extends L{constructor(e,n){super(e),this.durationSelector=n,this.hasValue=!1}_next(e){if(this.value=e,this.hasValue=!0,!this.throttled){let l;try{const{durationSelector:n}=this;l=n(e)}catch(n){return this.destination.error(n)}const t=D(this,l);!t||t.closed?this.clearThrottle():this.add(this.throttled=t)}}clearThrottle(){const{value:e,hasValue:n,throttled:l}=this;l&&(this.remove(l),this.throttled=null,l.unsubscribe()),n&&(this.value=null,this.hasValue=!1,this.destination.next(e))}notifyNext(e,n,l,t){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function lS(e){return!o(e)&&e-parseFloat(e)+1>=0}function tS(e){const{index:n,period:l,subscriber:t}=e;if(t.next(n),!t.closed){if(-1===l)return t.complete();e.index=n+1,this.schedule(e,l)}}function iS(e){return n=>n.lift(new sS(e))}class sS{constructor(e){this.notifier=e}call(e,n){const l=new rS(e),t=D(l,this.notifier);return t&&!l.seenValue?(l.add(t),n.subscribe(l)):l}}class rS extends L{constructor(e){super(e),this.seenValue=!1}notifyNext(e,n,l,t,i){this.seenValue=!0,this.complete()}notifyComplete(){}}function uS(e,n){return new R(n?l=>n.schedule(oS,0,{error:e,subscriber:l}):n=>n.error(e))}function oS({error:e,subscriber:n}){n.error(e)}const aS=20;let cS=(()=>{class e{constructor(e,n){this._platform=e,n.runOutsideAngular(()=>{this._change=e.isBrowser?j(jf(window,"resize"),jf(window,"orientationchange")):Fa(),this._invalidateCache=this.change().subscribe(()=>this._updateViewportSize())})}ngOnDestroy(){this._invalidateCache.unsubscribe()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:n,height:l}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+l,right:e.left+n,height:l,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=document.documentElement,n=e.getBoundingClientRect();return{top:-n.top||document.body.scrollTop||window.scrollY||e.scrollTop||0,left:-n.left||document.body.scrollLeft||window.scrollX||e.scrollLeft||0}}change(e=aS){return e>0?this._change.pipe(function(e,n=Jf){return l=()=>(function(e=0,n,l){let t=-1;return lS(n)?t=Number(n)<1?1:Number(n):A(n)&&(l=n),A(l)||(l=Jf),new R(n=>{const i=lS(e)?e:+e-l.now();return l.schedule(tS,i,{index:0,period:t,subscriber:n})})})(e,n),function(e){return e.lift(new eS(l))};var l}(e)):this._change}_updateViewportSize(){this._viewportSize=this._platform.isBrowser?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0}}}return e.ngInjectableDef=ce({factory:function(){return new e(De(zf),De(hs))},token:e,providedIn:"root"}),e})();function hS(e,n){for(let l in n)n.hasOwnProperty(l)&&(e[l]=n[l]);return e}function dS(e,n){const l=n?"":"none";hS(e.style,{touchAction:n?"":"none",webkitUserDrag:n?"":"none",webkitTapHighlightColor:n?"":"transparent",userSelect:l,msUserSelect:l,webkitUserSelect:l,MozUserSelect:l})}function gS(e){const n=e.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(e)*n}function pS(e,n){return e.getPropertyValue(n).split(",").map(e=>e.trim())}const mS=Yf({passive:!0}),fS=Yf({passive:!1}),SS=800;class ES{constructor(e,n,l,t,i,s){this._config=n,this._document=l,this._ngZone=t,this._viewportRuler=i,this._dragDropRegistry=s,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._moveEvents=new I,this._pointerMoveSubscription=h.EMPTY,this._pointerUpSubscription=h.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new I,this.started=new I,this.released=new I,this.ended=new I,this.entered=new I,this.exited=new I,this.dropped=new I,this.moved=this._moveEvents.asObservable(),this._pointerDown=e=>{if(this.beforeStarted.next(),this._handles.length){const n=this._handles.find(n=>{const l=e.target;return!!l&&(l===n||n.contains(l))});!n||this._disabledHandles.has(n)||this.disabled||this._initializeDragSequence(n,e)}else this.disabled||this._initializeDragSequence(this._rootElement,e)},this._pointerMove=e=>{if(!this._hasStartedDragging){const n=this._getPointerPositionOnPage(e);return void(Math.abs(n.x-this._pickupPositionOnPage.x)+Math.abs(n.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold&&Date.now()>=this._dragStartTime+(this.dragStartDelay||0)&&(this._dropContainer&&this._dropContainer.isDragging()||(this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(e)))))}this._boundaryElement&&(this._previewRect&&(this._previewRect.width||this._previewRect.height)||(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()));const n=this._getConstrainedPointerPosition(e);if(this._hasMoved=!0,e.preventDefault(),this._updatePointerDirectionDelta(n),this._dropContainer)this._updateActiveDropContainer(n);else{const e=this._activeTransform;e.x=n.x-this._pickupPositionOnPage.x+this._passiveTransform.x,e.y=n.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(e.x,e.y),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&this._rootElement.setAttribute("transform",`translate(${e.x} ${e.y})`)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:n,event:e,distance:this._getDragDistance(n),delta:this._pointerDirectionDelta})})},this._pointerUp=e=>{if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging)){if(this.released.next({source:this}),!this._dropContainer)return this._passiveTransform.x=this._activeTransform.x,this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(this._getPointerPositionOnPage(e))})}),void this._dragDropRegistry.stopDragging(this);this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._dragDropRegistry.stopDragging(this)})}},this.withRootElement(e),s.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(e){const n=$f(e);n!==this._disabled&&(this._disabled=n,this._toggleNativeDragInteractions())}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}withHandles(e){return this._handles=e.map(e=>Kf(e)),this._handles.forEach(e=>dS(e,!1)),this._toggleNativeDragInteractions(),this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){const n=Kf(e);return n!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),n.addEventListener("mousedown",this._pointerDown,fS),n.addEventListener("touchstart",this._pointerDown,mS),this._initialTransform=void 0,this._rootElement=n),this}withBoundaryElement(e){return this._boundaryElement=e?Kf(e):null,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&bS(this._rootElement),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._boundaryElement=this._rootElement=this._placeholderTemplate=this._previewTemplate=this._nextSibling=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){this._handles.indexOf(e)>-1&&this._disabledHandles.add(e)}enableHandle(e){this._disabledHandles.delete(e)}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){return{x:this._passiveTransform.x,y:this._passiveTransform.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe()}_destroyPreview(){this._preview&&bS(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder&&bS(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null}_startDragSequence(e){if(this.started.next({source:this}),TS(e)&&(this._lastTouchEventTime=Date.now()),this._dropContainer){const e=this._rootElement;this._nextSibling=e.nextSibling;const l=this._preview=this._createPreviewElement(),t=this._placeholder=this._createPlaceholderElement();e.style.display="none",this._document.body.appendChild(e.parentNode.replaceChild(t,e)),(n=this._document,n.fullscreenElement||n.webkitFullscreenElement||n.mozFullScreenElement||n.msFullscreenElement||n.body).appendChild(l),this._dropContainer.start()}var n}_initializeDragSequence(e,n){n.stopPropagation();const l=this.isDragging(),t=TS(n),i=!t&&0!==n.button,s=this._rootElement,r=!t&&this._lastTouchEventTime&&this._lastTouchEventTime+SS>Date.now();if(n.target&&n.target.draggable&&"mousedown"===n.type&&n.preventDefault(),l||i||r)return;this._handles.length&&(this._rootElementTapHighlight=s.style.webkitTapHighlightColor,s.style.webkitTapHighlightColor="transparent"),this._toggleNativeDragInteractions(),this._hasStartedDragging=this._hasMoved=!1,this._initialContainer=this._dropContainer,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollPosition=this._viewportRuler.getViewportScrollPosition(),this._boundaryElement&&(this._boundaryRect=this._boundaryElement.getBoundingClientRect()),this._pickupPositionInElement=this._previewTemplate&&this._previewTemplate.template?{x:0,y:0}:this._getPointerPositionInElement(e,n);const u=this._pickupPositionOnPage=this._getPointerPositionOnPage(n);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:u.x,y:u.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,n)}_cleanupDragArtifacts(e){this._rootElement.style.display="",this._nextSibling?this._nextSibling.parentNode.insertBefore(this._rootElement,this._nextSibling):Kf(this._initialContainer.element).appendChild(this._rootElement),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=void 0,this._ngZone.run(()=>{const n=this._dropContainer,l=n.getItemIndex(this),t=this._getPointerPositionOnPage(e),i=this._getDragDistance(this._getPointerPositionOnPage(e)),s=n._isOverContainer(t.x,t.y);this.ended.next({source:this,distance:i}),this.dropped.next({item:this,currentIndex:l,previousIndex:this._initialContainer.getItemIndex(this),container:n,previousContainer:this._initialContainer,isPointerOverContainer:s,distance:i}),n.drop(this,l,this._initialContainer,s,i),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:n}){let l=this._initialContainer._getSiblingContainerFromPosition(this,e,n);!l&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,n)&&(l=this._initialContainer),l&&l!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=l,this._dropContainer.enter(this,e,n),this.entered.next({item:this,container:l,currentIndex:l.getItemIndex(this)})}),this._dropContainer._sortItem(this,e,n,this._pointerDirectionDelta),this._preview.style.transform=vS(e-this._pickupPositionInElement.x,n-this._pickupPositionInElement.y)}_createPreviewElement(){const e=this._previewTemplate,n=e?e.template:null;let l;if(n){const t=e.viewContainer.createEmbeddedView(n,e.context);l=t.rootNodes[0],this._previewRef=t,l.style.transform=vS(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const e=this._rootElement,n=e.getBoundingClientRect();(l=RS(e)).style.width=`${n.width}px`,l.style.height=`${n.height}px`,l.style.transform=vS(n.left,n.top)}return hS(l.style,{pointerEvents:"none",position:"fixed",top:"0",left:"0",zIndex:"1000"}),dS(l,!1),l.classList.add("cdk-drag-preview"),l.setAttribute("dir",this._direction),l}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._preview.style.transform=vS(e.left,e.top);const n=function(e){const n=getComputedStyle(e),l=pS(n,"transition-property"),t=l.find(e=>"transform"===e||"all"===e);if(!t)return 0;const i=l.indexOf(t),s=pS(n,"transition-duration"),r=pS(n,"transition-delay");return gS(s[i])+gS(r[i])}(this._preview);return 0===n?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(e=>{const l=n=>{(!n||n.target===this._preview&&"transform"===n.propertyName)&&(this._preview.removeEventListener("transitionend",l),e(),clearTimeout(t))},t=setTimeout(l,1.5*n);this._preview.addEventListener("transitionend",l)}))}_createPlaceholderElement(){const e=this._placeholderTemplate,n=e?e.template:null;let l;return n?(this._placeholderRef=e.viewContainer.createEmbeddedView(n,e.context),l=this._placeholderRef.rootNodes[0]):l=RS(this._rootElement),l.classList.add("cdk-drag-placeholder"),l}_getPointerPositionInElement(e,n){const l=this._rootElement.getBoundingClientRect(),t=e===this._rootElement?null:e,i=t?t.getBoundingClientRect():l,s=TS(n)?n.targetTouches[0]:n;return{x:i.left-l.left+(s.pageX-i.left-this._scrollPosition.left),y:i.top-l.top+(s.pageY-i.top-this._scrollPosition.top)}}_getPointerPositionOnPage(e){const n=TS(e)?e.touches[0]||e.changedTouches[0]:e;return{x:n.pageX-this._scrollPosition.left,y:n.pageY-this._scrollPosition.top}}_getConstrainedPointerPosition(e){const n=this._getPointerPositionOnPage(e),l=this.constrainPosition?this.constrainPosition(n):n,t=this._dropContainer?this._dropContainer.lockAxis:null;if("x"===this.lockAxis||"x"===t?l.y=this._pickupPositionOnPage.y:"y"!==this.lockAxis&&"y"!==t||(l.x=this._pickupPositionOnPage.x),this._boundaryRect){const{x:e,y:n}=this._pickupPositionInElement,t=this._boundaryRect,i=this._previewRect,s=t.top+n,r=t.bottom-(i.height-n);l.x=OS(l.x,t.left+e,t.right-(i.width-e)),l.y=OS(l.y,s,r)}return l}_updatePointerDirectionDelta(e){const{x:n,y:l}=e,t=this._pointerDirectionDelta,i=this._pointerPositionAtLastDirectionChange,s=Math.abs(n-i.x),r=Math.abs(l-i.y);return s>this._config.pointerDirectionChangeThreshold&&(t.x=n>i.x?1:-1,i.x=n),r>this._config.pointerDirectionChangeThreshold&&(t.y=l>i.y?1:-1,i.y=l),t}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const e=this.disabled||this._handles.length>0;e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,dS(this._rootElement,e))}_removeRootElementListeners(e){e.removeEventListener("mousedown",this._pointerDown,fS),e.removeEventListener("touchstart",this._pointerDown,mS)}_applyRootElementTransform(e,n){const l=vS(e,n);null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform||""),this._rootElement.style.transform=this._initialTransform?l+" "+this._initialTransform:l}_getDragDistance(e){const n=this._pickupPositionOnPage;return n?{x:e.x-n.x,y:e.y-n.y}:{x:0,y:0}}}function vS(e,n){return`translate3d(${Math.round(e)}px, ${Math.round(n)}px, 0)`}function RS(e){const n=e.cloneNode(!0),l=n.querySelectorAll("[id]"),t=e.querySelectorAll("canvas");n.removeAttribute("id");for(let i=0;i<l.length;i++)l[i].removeAttribute("id");if(t.length){const e=n.querySelectorAll("canvas");for(let n=0;n<t.length;n++){const l=e[n].getContext("2d");l&&l.drawImage(t[n],0,0)}}return n}function OS(e,n,l){return Math.max(n,Math.min(l,e))}function bS(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function TS(e){return"t"===e.type[0]}function CS(e,n,l){const t=IS(n,e.length-1),i=IS(l,e.length-1);if(t===i)return;const s=e[t],r=i<t?-1:1;for(let u=t;u!==i;u+=r)e[u]=e[u+r];e[i]=s}function IS(e,n){return Math.max(0,Math.min(n,e))}let yS=0;const AS=.05;class NS{constructor(e,n,l){this._dragDropRegistry=n,this.id=`cdk-drop-list-ref-${yS++}`,this.disabled=!1,this.sortingDisabled=!0,this.enterPredicate=()=>!0,this.beforeStarted=new I,this.entered=new I,this.exited=new I,this.dropped=new I,this.sorted=new I,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0},this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",n.registerDropContainer(this),this._document=l,this.element=e instanceof ol?e.nativeElement:e}dispose(){this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this.beforeStarted.next(),this._isDragging=!0,this._cacheItems(),this._siblings.forEach(e=>e._startReceiving(this))}enter(e,n,l){this.start();let t=this.sortingDisabled?this._draggables.indexOf(e):-1;-1===t&&(t=this._getItemIndexFromPointerPosition(e,n,l));const i=this._activeDraggables,s=i.indexOf(e),r=e.getPlaceholderElement();let u=i[t];if(u===e&&(u=i[t+1]),s>-1&&i.splice(s,1),u&&!this._dragDropRegistry.isDragging(u)){const n=u.getRootElement();n.parentElement.insertBefore(r,n),i.splice(t,0,e)}else Kf(this.element).appendChild(r),i.push(e);r.style.transform="",this._cacheItemPositions(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,n,l,t,i={x:0,y:0}){this._reset(),this.dropped.next({item:e,currentIndex:n,previousIndex:l.getItemIndex(e),container:this,previousContainer:l,isPointerOverContainer:t,distance:i})}withItems(e){return this._draggables=e,e.forEach(e=>e._withDropContainer(this)),this.isDragging()&&this._cacheItems(),this}withDirection(e){return this._direction=e,this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){return this._orientation=e,this}getItemIndex(e){return this._isDragging?wS("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions,n=>n.drag===e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,n,l,t){if(this.sortingDisabled||!this._isPointerNearDropContainer(n,l))return;const i=this._itemPositions,s=this._getItemIndexFromPointerPosition(e,n,l,t);if(-1===s&&i.length>0)return;const r="horizontal"===this._orientation,u=wS(i,n=>n.drag===e),o=i[s],a=i[u].clientRect,c=o.clientRect,h=u>s?1:-1;this._previousSwap.drag=o.drag,this._previousSwap.delta=r?t.x:t.y;const d=this._getItemOffsetPx(a,c,h),g=this._getSiblingOffsetPx(u,i,h),p=i.slice();CS(i,u,s),this.sorted.next({previousIndex:u,currentIndex:s,container:this,item:e}),i.forEach((n,l)=>{if(p[l]===n)return;const t=n.drag===e,i=t?d:g,s=t?e.getPlaceholderElement():n.drag.getRootElement();n.offset+=i,r?(s.style.transform=`translate3d(${Math.round(n.offset)}px, 0, 0)`,_S(n.clientRect,0,i)):(s.style.transform=`translate3d(0, ${Math.round(n.offset)}px, 0)`,_S(n.clientRect,i,0))})}_cacheOwnPosition(){this._clientRect=Kf(this.element).getBoundingClientRect()}_cacheItemPositions(){const e="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(e=>{const n=(this._dragDropRegistry.isDragging(e)?e.getPlaceholderElement():e.getRootElement()).getBoundingClientRect();return{drag:e,offset:0,clientRect:{top:n.top,right:n.right,bottom:n.bottom,left:n.left,width:n.width,height:n.height}}}).sort((n,l)=>e?n.clientRect.left-l.clientRect.left:n.clientRect.top-l.clientRect.top)}_reset(){this._isDragging=!1,this._activeDraggables.forEach(e=>e.getRootElement().style.transform=""),this._siblings.forEach(e=>e._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0}_getSiblingOffsetPx(e,n,l){const t="horizontal"===this._orientation,i=n[e].clientRect,s=n[e+-1*l];let r=i[t?"width":"height"]*l;if(s){const e=t?"left":"top",n=t?"right":"bottom";-1===l?r-=s.clientRect[e]-i[n]:r+=i[e]-s.clientRect[n]}return r}_isPointerNearDropContainer(e,n){const{top:l,right:t,bottom:i,left:s,width:r,height:u}=this._clientRect,o=r*AS,a=u*AS;return n>l-a&&n<i+a&&e>s-o&&e<t+o}_getItemOffsetPx(e,n,l){const t="horizontal"===this._orientation;let i=t?n.left-e.left:n.top-e.top;return-1===l&&(i+=t?n.width-e.width:n.height-e.height),i}_getItemIndexFromPointerPosition(e,n,l,t){const i="horizontal"===this._orientation;return wS(this._itemPositions,({drag:s,clientRect:r},u,o)=>{if(s===e)return o.length<2;if(t){const e=i?t.x:t.y;if(s===this._previousSwap.drag&&e===this._previousSwap.delta)return!1}return i?n>=Math.floor(r.left)&&n<=Math.floor(r.right):l>=Math.floor(r.top)&&l<=Math.floor(r.bottom)})}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheOwnPosition()}_isOverContainer(e,n){return PS(this._clientRect,e,n)}_getSiblingContainerFromPosition(e,n,l){return this._siblings.find(t=>t._canReceive(e,n,l))}_canReceive(e,n,l){if(!this.enterPredicate(e,this)||!PS(this._clientRect,n,l))return!1;const t=this._document.elementFromPoint(n,l);if(!t)return!1;const i=Kf(this.element);return t===i||i.contains(t)}_startReceiving(e){const n=this._activeSiblings;n.has(e)||(n.add(e),this._cacheOwnPosition())}_stopReceiving(e){this._activeSiblings.delete(e)}}function _S(e,n,l){e.top+=n,e.bottom=e.top+e.height,e.left+=l,e.right=e.left+e.width}function wS(e,n){for(let l=0;l<e.length;l++)if(n(e[l],l,e))return l;return-1}function PS(e,n,l){const{top:t,bottom:i,left:s,right:r}=e;return l>=t&&l<=i&&n>=s&&n<=r}const xS=Yf({passive:!1,capture:!0});let kS=(()=>{class e{constructor(e,n){this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=new Set,this._globalListeners=new Map,this.pointerMove=new I,this.pointerUp=new I,this._preventDefaultWhileDragging=e=>{this._activeDragInstances.size&&e.preventDefault()},this._document=n}registerDropContainer(e){if(!this._dropInstances.has(e)){if(this.getDropContainer(e.id))throw Error(`Drop instance with id "${e.id}" has already been registered.`);this._dropInstances.add(e)}}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._preventDefaultWhileDragging,xS)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._preventDefaultWhileDragging,xS)}startDragging(e,n){if(!this._activeDragInstances.has(e)&&(this._activeDragInstances.add(e),1===this._activeDragInstances.size)){const e=n.type.startsWith("touch"),l=e?"touchend":"mouseup";this._globalListeners.set(e?"touchmove":"mousemove",{handler:e=>this.pointerMove.next(e),options:xS}).set(l,{handler:e=>this.pointerUp.next(e),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:xS}),e||this._globalListeners.set("wheel",{handler:this._preventDefaultWhileDragging,options:xS}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((e,n)=>{this._document.addEventListener(n,e.handler,e.options)})})}}stopDragging(e){this._activeDragInstances.delete(e),0===this._activeDragInstances.size&&this._clearGlobalListeners()}isDragging(e){return this._activeDragInstances.has(e)}getDropContainer(e){return Array.from(this._dropInstances).find(n=>n.id===e)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,n)=>{this._document.removeEventListener(n,e.handler,e.options)}),this._globalListeners.clear()}}return e.ngInjectableDef=ce({factory:function(){return new e(De(hs),De(ka))},token:e,providedIn:"root"}),e})();const MS={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let DS=(()=>{class e{constructor(e,n,l,t){this._document=e,this._ngZone=n,this._viewportRuler=l,this._dragDropRegistry=t}createDrag(e,n=MS){return new ES(e,n,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new NS(e,this._dragDropRegistry,this._document)}}return e.ngInjectableDef=ce({factory:function(){return new e(De(ka),De(hs),De(cS),De(kS))},token:e,providedIn:"root"}),e})();const LS=new be("CDK_DROP_LIST"),FS=new be("CDK_DRAG_PARENT"),US=new be("CDK_DRAG_CONFIG",{providedIn:"root",factory:function(){return{dragStartThreshold:5,pointerDirectionChangeThreshold:5}}});let HS=(()=>(class{constructor(e,n,l,t,i,s,r,u,o){this.element=e,this.dropContainer=n,this._document=l,this._ngZone=t,this._viewContainerRef=i,this._dir=r,this._changeDetectorRef=o,this._destroyed=new I,this.dragStartDelay=0,this._disabled=!1,this.started=new Di,this.released=new Di,this.ended=new Di,this.entered=new Di,this.exited=new Di,this.dropped=new Di,this.moved=new R(e=>{const n=this._dragRef.moved.pipe(F(e=>({source:this,pointerPosition:e.pointerPosition,event:e.event,delta:e.delta,distance:e.distance}))).subscribe(e);return()=>{n.unsubscribe()}}),this._dragRef=u.createDrag(e,s),this._dragRef.data=this,this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get boundaryElementSelector(){return"string"==typeof this.boundaryElement?this.boundaryElement:void 0}set boundaryElementSelector(e){this.boundaryElement=e}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(e){this._disabled=$f(e),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}ngAfterViewInit(){this._ngZone.onStable.asObservable().pipe(hc(1),iS(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._handles.changes.pipe(Oc(this._handles),yc(e=>{const n=e.filter(e=>e._parentDrag===this).map(e=>e.element);this._dragRef.withHandles(n)}),Sc(e=>j(...e.map(e=>e._stateChanges))),iS(this._destroyed)).subscribe(e=>{const n=this._dragRef,l=e.element.nativeElement;e.disabled?n.disableHandle(l):n.enableHandle(l)}),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})}ngOnChanges(e){const n=e.rootElementSelector,l=e.freeDragPosition;n&&!n.firstChange&&this._updateRootElement(),l&&!l.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()}_updateRootElement(){const e=this.element.nativeElement,n=this.rootElementSelector?GS(e,this.rootElementSelector):e;if(n&&n.nodeType!==this._document.ELEMENT_NODE)throw Error("cdkDrag must be attached to an element node. "+`Currently attached to "${n.nodeName}".`);this._dragRef.withRootElement(n||e)}_getBoundaryElement(){const e=this.boundaryElement;if(!e)return null;if("string"==typeof e)return GS(this.element.nativeElement,e);const n=Kf(e);if(en()&&!n.contains(this.element.nativeElement))throw Error("Draggable element is not inside of the node passed into cdkDragBoundary.");return n}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){const n=this._dir,l=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,t=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.dragStartDelay=function(e,n=0){return function(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}(e)?Number(e):n}(this.dragStartDelay),e.constrainPosition=this.constrainPosition,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(l).withPreviewTemplate(t),n&&e.withDirection(n.value)}})}_handleEvents(e){e.started.subscribe(()=>{this.started.emit({source:this}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(()=>{this.released.emit({source:this})}),e.ended.subscribe(e=>{this.ended.emit({source:this,distance:e.distance}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(e=>{this.entered.emit({container:e.container.data,item:this,currentIndex:e.currentIndex})}),e.exited.subscribe(e=>{this.exited.emit({container:e.container.data,item:this})}),e.dropped.subscribe(e=>{this.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,isPointerOverContainer:e.isPointerOverContainer,item:this,distance:e.distance})})}}))();function GS(e,n){let l=e.parentElement;for(;l;){if(l.matches?l.matches(n):l.msMatchesSelector(n))return l;l=l.parentElement}return null}let BS=(()=>(class{constructor(){this._items=new Set,this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=$f(e)}ngOnDestroy(){this._items.clear()}}))(),WS=0,VS=(()=>{class e{constructor(n,l,t,i,s){this.element=n,this._changeDetectorRef=t,this._dir=i,this._group=s,this._destroyed=new I,this.connectedTo=[],this.orientation="vertical",this.id=`cdk-drop-list-${WS++}`,this._disabled=!1,this._sortingDisabled=!1,this.enterPredicate=()=>!0,this.dropped=new Di,this.entered=new Di,this.exited=new Di,this.sorted=new Di,this._dropListRef=l.createDropList(n),this._dropListRef.data=this,this._dropListRef.enterPredicate=(e,n)=>this.enterPredicate(e.data,n.data),this._syncInputs(this._dropListRef),this._handleEvents(this._dropListRef),e._dropLists.push(this),s&&s._items.add(this)}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._disabled=$f(e)}get sortingDisabled(){return this._sortingDisabled}set sortingDisabled(e){this._sortingDisabled=$f(e)}ngAfterContentInit(){this._draggables.changes.pipe(Oc(this._draggables),iS(this._destroyed)).subscribe(e=>{this._dropListRef.withItems(e.map(e=>e._dragRef))})}ngOnDestroy(){const n=e._dropLists.indexOf(this);n>-1&&e._dropLists.splice(n,1),this._group&&this._group._items.delete(this),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}start(){this._dropListRef.start()}drop(e,n,l,t){this._dropListRef.drop(e._dragRef,n,l._dropListRef,t)}enter(e,n,l){this._dropListRef.enter(e._dragRef,n,l)}exit(e){this._dropListRef.exit(e._dragRef)}getItemIndex(e){return this._dropListRef.getItemIndex(e._dragRef)}_sortItem(e,n,l,t){return this._dropListRef._sortItem(e._dragRef,n,l,t)}_getSiblingContainerFromPosition(e,n,l){const t=this._dropListRef._getSiblingContainerFromPosition(e._dragRef,n,l);return t?t.data:null}_isOverContainer(e,n){return this._dropListRef._isOverContainer(e,n)}_syncInputs(n){this._dir&&this._dir.change.pipe(Oc(this._dir.value),iS(this._destroyed)).subscribe(e=>n.withDirection(e)),n.beforeStarted.subscribe(()=>{const l=function(e){return Array.isArray(e)?e:[e]}(this.connectedTo).map(n=>"string"==typeof n?e._dropLists.find(e=>e.id===n):n);this._group&&this._group._items.forEach(e=>{-1===l.indexOf(e)&&l.push(e)}),n.disabled=this.disabled,n.lockAxis=this.lockAxis,n.sortingDisabled=this.sortingDisabled,n.connectedTo(l.filter(e=>e&&e!==this).map(e=>e._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._changeDetectorRef.markForCheck()}),e.entered.subscribe(e=>{this.entered.emit({container:this,item:e.item.data,currentIndex:e.currentIndex})}),e.exited.subscribe(e=>{this.exited.emit({container:this,item:e.item.data}),this._changeDetectorRef.markForCheck()}),e.sorted.subscribe(e=>{this.sorted.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,container:this,item:e.item.data})}),e.dropped.subscribe(e=>{this.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,item:e.item.data,isPointerOverContainer:e.isPointerOverContainer,distance:e.distance}),this._changeDetectorRef.markForCheck()})}}return e._dropLists=[],e})(),zS=(()=>(class{}))();var YS=function(e){return e[e.NONE=0]="NONE",e[e.SELECTED=1]="SELECTED",e[e.UNTIL_X=2]="UNTIL_X",e[e.CONTINUOUS=3]="CONTINUOUS",e[e.UNTIL_PERCENT=4]="UNTIL_PERCENT",e}({});let $S=(()=>{class e{constructor(e,n,l,t){this.resourcesService=e,this.servicesService=n,this.recipeService=l,this.modalService=t,this.recipeUpdate=new I,this.craftingQueue=[],this.cookingQueue=[],this.id=1,this.craftingQueueSize=Po.START_CRAFTING_QUEUE_SIZE,this.cookingQueueSize=Po.START_COOKING_QUEUE_SIZE,this.craftingType=YS.SELECTED,this.cookingType=YS.SELECTED,n.addService(Wu.CRAFTING,this)}craft(e,n,l,t){this.craftingQueue.length>=this.craftingQueueSize?this.modalService.info("Crafting order queue is full"):e.shiftKey?this.craftingQueue.unshift({id:this.nextId(),recipe:n,amount:l,type:t}):this.craftingQueue.push({id:this.nextId(),recipe:n,amount:l,type:t})}cook(e,n,l,t){this.cookingQueue.length>=this.cookingQueueSize?this.modalService.info("Cooking order queue is full"):e.shiftKey?this.cookingQueue.unshift({id:this.nextId(),recipe:n,amount:l,type:t}):this.cookingQueue.push({id:this.nextId(),recipe:n,amount:l,type:t})}getCraftingQueue(){return this.craftingQueue}getCookingQueue(){return this.cookingQueue}getCraftingOrder(){const e=this.craftingQueue.find(e=>{if(e.type===YS.SELECTED&&e.amount>0&&this.resourcesService.hasResources(e.recipe.cost,"Crafting")){let n=0;this.servicesService.getVillageService().buildings.filter(e=>e.getBuildingType()===Ru.WORKSHOP).forEach(l=>{l.getRecipe()&&l.getRecipe().id===e.recipe.id&&(n+=e.recipe.amount)});const l=this.resourcesService.getResource(e.recipe.resource);return l.amount+n<l.limit}if(e.type===YS.UNTIL_X&&this.resourcesService.hasResources(e.recipe.cost,"Crafting")){let n=0;this.servicesService.getVillageService().buildings.filter(e=>e.getBuildingType()===Ru.WORKSHOP).forEach(l=>{l.getRecipe()&&l.getRecipe().id===e.recipe.id&&(n+=e.recipe.amount)});const l=this.resourcesService.getResource(e.recipe.resource);return l.limit<e.amount?l.amount+n<l.limit:l.amount+n<e.amount}if(e.type===YS.UNTIL_PERCENT&&this.resourcesService.hasResources(e.recipe.cost,"Crafting")){let n=0;this.servicesService.getVillageService().buildings.filter(e=>e.getBuildingType()===Ru.WORKSHOP).forEach(l=>{l.getRecipe()&&l.getRecipe().id===e.recipe.id&&(n+=e.recipe.amount)});const l=this.resourcesService.getResource(e.recipe.resource);return l.limit<Math.ceil(e.amount/100*l.limit)?l.amount+n<l.limit:l.amount+n<Math.ceil(e.amount/100*l.limit)}if(e.type===YS.CONTINUOUS&&this.resourcesService.hasResources(e.recipe.cost,"Crafting")){let n=0;this.servicesService.getVillageService().buildings.filter(e=>e.getBuildingType()===Ru.WORKSHOP).forEach(l=>{l.getRecipe()&&l.getRecipe().id===e.recipe.id&&(n+=e.recipe.amount)});const l=this.resourcesService.getResource(e.recipe.resource);return l.amount+n<l.limit}});return e?(this.resourcesService.decreaseResources(e.recipe.cost,"Crafting"),e.type===YS.SELECTED&&(e.amount-=1),this.craftingQueue=this.craftingQueue.filter(e=>e.type!==YS.SELECTED||e.amount>0),e.recipe):null}getCookingOrder(){const e=this.cookingQueue.find(e=>{if(e.type===YS.SELECTED&&e.amount>0&&this.resourcesService.hasResources(e.recipe.cost,"Kitchen")){let n=0;this.servicesService.getVillageService().buildings.filter(e=>e.getBuildingType()===Ru.KITCHEN).forEach(l=>{l.getRecipe()&&l.getRecipe().id===e.recipe.id&&(n+=e.recipe.amount)});const l=this.resourcesService.getResource(e.recipe.resource);return l.amount+n<l.limit}if(e.type===YS.UNTIL_X&&this.resourcesService.hasResources(e.recipe.cost,"Kitchen")){let n=0;this.servicesService.getVillageService().buildings.filter(e=>e.getBuildingType()===Ru.KITCHEN).forEach(l=>{l.getRecipe()&&l.getRecipe().id===e.recipe.id&&(n+=e.recipe.amount)});const l=this.resourcesService.getResource(e.recipe.resource);return l.limit<e.amount?l.amount+n<l.limit:l.amount+n<e.amount}if(e.type===YS.UNTIL_PERCENT&&this.resourcesService.hasResources(e.recipe.cost,"Kitchen")){let n=0;this.servicesService.getVillageService().buildings.filter(e=>e.getBuildingType()===Ru.KITCHEN).forEach(l=>{l.getRecipe()&&l.getRecipe().id===e.recipe.id&&(n+=e.recipe.amount)});const l=this.resourcesService.getResource(e.recipe.resource);return l.limit<Math.ceil(e.amount/100*l.limit)?l.amount+n<l.limit:l.amount+n<Math.ceil(e.amount/100*l.limit)}if(e.type===YS.CONTINUOUS&&this.resourcesService.hasResources(e.recipe.cost,"Kitchen")){let n=0;this.servicesService.getVillageService().buildings.filter(e=>e.getBuildingType()===Ru.KITCHEN).forEach(l=>{l.getRecipe()&&l.getRecipe().id===e.recipe.id&&(n+=e.recipe.amount)});const l=this.resourcesService.getResource(e.recipe.resource);return l.amount+n<l.limit}});return e?(this.resourcesService.decreaseResources(e.recipe.cost,"Kitchen"),e.type===YS.SELECTED&&(e.amount-=1),this.cookingQueue=this.cookingQueue.filter(e=>e.type!==YS.SELECTED||e.amount>0),e.recipe):null}getName(){return"CraftingService"}load(e){this.craftingQueue=[],this.cookingQueue=[],Array.from(e.queue).forEach(e=>{this.craftingQueue.push({id:this.nextId(),recipe:this.recipeService.getRecipeById(e.recipeId),amount:e.amount,type:e.type})}),void 0!==e.cookingQueue&&Array.from(e.cookingQueue).forEach(e=>{this.cookingQueue.push({id:this.nextId(),recipe:this.recipeService.getRecipeById(e.recipeId),amount:e.amount,type:e.type})}),this.craftingQueueSize=e.queueSize,this.cookingQueueSize=void 0!==e.cookingQueueSize?e.cookingQueueSize:Po.START_COOKING_QUEUE_SIZE}save(){return{queue:this.craftingQueue.map(e=>({recipeId:e.recipe.id,amount:e.amount,type:e.type})),cookingQueue:this.cookingQueue.map(e=>({recipeId:e.recipe.id,amount:e.amount,type:e.type})),queueSize:this.craftingQueueSize,cookingQueueSize:this.cookingQueueSize}}reset(e,n){this.craftingQueue=[],this.cookingQueue=[],this.id=1,this.craftingQueueSize=Po.START_CRAFTING_QUEUE_SIZE,this.cookingQueueSize=Po.START_COOKING_QUEUE_SIZE}registerForUpdate(){return this.recipeUpdate.asObservable()}cancel(e,n=!1){let l=this.craftingQueue.find(n=>n.id===e);if(l)if(n)this.craftingQueue=this.craftingQueue.filter(n=>n.id!==e),this.recipeUpdate.next();else{this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to cancel crafting "+Uu.prepareResourceName(l.recipe.resource)+"?");const n=this.modalService.registerForConfirmation().subscribe(l=>{l&&(this.craftingQueue=this.craftingQueue.filter(n=>n.id!==e),this.recipeUpdate.next()),n.unsubscribe()})}else if(l=this.cookingQueue.find(n=>n.id===e))if(n)this.cookingQueue=this.cookingQueue.filter(n=>n.id!==e),this.recipeUpdate.next();else{this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to cancel cooking "+Uu.prepareResourceName(l.recipe.resource)+"?");const n=this.modalService.registerForConfirmation().subscribe(l=>{l&&(this.cookingQueue=this.cookingQueue.filter(n=>n.id!==e),this.recipeUpdate.next()),n.unsubscribe()})}}nextId(){const e=this.id;return this.id++,e}moveRecipeInCraftingQueue(e){CS(this.craftingQueue,e.previousIndex,e.currentIndex)}moveRecipeInCookingQueue(e){CS(this.cookingQueue,e.previousIndex,e.currentIndex)}getCraftingQueueMaxSize(){return this.craftingQueueSize}getCookingQueueMaxSize(){return this.cookingQueueSize}increaseCraftingQueueSize(e){this.craftingQueueSize+=e}decreaseCraftingQueueSize(e){this.craftingQueueSize-=e}increaseCookingQueueSize(e){this.cookingQueueSize+=e}decreaseCookingQueueSize(e){this.cookingQueueSize-=e}filterCraftingQueue(e){this.craftingQueue.forEach(n=>{e.includes(n.recipe.id)&&this.cancel(n.id,!0)})}setCraftingType(e){this.craftingType=e}setCookingType(e){this.cookingType=e}getCookingType(){return this.cookingType}getCraftingType(){return this.craftingType}}return e.ngInjectableDef=ce({factory:function(){return new e(De(yf),De(sf),De(Wf),De(pf))},token:e,providedIn:"root"}),e})();var KS=function(e){return e[e.FIRST=0]="FIRST",e[e.SECOND=1]="SECOND",e[e.THIRD=2]="THIRD",e[e.FOURTH=3]="FOURTH",e}({}),jS=function(e){return e[e.TEXT=0]="TEXT",e[e.PROGRESS_BAR=1]="PROGRESS_BAR",e[e.BUTTON=2]="BUTTON",e[e.CHECKBOX=3]="CHECKBOX",e[e.BUTTON_CHECKBOX=4]="BUTTON_CHECKBOX",e[e.TWO_BUTTON=5]="TWO_BUTTON",e[e.DROPDOWN=6]="DROPDOWN",e[e.ICON=7]="ICON",e}({});class QS{constructor(e,n){this.valueType=e,this.value=n}static emptyValue(){return new QS(jS.TEXT,"")}static textValue(e){return new QS(jS.TEXT,e)}static progressValue(e,n=""){return new QS(jS.PROGRESS_BAR,{value:e,label:n})}static buttonValue(e,n){return new QS(jS.BUTTON,{buttonText:e,callbackValue:n})}static buttonCheckboxValue(e,n,l,t,i){return new QS(jS.BUTTON_CHECKBOX,{buttonText:e,callbackValue:n,checkboxState:t,checkboxLabel:l,checkboxCallbackValue:i})}static checkboxValue(e,n,l){return new QS(jS.CHECKBOX,{checkboxState:n,checkboxLabel:e,checkboxCallbackValue:l})}static twoButtonValue(e,n,l,t,i){return new QS(jS.TWO_BUTTON,{button1Text:e,callback1Value:n,textBetween:l,button2Text:t,callback2Value:i})}static dropdownValue(e,n){return new QS(jS.DROPDOWN,{values:e,selected:n})}static iconValue(e){return new QS(jS.ICON,e)}getValueType(){return this.valueType}getValue(){return this.value}}class qS{constructor(e,n,l,t){this.name=e,this.effect=n,this.duration=l,this.cost=t}}class XS{constructor(e,n,l,t,i,s,r,u){this.servicesService=l,this.id=e,this.buildingType=n,this.demolishable=s,this.settings=t,this.stoppable=r,this.working=i,this.level=u,this.size=t.SIZE,this.complexity=t.COMPLEXITY,l&&(this.resourcesService=l.getResourcesService(),this.effectsService=l.getEffectsService(),this.happinessService=l.getHappinessService(),this.gameService=l.getGameService(),this.logService=l.getLogService(),this.modalService=l.getModalService(),this.weatherService=l.getWeatherService())}build(){return this.startProduction(),this}getBuildingId(){return this.id}callback(e){}finishDemolish(){Array.from(this.getCost().entries()).forEach(e=>this.resourcesService.increaseResource(e[0],Math.floor(.3*e[1]),"Demolition"))}fireWorker(){return!!this.working&&(this.resourcesService.fireWorker(),this.working=!1,!0)}getBuildingType(){return this.buildingType}getComplexity(){return this.complexity}getCost(){const e=new Map;return this.settings.COST.forEach(n=>e.set(n.resource,n.amount)),e}getDescription(){return this.settings.DESCRIPTION}hasDetails(){return!0}getDetails(){let e="";(this.getBuildingLevel()>1||this.hasUpgrade())&&(e+="building level: "+this.level+"<br>");let n=0;return 1===this.level||this.buildingType===Ru.CONSTRUCTION?n=this.settings.BASE_POWER:this.settings.UPGRADES&&(n=this.settings.UPGRADES[this.level-2].BASE_POWER),e+="building base power: "+n+"<br>",this.getPower()%1==0?e+="building power: "+this.getPower()+"<br>":e+="building power: "+Uu.round(this.getPower(),2)+"<br>",0!==this.getPermanentEffects()&&(e+="permanent effects: "+this.getPermanentEffects()+"%<br>"),0!==this.getEffects()&&(e+="temporary effects: "+this.getEffects()+"%<br>"),0!==this.getHappinessEffect()&&(e+="happiness effects: "+this.getHappinessEffect()+"%<br>"),0!==this.getWeatherMultiplier()&&(e+="weather multiplier: "+this.getWeatherMultiplier()+"%<br>"),e}getEffects(){return this.effectsService.getBuildingEffectsValue(this.buildingType,!1,this.id)}getPermanentEffects(){return this.effectsService.getBuildingEffectsValue(this.buildingType,!0)}getHappinessEffect(){return this.happinessService.getHappinessEffect()}getWeatherMultiplier(){const e=(this.settings.WEATHER?this.settings.WEATHER:[]).find(e=>this.weatherService.isWeather(e.weather));return e?e.effect:0}getDisplayableEffectsValue(){let e=0;return 1===this.level||this.buildingType===Ru.CONSTRUCTION?e=this.settings.BASE_POWER:this.settings.UPGRADES&&(e=this.settings.UPGRADES[this.level-2].BASE_POWER),Number(Uu.round(100*(this.getPower()/e-1),2))}getPower(){let e=0;return 1===this.level||this.buildingType===Ru.CONSTRUCTION?e=this.settings.BASE_POWER:this.settings.UPGRADES&&(e=this.settings.UPGRADES[this.level-2].BASE_POWER),e*(1+(this.getPermanentEffects()+this.getEffects()+this.getHappinessEffect())/100)*(1+this.getWeatherMultiplier()/100)}isUsedUp(){return!1}getLine(e){switch(e){case KS.FIRST:case KS.SECOND:case KS.THIRD:case KS.FOURTH:return QS.emptyValue()}}getName(){return Uu.titleCase(Uu.prepareBuildingName(this.buildingType))}getSize(){return this.size}buildOnMountain(){return!1}getWorkers(){return this.working?1:0}hireWorker(){return!(this.working||!this.resourcesService.hireWorker()||(this.working=!0,0))}isDemolishable(){return this.demolishable}isStoppable(){return this.stoppable}isComplexManagement(){return!1}getWorkSettings(){return null}setWorkSettings(e){}isWorking(){return this.working}prepareDemolish(){return this.stopProduction(),!0}startProduction(){return!(this.working||!this.resourcesService.hireWorker()||(this.working=!0,0))}stopProduction(){this.working&&(this.resourcesService.fireWorker(),this.working=!1)}tick(e){}isCombinable(){return!1}isSplittable(){return!1}hasBuff(){return this.settings.BUFF}isBuffed(){return!!this.hasBuff()&&this.effectsService.getBuildingEffects(this.buildingType).filter(e=>e.buff===this.id).length>0}getBuff(){if(this.settings.BUFF){const e=new Map;return this.settings.BUFF.cost.forEach(n=>e.set(n.resource,n.amount)),new qS(this.settings.BUFF.name,this.settings.BUFF.effect,this.settings.BUFF.duration,e)}return null}hasUpgrade(){if(this.settings.UPGRADES&&this.settings.UPGRADES.length>=this.getBuildingLevel()){if(this.settings.UPGRADES[this.getBuildingLevel()-1].PREREQUISITES){let e=!0;return this.settings.UPGRADES[this.getBuildingLevel()-1].PREREQUISITES.forEach(n=>{this.gameService.isEnabled(n)||(e=!1)}),e}return!0}return!1}getUpgradeSettings(){return this.settings.UPGRADES&&this.settings.UPGRADES.length>=this.getBuildingLevel()?this.settings.UPGRADES[this.getBuildingLevel()-1]:null}getUpgradeCost(){const e=new Map;return this.hasUpgrade()&&this.settings.UPGRADES[this.level-1].COST.forEach(n=>e.set(n.resource,n.amount)),e}setBuildingLevel(e){this.level=e}getBuildingLevel(){return this.level}getBuildingData(){return null}setBuildingData(e){}}class ZS extends XS{constructor(e=null,n,l,t,i,s,r,u,o,a,c){super(n,l,e,t,!1,!0,!1,a),this.occupants=i,this.progress=s,this.food=r,this.fuel=u,this.clothes=o,this.enabled=c,this.maxSize=t.MAX_OCCUPANTS,this.servicesService&&(this.villageService=e.getVillageService(),this.weatherService=e.getWeatherService(),this.religionService=e.getService(Wu.RELIGION),this.managementService=e.getManagementService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,occupants:this.occupants,maxSize:this.maxSize,progress:this.progress,food:this.food,fuel:this.fuel,clothes:this.clothes,enabled:this.enabled}}getLine(e){switch(e){case KS.FIRST:return QS.textValue("occupants: "+this.occupants+"/"+this.maxSize);case KS.SECOND:return QS.progressValue(this.occupants<this.maxSize?this.progress:-1);case KS.THIRD:return this.food>0||0===this.occupants?QS.emptyValue():QS.progressValue(Math.abs(this.food),"famine");case KS.FOURTH:return this.fuel>=0?this.weatherService.getCurrentTemperature()<10&&this.occupants>0?QS.textValue("heating"):QS.emptyValue():QS.progressValue(Math.abs(this.fuel),"freezing")}}tick(){if(!this.enabled)return;if(this.occupants>0){const e=this.getHousingQuality(this.getBuildingType()),n=this.getBestHousingQualityPossible();e<n&&this.happinessService.registerHouseQualityHappiness((e-n)*this.occupants,this.occupants)}this.clothes<50&&(this.resourcesService.decreaseResource(bu.CLOTHES,1,this.getName()+" clothing")?(this.clothes+=50,this.happinessService.updateFurClothes(this.getBuildingId(),!1)):this.managementService.getFurClothes()&&this.resourcesService.decreaseResource(bu.FUR,1,this.getName()+" clothing")&&(this.clothes+=2,this.happinessService.updateFurClothes(this.getBuildingId(),!0)));let e=!0;for(;this.food<=this.settings.STORAGE-50&&e;){let n=this.resourcesService.getPriorityFood(this.getName());if(0===n&&(e=!1),this.food<0){const e=Math.abs(this.food)/2;n>=e?(n-=e,this.food=0):(this.food-=2*n,n=0)}this.food+=n}const n=Number(this.managementService.getRations());for(let i=0;i<this.occupants;i++)this.food>0?(this.food-=.5*n,1===n?this.happinessService.registerFoodHappiness(-1):this.happinessService.getHappiness()<75&&(2===n||(3===n?this.happinessService.registerFoodHappiness(2):4===n&&this.happinessService.registerFoodHappiness(3)))):(this.food-=.5,this.happinessService.registerFoodHappiness(-3));this.food<0&&0===this.occupants&&(this.food=0),this.food<-100&&this.occupants>0&&(this.occupants-=1,this.food=-1,this.resourcesService.removePeople(1)),this.food<0&&this.occupants>0&&this.religionService.getFaithShield()>0&&(this.food=100*this.religionService.decreaseFaithShield(Math.abs(this.food)/100)),this.fuel<=this.settings.STORAGE-50&&(this.fuel+=this.resourcesService.getFuel(this.getName()));const l=this.weatherService.getCurrentTemperature(),t=this.managementService.getClothesRations();if(l<10&&this.occupants>0){let e=(10-l)*mo/Eo*(this.settings.SIZE/10*(1-this.settings.FUEL_EFFICIENCY));if(this.clothes>0?(this.clothes-=.01*this.occupants*t,e/=t+1,this.clothes<0&&(this.clothes=0),this.happinessService.registerClothesHappiness(t*this.occupants,this.occupants)):this.happinessService.registerClothesHappiness(-3*this.occupants,this.occupants),this.fuel-e<-100&&this.resourcesService.getPeople()+this.resourcesService.getWorkers()>0){const e=[{item:Mu.COLD,chance:Do.getSickness(Mu.COLD).CHANCE},{item:Mu.FLU,chance:Do.getSickness(Mu.FLU).CHANCE},{item:Mu.PNEUMONIA,chance:Do.getSickness(Mu.PNEUMONIA).CHANCE}],n=Yu.randomElement(e,!0);null!=n&&(this.managementService.getLogSickness()&&this.logService.warning(n===Mu.PNEUMONIA?"Villager developed "+Uu.prepareSicknessName(n):"Villager caught a "+Uu.prepareSicknessName(n)),this.resourcesService.addSick(n)),this.fuel=0}else this.fuel-=e;if(this.fuel<0&&this.occupants>0&&this.religionService.getFaithShield()>0)return void(this.fuel=200*this.religionService.decreaseFaithShield(Math.abs(this.food)/200));this.fuel<0&&this.happinessService.registerFreezingHappiness(-1*this.occupants,this.occupants)}else this.fuel<0&&(this.fuel=0),l>10&&(this.clothes>0?(this.clothes-=.005*this.occupants*t,this.clothes<0&&(this.clothes=0),this.happinessService.registerClothesHappiness(t*this.occupants,this.occupants)):this.happinessService.registerClothesHappiness(-3*this.occupants,this.occupants));this.progress<100&&this.occupants<this.maxSize&&this.food>0?(this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):this.occupants<this.maxSize&&100===this.progress?(this.occupants+=1,this.resourcesService.createPeople(1),this.progress=0):this.progress>0&&this.food<=0&&(this.progress-=this.getPower())}build(){return this.resourcesService.increasePopulationCap(this.maxSize),this}prepareDemolish(){if(this.occupants>0){const e=this.villageService.moveOccupants(this,this.occupants,this.food,this.fuel,this.clothes);this.resourcesService.removePeople(e)}return this.resourcesService.decreasePopulationCap(this.maxSize),!0}getDetails(){return"occupants: "+this.occupants+"/"+this.maxSize+"<br>food nutrition: "+Uu.round(this.food,2)+"<br>heating fuel: "+Uu.round(this.fuel,2)+"<br>clothes: "+Uu.round(this.clothes,2)+"<br>"+super.getDetails()}hasDetails(){return!0}stopProduction(){this.enabled=!1}startProduction(){return this.enabled=!0,!0}isStoppable(){return 0===this.occupants||!this.enabled}isWorking(){return this.enabled}getMaxSize(){return this.maxSize}getOccupants(){return this.occupants}addOccupant(){return this.occupants<this.maxSize&&(this.occupants+=1,this.occupants===this.maxSize&&(this.progress=0),!0)}removeOccupant(){return this.occupants>0&&(this.occupants-=1,!0)}addFood(e){this.food+=e}addFuel(e){this.fuel+=e}addClothes(e){this.clothes+=e}fireWorker(){return!1}hireWorker(){return!1}getWorkers(){return 0}setBuildingLevel(e){}getBuildingData(){return{food:this.food,fuel:this.fuel,clothes:this.clothes,enabled:this.enabled}}setBuildingData(e){this.food=e.food,this.fuel=e.fuel,this.clothes=e.clothes,this.enabled=e.enabled}getHousingQuality(e){switch(e){case Ru.HUT:return 1;case Ru.HOUSE:return 2;case Ru.LONGHOUSE:return 3;case Ru.TUDOR_HOUSE:return 4;case Ru.SETTLEMENT:return 5;default:return 0}}getBestHousingQualityPossible(){return this.gameService.isEnabled(Iu.SETTLEMENT)?this.getHousingQuality(Ru.SETTLEMENT):this.gameService.isEnabled(Iu.TUDOR_HOUSE)?this.getHousingQuality(Ru.TUDOR_HOUSE):this.gameService.isEnabled(Iu.LONGHOUSE)?this.getHousingQuality(Ru.LONGHOUSE):this.gameService.isEnabled(Iu.HOUSE)?this.getHousingQuality(Ru.HOUSE):this.getHousingQuality(Ru.HUT)}}class JS extends ZS{constructor(e=null,n=-1,l=0,t=0,i=100,s=100,r=0,u=1,o=!0){super(e,n,Ru.HUT,yo.VILLAGE.HUT,l,t,i,s,r,u,o)}}class eE extends ZS{constructor(e=null,n=-1,l=0,t=0,i=100,s=100,r=0,u=1,o=!0){super(e,n,Ru.HOUSE,yo.VILLAGE.HOUSE,l,t,i,s,r,u,o)}}var nE=function(e){return e.CHOPPING_TREES="chopping trees",e.WAITING_FOR_TREES="waiting for trees",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.TRANSPORTING_LOG="transporting log",e}({});class lE extends XS{constructor(e=null,n=-1,l=0,t=0,i=nE.WAITING_FOR_TREES,s=!1,r=1){super(n,Ru.LOGGERS_HUT,e,yo.FOREST.LOGGERS_HUT,s,!0,!0,r),this.progress=l,this.reservedTrees=t,this.status=i,this.servicesService&&(this.landService=e.getLandService())}getLine(e){switch(e){case KS.FIRST:return QS.emptyValue();case KS.SECOND:return QS.textValue(this.status);case KS.THIRD:return QS.progressValue(this.progress);case KS.FOURTH:return QS.emptyValue()}}tick(){this.working&&(this.status===nE.WAITING_FOR_TREES?this.landService.reduceForest(1)&&(this.status=nE.CHOPPING_TREES):this.status===nE.CHOPPING_TREES?this.progress<100&&(this.progress+=this.getPower(),this.progress>=100&&(this.progress=0,this.status=nE.TRANSPORTING_LOG)):this.status!==nE.TRANSPORTING_LOG&&this.status!==nE.WAITING_FOR_WAREHOUSE_SPACE||(this.resourcesService.increaseResource(bu.LOG,1,this.getName())?(this.landService.increaseLand(1,!0),this.status=this.landService.reduceForest(1)?nE.CHOPPING_TREES:nE.WAITING_FOR_TREES):this.status=nE.WAITING_FOR_WAREHOUSE_SPACE))}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working,reservedTrees:this.reservedTrees}}}class tE extends XS{constructor(e=null,n,l,t,i=1,s=1,r=1,u=0,o=!1,a=null){super(n,Ru.CONSTRUCTION,e,yo.CONSTRUCTION_SITE,o,1===r,!0,r),this.region=l,this.constructing=t,this.buildingComplexity=i,this.buildingSize=s,this.upgradeLevel=r,this.progress=u,this.data=a,this.servicesService&&(this.resourcesService=this.servicesService.getResourcesService(),this.buildingFactoryService=this.servicesService.getService(Wu.BUILDING_FACTORY),this.regionService=this.servicesService.getServiceByRegion(l))}isUpgrade(){return 1!==this.upgradeLevel}getLine(e){switch(e){case KS.FIRST:return QS.emptyValue();case KS.SECOND:return this.isUpgrade()?QS.textValue("upgrading "+Uu.prepareBuildingName(this.constructing)):QS.textValue("constructing "+Uu.prepareBuildingName(this.constructing));case KS.THIRD:return QS.progressValue(this.progress);case KS.FOURTH:return QS.emptyValue()}}tick(){0===this.buildingComplexity&&(this.isUpgrade()?this.regionService.finishUpgrade(this,this.constructing):this.regionService.finishConstruction(this,this.constructing)),this.working&&(this.progress<100?(this.progress+=this.getPower()/this.buildingComplexity,this.progress>100&&(this.progress=100)):this.isUpgrade()?this.regionService.finishUpgrade(this,this.constructing):this.regionService.finishConstruction(this,this.constructing))}build(){return this.startProduction()||0===this.buildingComplexity||this.servicesService.getModalService().info("Couldn't unlock construction. Not enough free workers."),this}toJSON(){return{id:this.id,upgradeLevel:this.upgradeLevel,buildingType:this.buildingType,region:this.region,constructing:this.constructing,buildingComplexity:this.buildingComplexity,progress:this.progress,working:this.working,buildingSize:this.buildingSize,data:this.data}}getComplexity(){return 0}getSize(){return this.buildingSize}finishDemolish(){Array.from(this.buildingFactoryService.createBuildingShell(this.constructing).getCost().entries()).forEach(e=>this.resourcesService.increaseResource(e[0],Math.floor(e[1]*(1-this.progress/100)+e[1]*(this.progress/100*.3)),"Cancel construction"))}getConstructing(){return this.constructing}getBuildingData(){return this.data}}var iE=function(e){return e.PLANTING_TREES="planting trees",e.WAITING_FOR_LAND="waiting for land",e.NO_ENOUGH_LAND="no enough free land",e.FOREST_TOO_BIG="forest too big",e}({});class sE extends XS{constructor(e=null,n=-1,l=0,t=0,i=iE.WAITING_FOR_LAND,s=1,r=!1,u=1){super(n,Ru.FORESTER,e,yo.FOREST.FORESTER,r,!0,!0,u),this.progress=l,this.localStorage=t,this.status=i,this.effectiveness=s,this.servicesService&&(this.landService=e.getLandService(),this.modalService=e.getModalService())}getLine(e){switch(e){case KS.FIRST:return QS.emptyValue();case KS.SECOND:return QS.textValue(this.status);case KS.THIRD:return QS.progressValue(this.progress);case KS.FOURTH:return QS.emptyValue()}}tick(){if(this.working){if(0===this.localStorage){const e=this.landService.getForestOptions();if(e.forestSizeRuleEnabled&&this.landService.getForest()>=e.forestSizeRule)return void(this.status=iE.FOREST_TOO_BIG);if(e.landSizeRuleEnabled&&this.landService.getLand()<=e.landSizeRule)return void(this.status=iE.NO_ENOUGH_LAND);this.landService.reduceLand(this.effectiveness)?(this.localStorage=this.effectiveness,this.status=iE.PLANTING_TREES):this.status=iE.WAITING_FOR_LAND}this.localStorage>0&&(this.progress<100?(this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):(this.landService.increaseForest(this.localStorage,!1),this.progress=0,this.localStorage=0))}}prepareDemolish(){return this.localStorage>0&&this.landService.increaseLand(this.localStorage,!0),super.prepareDemolish()}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,localStorage:this.localStorage,status:this.status,effectiveness:this.effectiveness,working:this.working}}}class rE{constructor(e,n,l,t,i,s=!1,r=!1,u=""){this.enabled=e,this.buildingType=n,this.seasons=l,this.inputSettings=t,this.outputSettings=i,this.customRuleEnabled=r,this.hasCustomRule=s,this.customRuleText=u}static clone(e){let n=null,l=null;return e.inputSettings&&(n=[],e.inputSettings.forEach(e=>{n.push([e[0],e[1]])})),e.outputSettings&&(l=[],e.outputSettings.forEach(e=>{l.push([e[0],e[1],e[2]])})),new rE(e.enabled,e.buildingType,[e.seasons[0],e.seasons[1],e.seasons[2],e.seasons[3]],n,l,e.hasCustomRule,e.customRuleEnabled,e.customRuleText)}}var uE=function(e){return e.FETCHING_INPUT="fetching {in}",e.WAITING_FOR_INPUT="waiting for {wait}",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.PREPARING="preparing {out}",e.PRODUCING_OUTPUT="{prod} {out}",e.TRANSPORTING_OUTPUT="transporting {out}",e}({});class oE extends XS{constructor(e=null,n,l,t,i,s=0,r=[],u=[],o=!1,a=null,c){if(super(n,l,e,t,o,!0,!0,c),this.status=i,this.progress=s,this.inputStorage=r,this.outputStorage=u,this.workSettings=a,this.productionText=t.TEXT,e)if(this.managementService=e.getManagementService(),this.calendarService=e.getCalendarService(),null===this.workSettings){const e=t.INPUT_RESOURCES.map(e=>[e.resource,0]),n=t.OUTPUT_RESOURCES.map(e=>e.resource===bu.COINS?[e.resource,0,!0]:[e.resource,this.resourcesService.getResource(e.resource).getLimit(),!0]);this.workSettings=new rE(!0,l,[!0,!0,!0,!0],e,n)}else if(!this.workSettings.seasons){const e=[!0,!0,!0,!0],n=[];a.outputSettings.forEach(e=>n.push([e[0],e[1],void 0===e[2]||e[2]])),this.workSettings=new rE(!0,l,e,a.inputSettings,n)}}toJSON(){return{id:this.id,level:this.level,workSettings:this.workSettings,buildingType:this.buildingType,progress:this.progress,status:this.status,inputStorage:this.inputStorage,outputStorage:this.outputStorage,working:this.working}}getLine(e){switch(e){case KS.FIRST:return QS.emptyValue();case KS.SECOND:const e=Uu.resourcesArraysDiff(this.settings.INPUT_RESOURCES,this.inputStorage);let n=String(this.status);return e.length>0&&(n=n.replace("{wait}",Uu.prepareResourcesNamesList(e))),n=(n=(n=n.replace("{in}",Uu.prepareResourcesNamesList(this.settings.INPUT_RESOURCES))).replace("{out}",Uu.prepareResourcesNamesList(this.settings.OUTPUT_RESOURCES))).replace("{prod}",this.productionText+" "),QS.textValue(n);case KS.THIRD:return QS.progressValue(this.progress);case KS.FOURTH:return QS.emptyValue()}}isMet(){let e=!0;return this.workSettings.seasons[this.calendarService.getSeason()]||e&&(e=!1),this.workSettings.inputSettings.forEach(n=>{e&&(e=this.resourcesService.getResource(n[0]).amount>n[1])}),this.workSettings.outputSettings.forEach(n=>{e&&(e=n[2]?this.resourcesService.getResource(n[0]).amount<this.resourcesService.getResource(n[0]).limit:this.resourcesService.getResource(n[0]).amount<n[1])}),e}tick(){this.managementService.getComplexWorkers()&&this.workSettings&&this.workSettings.enabled&&(this.isMet()?this.isWorking()||this.hireWorker():this.isWorking()&&this.status!==uE.PRODUCING_OUTPUT&&this.status!==uE.TRANSPORTING_OUTPUT&&this.fireWorker()),this.isWorking()&&(this.outputStorage.length>0?this.collectOutputResources():this.inputStorage.length<this.settings.INPUT_RESOURCES.length&&0===this.outputStorage.length?this.collectInputResources():this.progress<100?(this.status=uE.PRODUCING_OUTPUT,this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):100===this.progress&&(this.progress=0,this.inputStorage=[],this.outputStorage=Uu.copyResourceArray(this.settings.OUTPUT_RESOURCES),this.status=uE.TRANSPORTING_OUTPUT))}collectInputResources(){let e=!0;return this.settings.INPUT_RESOURCES.forEach(n=>{this.inputStorage.find(e=>e.resource===n.resource)||(this.resourcesService.decreaseResource(n.resource,n.amount,this.getName())?this.inputStorage.push({resource:n.resource,amount:n.amount}):e=!1)}),e?(this.status=uE.FETCHING_INPUT,!0):(this.status=uE.WAITING_FOR_INPUT,!1)}collectOutputResources(){let e=!0;return this.outputStorage.forEach(n=>{this.resourcesService.increaseResource(n.resource,n.amount,this.getName())?n.amount=0:e=!1}),this.outputStorage=this.outputStorage.filter(e=>e.amount>0),e?0===this.outputStorage.length?(this.status=uE.FETCHING_INPUT,!0):void 0:(this.status=uE.WAITING_FOR_WAREHOUSE_SPACE,!1)}isComplexManagement(){return!0}getWorkSettings(){return this.workSettings}setWorkSettings(e){this.workSettings=e}}class aE extends oE{constructor(e=null,n=-1,l=0,t=uE.FETCHING_INPUT,i=[],s=[],r=!1,u=null,o=1){super(e,n,Ru.SAWMILL,yo.FOREST.SAWMILL,t,l,i,s,r,u,o)}}class cE extends XS{constructor(e=null,n,l,t,i=1,s=1,r=0,u=!1){super(n,Ru.DECONSTRUCTION,e,yo.DECONSTRUCTION_SITE,u,!1,!0,1),this.region=l,this.deconstructing=t,this.buildingComplexity=i,this.buildingSize=s,this.progress=r,this.servicesService&&(this.regionService=e.getServiceByRegion(l))}getLine(e){switch(e){case KS.FIRST:return QS.emptyValue();case KS.SECOND:return QS.textValue("deconstructing "+Uu.prepareBuildingName(this.deconstructing));case KS.THIRD:return QS.progressValue(this.progress);case KS.FOURTH:return QS.emptyValue()}}tick(){this.working&&(this.progress<100?(this.progress+=this.getPower()/this.buildingComplexity,this.progress>100&&(this.progress=100)):this.regionService.finishDeconstruction(this))}toJSON(){return{id:this.id,buildingType:this.buildingType,region:this.region,deconstructing:this.deconstructing,buildingComplexity:this.buildingComplexity,progress:this.progress,working:this.working,buildingSize:this.buildingSize}}getComplexity(){return 0}getSize(){return this.buildingSize}prepareDemolish(){return!1}finishDemolish(){}getBuildingBeingDemolished(){return this.deconstructing}getDecontructing(){return this.deconstructing}}var hE=function(e){return e.GATHERING_FOOD="gathering food",e.GATHERING_RESOURCES="gathering resources",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.TRANSPORTING="transporting",e}({}),dE=function(e){return e[e.FOOD=0]="FOOD",e[e.RESOURCES=1]="RESOURCES",e}({});class gE extends XS{constructor(e=null,n=-1,l=0,t=hE.GATHERING_FOOD,i=!1,s=dE.FOOD,r=[null,0],u=1){super(n,Ru.GATHERER,e,yo.FOREST.GATHERER,i,!0,!0,u),this.progress=l,this.status=t,this.mode=s,this.storage=r,this.lastFind=null,this.servicesService&&(this.weatherService=e.getWeatherService())}rollForFind(){let e=null;return this.mode===dE.FOOD?e=Yu.randomElement([{item:bu.BERRY,chance:this.settings.BERRY_CHANCE},{item:bu.MUSHROOM,chance:this.settings.MUSHROOM_CHANCE},{item:bu.WHEAT,chance:this.settings.WHEAT_CHANCE},{item:bu.HERBS,chance:this.settings.HERBS_CHANCE}]):this.mode===dE.RESOURCES&&(e=Yu.randomElement([{item:bu.BRUSHWOOD,chance:this.settings.BRUSHWOOD_CHANCE},{item:bu.STONE,chance:this.settings.STONE_CHANCE},{item:bu.LOG,chance:this.settings.LOG_CHANCE},{item:bu.COPPER,chance:this.settings.COPPER_CHANCE},{item:bu.HERBS,chance:this.settings.HERBS_CHANCE}])),e}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working,storage:this.storage,mode:this.mode}}build(){return this.servicesService.getManagementService().getDefaultGathererFood()||(this.mode=dE.RESOURCES,this.status=hE.GATHERING_RESOURCES),super.build()}callback(e){e===dE.FOOD?(this.mode=dE.FOOD,this.progress=0,this.status=hE.GATHERING_FOOD):e===dE.RESOURCES&&(this.mode=dE.RESOURCES,this.progress=0,this.status=hE.GATHERING_RESOURCES)}getLine(e){switch(e){case KS.FIRST:return this.mode===dE.FOOD?QS.buttonValue("gather resources",dE.RESOURCES):QS.buttonValue("gather food",dE.FOOD);case KS.SECOND:return QS.textValue(this.status);case KS.THIRD:return QS.progressValue(this.progress);case KS.FOURTH:return null!=this.lastFind?QS.textValue("last find: "+Uu.prepareResourceName(this.lastFind)):QS.emptyValue()}}tick(e){if(this.working)if(this.storage[1]>0)this.resourcesService.increaseResource(this.storage[0],this.storage[1],this.getName()),this.storage=[null,0],this.setStatus();else if(this.progress<100)this.progress+=this.getPower(),this.progress>100&&(this.progress=100);else if(100===this.progress){this.progress=0;let e=this.rollForFind();if(null!==e&&!this.resourcesService.hasLimit(e))return void(e=null);e?(this.lastFind=e,this.storage=[e,1],this.status=hE.TRANSPORTING):(this.lastFind=bu.NOTHING,this.progress=0)}}setStatus(){this.status=this.mode===dE.FOOD?hE.GATHERING_FOOD:hE.GATHERING_RESOURCES}}var pE=function(e){return e.MINING_STONE="mining stone",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.NO_MORE_RESOURCES="no more resources",e.TRANSPORTING="transporting",e}({});class mE extends XS{constructor(e=null,n=-1,l=0,t=pE.MINING_STONE,i=!1,s=0,r=200,u=1){super(n,Ru.QUARRY,e,yo.MOUNTAINS.QUARRY,i,!0,!0,u),this.progress=l,this.status=t,this.storage=s,this.resources=r,this.servicesService&&(this.gameService=e.getGameService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working,storage:this.storage,resources:this.resources}}build(){return this.startProduction(),this.gameService.enable(Iu.BUILT_QUARRY),this}buildOnMountain(){return!0}getLine(e){switch(e){case KS.FIRST:return QS.textValue("stone: "+this.resources);case KS.SECOND:return QS.textValue(this.status);case KS.THIRD:return QS.progressValue(this.progress);case KS.FOURTH:return QS.emptyValue()}}isStoppable(){return this.resources>0}isUsedUp(){return this.status===pE.NO_MORE_RESOURCES}hasBuff(){return!this.isUsedUp()&&super.hasBuff()}tick(e){this.resources<=0&&(this.status!==pE.NO_MORE_RESOURCES&&this.servicesService.getLogService().warning("Quarry mined all stone"),this.status=pE.NO_MORE_RESOURCES,this.stopProduction()),this.working&&(this.storage>0?this.resourcesService.increaseResource(bu.STONE,this.storage,this.getName())?(this.storage=0,this.status=pE.MINING_STONE):this.status=pE.WAITING_FOR_WAREHOUSE_SPACE:this.progress<100?(this.status=pE.MINING_STONE,this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):100===this.progress&&(this.progress=0,this.resources-=1,this.storage=1,this.status=pE.TRANSPORTING))}}var fE=function(e){return e.RESEARCHING="researching",e.CRAFTING="crafting {craft}",e.WAITING_FOR_WAREHOUSE="waiting for {craft} space",e.NO_RESEARCH="nothing to research",e.NO_CRAFTING="nothing to craft",e}({}),SE=function(e){return e[e.RESEARCH=0]="RESEARCH",e[e.CRAFT=1]="CRAFT",e[e.SWITCH_TO_RESEARCH=2]="SWITCH_TO_RESEARCH",e}({});class EE extends XS{constructor(e=null,n=-1,l=0,t=fE.NO_RESEARCH,i=SE.RESEARCH,s=!1,r=-1,u=null,o=1,a=0){super(n,Ru.WORKSHOP,e,yo.VILLAGE.WORKSHOP,s,!0,!0,o),this.progress=l,this.status=t,this.mode=i,this.storage=a,this.recipe=null,this.icon=null,this.servicesService&&(u?this.recipe=u:r>=0&&(this.recipe=this.servicesService.getRecipeService().getRecipeById(r)),this.craftingService=e.getService(Wu.CRAFTING),this.techService=e.getTechService(),this.gameService=e.getGameService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,mode:this.mode,working:this.working,recipeId:null!==this.recipe?this.recipe.id:-1,storage:this.storage}}build(){this.servicesService.getManagementService().getDefaultWorkshopResearch()||(this.mode=SE.CRAFT),this.startProduction();const e=this.servicesService.getLogService();return this.gameService.isEnabled(Iu.RESEARCH)||(this.gameService.enable(Iu.RESEARCH),e.log("Researching unlocked")),this.gameService.isEnabled(Iu.CRAFTING)||(this.gameService.enable(Iu.CRAFTING),e.log("Crafting unlocked")),this.craftingService.increaseCraftingQueueSize(1),this}prepareDemolish(){return this.craftingService.decreaseCraftingQueueSize(1),super.prepareDemolish()}callback(e){if("switch"===e){if(this.mode===SE.RESEARCH)this.progress=0,this.mode=SE.CRAFT,this.recipe=this.craftingService.getCraftingOrder(),this.icon=null,this.status=null!==this.recipe?fE.CRAFTING:fE.NO_CRAFTING;else if(this.mode===SE.SWITCH_TO_RESEARCH)this.mode=SE.CRAFT,this.status=null!==this.recipe?fE.CRAFTING:fE.NO_CRAFTING;else if(this.mode===SE.CRAFT)if(this.recipe){this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Workshop will switch to research after finishing current craft.");const e=this.modalService.registerForConfirmation().subscribe(n=>{e.unsubscribe(),n&&(this.mode=SE.SWITCH_TO_RESEARCH)})}else this.progress=0,this.mode=SE.RESEARCH,this.status=this.techService.isResearchStarted()?fE.RESEARCHING:fE.NO_RESEARCH}else"cancel"===e&&(this.recipe=null,this.progress=0,this.mode===SE.SWITCH_TO_RESEARCH?(this.mode=SE.RESEARCH,this.status=this.techService.isResearchStarted()?fE.RESEARCHING:fE.NO_RESEARCH):this.status=fE.NO_CRAFTING)}switchToResearch(){this.mode===SE.CRAFT&&(this.recipe?this.mode=SE.SWITCH_TO_RESEARCH:(this.progress=0,this.mode=SE.RESEARCH,this.status=this.techService.isResearchStarted()?fE.RESEARCHING:fE.NO_RESEARCH))}switchToCrafting(){this.mode===SE.RESEARCH?(this.progress=0,this.mode=SE.CRAFT,this.recipe=this.craftingService.getCraftingOrder(),this.icon=null,this.status=null!==this.recipe?fE.CRAFTING:fE.NO_CRAFTING):this.mode===SE.SWITCH_TO_RESEARCH&&(this.mode=SE.CRAFT,this.status=null!==this.recipe?fE.CRAFTING:fE.NO_CRAFTING)}getLine(e){switch(e){case KS.FIRST:return this.firstLine();case KS.SECOND:return this.recipe?(this.icon||(this.prepareIcon(),this.status===fE.CRAFTING?this.icon[0].prefix="crafting ":this.status===fE.WAITING_FOR_WAREHOUSE&&(this.icon[0].prefix="waiting for ",this.icon[0].suffix=" space")),QS.iconValue(this.icon)):QS.textValue(this.status.replace("{craft}","warehouse"));case KS.THIRD:if(this.recipe)return QS.buttonValue("cancel crafting","cancel");{let e="";return this.techService.getCurrentResearch()&&(e=Uu.prepareTechName(this.techService.getCurrentResearch().getTech())),QS.textValue(e)}case KS.FOURTH:return QS.progressValue(this.progress)}}firstLine(){return QS.buttonValue(this.mode===SE.RESEARCH||this.mode===SE.SWITCH_TO_RESEARCH?"craft":"research","switch")}tick(e){if(this.working)if(this.mode===SE.RESEARCH)this.techService.isResearchStarted()?(this.status!==fE.RESEARCHING&&(this.progress=0),this.status=fE.RESEARCHING,this.progress+=this.getPower(),this.progress>=100&&(this.progress=0,this.techService.progressTech(yo.VILLAGE.WORKSHOP.RESEARCH_POWER))):(this.status=fE.NO_RESEARCH,this.progress=0);else if(this.mode===SE.CRAFT||this.mode===SE.SWITCH_TO_RESEARCH)if(null===this.recipe&&(this.recipe=this.craftingService.getCraftingOrder(),this.icon=null,this.progress=0),null===this.recipe)this.status=fE.NO_CRAFTING;else if(this.status===fE.WAITING_FOR_WAREHOUSE){const e=this.resourcesService.getLimit(this.recipe.resource);this.storage>e?(this.storage-=e,this.resourcesService.increaseResource(this.recipe.resource,e,this.getName())):(this.resourcesService.increaseResource(this.recipe.resource,this.storage,this.getName()),this.status=fE.CRAFTING,this.progress=0,this.recipe=null)}else if(this.status=fE.CRAFTING,this.progress<100&&(this.progress+=this.getPower()/this.recipe.craftingDifficulty*yo.VILLAGE.WORKSHOP.CRAFTING_POWER),this.progress>=100){this.progress=100,this.storage=this.recipe.amount;const e=this.resourcesService.getLimit(this.recipe.resource);this.storage>e?(this.storage-=e,this.resourcesService.increaseResource(this.recipe.resource,e,this.getName()),this.status=fE.WAITING_FOR_WAREHOUSE,this.icon=null):this.resourcesService.increaseResource(this.recipe.resource,this.storage,this.getName())?(this.progress=0,this.storage=0,this.recipe=null,this.mode===SE.SWITCH_TO_RESEARCH&&(this.mode=SE.RESEARCH,this.status=this.techService.isResearchStarted()?fE.RESEARCHING:fE.NO_RESEARCH)):(this.status=fE.WAITING_FOR_WAREHOUSE,this.icon=null)}}getRecipe(){return this.recipe}cancelCrafting(){this.recipe=null}willResearch(){return this.mode===SE.RESEARCH||this.mode===SE.SWITCH_TO_RESEARCH}prepareIcon(){this.recipe&&(this.icon=[{name:Uu.prepareResourceName(this.recipe.resource),path:"resources",prefix:"",suffix:""}])}}class vE extends XS{constructor(e=null,n=-1,l=_u.NONE,t=50,i=1){super(n,Ru.WAREHOUSE,e,yo.VILLAGE.WAREHOUSE,!1,!0,!1,i),this.resource=l,this.storage=t,this.servicesService&&(this.modalService=e.getModalService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,resource:this.resource,storage:this.storage}}callback(e){if(this.resource===_u.NONE)this.resource=_u[String(e.target.value)],this.resourcesService.increaseLimit(this.resource,this.storage);else{this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to switch warehouse storage type?<br>All excess resources will be lost");const n=this.modalService.registerForConfirmation().subscribe(l=>{l?(this.resourcesService.decreaseLimit(this.resource,this.storage),this.resource=_u[String(e.target.value)],this.resourcesService.increaseLimit(this.resource,this.storage)):e.target.selectedIndex=this.resource-1,n.unsubscribe()})}}getComplexity(){return super.getComplexity()*(this.storage/this.settings.SIZE)}getSize(){return this.storage}getLine(e){switch(e){case KS.FIRST:return this.firstLine();case KS.SECOND:return QS.textValue("storage: "+this.storage);case KS.THIRD:case KS.FOURTH:return QS.emptyValue()}}firstLine(){const e=[];return e.push(_u[_u.NONE]),e.push(_u[_u.RAW]),e.push(_u[_u.PROCESSED]),e.push(_u[_u.FOOD]),e.push(_u[_u.TOOLS]),QS.dropdownValue(e,_u[this.resource])}prepareDemolish(){return this.resourcesService.decreaseLimit(this.resource,this.storage),!0}startProduction(){return!1}stopProduction(){}fireWorker(){return!1}hireWorker(){return!1}getWorkers(){return 0}getHappinessEffect(){return 0}isCombinable(){return!0}isSplittable(){return!0}combine(e,n){if(this.getBuildingType()===e.getBuildingType())if(this.isCompatible(e))this.doCombine(e,n);else{this.modalService.open(ju.CONFIRM),this.modalService.setModalText(" Are you sure you want to combine "+this.getName()+" of size "+this.getSize()+" with "+e.getName()+" of size "+e.getSize()+"?<br>Resulting "+this.getName()+" of size "+(this.getSize()+e.getSize())+" will store <b>"+Uu.prepareResourceTypeName(this.resource)+" resources</b><br>All resources exceeding decreased limit of <b>"+Uu.prepareResourceTypeName(e.resource)+"</b> will be lost");const l=this.modalService.registerForConfirmation().subscribe(t=>{l.unsubscribe(),t?this.doCombine(e,n):n.finaliseCombine(!1)})}}doCombine(e,n){this.storage+=e.getSize(),this.resource!==_u.NONE&&this.resourcesService.increaseLimit(this.resource,e.getSize()),n.finaliseCombine(!0)}split(e){this.modalService.open(ju.INPUT),this.modalService.setModalText("Set split size (1-"+(this.getSize()-1)+")"),this.modalService.setModalValue("");const n=this.modalService.registerForValueResponse().subscribe(l=>{n.unsubscribe(),null!==l&&(isNaN(l)||0===l||(l>=1&&l<this.getSize()?(this.storage-=Number(l),e.finaliseSplit(new vE(this.servicesService,this.servicesService.getIdService().getNextId(),this.resource,Number(l)).build())):this.modalService.info("Invalid size value!")))})}isCompatible(e){return this.resource===e.resource}}var RE=function(e){return e.HUNTING="hunting",e.TAME="taming animals",e.WAITING_FOR_PASTURE_SPACE="waiting for pasture space",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.TRANSPORTING="transporting",e}({}),OE=function(e){return e[e.HUNTING=0]="HUNTING",e[e.TAMING=1]="TAMING",e}({});class bE extends XS{constructor(e=null,n=-1,l=0,t=RE.HUNTING,i=OE.HUNTING,s=!1,r=0,u=0,o=null,a=1){super(n,Ru.HUNTER_LODGE,e,yo.FOREST.HUNTER_LODGE,s,!0,!0,a),this.progress=l,this.status=t,this.mode=i,this.storage=r,this.storage2=u,this.animal=o,this.lastFind=null,this.servicesService&&(this.weatherService=e.getWeatherService(),this.gameService=e.getGameService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,mode:this.mode,working:this.working,storage:this.storage,storage2:this.storage2,animal:this.animal}}callback(e){"tame"===e?(this.mode=OE.TAMING,this.progress=0,this.storage=0,this.storage2=0,this.status=RE.TAME):(this.mode=OE.HUNTING,this.progress=0,this.storage=0,this.storage2=0,this.lastFind=null,this.status=RE.HUNTING)}getLine(e){switch(e){case KS.FIRST:return this.gameService.isEnabled(Iu.PASTURE)?this.mode===OE.HUNTING?QS.buttonValue("tame animals","tame"):QS.buttonValue("hunt","hunt"):QS.emptyValue();case KS.SECOND:return QS.textValue(this.status);case KS.THIRD:return QS.progressValue(this.progress);case KS.FOURTH:return null!==this.lastFind?QS.textValue("last tamed: "+Uu.prepareResourceName(this.lastFind)):QS.emptyValue()}}tick(e){if(this.working)if(this.mode===OE.HUNTING)this.status=0!==this.storage&&0!==this.storage2?RE.TRANSPORTING:RE.HUNTING,this.status===RE.HUNTING?this.progress<100&&(this.progress+=this.getPower(),this.progress>=100&&(this.progress=0,this.storage<5&&(this.storage+=Yu.randomBetween(1,3),this.storage>5&&(this.storage=5)),this.storage2<5&&(this.storage2+=Yu.randomBetween(0,2),this.storage2>5&&(this.storage2=5)),this.status=RE.TRANSPORTING)):this.status!==RE.TRANSPORTING&&this.status!==RE.WAITING_FOR_WAREHOUSE_SPACE||(0!==this.storage&&this.resourcesService.increaseResource(bu.MEAT,this.storage,this.getName())&&(this.storage=0),0!==this.storage2&&this.resourcesService.increaseResource(bu.FUR,this.storage2,this.getName())&&(this.storage2=0),0!==this.storage&&0!==this.storage2&&(this.status=RE.WAITING_FOR_WAREHOUSE_SPACE));else if(this.mode===OE.TAMING)if(this.status===RE.TAME){if(this.progress<100&&(this.progress+=this.getPower(),this.progress>=100)){this.progress=0;const e=[];this.resourcesService.hasLimit(bu.CHICKEN)&&e.push({item:bu.CHICKEN,chance:6}),this.resourcesService.hasLimit(bu.SHEEP)&&e.push({item:bu.SHEEP,chance:5}),this.resourcesService.hasLimit(bu.PIG)&&e.push({item:bu.PIG,chance:5}),this.resourcesService.hasLimit(bu.COW)&&e.push({item:bu.COW,chance:4}),this.resourcesService.hasLimit(bu.HORSE)&&e.push({item:bu.HORSE,chance:3}),0!==e.length||this.servicesService.getManagementService().getSwitchHunterFromTaming()||(this.logService.log("No more space for animals. Hunter switched to hunting"),this.callback("hunt"));const n=Yu.randomElement(e);null!=n?(this.lastFind=n,this.animal=n,this.status=RE.TRANSPORTING):(this.lastFind=bu.NOTHING,this.animal=null)}}else this.status!==RE.TRANSPORTING&&this.status!==RE.WAITING_FOR_PASTURE_SPACE||this.animal&&(this.resourcesService.increaseResource(this.animal,1,this.getName())?(this.animal=null,this.status=RE.TAME):this.status=RE.WAITING_FOR_PASTURE_SPACE)}}class TE extends XS{constructor(e=null,n=-1,l=0,t=1){super(n,Ru.SHRINE,e,yo.VILLAGE.SHRINE,!1,!0,!1,t),this.progress=l,this.servicesService&&(this.religionService=e.getService(Wu.RELIGION))}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress}}build(){return this.religionService.increaseFaithCap(10),this.servicesService.getGameService().enable(Iu.RELIGION),this}getLine(e){switch(e){case KS.FIRST:case KS.SECOND:return QS.emptyValue();case KS.THIRD:return QS.progressValue(this.progress,"prayers");case KS.FOURTH:return QS.emptyValue()}}prepareDemolish(){return this.religionService.decreaseFaithCap(10),!0}startProduction(){return!0}stopProduction(){}tick(e){const n=this.servicesService.getVillageService().getPopulation();this.progress+=.01*(Math.pow(Math.log(n),2)+1)*this.getPower(),this.progress>100&&(this.progress=0,this.religionService.increaseFaith(1))}fireWorker(){return!1}hireWorker(){return!1}getWorkers(){return 0}}var CE=function(e){return e.WORKING="working",e.BAD_WEATHER="bad weather",e.STOPPED="stopped",e}({});class IE extends XS{constructor(e=null,n=-1,l=0,t=4,i=1,s=CE.WORKING,r=null){super(n,Ru.FARM,e,yo.FIELD.FARM,l>0,!0,!0,i),this.workers=l,this.maxWorkers=t,this.status=s,this.workSettings=r,this.servicesService&&(this.weatherService=e.getWeatherService(),this.calendarService=e.getCalendarService(),this.managementService=e.getManagementService(),this.fieldService=e.getServiceByRegion(Du.FIELD),null===r&&(this.workSettings=new rE(!0,this.getBuildingType(),[!0,!0,!0,!0],null,null)))}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,workers:this.workers,maxWorkers:this.maxWorkers,workSettings:this.workSettings}}callback(e){"hire"===e&&this.workers<this.maxWorkers&&this.resourcesService.hireWorker()?this.workers+=1:"fire"===e&&this.workers>0&&(this.resourcesService.fireWorker(),this.workers-=1)}getLine(e){switch(e){case KS.FIRST:return QS.textValue("workers: "+this.workers+"/"+this.maxWorkers);case KS.SECOND:return QS.textValue(this.status);case KS.THIRD:return QS.twoButtonValue("hire worker","hire","","fire worker","fire");case KS.FOURTH:return QS.emptyValue()}}isWorking(){return this.workers>0}startProduction(){if(0===this.workers){for(;this.workers<this.maxWorkers&&this.resourcesService.hireWorker();)this.workers+=1;if(this.workers>0)return!0}return!1}stopProduction(){this.workers>0&&(this.resourcesService.fireWorker(this.workers),this.workers=0)}isMet(){let e=!0;return this.workSettings.seasons[this.calendarService.getSeason()]||e&&(e=!1),e}tick(e){if(this.managementService.getComplexWorkers()&&this.workSettings&&this.workSettings.enabled&&(this.isMet()?this.workers<this.maxWorkers&&this.hireWorker():this.isWorking()&&this.stopProduction()),this.workers>0)if(this.weatherService.isWeather(Hu.RAIN,Hu.STORM))if(this.weatherService.isWeather(Hu.STORM))this.status=CE.BAD_WEATHER;else{this.status=CE.WORKING;let e=this.workers;for(;e>0;){const n=this.fieldService.getBuildings().filter(e=>e.getBuildingType()===Ru.PASTURE&&e.hasWork());if(0===n.length){this.status=CE.BAD_WEATHER;break}n.forEach(n=>{e>0&&n.work(this.getPower())&&(e-=1)})}}else{this.status=CE.WORKING;let e=this.workers;for(;e>0;){const n=this.fieldService.getBuildings().filter(e=>(e.getBuildingType()===Ru.FIELD||e.getBuildingType()===Ru.ORCHARD||e.getBuildingType()===Ru.PASTURE)&&e.hasWork());if(0===n.length)break;n.forEach(n=>{e>0&&n.work(this.getPower())&&(e-=1)})}}else this.status=CE.STOPPED}fireWorker(){return this.workers>0&&(this.resourcesService.fireWorker(1),this.workers-=1,!0)}hireWorker(){return!!(this.workers<this.maxWorkers&&this.resourcesService.hireWorker())&&(this.workers+=1,!0)}getWorkers(){return this.workers}setBuildingLevel(e){super.setBuildingLevel(e),this.maxWorkers=2+2*e}isComplexManagement(){return!0}getWorkSettings(){return this.workSettings}setWorkSettings(e){this.workSettings=e}}var yE=function(e){return e.PLOW_FIELD="plowing {crop} field",e.SOWING="sowing {crop}",e.GROWING="{crop} growing",e.HARVEST="harvesting {crop}",e.FALLOW="fallow",e}({});class AE extends XS{constructor(e=null,n=-1,l=yo.FIELD.FIELD.SIZE,t=Nu.NONE,i=yE.FALLOW,s=0,r=!0,u=0,o=1){super(n,Ru.FIELD,e,yo.FIELD.FIELD,r,!0,!0,o),this.currentSize=l,this.crop=t,this.status=i,this.progress=s,this.growth=u,this.servicesService&&(this.gameService=e.getGameService(),this.modalService=e.getModalService(),this.weatherService=e.getWeatherService(),this.calendarService=e.getCalendarService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,size:this.currentSize,crop:this.crop,status:this.status,progress:this.progress,working:this.working,growth:this.growth}}getSize(){return this.currentSize}getComplexity(){return super.getComplexity()*(this.getSize()/this.settings.SIZE)}callback(e){if(this.crop===Nu.NONE||this.status===yE.FALLOW)this.crop=Nu[String(e.target.value)],this.status=yE.FALLOW,this.progress=0;else{this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to switch field crop type?<br>All field progress will be lost");const n=this.modalService.registerForConfirmation().subscribe(l=>{l?(this.crop=Nu[String(e.target.value)],this.status=yE.FALLOW,this.progress=0):e.target.selectedIndex=this.crop,n.unsubscribe()})}}finishDemolish(){}getLine(e){switch(e){case KS.FIRST:return QS.textValue("size: "+this.getSize());case KS.SECOND:const e=[];return e.push(Nu[Nu.NONE]),Object.entries(Object(_o.FIELD)).forEach(n=>{_o.getCrop(Nu[n[0]]).PREREQUISITE?this.gameService.isEnabled(_o.getCrop(Nu[n[0]]).PREREQUISITE)&&e.push(n[0]):e.push(n[0])}),QS.dropdownValue(e,Nu[this.crop]);case KS.THIRD:return QS.textValue(this.status.replace("{crop}",Nu[this.crop].toLowerCase()));case KS.FOURTH:return this.status===yE.HARVEST?QS.progressValue(Math.floor(this.growth/(_o.getCrop(this.crop).YIELD_MULTIPLIER*this.getSize())*100),"harvest: "+this.growth):QS.progressValue(this.progress)}}getName(){return this.crop===Nu.NONE?"Field":Nu[this.crop].charAt(0).toUpperCase()+Nu[this.crop].slice(1).toLowerCase()+" field"}startProduction(){return this.working=!0,!0}stopProduction(){this.working=!1}tick(e){if(this.calendarService.getSeason()===of.WINTER&&(this.status=yE.FALLOW,this.growth=0,this.progress=0),this.status===yE.GROWING)if(this.calendarService.getSeason()===of.AUTUMN)this.status=yE.HARVEST,this.growth=Math.floor(this.progress*_o.getCrop(this.crop).YIELD_MULTIPLIER*this.getSize()/100),this.progress=0;else if(this.progress<100){let e=this.getPower()*(1+this.effectsService.getNatureEffectsValue()/100)/_o.getCrop(this.crop).GROWTH;this.weatherService.getCurrentTemperature()<=5?e*=0:this.weatherService.getCurrentTemperature()<=10?e*=.2:this.weatherService.getCurrentTemperature()<=15?e*=.5:this.weatherService.getCurrentTemperature()<=20?e*=.8:this.weatherService.getCurrentTemperature()<=25?e*=1:this.weatherService.getCurrentTemperature()<=27?e*=.8:this.weatherService.getCurrentTemperature()<=29?e*=.6:this.weatherService.getCurrentTemperature()<=31?e*=.4:this.weatherService.getCurrentTemperature()<=33?e*=.2:this.weatherService.getCurrentTemperature()<=35&&(e*=0),this.progress+=e,this.progress>100&&(this.progress=100)}else 100===this.progress&&(this.growth=this.getSize()*_o.getCrop(this.crop).YIELD_MULTIPLIER,this.progress=0,this.status=yE.HARVEST)}work(e){if(this.isWorking()&&this.status!==yE.GROWING&&this.crop!==Nu.NONE){if(this.status===yE.FALLOW&&this.calendarService.getSeason()===of.SPRING)return this.status=yE.PLOW_FIELD,!0;if(this.status===yE.PLOW_FIELD&&(this.calendarService.getSeason()===of.SPRING||this.calendarService.getSeason()===of.SUMMER&&this.servicesService.getManagementService().getPlowInSummer()))return this.progress<100&&(this.progress+=e/this.getSize(),this.progress>=100&&(this.progress=0,this.status=yE.SOWING)),!0;if(this.status===yE.SOWING&&(this.calendarService.getSeason()===of.SPRING||this.calendarService.getSeason()===of.SUMMER))return this.progress+=e/this.getSize(),this.progress>=100&&(this.progress=0,this.status=yE.GROWING),!0;if(this.status===yE.HARVEST){const e=bu[Nu[this.crop]];if(this.resourcesService.hasLimit(e))return this.resourcesService.increaseResource(e,1,this.getName()),this.growth-=1,this.growth<=0&&(this.status=yE.FALLOW),!0}}return!1}fireWorker(){return!1}hireWorker(){return!1}getWorkers(){return 0}hasWork(){return this.isWorking()&&this.status!==yE.GROWING&&this.crop!==Nu.NONE&&(this.status===yE.FALLOW&&this.calendarService.getSeason()===of.SPRING||this.status===yE.PLOW_FIELD&&(this.calendarService.getSeason()===of.SPRING||this.calendarService.getSeason()===of.SUMMER&&this.servicesService.getManagementService().getPlowInSummer())||this.status===yE.SOWING&&(this.calendarService.getSeason()===of.SPRING||this.calendarService.getSeason()===of.SUMMER)||this.status===yE.HARVEST&&this.resourcesService.hasLimit(bu[Nu[this.crop]]))}getDetails(){return this.crop!==Nu.NONE?"growing difficulty: "+_o.getCrop(this.crop).GROWTH+"<br>yield multiplier: "+_o.getCrop(this.crop).YIELD_MULTIPLIER+"<br>"+super.getDetails():super.getDetails()}getHappinessEffect(){return 0}isCombinable(){return!0}isSplittable(){return!0}combine(e,n){if(this.getBuildingType()===e.getBuildingType())if(this.isCompatible(e))this.doCombine(e,n);else{let l=!1;if(this.modalService.open(ju.CONFIRM),this.crop===e.crop?(this.modalService.setModalText(" Are you sure you want to combine "+this.getName()+" of size "+this.getSize()+" with "+e.getName()+" of size "+e.getSize()+"?<br>Resulting "+this.getName()+" of size "+(this.getSize()+e.getSize())+" will be changed to fallow if both are in different stages"),l=!0):(this.modalService.setModalText(" Are you sure you want to combine "+this.getName()+" of size "+this.getSize()+" with "+e.getName()+" of size "+e.getSize()+"?<br>Resulting "+this.getName()+" of size "+(this.getSize()+e.getSize())+" will be changed to fallow"),l=!0),l){const l=this.modalService.registerForConfirmation().subscribe(t=>{l.unsubscribe(),t?this.doCombine(e,n):n.finaliseCombine(!1)})}}}doCombine(e,n){if(this.crop===e.crop)if(this.status===e.status)if(this.status===yE.HARVEST)this.growth+=e.growth;else{let n=this.progress*this.getSize();n+=e.progress*e.getSize(),this.progress=n/(this.getSize()+e.getSize())}else this.status=yE.FALLOW,this.progress=0,this.growth=0;else this.status=yE.FALLOW,this.progress=0,this.growth=0;this.currentSize+=e.getSize(),n.finaliseCombine(!0)}split(e){this.modalService.open(ju.INPUT),this.modalService.setModalText("Set split size (1-"+(this.getSize()-1)+")"),this.modalService.setModalValue("");const n=this.modalService.registerForValueResponse().subscribe(l=>{if(n.unsubscribe(),null!==l&&!isNaN(l)&&0!==l)if(l>=1&&l<this.getSize()){const n=Math.floor(this.growth*l/this.currentSize);this.growth-=n,this.currentSize-=Number(l),e.finaliseSplit(new AE(this.servicesService,this.servicesService.getIdService().getNextId(),Number(l),this.crop,this.status,this.progress,!0,n,this.level).build())}else this.modalService.info("Invalid size value!")})}isCompatible(e){return this.crop===e.crop&&this.status===e.status}}var NE=function(e){return e.FALLOW="fallow",e.PLANTING="planting {crop}",e.GROWING="{crop} growing",e.FRUITING="{crop} fruiting",e.HARVEST="picking {crop}",e.NO_FRUITS="no fruits",e.CLEAR="clear old plants",e}({});class _E extends XS{constructor(e=null,n=-1,l=yo.FIELD.ORCHARD.SIZE,t=Nu.NONE,i=NE.FALLOW,s=0,r=!0,u=0,o=1){super(n,Ru.ORCHARD,e,yo.FIELD.ORCHARD,r,!0,!0,o),this.currentSize=l,this.crop=t,this.status=i,this.progress=s,this.growth=u,this.servicesService&&(this.modalService=e.getModalService(),this.weatherService=e.getWeatherService(),this.calendarService=e.getCalendarService(),this.royalService=e.getRoyalService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,size:this.currentSize,crop:this.crop,status:this.status,progress:this.progress,working:this.working,growth:this.growth}}getSize(){return this.currentSize}getComplexity(){return super.getComplexity()*(this.getSize()/this.settings.SIZE)}callback(e){if(this.crop===Nu.NONE||this.status===NE.FALLOW)this.crop=Nu[String(e.target.value)],this.status=NE.FALLOW,this.progress=0;else{this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to switch orchard plant type?<br>All orchard progress will be lost");const n=this.modalService.registerForConfirmation().subscribe(l=>{n.unsubscribe(),l?(this.crop=Nu[String(e.target.value)],this.status=this.status===NE.FALLOW||this.status===NE.PLANTING?NE.FALLOW:NE.CLEAR,this.progress=0):e.target.selectedIndex=this.prepareParams().indexOf(Nu[this.crop])})}}prepareParams(){const e=[];return e.push(Nu[Nu.NONE]),Object.entries(Object(_o.ORCHARD)).forEach(n=>{_o.getCrop(Nu[n[0]]).PREREQUISITE?this.gameService.isEnabled(_o.getCrop(Nu[n[0]]).PREREQUISITE)&&e.push(n[0]):e.push(n[0])}),e}finishDemolish(){}getLine(e){switch(e){case KS.FIRST:return QS.textValue("size: "+this.getSize());case KS.SECOND:return QS.dropdownValue(this.prepareParams(),Nu[this.crop]);case KS.THIRD:return QS.textValue(this.status.replace("{crop}",Nu[this.crop].toLowerCase()));case KS.FOURTH:return this.status===NE.HARVEST?QS.progressValue(Math.floor(this.growth/(_o.getCrop(this.crop).YIELD_MULTIPLIER*this.getSize())*100),"harvest: "+this.growth):this.status===NE.NO_FRUITS?QS.emptyValue():QS.progressValue(this.progress)}}getName(){return this.crop===Nu.NONE?"Orchard":Nu[this.crop].charAt(0).toUpperCase()+Nu[this.crop].slice(1).toLowerCase()+" orchard"}startProduction(){return this.working=!0,!0}stopProduction(){this.working=!1}tick(e){if(this.crop!==Nu.NONE){if(this.status!==NE.FALLOW&&this.status!==NE.CLEAR&&this.calendarService.getSeason()===of.WINTER){if(this.status===NE.GROWING)return;this.status=NE.NO_FRUITS,this.growth=0,this.progress=0}else this.status!==NE.NO_FRUITS||this.calendarService.getSeason()!==of.SPRING&&this.calendarService.getSeason()!==of.SUMMER||(this.status=NE.FRUITING);if(this.status===NE.GROWING||this.status===NE.FRUITING)if(this.calendarService.getSeason()===of.AUTUMN&&this.status===NE.FRUITING)this.status=NE.HARVEST,this.growth=Math.floor(this.progress*_o.getCrop(this.crop).YIELD_MULTIPLIER*this.getSize()/100),this.progress=0;else if(this.progress<100){let e=this.getPower()*(1+this.effectsService.getNatureEffectsValue()/100);this.status===NE.GROWING?e/=_o.getCrop(this.crop).GROWTH:this.status===NE.FRUITING&&(e/=_o.getCrop(this.crop).FRUITING),this.weatherService.getCurrentTemperature()<=5?e*=0:this.weatherService.getCurrentTemperature()<=10?e*=.2:this.weatherService.getCurrentTemperature()<=15?e*=.5:this.weatherService.getCurrentTemperature()<=20?e*=.8:this.weatherService.getCurrentTemperature()<=25?e*=1:this.weatherService.getCurrentTemperature()<=27?e*=.8:this.weatherService.getCurrentTemperature()<=29?e*=.6:this.weatherService.getCurrentTemperature()<=31?e*=.4:this.weatherService.getCurrentTemperature()<=33?e*=.2:this.weatherService.getCurrentTemperature()<=35&&(e*=0),this.progress+=e,this.progress>100&&(this.progress=100)}else 100===this.progress&&(this.status===NE.GROWING?this.status=NE.FRUITING:this.status===NE.FRUITING&&(this.growth=_o.getCrop(this.crop).YIELD_MULTIPLIER*this.getSize(),this.status=NE.HARVEST),this.progress=0)}}work(e){if(this.isWorking()&&this.status!==NE.GROWING&&this.crop!==Nu.NONE)if(this.status===NE.FALLOW){if(this.calendarService.getSeason()===of.SPRING)return this.status=NE.PLANTING,!0}else{if(this.status===NE.PLANTING)return this.progress<100&&(this.progress+=e/this.getSize(),this.progress>=100&&(this.progress=0,this.status=NE.GROWING)),!0;if(this.status===NE.HARVEST){const e=bu[Nu[this.crop]];if(this.resourcesService.hasLimit(e))return!(e!==bu.APPLE||!this.royalService.pickGoldenApple())||(this.resourcesService.increaseResource(e,1,this.getName()),this.growth-=1,this.growth<=0&&(this.status=NE.NO_FRUITS),!0)}else if(this.status===NE.CLEAR)return this.progress<100&&(this.progress+=e/this.getSize(),this.progress>=100&&(this.progress=0,this.status=NE.FALLOW)),!0}return!1}fireWorker(){return!1}hireWorker(){return!1}getWorkers(){return 0}hasWork(){return this.isWorking()&&this.status!==NE.GROWING&&this.crop!==Nu.NONE&&(this.status===NE.FALLOW&&this.calendarService.getSeason()===of.SPRING||this.status===NE.PLANTING||this.status===NE.CLEAR||this.status===NE.HARVEST&&this.resourcesService.hasLimit(bu[Nu[this.crop]]))}getDetails(){return this.crop!==Nu.NONE?"growing difficulty: "+_o.getCrop(this.crop).GROWTH+"<br>fruiting difficulty: "+_o.getCrop(this.crop).FRUITING+"<br>yield multiplier: "+_o.getCrop(this.crop).YIELD_MULTIPLIER+"<br>"+super.getDetails():super.getDetails()}getHappinessEffect(){return 0}isCombinable(){return!0}isSplittable(){return!0}combine(e,n){if(this.getBuildingType()===e.getBuildingType())if(this.isCompatible(e))this.doCombine(e,n);else{let l=!1;if(this.modalService.open(ju.CONFIRM),this.crop===e.crop?(this.modalService.setModalText(" Are you sure you want to combine "+this.getName()+" of size "+this.getSize()+" with "+e.getName()+" of size "+e.getSize()+"?<br>Resulting "+this.getName()+" of size "+(this.getSize()+e.getSize())+" will be changed to fallow if both are in different stages"),l=!0):(this.modalService.setModalText(" Are you sure you want to combine "+this.getName()+" of size "+this.getSize()+" with "+e.getName()+" of size "+e.getSize()+"?<br>Resulting "+this.getName()+" of size "+(this.getSize()+e.getSize())+" will be changed to fallow"),l=!0),l){const l=this.modalService.registerForConfirmation().subscribe(t=>{l.unsubscribe(),t?this.doCombine(e,n):n.finaliseCombine(!1)})}}}doCombine(e,n){if(this.crop===e.crop)if(this.status===e.status)if(this.status===NE.HARVEST)this.growth+=e.growth;else{let n=this.progress*this.getSize();n+=e.progress*e.getSize(),this.progress=n/(this.getSize()+e.getSize())}else this.status=NE.FALLOW,this.progress=0,this.growth=0;else this.status=NE.FALLOW,this.progress=0,this.growth=0;this.currentSize+=e.getSize(),n.finaliseCombine(!0)}split(e){this.modalService.open(ju.INPUT),this.modalService.setModalText("Set split size (1-"+(this.getSize()-1)+")"),this.modalService.setModalValue("");const n=this.modalService.registerForValueResponse().subscribe(l=>{if(n.unsubscribe(),null!==l&&!isNaN(l)&&0!==l)if(l>=1&&l<this.getSize()){const n=Math.floor(this.growth*l/this.currentSize);this.growth-=n,this.currentSize-=Number(l),e.finaliseSplit(new _E(this.servicesService,this.servicesService.getIdService().getNextId(),Number(l),this.crop,this.status,this.progress,!0,n,this.level).build())}else this.modalService.info("Invalid size value!")})}isCompatible(e){return this.crop===e.crop&&this.status===e.status}}class wE extends oE{constructor(e=null,n=-1,l=0,t=uE.FETCHING_INPUT,i=[],s=[],r=!1,u=null,o=1){super(e,n,Ru.WINDMILL,yo.FIELD.WINDMILL,t,l,i,s,r,u,o)}}class PE extends oE{constructor(e=null,n=-1,l=0,t=uE.FETCHING_INPUT,i=[],s=[],r=!1,u=null,o=1){super(e,n,Ru.BAKERY,yo.VILLAGE.BAKERY,t,l,i,s,r,u,o)}}var xE=function(e){return e.FISHING="fishing",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.TRANSPORTING_FISH="transporting fish",e}({});class kE extends XS{constructor(e=null,n=-1,l=0,t=xE.FISHING,i=!1,s=1){super(n,Ru.FISHERS_HUT,e,yo.SEA.FISHERS_HUT,i,!0,!0,s),this.progress=l,this.status=t,this.status!==xE.FISHING&&this.status!==xE.WAITING_FOR_WAREHOUSE_SPACE&&this.status!==xE.TRANSPORTING_FISH&&(this.status=xE.FISHING)}getLine(e){switch(e){case KS.FIRST:return QS.textValue(this.status);case KS.SECOND:return QS.progressValue(this.progress);case KS.THIRD:case KS.FOURTH:return QS.emptyValue()}}tick(){if(this.working)if(this.status===xE.FISHING){if(this.progress<100&&(this.progress+=this.getPower(),this.progress>=100)){if(this.progress=0,this.servicesService.getRoyalService().catchGoldenFish())return;this.status=xE.TRANSPORTING_FISH}}else if(this.status===xE.TRANSPORTING_FISH||this.status===xE.WAITING_FOR_WAREHOUSE_SPACE){const e=this.resourcesService.increaseResource(bu.FISH,1,this.getName());this.status=e?xE.FISHING:xE.WAITING_FOR_WAREHOUSE_SPACE}}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working}}}class ME extends XS{constructor(e=null,n=-1,l=yo.FORT.BARRACKS.SIZE,t=1){super(n,Ru.BARRACKS,e,yo.FORT.BARRACKS,!1,!0,!1,t),this.barracksSize=l,this.servicesService&&(this.armyService=e.getArmyService(),this.modalService=e.getModalService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,barracksSize:this.barracksSize}}build(){return this.servicesService.getGameService().isEnabled(Iu.ARMY)||this.servicesService.getGameService().enable(Iu.ARMY),this.armyService.increaseBarracks(this.barracksSize),this}prepareDemolish(){return this.armyService.getFreeBarracks()>=this.barracksSize?(this.armyService.decreaseBarracks(this.barracksSize),!0):(this.modalService.info("Your troops would have nowhere to sleep!<br>You cannot demolish barracks right now!"),!1)}getLine(e){switch(e){case KS.FIRST:return QS.textValue("capacity: "+this.barracksSize);case KS.SECOND:case KS.THIRD:case KS.FOURTH:return QS.emptyValue()}}getHappinessEffect(){return 0}getEffects(){return 0}getPermanentEffects(){return 0}}var DE=function(e){return e.TRAINING="training",e.NO_RECRUITS="no recruits",e}({});class LE extends XS{constructor(e=null,n=-1,l=0,t=!1,i=DE.NO_RECRUITS,s=1,r=null){super(n,Ru.TRAINING_SQUARE,e,yo.FORT.TRAINING_SQUARE,t,!0,!0,s),this.progress=l,this.status=i,this.workSettings=r,this.servicesService&&(this.armyService=e.getArmyService(),this.managementService=e.getManagementService(),this.calendarService=e.getCalendarService(),null===this.workSettings)&&(this.workSettings=new rE(!0,this.buildingType,[!0,!0,!0,!0],null,null,!0,!0,"work when there are troops to train"))}customWorkRule(){return this.armyService.hasRecruits()}getWorkSettings(){return this.workSettings}setWorkSettings(e){this.workSettings=e}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,working:this.working,workSettings:this.workSettings}}getLine(e){switch(e){case KS.FIRST:return QS.emptyValue();case KS.SECOND:return QS.textValue(this.status);case KS.THIRD:return this.status===DE.TRAINING?QS.progressValue(this.progress):QS.emptyValue();case KS.FOURTH:return QS.emptyValue()}}tick(e){this.managementService.getComplexWorkers()&&this.workSettings&&this.workSettings.enabled&&(this.isMet()?this.isWorking()||this.hireWorker():!this.isWorking()||this.status===DE.TRAINING&&0!==this.progress||this.fireWorker()),this.working&&(this.armyService.hasRecruits()?(this.status=DE.TRAINING,this.progress<100&&(this.progress+=this.getPower()),this.progress>=100&&(this.progress=0,this.armyService.progressRecruitment(1))):(this.status=DE.NO_RECRUITS,this.progress=0))}isMet(){let e=!0;return this.workSettings.seasons[this.calendarService.getSeason()]||e&&(e=!1),this.workSettings.customRuleEnabled&&e&&(e=this.customWorkRule()),e}isComplexManagement(){return!0}}class FE extends oE{constructor(e=null,n=-1,l=0,t=uE.FETCHING_INPUT,i=[],s=[],r=!1,u=null,o=1){super(e,n,Ru.TANNERY,yo.FOREST.TANNERY,t,l,i,s,r,u,o)}}class UE extends XS{constructor(e=null,n=-1,l=yo.FORT.STOCKADE.DURABILITY,t=yo.FORT.STOCKADE.DURABILITY,i=0,s=!1,r=1){super(n,Ru.STOCKADE,e,yo.FORT.STOCKADE,s,!0,!1,r),this.health=l,this.durability=t,this.progress=i,this.servicesService&&(this.armyService=e.getArmyService(),this.modalService=e.getModalService(),this.worldService=e.getWorldService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,health:this.health,durability:this.durability,progress:this.progress,working:this.working}}build(){return this.worldService.getRegion(0).defense+=yo.FORT.STOCKADE.DEFENSE,this}prepareDemolish(){return this.worldService.getRegion(0).defense-=yo.FORT.STOCKADE.DEFENSE,!0}callback(e){if("repair"===e){this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to repair "+this.getName()+" for 1 log for each durability point missing?");const e=this.modalService.registerForConfirmation().subscribe(n=>{n&&(this.startProduction()||this.modalService.info("No free worker to repair stockade!")),e.unsubscribe()})}else"stop"===e&&this.fireWorker()}getLine(e){switch(e){case KS.FIRST:return QS.textValue("durability: "+this.health+"/"+this.durability);case KS.SECOND:return QS.textValue("defense: "+yo.FORT.STOCKADE.DEFENSE);case KS.THIRD:return this.health<this.durability&&!this.working?QS.buttonValue("repair","repair"):this.health<this.durability&&this.working?QS.buttonValue("stop repair","stop"):QS.emptyValue();case KS.FOURTH:return this.working?QS.progressValue(this.progress):QS.emptyValue()}}tick(e){this.working&&(this.progress<100&&(0===this.progress&&this.resourcesService.decreaseResource(bu.LOG,1,this.getName())?this.progress+=this.getPower():this.progress>0&&(this.progress+=this.getPower())),this.progress>=100&&(this.progress=0,this.health+=1),this.health===this.durability&&this.fireWorker())}getHappinessEffect(){return 0}}class HE extends oE{constructor(e=null,n=-1,l=0,t=uE.FETCHING_INPUT,i=[],s=[],r=!1,u=null,o=1){super(e,n,Ru.COTTON_MILL,yo.FIELD.COTTON_MILL,t,l,i,s,r,u,o)}}class GE extends oE{constructor(e=null,n=-1,l=0,t=uE.FETCHING_INPUT,i=[],s=[],r=!1,u=null,o=1){super(e,n,Ru.TAILOR,yo.VILLAGE.TAILOR,t,l,i,s,r,u,o)}}class BE extends oE{constructor(e=null,n=-1,l=0,t=uE.FETCHING_INPUT,i=[],s=[],r=!1,u=null,o=1){super(e,n,Ru.BREWERY,yo.FIELD.BREWERY,t,l,i,s,r,u,o)}}class WE extends XS{constructor(e=null,n=-1,l=yo.FORT.WOODEN_TOWER.DURABILITY,t=yo.FORT.WOODEN_TOWER.DURABILITY,i=0,s=!1,r=1){super(n,Ru.WOODEN_TOWER,e,yo.FORT.WOODEN_TOWER,s,!0,!1,r),this.health=l,this.durability=t,this.progress=i,this.servicesService&&(this.armyService=e.getArmyService(),this.modalService=e.getModalService(),this.worldService=e.getWorldService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,health:this.health,durability:this.durability,progress:this.progress,working:this.working}}build(){return this.worldService.getRegion(0).defense+=yo.FORT.STOCKADE.DEFENSE,this}prepareDemolish(){return this.worldService.getRegion(0).defense-=yo.FORT.STOCKADE.DEFENSE,!0}callback(e){if("repair"===e){this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to repair "+this.getName()+" for 1 log for each durability point missing?");const e=this.modalService.registerForConfirmation().subscribe(n=>{n&&(this.startProduction()||this.modalService.info("No free worker to repair wooden tower!")),e.unsubscribe()})}else"stop"===e&&this.fireWorker()}getLine(e){switch(e){case KS.FIRST:return QS.textValue("durability: "+this.health+"/"+this.durability);case KS.SECOND:return QS.textValue("defense: "+yo.FORT.WOODEN_TOWER.DEFENSE);case KS.THIRD:return this.health<this.durability&&!this.working?QS.buttonValue("repair","repair"):this.health<this.durability&&this.working?QS.buttonValue("stop repair","stop"):QS.emptyValue();case KS.FOURTH:return this.working?QS.progressValue(this.progress):QS.emptyValue()}}tick(e){this.working&&(this.progress<100&&(0===this.progress&&this.resourcesService.decreaseResource(bu.LOG,1,this.getName())?this.progress+=this.getPower():this.progress>0&&(this.progress+=this.getPower())),this.progress>=100&&(this.progress=0,this.health+=1),this.health===this.durability&&this.fireWorker())}getHappinessEffect(){return 0}}class VE extends XS{constructor(e=null,n=-1,l=yo.FORT.STONE_TOWER.DURABILITY,t=yo.FORT.STONE_TOWER.DURABILITY,i=0,s=!1,r=1){super(n,Ru.STONE_TOWER,e,yo.FORT.STONE_TOWER,s,!0,!1,r),this.health=l,this.durability=t,this.progress=i,this.servicesService&&(this.armyService=e.getArmyService(),this.modalService=e.getModalService(),this.worldService=e.getWorldService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,health:this.health,durability:this.durability,progress:this.progress,working:this.working}}build(){return this.worldService.getRegion(0).defense+=yo.FORT.STOCKADE.DEFENSE,this}prepareDemolish(){return this.worldService.getRegion(0).defense-=yo.FORT.STOCKADE.DEFENSE,!0}callback(e){if("repair"===e){this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to repair "+this.getName()+" for 1 stone for each durability point missing?");const e=this.modalService.registerForConfirmation().subscribe(n=>{n&&(this.startProduction()||this.modalService.info("No free worker to repair stone tower!")),e.unsubscribe()})}else"stop"===e&&this.fireWorker()}getLine(e){switch(e){case KS.FIRST:return QS.textValue("durability: "+this.health+"/"+this.durability);case KS.SECOND:return QS.textValue("defense: "+yo.FORT.STONE_TOWER.DEFENSE);case KS.THIRD:return this.health<this.durability&&!this.working?QS.buttonValue("repair","repair"):this.health<this.durability&&this.working?QS.buttonValue("stop repair","stop"):QS.emptyValue();case KS.FOURTH:return this.working?QS.progressValue(this.progress):QS.emptyValue()}}tick(e){this.working&&(this.progress<100&&(0===this.progress&&this.resourcesService.decreaseResource(bu.STONE,1,this.getName())?this.progress+=this.getPower():this.progress>0&&(this.progress+=this.getPower())),this.progress>=100&&(this.progress=0,this.health+=1),this.health===this.durability&&this.fireWorker())}getHappinessEffect(){return 0}}class zE extends oE{constructor(e=null,n=-1,l=0,t=uE.FETCHING_INPUT,i=[],s=[],r=!1,u=null,o=1){super(e,n,Ru.WINERY,yo.FIELD.WINERY,t,l,i,s,r,u,o),e&&(this.managementService=e.getManagementService())}tick(){this.managementService.getComplexWorkers()&&this.workSettings&&this.workSettings.enabled&&(this.isMet()?this.isWorking()||this.hireWorker():this.isWorking()&&this.fireWorker()),this.working&&(this.outputStorage.length>0?this.collectOutputResources():this.inputStorage.length<this.settings.INPUT_RESOURCES.length&&0===this.outputStorage.length?this.collectInputResources()&&(this.status=uE.PREPARING):this.progress<100&&this.status===uE.PREPARING?(this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):100===this.progress&&this.status===uE.PREPARING?(this.progress=0,this.status=uE.PRODUCING_OUTPUT):this.progress<100&&this.status===uE.PRODUCING_OUTPUT?(this.progress+=100/(30*Eo),this.progress>=100&&(this.progress=100)):100===this.progress&&this.status===uE.PRODUCING_OUTPUT&&(this.progress=0,this.inputStorage=[],this.outputStorage=Uu.copyResourceArray(this.settings.OUTPUT_RESOURCES),this.status=uE.TRANSPORTING_OUTPUT))}}class YE extends XS{constructor(e=null,n=-1,l=0,t=0,i=0,s=!1,r=1){super(n,Ru.TAVERN,e,yo.VILLAGE.TAVERN,s,!0,!0,r),this.progress=l,this.beer=t,this.wine=i,this.servicesService&&(this.resourcesService=e.getResourcesService(),this.happinessService=e.getHappinessService(),this.managementService=e.getManagementService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,beer:this.beer,wine:this.wine,working:this.working}}getLine(e){switch(e){case KS.FIRST:return QS.textValue(this.beer<.001&&this.wine<.001?"waiting for alcohol":this.working?"open":"closed");case KS.SECOND:return QS.emptyValue();case KS.THIRD:return QS.textValue("beer: "+Uu.round(this.beer,2));case KS.FOURTH:return QS.textValue("wine: "+Uu.round(this.wine,2))}}tick(e){const n=this.resourcesService.getTotalPeople(),l=this.managementService.getAlcoholRations();if(this.working&&this.happinessService.getHappiness()<=100&&n>1&&(this.beer>.002||this.wine>.002)){for(let e=n;e>0;e--){const e=Yu.randomBetween(0,1);(0===e||this.wine<.002)&&this.beer>=.002*l?(this.beer-=.005*l,this.happinessService.updateHappiness(Fu.ALCOHOL,Number(l),-1)):(1===e||this.beer<.002)&&this.wine>=.002*l&&(this.wine-=.005*l,this.happinessService.updateHappiness(Fu.ALCOHOL,Number(l),-1))}this.beer<0&&(this.beer=0),this.wine<0&&(this.wine=0)}else this.happinessService.getHappiness()>75&&n>1&&this.happinessService.updateHappiness(Fu.ALCOHOL,0,-1);if(this.working){for(;this.beer<10*Math.ceil(n/100)&&this.resourcesService.decreaseResource(bu.BEER,1,this.getName());)this.beer+=2.5;for(;this.wine<10*Math.ceil(n/100)&&this.resourcesService.decreaseResource(bu.WINE,1,this.getName());)this.wine+=2.5}else this.happinessService.updateHappiness(Fu.ALCOHOL,0,-1)}}class $E extends XS{constructor(e=null,n=-1,l=0,t=!1,i=1){super(n,Ru.GEOLOGIST,e,yo.MOUNTAINS.GEOLOGIST,t,!0,!0,i),this.progress=l,this.servicesService&&(this.gameService=e.getGameService(),this.resourcesService=e.getResourcesService(),this.landService=e.getLandService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,working:this.working}}getLine(e){switch(e){case KS.FIRST:return QS.textValue("looking for ores");case KS.SECOND:return QS.progressValue(this.progress);case KS.THIRD:return QS.textValue(this.lastFind?"last find: "+Uu.prepareResourceName(this.lastFind)+" deposit":"last find: nothing");case KS.FOURTH:return QS.emptyValue()}}tick(e){if(this.working)if(this.progress<100)this.progress+=this.getPower(),this.progress>100&&(this.progress=100);else{const e=[];if(this.landService.getOre(bu.COAL)<50&&e.push({item:bu.COAL,chance:this.settings.COAL_CHANCE}),this.landService.getOre(bu.COPPER_ORE)<50&&e.push({item:bu.COPPER_ORE,chance:this.settings.COPPER_CHANCE}),this.landService.getOre(bu.TIN_ORE)<50&&e.push({item:bu.TIN_ORE,chance:this.settings.TIN_CHANCE}),this.gameService.isEnabled(Iu.GOLD)&&this.landService.getOre(bu.GOLD_ORE)<50&&e.push({item:bu.GOLD_ORE,chance:this.settings.GOLD_CHANCE}),this.gameService.isEnabled(Iu.SILVER)&&this.landService.getOre(bu.SILVER_ORE)<50&&e.push({item:bu.SILVER_ORE,chance:this.settings.SILVER_CHANCE}),this.gameService.isEnabled(Iu.IRON)&&this.landService.getOre(bu.IRON_ORE)<50&&e.push({item:bu.IRON_ORE,chance:this.settings.IRON_CHANCE}),e.length>0){this.progress=0;const n=Yu.randomElement(e);n?(this.landService.increaseOre(n,1),this.lastFind=n):this.lastFind=null}}}}class KE extends oE{constructor(e=null,n=-1,l=0,t=uE.FETCHING_INPUT,i=[],s=[],r=!1,u=null,o=1){super(e,n,Ru.STONEMASON,yo.MOUNTAINS.STONEMASON,t,l,i,s,r,u,o)}}var jE=function(e){return e.MINING="mining {res}",e.WAITING_FOR_SELECTION="waiting for ore selection",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.NO_MORE_RESOURCES="no more {res}",e.TRANSPORTING="transporting {res}",e}({});class QE extends XS{constructor(e=null,n=-1,l=0,t=jE.WAITING_FOR_SELECTION,i=!1,s=0,r=200,u=bu.NOTHING,o=1){super(n,Ru.PIT_MINE,e,yo.MOUNTAINS.PIT_MINE,i,!0,!0,o),this.progress=l,this.status=t,this.storage=s,this.resources=r,this.ore=u,this.servicesService&&(this.modalService=e.getModalService(),this.landService=e.getLandService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working,storage:this.storage,resources:this.resources,ore:this.ore}}callback(e){if(this.ore===bu.NOTHING)if(this.landService.hasOre(bu[String(e.target.value).replace(" ","_")],20)){this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to mine "+Uu.prepareResourceName(bu[String(e.target.value).replace(" ","_")])+" in this mine?");const n=this.modalService.registerForConfirmation().subscribe(l=>{l?(this.landService.decreaseOre(bu[String(e.target.value).replace(" ","_")],20),this.ore=bu[String(e.target.value).replace(" ","_")],this.status=jE.MINING,this.progress=0):e.target.selectedIndex=this.ore,n.unsubscribe()})}else this.modalService.info("Not enough "+Uu.prepareResourceName(bu[String(e.target.value).replace(" ","_")])+" deposits available<br>20 "+Uu.prepareResourceName(bu[String(e.target.value).replace(" ","_")])+" deposits required to start mining."),e.target.selectedIndex=this.ore}buildOnMountain(){return!0}isUsedUp(){return this.status===jE.NO_MORE_RESOURCES}hasBuff(){return!this.isUsedUp()&&super.hasBuff()}getLine(e){switch(e){case KS.FIRST:return this.ore!==bu.NOTHING?QS.textValue(Uu.prepareResourceName(this.ore).toLowerCase()+": "+this.resources):QS.emptyValue();case KS.SECOND:return QS.textValue(this.status.replace("{res}",Uu.prepareResourceName(this.ore).toLowerCase()));case KS.THIRD:return QS.progressValue(this.progress);case KS.FOURTH:if(this.ore===bu.NOTHING){const e=[];return e.push(bu[bu.NOTHING].replace("_"," ")),e.push(bu[bu.COAL].replace("_"," ")),e.push(bu[bu.GOLD_ORE].replace("_"," ")),e.push(bu[bu.SILVER_ORE].replace("_"," ")),e.push(bu[bu.COPPER_ORE].replace("_"," ")),e.push(bu[bu.TIN_ORE].replace("_"," ")),e.push(bu[bu.IRON_ORE].replace("_"," ")),QS.dropdownValue(e,bu[this.ore])}return QS.emptyValue()}}isStoppable(){return this.resources>0}tick(e){if(this.ore!==bu.NOTHING){if(this.resources<=0&&0===this.storage&&(this.status!==jE.NO_MORE_RESOURCES&&this.servicesService.getLogService().warning("Pit mine mined all "+Uu.prepareResourceName(this.ore)),this.status=jE.NO_MORE_RESOURCES,this.stopProduction()),!this.working)return;this.storage>0?this.resourcesService.increaseResource(this.ore,this.storage,this.getName())?(this.storage=0,Yu.chance(this.settings.GEM_CHANCE)&&this.resourcesService.increaseResource(bu.GEMS,1,this.getName()),this.status=jE.MINING):this.status=jE.WAITING_FOR_WAREHOUSE_SPACE:this.progress<100?(this.status=jE.MINING,this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):100===this.progress&&(this.progress=0,this.resources-=1,this.storage=1,this.status=jE.TRANSPORTING)}}}var qE=function(e){return e[e.NONE=0]="NONE",e[e.COW=1]="COW",e[e.CHICKEN=2]="CHICKEN",e[e.PIG=3]="PIG",e[e.HORSE=4]="HORSE",e[e.SHEEP=5]="SHEEP",e}({});class XE extends XS{constructor(e=null,n=-1,l=yo.FIELD.PASTURE.SIZE,t=qE.NONE,i=0,s=0,r=!0,u=0,o=0,a=0,c=!1,h=1){super(n,Ru.PASTURE,e,yo.FIELD.PASTURE,r,!0,!0,h),this.currentSize=l,this.animal=t,this.progress=i,this.produceProgress=s,this.animals=u,this.food=o,this.chores=a,this.autoButcher=c,this.servicesService&&(this.modalService=e.getModalService(),this.weatherService=e.getWeatherService(),this.calendarService=e.getCalendarService(),this.fieldService=e.getService(Wu.FIELD))}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,size:this.currentSize,animal:this.animal,progress:this.progress,produceProgress:this.produceProgress,working:this.working,animals:this.animals,food:this.food,chores:this.chores,autoButcher:this.autoButcher}}build(){return this.resourcesService.getResource(bu.CHICKEN).isVisible()||(this.resourcesService.makeVisible(bu.CHICKEN),this.logService.log("New resource discovered: "+Uu.prepareResourceName(bu.CHICKEN)),this.resourcesService.makeVisible(bu.SHEEP),this.logService.log("New resource discovered: "+Uu.prepareResourceName(bu.SHEEP)),this.resourcesService.makeVisible(bu.COW),this.logService.log("New resource discovered: "+Uu.prepareResourceName(bu.COW)),this.resourcesService.makeVisible(bu.PIG),this.logService.log("New resource discovered: "+Uu.prepareResourceName(bu.PIG)),this.resourcesService.makeVisible(bu.HORSE),this.logService.log("New resource discovered: "+Uu.prepareResourceName(bu.HORSE))),this.resourcesService.updateAnimals(),super.build()}getSize(){return this.currentSize}getComplexity(){return super.getComplexity()*(this.getSize()/this.settings.SIZE)}findButcher(){return this.fieldService.getBuildings().filter(e=>e.getBuildingType()===Ru.BUTCHER).map(e=>e).sort((e,n)=>e.getAnimalsNumber()-n.getAnimalsNumber())[0]}butcher(e=!0){const n=this.findButcher();n?n.addAnimalToButcher(this.getResourceType())&&(this.resourcesService.addAnimalUsedData(this.getResourceType(),"Butcher",1),this.decreaseAnimal(1)):e||this.modalService.info("No butcher available or their work queue is full")}callback(e){if("butcher"===e&&this.animals>0)this.butcher(!1);else if("x"===e)this.autoButcher=!this.autoButcher;else if(this.animal===qE.NONE||0===this.animals)this.animal!==qE.NONE&&this.resourcesService.decreaseResourceLimit(this.getResourceType(),this.getMaxAnimals()),this.animal=qE[String(e.target.value)],this.progress=0,this.animal!==qE.NONE&&this.resourcesService.increaseResourceLimit(this.getResourceType(),this.getMaxAnimals()),this.resourcesService.updateAnimals();else{this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to change animals?<br>All current animals will be moved to other pastures and if there is no enough space they will be lost");const n=this.modalService.registerForConfirmation().subscribe(l=>{l?(this.resourcesService.decreaseResourceLimit(this.getResourceType(),this.getMaxAnimals()),this.moveAnimals(this.animals),this.animal=qE[String(e.target.value)],this.progress=0,this.animals=0,this.animal!==qE.NONE&&this.resourcesService.increaseResourceLimit(this.getResourceType(),this.getMaxAnimals()),this.resourcesService.updateAnimals()):e.target.selectedIndex=this.animal-1,n.unsubscribe()})}}finishDemolish(){}prepareDemolish(){return this.stopProduction(),this.animal!==qE.NONE&&(this.moveAnimals(this.animals),this.resourcesService.decreaseResourceLimit(this.getResourceType(),this.getMaxAnimals())),!0}getLine(e){switch(e){case KS.FIRST:return this.animal!==qE.NONE?QS.textValue(qE[this.animal].toLowerCase()+": "+this.animals+"/"+this.getMaxAnimals()):QS.emptyValue();case KS.SECOND:if(this.animals>0&&this.food<0)return QS.progressValue(Math.abs(this.food),"famine");{const e=[];return e.push(qE[qE.NONE]),e.push(qE[qE.CHICKEN]),e.push(qE[qE.SHEEP]),e.push(qE[qE.COW]),e.push(qE[qE.PIG]),e.push(qE[qE.HORSE]),QS.dropdownValue(e,qE[this.animal])}case KS.THIRD:return this.animals>0&&this.findButcher()?QS.buttonCheckboxValue("butcher","butcher","auto butcher",this.autoButcher,"x"):QS.emptyValue();case KS.FOURTH:return QS.emptyValue()}}getName(){return this.animal===qE.NONE?"Pasture":qE[this.animal].charAt(0).toUpperCase()+qE[this.animal].slice(1).toLowerCase()+" pasture"}startProduction(){return this.working=!0,!0}stopProduction(){this.working=!1}tick(e){if(this.food<0&&this.calendarService.getSeason()!==of.WINTER&&(this.food=0),this.autoButcher&&this.animals>0&&this.animals===this.getMaxAnimals()&&this.butcher(),this.animals>0?this.calendarService.getSeason()===of.WINTER?(this.food-=.0015*this.getAnimalSettings().SIZE*this.animals,this.food<=-100&&(this.food=0,this.decreaseAnimal(1))):(this.food-=2e-4*this.getAnimalSettings().SIZE*this.animals,this.food<=-100&&(this.food=0,this.decreaseAnimal(1))):this.food<0&&(this.food=0),this.food>=0&&this.animals>1&&this.chores<this.getSize()&&(this.animals<this.getMaxAnimals()||this.resourcesService.hasLimit(this.getResourceType()))&&this.progress<100&&(this.progress+=.05/(10/this.getAnimalSettings().REPRODUCTION_SPEED)*this.animals*(1+this.effectsService.getNatureEffectsValue()/100),this.progress>=100&&(this.animals<this.getMaxAnimals()||this.resourcesService.hasLimit(this.getResourceType()))&&(this.progress=0,this.animals<this.getMaxAnimals()?(this.resourcesService.addAnimalProducedData(this.getResourceType(),"Pasture",1),this.increaseAnimal(1)):this.resourcesService.hasLimit(this.getResourceType())&&this.resourcesService.increaseResource(this.getResourceType(),1,"Pasture",!0))),(this.animal===qE.CHICKEN||this.animal===qE.COW||this.animal===qE.SHEEP)&&(0===this.animals&&(this.produceProgress=0),this.produceProgress<100&&this.chores<this.getSize()&&(this.produceProgress+=.2*this.animals*(1+this.effectsService.getNatureEffectsValue()/100),this.produceProgress>=100)))if(this.produceProgress=0,this.animal===qE.CHICKEN){if(this.servicesService.getRoyalService().layGoldenEgg())return;this.resourcesService.increaseResource(bu.EGG,1,this.getName())}else if(this.animal===qE.COW)this.resourcesService.increaseResource(bu.MILK,1,this.getName());else if(this.animal===qE.SHEEP){if(this.servicesService.getRoyalService().getGoldenFleece())return;this.resourcesService.increaseResource(bu.WOOL,1,this.getName())}this.chores+=.05*this.animals,this.chores>2*this.getSize()&&(this.chores=2*this.getSize())}work(e){return this.food<100&&0===this.resourcesService.hasResource(bu.HAY,1,this.getName())?(this.resourcesService.decreaseResource(bu.HAY,1,this.getName())&&(this.food+=10),!0):this.chores>=1&&(this.chores-=e/yo.FIELD.FARM.BASE_POWER,this.chores<0&&(this.chores=0),!0)}fireWorker(){return!1}hireWorker(){return!1}getWorkers(){return 0}hasWork(){return!!this.isWorking()&&(this.food<50&&0===this.resourcesService.hasResource(bu.HAY,1,this.getName())||this.chores>=1)}getDetails(){return this.animal!==qE.NONE?"pasture size: "+Uu.round(this.getSize(),0)+"<br>progress: "+Uu.round(this.progress,2)+"%<br>produce progress: "+Uu.round(this.produceProgress,2)+"%<br>food: "+Uu.round(this.food,2)+"<br>chores: "+Uu.round(this.chores,2)+"<br>"+Uu.prepareResourceName(this.getResourceType())+" meat: "+this.getAnimalSettings().MEAT+"<br>"+Uu.prepareResourceName(this.getResourceType())+" fur: "+this.getAnimalSettings().FUR+"<br>"+Uu.prepareResourceName(this.getResourceType()).toLowerCase()+" size: "+this.getAnimalSettings().SIZE+"<br>"+super.getDetails():super.getDetails()}getHappinessEffect(){return 0}isCombinable(){return!0}isSplittable(){return!0}moveAnimals(e){const n=this.fieldService.getBuildings().filter(e=>e.getBuildingType()===Ru.PASTURE&&e!==this&&e.getAnimals()<e.getMaxAnimals()).map(e=>e).filter(e=>e.getResourceType()===this.getResourceType());for(const l of n){for(;e>0&&l.getAnimals()<l.getMaxAnimals();)l.increaseAnimal(1),e-=1,this.decreaseAnimal(1);if(0===e)return}}getResourceType(){return this.animal!==qE.NONE?bu[qE[this.animal]]:bu.NOTHING}getAnimals(){return this.animals}getAnimalSettings(){return Ao.getResource(this.getResourceType())}getMaxAnimals(){return this.getResourceType()!==bu.NOTHING?Math.floor(this.currentSize/this.getAnimalSettings().SIZE):0}increaseAnimal(e){this.animals+=e,this.resourcesService.updateAnimals()}decreaseAnimal(e){this.animals-=e,this.resourcesService.updateAnimals()}combine(e,n){if(this.getBuildingType()===e.getBuildingType())if(this.isCompatible(e))this.doCombine(e,n);else{this.modalService.open(ju.CONFIRM),this.modalService.setModalText(" Are you sure you want to combine "+this.getName()+" of size "+this.getSize()+" with "+e.getName()+" of size "+e.getSize()+"?<br>Resulting "+this.getName()+" of size "+(this.getSize()+e.getSize())+" will keep animals");const l=this.modalService.registerForConfirmation().subscribe(t=>{l.unsubscribe(),t?this.doCombine(e,n):n.finaliseCombine(!1),this.resourcesService.updateAnimals()})}}doCombine(e,n){this.currentSize+=e.getSize(),e.animal===this.animal?this.increaseAnimal(e.getAnimals()):this.animal===qE.NONE&&e.animal!==qE.NONE?(this.animal=e.animal,this.increaseAnimal(e.getAnimals())):e.moveAnimals(e.getAnimals()),e.animals=0,n.finaliseCombine(!0)}split(e){this.modalService.open(ju.INPUT),this.modalService.setModalText("Set new pasture size (1-"+(this.getSize()-1)+")"),this.modalService.setModalValue("");const n=this.modalService.registerForValueResponse().subscribe(l=>{if(n.unsubscribe(),null!==l){if(!isNaN(l)&&0!==l)if(l>=1&&l<this.getSize()){this.currentSize-=Number(l);const n=new XE(this.servicesService,this.servicesService.getIdService().getNextId(),Number(l)).build();e.finaliseSplit(n),n.animal=this.animal,this.animals>this.getMaxAnimals()&&(this.moveAnimals(this.animals-this.getMaxAnimals()),this.animals>this.getMaxAnimals()&&this.decreaseAnimal(this.animals-this.getMaxAnimals()))}else this.modalService.info("Invalid size value!");this.resourcesService.updateAnimals()}})}isCompatible(e){return this.animal===e.animal}}var ZE=function(e){return e.BUTCHERING="butchering {animal}",e.WAITING_FOR_ANIMALS="waiting for animals",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.TRANSPORTING="transporting goods",e}({});class JE extends XS{constructor(e=null,n=-1,l=ZE.WAITING_FOR_ANIMALS,t=0,i=!0,s=0,r=0,u=[],o=!0,a=1){super(n,Ru.BUTCHER,e,yo.FIELD.BUTCHER,i,!0,!0,a),this.status=l,this.progress=t,this.outputStorage=s,this.outputFurStorage=r,this.animals=u,this.discardExcessFur=o}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,status:this.status,progress:this.progress,working:this.working,outputStorage:this.outputStorage,animals:this.animals,discardExcessFur:this.discardExcessFur,outputFurStorage:this.outputFurStorage}}callback(e){"toggleDiscard"===e&&(this.discardExcessFur=!this.discardExcessFur)}getLine(e){switch(e){case KS.FIRST:return QS.textValue(this.animals.length>0?this.status.replace("{animal}",Uu.prepareResourceName(this.animals[0])):this.status);case KS.SECOND:return QS.progressValue(this.progress);case KS.THIRD:return QS.textValue("queue: "+this.animals.length+"/10");case KS.FOURTH:return QS.checkboxValue("discard excess fur",this.discardExcessFur,"toggleDiscard")}}getAnimalsNumber(){return this.animals.length}getFreeSpace(){return 10-this.getAnimalsNumber()}addAnimalToButcher(e){return this.animals.length<10&&(this.animals.push(e),!0)}tick(e){if(this.working)if(this.animals.length>0&&0===this.outputStorage&&0===this.outputFurStorage)if(this.status=ZE.BUTCHERING,this.progress<100)this.progress+=this.getPower()/Ao.getResource(this.animals[0]).BUTCHERING_DIFFICULTY,this.progress>100&&(this.progress=100);else{this.status=ZE.TRANSPORTING,this.progress=0;const e=this.animals.shift();this.outputStorage=Ao.getResource(e).MEAT,this.resourcesService.increaseResource(bu.MEAT,this.outputStorage,this.getName())?this.outputStorage=0:this.status=ZE.WAITING_FOR_WAREHOUSE_SPACE,this.outputFurStorage=Ao.getResource(e).FUR,this.resourcesService.increaseResource(bu.FUR,this.outputFurStorage,this.getName())?this.outputFurStorage=0:this.discardExcessFur?this.outputFurStorage=0:this.status=ZE.WAITING_FOR_WAREHOUSE_SPACE}else{if(0!==this.outputStorage){const e=this.resourcesService.getResource(bu.MEAT).getFreeSpace(),n=Math.max(Math.min(e,this.outputStorage),0);this.resourcesService.increaseResource(bu.MEAT,n,this.getName())&&(this.outputStorage-=n,0===this.outputFurStorage&&0===this.outputStorage&&(this.status=ZE.WAITING_FOR_ANIMALS))}if(0!==this.outputFurStorage){const e=this.resourcesService.getResource(bu.FUR).getFreeSpace(),n=Math.max(Math.min(e,this.outputFurStorage),0);this.resourcesService.increaseResource(bu.FUR,n,this.getName())&&(this.outputFurStorage-=n,0===this.outputFurStorage&&0===this.outputStorage&&(this.status=ZE.WAITING_FOR_ANIMALS)),this.discardExcessFur&&(this.outputFurStorage=0,this.status=ZE.WAITING_FOR_ANIMALS)}0===this.outputStorage&&0===this.outputFurStorage&&(this.status=ZE.WAITING_FOR_ANIMALS)}}getDetails(){return super.getDetails()+"local storage:<br>&nbsp;&nbsp;meat: "+this.outputStorage+"<br>&nbsp;&nbsp;fur: "+this.outputFurStorage}}class ev extends oE{constructor(e=null,n=-1,l=0,t=uE.FETCHING_INPUT,i=[],s=[],r=!1,u=null,o=1){super(e,n,Ru.MINT,yo.MOUNTAINS.MINT,t,l,i,s,r,u,o)}}class nv extends XS{constructor(e,n,l,t,i,s,r,u,o){super(e,n,l,t,i>0,r,u,o),this.servicesService=l,this.workers=i,this.maxWorkers=s}fireWorker(){return this.workers>0&&(this.resourcesService.fireWorker(1),this.workers-=1,!0)}hireWorker(){return!!(this.workers<this.maxWorkers&&this.resourcesService.hireWorker())&&(this.workers+=1,!0)}getWorkers(){return this.workers}isWorking(){return this.workers>0}startProduction(){if(0===this.workers){for(;this.workers<this.maxWorkers&&this.resourcesService.hireWorker();)this.workers+=1;if(this.workers>0)return!0}return!1}stopProduction(){this.workers>0&&(this.resourcesService.fireWorker(this.workers),this.workers=0)}}var lv=function(e){return e[e.CONSTRUCTION=0]="CONSTRUCTION",e[e.BUILT=1]="BUILT",e[e.ABDICATED=2]="ABDICATED",e[e.USED=3]="USED",e}({});let tv=(()=>{class e extends nv{constructor(n,l,t,i,s,r,u,o,a,c){super(n,l,t,i,c,e.maxWorkers,!1,!0,1),this.progress=s,this.maxProgress=r,this.stage=u,this.state=o,this.year=a,this.prepareIcons()}toJSON(){return{id:this.id,buildingType:this.buildingType,progress:this.progress,maxProgress:this.maxProgress,stage:this.stage,state:this.state,year:this.year,workers:this.workers}}prepareIcons(){this.iconsValue=[],this.settings.STAGES[this.stage]&&this.settings.STAGES[this.stage].cost.forEach(e=>this.iconsValue.push({name:bu[e.resource],path:"resources",prefix:e.amount,suffix:""}))}callback(e){if("add"===e){const e=this.settings.STAGES[this.stage];if(void 0===this.settings.STAGES[this.stage]&&this.maxProgress<100)return void(this.maxProgress=100);const n=new Map;e.cost.forEach(e=>n.set(e.resource,e.amount)),this.resourcesService.decreaseResources(n,this.getName(),!0)&&(this.stage+=1,this.maxProgress+=e.progress,this.maxProgress>100&&(this.maxProgress=100),this.prepareIcons())}else if("abdicate"===e){this.modalService.open(ju.ABDICATION);const e=this.modalService.registerForAbdication().subscribe(n=>{e.unsubscribe(),n&&(this.state=lv.ABDICATED,this.servicesService.getGameService().incrementAbdicationLevel())})}else"hire"===e?this.hireWorker():"fire"===e&&this.fireWorker()}forceAbdicate(){this.state===lv.BUILT&&(this.state=lv.ABDICATED,this.servicesService.getGameService().incrementAbdicationLevel())}getName(){return this.progress>=100?super.getName():super.getName()+" construction"}getLine(e){switch(e){case KS.FIRST:return this.state===lv.CONSTRUCTION?QS.progressValue(this.progress,Uu.round(this.progress,2)+"% / "+this.maxProgress+"%"):QS.textValue("built in year "+this.year);case KS.SECOND:return this.state===lv.CONSTRUCTION?QS.iconValue(this.iconsValue):this.state===lv.BUILT?QS.buttonValue(this.getAbdicationText(),"abdicate"):QS.emptyValue();case KS.THIRD:return this.maxProgress<100?QS.buttonValue("add materials","add"):QS.emptyValue();case KS.FOURTH:return this.state===lv.CONSTRUCTION?QS.twoButtonValue("hire worker","hire",this.workers+"/"+this.maxWorkers,"fire worker","fire"):QS.emptyValue()}}getAbdicationText(){return"abdicate"}tick(e){this.isWorking()&&(this.progress>=100&&(this.stopProduction(),this.addPermanentEffect(),this.progress=100,this.state=lv.BUILT,this.year=this.servicesService.getCalendarService().getYear(),this.getBuildingType()===Ru.ASCENSION_TEMPLE&&this.servicesService.getLogService().mystical("As you enter the temple you have strange feeling of many eyes watching you, <br>however there is nobody there. At the end of a big hall you find a golden altar.<br>This is it, your whole life lead you here. You feel safe.")),this.progress<this.maxProgress&&(this.progress+=.001*this.getPower()*this.workers))}getEffects(){return this.state===lv.CONSTRUCTION?this.effectsService.getBuildingEffectsValue(Ru.CONSTRUCTION,!1):super.getEffects()}getPermanentEffects(){return this.state===lv.CONSTRUCTION?this.effectsService.getBuildingEffectsValue(Ru.CONSTRUCTION,!0):super.getPermanentEffects()}getHappinessEffect(){return this.state===lv.CONSTRUCTION?super.getHappinessEffect():0}isStoppable(){return this.state===lv.CONSTRUCTION}isFinished(){return this.state!==lv.CONSTRUCTION}addPermanentEffect(){this.addBuildingEffects(),this.addArmyEffects()}addBuildingEffects(){if(this.settings.BUILDING_EFFECTS&&this.settings.BUILDING_EFFECTS.length>0){const e=this.servicesService.getEffectsService();this.settings.BUILDING_EFFECTS.forEach(n=>{e.addBuildingEffect(new Vu(this.getName(),n.building,Number(n.value),zu.WONDER))})}}addArmyEffects(){if(this.settings.ARMY_EFFECTS&&this.settings.ARMY_EFFECTS.length>0){const e=this.servicesService.getEffectsService();this.settings.ARMY_EFFECTS.forEach(n=>{e.addArmyEffect(new $u(this.getName(),n.troop,Number(n.value),zu.WONDER))})}}verifyWonderEffects(){if(this.isFinished()){if(this.settings.BUILDING_EFFECTS){const e=this.servicesService.getEffectsService();this.settings.BUILDING_EFFECTS.forEach(n=>{this.effectsService.hasBuildingEffect(this.getName(),n.building)||e.addBuildingEffect(new Vu(this.getName(),n.building,Number(n.value),zu.WONDER))})}if(this.settings.ARMY_EFFECTS){const e=this.servicesService.getEffectsService();this.settings.ARMY_EFFECTS.forEach(n=>{this.effectsService.hasArmyEffect(this.getName(),n.troop)||e.addArmyEffect(new $u(this.getName(),n.troop,Number(n.value),zu.WONDER))})}}}}return e.maxWorkers=5,e})();class iv extends tv{constructor(e=null,n=-1,l=0,t=0,i=0,s=lv.CONSTRUCTION,r=-1,u=0){super(n,Ru.STONEHENGE,e,yo.PLATEAU.STONEHENGE,l,t,i,s,r,u)}tick(e){if(super.tick(e),this.state===lv.ABDICATED){this.state=lv.USED,this.servicesService.getGameService().enable(Iu.PLATEAU),this.servicesService.getRoyalService().increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");const e=this.servicesService.getKongregateService();e.isAvailable()&&e.submitStat("Stonehenge",!0)}}}class sv extends XS{constructor(e=null,n=-1,l=0,t=1){super(n,Ru.MARKETPLACE,e,yo.VILLAGE.MARKETPLACE,!0,!0,!1,t),this.progress=l,this.callMerchantPrice=[{name:"coins",path:"resources",prefix:"",suffix:"25"}]}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress}}build(){return this.servicesService.getGameService().enable(Iu.MARKET),super.build()}callback(e){"bribe"===e&&(this.resourcesService.decreaseResource(bu.COINS,25,this.getName(),!0)?1===Yu.randomBetween(1,2)&&(this.progress+=50,this.progress>=100&&(this.progress=0,this.servicesService.getService(Wu.MARKET).callMerchant())):this.modalService.info("Not enough coins for a bribe"))}getLine(e){switch(e){case KS.FIRST:return QS.progressValue(this.progress,"merchant arrival");case KS.SECOND:return QS.emptyValue();case KS.THIRD:return QS.iconValue(this.callMerchantPrice);case KS.FOURTH:return QS.buttonValue("bribe merchant (50% chance)","bribe")}}tick(e){1===Yu.randomBetween(1,10)&&(this.progress+=this.getPower()),this.progress>=100&&(this.servicesService.getService(Wu.MARKET).callMerchant(),this.progress=0)}}class rv extends XS{constructor(e=null,n=-1,l=1){super(n,Ru.SMITHY,e,yo.MOUNTAINS.SMITHY,!1,!0,!1,l),e&&(this.gameService=e.getGameService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType}}build(){return this.settings.RECIPES.forEach(e=>{this.gameService.isEnabled(e.prerequisite)&&this.servicesService.getRecipeService().enable(e.recipe)}),this.gameService.enable(Iu.BUILT_SMITHY),this}prepareDemolish(){return this.settings.RECIPES.forEach(e=>this.servicesService.getRecipeService().disable(e.recipe)),this.gameService.disable(Iu.BUILT_SMITHY),this.servicesService.getService(Wu.CRAFTING).filterCraftingQueue(this.settings.RECIPES),this.servicesService.getVillageService().buildings.filter(e=>e.getBuildingType()===Ru.WORKSHOP).map(e=>e).forEach(e=>{e.getRecipe()&&this.settings.RECIPES.includes(e.getRecipe().id)&&e.cancelCrafting()}),this.servicesService.getVillageService().buildings.filter(e=>e.getBuildingType()===Ru.MANUFACTURE).map(e=>e).forEach(e=>{e.getRecipe()&&this.settings.RECIPES.includes(e.getRecipe().id)&&e.cancelCrafting()}),!0}getLine(e){switch(e){case KS.FIRST:return QS.textValue("Allows workshops");case KS.SECOND:return QS.textValue("to smelt ore");case KS.THIRD:case KS.FOURTH:return QS.emptyValue()}}getEffects(){return 0}getHappinessEffect(){return 0}getPermanentEffects(){return 0}}class uv extends XS{constructor(e=null,n=-1,l=!1,t=0,i=1){super(n,Ru.CHURCH,e,yo.VILLAGE.CHURCH,l,!0,!0,i),this.progress=t,this.servicesService&&(this.religionService=e.getService(Wu.RELIGION))}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,working:this.working,progress:this.progress}}build(){return this.religionService.increaseFaithCap(50),this.servicesService.getGameService().enable(Iu.RELIGION),this.startProduction(),this}getLine(e){switch(e){case KS.FIRST:case KS.SECOND:return QS.emptyValue();case KS.THIRD:return QS.progressValue(this.progress,"prayers");case KS.FOURTH:return QS.emptyValue()}}prepareDemolish(){return this.religionService.decreaseFaithCap(50),!0}tick(e){if(!this.working)return;const n=this.servicesService.getVillageService().getPopulation();this.progress+=.1*(Math.pow(Math.log(n),2)+1)*this.getPower(),this.progress>100&&(this.progress=0,this.religionService.increaseFaith(1))}}class ov extends tv{constructor(e=null,n=-1,l=0,t=0,i=0,s=lv.CONSTRUCTION,r=-1,u=0){super(n,Ru.PYRAMID,e,yo.PLATEAU.PYRAMID,l,t,i,s,r,u)}tick(e){if(super.tick(e),this.state===lv.ABDICATED){this.state=lv.USED,this.servicesService.getGameService().enable(Iu.PLATEAU),this.servicesService.getRoyalService().increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");const e=this.servicesService.getKongregateService();e.isAvailable()&&e.submitStat("Pyramid",!0)}}}class av extends tv{constructor(e=null,n=-1,l=0,t=0,i=0,s=lv.CONSTRUCTION,r=-1,u=0){super(n,Ru.HANGING_GARDEN,e,yo.PLATEAU.HANGING_GARDEN,l,t,i,s,r,u)}tick(e){if(super.tick(e),this.state===lv.ABDICATED){this.state=lv.USED,this.servicesService.getGameService().enable(Iu.PLATEAU),this.servicesService.getRoyalService().increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");const e=this.servicesService.getKongregateService();e.isAvailable()&&e.submitStat("Hanging Garden",!0)}}}class cv extends tv{constructor(e=null,n=-1,l=0,t=0,i=0,s=lv.CONSTRUCTION,r=-1,u=0){super(n,Ru.COLOSSUS,e,yo.PLATEAU.COLOSSUS,l,t,i,s,r,u)}tick(e){if(super.tick(e),this.state===lv.ABDICATED){this.state=lv.USED,this.servicesService.getGameService().enable(Iu.PLATEAU),this.servicesService.getRoyalService().increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");const e=this.servicesService.getKongregateService();e.isAvailable()&&e.submitStat("Colossus",!0)}}}class hv extends tv{constructor(e=null,n=-1,l=0,t=0,i=0,s=lv.CONSTRUCTION,r=-1,u=0){super(n,Ru.ASCENSION_TEMPLE,e,yo.PLATEAU.ASCENSION_TEMPLE,l,t,i,s,r,u)}callback(e){if("abdicate"===e){this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to ascend?<br><br>You will start from the beginning and all progress except for</br>royal points, heritage points and permanent royal upgrades will be deleted.");const e=this.modalService.registerForConfirmation().subscribe(n=>{if(e.unsubscribe(),n){this.state=lv.ABDICATED,this.servicesService.getRoyalService().increaseRoyalPoints(this.settings.RP),this.logService.mystical("Your ascension granted you "+this.settings.RP+" royal points");const e=this.servicesService.getKongregateService();e.isAvailable()&&e.submitStat("Ascension Temple",!0),this.servicesService.getService(Wu.SERIALIZER).ascensionReset()}})}else super.callback(e)}getAbdicationText(){return"ascend"}forceAbdicate(){}}class dv extends tv{constructor(e=null,n=-1,l=0,t=0,i=0,s=lv.CONSTRUCTION,r=-1,u=0){super(n,Ru.UNDERGROUND_CITY,e,yo.PLATEAU.UNDERGROUND_CITY,l,t,i,s,r,u)}tick(e){if(super.tick(e),this.state===lv.ABDICATED){this.state=lv.USED,this.servicesService.getGameService().enable(Iu.PLATEAU),this.servicesService.getRoyalService().increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");const e=this.servicesService.getKongregateService();e.isAvailable()&&e.submitStat("Underground City",!0)}}}class gv extends tv{constructor(e=null,n=-1,l=0,t=0,i=0,s=lv.CONSTRUCTION,r=-1,u=0){super(n,Ru.GREAT_LIGHTHOUSE,e,yo.PLATEAU.GREAT_LIGHTHOUSE,l,t,i,s,r,u)}tick(e){if(super.tick(e),this.state===lv.ABDICATED){this.state=lv.USED,this.servicesService.getGameService().enable(Iu.PLATEAU),this.servicesService.getRoyalService().increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");const e=this.servicesService.getKongregateService();e.isAvailable()&&e.submitStat("Great Lighthouse",!0)}}}class pv extends tv{constructor(e=null,n=-1,l=0,t=0,i=0,s=lv.CONSTRUCTION,r=-1,u=0){super(n,Ru.SACRED_GROVE,e,yo.PLATEAU.SACRED_GROVE,l,t,i,s,r,u)}tick(e){if(super.tick(e),this.state===lv.ABDICATED){this.state=lv.USED,this.servicesService.getGameService().enable(Iu.PLATEAU),this.servicesService.getRoyalService().increaseRoyalPoints(this.settings.RP),this.logService.log("Your abdication granted you "+this.settings.RP+" royal points");const e=this.servicesService.getKongregateService();e.isAvailable()&&e.submitStat("Sacred Grove",!0)}}}class mv extends XS{constructor(e=null,n=-1,l=1){super(n,Ru.STASH,e,yo.FORT.STASH,!1,!0,!1,l),this.servicesService&&(this.armyService=e.getArmyService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType}}build(){return this.armyService.increaseStash(yo.FORT.STASH.SIZE),this}prepareDemolish(){return this.armyService.decreaseStash(yo.FORT.STASH.SIZE),!0}getLine(e){switch(e){case KS.FIRST:return QS.textValue("stash size: "+yo.FORT.STASH.SIZE);case KS.SECOND:case KS.THIRD:case KS.FOURTH:return QS.emptyValue()}}}let fv=(()=>{class e{constructor(e){this.servicesService=e,this.nextId=1,e.addService(Wu.ID,this)}getNextId(){const e=this.nextId;return this.nextId+=1,e}getName(){return"IdService"}load(e){this.nextId=void 0===e.nextId||isNaN(e.nextId)?1:e.nextId}reset(e,n){e&&(this.nextId=1)}save(){return{nextId:this.nextId}}}return e.ngInjectableDef=ce({factory:function(){return new e(De(sf))},token:e,providedIn:"root"}),e})();var Sv=function(e){return e.CRAFTING="crafting {craft}",e.WAITING_FOR_RESOURCES="waiting for resources",e.WAITING_FOR_WAREHOUSE="waiting for warehouse space",e.NO_CRAFTING="no crafting recipe",e.PRODUCTION_SETUP="production setup",e.FETCHING_MATERIALS="fetching materials",e.TRANSPORTING="transporting goods",e}({});class Ev extends XS{constructor(e=null,n=-1,l=0,t=Sv.NO_CRAFTING,i=!1,s=-1,r=1,u=0){super(n,Ru.MANUFACTURE,e,yo.VILLAGE.MANUFACTURE,i,!0,!0,r),this.progress=l,this.status=t,this.storage=u,this.recipe=null,this.iconsValue=[],e&&(this.resourcesService=e.getResourcesService(),this.modalService=e.getModalService(),this.recipeService=e.getRecipeService(),s>=0&&(this.recipe=this.recipeService.getRecipeById(s),this.prepareIcons()))}prepareIcons(){this.iconsValue=[],this.recipe&&Array.from(this.recipe.cost.entries()).forEach(e=>{this.iconsValue.push({name:bu[e[0]],path:"resources",prefix:e[1],suffix:""})})}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working,recipe:null!==this.recipe?this.recipe.id:-1,storage:this.storage}}build(){return this.startProduction(),this}prepareDemolish(){return super.prepareDemolish()}callback(e){if("select"===e){this.modalService.open(ju.RECIPE);const e=this.modalService.registerForValueResponse().subscribe(n=>{e.unsubscribe(),null!==n&&(this.recipe=this.recipeService.getRecipeById(n),this.prepareIcons(),this.status=Sv.PRODUCTION_SETUP)})}else if("change"===e){this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to change production recipe?");const e=this.modalService.registerForConfirmation().subscribe(n=>{if(e.unsubscribe(),n){this.modalService.open(ju.RECIPE),this.modalService.setModalValue(this.recipe.id);const e=this.modalService.registerForValueResponse().subscribe(n=>{e.unsubscribe(),null!==n&&(this.progress=0,this.recipe=this.recipeService.getRecipeById(n),this.prepareIcons(),this.status=Sv.PRODUCTION_SETUP)})}})}}getLine(e){switch(e){case KS.FIRST:return QS.textValue(this.recipe?this.status.replace("{craft}",Uu.prepareResourceName(this.recipe.resource)):this.status);case KS.SECOND:return QS.progressValue(this.progress);case KS.THIRD:return this.recipe?QS.iconValue(this.iconsValue):QS.emptyValue();case KS.FOURTH:return null===this.recipe?QS.buttonValue("select recipe","select"):QS.buttonValue(Uu.prepareResourceName(this.recipe.resource),"change")}}tick(e){if(this.working)if(this.status===Sv.PRODUCTION_SETUP)this.progress<100?(this.progress+=.5*this.getPower()/this.recipe.craftingDifficulty,this.progress>100&&(this.progress=100)):(this.progress=0,this.status=Sv.FETCHING_MATERIALS);else if(this.status===Sv.CRAFTING)this.progress<100?(this.progress+=this.getPower()/this.recipe.craftingDifficulty*yo.VILLAGE.MANUFACTURE.CRAFTING_POWER,this.progress>100&&(this.progress=100)):(this.progress=0,this.storage=this.recipe.amount,this.status=Sv.TRANSPORTING);else if(this.status===Sv.FETCHING_MATERIALS||this.status===Sv.WAITING_FOR_RESOURCES)this.status=this.resourcesService.decreaseResources(this.recipe.cost,this.getName(),!1,1,!0)?Sv.CRAFTING:Sv.WAITING_FOR_RESOURCES;else if(this.status===Sv.TRANSPORTING||this.status===Sv.WAITING_FOR_WAREHOUSE){const e=this.resourcesService.getLimit(this.recipe.resource);this.storage>e?(this.storage-=e,this.resourcesService.increaseResource(this.recipe.resource,e,this.getName()),this.status=Sv.WAITING_FOR_WAREHOUSE):this.resourcesService.increaseResource(this.recipe.resource,this.storage,this.getName())&&(this.status=Sv.FETCHING_MATERIALS)}}getRecipe(){return this.recipe}cancelCrafting(){this.recipe=null,this.progress=0,this.status=Sv.NO_CRAFTING}}class vv extends ZS{constructor(e=null,n=-1,l=0,t=0,i=100,s=100,r=0,u=1,o=!0){super(e,n,Ru.LONGHOUSE,yo.VILLAGE.LONGHOUSE,l,t,i,s,r,u,o)}}class Rv extends XS{constructor(e=null,n=-1,l=0,t=!1,i=ku.NONE,s=0,r=1){super(n,Ru.EMBASSY,e,yo.FORT.EMBASSY,t,!0,!0,r),this.progress=l,this.country=i,this.paper=s,this.servicesService&&(this.worldService=e.getWorldService())}toJSON(){return{id:this.id,level:this.level,working:this.working,progress:this.progress,country:this.country,paper:this.paper,buildingType:this.buildingType}}callback(e){this.country=ku[String(e.target.value)],this.progress=0}getLine(e){switch(e){case KS.FIRST:const e=this.worldService.getCountriesList();return e.includes(ku[this.country])||(this.country=ku.NONE),QS.dropdownValue(e,ku[this.country]);case KS.SECOND:return this.country===ku.NONE?QS.emptyValue():QS.textValue("current standing: "+this.worldService.getCountry(this.country).diplomacy);case KS.THIRD:return this.country===ku.NONE?QS.emptyValue():QS.progressValue(this.progress);case KS.FOURTH:return this.paper<.5?QS.textValue("No enough paper"):QS.emptyValue()}}tick(e){this.working&&(this.paper<5&&this.resourcesService.decreaseResource(bu.PAPER,1,this.getName())&&(this.paper+=1),this.country!==ku.NONE&&this.paper>=1&&this.worldService.getCountry(this.country).diplomacy<100&&(this.progress<100?(this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):(this.progress=0,this.paper-=.5,this.worldService.getCountry(this.country).increaseDiplomacy(1))))}getDetails(){return super.getDetails()+"paper: "+this.paper}}class Ov extends oE{constructor(e=null,n=-1,l=0,t=uE.FETCHING_INPUT,i=[],s=[],r=!1,u=null,o=1){super(e,n,Ru.PAPER_MILL,yo.FOREST.PAPER_MILL,t,l,i,s,r,u,o)}}var bv=function(e){return e.MINING="mining {res}",e.WAITING_FOR_SELECTION="waiting for ore selection",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.LOOKING_FOR_NEW_ORE_VEIN="looking for new ore vein",e.WAITING_FOR_ORE_DEPOSIT="waiting for ore deposit",e.TRANSPORTING="transporting {res}",e}({});let Tv=(()=>{class e extends nv{constructor(n=null,l=-1,t=0,i=bv.WAITING_FOR_SELECTION,s=0,r=0,u=20,o=0,a=bu.NOTHING,c=1){super(l,Ru.DEEP_MINE,n,yo.MOUNTAINS.DEEP_MINE,r,e.maxWorkers,!0,!0,c),this.progress=t,this.status=i,this.storage=s,this.resources=u,this.oreToFind=o,this.ore=a,this.maxResources=20*c,this.servicesService&&(this.modalService=n.getModalService(),this.landService=n.getLandService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,storage:this.storage,workers:this.workers,resources:this.resources,oreToFind:this.oreToFind,ore:this.ore}}callback(e){if(this.ore===bu.NOTHING)if(bu[String(e.target.value).replace(" ","_")]===bu.STONE){this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to mine "+Uu.prepareResourceName(bu[String(e.target.value).replace(" ","_")])+" in this mine?");const n=this.modalService.registerForConfirmation().subscribe(l=>{l?(this.ore=bu[String(e.target.value).replace(" ","_")],this.status=bv.MINING,this.progress=0):e.target.selectedIndex=this.ore,n.unsubscribe()})}else if(this.landService.hasOre(bu[String(e.target.value).replace(" ","_")],20)){this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to mine "+Uu.prepareResourceName(bu[String(e.target.value).replace(" ","_")])+" in this mine?");const n=this.modalService.registerForConfirmation().subscribe(l=>{l?(this.landService.decreaseOre(bu[String(e.target.value).replace(" ","_")],20),this.ore=bu[String(e.target.value).replace(" ","_")],this.status=bv.MINING,this.progress=0,this.startProduction()):e.target.selectedIndex=this.ore,n.unsubscribe()})}else this.modalService.info("Not enough "+Uu.prepareResourceName(bu[String(e.target.value).replace(" ","_")])+" deposits available<br>20 "+Uu.prepareResourceName(bu[String(e.target.value).replace(" ","_")])+" deposits required to start mining."),e.target.selectedIndex=this.ore;else"hire"===e?this.hireWorker():"fire"===e&&this.fireWorker()}hasBuff(){return!this.isUsedUp()&&super.hasBuff()}getLine(e){switch(e){case KS.FIRST:if(this.ore!==bu.NOTHING)return QS.textValue(Uu.prepareResourceName(this.ore).toLowerCase()+": "+this.resources+"/"+this.maxResources);{const e=[];return e.push(bu[bu.NOTHING].replace("_"," ")),e.push(bu[bu.STONE].replace("_"," ")),e.push(bu[bu.COAL].replace("_"," ")),e.push(bu[bu.GOLD_ORE].replace("_"," ")),e.push(bu[bu.SILVER_ORE].replace("_"," ")),e.push(bu[bu.COPPER_ORE].replace("_"," ")),e.push(bu[bu.TIN_ORE].replace("_"," ")),e.push(bu[bu.IRON_ORE].replace("_"," ")),QS.dropdownValue(e,bu[this.ore])}case KS.SECOND:return QS.textValue(this.status.replace("{res}",Uu.prepareResourceName(this.ore).toLowerCase()));case KS.THIRD:return this.ore!==bu.NOTHING?QS.progressValue(this.progress):QS.emptyValue();case KS.FOURTH:return this.ore!==bu.NOTHING?QS.twoButtonValue("hire worker","hire",this.workers+"/"+this.maxWorkers,"fire worker","fire"):QS.emptyValue()}}tick(e){if(this.ore!==bu.NOTHING){if(!this.isWorking())return;if(this.status===bv.LOOKING_FOR_NEW_ORE_VEIN||this.status===bv.WAITING_FOR_ORE_DEPOSIT){if(0===this.oreToFind)if(this.ore===bu.STONE)this.oreToFind=this.maxResources;else{const e=this.landService.getOre(this.ore);if(!(e>0))return void(this.status=bv.WAITING_FOR_ORE_DEPOSIT);10*e>this.maxResources?(this.landService.decreaseOre(this.ore,this.maxResources/10),this.oreToFind=this.maxResources):(this.landService.decreaseOre(this.ore,e),this.oreToFind=10*e)}this.progress<100?(this.progress+=this.getPower()*this.workers/(this.oreToFind/this.getBuildingLevel()),this.progress>100&&(this.progress=100)):100===this.progress&&(this.progress=0,this.resources=this.oreToFind,this.oreToFind=0,this.status=bv.MINING)}else this.storage>0?this.resourcesService.increaseResource(this.ore,this.storage,this.getName())?(this.storage=0,Yu.chance(this.settings.GEM_CHANCE)&&this.resourcesService.increaseResource(bu.GEMS,1,this.getName()),this.status=this.resources<=0?bv.LOOKING_FOR_NEW_ORE_VEIN:bv.MINING):this.status=bv.WAITING_FOR_WAREHOUSE_SPACE:this.progress<100?(this.status=bv.MINING,this.progress+=this.getPower()*this.workers,this.progress>100&&(this.progress=100)):100===this.progress&&(this.progress=0,this.resources-=1,this.storage=1,this.status=bv.TRANSPORTING)}}build(){return this.startProduction(),this}isStoppable(){return this.status!==bv.WAITING_FOR_SELECTION}setBuildingLevel(e){super.setBuildingLevel(e),this.maxResources=20*this.getBuildingLevel()}getBuildingData(){return[this.ore,this.resources,this.status]}setBuildingData(e){this.ore=e[0],this.resources=e[1],this.status=e[2],this.resources>0&&(this.status=bv.MINING)}}return e.maxWorkers=4,e})();var Cv=function(e){return e.GATHERING_FOOD="gathering food",e.GATHERING_RESOURCES="gathering resources",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.TRANSPORTING="transporting",e}({}),Iv=function(e){return e[e.FOOD=0]="FOOD",e[e.RESOURCES=1]="RESOURCES",e}({});let yv=(()=>{class e extends nv{constructor(n=null,l=-1,t=0,i=Cv.GATHERING_FOOD,s=0,r=Iv.FOOD,u=[],o=1){super(l,Ru.GATHERERS_CAMP,n,yo.FOREST.GATHERERS_CAMP,s,e.maxWorkers,!0,!0,o),this.progress=t,this.status=i,this.mode=r,this.storage=u,this.lastFind=[],this.servicesService&&(this.weatherService=n.getWeatherService())}rollForFind(){const e=[],n=1+this.storage.length/20;return this.mode===Iv.FOOD?(this.storage.find(e=>e[0]===bu.BERRY)||e.push({item:bu.BERRY,chance:this.settings.BERRY_CHANCE*n}),this.storage.find(e=>e[0]===bu.MUSHROOM)||e.push({item:bu.MUSHROOM,chance:this.settings.MUSHROOM_CHANCE*n}),this.storage.find(e=>e[0]===bu.WHEAT)||e.push({item:bu.WHEAT,chance:this.settings.WHEAT_CHANCE*n}),this.storage.find(e=>e[0]===bu.HERBS)||e.push({item:bu.HERBS,chance:this.settings.HERBS_CHANCE*n})):this.mode===Iv.RESOURCES&&(this.storage.find(e=>e[0]===bu.BRUSHWOOD)||e.push({item:bu.BRUSHWOOD,chance:this.settings.BRUSHWOOD_CHANCE*n}),this.storage.find(e=>e[0]===bu.STONE)||e.push({item:bu.STONE,chance:this.settings.STONE_CHANCE*n}),this.storage.find(e=>e[0]===bu.LOG)||e.push({item:bu.LOG,chance:this.settings.LOG_CHANCE*n}),this.storage.find(e=>e[0]===bu.COPPER)||e.push({item:bu.COPPER,chance:this.settings.COPPER_CHANCE*n}),this.storage.find(e=>e[0]===bu.HERBS)||e.push({item:bu.HERBS,chance:this.settings.HERBS_CHANCE*n})),Yu.randomElement(e)}build(){return this.servicesService.getManagementService().getDefaultGathererFood()||(this.mode=Iv.RESOURCES,this.status=Cv.GATHERING_RESOURCES),super.build()}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,workers:this.workers,storage:this.storage,mode:this.mode}}callback(e){e===Iv.FOOD?(this.mode=Iv.FOOD,this.progress=0,this.storage=[],this.lastFind=[],this.status=Cv.GATHERING_FOOD):e===Iv.RESOURCES?(this.mode=Iv.RESOURCES,this.progress=0,this.storage=[],this.lastFind=[],this.status=Cv.GATHERING_RESOURCES):"hire"===e?this.hireWorker():"fire"===e&&this.fireWorker()}getLine(e){switch(e){case KS.FIRST:return this.mode===Iv.FOOD?QS.buttonValue("gather resources",Iv.RESOURCES):QS.buttonValue("gather food",Iv.FOOD);case KS.SECOND:return QS.textValue(this.status);case KS.THIRD:return QS.progressValue(this.progress);case KS.FOURTH:return QS.twoButtonValue("hire worker","hire",this.workers+"/"+this.maxWorkers,"fire worker","fire")}}tick(e){if(this.isWorking())if(this.status===Cv.TRANSPORTING||this.status===Cv.WAITING_FOR_WAREHOUSE_SPACE)this.storage.forEach(e=>{this.resourcesService.increaseResource(e[0],1,this.getName())&&(e[1]-=1)}),this.storage=this.storage.filter(e=>e[1]>0),this.storage.length>=this.canFindN()?this.status=Cv.WAITING_FOR_WAREHOUSE_SPACE:this.setStatus();else if(this.storage.length<this.canFindN()){if(this.progress<100)this.setStatus(),this.progress+=this.getPower(),this.progress>100&&(this.progress=100);else if(100===this.progress){this.progress=0,this.lastFind=[];for(let e=0;e<this.workers;e++){let e=this.rollForFind();null!==e&&this.resourcesService.increaseResource(e,1,this.getName())?this.lastFind.push(e):null===e||this.storage.find(n=>n[0]===e)?e=null:(this.storage.push([e,1]),this.status=Cv.TRANSPORTING),this.storage.length>0&&(this.status=Cv.TRANSPORTING),this.progress=0}}}else this.progress=0,this.status=Cv.WAITING_FOR_WAREHOUSE_SPACE}canFindN(){return this.mode===Iv.FOOD?4:5}getDetails(){let e="last find:<br>";this.lastFind&&this.lastFind.length>0?this.lastFind.forEach(n=>{e+=Uu.prepareResourceName(n)+"<br>"}):e+="nothing<br>";let n="";return e.length>"last find:<br>".length&&(n=e),n+="local storage:<br>",this.storage.forEach(e=>{n+=Uu.prepareResourceName(e[0])+": "+e[1]+"<br>"}),super.getDetails()+n}setStatus(){this.status=this.mode===Iv.FOOD?Cv.GATHERING_FOOD:Cv.GATHERING_RESOURCES}}return e.maxWorkers=5,e})();class Av extends XS{constructor(e=null,n=-1,l=Nu.NONE,t=50,i=1){super(n,Ru.BARN,e,yo.FIELD.BARN,!1,!0,!1,i),this.crop=l,this.storage=t,this.servicesService&&(this.modalService=e.getModalService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,crop:this.crop,storage:this.storage}}callback(e){if(this.crop===Nu.NONE)this.crop=Nu[String(e.target.value)],this.resourcesService.increaseResourceLimit(bu[Nu[this.crop]],6*this.storage);else{this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to switch barn storage type?<br>All excess resources will be lost");const n=this.modalService.registerForConfirmation().subscribe(l=>{l?(this.resourcesService.decreaseResourceLimit(bu[Nu[this.crop]],6*this.storage),this.crop=Nu[String(e.target.value)],this.resourcesService.increaseResourceLimit(bu[Nu[this.crop]],6*this.storage)):e.target.selectedIndex=this.crop-1,n.unsubscribe()})}}getComplexity(){return super.getComplexity()*(this.storage/this.settings.SIZE)}getSize(){return this.storage}getLine(e){switch(e){case KS.FIRST:return this.firstLine();case KS.SECOND:return QS.textValue("storage: "+6*this.storage);case KS.THIRD:case KS.FOURTH:return QS.emptyValue()}}firstLine(){const e=[];return e.push(Nu[Nu.NONE]),e.push(Nu[Nu.WHEAT]),e.push(Nu[Nu.HAY]),e.push(Nu[Nu.BERRY]),e.push(Nu[Nu.MUSHROOM]),this.resourcesService.getResource(bu.BARLEY).isVisible()&&e.push(Nu[Nu.BARLEY]),this.resourcesService.getResource(bu.HOP).isVisible()&&e.push(Nu[Nu.HOP]),this.resourcesService.getResource(bu.COTTON).isVisible()&&e.push(Nu[Nu.COTTON]),this.resourcesService.getResource(bu.HERBS).isVisible()&&e.push(Nu[Nu.HERBS]),QS.dropdownValue(e,Nu[this.crop])}prepareDemolish(){return this.crop!==Nu.NONE&&this.resourcesService.decreaseResourceLimit(bu[Nu[this.crop]],6*this.storage),!0}startProduction(){return!1}stopProduction(){}fireWorker(){return!1}hireWorker(){return!1}getWorkers(){return 0}getHappinessEffect(){return 0}isCombinable(){return!0}isSplittable(){return!0}combine(e,n){if(this.getBuildingType()===e.getBuildingType()){this.modalService.open(ju.CONFIRM),this.modalService.setModalText(" Are you sure you want to combine "+this.getName()+" of size "+this.getSize()+" with "+e.getName()+" of size "+e.getSize()+"?<br>Resulting "+this.getName()+" of size "+(this.getSize()+e.getSize())+" will store <b>"+Uu.prepareCropName(this.crop)+"</b><br>All resources exceeding decreased limit of <b>"+Uu.prepareCropName(e.crop)+"</b> will be lost");const l=this.modalService.registerForConfirmation().subscribe(t=>{l.unsubscribe(),t?(this.storage+=e.getSize(),this.crop!==Nu.NONE&&this.resourcesService.increaseResourceLimit(bu[Nu[this.crop]],6*e.getSize()),n.finaliseCombine(!0)):n.finaliseCombine(!1)})}}split(e){this.modalService.open(ju.INPUT),this.modalService.setModalText("Set split size (1-"+(this.getSize()-1)+")"),this.modalService.setModalValue("");const n=this.modalService.registerForValueResponse().subscribe(l=>{n.unsubscribe(),null!==l&&(isNaN(l)||0===l||(l>=1&&l<this.getSize()?(this.storage-=Number(l),e.finaliseSplit(new Av(this.servicesService,this.servicesService.getIdService().getNextId(),this.crop,Number(l)).build())):this.modalService.info("Invalid size value!")))})}}var Nv=function(e){return e.COOKING="cooking {craft}",e.WAITING_FOR_WAREHOUSE="waiting for {craft} space",e.NO_COOKING="nothing to cook",e}({});class _v extends XS{constructor(e=null,n=-1,l=0,t=Nv.NO_COOKING,i=!1,s=-1,r=null,u=1,o=0){super(n,Ru.KITCHEN,e,yo.VILLAGE.KITCHEN,i,!0,!0,u),this.progress=l,this.status=t,this.storage=o,this.recipe=null,this.icon=null,this.servicesService&&(r?this.recipe=r:s>=0&&(this.recipe=this.servicesService.getRecipeService().getRecipeById(s)),this.craftingService=e.getService(Wu.CRAFTING),this.gameService=e.getGameService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working,recipeId:null!==this.recipe?this.recipe.id:-1,storage:this.storage}}build(){return this.startProduction(),this.craftingService.increaseCookingQueueSize(1),this}prepareDemolish(){return this.craftingService.decreaseCookingQueueSize(1),super.prepareDemolish()}callback(e){"cancel"===e&&(this.recipe=null,this.progress=0,this.status=Nv.NO_COOKING)}getLine(e){switch(e){case KS.FIRST:return QS.emptyValue();case KS.SECOND:return this.recipe?(this.icon||(this.prepareIcon(),this.status===Nv.COOKING?this.icon[0].prefix="cooking ":this.status===Nv.WAITING_FOR_WAREHOUSE&&(this.icon[0].prefix="waiting for ",this.icon[0].suffix=" space")),QS.iconValue(this.icon)):QS.textValue(this.status.replace("{craft}","warehouse"));case KS.THIRD:return this.recipe?QS.buttonValue("cancel cooking","cancel"):QS.emptyValue();case KS.FOURTH:return QS.progressValue(this.progress)}}tick(e){if(this.working)if(null===this.recipe&&(this.recipe=this.craftingService.getCookingOrder(),this.icon=null,this.progress=0),null===this.recipe)this.status=Nv.NO_COOKING;else if(this.status===Nv.WAITING_FOR_WAREHOUSE){const e=this.resourcesService.getLimit(this.recipe.resource);this.storage>e?(this.storage-=e,this.resourcesService.increaseResource(this.recipe.resource,e,this.getName())):(this.resourcesService.increaseResource(this.recipe.resource,this.storage,this.getName()),this.status=Nv.COOKING,this.progress=0,this.recipe=null)}else if(this.status=Nv.COOKING,this.progress<100&&(this.progress+=this.getPower()/this.recipe.craftingDifficulty*yo.VILLAGE.KITCHEN.CRAFTING_POWER),this.progress>=100){this.progress=100,this.storage=this.recipe.amount;const e=this.resourcesService.getLimit(this.recipe.resource);this.storage>e?(this.storage-=e,this.resourcesService.increaseResource(this.recipe.resource,e,this.getName()),this.status=Nv.WAITING_FOR_WAREHOUSE,this.icon=null):this.resourcesService.increaseResource(this.recipe.resource,this.storage,this.getName())?(this.progress=0,this.storage=0,this.recipe=null):(this.status=Nv.WAITING_FOR_WAREHOUSE,this.icon=null)}}getRecipe(){return this.recipe}cancelCooking(){this.recipe=null}prepareIcon(){this.recipe&&(this.icon=[{name:Uu.prepareResourceName(this.recipe.resource),path:"resources",prefix:"",suffix:""}])}}var wv=function(e){return e.DIGGING_CLAY="digging clay",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.NO_MORE_RESOURCES="no more resources",e.TRANSPORTING="transporting",e}({});class Pv extends XS{constructor(e=null,n=-1,l=0,t=wv.DIGGING_CLAY,i=!1,s=0,r=400,u=1){super(n,Ru.CLAY_PIT,e,yo.FIELD.CLAY_PIT,i,!0,!0,u),this.progress=l,this.status=t,this.storage=s,this.resources=r}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working,storage:this.storage,resources:this.resources}}getLine(e){switch(e){case KS.FIRST:return QS.textValue("clay: "+this.resources);case KS.SECOND:return QS.textValue(this.status);case KS.THIRD:return QS.progressValue(this.progress);case KS.FOURTH:return QS.emptyValue()}}isStoppable(){return this.resources>0}isUsedUp(){return this.status===wv.NO_MORE_RESOURCES}hasBuff(){return!this.isUsedUp()&&super.hasBuff()}tick(e){this.resources<=0&&(this.status!==wv.NO_MORE_RESOURCES&&this.servicesService.getLogService().warning("Clay pit has no more clay"),this.status=wv.NO_MORE_RESOURCES,this.stopProduction()),this.working&&(this.storage>0?this.resourcesService.increaseResource(bu.CLAY,this.storage,this.getName())?(this.storage=0,this.status=wv.DIGGING_CLAY):this.status=wv.WAITING_FOR_WAREHOUSE_SPACE:this.progress<100?(this.status=wv.DIGGING_CLAY,this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):100===this.progress&&(this.progress=0,this.resources-=1,this.storage=1,this.status=wv.TRANSPORTING))}}class xv extends ZS{constructor(e=null,n=-1,l=0,t=0,i=100,s=100,r=0,u=1,o=!0){super(e,n,Ru.TUDOR_HOUSE,yo.VILLAGE.TUDOR_HOUSE,l,t,i,s,r,u,o)}}var kv=function(e){return e.CHOPPING_TREES="chopping {amount} tree{plural}",e.WAITING_FOR_TREES="waiting for trees",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.TRANSPORTING_LOG="transporting log",e}({});let Mv=(()=>{class e extends nv{constructor(n=null,l=-1,t=0,i=0,s=kv.WAITING_FOR_TREES,r=0,u=1){super(l,Ru.LOGGERS_CAMP,n,yo.FOREST.LOGGERS_CAMP,r,e.maxWorkers,!0,!0,u),this.progress=t,this.reservedTrees=i,this.status=s,this.servicesService&&(this.landService=n.getLandService())}getLine(e){switch(e){case KS.FIRST:return QS.emptyValue();case KS.SECOND:let e=this.status.replace("{amount}",""+this.reservedTrees);return e=e.replace("{plural}",1===this.reservedTrees?"":"s"),QS.textValue(e);case KS.THIRD:return QS.progressValue(this.progress);case KS.FOURTH:return QS.twoButtonValue("hire worker","hire",this.workers+"/"+this.maxWorkers,"fire worker","fire")}}callback(e){"hire"===e?this.hireWorker():"fire"===e&&this.fireWorker()}tick(){if(this.isWorking())if(this.status===kv.WAITING_FOR_TREES){const e=Math.min(this.workers,this.landService.getForest(),this.landService.getForest());this.landService.reduceForest(e)&&(this.reservedTrees=e,this.status=kv.CHOPPING_TREES)}else if(this.status===kv.CHOPPING_TREES)this.progress<100?(this.progress+=this.getPower()*(this.getWorkers()/this.reservedTrees),this.progress>=100&&(this.progress=100)):(this.progress=0,this.status=kv.TRANSPORTING_LOG);else if(this.status===kv.TRANSPORTING_LOG||this.status===kv.WAITING_FOR_WAREHOUSE_SPACE)if(this.resourcesService.increaseResource(bu.LOG,this.reservedTrees,this.getName())){this.landService.increaseLand(this.reservedTrees,!0);const e=Math.min(this.workers,this.landService.getForest(),this.landService.getForest());this.landService.reduceForest(e)?(this.reservedTrees=e,this.status=kv.CHOPPING_TREES):this.status=kv.WAITING_FOR_TREES}else{const e=this.resourcesService.getLimit(bu.LOG),n=Math.min(e,this.reservedTrees);this.reservedTrees-=n,this.landService.increaseLand(n,!0),this.resourcesService.increaseResource(bu.LOG,n,this.getName()),this.status=kv.WAITING_FOR_WAREHOUSE_SPACE}}prepareDemolish(){return this.landService.increaseForest(this.reservedTrees,!1),this.stopProduction(),!0}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,workers:this.workers,reservedTrees:this.reservedTrees}}getDetails(){return this.status===kv.WAITING_FOR_WAREHOUSE_SPACE?super.getDetails()+"local storage:<br>&nbsp;&nbsp;logs: "+this.reservedTrees:super.getDetails()}}return e.maxWorkers=5,e})();var Dv=function(e){return e.MINING="mining {res}",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e.NO_MORE_RESOURCES="no more {res}",e.TRANSPORTING="transporting {res}",e}({});let Lv=(()=>{class e extends nv{constructor(n=null,l=-1,t=20,i=bu.NOTHING,s=0,r=Dv.MINING,u=0,o=0,a=1){super(l,Ru.METEORITE,n,yo.MOUNTAINS.METEORITE,o,e.maxWorkers,!0,!0,a),this.resources=t,this.ore=i,this.progress=s,this.status=r,this.storage=u}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,storage:this.storage,workers:this.workers,resources:this.resources,ore:this.ore}}isUsedUp(){return this.status===Dv.NO_MORE_RESOURCES}callback(e){"hire"===e?this.hireWorker():"fire"===e&&this.fireWorker()}getLine(e){switch(e){case KS.FIRST:return QS.textValue(Uu.prepareResourceName(this.ore).toLowerCase()+": "+this.resources);case KS.SECOND:return QS.textValue(this.status.replace("{res}",Uu.prepareResourceName(this.ore).toLowerCase()));case KS.THIRD:return this.resources>0?QS.progressValue(this.progress):QS.emptyValue();case KS.FOURTH:return this.resources>0?QS.twoButtonValue("hire worker","hire",this.workers+"/"+this.maxWorkers,"fire worker","fire"):QS.emptyValue()}}tick(e){this.resources<=0&&0===this.storage&&(this.status!==Dv.NO_MORE_RESOURCES&&this.servicesService.getLogService().warning("Meteorite fully mined "+Uu.prepareResourceName(this.ore)),this.status=Dv.NO_MORE_RESOURCES,this.stopProduction()),this.isWorking()&&(this.storage>0?this.resourcesService.increaseResource(this.ore,this.storage,this.getName())?(this.storage=0,this.status=Dv.MINING):this.status=Dv.WAITING_FOR_WAREHOUSE_SPACE:this.resources>0&&this.progress<100?(this.status=Dv.MINING,this.progress+=this.getPower()*this.workers,this.progress>100&&(this.progress=100)):100===this.progress&&(this.progress=0,this.resources-=1,this.storage=1,this.status=Dv.TRANSPORTING))}build(){return this}isStoppable(){return this.resources>0}}return e.maxWorkers=4,e})();class Fv extends XS{constructor(e=null,n=-1,l=1){super(n,Ru.PIER,e,yo.SEA.PIER,!1,!0,!1,l)}getLine(e){switch(e){case KS.FIRST:return QS.textValue("size: "+this.getSize());case KS.SECOND:return QS.textValue("space for ships: "+this.settings.HARBOUR_SIZE);case KS.THIRD:case KS.FOURTH:return QS.emptyValue()}}toJSON(){return{buildingType:this.buildingType,id:this.id,level:this.level}}build(){return this.servicesService.getNavyService().increaseHarbourSize(this.settings.HARBOUR_SIZE),this}prepareDemolish(){return this.servicesService.getNavyService().decreaseHarbourSize(this.settings.HARBOUR_SIZE),super.prepareDemolish()}}class Uv extends XS{constructor(e=null,n=-1,l=1){super(n,Ru.HARBOUR,e,yo.SEA.HARBOUR,!1,!0,!1,l)}getLine(e){switch(e){case KS.FIRST:return QS.textValue("size: "+this.getSize());case KS.SECOND:return QS.textValue("space for ships: "+this.settings.HARBOUR_SIZE);case KS.THIRD:case KS.FOURTH:return QS.emptyValue()}}toJSON(){return{buildingType:this.buildingType,id:this.id,level:this.level}}build(){return this.servicesService.getNavyService().increaseHarbourSize(this.settings.HARBOUR_SIZE),this}prepareDemolish(){return this.servicesService.getNavyService().decreaseHarbourSize(this.settings.HARBOUR_SIZE),super.prepareDemolish()}}var Hv=function(e){return e.LIGHT_BURNING="light burning",e.WAITING_FOR_FUEL="waiting for fuel",e}({});class Gv extends XS{constructor(e=null,n=-1,l=Hv.LIGHT_BURNING,t=0,i=!1,s=1){super(n,Ru.LIGHTHOUSE,e,yo.SEA.LIGHTHOUSE,i,!0,!0,s),this.status=l,this.fuel=t,e&&(this.worldService=e.getWorldService())}getLine(e){switch(e){case KS.FIRST:return QS.textValue("size: "+this.getSize());case KS.SECOND:return QS.textValue(this.status);case KS.THIRD:return QS.textValue("fuel: "+Uu.round(this.fuel,2));case KS.FOURTH:return QS.emptyValue()}}tick(e){this.working&&(this.fuel<5?this.resourcesService.decreaseResource(bu.FUEL,1,this.getName())&&(this.fuel+=1):this.fuel<=0&&(this.status=Hv.WAITING_FOR_FUEL),this.worldService.getPlayerSeaMissions().length>0&&this.fuel>=.005&&(this.fuel-=.005))}isBurning(){return this.status===Hv.LIGHT_BURNING&&this.isWorking()}toJSON(){return{buildingType:this.buildingType,id:this.id,status:this.status,working:this.working,fuel:this.fuel,level:this.level}}}var Bv=function(e){return e.BUILDING_SHIP="building {ship}",e.WAITING_FOR_ORDER="waiting for order",e}({});class Wv extends XS{constructor(e=null,n=-1,l=0,t=Bv.WAITING_FOR_ORDER,i=!1,s=null,r=1){super(n,Ru.BOAT_BUILDER,e,yo.SEA.BOAT_BUILDER,i,!0,!0,r),this.progress=l,this.status=t,this.ship=s,e&&(this.resourcesService=e.getResourcesService(),this.modalService=e.getModalService(),this.navyService=e.getNavyService())}toJSON(){return{buildingType:this.buildingType,id:this.id,progress:this.progress,status:this.status,working:this.working,ship:this.ship,level:this.level}}build(){return this.startProduction(),this.gameService.isEnabled(Iu.NAVY)||(this.gameService.enable(Iu.NAVY),this.logService.log("Navy tab unlocked")),this}callback(e){if("select"===e){this.modalService.open(ju.SHIPYARD),this.modalService.setShipyardLimitBoat(!0);const e=this.modalService.registerForValueResponse().subscribe(n=>{e.unsubscribe(),null!==n&&(this.ship=n,this.status=Bv.BUILDING_SHIP)})}else if("cancel"===e){this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to cancel building "+Uu.prepareTroopName(this.ship)+"?");const e=this.modalService.registerForConfirmation().subscribe(n=>{e.unsubscribe(),n&&(this.ship=null,this.progress=0,this.status=Bv.WAITING_FOR_ORDER)})}}getLine(e){switch(e){case KS.FIRST:return QS.textValue(this.ship?this.status.replace("{ship}",Uu.prepareTroopName(this.ship)):this.status);case KS.SECOND:return this.ship?QS.progressValue(this.progress):QS.emptyValue();case KS.THIRD:return null===this.ship?QS.buttonValue("select ship","select"):QS.buttonValue("cancel "+Uu.prepareTroopName(this.ship),"cancel");case KS.FOURTH:return QS.emptyValue()}}tick(e){null!=this.ship&&this.ship===Pu.BOAT||(this.ship=null,this.status=Bv.WAITING_FOR_ORDER),this.working&&this.status===Bv.BUILDING_SHIP&&(this.progress<100?(this.progress+=this.getPower()/No.getTroop(this.ship).SIZE,this.progress>100&&(this.progress=100)):(this.progress=0,this.navyService.addShip(this.ship),this.ship=null,this.status=Bv.WAITING_FOR_ORDER))}getShipSize(){return(null==this.ship||this.ship!==Pu.BOAT&&this.ship!==Pu.BRIGANTINE&&this.ship!==Pu.GALLEON)&&(this.ship=null,this.status=Bv.WAITING_FOR_ORDER),this.ship?No.getTroop(this.ship).SIZE:0}}var Vv=function(e){return e.BUILDING_SHIP="building {ship}",e.WAITING_FOR_ORDER="waiting for order",e}({});let zv=(()=>{class e extends nv{constructor(n=null,l=-1,t=0,i=Vv.WAITING_FOR_ORDER,s=0,r=null,u=1){super(l,Ru.SHIPYARD,n,yo.SEA.SHIPYARD,s,e.maxWorkers,!0,!0,u),this.progress=t,this.status=i,this.ship=r,n&&(this.resourcesService=n.getResourcesService(),this.modalService=n.getModalService(),this.navyService=n.getNavyService())}toJSON(){return{buildingType:this.buildingType,id:this.id,progress:this.progress,status:this.status,workers:this.workers,ship:this.ship,level:this.level}}build(){return this.startProduction(),this.gameService.isEnabled(Iu.NAVY)||(this.gameService.enable(Iu.NAVY),this.logService.log("Navy tab unlocked")),this}callback(e){if("select"===e){this.modalService.open(ju.SHIPYARD),this.modalService.setShipyardLimitBoat(!1);const e=this.modalService.registerForValueResponse().subscribe(n=>{e.unsubscribe(),null!==n&&(this.ship=n,this.status=Vv.BUILDING_SHIP)})}else if("cancel"===e){this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to cancel building "+Uu.prepareTroopName(this.ship)+"?");const e=this.modalService.registerForConfirmation().subscribe(n=>{e.unsubscribe(),n&&(this.ship=null,this.progress=0,this.status=Vv.WAITING_FOR_ORDER)})}else"hire"===e?this.hireWorker():"fire"===e&&this.fireWorker()}getLine(e){switch(e){case KS.FIRST:return QS.textValue(this.ship?this.status.replace("{ship}",Uu.prepareTroopName(this.ship)):this.status);case KS.SECOND:return this.ship?QS.progressValue(this.progress):QS.emptyValue();case KS.THIRD:return null===this.ship?QS.buttonValue("select ship","select"):QS.buttonValue("cancel "+Uu.prepareTroopName(this.ship),"cancel");case KS.FOURTH:return QS.twoButtonValue("hire worker","hire",this.workers+"/"+this.maxWorkers,"fire worker","fire")}}tick(e){(null==this.ship||this.ship!==Pu.BOAT&&this.ship!==Pu.BRIGANTINE&&this.ship!==Pu.GALLEON)&&(this.ship=null,this.status=Vv.WAITING_FOR_ORDER),this.isWorking()&&this.status===Vv.BUILDING_SHIP&&(this.progress<100?(this.progress+=this.getPower()/No.getTroop(this.ship).SIZE*this.workers,this.progress>100&&(this.progress=100)):(this.progress=0,this.navyService.addShip(this.ship),this.ship=null,this.status=Vv.WAITING_FOR_ORDER))}getShipSize(){return(null==this.ship||this.ship!==Pu.BOAT&&this.ship!==Pu.BRIGANTINE&&this.ship!==Pu.GALLEON)&&(this.ship=null,this.status=Vv.WAITING_FOR_ORDER),this.ship?No.getTroop(this.ship).SIZE:0}}return e.maxWorkers=10,e})();var Yv=function(e){return e.DRAWING_MAP="drawing map",e.WAITING_FOR_CARTOGRAPHY_DATA="waiting for cartography data",e.WAITING_FOR_WAREHOUSE_SPACE="waiting for warehouse space",e}({});class $v extends XS{constructor(e=null,n=-1,l=0,t=Yv.WAITING_FOR_CARTOGRAPHY_DATA,i=!1,s=1){super(n,Ru.CARTOGRAPHER,e,yo.SEA.CARTOGRAPHER,i,!0,!0,s),this.progress=l,this.status=t,this.servicesService&&(this.resourcesService=e.getResourcesService(),this.navyService=e.getNavyService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,working:this.working,status:this.status}}build(){return this.servicesService.getResourcesService().makeVisible(bu.MAP),super.build()}getLine(e){switch(e){case KS.FIRST:return QS.textValue(this.status);case KS.SECOND:return QS.progressValue(this.progress);case KS.THIRD:return QS.progressValue(this.navyService.getMapProgress(),"map progress");case KS.FOURTH:return QS.emptyValue()}}tick(e){this.working&&(this.status===Yv.WAITING_FOR_CARTOGRAPHY_DATA?this.navyService.decreaseCartographyData(1)&&(this.status=Yv.DRAWING_MAP):this.status===Yv.DRAWING_MAP?this.progress<100?(this.progress+=this.getPower(),this.progress>100&&(this.progress=100)):this.navyService.getMapProgress()<100?(this.navyService.addMapProgress(),this.progress=0,this.status=Yv.WAITING_FOR_CARTOGRAPHY_DATA):this.status=Yv.WAITING_FOR_WAREHOUSE_SPACE:this.status===Yv.WAITING_FOR_WAREHOUSE_SPACE&&(this.navyService.getMapProgress()>=100?this.navyService.createMap()&&(this.status=Yv.WAITING_FOR_CARTOGRAPHY_DATA):this.status=Yv.WAITING_FOR_CARTOGRAPHY_DATA))}}class Kv extends ZS{constructor(e=null,n=-1,l=0,t=0,i=100,s=100,r=0,u=1,o=!0){super(e,n,Ru.SETTLEMENT,yo.VILLAGE.SETTLEMENT,l,t,i,s,r,u,o)}}var jv=function(e){return e.RESEARCHING="researching",e.NO_RESEARCH="nothing to research",e}({});class Qv extends XS{constructor(e=null,n=-1,l=0,t=jv.NO_RESEARCH,i=!1,s=1){super(n,Ru.SCHOLARS_LAB,e,yo.VILLAGE.SCHOLARS_LAB,i,!0,!0,s),this.progress=l,this.status=t,this.servicesService&&(this.techService=e.getTechService(),this.gameService=e.getGameService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,progress:this.progress,status:this.status,working:this.working}}build(){return this.startProduction(),this}getLine(e){switch(e){case KS.FIRST:let e="";return this.techService.getCurrentResearch()&&(e=Uu.prepareTechName(this.techService.getCurrentResearch().getTech())),QS.textValue(e);case KS.SECOND:return QS.progressValue(this.progress);case KS.THIRD:case KS.FOURTH:return QS.emptyValue()}}tick(e){this.working&&(this.techService.isResearchStarted()?(this.status!==jv.RESEARCHING&&(this.progress=0),this.status=jv.RESEARCHING,this.progress+=this.getPower(),this.progress>=100&&(this.progress=0,this.techService.progressTech(yo.VILLAGE.SCHOLARS_LAB.RESEARCH_POWER))):(this.status=jv.NO_RESEARCH,this.progress=0))}}var qv=function(e){return e.COLLECTING_TAX="collecting tax",e.GIVING_DONATIONS="giving donations",e.WAITING_FOR_COINS="waiting for coins",e}({});class Xv extends XS{constructor(e=null,n=-1,l=!1,t=qv.COLLECTING_TAX,i=0,s=1){super(n,Ru.TAX_COLLECTOR,e,yo.VILLAGE.TAX_COLLECTOR,l,!0,!0,s),this.status=t,this.progress=i,this.servicesService&&(this.happinessService=e.getHappinessService())}toJSON(){return{id:this.id,level:this.level,buildingType:this.buildingType,status:this.status,working:this.working,progress:this.progress}}callback(e){"tax"===e?(this.progress=0,this.status=qv.COLLECTING_TAX):"donate"===e&&(this.progress=0,this.status=qv.GIVING_DONATIONS)}getLine(e){switch(e){case KS.FIRST:return this.status===qv.COLLECTING_TAX?QS.buttonValue("give donations","donate"):QS.buttonValue("collect tax","tax");case KS.SECOND:return 0===Number(this.servicesService.getManagementService().getTaxRate())?QS.textValue("0% tax/donation"):QS.textValue(this.status);case KS.THIRD:return QS.progressValue(this.progress);case KS.FOURTH:return QS.emptyValue()}}prepareDemolish(){return this.religionService.decreaseFaithCap(50),!0}tick(e){if(!this.working)return;const n=this.servicesService.getManagementService();if(0!==Number(n.getTaxRate()))if(this.status===qv.WAITING_FOR_COINS&&this.resourcesService.decreaseResource(bu.COINS,this.calculateTax(),this.getName())&&(this.status=qv.GIVING_DONATIONS),this.progress<100)this.progress+=100/(30*Eo),this.progress>100&&(this.progress=100);else{this.progress=0;const e=this.calculateTax(),n=Number(this.servicesService.getManagementService().getTaxRate());e>0&&(this.status===qv.COLLECTING_TAX?(this.resourcesService.increaseResource(bu.COINS,e,this.getName()),this.updateHappinessEffect(-2*n,Fu.TAX)):(this.updateHappinessEffect(n,Fu.DONATION),this.resourcesService.decreaseResource(bu.COINS,e,this.getName()),this.resourcesService.decreaseResource(bu.COINS,e,this.getName())||(this.status=qv.WAITING_FOR_COINS)))}else this.progress=0}calculateTax(){let e=0;this.servicesService.getVillageService().getHousingBuildings().map(e=>e).forEach(n=>e+=yo.getBuilding(n.getBuildingType()).TAX*n.getOccupants());const n=Number(this.servicesService.getManagementService().getTaxRate());return e*=n}updateHappinessEffect(e,n){const l=this.servicesService.getHappinessService(),t=l.getHappinessEffectByEffect(n);t?t.value=e:l.addHappinessEffect(0,n,e,29)}getHappinessEffect(){return 0}getEffects(){return 0}getPermanentEffects(){return 0}}let Zv=(()=>{class e{constructor(e,n){this.servicesService=e,this.idService=n,e.addService(Wu.BUILDING_FACTORY,this)}loadBuilding(e){return null==e.id&&(e.id=this.idService.getNextId()),void 0!==e.progress&&null===e.progress&&(e.progress=0),e.buildingType===Ru.HUT?new JS(this.servicesService,e.id,e.occupants,e.progress,e.food,e.fuel,e.clothes,e.level,void 0===e.enabled||e.enabled):e.buildingType===Ru.HOUSE?new eE(this.servicesService,e.id,e.occupants,e.progress,e.food,e.fuel,e.clothes,e.level,void 0===e.enabled||e.enabled):e.buildingType===Ru.LONGHOUSE?new vv(this.servicesService,e.id,e.occupants,e.progress,e.food,e.fuel,e.clothes,e.level,void 0===e.enabled||e.enabled):e.buildingType===Ru.TUDOR_HOUSE?new xv(this.servicesService,e.id,e.occupants,e.progress,e.food,e.fuel,e.clothes,e.level,void 0===e.enabled||e.enabled):e.buildingType===Ru.SETTLEMENT?new Kv(this.servicesService,e.id,e.occupants,e.progress,e.food,e.fuel,e.clothes,e.level,void 0===e.enabled||e.enabled):e.buildingType===Ru.BAKERY?new PE(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===Ru.TAILOR?new GE(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===Ru.WORKSHOP?new EE(this.servicesService,e.id,e.progress,e.status,e.mode,e.working,void 0!==e.recipeId?e.recipeId:-1,e.recipe,e.level,void 0!==e.storage?e.storage:0):e.buildingType===Ru.SCHOLARS_LAB?new Qv(this.servicesService,e.id,e.progress,e.status,e.working,e.level):e.buildingType===Ru.KITCHEN?new _v(this.servicesService,e.id,e.progress,e.status,e.working,e.recipeId,e.recipe,e.level,e.storage):e.buildingType===Ru.MANUFACTURE?new Ev(this.servicesService,e.id,e.progress,e.status,e.working,e.recipe,e.level,e.storage):e.buildingType===Ru.WAREHOUSE?new vE(this.servicesService,e.id,e.resource,void 0!==e.storage?e.storage:50,e.level):e.buildingType===Ru.MARKETPLACE?new sv(this.servicesService,e.id,e.progress,e.level):e.buildingType===Ru.TAX_COLLECTOR?new Xv(this.servicesService,e.id,e.working,e.status,e.progress,e.level):e.buildingType===Ru.TAVERN?new YE(this.servicesService,e.id,e.progress,e.beer,e.wine,e.working,e.level):e.buildingType===Ru.SHRINE?new TE(this.servicesService,e.id,e.progress,e.level):e.buildingType===Ru.CHURCH?new uv(this.servicesService,e.id,e.working,e.progress,e.level):e.buildingType===Ru.BARRACKS?new ME(this.servicesService,e.id,e.barracksSize,e.level):e.buildingType===Ru.EMBASSY?new Rv(this.servicesService,e.id,e.progress,e.working,e.country,e.paper,e.level):e.buildingType===Ru.TRAINING_SQUARE?new LE(this.servicesService,e.id,e.progress,e.working,e.status,e.level,void 0!==e.workSettings?e.workSettings:null):e.buildingType===Ru.STOCKADE?new UE(this.servicesService,e.id,e.health,e.durability,e.progress,e.working,e.level):e.buildingType===Ru.WOODEN_TOWER?new WE(this.servicesService,e.id,e.health,e.durability,e.progress,e.working,e.level):e.buildingType===Ru.STONE_TOWER?new VE(this.servicesService,e.id,e.health,e.durability,e.progress,e.working,e.level):e.buildingType===Ru.STASH?new mv(this.servicesService,e.id,e.level):e.buildingType===Ru.LOGGERS_HUT?new lE(this.servicesService,e.id,e.progress,void 0!==e.reservedTrees?e.reservedTrees:0,e.status,e.working,e.level):e.buildingType===Ru.LOGGERS_CAMP?new Mv(this.servicesService,e.id,e.progress,e.reservedTrees,e.status,e.workers,e.level):e.buildingType===Ru.GATHERER?new gE(this.servicesService,e.id,e.progress,e.status,e.working,e.mode,e.storage,e.level):e.buildingType===Ru.GATHERERS_CAMP?new yv(this.servicesService,e.id,e.progress,e.status,e.workers,e.mode,e.storage,e.level):e.buildingType===Ru.HUNTER_LODGE?new bE(this.servicesService,e.id,e.progress,e.status,e.mode,e.working,e.storage,e.storage2,e.animal,e.level):e.buildingType===Ru.TANNERY?new FE(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===Ru.PAPER_MILL?new Ov(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===Ru.FORESTER?new sE(this.servicesService,e.id,e.progress,e.localStorage,e.status,e.effectiveness,e.working,e.level):e.buildingType===Ru.SAWMILL?new aE(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===Ru.FARM?new IE(this.servicesService,e.id,e.workers,e.maxWorkers,e.level,e.status,void 0!==e.workSettings?e.workSettings:null):e.buildingType===Ru.WINDMILL?new wE(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===Ru.BUTCHER?new JE(this.servicesService,e.id,e.status,e.progress,e.working,e.outputStorage,null!==e.outputFurStorage?e.outputFurStorage:0,e.animals,void 0===e.discardExcessFur||e.discardExcessFur,e.level):e.buildingType===Ru.COTTON_MILL?new HE(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===Ru.BREWERY?new BE(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===Ru.CLAY_PIT?new Pv(this.servicesService,e.id,e.progress,e.status,e.working,e.storage,e.resources,e.level):e.buildingType===Ru.WINERY?new zE(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===Ru.BARN?new Av(this.servicesService,e.id,e.crop,e.storage,e.level):e.buildingType===Ru.FIELD?new AE(this.servicesService,e.id,e.size,e.crop,e.status,e.progress,e.working,e.growth,e.level):e.buildingType===Ru.ORCHARD?new _E(this.servicesService,e.id,e.size,e.crop,e.status,e.progress,e.working,e.growth,e.level):e.buildingType===Ru.PASTURE?new XE(this.servicesService,e.id,e.size,e.animal,e.progress,e.produceProgress,e.working,e.animals,e.food,e.chores,e.autoButcher,e.level):e.buildingType===Ru.QUARRY?new mE(this.servicesService,e.id,e.progress,e.status,e.working,e.storage,e.resources,e.level):e.buildingType===Ru.GEOLOGIST?new $E(this.servicesService,e.id,e.progress,e.working,e.level):e.buildingType===Ru.STONEMASON?new KE(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===Ru.MINT?new ev(this.servicesService,e.id,e.progress,e.status,e.inputStorage,e.outputStorage,e.working,e.workSettings,e.level):e.buildingType===Ru.SMITHY?new rv(this.servicesService,e.id,e.level):e.buildingType===Ru.PIT_MINE?new QE(this.servicesService,e.id,e.progress,e.status,e.working,e.storage,e.resources,e.ore,e.level):e.buildingType===Ru.METEORITE?new Lv(this.servicesService,e.id,e.resources,e.ore,e.progress,e.status,e.storage,e.workers,e.level):e.buildingType===Ru.DEEP_MINE?new Tv(this.servicesService,e.id,e.progress,e.status,e.storage,e.workers,e.resources,void 0!==e.oreToFind?e.oreToFind:0,e.ore,e.level):e.buildingType===Ru.STONEHENGE?new iv(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===Ru.PYRAMID?new ov(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===Ru.HANGING_GARDEN?new av(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===Ru.COLOSSUS?new cv(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===Ru.UNDERGROUND_CITY?new dv(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===Ru.GREAT_LIGHTHOUSE?new gv(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===Ru.BOAT_BUILDER?new Wv(this.servicesService,e.id,e.progress,e.status,e.working,e.ship,e.level):e.buildingType===Ru.SHIPYARD?new zv(this.servicesService,e.id,e.progress,e.status,e.workers,e.ship,e.level):e.buildingType===Ru.CARTOGRAPHER?new $v(this.servicesService,e.id,e.progress,e.status,e.working,e.level):e.buildingType===Ru.SACRED_GROVE?new pv(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===Ru.ASCENSION_TEMPLE?new hv(this.servicesService,e.id,e.progress,e.maxProgress,e.stage,e.state,e.year,e.workers):e.buildingType===Ru.FISHERS_HUT?new kE(this.servicesService,e.id,e.progress,e.status,e.working,e.level):e.buildingType===Ru.PIER?new Fv(this.servicesService,e.id,e.level):e.buildingType===Ru.HARBOUR?new Uv(this.servicesService,e.id,e.level):e.buildingType===Ru.LIGHTHOUSE?new Gv(this.servicesService,e.id,e.status,e.fuel,e.working,e.level):e.buildingType===Ru.CONSTRUCTION?new tE(this.servicesService,e.id,e.region,e.constructing,e.buildingComplexity,e.buildingSize,e.upgradeLevel,e.progress,e.working,void 0!==e.data?e.data:null):e.buildingType===Ru.DECONSTRUCTION?new cE(this.servicesService,e.id,e.region,e.deconstructing,e.buildingComplexity,e.buildingSize,e.progress,e.working):void console.error("Couldn't load building of type ["+e.buildingType+"]")}createBuilding(e,n=this.idService.getNextId()){return this.createBuildingShell(e,n).build()}createBuildingShell(e,n=this.idService.getNextId()){switch(e){case Ru.HUT:return new JS(this.servicesService,n);case Ru.HOUSE:return new eE(this.servicesService,n);case Ru.LONGHOUSE:return new vv(this.servicesService,n);case Ru.TUDOR_HOUSE:return new xv(this.servicesService,n);case Ru.SETTLEMENT:return new Kv(this.servicesService,n);case Ru.BAKERY:return new PE(this.servicesService,n);case Ru.TAILOR:return new GE(this.servicesService,n);case Ru.WORKSHOP:return new EE(this.servicesService,n);case Ru.SCHOLARS_LAB:return new Qv(this.servicesService,n);case Ru.KITCHEN:return new _v(this.servicesService,n);case Ru.MANUFACTURE:return new Ev(this.servicesService,n);case Ru.WAREHOUSE:return new vE(this.servicesService,n);case Ru.MARKETPLACE:return new sv(this.servicesService,n);case Ru.TAX_COLLECTOR:return new Xv(this.servicesService,n);case Ru.TAVERN:return new YE(this.servicesService,n);case Ru.SHRINE:return new TE(this.servicesService,n);case Ru.CHURCH:return new uv(this.servicesService,n);case Ru.BARRACKS:return new ME(this.servicesService,n);case Ru.EMBASSY:return new Rv(this.servicesService,n);case Ru.TRAINING_SQUARE:return new LE(this.servicesService,n);case Ru.STOCKADE:return new UE(this.servicesService,n);case Ru.WOODEN_TOWER:return new WE(this.servicesService,n);case Ru.STONE_TOWER:return new VE(this.servicesService,n);case Ru.STASH:return new mv(this.servicesService,n);case Ru.LOGGERS_HUT:return new lE(this.servicesService,n);case Ru.LOGGERS_CAMP:return new Mv(this.servicesService,n);case Ru.GATHERER:return new gE(this.servicesService,n);case Ru.GATHERERS_CAMP:return new yv(this.servicesService,n);case Ru.HUNTER_LODGE:return new bE(this.servicesService,n);case Ru.TANNERY:return new FE(this.servicesService,n);case Ru.PAPER_MILL:return new Ov(this.servicesService,n);case Ru.FORESTER:return new sE(this.servicesService,n);case Ru.SAWMILL:return new aE(this.servicesService,n);case Ru.FARM:return new IE(this.servicesService,n);case Ru.WINDMILL:return new wE(this.servicesService,n);case Ru.BUTCHER:return new JE(this.servicesService,n);case Ru.COTTON_MILL:return new HE(this.servicesService,n);case Ru.BREWERY:return new BE(this.servicesService,n);case Ru.WINERY:return new zE(this.servicesService,n);case Ru.CLAY_PIT:return new Pv(this.servicesService,n);case Ru.BARN:return new Av(this.servicesService,n);case Ru.FIELD:return new AE(this.servicesService,n);case Ru.ORCHARD:return new _E(this.servicesService,n);case Ru.PASTURE:return new XE(this.servicesService,n);case Ru.QUARRY:return new mE(this.servicesService,n);case Ru.GEOLOGIST:return new $E(this.servicesService,n);case Ru.STONEMASON:return new KE(this.servicesService,n);case Ru.MINT:return new ev(this.servicesService,n);case Ru.SMITHY:return new rv(this.servicesService,n);case Ru.PIT_MINE:return new QE(this.servicesService,n);case Ru.METEORITE:return new Lv(this.servicesService,n);case Ru.DEEP_MINE:return new Tv(this.servicesService,n);case Ru.STONEHENGE:return new iv(this.servicesService,n);case Ru.PYRAMID:return new ov(this.servicesService,n);case Ru.HANGING_GARDEN:return new av(this.servicesService,n);case Ru.COLOSSUS:return new cv(this.servicesService,n);case Ru.UNDERGROUND_CITY:return new dv(this.servicesService,n);case Ru.GREAT_LIGHTHOUSE:return new gv(this.servicesService,n);case Ru.SACRED_GROVE:return new pv(this.servicesService,n);case Ru.ASCENSION_TEMPLE:return new hv(this.servicesService,n);case Ru.FISHERS_HUT:return new kE(this.servicesService,n);case Ru.PIER:return new Fv(this.servicesService,n);case Ru.HARBOUR:return new Uv(this.servicesService,n);case Ru.LIGHTHOUSE:return new Gv(this.servicesService,n);case Ru.BOAT_BUILDER:return new Wv(this.servicesService,n);case Ru.SHIPYARD:return new zv(this.servicesService,n);case Ru.CARTOGRAPHER:return new $v(this.servicesService,n);case Ru.CONSTRUCTION:console.error("Building factory cannot create construction sites!");break;case Ru.DECONSTRUCTION:console.error("Building factory cannot create deconstruction sites!");break;default:console.error("Couldn't construct building of type ["+Ru[e]+"]!")}}}return e.ngInjectableDef=ce({factory:function(){return new e(De(sf),De(fv))},token:e,providedIn:"root"}),e})(),Jv=(()=>{class e{constructor(e,n,l){this.servicesService=e,this.calendarService=n,this.logService=l,this.buildingEffects=[],this.natureEffects=[],this.armyEffects=[],e.addService(Wu.EFFECTS,this),this.daySubscription=n.registerForDayChange().subscribe(e=>{this.buildingEffects.forEach(e=>{e.duration>0&&(e.duration-=1)}),this.armyEffects.forEach(e=>{e.duration>0&&(e.duration-=1)}),this.natureEffects.forEach(e=>{e.duration>0&&(e.duration-=1)})})}getName(){return"EffectsService"}load(e){this.buildingEffects=[],e.buildingEffects.forEach(e=>{this.buildingEffects.push(new Vu(e.name,e.building,e.effect,e.duration,e.buff))}),this.armyEffects=[],e.armyEffects.forEach(e=>{this.armyEffects.push(new $u(e.name,e.troop,e.effect,e.duration))}),this.natureEffects=[],e.natureEffects.forEach(e=>{this.natureEffects.push(new Ku(e.name,e.effect,e.duration))})}save(){return{buildingEffects:this.buildingEffects,armyEffects:this.armyEffects,natureEffects:this.natureEffects}}reset(e,n){e?(this.buildingEffects=[],this.armyEffects=[],this.natureEffects=[]):n?(this.buildingEffects=this.buildingEffects.filter(e=>e.isRoyal()),this.armyEffects=this.armyEffects.filter(e=>e.isRoyal()),this.natureEffects=this.natureEffects.filter(e=>e.isRoyal())):(this.buildingEffects=this.buildingEffects.filter(e=>e.isRoyal()||e.isWonder()),this.armyEffects=this.armyEffects.filter(e=>e.isRoyal()||e.isWonder()),this.natureEffects=this.natureEffects.filter(e=>e.isRoyal()||e.isWonder()))}tick(e){this.buildingEffects=this.buildingEffects.filter(e=>0!==e.duration),this.armyEffects=this.armyEffects.filter(e=>0!==e.duration),this.natureEffects=this.natureEffects.filter(e=>0!==e.duration)}getBuildingEffectsValue(e,n=!1,l=-1){let t=0;return l>0?this.buildingEffects.filter(n=>n.building===e||n.building===Ru.ALL).filter(e=>e.isPermanent()===n).filter(e=>!e.isBuff()||e.isBuff()&&e.buff===l).forEach(e=>t+=e.effect):this.buildingEffects.filter(n=>n.building===e||n.building===Ru.ALL).filter(e=>e.isPermanent()===n).forEach(e=>t+=e.effect),t}getBuildingEffects(e,n=-1){return e?n>0?this.buildingEffects.filter(n=>n.building===e||n.building===Ru.ALL).filter(e=>e.buff===n):this.buildingEffects.filter(n=>n.building===e||n.building===Ru.ALL):this.buildingEffects}hasWonderEffects(e){return this.buildingEffects.filter(n=>n.name===e).length>0||this.armyEffects.filter(n=>n.name===e).length>0||this.natureEffects.filter(n=>n.name===e).length>0}getNatureEffectsValue(){let e=0;return this.natureEffects.forEach(n=>e+=n.effect),e}getNatureEffects(){return this.natureEffects}addNatureEffect(e,n=!0){if(this.natureEffects.push(e),n){let n=e.name;e.isPermanent()?n+=" will permanently affect ":n+=" will affect ",n+="most natural sources with ",n+=e.effect>0?"+"+e.effect+"%":e.effect+"%",n+=" of their base power",e.isPermanent()||(n+=" for "+e.duration+" days"),this.logService.log(n)}}addBuildingEffect(e,n=!0){if(this.buildingEffects.push(e),n){let n=e.name;e.isPermanent()?n+=" will permanently affect ":n+=" will affect ",n+=e.building===Ru.ALL?"all buildings with ":Uu.prepareBuildingName(e.building)+" with ",n+=e.effect>0?"+"+e.effect+"%":e.effect+"%",n+=e.building===Ru.ALL?" of their base power":" of its base power",e.isPermanent()||(n+=e.duration%vo==0?e.duration===vo?" for "+e.duration/vo+" year":" for "+e.duration/vo+" years":" for "+e.duration+" days"),this.logService.log(n)}}addArmyEffect(e,n=!0){if(this.armyEffects.push(e),n){let n=e.name;e.isPermanent()?n+=" will permanently affect ":n+=" will affect ",n+=e.troop===Pu.ALL?"all troops with ":Uu.prepareTroopName(e.troop)+" with ",n+=e.effect>0?"+"+e.effect+"%":e.effect+"%",n+=" of their base strength and defense",e.isPermanent()||(n+=" for "+e.duration+" days"),this.logService.log(n)}}getArmyEffects(){return this.armyEffects}hasBuildingEffect(e,n){return void 0!==this.buildingEffects.find(l=>l.name===e&&l.building===n)}hasArmyEffect(e,n){return void 0!==this.armyEffects.find(l=>l.name===e&&l.troop===n)}}return e.ngInjectableDef=ce({factory:function(){return new e(De(sf),De(hf),De(df))},token:e,providedIn:"root"}),e})();class eR{constructor(e,n,l,t,i){this.forestSizeRule=e,this.forestSizeRuleEnabled=n,this.landSizeRule=l,this.landSizeRuleEnabled=t,this.forestSizeReserved=i}}let nR=(()=>{class e{constructor(e,n,l,t,i){this.servicesService=e,this.effectsService=n,this.gameService=l,this.optionsService=t,this.logService=i,this.land=Co.START_LAND,this.forest=Co.START_FOREST,this.mountains=Co.START_MOUNTAINS,this.takenLand=0,this.ores=[[bu.COAL,0],[bu.GOLD_ORE,0],[bu.SILVER_ORE,0],[bu.COPPER_ORE,0],[bu.TIN_ORE,0],[bu.IRON_ORE,0]],this.forestGrowTick=0,this.forestGrowTicks=Co.FOREST_GROW_TICKS,this.forestGrowPercentage=Co.FOREST_GROW_PERCENTAGE,this.defaultForestOptions=new eR(0,!1,25,!0,0),this.forestOptions=new eR(0,!1,25,!0,0),this.servicesService.addService(Wu.LAND,this)}getName(){return"LandService"}load(e){this.land=e.land,this.forest=e.forest,this.mountains=e.mountains,this.forestGrowTick=e.forestGrowTick,this.takenLand=e.takenLand,e.forestLandLimit&&(this.forestOptions=new eR(0,!1,e.forestLandLimit,!0,0)),e.forestOptions&&(this.forestOptions=e.forestOptions),this.ores=e.ores}save(){return{land:this.land,forest:this.forest,mountains:this.mountains,forestGrowTick:this.forestGrowTick,takenLand:this.takenLand,forestOptions:this.forestOptions,ores:this.ores}}reset(e,n){if(this.land=Co.START_LAND,this.forest=Co.START_FOREST,this.mountains=Co.START_MOUNTAINS,this.takenLand=0,this.optionsService.getOption(rf.KEEP_MANAGEMENT_SETTINGS_ON_RESET)&&!e||(this.forestOptions=new eR(0,!1,25,!0,0)),!e&&!n){const e=this.servicesService.getWorldService();this.increaseLand(e.getDiscoveredLand(),!0),this.increaseForest(e.getDiscoveredForest(),!1),this.increaseMountains(e.getDiscoveredMountains())}this.ores=[[bu.COAL,0],[bu.GOLD_ORE,0],[bu.SILVER_ORE,0],[bu.COPPER_ORE,0],[bu.TIN_ORE,0],[bu.IRON_ORE,0]]}tick(e){this.growForest()}growForest(){if(this.forestGrowTick<this.forestGrowTicks&&(this.forestGrowTick+=1),this.forestGrowTick===this.forestGrowTicks){let e=Math.floor(this.forestGrowPercentage*this.forest*(1+this.effectsService.getNatureEffectsValue()/100));e<Co.MINIMAL_FOREST_GROWTH&&(e=Co.MINIMAL_FOREST_GROWTH),this.increaseForest(e),this.forestGrowTick=0}}removeForest(e){this.forest>=e&&(this.forest-=e)}reduceForest(e){const n=this.forest;return this.forest-e>=this.forestOptions.forestSizeReserved&&(this.forest-=e,this.gameService.isEnabled(Iu.FORESTER)||(n>=400&&this.forest<400&&this.logService.warning("There are less than 400 trees in the forest!"),n>=250&&this.forest<250&&this.logService.warning("There are less than 250 trees in the forest!"),n>=100&&this.forest<100&&(this.logService.warning("Critical forest size!"),this.logService.warning("There are less than 100 trees in the forest!"))),!0)}increaseForest(e,n=!0){if(n){let n=0;this.forestOptions.landSizeRuleEnabled&&(n=this.forestOptions.landSizeRule),n<0&&(n=0);let l=this.land-n;return l<0&&(l=0),l-e>=0?(this.forest+=e,this.land-=e,0):(this.forest+=l,this.land-=l,e-l)}return this.forest+=e,0}removeLand(e){this.land>=e&&(this.land-=e)}reduceLand(e){let n=0;return this.forestOptions.landSizeRuleEnabled&&(n=this.forestOptions.landSizeRule),n<0&&(n=0),this.land-n-e>=0&&(this.land-=e,!0)}increaseLand(e,n=!1){return this.land+=e,n||(this.takenLand-=e),!0}increaseMountains(e){return this.mountains+=e,!0}getForest(){return this.forest}decreaseLand(e){if(!(this.land-e>=0))return e-this.land;this.takenLand+=e,this.land-=e}hasLand(e){return this.land-e>=0}getLand(){return this.land}getMountains(){return this.mountains}hasMountains(e){return this.mountains-e>=0}removeMountains(e){this.mountains>=e&&(this.mountains-=e)}decreaseMountains(e){if(!(this.mountains-e>=0))return e-this.mountains;this.mountains-=e,this.takenLand+=e}getOre(e){return this.ores.find(n=>n[0]===e)[1]}hasOre(e,n){return this.ores.find(n=>n[0]===e)[1]>=n}increaseOre(e,n){this.ores.find(n=>n[0]===e)[1]+=n}decreaseOre(e,n){const l=this.ores.find(n=>n[0]===e);if(l[1]>=n)return l[1]-=n,0;{const e=n-l[1];return l[1]=0,e}}getTakenLand(){return this.takenLand}takeLand(e){this.land-=e,this.takenLand+=e}getForestOptions(){return this.gameService.isEnabled(Iu.FORESTER)?this.forestOptions:this.defaultForestOptions}}return e.ngInjectableDef=ce({factory:function(){return new e(De(sf),De(Jv),De(Sf),De(uf),De(df))},token:e,providedIn:"root"}),e})();var lR=function(e){return e[e.ALL=0]="ALL",e[e.WORKING=1]="WORKING",e[e.IDLE=2]="IDLE",e[e.PASSIVE=3]="PASSIVE",e}({});class tR{constructor(e,n,l,t,i,s,r){this.buildings=[],this.filterBuilding=Ru.ALL,this.filterWorking=lR.ALL,this.thisRegion=s,this.buildingFactoryService=e,this.resourcesService=n,this.servicesService=l,this.landService=t,this.idService=i,n.addCallback(this,s),l.addService(r,this)}init(){}getBuildings(){return this.buildings}tick(e){this.shuffleArray(this.buildings).forEach(n=>n.tick(e))}shuffleArray(e){const n=e.slice();for(let l=n.length-1;l>0;l--){const e=Math.floor(Math.random()*(l+1));[n[l],n[e]]=[n[e],n[l]]}return n}getName(){return"AbstractRegionService"}save(){return{buildings:this.buildings,filterBuilding:this.filterBuilding,filterWorking:this.filterWorking}}reset(e,n){this.buildings=[],this.filterBuilding=Ru.ALL,this.filterWorking=lR.ALL,this.init()}load(e){this.buildings=[],this.filterBuilding=void 0!==e.filterBuilding?e.filterBuilding:Ru.ALL,this.filterWorking=void 0!==e.filterWorking?e.filterWorking:lR.ALL;for(const n of e.buildings)-1===n.id&&(n.id=this.idService.getNextId()),this.buildings.push(this.buildingFactoryService.loadBuilding(n))}getFilterBuilding(){return this.filterBuilding}setFilterBuildings(e){this.filterBuilding=e}setFilterWorking(e){this.filterWorking=e}getFilterWorking(){return this.filterWorking}getUnemployed(){return this.resourcesService.getPeople()}finishConstruction(e,n){const l=this.buildings.indexOf(e);-1!==l&&(this.buildings[l].stopProduction(),this.buildings[l]=this.buildingFactoryService.createBuilding(n,this.buildings[l].getBuildingId()))}createConstruction(e){this.buildings.push(e)}demolish(e){const n=this.buildings.indexOf(e);-1!==n&&(this.buildings[n].getBuildingType()===Ru.CONSTRUCTION?(this.buildings[n].stopProduction(),this.buildings[n].finishDemolish(),this.landService.increaseLand(this.buildings[n].getSize()),this.buildings.splice(n,1)):this.buildings[n]=new cE(this.servicesService,this.buildings[n].getBuildingId(),this.thisRegion,this.buildings[n].getBuildingType(),this.buildings[n].getComplexity(),this.buildings[n].getSize()).build())}finishDeconstruction(e){const n=this.buildings.indexOf(e);-1!==n&&(this.buildings[n].stopProduction(),this.buildingFactoryService.createBuildingShell(this.buildings[n].getBuildingBeingDemolished()).finishDemolish(),this.landService.increaseLand(this.buildings[n].getSize()),this.buildings.splice(n,1))}finishUpgrade(e,n){const l=this.buildings.indexOf(e);if(-1!==l){this.buildings[l].stopProduction();let e=this.buildingFactoryService.createBuildingShell(n,this.buildings[l].getBuildingId());e.getUpgradeSettings().NEW_BUILDING&&(e=this.buildingFactoryService.createBuildingShell(e.getUpgradeSettings().NEW_BUILDING,this.buildings[l].getBuildingId())),e.setBuildingData(this.buildings[l].getBuildingData()),e.setBuildingLevel(this.buildings[l].getBuildingLevel()),e.build(),this.buildings[l]=e}}fireRandomWorker(){const e=this.buildings.filter(e=>void 0===e.getOccupants&&e.isWorking()&&e.getWorkers()>0);if(e.length>0){const n=Math.floor(Math.random()*e.length);return e[n].fireWorker(),this.servicesService.getManagementService().getLogFiredWorkers()&&this.servicesService.getLogService().warning("Worker removed from "+e[n].getName()),!0}return!1}moveBuildingInList(e,n){CS(this.buildings,e,n)}moveBuildingInListByBuildingId(e,n){const l=this.buildings.findIndex(n=>e===n.getBuildingId()),t=this.buildings.findIndex(e=>n===e.getBuildingId());CS(this.buildings,l,t)}canCombine(e){if(this.buildings.filter(e=>e.isCombinable()).length>1)return this.toCombine?this.toCombine!==e&&this.toCombine.getBuildingType()===e.getBuildingType():!!this.buildings.find(n=>n!==e&&n.getBuildingType()===e.getBuildingType())}combine(e){if(!this.toCombine)return this.toCombine=e,!1;e.combine(this.toCombine,this)}finaliseCombine(e){if(e){const e=this.buildings.indexOf(this.toCombine);if(e>=0)return this.buildings[e].prepareDemolish()?(this.toCombine=null,this.buildings.splice(e,1),!0):(this.toCombine=null,!1)}else this.toCombine=null}clearCombineMode(){this.toCombine=null}split(e){e.isSplittable()&&e.split(this)}finaliseSplit(e){this.buildings.push(e)}addBuilding(e){this.buildings.push(this.buildingFactoryService.createBuilding(e))}upgradeBuilding(e){const n=this.buildings.find(n=>n.getBuildingId()===e),l=this.servicesService.getModalService(),t=this.servicesService.getVillageService();if(n)if(n.hasUpgrade())if(n.getOccupants)if(void 0!==n.getMaxSize&&t.getPopulation()>t.getPopulationCap()-n.getMaxSize()){l.open(ju.CONFIRM),l.setModalText("You don't have enough housing space to move this building occupants.<br> People that won't find new home will leave the village<br>Do you still want to upgrade this building?");const e=l.registerForConfirmation().subscribe(t=>{e.unsubscribe(),t&&this.upgrade(n,l)})}else this.upgrade(n,l);else this.upgrade(n,l);else l.info("This building cannot be upgraded");else l.info("Error! Building not found")}upgrade(e,n){if(e.getUpgradeSettings().SIZE&&!this.landService.hasLand(e.getUpgradeSettings().SIZE))return void n.info("Not enough empty land to upgrade!");if(!this.resourcesService.hasResources(e.getUpgradeCost(),"Upgrade",1,!0))return void n.info("Not enough resources to upgrade!");this.landService.decreaseLand(e.getUpgradeSettings().SIZE),this.resourcesService.decreaseResources(e.getUpgradeCost(),"Upgrade",!0);const l=this.buildings.indexOf(e),t=yo.getBuilding(e.getBuildingType());e.stopProduction();const i=new tE(this.servicesService,e.getBuildingId(),this.thisRegion,e.getBuildingType(),t.UPGRADES[e.getBuildingLevel()-1].COMPLEXITY,e.getSize(),e.getBuildingLevel()+1,0,!1,e.getBuildingData()).build();e.prepareDemolish(),this.buildings[l]=i}move(e){if(!this.toArrange)return this.toArrange=e,!1;this.moveBuildingInListByBuildingId(this.toArrange.getBuildingId(),e.getBuildingId()),this.toArrange=null}canMove(e){return!(this.toArrange&&e.getBuildingId()===this.toArrange.getBuildingId())}autoSort(){let e=[];const n=this.buildings;for(;this.buildings.length>0;){const n=this.buildings[0].getBuildingType();if(n===Ru.MANUFACTURE){let l=this.buildings.filter(e=>e.getBuildingType()===n||e.getBuildingType()===Ru.CONSTRUCTION&&e.getConstructing()===n).map(e=>e);for(this.buildings=this.buildings.filter(e=>!(e.getBuildingType()===n||e.getBuildingType()===Ru.CONSTRUCTION&&e.getConstructing()===n));l.length>0;){const n=l[0].getRecipe&&null!==l[0].getRecipe()?l[0].getRecipe().id:null;e=e.concat(l.filter(e=>e.getBuildingType()===Ru.CONSTRUCTION||null===e.getRecipe()?null===n:e.getRecipe().id===n)),l=l.filter(e=>e.getBuildingType()===Ru.CONSTRUCTION||null===e.getRecipe()?!(null===n):!(e.getRecipe().id===n))}}else e=e.concat(this.buildings.filter(e=>e.getBuildingType()===n||e.getBuildingType()===Ru.CONSTRUCTION&&e.getConstructing()===n)),this.buildings=this.buildings.filter(e=>!(e.getBuildingType()===n||e.getBuildingType()===Ru.CONSTRUCTION&&e.getConstructing()===n))}this.buildings=n.length===e.length?e:n}hasBuilding(e){return void 0!==this.buildings.find(n=>n.getBuildingId()===e)}autoMerge(){let e=!1,n=this.buildings.filter(e=>e.isCombinable());if(n.length>1){const l=new Map;n.forEach(e=>{l.has(e.getBuildingType())?l.get(e.getBuildingType()).push(e):l.set(e.getBuildingType(),[e])}),l.forEach(n=>{for(;n.length>1;){const l=n.shift(),t=[];for(let e=0;e<n.length;e++)n[e].isCompatible(l)&&t.push(n[e]);t.forEach(n=>{e=!0,this.clearCombineMode(),this.combine(n),this.combine(l)}),n=n.filter(e=>this.hasBuilding(e.getBuildingId()))}})}e||this.servicesService.getModalService().info("No buildings to combine")}}let iR=(()=>{class e extends tR{constructor(e,n,l,t,i){super(n,e,l,i,t,Du.VILLAGE,Wu.VILLAGE)}init(){this.buildings.push(new JS(this.servicesService,this.idService.getNextId(),2,0,100,100,100).build()),this.buildings.push(new JS(this.servicesService,this.idService.getNextId(),1,0,100,100,100).build()),this.resourcesService.createPeople(3),this.buildings.forEach(e=>this.landService.takeLand(e.getSize()))}getPopulation(){return this.resourcesService.getTotalPeople()}getPopulationCap(){return this.resourcesService.getPopulationCap()}moveOccupants(e,n,l,t,i){const s=n;let r=0,u=this.buildings.filter(n=>n!==e&&void 0!==n.getOccupants&&n.getOccupants()<n.getMaxSize()).sort((e,n)=>e.isWorking()&&!n.isWorking()?-1:n.isWorking()&&!e.isWorking()?1:n.getMaxSize()!==e.getMaxSize()?n.getMaxSize()-e.getMaxSize():0);for(;n>0&&r<u.length;){const e=u[r];for(;e.getOccupants()<e.getMaxSize()&&n>0;)e.addOccupant()&&(e.isWorking()||e.startProduction(),e.addFood(l/s),e.addFuel(t/s),e.addClothes(i/s),n-=1);r+=1}return n}removeRecruit(e,n=!0){const l=this.buildings.filter(e=>void 0!==e.getOccupants).map(e=>e).sort((e,n)=>e.getOccupants()===e.getMaxSize()&&n.getOccupants()===n.getMaxSize()?e.getMaxSize()>n.getMaxSize()?-1:1:e.getOccupants()===e.getMaxSize()&&n.getOccupants()<n.getMaxSize()?-1:e.getOccupants()<e.getMaxSize()&&n.getOccupants()===n.getMaxSize()?1:void 0);let t=0;if(l.forEach(e=>t+=e.getOccupants()),t>=e){for(;e>0;)for(const t of l){if(!(e>0))return!0;t.removeOccupant()&&(n&&this.resourcesService.removePeople(1),e-=1)}if(0===e)return!0}return!1}replaceWithHouses(){this.buildings.push(new eE(this.servicesService,this.idService.getNextId(),0,0,100,100,200).build()),this.landService.takeLand(yo.VILLAGE.HOUSE.SIZE),this.buildings.filter(e=>e.getBuildingType()===Ru.HUT).forEach(e=>{e.prepareDemolish(),this.demolish(e)}),this.buildings.filter(e=>e.getBuildingType()===Ru.DECONSTRUCTION).forEach(e=>this.finishDeconstruction(e))}getHousingBuildings(){return this.buildings.filter(e=>e.getBuildingType()===Ru.HUT||e.getBuildingType()===Ru.HOUSE||e.getBuildingType()===Ru.LONGHOUSE||e.getBuildingType()===Ru.TUDOR_HOUSE||e.getBuildingType()===Ru.SETTLEMENT)}addVillagers(e){let n=this.getHousingBuildings().map(e=>e).filter(e=>e.getOccupants()<e.getMaxSize()),l=e;for(;l>0&&n.length>0;)n.forEach(e=>{e.addOccupant()&&(this.resourcesService.createPeople(1),l-=1)}),n=n.filter(e=>e.getOccupants()<e.getMaxSize())}}return e.ngInjectableDef=ce({factory:function(){return new e(De(yf),De(Zv),De(sf),De(fv),De(nR))},token:e,providedIn:"root"}),e})();class sR{constructor(e,n,l){this.craftingService=e,this.resourcesService=n,this.villageService=l,this.id=Math.random(),this.amount=1,this.type=YS.NONE,this.craftingTypes=YS}getResourceName(e){return Uu.prepareResourceName(e)}ngOnInit(){}cancel(){null!==this.id&&this.craftingService.cancel(this.id)}getCost(){return this.recipe.cost}isAvailable(){for(const[e,n]of Array.from(this.recipe.cost))if(0!==this.resourcesService.hasResource(e,n,"Crafting"))return!1;return!0}checkResource(e){return 0===this.resourcesService.hasResource(e.key,e.value,"Crafting")}getResourceAmount(){return this.resourcesService.getResource(this.recipe.resource).amount}getCurrentlyCrafted(){return this.villageService.getBuildings().filter(e=>e.getBuildingType()===Ru.WORKSHOP&&e.isWorking()).map(e=>e).filter(e=>e.getRecipe()&&e.getRecipe().id===this.recipe.id).length+this.villageService.getBuildings().filter(e=>e.getBuildingType()===Ru.KITCHEN&&e.isWorking()).map(e=>e).filter(e=>e.getRecipe()&&e.getRecipe().id===this.recipe.id).length}isStarted(){return this.id>=1&&this.getCurrentlyCrafted()>0}getResourceAmountPercentage(){const e=this.resourcesService.getResource(this.recipe.resource);return Math.floor(e.amount/e.limit*100)}}var rR=Jl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{width:100%;display:inline-block}#available[_ngcontent-%COMP%]{position:relative;padding:3px;text-align:center;font-weight:100;font-size:1.1em;border:1px solid #000}#notAvailable[_ngcontent-%COMP%]{padding:3px;text-align:center;font-size:1.1em;border:1px solid #57575a}#titleGrey[_ngcontent-%COMP%]{display:inline-block;color:#57575a}.notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}.title[_ngcontent-%COMP%]{text-align:left}hr[_ngcontent-%COMP%]{border-color:#000}#progressId[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}#text[_ngcontent-%COMP%]{position:relative;z-index:2}.costTitle[_ngcontent-%COMP%]{text-align:left}.missing[_ngcontent-%COMP%]{color:var(--negative-colour)}.tooltip[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{min-width:200px}.craftingTitle[_ngcontent-%COMP%]{text-align:left}.type[_ngcontent-%COMP%]{display:inline-block}app-icon[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 auto;margin-left:3px}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}"]],data:{}});function uR(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),cr(1,null,["",""]))],null,(function(e,n){e(n,1,0,n.component.amount)}))}function oR(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),cr(1,null,["","/",""]))],null,(function(e,n){var l=n.component;e(n,1,0,l.getResourceAmount(),l.amount)}))}function aR(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),cr(1,null,["","%/","%"]))],null,(function(e,n){var l=n.component;e(n,1,0,l.getResourceAmountPercentage(),l.amount)}))}function cR(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),cr(-1,null,["\u221e"]))],null,null)}function hR(e){return gr(0,[(e()(),qs(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),cr(1,null,[" (",") "]))],null,(function(e,n){e(n,1,0,n.component.getCurrentlyCrafted())}))}function dR(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[["class","craftingTitle"]],null,null,null,null,null)),(e()(),cr(1,null,["Crafted: ",""]))],null,(function(e,n){e(n,1,0,n.component.recipe.amount)}))}function gR(e){return gr(0,[(e()(),qs(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(2,null,["",""]))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit.value)}))}function pR(e){return gr(0,[(e()(),qs(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"div",[["class","missing"]],null,null,null,null,null)),(e()(),cr(2,null,["",""]))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit.value)}))}function mR(e){return gr(0,[(e()(),qs(0,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,gR)),ai(2,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,pR)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(5,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(6,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.checkResource(n.context.$implicit)),e(n,4,0,!l.checkResource(n.context.$implicit)),e(n,6,0,l.getResourceName(n.context.$implicit.key),"resources")}),null)}function fR(e){return gr(0,[(e()(),qs(0,0,null,null,27,"div",[["appTooltip",""],["class","tooltip"],["id","available"]],null,[[null,"click"],[null,"mousemove"]],(function(e,n,l){var t=!0,i=e.component;return"mousemove"===n&&(t=!1!==qt(e,1).onmousemove(l)&&t),"click"===n&&(t=!1!==i.cancel()&&t),t}),null,null)),ai(1,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),qs(2,0,null,null,12,"div",[["id","text"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,uR)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,oR)),ai(6,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,aR)),ai(8,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,cR)),ai(10,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),cr(11,null,[" "," "])),ur(12,1),(e()(),Qs(16777216,null,null,1,null,hR)),ai(14,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(15,0,null,null,12,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),cr(16,null,[" "," "])),ur(17,1),(e()(),qs(18,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),qs(19,0,null,null,1,"div",[["class","craftingTitle"]],null,null,null,null,null)),(e()(),cr(20,null,["Difficulty: ",""])),(e()(),Qs(16777216,null,null,1,null,dR)),ai(22,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(23,0,null,null,1,"div",[["class","costTitle"]],null,null,null,null,null)),(e()(),cr(-1,null,["Cost:"])),(e()(),Qs(16777216,null,null,2,null,mR)),ai(26,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),ci(0,_a,[Nl])],(function(e,n){var l=n.component;e(n,1,0,l.id),e(n,4,0,l.type===l.craftingTypes.SELECTED),e(n,6,0,l.type===l.craftingTypes.UNTIL_X),e(n,8,0,l.type===l.craftingTypes.UNTIL_PERCENT),e(n,10,0,l.type===l.craftingTypes.CONTINUOUS),e(n,14,0,l.isStarted()),e(n,22,0,l.recipe.amount>1),e(n,26,0,ql(n,26,0,qt(n,27).transform(l.getCost())))}),(function(e,n){var l=n.component,t=ql(n,11,0,e(n,12,0,qt(n.parent,0),l.recipe.title));e(n,11,0,t),e(n,15,0,yt(1,"",l.id,""));var i=ql(n,16,0,e(n,17,0,qt(n.parent,0),l.getResourceName(l.recipe.resource)));e(n,16,0,i),e(n,20,0,l.recipe.craftingDifficulty)}))}function SR(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),cr(1,null,["",""]))],null,(function(e,n){e(n,1,0,n.component.amount)}))}function ER(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),cr(1,null,["","/",""]))],null,(function(e,n){var l=n.component;e(n,1,0,l.getResourceAmount(),l.amount)}))}function vR(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),cr(1,null,["","%/","%"]))],null,(function(e,n){var l=n.component;e(n,1,0,l.getResourceAmountPercentage(),l.amount)}))}function RR(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[["class","type"]],null,null,null,null,null)),(e()(),cr(-1,null,["\u221e"]))],null,null)}function OR(e){return gr(0,[(e()(),qs(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),cr(1,null,[" (",") "]))],null,(function(e,n){e(n,1,0,n.component.getCurrentlyCrafted())}))}function bR(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[["class","craftingTitle"]],null,null,null,null,null)),(e()(),cr(1,null,["Crafted: ",""]))],null,(function(e,n){e(n,1,0,n.component.recipe.amount)}))}function TR(e){return gr(0,[(e()(),qs(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(2,null,["",""]))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit.value)}))}function CR(e){return gr(0,[(e()(),qs(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"div",[["class","missing"]],null,null,null,null,null)),(e()(),cr(2,null,["",""]))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit.value)}))}function IR(e){return gr(0,[(e()(),qs(0,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,TR)),ai(2,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,CR)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(5,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(6,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.checkResource(n.context.$implicit)),e(n,4,0,!l.checkResource(n.context.$implicit)),e(n,6,0,l.getResourceName(n.context.$implicit.key),"resources")}),null)}function yR(e){return gr(0,[(e()(),qs(0,0,null,null,27,"div",[["appTooltip",""],["class","tooltip"],["id","notAvailable"]],null,[[null,"click"],[null,"mousemove"]],(function(e,n,l){var t=!0,i=e.component;return"mousemove"===n&&(t=!1!==qt(e,1).onmousemove(l)&&t),"click"===n&&(t=!1!==i.cancel()&&t),t}),null,null)),ai(1,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),qs(2,0,null,null,12,"div",[["id","titleGrey"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,SR)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,ER)),ai(6,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,vR)),ai(8,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,RR)),ai(10,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),cr(11,null,[" "," "])),ur(12,1),(e()(),Qs(16777216,null,null,1,null,OR)),ai(14,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(15,0,null,null,12,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),cr(16,null,[" "," "])),ur(17,1),(e()(),qs(18,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),qs(19,0,null,null,1,"div",[["class","craftingTitle"]],null,null,null,null,null)),(e()(),cr(20,null,["Difficulty: ",""])),(e()(),Qs(16777216,null,null,1,null,bR)),ai(22,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(23,0,null,null,1,"div",[["class","costTitle"]],null,null,null,null,null)),(e()(),cr(-1,null,["Cost:"])),(e()(),Qs(16777216,null,null,2,null,IR)),ai(26,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),ci(0,_a,[Nl])],(function(e,n){var l=n.component;e(n,1,0,l.id),e(n,4,0,l.type===l.craftingTypes.SELECTED),e(n,6,0,l.type===l.craftingTypes.UNTIL_X),e(n,8,0,l.type===l.craftingTypes.UNTIL_PERCENT),e(n,10,0,l.type===l.craftingTypes.CONTINUOUS),e(n,14,0,l.isStarted()),e(n,22,0,l.recipe.amount>1),e(n,26,0,ql(n,26,0,qt(n,27).transform(l.getCost())))}),(function(e,n){var l=n.component,t=ql(n,11,0,e(n,12,0,qt(n.parent,0),l.recipe.title));e(n,11,0,t),e(n,15,0,yt(1,"",l.id,""));var i=ql(n,16,0,e(n,17,0,qt(n.parent,0),l.getResourceName(l.recipe.resource)));e(n,16,0,i),e(n,20,0,l.recipe.craftingDifficulty)}))}function AR(e){return gr(0,[ci(0,Na,[]),(e()(),qs(1,0,null,null,4,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,fR)),ai(3,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,yR)),ai(5,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,3,0,l.isAvailable()),e(n,5,0,!l.isAvailable())}),null)}const NR=new be("cdk-dir-doc",{providedIn:"root",factory:function(){return Le(ka)}});let _R=(()=>{class e{constructor(e){if(this.value="ltr",this.change=new Di,e){const n=e.documentElement?e.documentElement.dir:null,l=(e.body?e.body.dir:null)||n;this.value="ltr"===l||"rtl"===l?l:"ltr"}}ngOnDestroy(){this.change.complete()}}return e.ngInjectableDef=ce({factory:function(){return new e(De(NR,8))},token:e,providedIn:"root"}),e})();class wR{constructor(e){this.gameService=e}ngOnInit(){}isCookingEnabled(){return this.gameService.isEnabled(Iu.KITCHEN)}}var PR=Jl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:-webkit-box;display:flex;height:100%;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.entry[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:auto;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:100%;text-align:center;border-right:2px solid #000;border-bottom:1px solid #000;cursor:pointer;text-decoration:none;color:#000;font-size:1em}.entry[_ngcontent-%COMP%]:last-of-type{border:none;border-bottom:1px solid #000}.entry.active[_ngcontent-%COMP%]{background:var(--active-colour)}"]],data:{}});function xR(e){return gr(0,[(e()(),qs(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/crafting/cooking"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==qt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ai(1,671744,[[4,4]],0,ap,[up,qd,Bo],{routerLink:[0,"routerLink"]},null),ai(2,1720320,null,2,hp,[up,ol,gl,[2,op],[2,ap]],{routerLinkActive:[0,"routerLinkActive"]},null),nr(603979776,3,{links:1}),nr(603979776,4,{linksWithHrefs:1}),(e()(),cr(-1,null,["Cooking"]))],(function(e,n){e(n,1,0,"/crafting/cooking"),e(n,2,0,"active")}),(function(e,n){e(n,0,0,qt(n,1).target,qt(n,1).href)}))}function kR(e){return gr(0,[(e()(),qs(0,0,null,null,8,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/crafting/crafting"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==qt(e,2).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ai(2,671744,[[2,4]],0,ap,[up,qd,Bo],{routerLink:[0,"routerLink"]},null),ai(3,1720320,null,2,hp,[up,ol,gl,[2,op],[2,ap]],{routerLinkActive:[0,"routerLinkActive"]},null),nr(603979776,1,{links:1}),nr(603979776,2,{linksWithHrefs:1}),(e()(),cr(-1,null,["Crafting"])),(e()(),Qs(16777216,null,null,1,null,xR)),ai(8,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,"/crafting/crafting"),e(n,3,0,"active"),e(n,8,0,l.isCookingEnabled())}),(function(e,n){e(n,1,0,qt(n,2).target,qt(n,2).href)}))}class MR{constructor(e,n,l,t,i){this.recipeService=e,this.resourcesService=n,this.craftingService=l,this.modalService=t,this.changeDetectorRef=i,this.craftingTypes=YS,this.filterText="",this.amount=1,this.craftingType=this.craftingTypes.SELECTED,this.bookPage=_u[_u.ALL]}ngOnInit(){this.craftingService.registerForUpdate().subscribe(()=>{this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges()}),this.craftingType=this.craftingService.getCraftingType()}getRecipes(){return this.filterText&&this.filterText.length>0?this.recipeService.getRecipes().filter(e=>e.available&&(this.resourcesService.getResourceTypes(e.getResource()).includes(_u[this.bookPage])&&e.title.toLowerCase().includes(this.filterText.toLowerCase())||this.resourcesService.getResourceTypes(e.getResource()).includes(_u[this.bookPage])&&Uu.prepareResourceName(e.getResource()).toLowerCase().includes(this.filterText.toLowerCase()))):this.recipeService.getRecipes().filter(e=>e.available&&this.resourcesService.getResourceTypes(e.getResource()).includes(_u[this.bookPage]))}getEntries(){const e=[];return e.push(_u[_u.ALL]),e.push(_u[_u.PROCESSED]),e.push(_u[_u.TOOLS]),e.push(_u[_u.FOOD]),e.push(_u[_u.OTHER]),e}select(e){this.bookPage=e}craft(e,n){this.validateAmountInput()&&this.craftingService.craft(e,n,this.amount,this.craftingType)}getQueue(){return this.craftingService.getCraftingQueue()}drop(e){this.craftingService.moveRecipeInCraftingQueue(e)}getQueueMaxSize(){return this.craftingService.getCraftingQueueMaxSize()}validateAmountInput(){return!(isNaN(this.amount)||Number(this.amount)<1)||(this.modalService.info("Invalid craft amount"),this.amount=1,!1)}updateCraftingType(){this.craftingService.setCraftingType(this.craftingType)}}var DR=Jl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#boxes[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;border:1px solid #000;height:95%;margin:.5%;text-align:center}#recipes[_ngcontent-%COMP%]{text-align:center;-webkit-box-flex:0;flex:0 0 74.3%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;border:1px solid #000;-webkit-box-align:center;align-items:center}.queue[_ngcontent-%COMP%]{text-align:center;-webkit-box-flex:0;flex:0 0 25%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;border:1px solid #000;-webkit-box-align:center;align-items:center}#queueRecipes[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}.title[_ngcontent-%COMP%]{width:100.5%;font-weight:bolder;font-size:1.1em;display:inline-block;border-bottom:1px solid #000}#modes[_ngcontent-%COMP%]{margin-top:-1px;padding:0;margin-bottom:5px}#recipesBook[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;height:100%;width:100%}#menu[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;border-right:1px solid #000;-webkit-box-flex:0;flex:0 0 10%}.entry[_ngcontent-%COMP%]{display:-webkit-box;display:flex;border-bottom:1px solid #000;-webkit-box-flex:1;flex:1 0 0;height:100%;width:100%;margin-right:-30px;font-size:.8em;font-weight:600;cursor:pointer}.entry[_ngcontent-%COMP%]:last-of-type{border-bottom:none}.entryText[_ngcontent-%COMP%]{-webkit-transform:rotate(-90deg);-moz-transform:rotate(-90deg);-ms-transform:rotate(-90deg);-o-transform:rotate(-90deg)}.inactiveEntry[_ngcontent-%COMP%]{height:100%;width:100%;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}.activeEntry[_ngcontent-%COMP%]{height:100%;width:100%;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;background-color:var(--active-colour)}#book[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 90%;width:100%}#bookRecipes[_ngcontent-%COMP%]{overflow-y:auto;border-top:1px solid #000;height:84.5%}app-recipe[_ngcontent-%COMP%]{font-size:.8em;display:inline-block;width:130px;margin:4px 6px;cursor:pointer}#side[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;font-size:.8em;margin:1%;vertical-align:bottom}#amount[_ngcontent-%COMP%], #filter[_ngcontent-%COMP%]{font-size:1em;width:20%;margin:1%;display:block;vertical-align:bottom}#filter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:1.05em;margin-left:0;padding:0;border:none;outline:0}#amount[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:65%;font-size:1.15em;margin-left:0;padding:0;border:none;outline:0}.radios[_ngcontent-%COMP%]{text-align:left;font-size:.9em}#progressButton[_ngcontent-%COMP%]{font-size:.6em}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;width:85px;margin:auto}#help1[_ngcontent-%COMP%]{font-size:.7em;font-weight:400;text-align:left}"]],data:{}});function LR(e){return gr(0,[(e()(),qs(0,0,null,null,2,"div",[["class","activeEntry"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"div",[["class","entryText"]],null,null,null,null,null)),(e()(),cr(2,null,["",""]))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit)}))}function FR(e){return gr(0,[(e()(),qs(0,0,null,null,2,"div",[["class","inactiveEntry"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"div",[["class","entryText"]],null,null,null,null,null)),(e()(),cr(2,null,["",""]))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit)}))}function UR(e){return gr(0,[(e()(),qs(0,0,null,null,4,"div",[["class","entry"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.select(e.context.$implicit)&&t),t}),null,null)),(e()(),Qs(16777216,null,null,1,null,LR)),ai(2,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,FR)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.bookPage===n.context.$implicit),e(n,4,0,l.bookPage!==n.context.$implicit)}),null)}function HR(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-recipe",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.craft(l,e.context.$implicit)&&t),t}),AR,rR)),ai(1,114688,null,0,sR,[$S,yf,iR],{recipe:[0,"recipe"]},null)],(function(e,n){e(n,1,0,n.context.$implicit)}),null)}function GR(e){return gr(0,[(e()(),qs(0,16777216,null,null,6,"app-recipe",[["cdkDrag",""],["class","cdk-drag"]],[[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],null,null,AR,rR)),hi(6144,null,FS,null,[HS]),ai(2,4866048,[[1,4]],3,HS,[ol,[3,LS],ka,hs,Ml,US,[2,_R],DS,_n],null,null),nr(603979776,2,{_handles:1}),nr(603979776,3,{_previewTemplate:0}),nr(603979776,4,{_placeholderTemplate:0}),ai(6,114688,null,0,sR,[$S,yf,iR],{id:[0,"id"],recipe:[1,"recipe"],amount:[2,"amount"],type:[3,"type"]},null),(e()(),Qs(0,null,null,0))],(function(e,n){e(n,6,0,n.context.$implicit.id,n.context.$implicit.recipe,n.context.$implicit.amount,n.context.$implicit.type)}),(function(e,n){e(n,0,0,qt(n,2).disabled,qt(n,2)._dragRef.isDragging())}))}function BR(e){return gr(0,[(e()(),qs(0,0,null,null,102,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"app-crafting-top-menu",[],null,null,null,kR,PR)),ai(3,114688,null,0,wR,[Sf],null,null),(e()(),qs(4,0,null,null,98,"div",[["id","boxes"]],null,null,null,null,null)),(e()(),qs(5,0,null,null,86,"div",[["id","recipes"]],null,null,null,null,null)),(e()(),qs(6,0,null,null,17,"span",[["class","title"]],null,null,null,null,null)),(e()(),qs(7,0,null,null,16,"span",[["class","icon"]],null,null,null,null,null)),(e()(),cr(-1,null,["Recipes "])),(e()(),qs(9,0,null,null,14,"div",[["appTooltip",""],["class","tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==qt(e,10).onmousemove(l)&&t),t}),null,null)),ai(10,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),qs(11,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(12,114688,null,0,$p,[],{name:[0,"name"],title:[1,"title"]},null),(e()(),qs(13,0,null,null,10,"span",[["id","help1"]],null,null,null,null,null)),(e()(),cr(-1,null,[" In this menu you can define orders for your workshops."])),(e()(),qs(15,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(16,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),cr(-1,null,[" Each workshop will try to take order from the orders lists starting from top."])),(e()(),qs(18,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(19,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),cr(-1,null,[" Only orders that meet requirements will be taken by workshops."])),(e()(),qs(21,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(22,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),cr(-1,null,[" You can add order to the top of the list by holding shift while clicking on a recipe. "])),(e()(),qs(24,0,null,null,67,"div",[["id","recipesBook"]],null,null,null,null,null)),(e()(),qs(25,0,null,null,2,"div",[["id","menu"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,UR)),ai(27,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(28,0,null,null,63,"div",[["id","book"]],null,null,null,null,null)),(e()(),qs(29,0,null,null,59,"div",[["id","side"]],null,null,null,null,null)),(e()(),qs(30,0,null,null,8,"div",[["id","filter"]],null,null,null,null,null)),(e()(),cr(-1,null,[" Filter:"])),(e()(),qs(32,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(33,0,null,null,5,"input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,34)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,34).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,34)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,34)._compositionEnd(l.target.value)&&t),"ngModelChange"===n&&(t=!1!==(i.filterText=l)&&t),t}),null,null)),ai(34,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),hi(1024,null,qp,(function(e){return[e]}),[Jp]),ai(36,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(38,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(39,0,null,null,9,"div",[["id","amount"]],null,null,null,null,null)),(e()(),cr(-1,null,[" amount:"])),(e()(),qs(41,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(42,0,null,null,6,"input",[["min","1"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,43)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,43).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,43)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,43)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,44).onChange(l.target.value)&&t),"input"===n&&(t=!1!==qt(e,44).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,44).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.amount=l)&&t),t}),null,null)),ai(43,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(44,16384,null,0,gm,[gl,ol],null,null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,gm]),ai(46,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(48,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(49,0,null,null,29,"div",[["class","radios"]],null,null,null,null,null)),(e()(),qs(50,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),qs(51,0,null,null,6,"input",[["name","type"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,52)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,52).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,52)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,52)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,53).onChange()&&t),"blur"===n&&(t=!1!==qt(e,53).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.craftingType=l)&&t),"change"===n&&(t=!1!==i.updateCraftingType()&&t),t}),null,null)),ai(52,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(53,212992,null,0,mm,[gl,ol,pm,kn],{name:[0,"name"],value:[1,"value"]},null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,mm]),ai(55,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(57,16384,null,0,im,[[4,tm]],null,null),(e()(),cr(-1,null,[" selected amount "])),(e()(),qs(59,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(60,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),qs(61,0,null,null,6,"input",[["name","type"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,62)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,62).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,62)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,62)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,63).onChange()&&t),"blur"===n&&(t=!1!==qt(e,63).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.craftingType=l)&&t),"change"===n&&(t=!1!==i.updateCraftingType()&&t),t}),null,null)),ai(62,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(63,212992,null,0,mm,[gl,ol,pm,kn],{name:[0,"name"],value:[1,"value"]},null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,mm]),ai(65,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(67,16384,null,0,im,[[4,tm]],null,null),(e()(),cr(-1,null,[" until X available "])),(e()(),qs(69,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(70,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),qs(71,0,null,null,6,"input",[["name","type"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,72)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,72).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,72)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,72)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,73).onChange()&&t),"blur"===n&&(t=!1!==qt(e,73).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.craftingType=l)&&t),"change"===n&&(t=!1!==i.updateCraftingType()&&t),t}),null,null)),ai(72,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(73,212992,null,0,mm,[gl,ol,pm,kn],{name:[0,"name"],value:[1,"value"]},null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,mm]),ai(75,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(77,16384,null,0,im,[[4,tm]],null,null),(e()(),cr(-1,null,[" until % available "])),(e()(),qs(79,0,null,null,9,"div",[["class","radios"]],null,null,null,null,null)),(e()(),qs(80,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),qs(81,0,null,null,6,"input",[["name","type"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,82)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,82).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,82)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,82)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,83).onChange()&&t),"blur"===n&&(t=!1!==qt(e,83).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.craftingType=l)&&t),"change"===n&&(t=!1!==i.updateCraftingType()&&t),t}),null,null)),ai(82,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(83,212992,null,0,mm,[gl,ol,pm,kn],{name:[0,"name"],value:[1,"value"]},null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,mm]),ai(85,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(87,16384,null,0,im,[[4,tm]],null,null),(e()(),cr(-1,null,[" continuous "])),(e()(),qs(89,0,null,null,2,"div",[["id","bookRecipes"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,HR)),ai(91,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(92,0,null,null,10,"div",[["class","queue"]],null,null,null,null,null)),(e()(),qs(93,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),cr(-1,null,["Orders"])),(e()(),cr(95,null,[" ","/"," "])),(e()(),qs(96,0,null,null,6,"div",[["cdkDropList",""],["class","cdk-drop-list"],["id","queueRecipes"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],(function(e,n,l){var t=!0;return"cdkDropListDropped"===n&&(t=!1!==e.component.drop(l)&&t),t}),null,null)),hi(6144,null,LS,null,[VS]),ai(98,1196032,null,1,VS,[ol,DS,_n,[2,_R],[3,BS]],{id:[0,"id"]},{dropped:"cdkDropListDropped"}),nr(603979776,1,{_draggables:1}),hi(256,null,BS,void 0,[]),(e()(),Qs(16777216,null,null,1,null,GR)),ai(102,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,3,0),e(n,10,0,"help1"),e(n,12,0,"question",""),e(n,27,0,l.getEntries()),e(n,36,0,l.filterText),e(n,46,0,l.amount),e(n,53,0,"type",l.craftingTypes.SELECTED),e(n,55,0,"type",l.craftingType),e(n,63,0,"type",l.craftingTypes.UNTIL_X),e(n,65,0,"type",l.craftingType),e(n,73,0,"type",l.craftingTypes.UNTIL_PERCENT),e(n,75,0,"type",l.craftingType),e(n,83,0,"type",l.craftingTypes.CONTINUOUS),e(n,85,0,"type",l.craftingType),e(n,91,0,l.getRecipes()),e(n,98,0,"queueRecipes"),e(n,102,0,l.getQueue())}),(function(e,n){var l=n.component;e(n,33,0,qt(n,38).ngClassUntouched,qt(n,38).ngClassTouched,qt(n,38).ngClassPristine,qt(n,38).ngClassDirty,qt(n,38).ngClassValid,qt(n,38).ngClassInvalid,qt(n,38).ngClassPending),e(n,42,0,qt(n,48).ngClassUntouched,qt(n,48).ngClassTouched,qt(n,48).ngClassPristine,qt(n,48).ngClassDirty,qt(n,48).ngClassValid,qt(n,48).ngClassInvalid,qt(n,48).ngClassPending),e(n,51,0,qt(n,57).ngClassUntouched,qt(n,57).ngClassTouched,qt(n,57).ngClassPristine,qt(n,57).ngClassDirty,qt(n,57).ngClassValid,qt(n,57).ngClassInvalid,qt(n,57).ngClassPending),e(n,61,0,qt(n,67).ngClassUntouched,qt(n,67).ngClassTouched,qt(n,67).ngClassPristine,qt(n,67).ngClassDirty,qt(n,67).ngClassValid,qt(n,67).ngClassInvalid,qt(n,67).ngClassPending),e(n,71,0,qt(n,77).ngClassUntouched,qt(n,77).ngClassTouched,qt(n,77).ngClassPristine,qt(n,77).ngClassDirty,qt(n,77).ngClassValid,qt(n,77).ngClassInvalid,qt(n,77).ngClassPending),e(n,81,0,qt(n,87).ngClassUntouched,qt(n,87).ngClassTouched,qt(n,87).ngClassPristine,qt(n,87).ngClassDirty,qt(n,87).ngClassValid,qt(n,87).ngClassInvalid,qt(n,87).ngClassPending),e(n,95,0,l.getQueue().length,l.getQueueMaxSize()),e(n,96,0,qt(n,98).id,qt(n,98).disabled,qt(n,98)._dropListRef.isDragging(),qt(n,98)._dropListRef.isReceiving())}))}function WR(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-crafting",[],null,null,null,BR,DR)),ai(1,114688,null,0,MR,[Wf,yf,$S,pf,_n],null,null)],(function(e,n){e(n,1,0)}),null)}var VR=Ht("app-crafting",MR,WR,{},{},[]);class zR{constructor(e,n,l,t,i){this.recipeService=e,this.resourcesService=n,this.craftingService=l,this.modalService=t,this.changeDetectorRef=i,this.craftingTypes=YS,this.filterText="",this.amount=1,this.craftingType=this.craftingTypes.SELECTED,this.bookPage=_u[_u.ALL]}ngOnInit(){this.craftingService.registerForUpdate().subscribe(()=>{this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges()}),this.craftingType=this.craftingService.getCookingType()}getRecipes(){return this.filterText&&this.filterText.length>0?this.recipeService.getCookingRecipes().filter(e=>e.available&&(this.resourcesService.getResourceTypes(e.getResource()).includes(_u[this.bookPage])&&e.title.toLowerCase().includes(this.filterText.toLowerCase())||this.resourcesService.getResourceTypes(e.getResource()).includes(_u[this.bookPage])&&Uu.prepareResourceName(e.getResource()).toLowerCase().includes(this.filterText.toLowerCase()))):this.recipeService.getCookingRecipes().filter(e=>e.available&&this.resourcesService.getResourceTypes(e.getResource()).includes(_u[this.bookPage]))}getEntries(){const e=[];return e.push(_u[_u.FOOD]),e}select(e){this.bookPage=e}craft(e,n){this.validateAmountInput()&&this.craftingService.cook(e,n,this.amount,this.craftingType)}getQueue(){return this.craftingService.getCookingQueue()}drop(e){this.craftingService.moveRecipeInCookingQueue(e)}getQueueMaxSize(){return this.craftingService.getCookingQueueMaxSize()}validateAmountInput(){return!(isNaN(this.amount)||Number(this.amount)<1)||(this.modalService.info("Invalid cook amount"),this.amount=1,!1)}updateCraftingType(){this.craftingService.setCookingType(this.craftingType)}}var YR=Jl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#boxes[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;border:1px solid #000;height:95%;margin:.5%;text-align:center}#recipes[_ngcontent-%COMP%]{text-align:center;-webkit-box-flex:0;flex:0 0 74.3%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;border:1px solid #000;-webkit-box-align:center;align-items:center}.queue[_ngcontent-%COMP%]{text-align:center;-webkit-box-flex:0;flex:0 0 25%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;border:1px solid #000;-webkit-box-align:center;align-items:center}#queueRecipes[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}.title[_ngcontent-%COMP%]{width:100.5%;font-weight:bolder;font-size:1.1em;display:inline-block;border-bottom:1px solid #000}#modes[_ngcontent-%COMP%]{margin-top:-1px;padding:0;margin-bottom:5px}#recipesBook[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;height:100%;width:100%}#menu[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;border-right:1px solid #000;-webkit-box-flex:0;flex:0 0 10%}.entry[_ngcontent-%COMP%]{display:-webkit-box;display:flex;border-bottom:1px solid #000;-webkit-box-flex:1;flex:1 0 0;height:100%;width:100%;margin-right:-30px;font-size:.8em;font-weight:600;cursor:pointer}.entry[_ngcontent-%COMP%]:last-of-type{border-bottom:none}.entryText[_ngcontent-%COMP%]{-webkit-transform:rotate(-90deg);-moz-transform:rotate(-90deg);-ms-transform:rotate(-90deg);-o-transform:rotate(-90deg)}.inactiveEntry[_ngcontent-%COMP%]{height:100%;width:100%;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}.activeEntry[_ngcontent-%COMP%]{height:100%;width:100%;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;background-color:var(--active-colour)}#book[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 90%;width:100%}#bookRecipes[_ngcontent-%COMP%]{overflow-y:auto;border-top:1px solid #000}app-recipe[_ngcontent-%COMP%]{font-size:.8em;display:inline-block;width:130px;margin:4px 6px;cursor:pointer}#side[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;font-size:.8em;margin:1%;vertical-align:bottom}#amount[_ngcontent-%COMP%], #filter[_ngcontent-%COMP%]{font-size:1em;width:20%;margin:1%;display:block;vertical-align:bottom}#filter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:1.05em;margin-left:0;padding:0;border:none;outline:0}#amount[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:65%;font-size:1.15em;margin-left:0;padding:0;border:none;outline:0}.radios[_ngcontent-%COMP%]{text-align:left;font-size:.9em}#progressButton[_ngcontent-%COMP%]{font-size:.6em}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;width:85px;margin:auto}#help1[_ngcontent-%COMP%]{font-size:.7em;font-weight:400;text-align:left}"]],data:{}});function $R(e){return gr(0,[(e()(),qs(0,0,null,null,2,"div",[["class","activeEntry"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"div",[["class","entryText"]],null,null,null,null,null)),(e()(),cr(2,null,["",""]))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit)}))}function KR(e){return gr(0,[(e()(),qs(0,0,null,null,2,"div",[["class","inactiveEntry"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"div",[["class","entryText"]],null,null,null,null,null)),(e()(),cr(2,null,["",""]))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit)}))}function jR(e){return gr(0,[(e()(),qs(0,0,null,null,4,"div",[["class","entry"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.select(e.context.$implicit)&&t),t}),null,null)),(e()(),Qs(16777216,null,null,1,null,$R)),ai(2,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,KR)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.bookPage===n.context.$implicit),e(n,4,0,l.bookPage!==n.context.$implicit)}),null)}function QR(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-recipe",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.craft(l,e.context.$implicit)&&t),t}),AR,rR)),ai(1,114688,null,0,sR,[$S,yf,iR],{recipe:[0,"recipe"]},null)],(function(e,n){e(n,1,0,n.context.$implicit)}),null)}function qR(e){return gr(0,[(e()(),qs(0,16777216,null,null,6,"app-recipe",[["cdkDrag",""],["class","cdk-drag"]],[[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],null,null,AR,rR)),hi(6144,null,FS,null,[HS]),ai(2,4866048,[[1,4]],3,HS,[ol,[3,LS],ka,hs,Ml,US,[2,_R],DS,_n],null,null),nr(603979776,2,{_handles:1}),nr(603979776,3,{_previewTemplate:0}),nr(603979776,4,{_placeholderTemplate:0}),ai(6,114688,null,0,sR,[$S,yf,iR],{id:[0,"id"],recipe:[1,"recipe"],amount:[2,"amount"],type:[3,"type"]},null),(e()(),Qs(0,null,null,0))],(function(e,n){e(n,6,0,n.context.$implicit.id,n.context.$implicit.recipe,n.context.$implicit.amount,n.context.$implicit.type)}),(function(e,n){e(n,0,0,qt(n,2).disabled,qt(n,2)._dragRef.isDragging())}))}function XR(e){return gr(0,[(e()(),qs(0,0,null,null,102,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"app-crafting-top-menu",[],null,null,null,kR,PR)),ai(3,114688,null,0,wR,[Sf],null,null),(e()(),qs(4,0,null,null,98,"div",[["id","boxes"]],null,null,null,null,null)),(e()(),qs(5,0,null,null,86,"div",[["id","recipes"]],null,null,null,null,null)),(e()(),qs(6,0,null,null,17,"span",[["class","title"]],null,null,null,null,null)),(e()(),qs(7,0,null,null,16,"span",[["class","icon"]],null,null,null,null,null)),(e()(),cr(-1,null,["Recipes "])),(e()(),qs(9,0,null,null,14,"div",[["appTooltip",""],["class","tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==qt(e,10).onmousemove(l)&&t),t}),null,null)),ai(10,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),qs(11,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(12,114688,null,0,$p,[],{name:[0,"name"],title:[1,"title"]},null),(e()(),qs(13,0,null,null,10,"span",[["id","help1"]],null,null,null,null,null)),(e()(),cr(-1,null,[" In this menu you can define orders for your kitchens."])),(e()(),qs(15,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(16,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),cr(-1,null,[" Each kitchen will try to take order from the orders lists starting from top."])),(e()(),qs(18,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(19,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),cr(-1,null,[" Only orders that meet requirements will be taken by kitchen."])),(e()(),qs(21,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(22,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),cr(-1,null,[" You can add order to the top of the list by holding shift while clicking on a recipe. "])),(e()(),qs(24,0,null,null,67,"div",[["id","recipesBook"]],null,null,null,null,null)),(e()(),qs(25,0,null,null,2,"div",[["id","menu"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,jR)),ai(27,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(28,0,null,null,63,"div",[["id","book"]],null,null,null,null,null)),(e()(),qs(29,0,null,null,59,"div",[["id","side"]],null,null,null,null,null)),(e()(),qs(30,0,null,null,8,"div",[["id","filter"]],null,null,null,null,null)),(e()(),cr(-1,null,[" Filter:"])),(e()(),qs(32,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(33,0,null,null,5,"input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,34)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,34).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,34)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,34)._compositionEnd(l.target.value)&&t),"ngModelChange"===n&&(t=!1!==(i.filterText=l)&&t),t}),null,null)),ai(34,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),hi(1024,null,qp,(function(e){return[e]}),[Jp]),ai(36,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(38,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(39,0,null,null,9,"div",[["id","amount"]],null,null,null,null,null)),(e()(),cr(-1,null,[" amount:"])),(e()(),qs(41,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(42,0,null,null,6,"input",[["min","1"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,43)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,43).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,43)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,43)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,44).onChange(l.target.value)&&t),"input"===n&&(t=!1!==qt(e,44).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,44).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.amount=l)&&t),t}),null,null)),ai(43,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(44,16384,null,0,gm,[gl,ol],null,null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,gm]),ai(46,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(48,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(49,0,null,null,29,"div",[["class","radios"]],null,null,null,null,null)),(e()(),qs(50,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),qs(51,0,null,null,6,"input",[["name","type"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,52)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,52).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,52)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,52)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,53).onChange()&&t),"blur"===n&&(t=!1!==qt(e,53).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.craftingType=l)&&t),"change"===n&&(t=!1!==i.updateCraftingType()&&t),t}),null,null)),ai(52,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(53,212992,null,0,mm,[gl,ol,pm,kn],{name:[0,"name"],value:[1,"value"]},null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,mm]),ai(55,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(57,16384,null,0,im,[[4,tm]],null,null),(e()(),cr(-1,null,[" selected amount "])),(e()(),qs(59,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(60,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),qs(61,0,null,null,6,"input",[["name","type"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,62)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,62).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,62)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,62)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,63).onChange()&&t),"blur"===n&&(t=!1!==qt(e,63).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.craftingType=l)&&t),"change"===n&&(t=!1!==i.updateCraftingType()&&t),t}),null,null)),ai(62,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(63,212992,null,0,mm,[gl,ol,pm,kn],{name:[0,"name"],value:[1,"value"]},null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,mm]),ai(65,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(67,16384,null,0,im,[[4,tm]],null,null),(e()(),cr(-1,null,[" until X available "])),(e()(),qs(69,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(70,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),qs(71,0,null,null,6,"input",[["name","type"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,72)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,72).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,72)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,72)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,73).onChange()&&t),"blur"===n&&(t=!1!==qt(e,73).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.craftingType=l)&&t),"change"===n&&(t=!1!==i.updateCraftingType()&&t),t}),null,null)),ai(72,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(73,212992,null,0,mm,[gl,ol,pm,kn],{name:[0,"name"],value:[1,"value"]},null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,mm]),ai(75,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(77,16384,null,0,im,[[4,tm]],null,null),(e()(),cr(-1,null,[" until % available "])),(e()(),qs(79,0,null,null,9,"div",[["class","radios"]],null,null,null,null,null)),(e()(),qs(80,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),qs(81,0,null,null,6,"input",[["name","type"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,82)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,82).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,82)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,82)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,83).onChange()&&t),"blur"===n&&(t=!1!==qt(e,83).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.craftingType=l)&&t),"change"===n&&(t=!1!==i.updateCraftingType()&&t),t}),null,null)),ai(82,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(83,212992,null,0,mm,[gl,ol,pm,kn],{name:[0,"name"],value:[1,"value"]},null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,mm]),ai(85,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(87,16384,null,0,im,[[4,tm]],null,null),(e()(),cr(-1,null,[" continuous "])),(e()(),qs(89,0,null,null,2,"div",[["id","bookRecipes"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,QR)),ai(91,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(92,0,null,null,10,"div",[["class","queue"]],null,null,null,null,null)),(e()(),qs(93,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),cr(-1,null,["Orders"])),(e()(),cr(95,null,[" ","/"," "])),(e()(),qs(96,0,null,null,6,"div",[["cdkDropList",""],["class","cdk-drop-list"],["id","queueRecipes"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],(function(e,n,l){var t=!0;return"cdkDropListDropped"===n&&(t=!1!==e.component.drop(l)&&t),t}),null,null)),hi(6144,null,LS,null,[VS]),ai(98,1196032,null,1,VS,[ol,DS,_n,[2,_R],[3,BS]],{id:[0,"id"]},{dropped:"cdkDropListDropped"}),nr(603979776,1,{_draggables:1}),hi(256,null,BS,void 0,[]),(e()(),Qs(16777216,null,null,1,null,qR)),ai(102,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,3,0),e(n,10,0,"help1"),e(n,12,0,"question",""),e(n,27,0,l.getEntries()),e(n,36,0,l.filterText),e(n,46,0,l.amount),e(n,53,0,"type",l.craftingTypes.SELECTED),e(n,55,0,"type",l.craftingType),e(n,63,0,"type",l.craftingTypes.UNTIL_X),e(n,65,0,"type",l.craftingType),e(n,73,0,"type",l.craftingTypes.UNTIL_PERCENT),e(n,75,0,"type",l.craftingType),e(n,83,0,"type",l.craftingTypes.CONTINUOUS),e(n,85,0,"type",l.craftingType),e(n,91,0,l.getRecipes()),e(n,98,0,"queueRecipes"),e(n,102,0,l.getQueue())}),(function(e,n){var l=n.component;e(n,33,0,qt(n,38).ngClassUntouched,qt(n,38).ngClassTouched,qt(n,38).ngClassPristine,qt(n,38).ngClassDirty,qt(n,38).ngClassValid,qt(n,38).ngClassInvalid,qt(n,38).ngClassPending),e(n,42,0,qt(n,48).ngClassUntouched,qt(n,48).ngClassTouched,qt(n,48).ngClassPristine,qt(n,48).ngClassDirty,qt(n,48).ngClassValid,qt(n,48).ngClassInvalid,qt(n,48).ngClassPending),e(n,51,0,qt(n,57).ngClassUntouched,qt(n,57).ngClassTouched,qt(n,57).ngClassPristine,qt(n,57).ngClassDirty,qt(n,57).ngClassValid,qt(n,57).ngClassInvalid,qt(n,57).ngClassPending),e(n,61,0,qt(n,67).ngClassUntouched,qt(n,67).ngClassTouched,qt(n,67).ngClassPristine,qt(n,67).ngClassDirty,qt(n,67).ngClassValid,qt(n,67).ngClassInvalid,qt(n,67).ngClassPending),e(n,71,0,qt(n,77).ngClassUntouched,qt(n,77).ngClassTouched,qt(n,77).ngClassPristine,qt(n,77).ngClassDirty,qt(n,77).ngClassValid,qt(n,77).ngClassInvalid,qt(n,77).ngClassPending),e(n,81,0,qt(n,87).ngClassUntouched,qt(n,87).ngClassTouched,qt(n,87).ngClassPristine,qt(n,87).ngClassDirty,qt(n,87).ngClassValid,qt(n,87).ngClassInvalid,qt(n,87).ngClassPending),e(n,95,0,l.getQueue().length,l.getQueueMaxSize()),e(n,96,0,qt(n,98).id,qt(n,98).disabled,qt(n,98)._dropListRef.isDragging(),qt(n,98)._dropListRef.isReceiving())}))}function ZR(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-cooking",[],null,null,null,XR,YR)),ai(1,114688,null,0,zR,[Wf,yf,$S,pf,_n],null,null)],(function(e,n){e(n,1,0)}),null)}var JR=Ht("app-cooking",zR,ZR,{},{},[]);class eO{constructor(e,n,l,t,i,s){this.id=e,this.resource=n,this.amount=l,this.buy=t,this.price=i,this.duration=s}}let nO=(()=>{class e{constructor(e,n,l){this.servicesService=e,this.optionsService=n,this.gameService=l,this.rations=To.FOOD_RATIONS,this.clothes=To.CLOTHES_RATIONS,this.alcohol=To.ALCOHOL_RATIONS,this.tax=To.TAX_RATE,this.logFiredWorkers=To.LOG_FIRED_WORKERS,this.logAutoTrade=To.LOG_AUTO_TRADE,this.logSickness=To.LOG_SICKNESS,this.logMerchant=To.LOG_MERCHANT,this.furClothes=To.ALLOW_FUR_CLOTHES,this.foodNutrition=To.SHOW_FOOD_NUTRITION,this.complexWorkers=To.COMPLEX_WORK_MANAGEMENT,this.secondHeaderRow=To.SECOND_HEADER_ROW,this.showFreeWorkers=To.SHOW_FREE_WORKERS,this.showPopulation=To.SHOW_POPULATION,this.showResearchProgress=To.SHOW_RESEARCH_PROGRESS,this.showHappiness=To.SHOW_HAPPINESS,this.showFaith=To.SHOW_FAITH,this.showRaw=To.SHOW_RAW,this.showProcessed=To.SHOW_PROCESSED,this.showFood=To.SHOW_FOOD,this.showTools=To.SHOW_TOOLS,this.defaultWorkshopResearch=To.DEFAULT_WORKSHOP_RESEARCH,this.defaultGathererFood=To.DEFAULT_GATHERER_FOOD,this.switchHunterFromTaming=To.DEFAULT_WORKSHOP_RESEARCH,this.plowInSummer=To.PLOW_IN_SUMMER,e.addService(Wu.MANAGEMENT,this),this.initFoodPriority()}initFoodPriority(){return this.foodPriority=[[]],this.servicesService.getResourcesService().getResourcesByType(_u.CONSUMABLE).forEach(e=>this.foodPriority[0].push(e.resource)),this.foodPriority}getName(){return"ManagementService"}load(e){this.rations=e.rations,this.clothes=e.clothes,this.alcohol=e.alcohol,this.tax=void 0!==e.tax?e.tax:To.TAX_RATE,this.furClothes=e.furClothes,this.foodNutrition=e.foodNutrition,this.showRaw=void 0!==e.showRaw?e.showRaw:To.SHOW_RAW,this.showProcessed=void 0!==e.showProcessed?e.showProcessed:To.SHOW_PROCESSED,this.showFood=void 0!==e.showFood?e.showFood:To.SHOW_FOOD,this.showTools=void 0!==e.showTools?e.showTools:To.SHOW_TOOLS,this.complexWorkers=e.complexWorkers,this.logFiredWorkers=void 0!==e.logFiredWorkers?e.logFiredWorkers:To.LOG_FIRED_WORKERS,this.logAutoTrade=void 0!==e.logAutoTrade?e.logAutoTrade:To.LOG_AUTO_TRADE,this.logSickness=void 0!==e.logSickness?e.logSickness:To.LOG_SICKNESS,this.logMerchant=void 0!==e.logMerchant?e.logMerchant:To.LOG_MERCHANT,this.secondHeaderRow=void 0!==e.secondHeaderRow?e.secondHeaderRow:To.SECOND_HEADER_ROW,this.showFreeWorkers=void 0!==e.showFreeWorkers?e.showFreeWorkers:To.SHOW_FREE_WORKERS,this.showPopulation=void 0!==e.showPopulation?e.showPopulation:To.SHOW_POPULATION,this.foodPriority=void 0!==e.foodPriority?e.foodPriority:this.initFoodPriority(),this.showResearchProgress=void 0!==e.showResearchProgress?e.showResearchProgress:To.SHOW_RESEARCH_PROGRESS,this.showFaith=void 0!==e.showFaith?e.showFaith:To.SHOW_FAITH,this.showHappiness=void 0!==e.showHappiness?e.showHappiness:To.SHOW_HAPPINESS,this.defaultWorkshopResearch=void 0!==e.defaultWorkshopResearch?e.defaultWorkshopResearch:To.DEFAULT_WORKSHOP_RESEARCH,this.defaultGathererFood=void 0!==e.defaultGathererFood?e.defaultGathererFood:To.DEFAULT_GATHERER_FOOD,this.switchHunterFromTaming=void 0!==e.switchHunterFromTaming?e.switchHunterFromTaming:To.SWITCH_HUNTER_FROM_TAMING,this.plowInSummer=void 0!==e.plowInSummer?e.plowInSummer:To.PLOW_IN_SUMMER,this.validateFoodPriority(),this.gameService.updateHeader(this.secondHeaderRow)}save(){return{rations:this.rations,clothes:this.clothes,alcohol:this.alcohol,tax:this.tax,furClothes:this.furClothes,foodNutrition:this.foodNutrition,showRaw:this.showRaw,showProcessed:this.showProcessed,showFood:this.showFood,showTools:this.showTools,complexWorkers:this.complexWorkers,logFiredWorkers:this.logFiredWorkers,logAutoTrade:this.logAutoTrade,logSickness:this.logSickness,logMerchant:this.logMerchant,secondHeaderRow:this.secondHeaderRow,showFreeWorkers:this.showFreeWorkers,showPopulation:this.showPopulation,foodPriority:this.foodPriority,showResearchProgress:this.showResearchProgress,showFaith:this.showFaith,showHappiness:this.showHappiness,defaultWorkshopResearch:this.defaultWorkshopResearch,defaultGathererFood:this.defaultGathererFood,switchHunterFromTaming:this.switchHunterFromTaming,plowInSummer:this.plowInSummer}}reset(e,n){!this.optionsService.getOption(rf.KEEP_MANAGEMENT_SETTINGS_ON_RESET)||e?(this.rations=To.FOOD_RATIONS,this.clothes=To.CLOTHES_RATIONS,this.alcohol=To.ALCOHOL_RATIONS,this.tax=To.TAX_RATE,this.furClothes=To.ALLOW_FUR_CLOTHES,this.foodNutrition=To.SHOW_FOOD_NUTRITION,this.showRaw=To.SHOW_RAW,this.showProcessed=To.SHOW_PROCESSED,this.showFood=To.SHOW_FOOD,this.showTools=To.SHOW_TOOLS,this.complexWorkers=To.COMPLEX_WORK_MANAGEMENT,this.logFiredWorkers=To.LOG_FIRED_WORKERS,this.logAutoTrade=To.LOG_AUTO_TRADE,this.logSickness=To.LOG_SICKNESS,this.secondHeaderRow=To.SECOND_HEADER_ROW,this.showFreeWorkers=To.SHOW_FREE_WORKERS,this.showPopulation=To.SHOW_POPULATION,this.showResearchProgress=To.SHOW_RESEARCH_PROGRESS,this.showFaith=To.SHOW_FAITH,this.showHappiness=To.SHOW_HAPPINESS,this.defaultWorkshopResearch=To.DEFAULT_WORKSHOP_RESEARCH,this.defaultGathererFood=To.DEFAULT_GATHERER_FOOD,this.switchHunterFromTaming=To.SWITCH_HUNTER_FROM_TAMING,this.plowInSummer=To.PLOW_IN_SUMMER,this.initFoodPriority()):(this.complexWorkers=To.COMPLEX_WORK_MANAGEMENT,this.validateFoodPriority()),e&&(this.complexWorkers=To.COMPLEX_WORK_MANAGEMENT,this.initFoodPriority()),this.gameService.updateHeader(this.secondHeaderRow)}getRations(){return this.rations}getClothesRations(){return this.clothes}getAlcoholRations(){return this.alcohol}setRations(e){this.rations=e}setClothesRations(e){this.clothes=e}setAlcoholRations(e){this.alcohol=e}getTaxRate(){return this.tax}setTaxRate(e){this.tax=e}toggleFurClothes(){this.furClothes=!this.furClothes}getFurClothes(){return this.furClothes}toggleFoodNutrition(){this.foodNutrition=!this.foodNutrition}getFoodNutrition(){return this.foodNutrition}toggleComplexWorkers(){this.complexWorkers=!this.complexWorkers}getComplexWorkers(){return this.complexWorkers}getSecondHeaderRow(){return this.secondHeaderRow}toggleSecondHeaderRow(){this.secondHeaderRow=!this.secondHeaderRow,this.gameService.updateHeader(this.secondHeaderRow)}getShowFreeWorkers(){return this.showFreeWorkers}toggleShowFreeWorkers(){this.showFreeWorkers=!this.showFreeWorkers}getShowPopulation(){return this.showPopulation}toggleShowPopulation(){this.showPopulation=!this.showPopulation}getShowResearchProgress(){return this.showResearchProgress}toggleShowResearchProgress(){this.showResearchProgress=!this.showResearchProgress}getFoodPriority(){if(this.gameService.isEnabled(Iu.MANAGEMENT))return this.foodPriority;{const e=[[]];return this.servicesService.getResourcesService().getResourcesByType(_u.CONSUMABLE).forEach(n=>e[0].push(n.resource)),e}}up(e,n){const l=this.foodPriority[n].findIndex(n=>n===e);n>0?(l>=0&&(this.foodPriority[n-1].push(this.foodPriority[n][l]),this.foodPriority[n].splice(l,1)),this.clearList(this.foodPriority)):(this.foodPriority.unshift([]),this.foodPriority[0].push(this.foodPriority[1][l]),this.foodPriority[1].splice(l,1))}down(e,n){const l=this.foodPriority[n].findIndex(n=>n===e);l>=0&&n+1<9&&(this.foodPriority.length<n+2&&this.foodPriority.push([]),this.foodPriority[n+1].push(this.foodPriority[n][l]),this.foodPriority[n].splice(l,1)),this.clearList(this.foodPriority)}clearList(e){for(;e.length>0&&0===e[e.length-1].length;)e.splice(e.length-1,1);for(;e.length>0&&0===e[0].length;)e.splice(0,1)}validateFoodPriority(){const e=[];this.foodPriority.forEach(n=>n.forEach(n=>e.push(n))),Ao.getResourcesByType(_u.CONSUMABLE).forEach(n=>{e.find(e=>e===bu[n[0]])||this.foodPriority[0].push(bu[n[0]])})}getShowFaith(){return this.showFaith}toggleShowFaith(){this.showFaith=!this.showFaith}getShowHappiness(){return this.showHappiness}toggleShowHappiness(){this.showHappiness=!this.showHappiness}getLogFiredWorkers(){return this.logFiredWorkers}toggleLogFiredWorkers(){this.logFiredWorkers=!this.logFiredWorkers}getDefaultWorkshopResearch(){return this.defaultWorkshopResearch}toggleDefaultWorkshopResearch(){this.defaultWorkshopResearch=!this.defaultWorkshopResearch}getDefaultGathererFood(){return this.defaultGathererFood}toggleDefaultGathererFood(){this.defaultGathererFood=!this.defaultGathererFood}getSwitchHunterFromTaming(){return this.switchHunterFromTaming}toggleSwitchHunterFromTaming(){this.switchHunterFromTaming=!this.switchHunterFromTaming}getPlowInSummer(){return this.plowInSummer}togglePlowInSummer(){this.plowInSummer=!this.plowInSummer}getLogAutoTrade(){return this.logAutoTrade}toggleLogAutoTrade(){this.logAutoTrade=!this.logAutoTrade}getShowRaw(){return this.showRaw}toggleShowRaw(){this.showRaw=!this.showRaw}getShowProcessed(){return this.showProcessed}toggleShowProcessed(){this.showProcessed=!this.showProcessed}getShowFood(){return this.showFood}toggleShowFood(){this.showFood=!this.showFood}getShowTools(){return this.showTools}toggleShowTools(){this.showTools=!this.showTools}getLogSickness(){return this.logSickness}toggleLogSickness(){this.logSickness=!this.logSickness}getLogMerchant(){return this.logMerchant}toggleLogMerchant(){this.logMerchant=!this.logMerchant}}return e.ngInjectableDef=ce({factory:function(){return new e(De(sf),De(uf),De(Sf))},token:e,providedIn:"root"}),e})(),lO=(()=>{class e{constructor(e,n,l,t,i,s,r){this.servicesService=e,this.calendarService=n,this.managementService=l,this.resourcesService=t,this.logService=i,this.soundService=s,this.modalService=r,this.offers=[],this.id=10,this.typeRadio="all",this.servicesService.addService(Wu.MARKET,this),this.calendarService.registerForDayChange().subscribe(e=>{this.offers.forEach(e=>{e.duration-=1,0===e.duration&&this.autoBuy([e])}),this.offers=this.offers.filter(e=>e.duration>0)})}autoBuy(e){e.forEach(e=>{let n=e.amount;const l=this.resourcesService.getResource(e.resource);if(e.buy&&l.options.autoTrade.autoBuyEnabled){let t=l.options.autoTrade.autoBuyAmount;l.options.autoTrade.autoBuyPercentage&&(t=Math.floor(l.limit*l.options.autoTrade.autoBuyAmount/100));let i=l.options.autoTrade.autoBuyOrder;l.amount+i<t&&t-l.amount>i&&(i=t-l.amount),n>i&&(n=i);const s=this.resourcesService.getLimit(e.resource);n>s&&(n=s),n>0&&this.resourcesService.decreaseResource(bu.COINS,this.calculatePrice(e,n),"Auto trade",!0)&&(this.resourcesService.increaseResource(e.resource,n,"Auto trade",!0),l.options.autoTrade.autoBuyOrder>0&&(l.options.autoTrade.autoBuyOrder-=n,l.options.autoTrade.autoBuyOrder<0&&(l.options.autoTrade.autoBuyOrder=0)),this.managementService.getLogAutoTrade()&&this.logService.log("auto bought "+n+" "+Uu.prepareResourceName(e.resource))),e.amount===Number(n)?this.offers.splice(this.offers.indexOf(e),1):(e.price=this.calculatePrice(e,e.amount-n),e.amount-=n)}else if(!e.buy&&l.options.autoTrade.autoSellEnabled){let t=l.options.autoTrade.autoSellAmount;l.options.autoTrade.autoSellPercentage&&(t=Math.floor(l.limit*l.options.autoTrade.autoSellAmount/100));let i=l.options.autoTrade.autoSellOrder;t<l.amount-i&&(i=l.amount-t),n>i&&(n=i),n>0&&this.resourcesService.decreaseResource(e.resource,n,"Auto trade",!0)&&(this.resourcesService.increaseResource(bu.COINS,this.calculatePrice(e,n),"Auto trade",!0),l.options.autoTrade.autoSellOrder>0&&(l.options.autoTrade.autoSellOrder-=n,l.options.autoTrade.autoSellOrder<0&&(l.options.autoTrade.autoSellOrder=0)),this.managementService.getLogAutoTrade()&&this.logService.log("auto sold "+n+" "+Uu.prepareResourceName(e.resource))),e.amount===Number(n)?this.offers.splice(this.offers.indexOf(e),1):(e.price=this.calculatePrice(e,e.amount-n),e.amount-=n)}})}nextId(){return this.id+=1,this.id-1}getName(){return"MarketService"}load(e){this.offers=e.offers,this.id=e.id}save(){return{offers:this.offers,id:this.id}}reset(e,n){this.offers=[],this.id=10}getOffers(){return this.offers}accept(e){const n=this.offers.find(n=>n.id===e);let l=!1;if(n){this.modalService.open(ju.MARKET),this.modalService.setModalValue(n);const e=this.modalService.registerForValueResponse().subscribe(t=>{if(e.unsubscribe(),null!==t&&!isNaN(t)){if(t>n.amount&&(t=n.amount),n.buy)if(t>this.resourcesService.getLimit(n.resource)){this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Selected amount exceeds available warehouse space.<br>Would you like to buy anyway?");const e=this.modalService.registerForConfirmation().subscribe(l=>{if(e.unsubscribe(),l){if(!this.resourcesService.decreaseResource(bu.COINS,this.calculatePrice(n,t),"Market",!0))return void this.modalService.info("Not enough coins to buy "+t+" "+Uu.prepareResourceName(n.resource));this.resourcesService.increaseResource(n.resource,t,"Market",!0),n.amount===Number(t)?this.offers.splice(this.offers.indexOf(n),1):(n.price=this.calculatePrice(n,n.amount-t),n.amount-=t)}})}else{if(!this.resourcesService.decreaseResource(bu.COINS,this.calculatePrice(n,t),"Market",!0))return void this.modalService.info("Not enough coins to buy "+t+" "+Uu.prepareResourceName(n.resource));this.resourcesService.increaseResource(n.resource,t,"Market",!0),l=!0}else{if(!this.resourcesService.decreaseResource(n.resource,t,"Market",!0))return void this.modalService.info("Not enough resources to sell");this.resourcesService.increaseResource(bu.COINS,this.calculatePrice(n,t),"Market",!0),l=!0}l&&(n.amount===Number(t)?this.offers.splice(this.offers.indexOf(n),1):(n.price=this.calculatePrice(n,n.amount-t),n.amount-=t))}})}else this.modalService.info("Market offer not found")}callMerchant(){const e=Array.from(this.resourcesService.getResources().values()).filter(e=>e.isVisible()).map(e=>({item:e.resource,chance:e.prioritise?15:1})),n=Yu.randomBetween(3,8),l=Yu.randomBetween(50,180);for(let t=0;t<n;t++){const n=Yu.randomWeightedExcept(e,[bu.COINS]),i=Yu.randomBetween(5,20),s=Yu.randomBetween(0,1),r=Yu.randomBetween(-5,25);let u=Ao.getResource(n).TRADE_VALUE*i;0===(u=s?Math.floor(u*(1+r/100)):Math.floor(u*(1-r/100)))?t--:this.offers.push(new eO(this.nextId(),n,i,!!s,u,l))}this.managementService.getLogMerchant()&&this.logService.log("Merchant arrived"),this.soundService.playMarket(),this.autoBuy(this.offers)}calculatePrice(e,n){return e.buy?Math.ceil(n/e.amount*e.price):Math.floor(n/e.amount*e.price)}dismiss(e){this.offers=this.offers.filter(n=>n.id!==e)}getTypeRadio(){return this.typeRadio}setTypeRadio(e){this.typeRadio=e}}return e.ngInjectableDef=ce({factory:function(){return new e(De(sf),De(hf),De(nO),De(yf),De(df),De(cf),De(pf))},token:e,providedIn:"root"}),e})();class tO{constructor(e,n,l){this.marketService=e,this.villageService=n,this.resourcesService=l,this.filterText="",this.typeRadio="all",this.dismissMode=!1}ngOnInit(){this.typeRadio=this.marketService.getTypeRadio()}getOffers(){let e;return e=null!==this.filterText&&this.filterText.length>0?this.marketService.getOffers().filter(e=>Uu.prepareResourceName(e.resource).toLowerCase().includes(this.filterText)):this.marketService.getOffers(),"buy"===this.typeRadio?e=e.filter(e=>e.buy):"sell"===this.typeRadio&&(e=e.filter(e=>!e.buy)),e}getCoins(){return this.resourcesService.getResource(bu.COINS).amount}accept(e){this.marketService.accept(e)}isMarketBuilt(){return void 0!==this.villageService.getBuildings().find(e=>e.getBuildingType()===Ru.MARKETPLACE)}getResourceName(e){return Uu.prepareResourceName(e)}calculatePiecePrice(e){return this.marketService.calculatePrice(e,1)}getResourceAmount(e){return this.resourcesService.getResource(e.resource).amount}getResourceLimit(e){return this.resourcesService.getResource(e.resource).limit}dismiss(e){this.marketService.dismiss(e)}updateTypeRadio(){this.marketService.setTypeRadio(this.typeRadio)}}var iO=Jl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:.5%;height:100%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}.boxTitle[_ngcontent-%COMP%]{text-align:center;border-bottom:2px solid #000}#side[_ngcontent-%COMP%]{float:right;font-size:1em;width:25%;margin:.5%;display:inline-block;vertical-align:bottom}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}#headers[_ngcontent-%COMP%]{margin:3px 3px 0;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;width:96.5%;text-align:center;font-size:1em;font-weight:700}#headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 24%;padding:2px;border:1px solid #000;border-left:none}#headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-of-type{border-left:1px solid #000}#market[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;border:2px solid #000;height:91.5%}#offersBox[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 85%;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;border-right:2px solid #000;height:100%;font-size:1.2em}#filterBox[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 15%;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:100%;font-size:1.2em}#offers[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;text-align:center;height:100%;overflow-y:auto}.offer[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 auto;width:98%;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;border:1px solid #000;margin:3px}.offer[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 24%;padding:2px}.offer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:.8em}#filters[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center}#filter[_ngcontent-%COMP%]{width:90%}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}.icon2[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}#noMarket[_ngcontent-%COMP%]{margin-left:112px;color:var(--negative-colour)}"]],data:{}});function sO(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[["id","noMarket"]],null,null,null,null,null)),(e()(),cr(-1,null,["No Marketplace available. No merchant will visit."]))],null,null)}function rO(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(1,null,[""," buy offer"]))],null,(function(e,n){e(n,1,0,n.component.getResourceName(n.parent.context.$implicit.resource))}))}function uO(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(1,null,[""," sell offer"]))],null,(function(e,n){e(n,1,0,n.component.getResourceName(n.parent.context.$implicit.resource))}))}function oO(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.accept(e.parent.context.$implicit.id)&&t),t}),null,null)),(e()(),cr(-1,null,["Buy"]))],null,null)}function aO(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.accept(e.parent.context.$implicit.id)&&t),t}),null,null)),(e()(),cr(-1,null,["Sell"]))],null,null)}function cO(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.dismiss(e.parent.context.$implicit.id)&&t),t}),null,null)),(e()(),cr(-1,null,["Dismiss"]))],null,null)}function hO(e){return gr(0,[(e()(),qs(0,0,null,null,30,"div",[["appTooltip",""],["class","offer tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==qt(e,1).onmousemove(l)&&t),t}),null,null)),ai(1,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),qs(2,0,null,null,11,"span",[["class","tooltipOffer"]],[[8,"id",0]],null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,rO)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,uO)),ai(6,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(7,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),cr(8,null,[" total price: ",""])),(e()(),qs(9,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),cr(10,null,[" piece price: ",""])),(e()(),qs(11,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(12,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),cr(13,null,[" storage: ","/"," "])),(e()(),qs(14,0,null,null,3,"div",[["class","icon2 "]],null,null,null,null,null)),(e()(),cr(15,null,[" "," "])),(e()(),qs(16,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(17,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),qs(18,0,null,null,3,"div",[["class","icon2"]],null,null,null,null,null)),(e()(),cr(19,null,[" "," "])),(e()(),qs(20,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(21,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),qs(22,0,null,null,1,"div",[["class","icon2"]],null,null,null,null,null)),(e()(),cr(23,null,[" "," days "])),(e()(),qs(24,0,null,null,6,"div",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,oO)),ai(26,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,aO)),ai(28,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,cO)),ai(30,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,1,0,n.context.$implicit.id),e(n,4,0,n.context.$implicit.buy),e(n,6,0,!n.context.$implicit.buy),e(n,17,0,l.getResourceName(n.context.$implicit.resource),"resources"),e(n,21,0,"coins","resources"),e(n,26,0,n.context.$implicit.buy),e(n,28,0,!n.context.$implicit.buy),e(n,30,0,l.dismissMode)}),(function(e,n){var l=n.component;e(n,2,0,yt(1,"",n.context.$implicit.id,"")),e(n,8,0,n.context.$implicit.price),e(n,10,0,l.calculatePiecePrice(n.context.$implicit)),e(n,13,0,l.getResourceAmount(n.context.$implicit),l.getResourceLimit(n.context.$implicit)),e(n,15,0,n.context.$implicit.amount),e(n,19,0,n.context.$implicit.price),e(n,23,0,n.context.$implicit.duration)}))}function dO(e){return gr(0,[(e()(),qs(0,0,null,null,77,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["Market"])),(e()(),qs(4,0,null,null,5,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(5,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(6,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(7,null,[" "," "])),(e()(),Qs(16777216,null,null,1,null,sO)),ai(9,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(10,0,null,null,67,"div",[["id","market"]],null,null,null,null,null)),(e()(),qs(11,0,null,null,15,"div",[["id","offersBox"]],null,null,null,null,null)),(e()(),qs(12,0,null,null,2,"div",[["class","boxTitle"]],null,null,null,null,null)),(e()(),qs(13,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["Offers"])),(e()(),qs(15,0,null,null,8,"div",[["id","headers"]],null,null,null,null,null)),(e()(),qs(16,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["offer"])),(e()(),qs(18,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["price"])),(e()(),qs(20,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["duration"])),(e()(),qs(22,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["action"])),(e()(),qs(24,0,null,null,2,"div",[["id","offers"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,hO)),ai(26,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(27,0,null,null,50,"div",[["id","filterBox"]],null,null,null,null,null)),(e()(),qs(28,0,null,null,2,"div",[["class","boxTitle"]],null,null,null,null,null)),(e()(),qs(29,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["Filters"])),(e()(),qs(31,0,null,null,46,"div",[["id","filters"]],null,null,null,null,null)),(e()(),qs(32,0,null,null,5,"input",[["id","filter"],["placeholder","search"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,33)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,33).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,33)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,33)._compositionEnd(l.target.value)&&t),"ngModelChange"===n&&(t=!1!==(i.filterText=l)&&t),t}),null,null)),ai(33,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),hi(1024,null,qp,(function(e){return[e]}),[Jp]),ai(35,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(37,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(38,0,null,null,39,"div",[],null,null,null,null,null)),(e()(),qs(39,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),qs(40,0,null,null,6,"input",[["name","type"],["type","radio"],["value","all"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,41)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,41).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,41)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,41)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,42).onChange()&&t),"blur"===n&&(t=!1!==qt(e,42).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.typeRadio=l)&&t),"change"===n&&(t=!1!==i.updateTypeRadio()&&t),t}),null,null)),ai(41,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(42,212992,null,0,mm,[gl,ol,pm,kn],{name:[0,"name"],value:[1,"value"]},null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,mm]),ai(44,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(46,16384,null,0,im,[[4,tm]],null,null),(e()(),cr(-1,null,[" All "])),(e()(),qs(48,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(49,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),qs(50,0,null,null,6,"input",[["name","type"],["type","radio"],["value","buy"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,51)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,51).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,51)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,51)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,52).onChange()&&t),"blur"===n&&(t=!1!==qt(e,52).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.typeRadio=l)&&t),"change"===n&&(t=!1!==i.updateTypeRadio()&&t),t}),null,null)),ai(51,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(52,212992,null,0,mm,[gl,ol,pm,kn],{name:[0,"name"],value:[1,"value"]},null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,mm]),ai(54,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(56,16384,null,0,im,[[4,tm]],null,null),(e()(),cr(-1,null,[" Buy "])),(e()(),qs(58,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(59,0,null,null,8,"label",[],null,null,null,null,null)),(e()(),qs(60,0,null,null,6,"input",[["name","type"],["type","radio"],["value","sell"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,61)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,61).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,61)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,61)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,62).onChange()&&t),"blur"===n&&(t=!1!==qt(e,62).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.typeRadio=l)&&t),"change"===n&&(t=!1!==i.updateTypeRadio()&&t),t}),null,null)),ai(61,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(62,212992,null,0,mm,[gl,ol,pm,kn],{name:[0,"name"],value:[1,"value"]},null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,mm]),ai(64,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(66,16384,null,0,im,[[4,tm]],null,null),(e()(),cr(-1,null,[" Sell "])),(e()(),qs(68,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(69,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(70,0,null,null,7,"label",[],null,null,null,null,null)),(e()(),qs(71,0,null,null,5,"input",[["name","type"],["type","checkbox"],["value","dismiss"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,72).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,72).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.dismissMode=l)&&t),t}),null,null)),ai(72,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(74,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(76,16384,null,0,im,[[4,tm]],null,null),(e()(),cr(-1,null,[" Dismiss "]))],(function(e,n){var l=n.component;e(n,6,0,"coins","resources"),e(n,9,0,!l.isMarketBuilt()),e(n,26,0,l.getOffers()),e(n,35,0,l.filterText),e(n,42,0,"type","all"),e(n,44,0,"type",l.typeRadio),e(n,52,0,"type","buy"),e(n,54,0,"type",l.typeRadio),e(n,62,0,"type","sell"),e(n,64,0,"type",l.typeRadio),e(n,74,0,"type",l.dismissMode)}),(function(e,n){e(n,7,0,n.component.getCoins()),e(n,32,0,qt(n,37).ngClassUntouched,qt(n,37).ngClassTouched,qt(n,37).ngClassPristine,qt(n,37).ngClassDirty,qt(n,37).ngClassValid,qt(n,37).ngClassInvalid,qt(n,37).ngClassPending),e(n,40,0,qt(n,46).ngClassUntouched,qt(n,46).ngClassTouched,qt(n,46).ngClassPristine,qt(n,46).ngClassDirty,qt(n,46).ngClassValid,qt(n,46).ngClassInvalid,qt(n,46).ngClassPending),e(n,50,0,qt(n,56).ngClassUntouched,qt(n,56).ngClassTouched,qt(n,56).ngClassPristine,qt(n,56).ngClassDirty,qt(n,56).ngClassValid,qt(n,56).ngClassInvalid,qt(n,56).ngClassPending),e(n,60,0,qt(n,66).ngClassUntouched,qt(n,66).ngClassTouched,qt(n,66).ngClassPristine,qt(n,66).ngClassDirty,qt(n,66).ngClassValid,qt(n,66).ngClassInvalid,qt(n,66).ngClassPending),e(n,71,0,qt(n,76).ngClassUntouched,qt(n,76).ngClassTouched,qt(n,76).ngClassPristine,qt(n,76).ngClassDirty,qt(n,76).ngClassValid,qt(n,76).ngClassInvalid,qt(n,76).ngClassPending)}))}function gO(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-market",[],null,null,null,dO,iO)),ai(1,114688,null,0,tO,[lO,iR,yf],null,null)],(function(e,n){e(n,1,0)}),null)}var pO=Ht("app-market",tO,gO,{},{},[]);class mO{constructor(e,n,l,t,i,s,r,u,o=function(){},a=0){this.tech=e,this.category=n,this.prerequisites=l,this.flagPrerequisites=t,this.cost=i,this.requiredResearchPoints=s,this.description=r,this.finishDescription=u,this.researchPoints=a,this.finishFunction=o}getTech(){return this.tech}getTechName(){return Uu.prepareTechName(this.tech)}isResearched(){return this.researchPoints>=this.requiredResearchPoints&&(this.researchPoints=this.requiredResearchPoints),this.researchPoints===this.requiredResearchPoints}getCategory(){return this.category}getDescription(){return this.description}getResearchPointsDue(){return this.requiredResearchPoints-this.researchPoints}addResearchPoints(e){this.researchPoints+=e,this.researchPoints>this.requiredResearchPoints&&(this.researchPoints=this.requiredResearchPoints)}getResearchPoints(){return this.researchPoints}setResearchPoints(e){this.researchPoints=e}setResearched(){this.researchPoints=this.requiredResearchPoints}getCost(){return this.cost}clearCost(){this.cost=new Map}getPrerequisites(){return this.prerequisites}getFlagPrerequisites(){return this.flagPrerequisites}getFinishFunction(){return this.finishFunction}getRequiredResearchPoints(){return this.requiredResearchPoints}getFinishDescription(){return this.finishDescription}}class fO{constructor(){this.prerequisites=[],this.flagPrerequisites=[],this.cost=new Map,this.researchPoints=0,this.finishFunction=function(){}}forTech(e){return this.tech=e,this}withCategory(e){return this.category=e,this}withPrerequisite(e){return this.prerequisites.push(e),this}withPrerequisites(e){return e.forEach(e=>this.prerequisites.push(e)),this}withFlagPrerequisite(e){return this.flagPrerequisites.push(e),this}withFlagPrerequisites(e){return e.forEach(e=>this.flagPrerequisites.push(e)),this}withCost(e,n){return this.cost.set(e,n),this}withCosts(e){return e.forEach((e,n)=>this.cost.set(n,e)),this}withResearchPoints(e){return this.researchPoints=e,this}withDescription(e){return this.description=e,this}withFinishDescription(e){return this.finishDescription=e,this}withFinishFunction(e){return this.finishFunction=e,this}build(){const e=new mO(this.tech,this.category,this.prerequisites,this.flagPrerequisites,this.cost,this.researchPoints,this.description,this.finishDescription,this.finishFunction);return this.tech=void 0,this.category=void 0,this.prerequisites=[],this.flagPrerequisites=[],this.cost=new Map,this.researchPoints=0,this.description=void 0,this.finishDescription=void 0,this.finishFunction=function(){},e}}let SO=(()=>{class e{constructor(e,n,l,t,i,s){this.servicesService=e,this.modalService=n,this.resourcesService=l,this.logService=t,this.soundService=i,this.gameService=s,this.techUpdate=new I,this.techList=[],this.techDone=[],this.techQueue=[],this.techStarted=[],this.techQueueSize=1,this.foresight=0,this.showDone=!1,this.servicesService.addService(Wu.RESEARCH,this),this.init()}init(){this.techList=[];const e=new fO;Object.entries(wo).forEach(n=>{e.forTech(Cu[n[0]]).withCategory(n[1].CATEGORY).withFinishFunction(n[1].FINISH).withResearchPoints(n[1].RESEARCH_POINT).withPrerequisites(n[1].PREREQUISITES).withFlagPrerequisites(n[1].FLAG_PREREQUISITES?n[1].FLAG_PREREQUISITES:[]).withDescription(n[1].DESCRIPTION).withFinishDescription(n[1].FINISH_DESCRIPTION),n[1].COST.forEach(n=>e.withCost(n.resource,n.amount)),this.techList.push(e.build())})}isResearched(e){return null!=this.techDone.find(n=>n===e)}startResearch(e){if(this.techQueue.find(n=>n.getTech()===e))return;const n=this.techList.find(n=>n.getTech()===e);let l=!0,t="";if(n.getPrerequisites().forEach(e=>{this.techDone.includes(e)||this.techQueue.find(n=>n.getTech()===e)||(l=!1,t+=Uu.prepareTechName(e)+" not researched!<br>")}),n.getFlagPrerequisites().forEach(e=>{this.gameService.isEnabled(e)||(l=!1,t+=Uu.prepareFlagName(e)+" not unlocked!<br>")}),!l)return void this.modalService.info(t);this.modalService.open(ju.RESEARCH_UNLOCK),this.modalService.setTech(this.techList.find(n=>n.getTech()===e));const i=this.modalService.registerForConfirmation().subscribe(n=>{if(i.unsubscribe(),n){const n=this.techList.find(n=>n.getTech()===e);if(!this.techStarted.find(n=>n[0]===e)){let e=!0,l="";if(Array.from(n.getCost().entries()).forEach(n=>{const t=this.resourcesService.hasResource(n[0],n[1],"Research",!0);0!==t&&(l+="Missing "+t+" "+Uu.prepareResourceName(n[0])+"!<br>",e=!1)}),!e)return void this.modalService.info(l)}let l=!0,t="";if(Array.from(n.getCost().entries()).forEach(e=>{const n=this.resourcesService.hasResource(e[0],e[1],"Research",!0);0!==n&&(t+="Missing "+n+" "+Uu.prepareResourceName(e[0])+"!<br>",l=!1)}),!l)return void this.modalService.info(t);this.resourcesService.decreaseResources(n.getCost(),"Research",!0);const i=this.techList.find(n=>n.getTech()===e);i.clearCost(),this.techStarted.find(e=>e[0]===i.getTech())||this.techStarted.push([i.getTech(),i.getResearchPoints()]),this.techQueue.push(i)}})}progressTech(e){this.techQueue.length>0&&(this.techQueue[0].addResearchPoints(e),this.techQueue[0].isResearched()&&(this.logService.log(this.techQueue[0].getTechName()+" researched"),this.soundService.playResearch(),this.techQueue[0].getFinishFunction()(this.servicesService),this.techDone.push(this.techQueue[0].getTech()),this.techStarted=this.techStarted.filter(e=>e[0]!==this.techQueue[0].getTech()),this.techQueue.shift()),this.techUpdate.next())}save(){const e=[];return this.techQueue.forEach(n=>{e.push(n.getTech());const l=this.techStarted.find(e=>e[0]===n.getTech());l&&(l[1]=n.getResearchPoints())}),{foresight:this.foresight,showDone:this.showDone,techDone:this.techDone,techStarted:this.techStarted,techQueue:e,techQueueSize:this.techQueueSize}}getName(){return"TechService"}load(e){this.init(),this.foresight=e.foresight,this.showDone=void 0!==e.showDone&&e.showDone,this.techDone=e.techDone,this.techStarted=e.techStarted,this.techQueueSize=void 0!==e.techQueueSize?e.techQueueSize:1,this.techDone.forEach(e=>{const n=this.techList.find(n=>n.getTech()===e);n&&n.setResearched()}),this.techStarted.forEach(e=>{const n=this.techList.find(n=>n.getTech()===e[0]);n&&(n.clearCost(),n.setResearchPoints(e[1]))}),this.techQueue=[],e.techQueue?e.techQueue.forEach(e=>{this.techQueue.push(this.techList.find(n=>n.getTech()===e))}):e.currentResearchTech&&this.techQueue.push(this.techList.find(n=>n.getTech()===e.currentResearchTech)),this.techDone.includes(Cu.BARRACKS)&&!this.gameService.isEnabled(Iu.BARRACKS)&&(this.gameService.enable(Iu.BARRACKS),this.logService.log("Barracks invented")),this.techDone.includes(Cu.COPPER_TOOLS)&&this.servicesService.getRecipeService().enable(Gu.COPPER_NAILS),this.techDone.includes(Cu.BRONZE_TOOLS)&&this.servicesService.getRecipeService().enable(Gu.BRONZE_NAILS),this.techDone.includes(Cu.IRON_TOOLS)&&this.servicesService.getRecipeService().enable(Gu.IRON_NAILS)}reset(e,n){this.techList=[],this.techDone=[],this.techStarted=[],this.techQueue=[],this.techQueueSize=1,this.foresight=0,this.showDone=!1,this.init()}getTech(){return this.techList.filter(e=>{if(this.techDone.includes(e.getTech()))return this.showDone;let n=!0;return e.getPrerequisites().forEach(e=>{this.checkPrerequisite(e,this.foresight)||(n=!1)}),n})}checkPrerequisite(e,n){if(this.techDone.includes(e))return!0;if(n>0){let l=!0;return this.techList.find(n=>n.getTech()===e).getPrerequisites().forEach(e=>{this.checkPrerequisite(e,n-1)||(l=!1)}),l}return!1}getCurrentResearch(){return this.techQueue.length>0?this.techQueue[0]:null}increaseForesight(e){this.foresight+=1}isResearchStarted(){return this.techQueue.length>0}getTechPrerequisites(e){const n=[];return e.getPrerequisites().forEach(e=>{this.techDone.includes(e)||n.push(e)}),n}registerForUpdate(){return this.techUpdate.asObservable()}getForesight(){return this.foresight}getTechFlagPrerequisites(e){const n=[];return e.getFlagPrerequisites().forEach(e=>{this.gameService.isEnabled(e)||n.push(e)}),n}finishTech(e){this.techDone.push(e);const n=this.techList.find(n=>n.getTech()===e);n&&(this.logService.log(n.getTechName()+" researched"),n.setResearchPoints(n.getRequiredResearchPoints()),n.getFinishFunction()(this.servicesService)),this.techQueue=this.techQueue.filter(n=>n.getTech()!==e),this.techUpdate.next()}toggleShowDone(){this.showDone=!this.showDone}shouldShowDone(){return this.showDone}getTechQueue(){return this.techQueue}removeFromQueue(e){this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Remove research from the queue?");const n=this.modalService.registerForConfirmation().subscribe(l=>{if(n.unsubscribe(),l){const n=this.techStarted.find(n=>n[0]===e.getTech());n?n[1]=e.getResearchPoints():this.techStarted.push([e.getTech(),e.getResearchPoints()]),this.techQueue.splice(this.techQueue.indexOf(e),1);let l=null;do{l&&(this.techQueue.splice(this.techQueue.indexOf(l),1),l=null),this.techQueue.forEach(e=>{if(null===l){const n=this.techList.find(n=>n.getTech()===e.getTech());let t=!0;n.getPrerequisites().forEach(e=>{this.techDone.includes(e)||this.techQueue.find(n=>n.getTech()===e)||(t=!1)}),n.getFlagPrerequisites().forEach(e=>{this.gameService.isEnabled(e)||(t=!1)}),t||(l=e)}})}while(null!==l)}})}increaseTechQueueSize(){this.techQueueSize+=1}getTechQueueSize(){return this.techQueueSize}hasQueueSpace(){return this.getTechQueue().length<this.techQueueSize+this.foresight}getTechDone(){return this.techDone}}return e.ngInjectableDef=ce({factory:function(){return new e(De(sf),De(pf),De(yf),De(df),De(cf),De(Sf))},token:e,providedIn:"root"}),e})();class EO{constructor(e,n){this.techService=e,this.resourcesService=n,this.id=EO.randomId()}static randomId(){return Math.random()}ngOnDestroy(){this.updateSubscription&&this.updateSubscription.unsubscribe()}ngOnInit(){this.updateSubscription=this.techService.registerForUpdate().subscribe(()=>{this.progressRef&&(this.progressRef.nativeElement.style.width=this.tech.getResearchPoints()/this.tech.getRequiredResearchPoints()*100+"%")})}ngAfterViewInit(){this.progressRef&&(this.progressRef.nativeElement.style.width=this.tech.getResearchPoints()/this.tech.getRequiredResearchPoints()*100+"%")}ngOnChanges(){this.progressRef&&(this.progressRef.nativeElement.style.width=this.tech.getResearchPoints()/this.tech.getRequiredResearchPoints()*100+"%")}getResourceName(e){return Uu.prepareResourceName(e)}start(){this.techService.startResearch(this.tech.getTech())}getPrerequisiteName(e){return Uu.prepareTechName(e)}getMissingPrerequisites(){return this.techService.getTechPrerequisites(this.tech)}hasResource(e){return 0===this.resourcesService.hasResource(e.key,e.value,"Research",!0)}getMissingFlagPrerequisites(){return this.techService.getTechFlagPrerequisites(this.tech)}getFlagPrerequisiteName(e){return Uu.prepareFlagName(e)}}var vO=Jl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #000}#researched[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;cursor:initial;border:1px solid #000}#wrapperNotAvailable[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #57575a}#titleGrey[_ngcontent-%COMP%]{display:inline-block;color:#57575a}.notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}.title[_ngcontent-%COMP%]{text-align:left}hr[_ngcontent-%COMP%]{border-color:#000}#progress[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}#finished[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;width:100%;background-color:var(--active-colour);z-index:1}#text[_ngcontent-%COMP%]{position:relative;z-index:2}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}"]],data:{}});function RO(e){return gr(0,[(e()(),qs(0,0,null,null,7,"div",[["appTooltip",""],["class","tooltip"],["id","researched"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==qt(e,1).onmousemove(l)&&t),t}),null,null)),ai(1,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),qs(2,0,[[1,0],["progress",1]],null,0,"div",[["id","finished"]],null,null,null,null,null)),(e()(),qs(3,0,null,null,1,"div",[["id","text"]],null,null,null,null,null)),(e()(),cr(4,null,["",""])),(e()(),qs(5,0,null,null,2,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),cr(6,null,[" ",""])),(e()(),qs(7,0,null,null,0,"br",[],null,null,null,null,null))],(function(e,n){e(n,1,0,n.component.id)}),(function(e,n){var l=n.component;e(n,4,0,l.tech.getTechName()),e(n,5,0,yt(1,"",l.id,"")),e(n,6,0,l.tech.getFinishDescription())}))}function OO(e){return gr(0,[(e()(),qs(0,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),cr(-1,null,["Cost:"])),(e()(),qs(2,0,null,null,0,"br",[],null,null,null,null,null))],null,null)}function bO(e){return gr(0,[(e()(),qs(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(2,null,["",""]))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit.value)}))}function TO(e){return gr(0,[(e()(),qs(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"div",[["class","notMet"]],null,null,null,null,null)),(e()(),cr(2,null,["",""]))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit.value)}))}function CO(e){return gr(0,[(e()(),qs(0,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,bO)),ai(2,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,TO)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(5,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(6,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.hasResource(n.context.$implicit)),e(n,4,0,!l.hasResource(n.context.$implicit)),e(n,6,0,l.getResourceName(n.context.$implicit.key),"resources")}),null)}function IO(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(1,null,[" "," "]))],null,(function(e,n){e(n,1,0,n.component.getPrerequisiteName(n.context.$implicit))}))}function yO(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(1,null,[" "," "]))],null,(function(e,n){e(n,1,0,n.component.getFlagPrerequisiteName(n.context.$implicit))}))}function AO(e){return gr(0,[(e()(),qs(0,0,null,null,7,"div",[["class","prerequisites"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),cr(-1,null,["Prerequisites:"])),(e()(),qs(3,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,IO)),ai(5,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),Qs(16777216,null,null,1,null,yO)),ai(7,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,5,0,l.getMissingPrerequisites()),e(n,7,0,l.getMissingFlagPrerequisites())}),null)}function NO(e){return gr(0,[(e()(),qs(0,0,null,null,17,"div",[["appTooltip",""],["class","tooltip"],["id","wrapper"]],null,[[null,"click"],[null,"mousemove"]],(function(e,n,l){var t=!0,i=e.component;return"mousemove"===n&&(t=!1!==qt(e,1).onmousemove(l)&&t),"click"===n&&(t=!1!==i.start()&&t),t}),null,null)),ai(1,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),qs(2,0,[[1,0],["progress",1]],null,0,"div",[["id","progress"]],null,null,null,null,null)),(e()(),qs(3,0,null,null,1,"div",[["id","text"]],null,null,null,null,null)),(e()(),cr(4,null,["",""])),(e()(),qs(5,0,null,null,12,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),cr(6,null,[" ",""])),(e()(),qs(7,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(8,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),qs(9,0,null,null,1,"div",[["class","title"]],null,null,null,null,null)),(e()(),cr(10,null,["Research points: ","/",""])),(e()(),Qs(16777216,null,null,1,null,OO)),ai(12,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,2,null,CO)),ai(14,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),ci(0,_a,[Nl]),(e()(),Qs(16777216,null,null,1,null,AO)),ai(17,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,1,0,l.id),e(n,12,0,l.tech.getCost().size>0),e(n,14,0,ql(n,14,0,qt(n,15).transform(l.tech.getCost()))),e(n,17,0,l.getMissingPrerequisites().length>0||l.getMissingFlagPrerequisites().length>0)}),(function(e,n){var l=n.component;e(n,4,0,l.tech.getTechName()),e(n,5,0,yt(1,"",l.id,"")),e(n,6,0,l.tech.getDescription()),e(n,10,0,l.tech.getResearchPoints(),l.tech.getRequiredResearchPoints())}))}function _O(e){return gr(0,[(e()(),qs(0,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),cr(-1,null,["Cost:"])),(e()(),qs(2,0,null,null,0,"br",[],null,null,null,null,null))],null,null)}function wO(e){return gr(0,[(e()(),qs(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(2,null,["",""]))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit.value)}))}function PO(e){return gr(0,[(e()(),qs(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"div",[["class","notMet"]],null,null,null,null,null)),(e()(),cr(2,null,["",""]))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit.value)}))}function xO(e){return gr(0,[(e()(),qs(0,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,wO)),ai(2,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,PO)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(5,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(6,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.hasResource(n.context.$implicit)),e(n,4,0,!l.hasResource(n.context.$implicit)),e(n,6,0,l.getResourceName(n.context.$implicit.key),"resources")}),null)}function kO(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(1,null,[" "," "]))],null,(function(e,n){e(n,1,0,n.component.getPrerequisiteName(n.context.$implicit))}))}function MO(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(1,null,[" "," "]))],null,(function(e,n){e(n,1,0,n.component.getFlagPrerequisiteName(n.context.$implicit))}))}function DO(e){return gr(0,[(e()(),qs(0,0,null,null,7,"div",[["class","prerequisites"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),cr(-1,null,["Prerequisites:"])),(e()(),qs(3,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,kO)),ai(5,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),Qs(16777216,null,null,1,null,MO)),ai(7,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,5,0,l.getMissingPrerequisites()),e(n,7,0,l.getMissingFlagPrerequisites())}),null)}function LO(e){return gr(0,[(e()(),qs(0,0,null,null,16,"div",[["appTooltip",""],["class","tooltip"],["id","wrapperNotAvailable"]],null,[[null,"click"],[null,"mousemove"]],(function(e,n,l){var t=!0,i=e.component;return"mousemove"===n&&(t=!1!==qt(e,1).onmousemove(l)&&t),"click"===n&&(t=!1!==i.start()&&t),t}),null,null)),ai(1,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),qs(2,0,null,null,1,"div",[["id","titleGrey"]],null,null,null,null,null)),(e()(),cr(3,null,["",""])),(e()(),qs(4,0,null,null,12,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),cr(5,null,[" ",""])),(e()(),qs(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(7,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),qs(8,0,null,null,1,"div",[["class","title"]],null,null,null,null,null)),(e()(),cr(9,null,["Research points: ","/",""])),(e()(),Qs(16777216,null,null,1,null,_O)),ai(11,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,2,null,xO)),ai(13,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),ci(0,_a,[Nl]),(e()(),Qs(16777216,null,null,1,null,DO)),ai(16,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,1,0,l.id),e(n,11,0,l.tech.getCost().size>0),e(n,13,0,ql(n,13,0,qt(n,14).transform(l.tech.getCost()))),e(n,16,0,l.getMissingPrerequisites().length>0||l.getMissingFlagPrerequisites().length>0)}),(function(e,n){var l=n.component;e(n,3,0,l.tech.getTechName()),e(n,4,0,yt(1,"",l.id,"")),e(n,5,0,l.tech.getDescription()),e(n,9,0,l.tech.getResearchPoints(),l.tech.getRequiredResearchPoints())}))}function FO(e){return gr(0,[nr(671088640,1,{progressRef:0}),(e()(),Qs(16777216,null,null,1,null,RO)),ai(2,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,NO)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,LO)),ai(6,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.tech.isResearched()),e(n,4,0,0===l.getMissingPrerequisites().length&&!l.tech.isResearched()),e(n,6,0,l.getMissingPrerequisites().length>0&&!l.tech.isResearched())}),null)}class UO{constructor(e,n){this.techService=e,this.villageService=n}ngOnInit(){this.categories=Object.keys(Bu),this.categories=this.categories.slice(this.categories.length/2)}getTechList(e){return this.techService.getTech().filter(n=>n.getCategory()===Bu[e])}getCurrentResearch(){return this.techService.getCurrentResearch()}research(e){this.techService.progressTech(e)}isDev(){return!go.production}getForesight(){return this.techService.getForesight()}isResearcher(){return this.villageService.getBuildings().filter(e=>e.getBuildingType()===Ru.WORKSHOP).map(e=>e).filter(e=>e.willResearch()).length>0}shouldShowDone(){return this.techService.shouldShowDone()}showDone(){this.techService.toggleShowDone()}getTechQueue(){return this.techService.getTechQueue()}removeFromQueue(e){this.techService.removeFromQueue(e)}getTechQueueSize(){return this.techService.getTechQueueSize()}}var HO=Jl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:.7%;height:100%}#categories[_ngcontent-%COMP%]{display:-webkit-inline-box;display:inline-flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;border:1px solid #000;height:86%;width:100%;text-align:center}.category[_ngcontent-%COMP%]{text-align:center;-webkit-box-flex:0;flex:0 0 19.75%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;border:1px solid #000;-webkit-box-align:center;align-items:center}#categoryBody[_ngcontent-%COMP%]{height:100%;width:100%;overflow-y:auto;overflow-x:hidden}.title[_ngcontent-%COMP%]{padding:2px;width:100%;font-weight:bolder;font-size:1em;margin-bottom:5px;display:block;border-bottom:1px solid #000}app-tech[_ngcontent-%COMP%]{display:inline-block;margin-bottom:4px;margin-top:4px;margin-left:-4px;width:75%;font-size:.7em}#researching[_ngcontent-%COMP%]{margin-bottom:8px}#currentTech[_ngcontent-%COMP%]{display:inline-block;width:auto;margin-right:10px}.tech[_ngcontent-%COMP%]{cursor:pointer}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}#noResearchers[_ngcontent-%COMP%]{margin-left:175px;color:var(--negative-colour)}.showHiddenButton[_ngcontent-%COMP%]{font-size:.8em;padding:4px;margin-left:auto}#techQueue[_ngcontent-%COMP%]{display:-webkit-inline-box;display:inline-flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.techQueueEntry[_ngcontent-%COMP%]{width:110px;margin-right:20px;cursor:pointer}"]],data:{}});function GO(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-tech",[["class","techQueueEntry"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.removeFromQueue(e.context.$implicit)&&t),t}),FO,vO)),ai(1,4964352,null,0,EO,[SO,yf],{tech:[0,"tech"]},null)],(function(e,n){e(n,1,0,n.context.$implicit)}),null)}function BO(e){return gr(0,[(e()(),qs(0,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,2,"div",[["id","techQueue"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,GO)),ai(3,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,3,0,n.component.getTechQueue())}),null)}function WO(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["nothing"]))],null,null)}function VO(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.research(10)&&t),t}),null,null)),(e()(),cr(-1,null,["Research"]))],null,null)}function zO(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[["id","noResearchers"]],null,null,null,null,null)),(e()(),cr(-1,null,["No workshop set to research."]))],null,null)}function YO(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[["class","showHiddenButton"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.showDone()&&t),t}),null,null)),(e()(),cr(-1,null,["show finished"]))],null,null)}function $O(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[["class","showHiddenButton"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.showDone()&&t),t}),null,null)),(e()(),cr(-1,null,["hide finished"]))],null,null)}function KO(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-tech",[["class","tech"]],null,null,null,FO,vO)),ai(1,4964352,null,0,EO,[SO,yf],{tech:[0,"tech"]},null)],(function(e,n){e(n,1,0,n.context.$implicit)}),null)}function jO(e){return gr(0,[(e()(),qs(0,0,null,null,5,"div",[["class","category"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),cr(2,null,["",""])),(e()(),qs(3,0,null,null,2,"span",[["id","categoryBody"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,KO)),ai(5,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,5,0,n.component.getTechList(n.context.$implicit))}),(function(e,n){e(n,2,0,n.context.$implicit)}))}function QO(e){return gr(0,[(e()(),qs(0,0,null,null,21,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,7,"div",[["id","researching"]],null,null,null,null,null)),(e()(),cr(2,null,[" Research queue (","/","): \xa0 "])),(e()(),Qs(16777216,null,null,1,null,BO)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,WO)),ai(6,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,VO)),ai(8,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(9,0,null,null,9,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(10,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(11,114688,null,0,$p,[],{name:[0,"name"]},null),(e()(),cr(12,null,["\xa0"," "])),(e()(),Qs(16777216,null,null,1,null,zO)),ai(14,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,YO)),ai(16,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,$O)),ai(18,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(19,0,null,null,2,"div",[["id","categories"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,jO)),ai(21,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,4,0,l.getCurrentResearch()),e(n,6,0,!l.getCurrentResearch()),e(n,8,0,l.isDev()),e(n,11,0,"foresight"),e(n,14,0,!l.isResearcher()),e(n,16,0,!l.shouldShowDone()),e(n,18,0,l.shouldShowDone()),e(n,21,0,l.categories)}),(function(e,n){var l=n.component;e(n,2,0,l.getTechQueue().length,l.getTechQueueSize()+l.getForesight()),e(n,12,0,l.getForesight())}))}function qO(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-research",[],null,null,null,QO,HO)),ai(1,114688,null,0,UO,[SO,iR],null,null)],(function(e,n){e(n,1,0)}),null)}var XO=Ht("app-research",UO,qO,{},{},[]);class ZO{constructor(e,n){this.troop=e,this.size=n}getTroopStrength(){return No.getTroop(this.troop).STRENGTH}getTroopDefense(){return No.getTroop(this.troop).DEFENSE}getTroopSpeed(){return No.getTroop(this.troop).SPEED}getTroopPay(){return No.getTroop(this.troop).PAY}getRecruitTime(){return No.getTroop(this.troop).RECRUIT_TIME}getTroopSize(){return No.getTroop(this.troop).SIZE}getTroopCargo(){return No.getTroop(this.troop).CARGO}isNavy(){return this.troop===Pu.BOAT||this.troop===Pu.BRIGANTINE||this.troop===Pu.GALLEON}}class JO{constructor(e){this.units=e}static clone(e){const n=new JO([]);return e.units.forEach(e=>n.addTroop(e.troop,e.size)),n}toJSON(){this.removeEmptyUnits();const e=[];return this.units.forEach(n=>{e.push({troop:n.troop,size:n.size})}),{units:e}}getLandUnits(e){const n=new JO([]);return this.units.forEach(l=>{l.isNavy()||(n.addTroop(l.troop,l.size),e&&(l.size=0))}),this.removeEmptyUnits(),n}getNavy(e){const n=new JO([]);return this.units.forEach(l=>{l.isNavy()&&(n.addTroop(l.troop,l.size),e&&(l.size=0))}),n}getRandomUnit(){return Yu.randomArrayElement(this.units.filter(e=>e.size>=0))}getUnit(e){return this.units.find(n=>n.troop===e)}removeEmptyUnits(){this.units=this.units.filter(e=>e.size>0)}hasAny(){return this.removeEmptyUnits(),!(0===this.units.length||1===this.units.length&&this.units[0].troop===Pu.GUARD_TOWER)}addTroop(e,n){const l=this.units.find(n=>n.troop===e);l?l.size+=n:this.units.push(new ZO(e,n))}getArmySize(){let e=0;return this.removeEmptyUnits(),this.units.filter(e=>e.troop!==Pu.COLONIST).forEach(n=>e+=n.size),e}getArmyPower(e){let n=0;return this.units.forEach(l=>{n+=e?l.size*l.getTroopStrength():l.size*l.getTroopDefense()}),n}removeTroop(e,n){const l=this.units.find(n=>n.troop===e);l&&(l.size-=n),this.removeEmptyUnits()}addArmy(e){e.units.forEach(e=>this.addTroop(e.troop,e.size))}getArmyPay(){let e=0;return this.units.filter(e=>e.troop!==Pu.COLONIST).forEach(n=>e+=n.getTroopPay()*n.size),e}clearArmy(){this.units=[]}getArmySpeed(){this.removeEmptyUnits();let e=0;return this.units.forEach(n=>{0===e&&(e=n.getTroopSpeed()),n.getTroopSpeed()<e&&(e=n.getTroopSpeed())}),e}getArmyCargo(){let e=0;return this.units.forEach(n=>e+=n.getTroopCargo()*n.size),e}hasTroop(e){return this.removeEmptyUnits(),void 0!==this.units.find(n=>n.troop===e)}}class eb{constructor(){this.skirmish=[]}}class nb{constructor(e,n,l,t,i){this.attackerTroop=e,this.defenderTroop=n,this.attack=l,this.defense=t,this.result=i}}let lb=(()=>{class e{constructor(e,n,l,t,i,s,r,u){this.resourcesService=e,this.modalService=n,this.logService=l,this.landService=t,this.soundService=i,this.calendarService=s,this.effectsService=r,this.servicesService=u,this.barracksSize=0,this.defense=0,this.stashSize=0,this.paydayCounter=30,this.army=new JO([]),this.recruits=[],this.recruitsUpdate=new I,u.addService(Wu.ARMY,this),this.calendarService.registerForDayChange().subscribe(e=>{this.calculatePayday()})}tick(e){}getName(){return"ArmyService"}load(e){this.barracksSize=e.barracksSize,this.defense=e.defense,this.paydayCounter=void 0!==e.paydayCounter?e.paydayCounter:30,this.stashSize=e.stashSize,this.army.units=[],void 0!==e.troops?e.troops.forEach(e=>{this.army.addTroop(e[0],e[1])}):void 0!==e.army&&e.army.forEach(e=>{this.army.addTroop(e[0],e[1])}),this.recruits=[],e.recruits.forEach(e=>{this.recruits.push([new ZO(e[0],e[1]),e[2]])}),void 0!==e.missionsInProgress&&e.missionsInProgress.forEach(e=>{e[4].forEach(e=>{this.army.addTroop(e[0],e[1])})})}save(){const e=[];this.army.units.forEach(n=>e.push([n.troop,n.size]));const n=[];return this.recruits.forEach(e=>n.push([e[0].troop,e[0].size,e[1]])),{barracksSize:this.barracksSize,army:e,recruits:n,defense:this.defense,stashSize:this.stashSize,paydayCounter:this.paydayCounter}}reset(e,n){this.recruits=[],this.barracksSize=0,this.defense=0,this.stashSize=0,this.paydayCounter=30,this.army.units=[]}progressRecruitment(e){this.recruits.length>0&&(this.recruits[0][1]+=e,this.recruits[0][1]>=this.recruits[0][0].getRecruitTime()&&(this.army.addTroop(this.recruits[0][0].troop,1),this.recruits[0][0].size-=1,this.recruits[0][1]=0,this.recruits[0][0].size<=0&&this.recruits.shift()),this.recruitsUpdate.next())}recruit(e,n){if(this.getFreeBarracks()>=n)if(this.resourcesService.getPeople()>=n){const l=new Map;No.getTroop(e).COST.forEach(e=>l.set(e.resource,e.amount)),this.resourcesService.decreaseResources(l,"Army",!0,n)&&(this.resourcesService.removeRecruit(n),this.recruits.push([new ZO(e,n),0]))}else this.modalService.info("Not enough unemployed people to recruit!");else this.modalService.info("Not enough space in barracks for so many recruits")}dismiss(e,n){const l=this.resourcesService.getPopulationCap()-this.resourcesService.getTotalPeople(),t=void 0!==this.army.getUnit(e)?this.army.getUnit(e).size:0;0!==t?n>t?this.modalService.info("There are not enough troops to dismiss"):l>=n?(this.army.removeTroop(e,n),this.servicesService.getVillageService().addVillagers(n)):this.modalService.info("There are not enough housing space for dismissed troops!"):this.modalService.info("No troops to dismiss")}dismissRecruit(e,n){const l=this.resourcesService.getPopulationCap()-this.resourcesService.getTotalPeople();n>this.recruits[e][0].size?this.modalService.info("There are not enough recruits to dismiss"):l>=n?(this.recruits[e][0].size-=n,this.recruits[e][0].size<=0&&this.recruits.splice(e,1),this.servicesService.getVillageService().addVillagers(n)):this.modalService.info("There are not enough housing space for dismissed troops!")}getRecruits(){return this.recruits}getUnits(){return this.army.units}getWorldService(){return this.servicesService.getWorldService()}getArmySize(){let e=this.army.getArmySize();return this.recruits.forEach(n=>e+=n[0].size),this.getWorldService().getPlayerLandMissions().forEach(n=>{e+=n.army.getArmySize()}),this.getWorldService().getPlayerSeaMissions().forEach(n=>{e+=n.army.getLandUnits(!1).getArmySize()}),this.getWorldService().getStationedArmies().forEach(n=>{e+=n.getArmySize()}),e}getFreeBarracks(){return this.barracksSize-this.getArmySize()}increaseBarracks(e){this.barracksSize+=e}decreaseBarracks(e){this.barracksSize-=e}getBarracksSize(){return this.barracksSize}getDefenseStrength(){let e=this.defense;return this.army.units.forEach(n=>e+=n.getTroopDefense()*n.size),e}increaseDefense(e){this.defense+=e}decreaseDefense(e){this.defense-=e}hasRecruits(){return this.recruits.length>0}registerForRecruitsUpdate(){return this.recruitsUpdate.asObservable()}getAttackStrength(){let e=0;return this.army.units.forEach(n=>e+=n.getTroopStrength()*n.size),e}increaseStash(e){this.stashSize+=e}decreaseStash(e){this.stashSize-=e}calculateSoldiersPay(){let e=0;return e+=this.army.getArmyPay(),this.getWorldService().getPlayerLandMissions().forEach(n=>{e+=n.army.getArmyPay()}),this.getWorldService().getPlayerSeaMissions().forEach(n=>{e+=n.army.getLandUnits(!1).getArmyPay()}),this.getWorldService().getStationedArmies().forEach(n=>{e+=n.getArmyPay()}),e}getPaydayCounter(){return this.paydayCounter}calculatePayday(){if(this.paydayCounter<=0){const e=this.calculateSoldiersPay();if(e>0){let n=this.resourcesService.hasResource(bu.COINS,e,"Army");if(n>e&&(n=e),n>0){this.resourcesService.decreaseResource(bu.COINS,e-n,"Army");const l=[];for(;n>0&&(this.army.units.forEach(e=>{if(n>0&&e.getTroopPay()>0&&e.size>0&&(n-=e.getTroopPay(),Yu.chance(.25))){e.size-=1;const n=l.find(n=>n[0]===e.troop);n?n[1]+=1:l.push([e.troop,1])}}),!(n<=0));){const e=[];this.getWorldService().getPlayerLandMissions().forEach(n=>{n.army.getArmySize()>0&&e.push(n.army)}),this.getWorldService().getPlayerSeaMissions().forEach(n=>{n.army.getLandUnits(!1).getArmySize()>0&&e.push(n.army.getLandUnits(!1))}),this.getWorldService().getStationedArmies().forEach(n=>{n.getArmySize()>0&&e.push(n)}),e.forEach(e=>{n>0&&e.units.forEach(e=>{if(n>0&&e.getTroopPay()>0&&e.size>0&&(n-=e.getTroopPay(),Yu.chance(.25))){e.size-=1;const n=l.find(n=>n[0]===e.troop);n?n[1]+=1:l.push([e.troop,1])}})})}if(l.length>0){let e="Deserters:<br>";l.forEach(n=>e+="&emsp;"+n[1]+" "+Uu.prepareTroopName(n[0])+"<br>"),this.logService.warning(e)}}else this.resourcesService.decreaseResource(bu.COINS,e,"Army")}this.paydayCounter=30}else this.paydayCounter-=1}getTroopEffectsMultiplier(e){return 1+this.getTroopEffectsValue(e)/100}getTroopEffectsValue(e){let n=0;return this.effectsService.getArmyEffects().filter(n=>n.troop===Pu.ALL||n.troop===e).forEach(e=>n+=e.effect),n}addMilitia(e){this.army.addTroop(Pu.MILITIA,e)}addLightCavalry(e){this.army.addTroop(Pu.LIGHT_CAVALRY,e)}calculateAttack(e,n,l,t,i){const s=new eb;s.attackerArmy=JO.clone(e),s.defenderArmy=JO.clone(n),s.defense=l;let r=0,u=0,o=0;if(e.getArmySize()>n.getArmySize()?(u=Math.floor(e.getArmySize()/n.getArmySize())-1)>3&&(u=3):n.getArmySize()>e.getArmySize()&&(o=Math.floor(n.getArmySize()/e.getArmySize())-1)>3&&(o=3),s.attackerArmySizeBonus=u,s.defenderArmySizeBonus=o,e.units.length>0&&n.units.length>0){let a=n.getRandomUnit(),c=a.getTroopDefense(),h=e.getRandomUnit(),d=h.getTroopStrength();const g=Math.floor(d/2);for(d-=g<l?g:l;e.units.length>0&&n.units.length>0;){if(r+=1,null===h){d=(h=e.getRandomUnit()).getTroopStrength();const n=Math.floor(d/2);d-=n<l?n:l}null===a&&(c=(a=n.getRandomUnit()).getTroopDefense());let g=0,p=0,m=0;if(t)p=g=d*this.getTroopEffectsMultiplier(h.troop)+u,m=c+o,g-=c+o;else if(i){const e=c*this.getTroopEffectsMultiplier(a.troop)+o;m=e,p=d+u,g=-e+d+u}else p=g=d+u,m=c+o,g-=c+o;const f=this.calculateWinChance(g);Yu.chance(f/100)?(s.skirmish.push(new nb(h.troop,a.troop,p,m,!0)),a.size-=1,n.removeEmptyUnits(),a=null,d-=1):(s.skirmish.push(new nb(h.troop,a.troop,p,m,!1)),h.size-=1,e.removeEmptyUnits(),h=null,c-=1)}}return e.units.length>0?(s.result=!0,s.armyAfterFight=JO.clone(e)):(s.result=!1,s.armyAfterFight=JO.clone(n)),s}calculateWinChance(e){let n=50;if(e>0){let l=e;e>1&&(l=1),e-=l,n+=10*l}return Math.min(95,Math.max(5,5*e+n))}getArmy(){return this.army}loot(e){const n=new Map;let l="Loot:<br>";const t=Array.from(this.resourcesService.getResources().values()).filter(e=>e.isVisible()).map(e=>({item:e.resource,chance:e.prioritise?10:1}));for(;e>5;){const l=Yu.randomWeightedExcept(t,[]),i=Ao.getResource(l);let s=0;for(s=Yu.randomBetween(1,i.TRADE_VALUE<10?20:i.TRADE_VALUE<50?10:i.TRADE_VALUE<300?5:2);i.TRADE_VALUE*s>e;)s-=1;s>0&&(n.has(l)?n.set(l,n.get(l)+s):n.set(l,s),e-=s*i.TRADE_VALUE)}Array.from(n.keys()).sort((e,n)=>{const l=this.resourcesService.getResource(e).name.toLowerCase(),t=this.resourcesService.getResource(n).name.toLowerCase();return l<t?-1:l>t?1:0}).forEach(e=>{l+="&emsp;"+n.get(e)+" "+Uu.prepareResourceName(e)+"<br>"}),this.logService.success(l),this.resourcesService.increaseResources(n,"Plunder",!0)}lootPlayer(e){let n="<br>";const l=[];for(;e>0;){const n=Array.from(this.resourcesService.getResources().values()).filter(e=>e.amount>this.stashSize),t=Yu.randomExcept(n,[]);if(void 0===t){e=0;break}const i=Ao.getResource(t.resource);let s=0;s=Yu.randomBetween(1,i.TRADE_VALUE<10?20:i.TRADE_VALUE<50?10:i.TRADE_VALUE<300?5:2),t.amount-this.stashSize<s&&(s=t.amount-this.stashSize),e-=i.TRADE_VALUE*s;const r=l.find(e=>e.resource===t.resource);r?r.amount+=s:l.push({resource:t.resource,amount:s}),this.resourcesService.decreaseResource(t.resource,s,"Invasion",!0)}let t=0;return l.sort((e,n)=>{const l=this.resourcesService.getResource(e.resource).name.toLowerCase(),t=this.resourcesService.getResource(n.resource).name.toLowerCase();return l<t?-1:l>t?1:0}).forEach(e=>{n+="&emsp;"+e.amount+" "+Uu.prepareResourceName(e.resource)+"<br>",t+=e.amount*Ao.getResource(e.resource).TRADE_VALUE}),this.logService.warning(l.length>0?"Plundered: "+n:"Nothing has been stolen"),Math.floor(t/100)}moveRecipeInQueue(e){CS(this.recruits,e.previousIndex,e.currentIndex)}}return e.ngInjectableDef=ce({factory:function(){return new e(De(yf),De(pf),De(df),De(nR),De(cf),De(hf),De(Jv),De(sf))},token:e,providedIn:"root"}),e})();class tb{constructor(e,n){this.armyService=e,this.resourcesService=n,this.id=Math.random(),this.recruit=!1,this.progress=0,this.multiplier=0,this.recruitIndex=-1,this.dismiss=!1}ngOnInit(){this.updateSubscription=this.armyService.registerForRecruitsUpdate().subscribe(()=>{this.progressRef&&(this.progressRef.nativeElement.style.width=this.progress/this.getRecruitTime()*100+"%")})}ngAfterViewInit(){this.progressRef&&(this.progressRef.nativeElement.style.width=this.progress/this.getRecruitTime()*100+"%")}getTroopName(){return Uu.prepareTroopName(this.troop)}getResourceName(e){return Uu.prepareResourceName(e)}checkResource(e){return 0===this.resourcesService.hasResource(e.resource,e.amount*this.multiplier,"Army",!0)}isAvailable(){if(this.dismiss&&this.count>this.multiplier)return!0;if(this.recruit)return!0;const e=new Map;return this.getRecruitCost().forEach(n=>e.set(n.resource,n.amount)),this.resourcesService.hasResources(e,"Army",this.multiplier,!0)}getRecruitTime(){return No.getTroop(this.troop).RECRUIT_TIME}getRecruitCost(){return No.getTroop(this.troop).COST}getTroopStrength(){return No.getTroop(this.troop).STRENGTH}getTroopDefense(){return No.getTroop(this.troop).DEFENSE}getTroopPay(){return No.getTroop(this.troop).PAY}getTroopSpeed(){return No.getTroop(this.troop).SPEED}dismissRecruit(){this.recruit&&this.dismiss&&this.armyService.dismissRecruit(this.recruitIndex,this.multiplier)}}var ib=Jl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{position:relative;display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #000;font-size:1.2em}#wrapperNotAvailable[_ngcontent-%COMP%]{position:relative;display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #57575a;font-size:1.2em}.dismiss[_ngcontent-%COMP%]{border:var(--negative-colour) solid 1px!important}#text[_ngcontent-%COMP%]{position:relative;z-index:2}#textNotAvailable[_ngcontent-%COMP%]{position:relative;z-index:2;color:#57575a}#progressId[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}hr[_ngcontent-%COMP%]{border-color:#000}.costTitle[_ngcontent-%COMP%], .statsTitle[_ngcontent-%COMP%]{text-align:left}.tooltipSpan[_ngcontent-%COMP%]{min-width:125px}.missing[_ngcontent-%COMP%]{color:var(--negative-colour)}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}.inline[_ngcontent-%COMP%]{display:inline-block}"]],data:{}});function sb(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[["class","inline"]],null,null,null,null,null)),(e()(),cr(-1,null,["dismiss "]))],null,null)}function rb(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[["class","inline"]],null,null,null,null,null)),(e()(),cr(-1,null,["recruit "]))],null,null)}function ub(e){return gr(0,[(e()(),qs(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),cr(1,null,["",""]))],null,(function(e,n){e(n,1,0,n.parent.context.$implicit.amount*n.component.multiplier)}))}function ob(e){return gr(0,[(e()(),qs(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"div",[["class","missing"]],null,null,null,null,null)),(e()(),cr(2,null,["",""]))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit.amount*n.component.multiplier)}))}function ab(e){return gr(0,[(e()(),qs(0,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,ub)),ai(3,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,ob)),ai(5,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(6,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(7,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){var l=n.component;e(n,3,0,l.checkResource(n.context.$implicit)),e(n,5,0,!l.checkResource(n.context.$implicit)),e(n,7,0,l.getResourceName(n.context.$implicit.resource),"resources")}),null)}function cb(e){return gr(0,[(e()(),qs(0,0,null,null,37,"div",[["appTooltip",""],["class","tooltip"],["id","wrapper"]],null,[[null,"click"],[null,"mousemove"]],(function(e,n,l){var t=!0,i=e.component;return"mousemove"===n&&(t=!1!==qt(e,4).onmousemove(l)&&t),"click"===n&&(t=!1!==i.dismissRecruit()&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(2,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(3,{dismiss:0}),ai(4,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),qs(5,0,[[1,0],["progressId",1]],null,0,"div",[["id","progressId"]],null,null,null,null,null)),(e()(),qs(6,0,null,null,29,"span",[["class","tooltipSpan"]],[[8,"id",0]],null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,sb)),ai(8,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,rb)),ai(10,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),cr(11,null,[" "," x "," "])),ur(12,1),(e()(),qs(13,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),qs(14,0,null,null,1,"div",[["class","statsTitle"]],null,null,null,null,null)),(e()(),cr(-1,null,["Stats (per soldier):"])),(e()(),qs(16,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(17,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(18,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(19,null,[": ",""])),(e()(),qs(20,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(21,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(22,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(23,null,[": ",""])),(e()(),qs(24,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(25,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(26,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(27,null,[": ",""])),(e()(),qs(28,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(29,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(30,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(31,null,[": ",""])),(e()(),qs(32,0,null,null,1,"div",[["class","costTitle"]],null,null,null,null,null)),(e()(),cr(-1,null,["Cost:"])),(e()(),Qs(16777216,null,null,1,null,ab)),ai(35,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(36,0,null,null,1,"div",[["id","text"]],null,null,null,null,null)),(e()(),cr(37,null,[""," - ",""]))],(function(e,n){var l=n.component,t=e(n,3,0,l.dismiss&&l.count>0);e(n,2,0,"tooltip",t),e(n,4,0,l.id),e(n,8,0,l.dismiss),e(n,10,0,!l.dismiss&&!l.recruit),e(n,18,0,"attack","army"),e(n,22,0,"defense","army"),e(n,26,0,"speed","army"),e(n,30,0,"coins","resources"),e(n,35,0,l.getRecruitCost())}),(function(e,n){var l=n.component;e(n,6,0,yt(1,"",l.id,""));var t=l.multiplier,i=ql(n,11,1,e(n,12,0,qt(n.parent,0),l.getTroopName()));e(n,11,0,t,i),e(n,19,0,l.getTroopStrength()),e(n,23,0,l.getTroopDefense()),e(n,27,0,l.getTroopSpeed()),e(n,31,0,l.getTroopPay()),e(n,37,0,l.getTroopName(),l.count)}))}function hb(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[["class","inline"]],null,null,null,null,null)),(e()(),cr(-1,null,["dismiss "]))],null,null)}function db(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[["class","inline"]],null,null,null,null,null)),(e()(),cr(-1,null,["recruit "]))],null,null)}function gb(e){return gr(0,[(e()(),qs(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),cr(1,null,["",""]))],null,(function(e,n){e(n,1,0,n.parent.context.$implicit.amount*n.component.multiplier)}))}function pb(e){return gr(0,[(e()(),qs(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"div",[["class","missing"]],null,null,null,null,null)),(e()(),cr(2,null,["",""]))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit.amount*n.component.multiplier)}))}function mb(e){return gr(0,[(e()(),qs(0,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,gb)),ai(3,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,pb)),ai(5,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(6,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(7,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){var l=n.component;e(n,3,0,l.checkResource(n.context.$implicit)),e(n,5,0,!l.checkResource(n.context.$implicit)),e(n,7,0,l.getResourceName(n.context.$implicit.resource),"resources")}),null)}function fb(e){return gr(0,[(e()(),qs(0,0,null,null,37,"div",[["appTooltip",""],["class","tooltip"],["id","wrapperNotAvailable"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==qt(e,4).onmousemove(l)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(2,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(3,{dismiss:0}),ai(4,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),qs(5,0,[[1,0],["progressId",1]],null,0,"div",[["id","progressId"]],null,null,null,null,null)),(e()(),qs(6,0,null,null,29,"span",[["class","tooltipSpan"]],[[8,"id",0]],null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,hb)),ai(8,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,db)),ai(10,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),cr(11,null,[" "," x "," "])),ur(12,1),(e()(),qs(13,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),qs(14,0,null,null,1,"div",[["class","statsTitle"]],null,null,null,null,null)),(e()(),cr(-1,null,["Stats (per soldier):"])),(e()(),qs(16,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(17,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(18,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(19,null,[": ",""])),(e()(),qs(20,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(21,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(22,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(23,null,[": ",""])),(e()(),qs(24,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(25,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(26,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(27,null,[": ",""])),(e()(),qs(28,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(29,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(30,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(31,null,[": ",""])),(e()(),qs(32,0,null,null,1,"div",[["class","costTitle"]],null,null,null,null,null)),(e()(),cr(-1,null,["Cost:"])),(e()(),Qs(16777216,null,null,1,null,mb)),ai(35,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(36,0,null,null,1,"div",[["id","textNotAvailable"]],null,null,null,null,null)),(e()(),cr(37,null,[""," - ",""]))],(function(e,n){var l=n.component,t=e(n,3,0,l.dismiss&&l.count>0);e(n,2,0,"tooltip",t),e(n,4,0,l.id),e(n,8,0,l.dismiss),e(n,10,0,!l.dismiss&&!l.recruit),e(n,18,0,"attack","army"),e(n,22,0,"defense","army"),e(n,26,0,"speed","army"),e(n,30,0,"coins","resources"),e(n,35,0,l.getRecruitCost())}),(function(e,n){var l=n.component;e(n,6,0,yt(1,"",l.id,""));var t=l.multiplier,i=ql(n,11,1,e(n,12,0,qt(n.parent,0),l.getTroopName()));e(n,11,0,t,i),e(n,19,0,l.getTroopStrength()),e(n,23,0,l.getTroopDefense()),e(n,27,0,l.getTroopSpeed()),e(n,31,0,l.getTroopPay()),e(n,37,0,l.getTroopName(),l.count)}))}function Sb(e){return gr(0,[ci(0,Na,[]),nr(671088640,1,{progressRef:0}),(e()(),Qs(16777216,null,null,1,null,cb)),ai(3,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,fb)),ai(5,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,3,0,l.isAvailable()),e(n,5,0,!l.isAvailable())}),null)}let Eb=(()=>{class e extends tR{constructor(e,n,l,t,i){super(n,e,l,i,t,Du.FORT,Wu.FORT)}}return e.ngInjectableDef=ce({factory:function(){return new e(De(yf),De(Zv),De(sf),De(fv),De(nR))},token:e,providedIn:"root"}),e})();class vb{constructor(e,n,l,t,i,s){this.servicesService=e,this.armyService=n,this.resourcesService=l,this.fortService=t,this.router=i,this.changeDetectorRef=s,this.selection=1,this.dismiss=!1,this.troops=[Pu.MILITIA,Pu.SPY,Pu.SPEARMAN,Pu.ARCHER,Pu.SWORDSMAN,Pu.LIGHT_CAVALRY,Pu.HORSE_ARCHER]}ngOnInit(){this.armyService.registerForRecruitsUpdate().subscribe(()=>{this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges()})}changeSelection(e){this.selection=e}changeDismiss(e){this.dismiss=e}getTroops(){return this.armyService.getUnits()}getRecruits(){return this.armyService.getRecruits()}recruit(e){this.dismiss?this.armyService.dismiss(e,this.selection):this.armyService.recruit(e,this.selection)}isDev(){return!go.production}progress(){this.armyService.progressRecruitment(10)}getBarracksSize(){return this.armyService.getBarracksSize()}getTroopsSize(){return this.armyService.getArmySize()}getUnemployed(){return this.resourcesService.getPeople()}getDefenseStrength(){return this.armyService.getDefenseStrength()}getAttackStrength(){return this.armyService.getAttackStrength()}checkForTrainingSquare(){return void 0!==this.fortService.getBuildings().find(e=>e.getBuildingType()===Ru.TRAINING_SQUARE)}getSoldiersPay(){return this.armyService.calculateSoldiersPay()}getPaydayCounter(){return this.armyService.getPaydayCounter()}getMissions(){return this.servicesService.getWorldService().getPlayerLandMissions().concat(this.servicesService.getWorldService().getPlayerSeaMissions().filter(e=>e.army&&e.army.getLandUnits(!1).getArmySize()>0))}selectMission(e){this.servicesService.getWorldService().setSelectedMission(e),this.router.navigate(["/world"])}getTroopSize(e){const n=this.armyService.getArmy().getUnit(e);return n?n.size:0}getTroopName(e){return Uu.prepareTroopName(e)}drop(e){this.armyService.moveRecipeInQueue(e)}getProtection(){return this.servicesService.getWorldService().getProtection()}}var Rb=Jl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:.7%;height:100%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#categories[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;border:1px solid #000;height:91.5%;text-align:center}.category[_ngcontent-%COMP%]{text-align:center;-webkit-box-flex:0;flex:0 0 33%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;border:1px solid #000;-webkit-box-align:center;align-items:center}.recruits[_ngcontent-%COMP%]{text-align:center;-webkit-box-flex:0;flex:0 0 50%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;overflow-y:auto;overflow-x:hidden;border-bottom:1px solid #000}.title[_ngcontent-%COMP%]{padding:2px;width:100%;font-weight:bolder;font-size:.9em;margin-bottom:5px;display:block;border-bottom:1px solid #000}#numbers[_ngcontent-%COMP%]{margin-top:-6px;padding:0;margin-bottom:5px}.number[_ngcontent-%COMP%]{border:1px solid #000;padding:2px 4px;background-color:var(--passive-colour);font-size:.75em;cursor:pointer}.active[_ngcontent-%COMP%], .number[_ngcontent-%COMP%]:hover{background-color:var(--active-colour)}app-troop[_ngcontent-%COMP%]{display:inline-block;margin:4px;width:75%;font-size:.7em;cursor:pointer}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}#noTrainingSquare[_ngcontent-%COMP%]{margin-left:4px;color:var(--negative-colour)}#missionsScroll[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;width:100%;overflow-y:auto;-webkit-box-align:center;align-items:center}.mission[_ngcontent-%COMP%]{padding:4px;border:1px solid #000;width:80%;cursor:pointer;margin:3px}#recruitsList[_ngcontent-%COMP%]{height:100%;width:100%}"]],data:{}});function Ob(e){return gr(0,[(e()(),qs(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),cr(-1,null,[" \xa0\xa0 "])),(e()(),qs(2,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(3,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),cr(4,null,["\xa0"," "]))],(function(e,n){e(n,3,0,"protection","army","regions protection")}),(function(e,n){e(n,4,0,n.component.getProtection())}))}function bb(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[["id","noTrainingSquare"]],null,null,null,null,null)),(e()(),cr(-1,null,["No Training square available"]))],null,null)}function Tb(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[["class","number"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.changeSelection(1)&&t),t}),null,null)),(e()(),cr(-1,null,["1x"]))],null,null)}function Cb(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[["class","number active"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.changeSelection(1)&&t),t}),null,null)),(e()(),cr(-1,null,["1x"]))],null,null)}function Ib(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[["class","number"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.changeSelection(5)&&t),t}),null,null)),(e()(),cr(-1,null,["5x"]))],null,null)}function yb(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[["class","number active"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.changeSelection(5)&&t),t}),null,null)),(e()(),cr(-1,null,["5x"]))],null,null)}function Ab(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[["class","number"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.changeSelection(10)&&t),t}),null,null)),(e()(),cr(-1,null,["10x"]))],null,null)}function Nb(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[["class","number active"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.changeSelection(10)&&t),t}),null,null)),(e()(),cr(-1,null,["10x"]))],null,null)}function _b(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[["class","number"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.changeDismiss(!0)&&t),t}),null,null)),(e()(),cr(-1,null,["dismiss"]))],null,null)}function wb(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[["class","number active"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.changeDismiss(!1)&&t),t}),null,null)),(e()(),cr(-1,null,["dismiss"]))],null,null)}function Pb(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-troop",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.recruit(e.context.$implicit)&&t),t}),Sb,ib)),ai(1,4308992,null,0,tb,[lb,yf],{troop:[0,"troop"],count:[1,"count"],multiplier:[2,"multiplier"],dismiss:[3,"dismiss"]},null)],(function(e,n){var l=n.component;e(n,1,0,n.context.$implicit,l.getTroopSize(n.context.$implicit),l.selection,l.dismiss)}),null)}function xb(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.progress()&&t),t}),null,null)),(e()(),cr(-1,null,["recruit"]))],null,null)}function kb(e){return gr(0,[(e()(),qs(0,16777216,null,null,6,"app-troop",[["cdkDrag",""],["class","cdk-drag"]],[[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],null,null,Sb,ib)),hi(6144,null,FS,null,[HS]),ai(2,4866048,[[1,4]],3,HS,[ol,[3,LS],ka,hs,Ml,US,[2,_R],DS,_n],null,null),nr(603979776,2,{_handles:1}),nr(603979776,3,{_previewTemplate:0}),nr(603979776,4,{_placeholderTemplate:0}),ai(6,4308992,null,0,tb,[lb,yf],{troop:[0,"troop"],count:[1,"count"],recruit:[2,"recruit"],progress:[3,"progress"],multiplier:[4,"multiplier"],recruitIndex:[5,"recruitIndex"],dismiss:[6,"dismiss"]},null),(e()(),Qs(0,null,null,0))],(function(e,n){var l=n.component;e(n,6,0,n.context.$implicit[0].troop,n.context.$implicit[0].size,!0,n.context.$implicit[1],l.selection,n.context.index,l.dismiss)}),(function(e,n){e(n,0,0,qt(n,2).disabled,qt(n,2)._dragRef.isDragging())}))}function Mb(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(1,null,[" ",": "," "]))],null,(function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit.troop),n.context.$implicit.size)}))}function Db(e){return gr(0,[(e()(),qs(0,0,null,null,9,"div",[["appTooltip",""],["class","mission tooltip"]],null,[[null,"click"],[null,"mousemove"]],(function(e,n,l){var t=!0,i=e.component;return"mousemove"===n&&(t=!1!==qt(e,1).onmousemove(l)&&t),"click"===n&&(t=!1!==i.selectMission(e.context.$implicit)&&t),t}),null,null)),ai(1,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),cr(2,null,[" "," "])),(e()(),qs(3,0,null,null,6,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),cr(4,null,[" "," "])),(e()(),qs(5,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),cr(6,null,[" "," : ","% "])),ur(7,2),(e()(),Qs(16777216,null,null,1,null,Mb)),ai(9,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,1,0,"mission-"+n.context.$implicit.id),e(n,9,0,n.context.$implicit.army.units)}),(function(e,n){var l=n.context.$implicit.getMissionName();e(n,2,0,l),e(n,3,0,yt(1,"mission-",n.context.$implicit.id,""));var t=n.context.$implicit.getMissionName();e(n,4,0,t);var i=n.context.$implicit.getStatus(),s=ql(n,6,1,e(n,7,0,qt(n.parent,0),n.context.$implicit.getDisplayProgress(),"0.0-0"));e(n,6,0,i,s)}))}function Lb(e){return gr(0,[ci(0,Pa,[Ki]),(e()(),qs(1,0,null,null,63,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),cr(-1,null,["Army"])),(e()(),qs(4,0,null,null,19,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(5,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(6,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),cr(7,null,["\xa0"," /"," \xa0\xa0 "])),(e()(),qs(8,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(9,114688,null,0,$p,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),cr(10,null,["\xa0"," \xa0\xa0 "])),(e()(),qs(11,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(12,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),cr(13,null,["\xa0"," \xa0\xa0 "])),(e()(),qs(14,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(15,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),cr(16,null,["\xa0"," \xa0\xa0 "])),(e()(),qs(17,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(18,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),cr(19,null,["\xa0"," in "," days "])),(e()(),Qs(16777216,null,null,1,null,Ob)),ai(21,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,bb)),ai(23,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(24,0,null,null,40,"div",[["id","categories"]],null,null,null,null,null)),(e()(),qs(25,0,null,null,21,"div",[["class","category"]],null,null,null,null,null)),(e()(),qs(26,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),cr(-1,null,["GARRISON"])),(e()(),qs(28,0,null,null,16,"div",[["id","numbers"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,Tb)),ai(30,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,Cb)),ai(32,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,Ib)),ai(34,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,yb)),ai(36,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,Ab)),ai(38,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,Nb)),ai(40,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,_b)),ai(42,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,wb)),ai(44,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,Pb)),ai(46,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(47,0,null,null,11,"div",[["class","category"]],null,null,null,null,null)),(e()(),qs(48,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),cr(-1,null,["RECRUITS"])),(e()(),Qs(16777216,null,null,1,null,xb)),ai(51,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(52,0,null,null,6,"div",[["cdkDropList",""],["class","cdk-drop-list"],["id","recruitsList"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],(function(e,n,l){var t=!0;return"cdkDropListDropped"===n&&(t=!1!==e.component.drop(l)&&t),t}),null,null)),hi(6144,null,LS,null,[VS]),ai(54,1196032,null,1,VS,[ol,DS,_n,[2,_R],[3,BS]],{id:[0,"id"]},{dropped:"cdkDropListDropped"}),nr(603979776,1,{_draggables:1}),hi(256,null,BS,void 0,[]),(e()(),Qs(16777216,null,null,1,null,kb)),ai(58,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(59,0,null,null,5,"div",[["class","category"]],null,null,null,null,null)),(e()(),qs(60,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),cr(-1,null,["MISSIONS IN PROGRESS"])),(e()(),qs(62,0,null,null,2,"div",[["id","missionsScroll"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,Db)),ai(64,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,6,0,"barracks","army","Barracks"),e(n,9,0,"hammer","Workers","0 0 0 2px"),e(n,12,0,"attack","army","Attack strength"),e(n,15,0,"defense","army","Defense strength"),e(n,18,0,"coins","resources","Soldiers pay (collected every 30 days)"),e(n,21,0,l.getProtection()>0),e(n,23,0,!l.checkForTrainingSquare()),e(n,30,0,1!==l.selection),e(n,32,0,1===l.selection),e(n,34,0,5!==l.selection),e(n,36,0,5===l.selection),e(n,38,0,10!==l.selection),e(n,40,0,10===l.selection),e(n,42,0,!l.dismiss),e(n,44,0,l.dismiss),e(n,46,0,l.troops),e(n,51,0,l.isDev()),e(n,54,0,"recruitsList"),e(n,58,0,l.getRecruits()),e(n,64,0,l.getMissions())}),(function(e,n){var l=n.component;e(n,7,0,l.getTroopsSize(),l.getBarracksSize()),e(n,10,0,l.getUnemployed()),e(n,13,0,l.getAttackStrength()),e(n,16,0,l.getDefenseStrength()),e(n,19,0,l.getSoldiersPay(),l.getPaydayCounter()+1),e(n,52,0,qt(n,54).id,qt(n,54).disabled,qt(n,54)._dropListRef.isDragging(),qt(n,54)._dropListRef.isReceiving())}))}function Fb(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-army",[],null,null,null,Lb,Rb)),ai(1,114688,null,0,vb,[sf,lb,yf,Eb,up,_n],null,null)],(function(e,n){e(n,1,0)}),null)}var Ub=Ht("app-army",vb,Fb,{},{},[]);class Hb{constructor(e,n,l,t,i,s){this.prayer=e,this.cost=n,this.requiredFaithLevel=l,this.religion=t,this.description=i,this.effect=s}}let Gb=(()=>{class e{constructor(e,n,l,t){this.servicesService=e,this.modalService=n,this.logService=l,this.resourcesService=t,this.faith=0,this.faithCap=40,this.faithLevel=1,this.faithShield=0,this.religion=wu.NONE,this.prayers=[],e.addService(Wu.RELIGION,this),this.initPrayers()}initPrayers(){this.prayers=[],Object.entries(xo.PRAYERS).forEach(e=>{this.prayers.push(new Hb(yu[e[0]],e[1].FAITH,e[1].FAITH_LEVEL,e[1].RELIGION,e[1].DESCRIPTION,e[1].FINISH))})}getName(){return"ReligionService"}load(e){this.faith=e.faith,this.faithCap=e.faithCap,this.faithLevel=e.faithLevel,this.religion=e.religion,this.faithShield=e.faithShield,this.prayers.find(e=>e.prayer===yu.PREACH).cost=e.preachCost}save(){return{faith:this.faith,faithCap:this.faithCap,faithLevel:this.faithLevel,religion:this.religion,faithShield:this.faithShield,preachCost:this.prayers.find(e=>e.prayer===yu.PREACH).cost}}reset(e,n){this.faith=0,this.faithCap=40,this.faithLevel=1,this.faithShield=0,this.religion=wu.NONE,this.prayers=[],this.initPrayers()}getFaith(){return this.faith}increaseFaith(e){this.faith<this.faithCap&&(this.faith+=e,this.faith===this.faithCap&&this.logService.success("Full faith"),this.faith>this.faithCap&&(this.faith=this.faithCap))}increaseFaithCap(e){this.faithCap+=e}decreaseFaithCap(e){this.faithCap-=e,this.faith>this.faithCap&&(this.faith=this.faithCap)}decreaseFaith(e){return this.faith-e>=0?(this.faith-=e,0):e-this.faith}getFaithCap(){return this.faithCap}getPrayers(){return this.prayers.filter(e=>(e.religion===wu.NONE||e.religion===this.religion)&&e.requiredFaithLevel<=this.faithLevel)}pray(e){e.cost<=this.faith?(this.faith-=e.cost,e.effect(this.servicesService),e.prayer===yu.PREACH&&(this.prayers.find(e=>e.prayer===yu.PREACH).cost+=10)):this.modalService.info("Not enough faith for this prayer!")}increaseFaithLevel(e){this.faithLevel+=e}increaseFaithShield(e){this.faithShield+=e}decreaseFaithShield(e){if(this.faithShield>=e)return this.faithShield-=e,0;{const n=e-this.faithShield;return this.faithShield=0,n}}getFaithLevel(){return this.faithLevel}getFaithShield(){return this.faithShield}getCurrentReligion(){return this.religion}getReligionSettings(e){return xo.getReligion(e)}changeReligion(e){this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to change religion?");const n=this.modalService.registerForConfirmation().subscribe(l=>{if(n.unsubscribe(),l){const n=this.getReligionSettings(e);if(this.faith<n.FAITH)return void this.modalService.info("Not enough faith");const l=new Map;if(n.OFFERING.forEach(e=>l.set(e.resource,e.amount)),!this.resourcesService.hasResources(l,"Religion",1,!0))return void this.modalService.info("Not enough offering resources");this.faith-=n.FAITH,this.resourcesService.decreaseResources(l,"Religion",!0),this.religion=e}})}}return e.ngInjectableDef=ce({factory:function(){return new e(De(sf),De(pf),De(df),De(yf))},token:e,providedIn:"root"}),e})();class Bb{constructor(e){this.religionService=e}ngOnInit(){}getPrayerName(){return Uu.preparePrayerName(this.prayer.prayer)}isAvailable(){return this.religionService.getFaith()>=this.prayer.cost}}var Wb=Jl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:inline-block;width:47%;padding:3px;margin:3px;text-align:center;border:1px solid #000}#wrapperNotAvailable[_ngcontent-%COMP%]{display:inline-block;width:47%;padding:3px;margin:3px;text-align:center;border:1px solid #646464}#titleGrey[_ngcontent-%COMP%]{display:inline-block;color:#646464}.notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}.title[_ngcontent-%COMP%]{text-align:left}hr[_ngcontent-%COMP%]{border-color:#000}#progress[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}#text[_ngcontent-%COMP%]{position:relative;z-index:2}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}"]],data:{}});function Vb(e){return gr(0,[(e()(),qs(0,0,null,null,9,"div",[["appTooltip",""],["class","tooltip"],["id","wrapper"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==qt(e,1).onmousemove(l)&&t),t}),null,null)),ai(1,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),qs(2,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),cr(3,null,["",""])),(e()(),qs(4,0,null,null,5,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),cr(5,null,[" "," "])),(e()(),qs(6,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),cr(7,null,[" "," "])),(e()(),qs(8,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(9,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){e(n,1,0,n.component.id),e(n,9,0,"faith","religion")}),(function(e,n){var l=n.component;e(n,3,0,l.getPrayerName()),e(n,4,0,yt(1,"",l.id,"")),e(n,5,0,l.prayer.description),e(n,7,0,l.prayer.cost)}))}function zb(e){return gr(0,[(e()(),qs(0,0,null,null,10,"div",[["appTooltip",""],["class","tooltip"],["id","wrapperNotAvailable"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==qt(e,1).onmousemove(l)&&t),t}),null,null)),ai(1,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),qs(2,0,null,null,1,"div",[["id","titleGrey"]],null,null,null,null,null)),(e()(),cr(3,null,["",""])),(e()(),qs(4,0,null,null,6,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),cr(5,null,[" "," "])),(e()(),qs(6,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),qs(7,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),cr(8,null,[" "," "])),(e()(),qs(9,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(10,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){e(n,1,0,n.component.id),e(n,10,0,"faith","religion")}),(function(e,n){var l=n.component;e(n,3,0,l.getPrayerName()),e(n,4,0,yt(1,"",l.id,"")),e(n,5,0,l.prayer.description),e(n,8,0,l.prayer.cost)}))}function Yb(e){return gr(0,[(e()(),Qs(16777216,null,null,1,null,Vb)),ai(1,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,zb)),ai(3,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,1,0,l.isAvailable()),e(n,3,0,!l.isAvailable())}),null)}class $b{constructor(e,n){this.religionService=e,this.resourcesService=n}ngOnInit(){}getFaith(){return this.religionService.getFaith()}getFaithCap(){return this.religionService.getFaithCap()}increaseFaith(e){this.religionService.increaseFaith(e)}isDev(){return!go.production}getPrayers(){return this.religionService.getPrayers()}pray(e){this.religionService.pray(e)}getFaithShield(){return Uu.round(this.religionService.getFaithShield(),2)}getReligions(){return[wu.NONE,wu.FERTILITY,wu.NATURE,wu.TECHNOLOGY,wu.WAR]}getReligionName(e){return Uu.prepareReligionName(e)}getCurrentReligion(){return this.religionService.getCurrentReligion()}getCurrentReligionName(){return wu[this.getCurrentReligion()]}getCurrentReligionDisplayName(){return Uu.prepareReligionName(this.getCurrentReligion())}changeReligion(e){this.religionService.changeReligion(e)}getReligionSettings(e){return xo.getReligion(e)}getResourceString(e){return bu[e]}hasResource(e){return 0===this.resourcesService.hasResource(e.resource,e.amount,"Religion",!0)}}var Kb=Jl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%;margin:.5%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#table[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;border:1px solid #000;height:85%}.column[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:auto;border:1px solid #000}#prayers[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 70%;overflow-y:auto}#religions[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1 0 auto;overflow-y:auto}.prayer[_ngcontent-%COMP%]{display:inline}.tableTitle[_ngcontent-%COMP%]{border-bottom:1px solid #000;text-align:center}app-prayer[_ngcontent-%COMP%]{cursor:pointer}.faith[_ngcontent-%COMP%]{margin-right:-2px}.religion[_ngcontent-%COMP%]{border:1px solid #000;text-align:center;margin:3px;cursor:pointer}.active[_ngcontent-%COMP%]{background-color:var(--active-colour);cursor:auto}.tooltip[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100px}.notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}.inline[_ngcontent-%COMP%]{display:inline}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}.icon2[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}"]],data:{}});function jb(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.increaseFaith(10)&&t),t}),null,null)),(e()(),cr(-1,null,["Increase faith"]))],null,null)}function Qb(e){return gr(0,[(e()(),qs(0,0,null,null,2,"div",[["class","prayer"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-prayer",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.pray(e.context.$implicit)&&t),t}),Yb,Wb)),ai(2,114688,null,0,Bb,[Gb],{prayer:[0,"prayer"],id:[1,"id"]},null)],(function(e,n){e(n,2,0,n.context.$implicit,n.context.index)}),null)}function qb(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[["class","religion active"]],null,null,null,null,null)),(e()(),cr(1,null,[" "," "]))],null,(function(e,n){e(n,1,0,n.component.getReligionName(n.parent.context.$implicit))}))}function Xb(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[["class","inline"]],null,null,null,null,null)),(e()(),cr(1,null,["",""]))],null,(function(e,n){e(n,1,0,n.component.getReligionSettings(n.parent.parent.context.$implicit).FAITH)}))}function Zb(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[["class","inline notMet"]],null,null,null,null,null)),(e()(),cr(1,null,["",""]))],null,(function(e,n){e(n,1,0,n.component.getReligionSettings(n.parent.parent.context.$implicit).FAITH)}))}function Jb(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(-1,null,["offering:"]))],null,null)}function eT(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[["class","inline"]],null,null,null,null,null)),(e()(),cr(1,null,[""," "]))],null,(function(e,n){e(n,1,0,n.parent.context.$implicit.amount)}))}function nT(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[["class","inline notMet"]],null,null,null,null,null)),(e()(),cr(1,null,[""," "]))],null,(function(e,n){e(n,1,0,n.parent.context.$implicit.amount)}))}function lT(e){return gr(0,[(e()(),qs(0,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,6,"div",[["class","icon2"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,eT)),ai(3,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,nT)),ai(5,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(6,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(7,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){var l=n.component;e(n,3,0,l.hasResource(n.context.$implicit)),e(n,5,0,!l.hasResource(n.context.$implicit)),e(n,7,0,l.getResourceString(n.context.$implicit.resource),"resources")}),null)}function tT(e){return gr(0,[(e()(),qs(0,0,null,null,16,"div",[["appTooltip",""],["class","religion tooltip"]],null,[[null,"click"],[null,"mousemove"]],(function(e,n,l){var t=!0,i=e.component;return"mousemove"===n&&(t=!1!==qt(e,1).onmousemove(l)&&t),"click"===n&&(t=!1!==i.changeReligion(e.parent.context.$implicit)&&t),t}),null,null)),ai(1,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),cr(2,null,[" "," "])),(e()(),qs(3,0,null,null,13,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),cr(4,null,[" "," "])),(e()(),qs(5,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),qs(6,0,null,null,6,"div",[["class","icon2"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,Xb)),ai(8,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,Zb)),ai(10,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(11,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(12,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Qs(16777216,null,null,1,null,Jb)),ai(14,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,lT)),ai(16,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,1,0,0-n.parent.context.$implicit),e(n,8,0,l.getFaith()>=l.getReligionSettings(n.parent.context.$implicit).FAITH),e(n,10,0,l.getFaith()<l.getReligionSettings(n.parent.context.$implicit).FAITH),e(n,12,0,"faith","religion"),e(n,14,0,l.getReligionSettings(n.parent.context.$implicit).OFFERING.length>0),e(n,16,0,l.getReligionSettings(n.parent.context.$implicit).OFFERING)}),(function(e,n){var l=n.component;e(n,2,0,l.getReligionName(n.parent.context.$implicit)),e(n,3,0,yt(1,"",0-n.parent.context.$implicit,"")),e(n,4,0,l.getReligionName(n.parent.context.$implicit))}))}function iT(e){return gr(0,[(e()(),qs(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,qb)),ai(2,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,tT)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,n.context.$implicit===l.getCurrentReligion()),e(n,4,0,n.context.$implicit!==l.getCurrentReligion())}),null)}function sT(e){return gr(0,[(e()(),qs(0,0,null,null,32,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["Religion"])),(e()(),qs(4,0,null,null,9,"div",[],null,null,null,null,null)),(e()(),qs(5,0,null,null,1,null,null,null,null,null,null,null)),(e()(),cr(-1,null,["Faith"])),(e()(),qs(7,0,null,null,1,"app-icon",[["class","faith"]],null,null,null,jp,Kp)),ai(8,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),qs(9,0,null,null,1,null,null,null,null,null,null,null)),(e()(),cr(-1,null,[":"])),(e()(),cr(11,null,[" ","/"," "])),(e()(),Qs(16777216,null,null,1,null,jb)),ai(13,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(14,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),cr(-1,null,[" Faith shield "])),(e()(),qs(16,0,null,null,1,"app-icon",[["class","prayer"]],null,null,null,jp,Kp)),ai(17,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),cr(18,null,[" : "," "])),(e()(),qs(19,0,null,null,13,"div",[["id","table"]],null,null,null,null,null)),(e()(),qs(20,0,null,null,7,"div",[["class","column"],["id","prayers"]],null,null,null,null,null)),(e()(),qs(21,0,null,null,3,"span",[["class","tableTitle"]],null,null,null,null,null)),(e()(),cr(-1,null,[" Prayers "])),(e()(),qs(23,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(24,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),qs(25,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,Qb)),ai(27,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(28,0,null,null,4,"div",[["class","column"],["id","religions"]],null,null,null,null,null)),(e()(),qs(29,0,null,null,1,"span",[["class","tableTitle"]],null,null,null,null,null)),(e()(),cr(-1,null,["Religions"])),(e()(),Qs(16777216,null,null,1,null,iT)),ai(32,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,8,0,"faith","religion"),e(n,13,0,l.isDev()),e(n,17,0,"faith_shield","religion","Faith shield"),e(n,24,0,l.getCurrentReligionName(),"religion",l.getCurrentReligionDisplayName()),e(n,27,0,l.getPrayers()),e(n,32,0,l.getReligions())}),(function(e,n){var l=n.component;e(n,11,0,l.getFaith(),l.getFaithCap()),e(n,18,0,l.getFaithShield())}))}function rT(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-religion",[],null,null,null,sT,Kb)),ai(1,114688,null,0,$b,[Gb,yf],null,null)],(function(e,n){e(n,1,0)}),null)}var uT=Ht("app-religion",$b,rT,{},{},[]);let oT=(()=>{class e{constructor(e,n,l){this.servicesService=e,this.calendarService=n,this.optionsService=l,this.forecastPeriod=1,this.forecast=[],e.addService(Wu.WEATHER,this),this.tick(0)}getName(){return"WeatherService"}load(e){this.forecastPeriod=void 0!==e.forecastPeriod?e.forecastPeriod:1,this.forecast=e.forecast}save(){return{forecastPeriod:this.forecastPeriod,forecast:this.forecast}}reset(e,n){this.forecastPeriod=1,this.forecast=[],this.today=null,this.tick(0)}tick(e){const n=this.calendarService.getAbsoluteDay();for(;this.forecast.length>0&&this.forecast[0][0]<n;)this.forecast.shift();for(;this.forecast.length<this.forecastPeriod;){let e=n;0!==this.forecast.length&&(e=this.forecast[this.forecast.length-1][0]+1),this.forecast.push(this.predictDay(e))}this.today=this.forecast[0]}predictDay(e){let n,l;switch(this.calendarService.getSeasonForAbsoluteDay(e)){case of.SPRING:n=Yu.randomBetween(10,25),l=Yu.randomElement([{item:Hu.SUN,chance:40},{item:Hu.CLOUDS,chance:25},{item:Hu.WIND,chance:14},{item:Hu.RAIN,chance:20},{item:Hu.STORM,chance:1}]);break;case of.SUMMER:n=Yu.randomBetween(15,35),l=Yu.randomElement([{item:Hu.SUN,chance:50},{item:Hu.CLOUDS,chance:10},{item:Hu.WIND,chance:10},{item:Hu.RAIN,chance:20},{item:Hu.STORM,chance:10}]);break;case of.AUTUMN:n=Yu.randomBetween(10,25),l=Yu.randomElement([{item:Hu.SUN,chance:20},{item:Hu.CLOUDS,chance:40},{item:Hu.WIND,chance:10},{item:Hu.RAIN,chance:25},{item:Hu.STORM,chance:5}]);break;case of.WINTER:n=Yu.randomBetween(-20,5),l=Yu.randomElement([{item:Hu.SUN,chance:30},{item:Hu.CLOUDS,chance:20},{item:Hu.WIND,chance:15},{item:Hu.SNOW,chance:25},{item:Hu.STORM,chance:10}])}return[e,l,n]}getCurrentWeather(){return this.today[1]}getCurrentTemperature(){return this.optionsService.getOption(rf.METRIC)?this.today[2]:1.8*this.today[2]+32}increaseForecastPeriod(e){this.forecastPeriod+=e}isWeather(...e){return e.includes(this.getCurrentWeather())}getForecast(){return this.forecast}getForecastPeriod(){return this.forecastPeriod}}return e.ngInjectableDef=ce({factory:function(){return new e(De(sf),De(hf),De(uf))},token:e,providedIn:"root"}),e})();class aT{constructor(e,n,l){this.weatherService=e,this.calendarService=n,this.optionsService=l,this.metric=this.optionsService.getOption(rf.METRIC),this.optionsSubscription||(this.optionsSubscription=this.optionsService.registerForOptionsChange().subscribe(()=>this.metric=this.optionsService.getOption(rf.METRIC)))}ngOnInit(){}getTodayWeather(){return this.weatherService.getCurrentWeather()}getTodayTemperature(){return this.weatherService.getCurrentTemperature()}getWeatherName(e){return Hu[e].toLowerCase()}getForecast(){return this.weatherService.getForecast()}getForecastPeriod(){return this.weatherService.getForecastPeriod()}calculateTemp(e){return this.optionsService.getOption(rf.METRIC)?e:1.8*e+32}isDev(){return!go.production}progress10Days(){this.calendarService.progressDays(10)}}var cT=Jl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:.5%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#forecast[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;border:1px solid #000;text-align:center;overflow-x:auto}.weather[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 40px;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;border-right:1px solid #000}.day[_ngcontent-%COMP%]{width:60px;border-bottom:1px solid #000}"]],data:{}});function hT(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.progress10Days()&&t),t}),null,null)),(e()(),cr(-1,null,["Progress 10 days"]))],null,null)}function dT(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["\xb0C"]))],null,null)}function gT(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["\xb0F"]))],null,null)}function pT(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[["class","day"]],null,null,null,null,null)),(e()(),cr(-1,null,["today"]))],null,null)}function mT(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[["class","day"]],null,null,null,null,null)),(e()(),cr(1,null,["+",""]))],null,(function(e,n){e(n,1,0,n.parent.context.index)}))}function fT(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["\xb0C"]))],null,null)}function ST(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["\xb0F"]))],null,null)}function ET(e){return gr(0,[(e()(),qs(0,0,null,null,13,"div",[["class","weather"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,pT)),ai(2,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,mT)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(5,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(6,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),qs(7,0,null,null,6,"span",[["id","temp"]],null,null,null,null,null)),(e()(),cr(8,null,["",""])),ur(9,2),(e()(),Qs(16777216,null,null,1,null,fT)),ai(11,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,ST)),ai(13,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,0===n.context.index),e(n,4,0,0!==n.context.index),e(n,6,0,l.getWeatherName(n.context.$implicit[1]),"weather"),e(n,11,0,l.metric),e(n,13,0,!l.metric)}),(function(e,n){var l=n.component,t=ql(n,8,0,e(n,9,0,qt(n.parent.parent,0),l.calculateTemp(n.context.$implicit[2]),"0.0-1"));e(n,8,0,t)}))}function vT(e){return gr(0,[(e()(),qs(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),cr(-1,null,["Weather forecast: "])),(e()(),qs(2,0,null,null,2,"div",[["id","forecast"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,ET)),ai(4,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,4,0,n.component.getForecast())}),null)}function RT(e){return gr(0,[ci(0,Pa,[Ki]),(e()(),qs(1,0,null,null,17,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),qs(3,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["Weather"])),(e()(),Qs(16777216,null,null,1,null,hT)),ai(6,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),cr(7,null,[" Weather: "," "])),(e()(),qs(8,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(9,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),qs(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),cr(11,null,[" Temperature: ",""])),ur(12,2),(e()(),Qs(16777216,null,null,1,null,dT)),ai(14,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,gT)),ai(16,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,vT)),ai(18,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,6,0,l.isDev()),e(n,9,0,l.getWeatherName(l.getTodayWeather()),"weather"),e(n,14,0,l.metric),e(n,16,0,!l.metric),e(n,18,0,l.getForecastPeriod()>1)}),(function(e,n){var l=n.component;e(n,7,0,l.getWeatherName(l.getTodayWeather()));var t=ql(n,11,0,e(n,12,0,qt(n,0),l.getTodayTemperature(),"0.0-1"));e(n,11,0,t)}))}function OT(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-weather",[],null,null,null,RT,cT)),ai(1,114688,null,0,aT,[oT,hf,uf],null,null)],(function(e,n){e(n,1,0)}),null)}var bT=Ht("app-weather",aT,OT,{},{},[]);class TT{constructor(e){this.optionsService=e,this.progress=0,this.text=""}set progressReInput(e){this.progressRef=e,this.ngOnChanges()}set labelRefInput(e){this.labelRef=e,this.ngOnChanges()}set label2RefInput(e){this.label2Ref=e,this.ngOnChanges()}ngOnInit(){}ngOnChanges(){this.progressBarsEnabled()?(this.progressRef&&(this.progressRef.nativeElement.style.width=this.progress+"%"),this.labelRef&&(this.labelRef.nativeElement.innerHTML=this.text&&""!==this.text?this.text:this.progress.toFixed(2)+"%")):this.label2Ref&&(this.label2Ref.nativeElement.innerHTML=this.text,this.label2Ref.nativeElement.innerHTML=this.progress.toFixed(2)+"%")}progressBarsEnabled(){return this.optionsService.getOption(rf.VISUAL_PROGRESS_BARS)}}var CT=Jl({encapsulation:0,styles:[["#progressBar[_ngcontent-%COMP%]{position:relative;width:95%;height:100%;display:inline-block;text-align:center;background-color:#ddd;border:1px solid #000;margin-top:-1px}#progressBar2[_ngcontent-%COMP%]{position:relative;width:95%;height:100%;display:inline-block;text-align:center;margin-top:-1px}#progress[_ngcontent-%COMP%]{height:100%;background-color:var(--active-colour);text-align:center;color:#fff}#label[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;width:100%;font-size:1.2em;text-align:center}#label2[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;width:100%;font-size:1.2em;text-align:center;font-weight:700}"]],data:{}});function IT(e){return gr(0,[(e()(),qs(0,0,null,null,2,"div",[["id","progressBar"]],null,null,null,null,null)),(e()(),qs(1,0,[[1,0],["progress",1]],null,0,"div",[["id","progress"]],null,null,null,null,null)),(e()(),qs(2,0,[[2,0],["label",1]],null,0,"div",[["id","label"]],null,null,null,null,null))],null,null)}function yT(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[["id","progressBar2"]],null,null,null,null,null)),(e()(),qs(1,0,[[3,0],["label2",1]],null,0,"div",[["id","label2"]],null,null,null,null,null))],null,null)}function AT(e){return gr(0,[nr(671088640,1,{progressReInput:0}),nr(671088640,2,{labelRefInput:0}),nr(671088640,3,{label2RefInput:0}),(e()(),Qs(16777216,null,null,1,null,IT)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,yT)),ai(6,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,4,0,l.progressBarsEnabled()),e(n,6,0,!l.progressBarsEnabled())}),null)}class NT{constructor(e,n,l,t,i,s,r,u){this.data={},this.id=e,this.name=n,this.diplomacy=l,this.colour=t,this.focus=i,this.regions=s,this.data=r,this.capital=u}getDiplomacy(){return this.diplomacy<-25?"hostile":this.diplomacy>=-25&&this.diplomacy<25?"neutral":this.diplomacy>=25?"friendly":void 0}decreaseDiplomacy(e){this.diplomacy-=e,this.diplomacy<-100&&(this.diplomacy=-100)}increaseDiplomacy(e){this.diplomacy+=e,this.diplomacy>100&&(this.diplomacy=100)}}class _T{constructor(e,n,l,t,i,s,r,u,o,a,c,h,d,g,p,m,f,S=0){this.id=e,this.path=n,this.center=l,this.neighbours=t,this.land=i,this.forest=s,this.mountains=r,this.wealth=u,this.economy=o,this.defense=a,this.harbour=c,this.roads=h,this.watchtower=d,this.watched=g,this.target=p,this.spy=m,this.army=f,this.navy=new JO([]),this.lastAttack=S}getSize(){return this.land+this.forest+this.mountains}}class wT{constructor(e,n){this.id=e,this.neighbours=n}}var PT=function(e){return e[e.LAND=0]="LAND",e[e.SEA=1]="SEA",e}({});class xT{constructor(e,n,l,t,i,s,r,u,o,a){this.speed=3,this.routePaths=[],this.servicesService=e,this.mission=l,this.settings=No.getMission(l),this.missionTime=this.settings.TIME,this.description=this.settings.DESCRIPTION,this.icon=this.settings.ICON,this.id=n,this.targetIndex=t,this.route=i,this.progress=s,this.status=r,this.ownerCountry=u,this.army=o,this.data=a,e&&(this.armyService=e.getArmyService(),this.logService=e.getLogService(),this.worldService=e.getWorldService(),this.gameService=e.getGameService()),this.initRoutePaths(),"{mission}"===this.status?(this.origin=this.routePaths[this.routePaths.length-1].target,this.target=this.routePaths[this.routePaths.length-1].target):(this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target),this.speed=this.getMissionType()===PT.LAND?o.getArmySpeed():o.getNavy(!1).getArmySpeed()}getMissionName(){return Uu.prepareMissionName(this.mission)}getArmySpeed(){return this.getMissionType()===PT.LAND?this.army.getArmySpeed():this.army.getNavy(!1).getArmySpeed()}getTargetRegionId(){return this.route.path[this.targetIndex]}getCurrentRegionId(){return this.route.path[this.targetIndex-1]}getOrigin(){return this.origin}getTarget(){return this.target}getTravelSpeed(){return 60*this.speed/3/this.getDistance()}tick(){if("traveling"===this.status)this.progress<100?(this.progress+=this.getTravelSpeed(),this.progress>100&&(this.progress=100)):(this.evaluateRegion(),this.targetIndex===this.route.path.length-1?(this.origin=this.target,this.isInstant()?this.calculateMission()?(this.status="returning",this.route.reversePath(),this.targetIndex=1,this.initRoutePaths(),this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target):this.status="finished":this.status="{mission}"):(this.targetIndex+=1,this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target),this.progress=0);else if("{mission}"===this.status)if(this.progress<100)this.progress+=1/this.missionTime;else{if(this.calculateMission()){this.status="returning",this.speed=this.army.getArmySpeed();const e=this.worldService.findPath(this.getTargetRegionId(),this.route.path[0],this.ownerCountry.id,!1);this.route.reversePath(),this.targetIndex=1,this.initRoutePaths(),this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target,e&&(e.path.length<this.route.path.length||!this.validateRoute())&&(this.route=e,this.targetIndex=1,this.initRoutePaths(),this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target)}else this.worldService.clearMission(),this.status="finished";this.progress=0}else"returning"!==this.status&&"canceled"!==this.status||(this.progress<100?(this.progress+=this.getTravelSpeed(),this.progress>100&&(this.progress=100)):(this.evaluateRegion(),this.targetIndex===this.route.path.length-1?(this.finish("canceled"===this.status),this.worldService.getSelectedMission()&&this.worldService.getSelectedMission().id===this.id&&this.worldService.clearMission(),this.status="finished"):(this.targetIndex+=1,this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target,this.progress=0)))}getDisplayProgress(){return"{mission}"===this.status?this.progress:this.distanceSoFar()/this.totalDistance()}distanceSoFar(){let e=0;for(let n=0;n<this.targetIndex-1;n++)e+=100*this.calculatePointsDistance(this.routePaths[n].origin,this.routePaths[n].target);return e+this.calculatePointsDistance(this.routePaths[this.targetIndex-1].origin,this.routePaths[this.targetIndex-1].target)*this.progress}totalDistance(){let e=0;for(let n=0;n<this.routePaths.length;n++)e+=this.calculatePointsDistance(this.routePaths[n].origin,this.routePaths[n].target);return e}getProgressPercentage(){return this.progress/100}isFinished(){return"finished"===this.status}getStatus(){return this.status.replace("{mission}",Uu.prepareMissionName(this.mission))}getDistance(){const e=this.calculatePointsDistance(this.origin,this.target);return this.worldService.getRegion(this.getCurrentRegionId()).roads?e*Mo.ROADS_DISTANCE_MODIFIER:e}calculatePointsDistance(e,n){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}canCancel(){return!1}}var kT=function(e){return e[e.NONE=0]="NONE",e[e.PEACE=1]="PEACE",e[e.SAVE_WEALTH=2]="SAVE_WEALTH",e[e.ECONOMY_BUILD=3]="ECONOMY_BUILD",e[e.ECONOMY_COLONIZE=4]="ECONOMY_COLONIZE",e[e.DEFENSE_WALL=5]="DEFENSE_WALL",e[e.DEFENSE_ARCHER=6]="DEFENSE_ARCHER",e[e.DEFENSE_GATHER_FORCES=7]="DEFENSE_GATHER_FORCES",e[e.OFFENSE_MILITIA=8]="OFFENSE_MILITIA",e[e.OFFENSE_SPEARMAN=9]="OFFENSE_SPEARMAN",e[e.OFFENSE_SWORDSMAN=10]="OFFENSE_SWORDSMAN",e[e.OFFENSE_LIGHT_CAVALRY=11]="OFFENSE_LIGHT_CAVALRY",e[e.OFFENSE_GATHER_FORCES=12]="OFFENSE_GATHER_FORCES",e[e.OFFENSE_COLONIZE=13]="OFFENSE_COLONIZE",e[e.OFFENSE_PLUNDER=14]="OFFENSE_PLUNDER",e[e.OFFENSE_CONQUER=15]="OFFENSE_CONQUER",e[e.OFFENSE_RECLAIM_CAPITAL=16]="OFFENSE_RECLAIM_CAPITAL",e[e.DEFENSE_GUARD_TOWER=17]="DEFENSE_GUARD_TOWER",e}({});class MT{constructor(e){this.distance=0,this.path=e}reversePath(){this.path=this.path.reverse()}calculatePathDistance(e){if(0!==this.distance)return this.distance;let n=0;for(let t=0;t<this.path.length-1;t++){let i=e.getRegion(this.path[t]);var l=this.calculatePointsDistance(i.center,e.getRegion(this.path[t+1]).center);n+=i.roads?l*Mo.ROADS_DISTANCE_MODIFIER:l}return this.distance=n,n}calculateSeaPathDistance(e){if(0!==this.distance)return this.distance;let n=0;for(let l=0;l<this.path.length-1;l++)n+=this.calculatePointsDistance(e.getSeaArea(this.path[l]).center,e.getSeaArea(this.path[l+1]).center);return this.distance=n,n}calculatePointsDistance(e,n){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}}class DT extends xT{constructor(e,n,l,t,i,s,r,u,o,a){super(e,n,l,t,i,s,r,u,o,a)}toJSON(){const e=[];return this.army.units.forEach(n=>e.push({troop:n.troop,size:n.size})),{type:this.mission,id:this.id,ownerCountryId:this.ownerCountry.id,army:e,route:this.route.path,progress:this.progress,targetIndex:this.targetIndex,status:this.status,data:this.data}}getDestinationTargetRegion(){return this.worldService.getRegion(this.route.path[this.route.path.length-1])}getMissionType(){return PT.LAND}getTravelSpeed(){let e=super.getTravelSpeed();return this.ownerCountry.id===ku.PLAYER&&this.gameService.isEnabled(Iu.LOGISTICS)&&(e*=1.1),e}evaluateRegion(){const e=this.worldService.getRegion(this.getTargetRegionId()),n=this.worldService.getCountryByRegionId(this.getTargetRegionId());if(!this.validateRoute()){const n=this.worldService.findPath(e.id,this.getDestinationTargetRegion().id,this.ownerCountry.id,!1);if(n&&n.path.length>1){const e=new MT(this.route.path.splice(0,this.targetIndex));e.path=e.path.concat(n.path),this.route=e,this.initRoutePaths(),this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target}}if(e.id!==this.getDestinationTargetRegion().id&&this.ownerCountry.id!==n.id&&(this.ownerCountry.id===ku.PLAYER&&n.id!==ku.NEUTRAL||this.ownerCountry.id!==ku.PLAYER)&&e.army.hasAny()){const l=this.armyService.calculateAttack(this.army,e.army,e.defense,this.ownerCountry.id===ku.PLAYER,this.ownerCountry.id!==ku.PLAYER);l.attacker=this.ownerCountry.id,l.defender=n.id,this.ownerCountry.id!==ku.PLAYER&&n.id!==ku.PLAYER||(l.result?l.message=this.ownerCountry.id===ku.PLAYER?"We managed to pass through enemy region":"Enemy managed to pass through our region":(this.ownerCountry.id===ku.PLAYER?(l.message="We failed passing through enemy region",this.data&&(e.wealth+=this.data)):(l.message="We defeated enemy armies passing through our region",this.data&&this.armyService.loot(this.data)),this.worldService.getSelectedMission()&&this.worldService.getSelectedMission().id===this.id&&this.worldService.clearMission(),this.status="finished"),this.logService.fightReport(l))}}validateRoute(){for(let e=this.targetIndex;e<this.route.path.length-1;e++){const n=this.worldService.getCountryByRegionId(this.route.path[e]),l=this.worldService.getRegion(this.route.path[e]);if(n.id===ku.NEUTRAL&&l.army.hasAny())return!1;if(n.id===ku.NEUTRAL)return!0;if(n.id!==this.ownerCountry.id)return!1}return!0}initRoutePaths(){this.routePaths=[];for(let e=0;e<this.route.path.length-1;e++){const n=this.worldService.getRegion(this.route.path[e]),l=this.worldService.getRegion(this.route.path[e+1]);this.routePaths.push({origin:{x:n.center.x,y:n.center.y},target:{x:l.center.x,y:l.center.y}})}}cancel(){this.canCancel()&&"traveling"===this.status&&(this.progress=100-this.progress,this.status="returning",this.route.reversePath(),this.targetIndex=this.route.path.length-this.targetIndex,this.initRoutePaths(),this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target)}getIconPath(){return"assets/army/mission/"+this.icon+".svg"}getArmyEffectiveSpeed(){return this.ownerCountry.id===ku.PLAYER&&this.gameService.isEnabled(Iu.LOGISTICS)?1.1*this.army.getArmySpeed():this.army.getArmySpeed()}}class LT extends DT{constructor(e,n,l,t,i,s=0,r=1,u="traveling",o=null){super(e,n,Au.COLONIZE,r,i,s,u,l,t,o),e&&(this.landService=e.getLandService())}isInstant(){return!1}calculateMission(){const e=this.worldService.getRegion(this.getTargetRegionId());if(this.worldService.getCountryByRegionId(e.id).id!==ku.PLAYER){if(this.ownerCountry.id!==ku.PLAYER&&e.army.hasAny()&&e.army.getArmyPower(!1)<10)this.logService.success("Our troops lost against enemy colonists"),e.army=new JO([]);else if(this.ownerCountry.id!==ku.PLAYER&&e.army.hasAny())return!1;Yu.chance(5*this.army.getUnit(Pu.COLONIST).size/100)?(this.worldService.ownRegion(this.getTargetRegionId(),this.ownerCountry),this.army=new JO([]),this.ownerCountry.id===ku.PLAYER&&this.logService.success("We colonized new region!")):this.ownerCountry.id===ku.PLAYER&&this.logService.warning("Our colonists lost against the harsh conditions and died during attempt to colonize new region")}else this.ownerCountry.id===ku.PLAYER&&this.logService.warning("Our colonists died in a bandits ambush");return!1}finish(e){}}class FT extends DT{constructor(e,n,l,t,i,s=0,r=1,u="traveling",o=null){super(e,n,Au.CONQUER,r,i,s,u,l,t,o),e&&(this.landService=e.getLandService())}isInstant(){return!1}calculateMission(){if(this.ownerCountry.id===ku.PLAYER){const e=this.worldService.getRegion(this.getTargetRegionId()),n=this.worldService.getCountryByRegionId(e.id);if(n.id!==this.ownerCountry.id){const l=this.armyService.calculateAttack(this.army,e.army,e.defense,!0,!1);return l.attacker=this.ownerCountry.id,l.defender=n.id,l.result?(l.message="Region conquered",this.servicesService.getHappinessService().addHappinessEffect(0,Fu.SUCCESSFUL_CONQUER,2,90),this.logService.fightReport(l),this.armyService.loot(50*e.wealth+200*e.economy),n.diplomacy<25?n.decreaseDiplomacy(30):n.diplomacy=-50,n.capital===e.id&&(n.diplomacy=-100),this.worldService.ownRegion(this.getTargetRegionId(),this.ownerCountry),this.getDestinationTargetRegion().army.addArmy(this.army),this.army=new JO([]),!1):(l.message="Our army has been defeated",this.logService.fightReport(l),n.diplomacy<25?n.decreaseDiplomacy(15):n.diplomacy=30,!1)}return!0}{const e=this.worldService.getRegion(this.getTargetRegionId()),n=this.worldService.getCountryByRegionId(e.id);if(n.id===ku.PLAYER&&this.worldService.isProtected())return this.logService.log("We were protected from conquer"),!0;if(n.id!==this.ownerCountry.id){const l=this.armyService.calculateAttack(this.army,e.army,e.defense,!1,n.id===ku.PLAYER);return l.attacker=this.ownerCountry.id,l.defender=n.id,l.result?0!==e.id?(n.id===ku.PLAYER&&(this.reduceLand(e),l.message="Our region has been conquered by enemy!",this.servicesService.getHappinessService().addHappinessEffect(0,Fu.RECENTLY_CONQUERED,-4,90),this.logService.fightReport(l)),this.worldService.ownRegion(this.getTargetRegionId(),this.ownerCountry),this.getDestinationTargetRegion().army.addArmy(this.army),this.army=new JO([]),!1):(this.data=this.armyService.lootPlayer(50*this.army.getArmySize()),l.message="Our capital has been plundered!",this.servicesService.getHappinessService().addHappinessEffect(0,Fu.RECENTLY_INVADED,-4,90),this.logService.fightReport(l),!0):(n.id===ku.PLAYER&&(l.message="We have defeated enemy conquer party!",this.logService.fightReport(l)),e.target=kT.DEFENSE_ARCHER,!1)}return!0}}finish(e){const n=this.getDestinationTargetRegion();n.army.addArmy(this.army),e||(n.wealth+=this.data)}reduceLand(e){let n=e.land+e.forest+e.mountains,l=0,t=0,i=0;if(this.landService.getLand()>=e.land?(n-=e.land,l+=e.land,this.landService.removeLand(e.land)):(n-=this.landService.getLand(),l+=this.landService.getLand(),this.landService.removeLand(this.landService.getLand())),this.landService.getForest()>=e.forest?(n-=e.forest,t+=e.forest,this.landService.removeForest(e.forest)):(n-=this.landService.getForest(),t+=this.landService.getForest(),this.landService.removeForest(this.landService.getForest())),this.landService.getMountains()>=e.mountains?(n-=e.mountains,i+=e.mountains,this.landService.removeMountains(e.mountains)):(n-=this.landService.getMountains(),i+=this.landService.getMountains(),this.landService.removeMountains(this.landService.getMountains())),n>0){if(this.landService.getForest()>0){if(this.landService.getForest()>n)return this.landService.removeForest(n),void this.setLands(e,l,t+=n,i);n-=this.landService.getForest(),t+=this.landService.getForest(),this.landService.removeForest(this.landService.getForest())}if(this.landService.getLand()>0){if(this.landService.getLand()>n)return this.landService.removeLand(n),void this.setLands(e,l+=n,t,i);n-=this.landService.getLand(),l+=this.landService.getLand(),this.landService.removeLand(this.landService.getLand())}if(this.landService.getMountains()>0){if(this.landService.getMountains()>n)return this.landService.removeMountains(n),void this.setLands(e,l,t,i+=n);n-=this.landService.getMountains(),i+=this.landService.getMountains(),this.landService.removeMountains(this.landService.getMountains())}}this.setLands(e,l,t,i)}setLands(e,n,l,t){e.land=n,e.forest=l,e.mountains=t}canCancel(){return!0}}class UT extends DT{constructor(e,n,l,t,i,s=0,r=1,u="traveling",o=null){super(e,n,Au.MOVE,r,i,s,u,l,t,o)}isInstant(){return!0}calculateMission(){const e=this.getDestinationTargetRegion(),n=this.worldService.getCountryByRegionId(e.id);return n.id!==ku.PLAYER&&n.id!==ku.NEUTRAL||(e.army.addArmy(this.army),this.army=new JO([]),!1)}finish(e){this.getDestinationTargetRegion().army.addArmy(this.army),this.army=new JO([])}canCancel(){return!0}}class HT extends DT{constructor(e,n,l,t,i,s=0,r=1,u="traveling",o=null){super(e,n,Au.PLUNDER,r,i,s,u,l,t,o)}isInstant(){return!1}calculateMission(){if(this.ownerCountry.id===ku.PLAYER){const e=this.worldService.getRegion(this.getTargetRegionId()),n=this.worldService.getCountryByRegionId(e.id);if(n.id!==this.ownerCountry.id){const l=this.armyService.calculateAttack(this.army,e.army,e.defense,!0,!1);return l.attacker=this.ownerCountry.id,l.defender=n.id,l.result?(n.decreaseDiplomacy(n.diplomacy<25?10:30),this.data=e.wealth,e.wealth=0,l.message="Region plundered",this.logService.fightReport(l),e.target=kT.DEFENSE_ARCHER,!0):(l.message="Our army has been defeated",this.logService.fightReport(l),n.decreaseDiplomacy(n.diplomacy<25?5:15),e.target=kT.DEFENSE_ARCHER,!1)}return!0}{const e=this.worldService.getRegion(this.getTargetRegionId()),n=this.worldService.getCountryByRegionId(e.id);if(n.id===ku.PLAYER&&this.worldService.isProtected())return this.logService.log("We were protected from plunder"),!0;if(n.id!==this.ownerCountry.id){const l=this.armyService.calculateAttack(this.army,e.army,e.defense,!1,n.id===ku.PLAYER);return l.attacker=this.ownerCountry.id,l.defender=n.id,l.result?n.id===ku.PLAYER||n.id===ku.NEUTRAL?(this.data=this.armyService.lootPlayer(50*this.army.getArmySize()),l.message=n.id===ku.NEUTRAL?"Our troops stationed in neutral region have been defeated":"We have been been plundered!",this.servicesService.getHappinessService().addHappinessEffect(0,Fu.RECENTLY_INVADED,-2,60),this.logService.fightReport(l),!0):(this.data=e.wealth,this.data>Math.floor(this.army.getArmySize()/2)?(this.data=Math.floor(this.army.getArmySize()/2),e.wealth-=this.data):e.wealth=0,e.target=kT.DEFENSE_ARCHER,!0):(n.id===ku.PLAYER&&(l.message="We have defeated enemy plunder party!",this.logService.fightReport(l)),!1)}return!0}}finish(e){if(this.ownerCountry.id===ku.PLAYER)this.getDestinationTargetRegion().army.addArmy(this.army),this.army=new JO([]),e||this.armyService.loot(50*this.data);else{const e=this.getDestinationTargetRegion();this.worldService.getCountryByRegionId(e.id)!==this.ownerCountry?this.worldService.addMission(new FT(this.servicesService,this.id,this.ownerCountry,this.army,this.route,0,this.targetIndex,"{mission}",this.data)):(e.army.addArmy(this.army),e.wealth+=this.data)}}canCancel(){return!0}}class GT extends DT{constructor(e,n,l,t,i,s=0,r=1,u="traveling",o=null){super(e,n,Au.SPY,r,i,s,u,l,t,o)}isInstant(){return!1}calculateMission(){const e=this.getDestinationTargetRegion(),n=this.worldService.getCountryByRegionId(e.id);if(e&&this.army.getUnit(Pu.SPY)){if(n.id===ku.PLAYER)return!0;e.spy+=this.army.getUnit(Pu.SPY).size,this.army=new JO([])}return!1}finish(e){this.getDestinationTargetRegion().army.addArmy(this.army),this.army=new JO([])}}class BT extends DT{constructor(e,n,l,t,i,s=0,r=1,u="{mission}",o=null){super(e,n,Au.BUILD,r,i,s,u,l,t,o)}isInstant(){return!1}calculateMission(){const e=this.getDestinationTargetRegion();if(null!==this.data)switch(this.data){case Zu.DEFENSES:return e.defense+=1,!1;case Zu.ROADS:return e.roads=!0,!1;case Zu.WATCHTOWER:{e.watchtower=!0;let n=this.getDestinationTargetRegion();return this.worldService.getCountryByRegionId(n.id).id===ku.PLAYER&&n.neighbours.forEach(e=>{e>=0&&(this.worldService.getRegion(e).watched=!0)}),!1}case Zu.GUARD_TOWER:return e.army.addTroop(Pu.GUARD_TOWER,1),!1;case Zu.HARBOUR:return e.harbour=!0,!1}return!1}finish(e){}}class WT extends xT{constructor(e,n,l,t,i,s,r,u,o,a){super(e,n,l,t,i,s,r,u,o,a)}toJSON(){const e=[];return this.army.units.forEach(n=>e.push({troop:n.troop,size:n.size})),{type:this.mission,id:this.id,ownerCountryId:this.ownerCountry.id,army:e,route:this.route.path,progress:this.progress,targetIndex:this.targetIndex,status:this.status,data:this.data}}initRoutePaths(){this.routePaths=[];const e=this.worldService.getSeaArea(this.route.path[0]),n=this.worldService.getSeaArea(this.route.path[1]);this.routePaths.push({origin:{x:e.center.x,y:e.center.y},target:{x:n.center.x,y:n.center.y}});for(let l=1;l<this.route.path.length-1;l++){const e=this.worldService.getSeaArea(this.route.path[l]),n=this.worldService.getSeaArea(this.route.path[l+1]);this.routePaths.push({origin:{x:e.center.x,y:e.center.y},target:{x:n.center.x,y:n.center.y}})}if(this.mission===Au.FISHING||this.mission===Au.HUNTING||this.mission===Au.TREASURE||this.mission===Au.CARTOGRAPHY||this.mission===Au.SEA_BATTLE)if("traveling"===this.status)this.routePaths[this.routePaths.length-1].target=this.getDestinationTargetSeaEvent().center;else if("returning"===this.status){const e=this.worldService.getSeaArea(this.route.path[0]);this.routePaths[0].origin=e.events.length>0?e.events[0].center:e.center}}getTravelSpeed(){let e=super.getTravelSpeed();return this.ownerCountry.id===ku.PLAYER&&(this.gameService.isEnabled(Iu.LOGISTICS)&&(e*=1.1),this.servicesService.getService(Wu.SEA).getBuildings().find(e=>e.getBuildingType()===Ru.LIGHTHOUSE&&e.isWorking())&&(e*=1.1)),e}getDestinationTargetRegion(){return this.route.path[this.route.path.length-1]>=0?this.worldService.getRegion(this.route.path[this.route.path.length-1]):null}getDestinationTargetSeaEvent(){return this.worldService.getSeaArea(this.route.path[this.route.path.length-1]).events[0]}getMissionType(){return PT.SEA}tick(){let e=60*this.speed/3/this.getDistance();if(this.ownerCountry.id===ku.PLAYER&&this.gameService.isEnabled(Iu.LOGISTICS)&&(e*=1.1),"traveling"===this.status)if(this.progress<100)this.progress+=e,this.progress>100&&(this.progress=100);else{if(!this.evaluateRegion())return;this.targetIndex===this.route.path.length-1?(this.origin=this.target,this.isInstant()?this.calculateMission()?(this.status="returning",this.route.reversePath(),this.targetIndex=1,this.initRoutePaths(),this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target):this.status="finished":this.status="{mission}"):(this.targetIndex+=1,this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target),this.progress=0}else if("{mission}"===this.status)if(this.progress<100)this.progress+=1/this.missionTime;else{if(this.calculateMission()){this.status="returning";const e=this.worldService.findSeaPath(this.getTargetRegionId(),this.route.path[0],!1);this.route.reversePath(),this.targetIndex=1,this.initRoutePaths(),this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target,e&&(e.path.length<this.route.path.length||!this.validateRoute())&&(this.route=e,this.targetIndex=1,this.initRoutePaths(),this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target)}else this.worldService.clearMission(),this.status="finished";this.progress=0}else"returning"!==this.status&&"canceled"!==this.status||(this.progress<100?(this.progress+=e,this.progress>100&&(this.progress=100)):(this.evaluateRegion(),this.targetIndex===this.route.path.length-1?(this.finish("canceled"===this.status),this.worldService.getSelectedMission()&&this.worldService.getSelectedMission().id===this.id&&this.worldService.clearMission(),this.status="finished"):(this.targetIndex+=1,this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target,this.progress=0)))}cancel(){this.canCancel()&&"traveling"===this.status&&(this.progress=100-this.progress,this.status="returning",this.route.reversePath(),this.targetIndex=this.route.path.length-this.targetIndex,this.initRoutePaths(),this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target)}evaluateRegion(){const e=this.worldService.getSeaArea(this.getTargetRegionId());if(!this.validateRoute()){let n;if((n=this.getDestinationTargetSeaEvent()?this.worldService.findSeaPath(e.id,this.getDestinationTargetSeaEvent().parentId,!1):this.worldService.findSeaPath(e.id,this.getDestinationTargetRegion().id,!1))&&n.path.length>1){const e=new MT(this.route.path.splice(0,this.targetIndex));e.path=e.path.concat(n.path),this.route=e,this.initRoutePaths(),this.origin=this.routePaths[this.targetIndex-1].origin,this.target=this.routePaths[this.targetIndex-1].target}}if((this.getDestinationTargetSeaEvent()&&e.id!==this.getDestinationTargetSeaEvent().parentId||this.getDestinationTargetRegion()&&e.id!==this.getDestinationTargetRegion().id)&&e.events.length>0&&(e.events[0].type===Lu.PIRATES||e.events[0].type===Lu.PIRATES_BASE)&&(e.events[0].type===Lu.PIRATES||e.events[0].type===Lu.PIRATES_BASE)){const n=this.army.getNavy(!0),l=this.armyService.calculateAttack(n,e.events[0].data,e.events[0].type===Lu.PIRATES?0:3,!0,!1);if(l.attacker=this.ownerCountry.id,l.defender=ku.PIRATES,l.result){l.message=e.events[0].type===Lu.PIRATES?"Pirates defeated":"Pirates base destroyed",this.army.addArmy(n);const t=this.army.getLandUnits(!0);for(;t.getArmySize()>0&&this.getTroopsSize(t)>this.getNavyCapacity(n);)t.units[Yu.randomBetween(0,t.units.length-1)].size-=1,t.removeEmptyUnits();return this.army.addArmy(t),this.data=Math.min(10*this.army.getArmyCargo(),e.events[0].amount),e.events[0].amount-=this.data,e.events[0].amount>=50?e.events[0].type=Lu.TREASURE:(e.events[0].amount=0,e.events[0].time=-1),this.logService.fightReport(l),!0}return l.message="Pirates won against our navy",this.status="finished",this.army.clearArmy(),this.logService.fightReport(l),!1}return!0}validateRoute(){if("traveling"===this.status&&this.isEventBasedMission()&&!this.getDestinationTargetSeaEvent())return this.cancel(),!1;for(let e=this.targetIndex;e<this.route.path.length-1;e++){const n=this.worldService.getSeaArea(this.route.path[e]);if(n.events.length>0&&(n.events[0].type===Lu.PIRATES||n.events[0].type===Lu.PIRATES_BASE))return!1}return!0}getIconPath(){return this.army.hasTroop(Pu.GALLEON)?"assets/sea/galleon.svg":this.army.hasTroop(Pu.BRIGANTINE)?"assets/sea/brigantine.svg":this.army.hasTroop(Pu.BOAT)?"assets/sea/boat.svg":void 0}getTroopsSize(e){let n=0;return e.units.forEach(e=>{e.troop!==Pu.ALL&&e.troop!==Pu.BOAT&&e.troop!==Pu.BRIGANTINE&&e.troop!==Pu.GALLEON&&e.size>0&&(n+=e.getTroopSize())}),n}getNavyCapacity(e){let n=0;return e.units.forEach(e=>{e.troop!==Pu.BOAT&&e.troop!==Pu.BRIGANTINE&&e.troop!==Pu.GALLEON||e.size>0&&(n+=e.getTroopCargo())}),n}canCancel(){return!0}getDistance(){return this.calculatePointsDistance(this.origin,this.target)}getArmyEffectiveSpeed(){return this.servicesService.getService(Wu.SEA).getBuildings().find(e=>e.getBuildingType()===Ru.LIGHTHOUSE&&e.isWorking())?1.1*this.army.getNavy(!1).getArmySpeed():this.army.getNavy(!1).getArmySpeed()}isEventBasedMission(){return!1}}class VT extends WT{constructor(e,n,l,t,i,s=0,r=1,u="traveling",o=null){super(e,n,Au.FISHING,r,i,s,u,l,t,o)}isInstant(){return!1}calculateMission(){if(!this.getDestinationTargetSeaEvent())return!0;const e=5*this.army.getArmyCargo(),n=Math.min(e,this.getDestinationTargetSeaEvent().amount);return this.getDestinationTargetSeaEvent().amount-=n,this.data=n,!0}finish(e){this.data&&this.data>0&&this.servicesService.getResourcesService().increaseResource(bu.FISH,this.data,"Fishing",!0),this.getDestinationTargetRegion().army.addArmy(this.army.getLandUnits(!0)),this.getDestinationTargetRegion().navy.addArmy(this.army.getNavy(!0)),this.army=new JO([])}isEventBasedMission(){return!0}}class zT extends WT{constructor(e,n,l,t,i,s=0,r=1,u="traveling",o=null){super(e,n,Au.HUNTING,r,i,s,u,l,t,o)}isInstant(){return!1}calculateMission(){if(!this.getDestinationTargetSeaEvent())return!0;const e=5*this.army.getArmyCargo(),n=Math.min(e,this.getDestinationTargetSeaEvent().amount),l=Math.ceil(.7*n),t=n-l;return this.getDestinationTargetSeaEvent().amount-=n,this.data={meat:l,fur:t},!0}finish(e){this.data&&this.data.meat>0&&(this.servicesService.getResourcesService().increaseResource(bu.MEAT,this.data.meat,"Sea hunting",!0),this.servicesService.getResourcesService().increaseResource(bu.FUR,this.data.fur,"Sea hunting",!0)),this.getDestinationTargetRegion().army.addArmy(this.army.getLandUnits(!0)),this.getDestinationTargetRegion().navy.addArmy(this.army.getNavy(!0)),this.army=new JO([])}isEventBasedMission(){return!0}}class YT extends WT{constructor(e,n,l,t,i,s=0,r=1,u="traveling",o=null){super(e,n,Au.TREASURE,r,i,s,u,l,t,o)}isInstant(){return!1}calculateMission(){if(!this.getDestinationTargetSeaEvent())return!0;const e=10*this.army.getArmyCargo(),n=Math.min(e,this.getDestinationTargetSeaEvent().amount);return this.getDestinationTargetSeaEvent().amount-=n,this.data=n,!0}finish(e){this.data&&this.data>0&&this.servicesService.getResourcesService().increaseResource(bu.COINS,this.data,"Treasure",!0),this.getDestinationTargetRegion().army.addArmy(this.army.getLandUnits(!0)),this.getDestinationTargetRegion().navy.addArmy(this.army.getNavy(!0)),this.army=new JO([])}isEventBasedMission(){return!0}}class $T extends WT{constructor(e,n,l,t,i,s=0,r=1,u="traveling",o=null){super(e,n,Au.EXPEDITION,r,i,s,u,l,t,o)}isInstant(){return!1}calculateMission(){void 0!==this.data&&(Yu.chance(this.data/100)||this.logService.warning("Our expedition didn't find any new land, perhaps we need to go farther"));let e=0,n=0,l=0,t=0;return this.army.getLandUnits(!1).units.forEach(e=>{t+=e.getTroopStrength()*e.size,t+=e.getTroopDefense()*e.size}),Yu.chance(.5)?(e+=Math.ceil(.6*t),t-=e,n+=Math.ceil(.6*t),l=t-=n):Yu.chance(.7)?(n+=Math.ceil(.6*t),t-=n,e+=Math.ceil(.6*t),l=t-=e):(l+=Math.ceil(.6*t),t-=l,e+=Math.ceil(.6*t),n=t-=e),this.data={land:e,forest:n,mountains:l},!0}finish(e){const n=this.servicesService.getLandService();this.getDestinationTargetRegion().army.addArmy(this.army.getLandUnits(!0)),this.getDestinationTargetRegion().navy.addArmy(this.army.getNavy(!0)),this.army=new JO([]),this.data&&(this.data.land&&(n.increaseLand(this.data.land,!0),this.worldService.increaseDiscoveredLand(this.data.land)),this.data.forest&&(n.increaseForest(this.data.forest,!1),this.worldService.increaseDiscoveredForest(this.data.forest)),this.data.mountains&&(n.increaseMountains(this.data.mountains),this.worldService.increaseDiscoveredMountains(this.data.mountains)),this.logService.success("We found a new land:<br> Land:"+this.data.land+"<br> Forest:"+this.data.forest+"<br> Mountains:"+this.data.mountains+"<br>"))}}class KT extends WT{constructor(e,n,l,t,i,s=0,r=1,u="traveling",o=null){super(e,n,Au.CARTOGRAPHY,r,i,s,u,l,t,o)}isInstant(){return!1}calculateMission(){if(!this.getDestinationTargetSeaEvent())return!0;const e=this.army.getArmyCargo(),n=Math.min(e,this.getDestinationTargetSeaEvent().amount);return this.getDestinationTargetSeaEvent().amount-=n,this.data=n,!0}finish(e){this.data&&this.data>0&&this.servicesService.getNavyService().increaseCartographyData(this.data),this.getDestinationTargetRegion().army.addArmy(this.army.getLandUnits(!0)),this.getDestinationTargetRegion().navy.addArmy(this.army.getNavy(!0)),this.army=new JO([])}isEventBasedMission(){return!0}}class jT extends WT{constructor(e,n,l,t,i,s=0,r=1,u="traveling",o=null){super(e,n,Au.SEA_BATTLE,r,i,s,u,l,t,o)}isInstant(){return!1}calculateMission(){if(!this.getDestinationTargetSeaEvent())return!0;const e=this.army.getNavy(!0),n=this.getDestinationTargetSeaEvent().type===Lu.PIRATES?0:3,l=this.armyService.calculateAttack(e,this.getDestinationTargetSeaEvent().data,n,!0,!1);if(l.attacker=this.ownerCountry.id,l.defender=ku.PIRATES,l.result){this.getDestinationTargetSeaEvent().type===Lu.PIRATES?(l.message="Pirates defeated",this.servicesService.getHappinessService().addHappinessEffect(0,Fu.PIRATES_DEFEATED,1,180)):(l.message="Pirates base destroyed",this.servicesService.getHappinessService().addHappinessEffect(0,Fu.PIRATES_DEFEATED,3,360)),this.army.addArmy(e);const n=this.army.getLandUnits(!0);for(;n.getArmySize()>0&&this.getTroopsSize(n)>this.getNavyCapacity(e);)n.units[Yu.randomBetween(0,n.units.length-1)].size-=1,n.removeEmptyUnits();return this.army.addArmy(n),this.data=Math.min(10*this.army.getArmyCargo(),this.getDestinationTargetSeaEvent().amount),this.getDestinationTargetSeaEvent().amount-=this.data,this.getDestinationTargetSeaEvent().amount>=50?this.getDestinationTargetSeaEvent().type=Lu.TREASURE:(this.getDestinationTargetSeaEvent().amount=0,this.getDestinationTargetSeaEvent().time=-1),this.logService.fightReport(l),!0}return l.message="Pirates won against our navy",this.army.clearArmy(),this.status="finished",this.logService.fightReport(l),!1}finish(e){this.getDestinationTargetRegion().army.addArmy(this.army.getLandUnits(!0)),this.getDestinationTargetRegion().navy.addArmy(this.army.getNavy(!0)),this.army=new JO([])}getTroopsSize(e){let n=0;return e.units.forEach(e=>{e.troop!==Pu.ALL&&e.troop!==Pu.BOAT&&e.troop!==Pu.BRIGANTINE&&e.troop!==Pu.GALLEON&&e.size>0&&(n+=e.getTroopSize())}),n}getNavyCapacity(e){let n=0;return e.units.forEach(e=>{e.troop!==Pu.BOAT&&e.troop!==Pu.BRIGANTINE&&e.troop!==Pu.GALLEON||e.size>0&&(n+=e.getTroopCargo())}),n}isEventBasedMission(){return!0}}class QT extends WT{constructor(e,n,l,t,i,s=0,r=1,u="traveling",o=null){super(e,n,Au.SEA_CONQUER,r,i,s,u,l,t,o)}isInstant(){return!1}calculateMission(){const e=this.worldService.getRegion(this.getTargetRegionId()),n=this.worldService.getCountryByRegionId(e.id);if(n.id!==this.ownerCountry.id){const l=this.army.getLandUnits(!0),t=this.armyService.calculateAttack(l,e.army,e.defense,!0,!1);return t.attacker=this.ownerCountry.id,t.defender=n.id,t.result?(t.message="Region conquered",this.armyService.loot(50*e.wealth+200*e.economy),n.diplomacy<25?n.decreaseDiplomacy(30):n.diplomacy=-50,n.capital===e.id&&(n.diplomacy=-100),this.worldService.ownRegion(this.getTargetRegionId(),this.ownerCountry),this.getDestinationTargetRegion().army.addArmy(l),this.logService.fightReport(t),!0):(t.message="Our army has been defeated",n.diplomacy<25?n.decreaseDiplomacy(15):n.diplomacy=30,this.logService.fightReport(t),!0)}return!0}finish(e){return this.getDestinationTargetRegion().army.addArmy(this.army.getLandUnits(!0)),this.getDestinationTargetRegion().navy.addArmy(this.army.getNavy(!0)),this.army=new JO([]),!1}}class qT extends WT{constructor(e,n,l,t,i,s=0,r=1,u="traveling",o=null){super(e,n,Au.SEA_PLUNDER,r,i,s,u,l,t,o)}isInstant(){return!1}calculateMission(){const e=this.worldService.getRegion(this.getTargetRegionId()),n=this.worldService.getCountryByRegionId(e.id);if(n.id!==this.ownerCountry.id){const l=this.army.getLandUnits(!0),t=this.armyService.calculateAttack(l,e.army,e.defense,!0,!1);return t.attacker=this.ownerCountry.id,t.defender=n.id,t.result?(n.decreaseDiplomacy(n.diplomacy<25?10:30),this.data=e.wealth,e.wealth=0,t.message="Region plundered",e.target=kT.DEFENSE_ARCHER,this.army.addArmy(l),this.logService.fightReport(t),!0):(t.message="Our army has been defeated",n.decreaseDiplomacy(n.diplomacy<25?5:15),e.target=kT.DEFENSE_ARCHER,this.logService.fightReport(t),!0)}}finish(e){return this.getDestinationTargetRegion().army.addArmy(this.army.getLandUnits(!0)),this.getDestinationTargetRegion().navy.addArmy(this.army.getNavy(!0)),this.army=new JO([]),!1}}class XT extends WT{constructor(e,n,l,t,i,s=0,r=1,u="traveling",o=null){super(e,n,Au.SEA_MOVE,r,i,s,u,l,t,o)}isInstant(){return!0}calculateMission(){const e=this.getDestinationTargetRegion(),n=this.worldService.getCountryByRegionId(e.id);return n.id!==ku.PLAYER&&n.id!==ku.NEUTRAL||(e.army.addArmy(this.army.getLandUnits(!0)),!e.harbour)||(e.navy.addArmy(this.army.getNavy(!0)),!1)}finish(e){return this.getDestinationTargetRegion().army.addArmy(this.army.getLandUnits(!0)),this.getDestinationTargetRegion().navy.addArmy(this.army.getNavy(!0)),this.army=new JO([]),!1}}let ZT=(()=>{class e{constructor(e){this.servicesService=e,e.addService(Wu.MISSION_FACTORY,this)}loadMission(e){const n=this.servicesService.getWorldService(),l=new JO([]);e.army.forEach(e=>{l.addTroop(e.troop,e.size)});const t=new MT(e.route);switch(e.type){case Au.COLONIZE:return new LT(this.servicesService,e.id,n.getCountry(e.ownerCountryId),l,t,e.progress,e.targetIndex,e.status,e.data);case Au.CONQUER:return new FT(this.servicesService,e.id,n.getCountry(e.ownerCountryId),l,t,e.progress,e.targetIndex,e.status,e.data);case Au.MOVE:return new UT(this.servicesService,e.id,n.getCountry(e.ownerCountryId),l,t,e.progress,e.targetIndex,e.status,e.data);case Au.PLUNDER:return new HT(this.servicesService,e.id,n.getCountry(e.ownerCountryId),l,t,e.progress,e.targetIndex,e.status,e.data);case Au.SPY:return new GT(this.servicesService,e.id,n.getCountry(e.ownerCountryId),l,t,e.progress,e.targetIndex,e.status,e.data);case Au.BUILD:return new BT(this.servicesService,e.id,n.getCountry(e.ownerCountryId),l,t,e.progress,e.targetIndex,e.status,e.data);case Au.FISHING:return new VT(this.servicesService,e.id,n.getCountry(e.ownerCountryId),l,t,e.progress,e.targetIndex,e.status,e.data);case Au.HUNTING:return new zT(this.servicesService,e.id,n.getCountry(e.ownerCountryId),l,t,e.progress,e.targetIndex,e.status,e.data);case Au.TREASURE:return new YT(this.servicesService,e.id,n.getCountry(e.ownerCountryId),l,t,e.progress,e.targetIndex,e.status,e.data);case Au.EXPEDITION:return new $T(this.servicesService,e.id,n.getCountry(e.ownerCountryId),l,t,e.progress,e.targetIndex,e.status,e.data);case Au.CARTOGRAPHY:return new KT(this.servicesService,e.id,n.getCountry(e.ownerCountryId),l,t,e.progress,e.targetIndex,e.status,e.data);case Au.SEA_BATTLE:return new jT(this.servicesService,e.id,n.getCountry(e.ownerCountryId),l,t,e.progress,e.targetIndex,e.status,e.data);case Au.SEA_MOVE:return new XT(this.servicesService,e.id,n.getCountry(e.ownerCountryId),l,t,e.progress,e.targetIndex,e.status,e.data);case Au.SEA_PLUNDER:return new qT(this.servicesService,e.id,n.getCountry(e.ownerCountryId),l,t,e.progress,e.targetIndex,e.status,e.data);case Au.SEA_CONQUER:return new QT(this.servicesService,e.id,n.getCountry(e.ownerCountryId),l,t,e.progress,e.targetIndex,e.status,e.data)}}}return e.ngInjectableDef=ce({factory:function(){return new e(De(sf))},token:e,providedIn:"root"}),e})();class JT{constructor(e,n,l,t,i){this.id=e,this.center=n,this.r=l,this.events=t,this.neighbours=i}}class eC{constructor(e,n,l,t,i,s,r){if(this.parentId=e,this.id=n,this.type=l,this.center=t,this.amount=i,this.time=s,this.data=r,l===Lu.PIRATES||l===Lu.PIRATES_BASE)if(null===r)for(this.data=new JO([]);this.amount>=80;)this.amount>=No.getTroop(Pu.GALLEON).PAY&&(this.amount-=No.getTroop(Pu.GALLEON).PAY,this.data.addTroop(Pu.GALLEON,1),this.amount>=No.getTroop(Pu.BRIGANTINE).PAY&&(this.amount-=No.getTroop(Pu.BRIGANTINE).PAY,this.data.addTroop(Pu.BRIGANTINE,1))),this.amount>=No.getTroop(Pu.BRIGANTINE).PAY&&(this.amount-=No.getTroop(Pu.BRIGANTINE).PAY,this.data.addTroop(Pu.BRIGANTINE,1));else this.data=new JO([]),r.units.forEach(e=>{e.troop&&this.data.addTroop(e.troop,e.size)});this.amount=i}toJSON(){return{parentId:this.parentId,id:this.id,type:this.type,center:this.center,amount:this.amount,time:this.time,data:this.data}}tick(e,n,l,t){if(this.type===Lu.WHIRLPOOL&&(this.time-=1),this.type===Lu.PIRATES_BASE&&(this.time-=1,this.time<=10)){let i=0;if(n.getSeaAreas().forEach(e=>{e.events.length>0&&e.events[0].type===Lu.PIRATES&&(i+=1)}),this.time=Yu.randomBetween(Mo.SEA_EVENTS.PIRATES_BASE.TIME_MIN+50*i,Mo.SEA_EVENTS.PIRATES_BASE.TIME_MAX+50*i),i<2*Mo.SEA_EVENTS.PIRATES.NUMBER_MAX){const i=n.getSeaAreas().filter(e=>-1!==e.id&&0===e.events.length&&e.r>0),s=i[Yu.randomBetween(0,i.length-1)];s.events.push(new eC(s.id,l.getNextId(),Lu.PIRATES,n.getRandomPointInCircle(s.center,s.r),Yu.randomBetween(Mo.SEA_EVENTS.PIRATES.POWER_MIN,Mo.SEA_EVENTS.PIRATES.POWER_MAX),Yu.randomBetween(Mo.SEA_EVENTS.PIRATES.TIME_MIN,Mo.SEA_EVENTS.PIRATES.TIME_MAX),null)),e.getGameService().isEnabled(Iu.BOAT_BUILDER)&&t.warning("Pirates base sent a new pirates group")}}}}let nC=(()=>{class e extends tR{constructor(e,n,l,t,i){super(n,e,l,i,t,Du.SEA,Wu.SEA)}}return e.ngInjectableDef=ce({factory:function(){return new e(De(yf),De(Zv),De(sf),De(fv),De(nR))},token:e,providedIn:"root"}),e})(),lC=(()=>{class e{constructor(e,n,l,t,i,s){this.servicesService=e,this.resourcesService=n,this.logService=l,this.seaService=t,this.modalService=i,this.calendarService=s,this.maxHarbourSpace=0,this.cartographyData=0,this.mapProgress=0,this.paydayCounter=30,this.navy=new JO([]),e.addService(Wu.NAVY,this),this.calendarService.registerForDayChange().subscribe(e=>{this.calculatePayday()})}getName(){return"NavyService"}load(e){this.maxHarbourSpace=void 0===e.maxHarbourSpace||isNaN(e.maxHarbourSpace)?0:e.maxHarbourSpace,this.cartographyData=void 0===e.cartographyData||isNaN(e.cartographyData)?0:e.cartographyData,this.mapProgress=void 0===e.mapProgress||isNaN(e.mapProgress)?0:e.mapProgress,this.paydayCounter=void 0!==e.paydayCounter?e.paydayCounter:30,this.navy.units=[],void 0!==e.navy&&e.navy.forEach(e=>{this.navy.addTroop(e[0],e[1])})}reset(e,n){this.maxHarbourSpace=0,this.cartographyData=0,this.mapProgress=0,this.navy=new JO([]),this.paydayCounter=30}save(){const e=[];return this.navy.units.forEach(n=>e.push([n.troop,n.size])),{maxHarbourSpace:this.maxHarbourSpace,cartographyData:this.cartographyData,mapProgress:this.mapProgress,navy:e,paydayCounter:this.paydayCounter}}getWorldService(){return this.servicesService.getWorldService()}tick(e){}increaseHarbourSize(e){this.maxHarbourSpace+=e}decreaseHarbourSize(e){this.maxHarbourSpace-=e,this.maxHarbourSpace<0&&(this.maxHarbourSpace=0)}getHarbourSpace(){let e=0;return[Pu.BOAT,Pu.BRIGANTINE,Pu.GALLEON].forEach(n=>{e+=this.getTotalShips(n)*No.getTroop(n).SIZE}),e+this.getSizeOfShipsInConstruction()}getSizeOfShipsInConstruction(){let e=0;return this.seaService.getBuildings().filter(e=>e.getBuildingType()===Ru.BOAT_BUILDER||e.getBuildingType()===Ru.SHIPYARD).map(e=>e).forEach(n=>e+=n.getShipSize()),e}getFreeHarbourSpace(){return this.maxHarbourSpace-this.getHarbourSpace()-this.getSizeOfShipsInConstruction()}getMaxHarbourSpace(){return this.maxHarbourSpace}addShip(e){this.navy.addTroop(e,1)}getAvailableShips(e){const n=this.navy.getUnit(e);return void 0!==n?n.size:0}getTotalShips(e){let n=0;const l=this.navy.getUnit(e);return n+=void 0!==l?l.size:0,this.getWorldService().getPlayerSeaMissions().forEach(l=>{const t=l.army.getUnit(e);n+=void 0!==t?t.size:0}),this.getWorldService().getStationedNavy().forEach(l=>{const t=l.getUnit(e);t&&(n+=t.size)}),n}getCartographyData(){return this.cartographyData}increaseCartographyData(e){this.cartographyData+=e}decreaseCartographyData(e){return this.cartographyData>=e&&(this.cartographyData-=e,!0)}addMapProgress(){this.mapProgress+=1}getMapProgress(){return this.mapProgress}createMap(){return!!(this.mapProgress>=100&&this.resourcesService.increaseResource(bu.MAP,1,"Cartographer"))&&(this.mapProgress-=100,!0)}calculateNavyPay(){let e=0;return[Pu.BOAT,Pu.BRIGANTINE,Pu.GALLEON].forEach(n=>{e+=this.getTotalShips(n)*No.getTroop(n).PAY}),e}getNavy(){return this.navy}getPaydayCounter(){return this.paydayCounter}calculatePayday(){if(this.getPaydayCounter()<=0){const e=this.calculateNavyPay();if(e>0){let n=this.resourcesService.hasResource(bu.COINS,e,"Navy");if(n>e&&(n=e),n>0){this.resourcesService.decreaseResource(bu.COINS,e-n,"Navy");const l=[];for(;n>0&&(this.navy.units.forEach(e=>{if(n>0&&e.getTroopPay()>0&&e.size>0&&(n-=e.getTroopPay(),Yu.chance(.25))){e.size-=1;const n=l.find(n=>n[0]===e.troop);n?n[1]+=1:l.push([e.troop,1])}}),!(n<=0));){const e=[];this.getWorldService().getPlayerSeaMissions().forEach(n=>{n.army.getNavy(!1).getArmySize()>0&&e.push(n.army.getNavy(!1))}),this.getWorldService().getStationedNavy().forEach(n=>{n.getArmySize()>0&&e.push(n)}),e.forEach(e=>{n>0&&e.units.forEach(e=>{if(n>0&&e.getTroopPay()>0&&e.size>0&&(n-=e.getTroopPay(),Yu.chance(.25))){e.size-=1;const n=l.find(n=>n[0]===e.troop);n?n[1]+=1:l.push([e.troop,1])}}),e.removeEmptyUnits()})}if(l.length>0){let e="Deserters:<br>";l.forEach(n=>e+="&emsp;"+n[1]+" "+Uu.prepareTroopName(n[0])+"<br>"),this.logService.warning(e)}}else this.resourcesService.decreaseResource(bu.COINS,e,"Navy")}this.paydayCounter=30}else this.paydayCounter-=1}dismiss(e,n){const l=this.resourcesService.getPopulationCap()-this.resourcesService.getTotalPeople(),t=void 0!==this.navy.getUnit(e)?this.navy.getUnit(e).size:0;0!==t?n>t?this.modalService.info("There are not enough ships to decommission"):l>=n?(this.navy.removeTroop(e,n),this.servicesService.getVillageService().addVillagers(n)):this.modalService.info("There are not enough housing space for sailors from decommissioned ships!"):this.modalService.info("No ship to decommission")}addBrigantines(e){this.navy.addTroop(Pu.BRIGANTINE,e)}}return e.ngInjectableDef=ce({factory:function(){return new e(De(sf),De(yf),De(df),De(nC),De(pf),De(hf))},token:e,providedIn:"root"}),e})(),tC=(()=>{class e{constructor(e,n,l,t,i,s,r,u,o,a,c,h){this.servicesService=e,this.idService=n,this.armyService=l,this.navyService=t,this.logService=i,this.calendarService=s,this.modalService=r,this.missionFactoryService=u,this.optionsService=o,this.soundService=a,this.landService=c,this.kongregateService=h,this.countries=[],this.regionsNeighbours=[],this.missions=[],this.regions=[],this.seaAreas=[],this.protection=0,this.defaultOrigin=0,this.discoveredLand=0,this.discoveredForest=0,this.discoveredMountains=0,this.x=150,this.y=-220,this.zoom=1.4,this.mapDisplayOption=0,this.showHarbours=!0,this.activeCountriesList=[],this.pathCacheSubject=new I,this.servicesService.addService(Wu.WORLD,this),this.init(),this.selectedCountry=this.countries[0],this.selectedRegion=this.selectedCountry.regions[0],this.calendarService.registerForDayChange().subscribe(e=>{this.countries.filter(e=>e.id!==ku.PLAYER&&e.id!==ku.NEUTRAL).forEach(e=>{e.regions.forEach(n=>{Yu.chance((n.economy+5)*this.AI_getDifficultyMultiplier()/100)&&(n.wealth+=1),this.AI_dailyRegionAction(e,n)})}),this.seaAreas.filter(e=>e.events.length>0).map(e=>e.events[0]).forEach(e=>e.tick(this.servicesService,this,this.idService,this.logService)),this.seaAreas.forEach(e=>{e.events.length>0&&(e.events[0].time<0||e.events[0].amount<=0)&&(e.events[0]===this.selectedSeaEvent&&(this.selectedSeaEvent=null),e.events.shift())}),this.spawnSeaEvents(),this.protection>0&&(this.protection-=1),this.protection<0&&(this.protection=0)})}init(e=!0){Mo.REGIONS.forEach(e=>{const n=[];e.TROOPS.forEach(e=>n.push(new ZO(e.troop,e.size))),this.regions.push(new _T(e.ID,e.PATH,e.CENTER,e.NEIGHBOURS,e.LAND,e.FOREST,e.MOUNTAINS,e.WEALTH,0,0,e.HARBOUR,!1,!1,!1,null,0,new JO(n)))}),this.regions[0].army=this.armyService.getArmy(),this.regions[0].navy=this.navyService.getNavy(),Object.values(Mo.COUNTRIES).forEach(n=>{const l=[];n.REGIONS.forEach(t=>{const i=this.regions[t];n.CAPITAL===t&&(i.capital=n.COUNTRY),l.push(i),e&&n.COUNTRY!==ku.PLAYER&&n.COUNTRY!==ku.NEUTRAL&&this.regions[t].army.addTroop(Pu.ARCHER,Math.ceil(2*this.AI_getDifficultyMultiplier()))}),this.countries.push(new NT(n.COUNTRY,n.NAME,n.DIPLOMACY,n.COLOUR,n.FOCUS,l,{},n.CAPITAL))}),this.regionsNeighbours=[],Object.values(Mo.REGIONS).forEach(e=>{this.regionsNeighbours.push(new wT(e.ID,e.NEIGHBOURS))}),this.calendarService.registerForYearChange().subscribe(e=>{this.countries.filter(e=>e.id!==ku.PLAYER&&e.id!==ku.NEUTRAL).forEach(e=>{e.regions.length>0&&Yu.chance(Mo.KING_DEATH_CHANCE)&&(e.focus=Yu.randomElement([{item:xu.OFFENSE,chance:25},{item:xu.DEFENSE,chance:25},{item:xu.PEACE,chance:25},{item:xu.ECONOMY,chance:25}]),this.logService.warning(e.name+" king died. New king is known to focus on "+Uu.prepareFocusName(e.focus)))})}),this.initSeaAreas(),this.selectedRegion=this.regions[0],this.selectedCountry=this.getPlayerCountry(),this.initPlayerKingdomName()}initSeaAreas(){Mo.SEA_AREAS.forEach(e=>{this.seaAreas.push(new JT(e.ID,{x:e.CENTER.x,y:e.CENTER.y},e.R,[],e.NEIGHBOURS))});let e=this.seaAreas.filter(e=>-1!==e.id);Object.keys(Lu).slice(Object.keys(Lu).length/2).map(e=>Lu[e]).forEach(n=>{const l=Mo.getSeaEvent(n);for(let t=0;t<l.NUMBER_INIT;t++)if(e.length>0){const t=e.filter(e=>e.r>l.FOR_RADIUS),i=t[Yu.randomBetween(0,t.length-1)];0===i.events.length&&i.events.push(new eC(i.id,this.idService.getNextId(),n,this.getRandomPointInCircle(i.center,i.r),Yu.randomBetween(l.POWER_MIN,l.POWER_MAX),Yu.randomBetween(l.TIME_MIN,l.TIME_MAX),null)),e=e.filter(e=>0===e.events.length)}})}AI_dailyRegionAction(e,n){if(null===n.target?this.AI_chooseTarget(n,e):this.AI_executeTarget(n,e),n.spy>0&&Yu.chance(n.army.getArmySize()/2e4)){n.spy-=1;const l=new eb;l.attacker=e.id,l.defender=ku.PLAYER,l.attackerArmy=JO.clone(n.army),l.defenderArmy=new JO([new ZO(Pu.SPY,1)]),l.skirmish.push(new nb(l.attackerArmy.getRandomUnit().troop,l.defenderArmy.getRandomUnit().troop,1,0,!0)),l.result=!0,l.armyAfterFight=l.attackerArmy,l.message="Our "+e.name+" spy has been discovered and killed!",this.logService.fightReport(l),e.decreaseDiplomacy(e.diplomacy<25?5:15)}}AI_chooseTarget(e,n){let l=10;n.regions.find(e=>e.id===n.capital)||(l=75);const t=[{item:xu.OFFENSE,chance:l},{item:xu.DEFENSE,chance:10},{item:xu.PEACE,chance:10},{item:xu.ECONOMY,chance:10}],i=t.find(e=>e.item===n.focus);i&&(i.chance=70);const s=Yu.randomElement(t);let r=kT.NONE;switch(s){case xu.ECONOMY:const l=[];let t=70-8*e.economy;t<5&&(t=5),this.getNeutralRegionsNumber()>0&&l.push({item:kT.ECONOMY_COLONIZE,chance:10}),l.push({item:kT.ECONOMY_BUILD,chance:t}),r=Yu.randomElement(l);break;case xu.DEFENSE:const i=[];e.army.getArmySize()<5*e.wealth&&i.push({item:kT.DEFENSE_ARCHER,chance:50});let s=30-4*e.defense;s<5&&(s=5),i.push({item:kT.DEFENSE_WALL,chance:s}),r=Yu.randomElement(i);break;case xu.PEACE:e.target=kT.PEACE;break;case xu.OFFENSE:const u=[{item:kT.OFFENSE_PLUNDER,chance:5},{item:kT.OFFENSE_CONQUER,chance:2}];if(e.army.getArmySize()<5*e.wealth&&u.push({item:kT.OFFENSE_SPEARMAN,chance:30},{item:kT.OFFENSE_SWORDSMAN,chance:25},{item:kT.OFFENSE_LIGHT_CAVALRY,chance:10}),this.getNeutralRegionsNumber()>0&&u.push({item:kT.OFFENSE_COLONIZE,chance:10}),!n.regions.find(e=>e.id===n.capital)&&e.army.getArmyPower(!0)>5){const l=this.findPath(e.id,n.capital,n.id,!0),t=this.missions.find(e=>e.ownerCountry===n&&e.getTargetRegionId()===n.capital);l&&!t&&u.push({item:kT.OFFENSE_RECLAIM_CAPITAL,chance:50})}r=Yu.randomElement(u)}e.target=r||kT.NONE}AI_executeTarget(e,n){switch(e.target){case kT.NONE:e.target=null;break;case kT.PEACE:Yu.chance(.1)&&(e.target=null);break;case kT.SAVE_WEALTH:e.wealth>=5*(e.economy+1)&&(e.target=null);break;case kT.ECONOMY_BUILD:e.wealth>=10*(e.economy+1)&&(e.wealth-=10*(e.economy+1),e.economy+=1,e.target=null);break;case kT.ECONOMY_COLONIZE:if(e.economy>=2){const l=this.findNeighbouringColonizableRegions(e,n);l.length?e.wealth>=40&&(this.missions.push(new LT(this.servicesService,this.idService.getNextId(),n,new JO([new ZO(Pu.COLONIST,15)]),this.findPath(e.id,l[0],n.id))),e.wealth-=40,e.target=null):e.target=null}else e.target=null;break;case kT.DEFENSE_WALL:if(e.economy<=e.defense||e.defense>=7){e.target=null;break}e.wealth>=20*(e.defense+1)&&(e.wealth-=20*(e.defense+1),e.defense+=1,e.target=null);break;case kT.DEFENSE_ARCHER:this.AI_hireTroop(e,Pu.ARCHER);break;case kT.DEFENSE_GUARD_TOWER:e.target=null;break;case kT.OFFENSE_SPEARMAN:this.AI_hireTroop(e,Pu.SPEARMAN);break;case kT.OFFENSE_SWORDSMAN:this.AI_hireTroop(e,Pu.SWORDSMAN);break;case kT.OFFENSE_LIGHT_CAVALRY:this.AI_hireTroop(e,Pu.LIGHT_CAVALRY);break;case kT.OFFENSE_COLONIZE:if(e.army.getArmyPower(!0)>=20){const l=this.findNeighbouringColonizableRegions(e,n);l.length?e.wealth>=20&&(this.missions.push(new LT(this.servicesService,this.idService.getNextId(),n,new JO([new ZO(Pu.COLONIST,15)]),this.findPath(e.id,l[0],n.id))),e.wealth-=20,e.target=null):e.target=null}else e.target=null;break;case kT.OFFENSE_PLUNDER:if(e.army.getArmyPower(!0)>20){const l=this.findNeighbouringAttackableRegions(e,n,!0);l.length>0?(this.missions.push(new HT(this.servicesService,this.idService.getNextId(),n,this.AI_prepareArmy(e.army),this.findPath(e.id,l[0],n.id))),this.getRegion(l[0]).lastAttack=this.calendarService.getAbsoluteDay(),this.getCountryByRegionId(l[0]).id===ku.PLAYER&&(this.logService.warning("Incoming invasion!"),this.soundService.playBattle())):e.target=null}else e.target=null;break;case kT.OFFENSE_CONQUER:if(e.army.getArmyPower(!0)>20){const l=this.findNeighbouringAttackableRegions(e,n,!1).filter(e=>0!==e).filter(n=>this.getRegion(n).army.getArmyPower(!1)<1.5*e.army.getArmyPower(!0));l.length>0?(this.missions.push(new FT(this.servicesService,this.idService.getNextId(),n,this.AI_prepareArmy(e.army),this.findPath(e.id,l[0],n.id))),this.getRegion(l[0]).lastAttack=this.calendarService.getAbsoluteDay(),this.getCountryByRegionId(l[0]).id===ku.PLAYER&&(this.logService.warning("Incoming invasion!"),this.soundService.playBattle())):e.target=null}else e.target=null;e.target=null;break;case kT.OFFENSE_RECLAIM_CAPITAL:if(n.regions.find(l=>l.id===n.capital&&e.army.getArmyPower(!0)>5))e.target=null;else{const l=this.findPath(e.id,n.capital,n.id,!1),t=this.missions.find(e=>e.ownerCountry===n&&e.getTargetRegionId()===n.capital);l&&!t?this.missions.push(new FT(this.servicesService,this.idService.getNextId(),n,this.AI_prepareArmy(e.army),l)):e.target=null}e.target=null}}AI_hireTroop(e,n){const l=No.getTroop(n).AI_COST;e.wealth>=l&&(e.wealth-=l,e.army.addTroop(n,1),e.target=null)}AI_getDifficultyMultiplier(){let e=1;switch(this.optionsService.getOption(rf.AI_DIFFICULTY)){case Xu.EASY:e=.5;break;case Xu.MEDIUM:e=1;break;case Xu.HARD:e=2}return e}getName(){return"WorldService"}load(e){e.regions||e.countries?(e.regions.forEach(e=>{const n=this.regions[e.id];n.wealth=e.wealth,n.economy=e.economy,n.defense=e.defense,n.defense=null!==e.defense&&e.defense,n.target=e.target,n.land=e.land,n.forest=e.forest,n.mountains=e.mountains,n.spy=e.spy,n.harbour=void 0!==e.harbour?e.harbour:void 0!==Mo.REGIONS.find(e=>e.ID===n.id)&&Mo.REGIONS.find(e=>e.ID===n.id).HARBOUR,n.roads=void 0!==e.roads&&e.roads,n.watchtower=void 0!==e.watchtower&&e.watchtower,n.watched=void 0!==e.watched&&e.watched,n.capital=e.capital,n.lastAttack=void 0!==e.lastAttack?e.lastAttack:0,n.army=new JO([]),n.navy=new JO([]),e.army.forEach(e=>{n.army.addTroop(e.troop,e.size)}),e.navy&&e.navy.forEach(e=>{n.navy.addTroop(e.troop,e.size)})}),this.seaAreas.forEach(e=>{e.events=[]}),void 0!==e.seaEvents&&e.seaEvents.forEach(e=>{const n=this.seaAreas.find(n=>n.id===e.parentId);n&&(n.events=[],n.events.push(new eC(n.id,e.id,e.type,e.center,e.amount,e.time,e.data)))}),this.selectedCountry=null===this.selectedCountry?null:this.getCountry(this.selectedCountry.id),e.countries.forEach(e=>{const n=this.getCountry(e.id);n.diplomacy=e.diplomacy,n.focus=e.country,n.capital=void 0!==e.capital?e.capital:Mo.COUNTRIES.find(e=>e.COUNTRY===n.id).CAPITAL,n.regions=[],e.regions.forEach(e=>{n.regions.push(this.regions[e])}),n.data=e.data}),this.missions=[],e.missions.forEach(e=>{this.missions.push(this.missionFactoryService.loadMission(JSON.parse(e)))}),this.missions.forEach(e=>{e.army=new JO(e.army.units.filter(e=>e.troop!==Pu.GUARD_TOWER))}),this.defaultOrigin=e.defaultOrigin,this.discoveredLand=void 0!==e.discoveredLand?e.discoveredLand:0,this.discoveredForest=void 0!==e.discoveredForest?e.discoveredForest:0,this.discoveredMountains=void 0!==e.discoveredMountains?e.discoveredMountains:0,this.getPlayerCountry().name=e.playerNationName,this.x=e.x,this.y=e.y,this.zoom=e.zoom,this.mapDisplayOption=void 0!==e.mapDisplayOption?e.mapDisplayOption:0,this.regions[0].army=this.armyService.getArmy(),this.regions[0].navy=this.navyService.getNavy(),this.protection=void 0!==e.protection?e.protection:0):this.reset(!1,!1)}reset(e,n){const l=this.getPlayerCountry().name,t=[],i=this.seaAreas;(e||n)&&(this.discoveredLand=0,this.discoveredForest=0,this.discoveredMountains=0),e||n||this.countries.forEach(e=>{t.push([e.id,e.regions.map(e=>e.id)])}),this.countries=[],this.regionsNeighbours=[],this.missions=[],this.regions=[],this.seaAreas=[],this.defaultOrigin=0,this.selectedRegion=null,this.selectedCountry=null,this.selectedMission=null,this.selectedSeaEvent=null,this.x=150,this.y=-220,this.zoom=1.4,this.mapDisplayOption=0,this.protection=0,this.init(!1),e||n||this.seaAreas.forEach(e=>{const n=i.find(n=>n.id===e.id);n&&(e.events=n.events)}),this.regions[0].army=this.armyService.getArmy(),this.regions[0].navy=this.navyService.getNavy(),e?this.initPlayerKingdomName():this.getPlayerCountry().name=l,this.countries.forEach(e=>{const n=t.find(n=>n[0]===e.id);n&&(e.regions=[],n[1].forEach(n=>{const l=this.getRegion(n);e.regions.push(l),e.id===ku.PLAYER&&0!==l.id&&(this.landService.increaseLand(l.land,!0),this.landService.increaseForest(l.forest,!1),this.landService.increaseMountains(l.mountains)),e.id!==ku.PLAYER&&e.id!==ku.NEUTRAL&&this.regions[n].army.addTroop(Pu.ARCHER,Math.ceil(2*this.AI_getDifficultyMultiplier()))}))})}save(){const e=[];this.countries.forEach(n=>{const l=[];n.regions.forEach(e=>{l.push(e.id)}),e.push({id:n.id,diplomacy:n.diplomacy,focus:n.focus,regions:l,data:n.data,capital:n.capital})});const n=[];this.regions.forEach(e=>{const l=[],t=[];0!==e.id&&e.army.units.forEach(e=>{l.push({troop:e.troop,size:e.size})}),0!==e.id&&e.navy.units.forEach(e=>{t.push({troop:e.troop,size:e.size})}),n.push({id:e.id,wealth:e.wealth,economy:e.economy,defense:e.defense,harbour:e.harbour,target:e.target,land:e.land,forest:e.forest,mountains:e.mountains,spy:e.spy,capital:e.capital,army:l,navy:t,roads:e.roads,watchtower:e.watchtower,watched:e.watched,lastAttack:e.lastAttack})});const l=[];this.missions.forEach(e=>{l.push(JSON.stringify(e))});const t=[];return this.seaAreas.forEach(e=>{e.events.length>0&&t.push(e.events[0])}),{countries:e,regions:n,seaEvents:t,missions:l,defaultOrigin:this.defaultOrigin,discoveredLand:this.discoveredLand,discoveredForest:this.discoveredForest,discoveredMountains:this.discoveredMountains,playerNationName:this.getPlayerCountry().name,protection:this.protection,x:this.x,y:this.y,zoom:this.zoom,mapDisplayOption:this.mapDisplayOption}}getCountries(){return this.countries}getMissions(){return this.missions}getPlayerLandMissions(){return this.missions.filter(e=>e.getMissionType()===PT.LAND&&e.ownerCountry.id===ku.PLAYER)}getPlayerSeaMissions(){return this.missions.filter(e=>e.getMissionType()===PT.SEA&&e.ownerCountry.id===ku.PLAYER)}setSelectedCountry(e){this.selectedCountry=e,this.selectedMission=null,this.selectedSeaEvent=null}getSelectedCountry(){return this.selectedCountry}setSelectedRegion(e){this.selectedRegion=e,this.selectedMission=null,this.selectedSeaEvent=null}getSelectedRegion(){return this.selectedRegion}setSelectedMission(e){this.selectedCountry=null,this.selectedRegion=null,this.selectedSeaEvent=null,this.selectedMission=e}getSelectedMission(){return this.selectedMission}registerForCacheInvalidation(){return this.pathCacheSubject.asObservable()}tick(e){this.missions.forEach(e=>{e.tick()}),this.missions=this.missions.filter(e=>!e.isFinished()),this.missions.includes(this.getSelectedMission())||(this.selectedMission=null)}getRegionNeighbours(e,n){const l=this.regionsNeighbours.find(n=>n.id===e),t=[];return l&&l.neighbours.forEach(n?e=>{t.push(e)}:n=>{e>=0&&n>=0&&t.push(n)}),t}findPath(e,n,l,t=!1){let i=!0;if(e===n)return new MT([e]);let s=Number.MAX_SAFE_INTEGER;const r=new Array(this.regions.length).fill(Number.MAX_SAFE_INTEGER);let u=[],o=[];const a=[];for(u.push(new MT([e]));u.length>0||o.length>0;){for(const e of u){const u=this.getCountryByRegionId(e.path[e.path.length-1]);if(l===ku.SPECIAL||u.id===l||u.id===ku.NEUTRAL||i){const l=this.getRegionNeighbours(e.path[e.path.length-1],!1).filter(n=>!e.path.includes(n));for(const i of l){const l=new MT(e.path.slice().concat([i]));if(l.calculatePathDistance(this)<=r[i]&&(r[i]=l.calculatePathDistance(this),r[i]<=s))if(i===n){if(t)return l;r[i]<s&&(s=r[i]),a.push(l)}else o.push(l)}}}i=!1,u=o,o=[]}return 0===a.length?null:a.sort((e,n)=>e.distance-n.distance)[0]}addMission(e){this.missions.push(e)}getCountry(e){return this.countries.find(n=>n.id===e)}getCountryByRegionId(e){let n=null;return this.countries.forEach(l=>{l.regions.find(n=>n.id===e)&&(n=l)}),n}getRegion(e){return this.regions[e]}ownRegion(e,n){const l=this.getCountryByRegionId(e);if(l.id!==n.id){const t=l.regions.findIndex(n=>n.id===e);if(void 0!==t){const e=l.regions.splice(t,1)[0];n.regions.push(e),this.selectedRegion&&this.selectedRegion.id===e.id&&(this.selectedCountry=this.getCountryByRegionId(this.selectedRegion.id)),n.id===ku.PLAYER?(this.landService.increaseLand(e.land,!0),this.landService.increaseForest(e.forest,!1),this.landService.increaseMountains(e.mountains),e.spy=0):e.id===this.defaultOrigin&&(this.defaultOrigin=0),this.activeCountriesList=[],this.pathCacheSubject.next()}}this.regions.forEach(e=>{e.watched=!1}),this.regions.filter(e=>""!==e.path).forEach(e=>{this.getCountryByRegionId(e.id).id===ku.PLAYER&&e.watchtower&&e.neighbours.forEach(e=>{e>=0&&(this.getRegion(e).watched=!0)})})}findSeaPath(e,n,l=!1){let t=!0;if(e===n)return new MT([e]);if(void 0===this.getSeaArea(e)||void 0===n)return null;let i=Number.MAX_SAFE_INTEGER;const s=[];this.seaAreas.forEach(e=>s.push({id:e.id,cost:Number.MAX_SAFE_INTEGER}));let r=[],u=[];const o=[];for(r.push(new MT([e]));r.length>0||u.length>0;){for(const e of r){const t=this.getSeaArea(e.path[e.path.length-1]);if(0===t.events.length||t.events[0].type!==Lu.PIRATES&&t.events[0].type!==Lu.PIRATES_BASE&&t.events[0].type!==Lu.WHIRLPOOL){const t=this.getSeaArea(e.path[e.path.length-1]).neighbours.filter(n=>!e.path.includes(n));for(const r of t){const t=new MT(e.path.slice().concat([r]));if(t.calculateSeaPathDistance(this)<=s.find(e=>e.id===r).cost&&(s.find(e=>e.id===r).cost=t.calculateSeaPathDistance(this),s.find(e=>e.id===r).cost<=i))if(r===n){if(l)return t;s.find(e=>e.id===r).cost<i&&(i=s.find(e=>e.id===r).cost),o.push(t)}else u.push(t)}}}t=!1,r=u,u=[]}return 0===o.length?null:o.sort((e,n)=>e.distance-n.distance)[0]}clearMission(){this.selectedMission=null}canColonize(e){return!this.missions.find(n=>n.getMissionType()===PT.LAND&&n.getDestinationTargetRegion().id===e&&n.mission===Au.COLONIZE)}getPlayerCountry(){return this.countries[0]}getDefaultOriginRegion(){return this.getRegion(this.getDefaultOrigin())}getDefaultOriginRegionCountry(){return this.getCountryByRegionId(this.getDefaultOrigin())}getDefaultOrigin(){return this.defaultOrigin}setDefaultOrigin(e){this.defaultOrigin=e}getStationedArmies(){const e=[];return this.countries[0].regions.filter(e=>0!==e.id&&e.army.getArmySize()>0).forEach(n=>e.push(n.army)),this.countries[1].regions.filter(e=>e.army.getArmySize()>0).forEach(n=>e.push(n.army)),e}getStationedNavy(){const e=[];return this.countries[0].regions.filter(e=>0!==e.id&&e.navy.getArmySize()>0).forEach(n=>e.push(n.navy)),this.countries[1].regions.filter(e=>e.navy.getArmySize()>0).forEach(n=>e.push(n.navy)),e}getDisplayX(){return this.x}getDisplayY(){return this.y}getDisplayZoom(){return this.zoom}setDisplayX(e){this.x=e}setDisplayY(e){this.y=e}setDisplayZoom(e){this.zoom=e}getCountriesList(){return 0===this.activeCountriesList.length&&(this.activeCountriesList.push(ku[ku.NONE]),this.countries.filter(e=>e.id!==ku.PLAYER&&e.id!==ku.NEUTRAL&&e.regions.length>0).forEach(e=>this.activeCountriesList.push(ku[e.id]))),this.activeCountriesList}getNeutralRegionsNumber(){return this.getCountry(ku.NEUTRAL).regions.length}buildRegionBuilding(e){this.missions.push(new BT(this.servicesService,this.idService.getNextId(),this.getPlayerCountry(),new JO([]),new MT([this.getSelectedRegion().id,this.getSelectedRegion().id]),0,1,"{mission}",e))}changeName(){this.modalService.open(ju.INPUT),this.modalService.setModalText("Specify your nation name"),this.modalService.setModalValue(this.getPlayerCountry().name);const e=this.modalService.registerForValueResponse().subscribe(n=>{e.unsubscribe(),null!==n&&(this.getPlayerCountry().name=n)})}findNeighbouringAttackableRegions(e,n,l){const t=[],i=[];return n.regions.forEach(s=>{s.neighbours.filter(e=>e>=0).forEach(s=>{const r=this.getCountryByRegionId(s);if(n.id!==r.id&&r.id!==ku.NEUTRAL){if((r.id===ku.PLAYER&&n.diplomacy<25||r.id!==ku.PLAYER)&&this.findPath(e.id,s,n.id,!0)){let e=30;r.id===ku.PLAYER&&(e=90/this.AI_getDifficultyMultiplier()),this.calendarService.getAbsoluteDay()-this.getRegion(s).lastAttack>=e&&(r.id===ku.PLAYER&&n.diplomacy<-25&&this.protection<=0?t.includes(s)||t.push(s):i.includes(s)||i.push(s))}}else if(l&&r.id===ku.NEUTRAL&&this.getRegion(s).army.hasAny()&&n.diplomacy<25&&this.findPath(e.id,s,n.id,!0)){const e=30;this.calendarService.getAbsoluteDay()-this.getRegion(s).lastAttack>=e&&(t.includes(s)||t.push(s))}})}),this.shuffleArray(t.length>0?t:i)}findNeighbouringColonizableRegions(e,n){const l=[];return n.regions.forEach(t=>{t.neighbours.filter(e=>e>=0).forEach(t=>{this.getCountryByRegionId(t).id===ku.NEUTRAL&&!this.getRegion(t).army.hasAny()&&this.canColonize(t)&&this.findPath(e.id,t,n.id,!0)&&(l.includes(t)||l.push(t))})}),this.shuffleArray(l)}shuffleArray(e){let n,l,t;for(t=e.length-1;t>0;t--)n=Math.floor(Math.random()*(t+1)),l=e[t],e[t]=e[n],e[n]=l;return e}getMapDisplayOption(){return this.mapDisplayOption}setMapDisplayoption(e){this.mapDisplayOption=e}DEV_calculateTotalLand(){let e=0,n=0,l=0;this.regions.forEach(t=>{8!==t.id&&9!==t.id&&10!==t.id&&11!==t.id&&12!==t.id&&(e+=t.land,n+=t.forest,l+=t.mountains)}),this.logService.success("Land report<br>Land: "+e+"<br>Forest: "+n+"<br>Mountains: "+l+"<br><br>Total: "+(e+n+l))}AI_prepareArmy(e){const n=new JO([]);return e.units.forEach(l=>{l.troop!==Pu.MILITIA&&l.troop!==Pu.GUARD_TOWER&&(n.addTroop(l.troop,l.size),e.removeTroop(l.troop,l.size))}),e.removeEmptyUnits(),n}initPlayerKingdomName(){this.kongregateService.isAvailable()&&!this.kongregateService.isGuest()&&(this.getPlayerCountry().name=this.kongregateService.getUsername()+"'s nation")}setSelectedSeaEvent(e){this.selectedSeaEvent=e,this.selectedRegion=null,this.selectedCountry=null,this.selectedMission=null}getSelectedSeaEvent(){return this.selectedSeaEvent}getRandomPointInCircle(e,n){if(n<10)return e;{const l=(n-10)*Math.sqrt(Math.random()),t=Math.random()*Math.PI*2;return{x:l*Math.cos(t)+e.x,y:l*Math.sin(t)+e.y}}}getShowHarbours(){return this.showHarbours}setShowHarbours(e){this.showHarbours=e}calculatePointsDistance(e,n){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}getSeaAreas(){return this.seaAreas}getSeaArea(e){return this.seaAreas.find(n=>n.id===e)}spawnSeaEvents(){const e=this.seaAreas.filter(e=>-1!==e.id);Object.keys(Lu).slice(Object.keys(Lu).length/2).map(e=>Lu[e]).forEach(n=>{const l=Mo.getSeaEvent(n);let t=0;this.getSeaAreas().forEach(e=>{e.events.length>0&&e.events[0].type===n&&(t+=1)});const i=e.filter(e=>e.r>l.FOR_RADIUS&&0===e.events.length);if(i.length>0){let e=!1;if(t<l.NUMBER_MIN?e=!0:t<l.NUMBER_MAX&&Yu.chance(l.SPAWN_CHANCE-t*l.SPAWN_DECREASE)&&(e=!0),e){const e=i[Yu.randomBetween(0,i.length-1)];0===e.events.length&&e.events.push(new eC(e.id,this.idService.getNextId(),n,this.getRandomPointInCircle(e.center,e.r),Yu.randomBetween(l.POWER_MIN,l.POWER_MAX),Yu.randomBetween(l.TIME_MIN,l.TIME_MAX),null))}}})}ROYAL_spawnPositiveSeaEvents(){const e=this.seaAreas.filter(e=>-1!==e.id&&0===e.events.length),n=[];for(let l=0;l<4;l++)n.push(Yu.randomArrayElement([Lu.TREASURE,Lu.FISH,Lu.SHARK,Lu.CARTOGRAPHY]));n.forEach(n=>{const l=Mo.getSeaEvent(n);let t=0;this.getSeaAreas().forEach(e=>{e.events.length>0&&e.events[0].type===n&&(t+=1)});const i=e.filter(e=>e.r>l.FOR_RADIUS&&0===e.events.length);if(i.length>0){const e=i[Yu.randomBetween(0,i.length-1)];0===e.events.length&&e.events.push(new eC(e.id,this.idService.getNextId(),n,this.getRandomPointInCircle(e.center,e.r),Yu.randomBetween(l.POWER_MIN,l.POWER_MAX),Yu.randomBetween(l.TIME_MIN,l.TIME_MAX),null)),this.logService.success("New sea event: "+Uu.prepareSeaEventName(n))}})}getDiscoveredLand(){return this.discoveredLand}increaseDiscoveredLand(e){this.discoveredLand+=e}getDiscoveredForest(){return this.discoveredForest}increaseDiscoveredForest(e){this.discoveredForest+=e}getDiscoveredMountains(){return this.discoveredMountains}increaseDiscoveredMountains(e){this.discoveredMountains+=e}getTotalDiscovered(){return this.discoveredLand+this.discoveredForest+this.discoveredMountains}setPlayerColour(e){this.getPlayerCountry().colour=e}isProtected(){return this.protection>0}addProtection(e){this.protection+=e}getProtection(){return this.protection}hasPiratesBase(){return this.getSeaAreas().find(e=>e.events.length>0&&e.events[0].type===Lu.PIRATES_BASE)}}return e.ngInjectableDef=ce({factory:function(){return new e(De(sf),De(fv),De(lb),De(lC),De(df),De(hf),De(pf),De(ZT),De(uf),De(cf),De(nR),De(Rf))},token:e,providedIn:"root"}),e})();class iC{constructor(e,n,l,t,i,s,r){this.originRegion=e,this.originRegionColour=n,this.targetRegion=l,this.targetRegionColour=t,this.targetRegionCountry=i,this.targetSeaEvent=s,this.missionType=r}}class sC{constructor(e,n,l,t,i){this.servicesService=e,this.worldService=n,this.gameService=l,this.resourcesService=t,this.modalService=i,this.selecting=!1,this.regionSelected=new Di,this.dragX=-1,this.dragY=-1,this.clickX=-1,this.clickY=-1,this.moved=!1,this.selectedSeaRegion=null,this.radio=0,this.showHarbours=!0,this.pathCache=[],this.countries=ku,this.seaEvents=Lu,this.missions=Au,this.missionType=PT,this.troops=Pu,this.worldService.registerForCacheInvalidation().subscribe(e=>{this.pathCache=[]}),this.radio=this.worldService.getMapDisplayOption()}ngOnInit(){}getX(){return this.worldService.getDisplayX()}getY(){return this.worldService.getDisplayY()}getZoom(){return this.worldService.getDisplayZoom()}getCountries(){return this.worldService.getCountries()}getMissions(){return this.worldService.getMissions()}handleKeyDown(e){"ArrowDown"===e.key&&this.worldService.setDisplayY(this.worldService.getDisplayY()+5)}dragStart(e){this.moved=!1,this.dragX=e.x,this.dragY=e.y,this.clickX=e.x,this.clickY=e.y}mousemove(e){1===e.buttons&&this.dragX>=1&&this.dragY>=1&&(this.moved=!0,this.worldService.setDisplayX(this.worldService.getDisplayX()+e.x-this.dragX),this.worldService.setDisplayY(this.worldService.getDisplayY()+e.y-this.dragY),this.dragX=e.x,this.dragY=e.y)}dragEnd(e){this.moved&&this.dragX>=0&&this.dragY>=0&&(this.worldService.setDisplayX(this.worldService.getDisplayX()+e.x-this.dragX),this.worldService.setDisplayY(this.worldService.getDisplayY()+e.y-this.dragY)),this.dragX=-1,this.dragY=-1}onScroll(e){e.preventDefault(),e.deltaY>0&&this.getZoom()<2.5?this.worldService.setDisplayZoom(this.getZoom()+Math.sign(e.deltaY)/10):e.deltaY<0&&this.getZoom()>.7&&this.worldService.setDisplayZoom(this.getZoom()+Math.sign(e.deltaY)/10),this.getZoom()<.7?this.worldService.setDisplayZoom(.7):this.getZoom()>2.5&&this.worldService.setDisplayZoom(2.5)}prepareViewbox(e){return e.x-65+" "+(e.y-65)+" 130 130"}resetView(){this.worldService.setDisplayZoom(1.4),this.worldService.setDisplayX(150),this.worldService.setDisplayY(-220)}select(e,n,l){Math.abs(e.x-this.clickX)<2&&Math.abs(e.y-this.clickY)<2&&(this.clickX=-1,this.clickY=-1,this.worldService.setSelectedRegion(l),this.worldService.setSelectedCountry(n))}moveUp(){this.worldService.setDisplayY(this.getY()-20)}moveDown(){this.worldService.setDisplayY(this.getY()+20)}moveRight(){this.worldService.setDisplayX(this.getX()+20)}moveLeft(){this.worldService.setDisplayX(this.getX()-20)}plunder(){this.modalService.open(ju.MISSION),this.modalService.setMissionData(new iC(this.worldService.getDefaultOriginRegion(),this.worldService.getDefaultOriginRegionCountry().colour,this.worldService.getSelectedRegion(),this.worldService.getSelectedCountry().colour,this.worldService.getSelectedCountry().id,null,Au.PLUNDER))}conquer(){this.modalService.open(ju.MISSION),this.modalService.setMissionData(new iC(this.worldService.getDefaultOriginRegion(),this.worldService.getDefaultOriginRegionCountry().colour,this.worldService.getSelectedRegion(),this.worldService.getSelectedCountry().colour,this.worldService.getSelectedCountry().id,null,Au.CONQUER))}colonize(){this.modalService.open(ju.MISSION),this.modalService.setMissionData(new iC(this.worldService.getRegion(0),this.worldService.getPlayerCountry().colour,this.worldService.getSelectedRegion(),this.worldService.getSelectedCountry().colour,this.worldService.getSelectedCountry().id,null,Au.COLONIZE))}move(){this.modalService.open(ju.MISSION),this.modalService.setMissionData(new iC(this.worldService.getSelectedRegion(),this.worldService.getSelectedCountry().colour,null,null,null,null,Au.MOVE))}spy(){this.modalService.open(ju.MISSION),this.modalService.setMissionData(new iC(this.worldService.getDefaultOriginRegion(),this.worldService.getDefaultOriginRegionCountry().colour,this.worldService.getSelectedRegion(),this.worldService.getSelectedCountry().colour,this.worldService.getSelectedCountry().id,null,Au.SPY))}seaMove(){this.modalService.open(ju.MISSION),this.modalService.setMissionData(new iC(this.worldService.getSelectedRegion(),this.worldService.getSelectedCountry().colour,null,null,null,null,Au.SEA_MOVE))}seaPlunder(){this.modalService.open(ju.MISSION),this.modalService.setMissionData(new iC(this.worldService.getDefaultOriginRegion(),this.worldService.getDefaultOriginRegionCountry().colour,this.worldService.getSelectedRegion(),this.worldService.getSelectedCountry().colour,this.worldService.getSelectedCountry().id,null,Au.SEA_PLUNDER))}seaConquer(){this.modalService.open(ju.MISSION),this.modalService.setMissionData(new iC(this.worldService.getDefaultOriginRegion(),this.worldService.getDefaultOriginRegionCountry().colour,this.worldService.getSelectedRegion(),this.worldService.getSelectedCountry().colour,this.worldService.getSelectedCountry().id,null,Au.SEA_CONQUER))}fishing(){this.modalService.open(ju.MISSION),this.modalService.setMissionData(new iC(this.worldService.getDefaultOriginRegion(),this.worldService.getDefaultOriginRegionCountry().colour,null,null,null,this.worldService.getSelectedSeaEvent(),Au.FISHING))}hunting(){this.modalService.open(ju.MISSION),this.modalService.setMissionData(new iC(this.worldService.getDefaultOriginRegion(),this.worldService.getDefaultOriginRegionCountry().colour,null,null,null,this.worldService.getSelectedSeaEvent(),Au.HUNTING))}treasure(){this.modalService.open(ju.MISSION),this.modalService.setMissionData(new iC(this.worldService.getDefaultOriginRegion(),this.worldService.getDefaultOriginRegionCountry().colour,null,null,null,this.worldService.getSelectedSeaEvent(),Au.TREASURE))}cartography(){this.modalService.open(ju.MISSION),this.modalService.setMissionData(new iC(this.worldService.getDefaultOriginRegion(),this.worldService.getDefaultOriginRegionCountry().colour,null,null,null,this.worldService.getSelectedSeaEvent(),Au.CARTOGRAPHY))}seaBattle(){this.modalService.open(ju.MISSION),this.modalService.setMissionData(new iC(this.worldService.getDefaultOriginRegion(),this.worldService.getDefaultOriginRegionCountry().colour,null,null,null,this.worldService.getSelectedSeaEvent(),Au.SEA_BATTLE))}expedition(){this.modalService.open(ju.MISSION),this.modalService.setMissionData(new iC(this.worldService.getDefaultOriginRegion(),this.worldService.getDefaultOriginRegionCountry().colour,null,null,null,null,Au.EXPEDITION))}isDev(){return!go.production}getNeighbours(e){const n=[];return this.getCountries().forEach(l=>{l.regions.forEach(l=>{e.neighbours.includes(l.id)&&n.push(l)})}),n}selectMission(e){this.worldService.setSelectedMission(e)}findPath(e,n,l){const t=this.worldService.findPath(e,n,l,!0);return t?t.path.length-1:-1}hasPath(e,n,l=ku.PLAYER,t=!1){if(t)return this.findPath(e,n,l)>=0;{const t=this.pathCache.find(l=>l[0]===e&&l[1]===n);if(t)return t[2];const i=this.findPath(e,n,l)>=0;return this.pathCache.push([e,n,i]),i}}getSelectedRegion(){return this.worldService.getSelectedRegion()}getSelectedCountry(){return this.worldService.getSelectedCountry()}getSelectedMission(){return this.worldService.getSelectedMission()}getTroopName(e){return Uu.prepareTroopName(e)}getMissionName(){return Uu.prepareMissionName(this.getSelectedMission().mission)}canColonize(){return this.worldService.canColonize(this.getSelectedRegion().id)}zoomIn(){this.getZoom()>.7&&(this.worldService.setDisplayZoom(this.getZoom()-.1),this.getZoom()<.7&&this.worldService.setDisplayZoom(.7))}zoomOut(){this.getZoom()<2.5&&(this.worldService.setDisplayZoom(this.getZoom()+.1),this.getZoom()>2.5&&this.worldService.setDisplayZoom(2.5))}getDefaultOrigin(){return this.worldService.getDefaultOrigin()}setDefaultOrigin(e){this.worldService.setDefaultOrigin(e)}getTarget(e){return kT[e]}build(){this.worldService.getMissions().find(e=>e.mission===Au.BUILD&&e.getDestinationTargetRegion().id===this.getSelectedRegion().id)?this.modalService.info("Building already in progress"):(this.modalService.open(ju.WORLD_BUILD),this.modalService.setWorldRegion(this.getSelectedRegion()))}getFirstFourUnits(e){return e.length>4?e.filter(e=>e.troop===Pu.MILITIA||e.troop===Pu.ARCHER||e.troop===Pu.SPEARMAN||e.troop===Pu.SWORDSMAN).sort((e,n)=>e.troop-n.troop):e.filter(e=>e.troop!==Pu.GUARD_TOWER).sort((e,n)=>e.troop-n.troop)}getSecondFourUnits(e){if(e.length>4)return e.filter(e=>e.troop===Pu.LIGHT_CAVALRY||e.troop===Pu.HORSE_ARCHER).sort((e,n)=>e.troop-n.troop)}changeName(){this.worldService.changeName()}calculateTotalLand(){this.worldService.DEV_calculateTotalLand()}updateMapDisplayOption(){this.worldService.setMapDisplayoption(this.radio),this.worldService.setShowHarbours(this.showHarbours)}cancel(){this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to cancel this mission?");const e=this.modalService.registerForConfirmation().subscribe(n=>{e.unsubscribe(),n&&this.getSelectedMission().cancel()})}canCancel(){const e=this.getSelectedMission();return e.canCancel()&&"traveling"===e.status}getSeaAreas(){return this.worldService.getSeaAreas()}getSeaArea(e){return this.worldService.getSeaAreas().find(n=>n.id===e)}selectArea(e){this.selectedSeaRegion=e}getSeaEventIconPath(e){let n;switch(e){case Lu.FISH:n="fish";break;case Lu.SHARK:n="shark";break;case Lu.TREASURE:n="treasure";break;case Lu.PIRATES:n="pirate_flag";break;case Lu.PIRATES_BASE:n="pirates_base";break;case Lu.WHIRLPOOL:n="whirlpool";break;case Lu.CARTOGRAPHY:n="sextant"}return"assets/sea/"+n+".svg"}selectSeaEvent(e){this.worldService.setSelectedSeaEvent(e)}getSelectedSeaEvent(){return this.worldService.getSelectedSeaEvent()}getSeaEventName(){return Uu.prepareSeaEventName(this.getSelectedSeaEvent().type)}getShowHarbours(){return this.worldService.getShowHarbours()}getHarbour(e){return Mo.SEA_AREAS.find(n=>n.ID===e)}hasSeaPath(e,n){return!!this.worldService.findSeaPath(e,n,!0)}DEV_changeToPirate(){this.getSelectedSeaEvent().type=Lu.PIRATES,this.getSelectedSeaEvent().data=new JO([new ZO(Pu.BOAT,1)])}hasMap(){return 0===this.resourcesService.hasResource(bu.MAP,1,"Expedition",!0)}isSeaEnabled(){return this.gameService.isEnabled(Iu.NAVY)}isSeaCartographyEnabled(){return this.gameService.isEnabled(Iu.CARTOGRAPHER)}getMissionCargo(){return this.getSelectedMission().army.getArmyCargo()}roundEffectiveSpeed(){return Uu.round(this.getSelectedMission().getArmyEffectiveSpeed(),2)}DEV_deleteSeaEvent(e){this.worldService.getSeaArea(e.parentId).events=[]}DEV_clearSeaEventData(){this.getSelectedSeaEvent().data=new JO([])}getGuardTowersCount(){const e=this.getSelectedRegion().army.getUnit(Pu.GUARD_TOWER);return void 0===e?0:e.size}}var rC=Jl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{width:100%;height:100%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#details[_ngcontent-%COMP%]{margin:5px 5px 0;width:98%;height:152px;border:2px solid #000}#details.selecting[_ngcontent-%COMP%]{height:117px}#svg[_ngcontent-%COMP%]{position:relative;margin:5px;width:98%;height:70.5%;border:2px solid #000}#kingdomName[_ngcontent-%COMP%]{font-weight:700}#mainMap[_ngcontent-%COMP%]{background-color:#86c5da}#target[_ngcontent-%COMP%]{position:absolute;width:30px;top:25px;right:30px;cursor:pointer}#arrowUp[_ngcontent-%COMP%]{position:absolute;width:30px;top:0;right:30px;cursor:pointer}#arrowDown[_ngcontent-%COMP%]{position:absolute;width:30px;top:50px;right:30px;cursor:pointer}#arrowRight[_ngcontent-%COMP%]{position:absolute;width:30px;top:25px;right:5px;cursor:pointer}#arrowLeft[_ngcontent-%COMP%]{position:absolute;width:30px;top:25px;right:55px;cursor:pointer}#plus[_ngcontent-%COMP%]{position:absolute;width:25px;top:80px;right:50px;cursor:pointer}#minus[_ngcontent-%COMP%]{position:absolute;width:25px;top:80px;right:15px;cursor:pointer}#options[_ngcontent-%COMP%]{position:absolute;top:5px;right:90px;cursor:pointer}#options[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;width:100px;text-align:end;cursor:pointer}#options2[_ngcontent-%COMP%]{position:absolute;top:5px;right:220px;cursor:pointer}#options2[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;width:150px;text-align:end;cursor:pointer}.mission[_ngcontent-%COMP%]{cursor:pointer}svg[_ngcontent-%COMP%]{height:100%;width:100%}.region[_ngcontent-%COMP%]:hover{opacity:.7}#regionDetails[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}#regionDetails[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-right:10px}#missionDetails[_ngcontent-%COMP%], #missionStats[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}#missionTitle[_ngcontent-%COMP%]{font-size:1.1em;font-weight:bolder;text-align:center;padding-bottom:5px}#missionBody[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;margin-left:5px}app-progress-bar[_ngcontent-%COMP%]{margin-top:3px;margin-left:5px;display:inline-block;width:150px;height:15px;font-size:.7em}#missionStatus[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;margin-bottom:2px}#missionBody[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 auto}#missionBody[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:120px}#missionDetails[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-right:20px}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}hr[_ngcontent-%COMP%]{display:block;height:1px;border:0;border-top:1px solid #000;padding:0;margin:2px 0}button[_ngcontent-%COMP%]{margin:2px;padding:4px}.buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.buttonIcon[_ngcontent-%COMP%]{height:20px}#changeName[_ngcontent-%COMP%]{margin-left:5px;height:14px;cursor:pointer}#svgBox[_ngcontent-%COMP%]{height:72px;width:72px}.seaEvent[_ngcontent-%COMP%]{cursor:pointer}#seaEventBody[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}#seaEventTitle[_ngcontent-%COMP%]{margin-left:10px;font-weight:bolder}#sizeDiv[_ngcontent-%COMP%]{padding-right:15px}"]],data:{}});function uC(e){return gr(0,[(e()(),qs(0,0,null,null,0,"img",[["id","changeName"],["src","assets/gear.svg"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.changeName()&&t),t}),null,null))],null,null)}function oC(e){return gr(0,[(e()(),qs(0,0,null,null,0,"span",[],null,null,null,null,null))],null,null)}function aC(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(1,null,[" standing: "," (",")\n"]))],null,(function(e,n){var l=n.component;e(n,1,0,l.getSelectedCountry().getDiplomacy(),l.getSelectedCountry().diplomacy)}))}function cC(e){return gr(0,[(e()(),qs(0,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,0,"input",[["id","defaultOrigin"],["type","radio"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==i.setDefaultOrigin(i.getSelectedRegion().id)&&t),t}),null,null)),(e()(),qs(2,0,null,null,1,"label",[["for","defaultOrigin"]],null,null,null,null,null)),(e()(),cr(-1,null,["use as default origin"]))],null,(function(e,n){var l=n.component;e(n,1,0,l.getDefaultOrigin()===l.getSelectedRegion().id)}))}function hC(e){return gr(0,[(e()(),qs(0,0,null,null,12,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(3,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(4,null,[" "," "])),(e()(),qs(5,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(6,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(7,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(8,null,[" "," "])),(e()(),qs(9,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(10,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(11,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(12,null,[" "," "]))],(function(e,n){e(n,3,0,"wealth","world"),e(n,7,0,"economy","world"),e(n,11,0,"defense","world")}),(function(e,n){var l=n.component;e(n,4,0,l.getSelectedRegion().wealth),e(n,8,0,l.getSelectedRegion().economy),e(n,12,0,l.getSelectedRegion().defense)}))}function dC(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["yes"]))],null,null)}function gC(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["no"]))],null,null)}function pC(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["yes"]))],null,null)}function mC(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["no"]))],null,null)}function fC(e){return gr(0,[(e()(),qs(0,0,null,null,18,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(3,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Qs(16777216,null,null,1,null,dC)),ai(5,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,gC)),ai(7,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(8,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(9,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(10,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Qs(16777216,null,null,1,null,pC)),ai(12,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,mC)),ai(14,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(15,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(16,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(17,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(18,null,[" "," "]))],(function(e,n){var l=n.component;e(n,3,0,"roads","world"),e(n,5,0,l.getSelectedRegion().roads),e(n,7,0,!l.getSelectedRegion().roads),e(n,10,0,"watchtower","world"),e(n,12,0,l.getSelectedRegion().watchtower),e(n,14,0,!l.getSelectedRegion().watchtower),e(n,17,0,"guard_tower","world")}),(function(e,n){e(n,18,0,n.component.getGuardTowersCount())}))}function SC(e){return gr(0,[(e()(),qs(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(3,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(4,null,[" "," "]))],(function(e,n){e(n,3,0,"defense","world")}),(function(e,n){e(n,4,0,n.component.getSelectedRegion().defense)}))}function EC(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["yes"]))],null,null)}function vC(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["no"]))],null,null)}function RC(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["yes"]))],null,null)}function OC(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["no"]))],null,null)}function bC(e){return gr(0,[(e()(),qs(0,0,null,null,18,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(3,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Qs(16777216,null,null,1,null,EC)),ai(5,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,vC)),ai(7,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(8,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(9,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(10,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Qs(16777216,null,null,1,null,RC)),ai(12,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,OC)),ai(14,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(15,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(16,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(17,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(18,null,[" "," "]))],(function(e,n){var l=n.component;e(n,3,0,"roads","world"),e(n,5,0,l.getSelectedRegion().roads),e(n,7,0,!l.getSelectedRegion().roads),e(n,10,0,"watchtower","world"),e(n,12,0,l.getSelectedRegion().watchtower),e(n,14,0,!l.getSelectedRegion().watchtower),e(n,17,0,"guard_tower","world")}),(function(e,n){e(n,18,0,n.component.getGuardTowersCount())}))}function TC(e){return gr(0,[(e()(),qs(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(3,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(4,null,[" "," "]))],(function(e,n){e(n,3,0,"spy","army/mission")}),(function(e,n){e(n,4,0,n.component.getSelectedRegion().spy)}))}function CC(e){return gr(0,[(e()(),qs(0,0,null,null,12,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(3,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(-1,null,[" ? "])),(e()(),qs(5,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(6,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(7,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(-1,null,[" ? "])),(e()(),qs(9,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(10,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(11,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(-1,null,[" ? "]))],(function(e,n){e(n,3,0,"wealth","world"),e(n,7,0,"economy","world"),e(n,11,0,"defense","world")}),null)}function IC(e){return gr(0,[(e()(),qs(0,0,null,null,12,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(3,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(-1,null,[" ? "])),(e()(),qs(5,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(6,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(7,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(-1,null,[" ? "])),(e()(),qs(9,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(10,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(11,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(-1,null,[" ? "]))],(function(e,n){e(n,3,0,"roads","world"),e(n,7,0,"watchtower","world"),e(n,11,0,"guard_tower","world")}),null)}function yC(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(1,null,[""," : ",""]))],null,(function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit.troop),n.context.$implicit.size)}))}function AC(e){return gr(0,[(e()(),qs(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,yC)),ai(2,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.getFirstFourUnits(l.getSelectedRegion().army.units))}),null)}function NC(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(1,null,[""," : ",""]))],null,(function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit.troop),n.context.$implicit.size)}))}function _C(e){return gr(0,[(e()(),qs(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,NC)),ai(2,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.getSecondFourUnits(l.getSelectedRegion().army.units))}),null)}function wC(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(1,null,[""," : ",""]))],null,(function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit.troop),n.context.$implicit.size)}))}function PC(e){return gr(0,[(e()(),qs(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,wC)),ai(2,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,2,0,n.component.getSelectedRegion().navy.units)}),null)}function xC(e){return gr(0,[(e()(),qs(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(-1,null,[" troops: ? "]))],null,null)}function kC(e){return gr(0,[(e()(),qs(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.colonize()&&t),t}),null,null)),(e()(),cr(-1,null,["Colonize "])),(e()(),qs(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/colonize.svg"]],null,null,null,null,null))],null,null)}function MC(e){return gr(0,[(e()(),qs(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.move()&&t),t}),null,null)),(e()(),cr(-1,null,["Move army "])),(e()(),qs(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/move.svg"]],null,null,null,null,null))],null,null)}function DC(e){return gr(0,[(e()(),qs(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.seaMove()&&t),t}),null,null)),(e()(),cr(-1,null,["Sea move "])),(e()(),qs(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/sea_move.svg"]],null,null,null,null,null))],null,null)}function LC(e){return gr(0,[(e()(),qs(0,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,6,"div",[["class","buttons"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,kC)),ai(3,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,MC)),ai(5,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,DC)),ai(7,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,3,0,l.canColonize()&&l.hasPath(0,l.getSelectedRegion().id)),e(n,5,0,l.getSelectedRegion().army.hasAny()),e(n,7,0,l.isSeaEnabled()&&l.getSelectedRegion().navy.hasAny()&&l.hasSeaPath(l.getDefaultOrigin(),l.getSelectedRegion().id))}),null)}function FC(e){return gr(0,[(e()(),qs(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.plunder()&&t),t}),null,null)),(e()(),cr(-1,null,[" Plunder "])),(e()(),qs(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/plunder.svg"]],null,null,null,null,null))],null,null)}function UC(e){return gr(0,[(e()(),qs(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.conquer()&&t),t}),null,null)),(e()(),cr(-1,null,[" Conquer "])),(e()(),qs(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/conquer.svg"]],null,null,null,null,null))],null,null)}function HC(e){return gr(0,[(e()(),qs(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.spy()&&t),t}),null,null)),(e()(),cr(-1,null,["Spy "])),(e()(),qs(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/spy.svg"]],null,null,null,null,null))],null,null)}function GC(e){return gr(0,[(e()(),qs(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.seaPlunder()&&t),t}),null,null)),(e()(),cr(-1,null,["Sea plunder "])),(e()(),qs(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/sea_plunder.svg"]],null,null,null,null,null))],null,null)}function BC(e){return gr(0,[(e()(),qs(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.seaConquer()&&t),t}),null,null)),(e()(),cr(-1,null,["Sea conquer "])),(e()(),qs(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/sea_conquer.svg"]],null,null,null,null,null))],null,null)}function WC(e){return gr(0,[(e()(),qs(0,0,null,null,11,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,10,"div",[["class","buttons"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,FC)),ai(3,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,UC)),ai(5,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,HC)),ai(7,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,GC)),ai(9,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,BC)),ai(11,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,3,0,l.hasPath(l.getDefaultOrigin(),l.getSelectedRegion().id)),e(n,5,0,l.hasPath(l.getDefaultOrigin(),l.getSelectedRegion().id)),e(n,7,0,0===l.getSelectedRegion().spy&&l.hasPath(l.getDefaultOrigin(),l.getSelectedRegion().id,l.countries.SPECIAL,!0)),e(n,9,0,l.isSeaEnabled()&&l.hasSeaPath(0,l.getSelectedRegion().id)),e(n,11,0,l.isSeaEnabled()&&l.hasSeaPath(0,l.getSelectedRegion().id))}),null)}function VC(e){return gr(0,[(e()(),qs(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,LC)),ai(2,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,WC)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.getSelectedCountry().id===l.countries.NEUTRAL),e(n,4,0,l.getSelectedCountry().id!==l.countries.NEUTRAL)}),null)}function zC(e){return gr(0,[(e()(),qs(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.move()&&t),t}),null,null)),(e()(),cr(-1,null,["Move army "])),(e()(),qs(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/move.svg"]],null,null,null,null,null))],null,null)}function YC(e){return gr(0,[(e()(),qs(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.build()&&t),t}),null,null)),(e()(),cr(-1,null,["Build "])),(e()(),qs(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/build.svg"]],null,null,null,null,null))],null,null)}function $C(e){return gr(0,[(e()(),qs(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.seaMove()&&t),t}),null,null)),(e()(),cr(-1,null,["Sea move "])),(e()(),qs(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/army/mission/sea_move.svg"]],null,null,null,null,null))],null,null)}function KC(e){return gr(0,[(e()(),qs(0,0,null,null,2,"button",[["class","icon"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.expedition()&&t),t}),null,null)),(e()(),cr(-1,null,["Send expedition"])),(e()(),qs(2,0,null,null,0,"img",[["class","buttonIcon"],["src","assets/resources/map.svg"]],null,null,null,null,null))],null,null)}function jC(e){return gr(0,[(e()(),qs(0,0,null,null,9,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,8,"div",[["class","buttons"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,zC)),ai(3,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,YC)),ai(5,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,$C)),ai(7,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,KC)),ai(9,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,3,0,l.getSelectedRegion().army.hasAny()),e(n,5,0,0!==l.getSelectedRegion().id),e(n,7,0,l.isSeaEnabled()&&l.getSelectedRegion().navy.hasAny()&&l.hasSeaPath(l.getDefaultOrigin(),l.getSelectedRegion().id)),e(n,9,0,0===l.getSelectedRegion().id&&l.hasMap())}),null)}function QC(e){return gr(0,[(e()(),qs(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,VC)),ai(2,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,jC)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.getSelectedCountry().id!==l.countries.PLAYER),e(n,4,0,l.getSelectedCountry().id===l.countries.PLAYER)}),null)}function qC(e){return gr(0,[(e()(),qs(0,0,null,null,54,"div",[],null,null,null,null,null)),(e()(),cr(-1,null,[" Kingdom: "])),(e()(),qs(2,0,null,null,1,"span",[["id","kingdomName"]],null,null,null,null,null)),(e()(),cr(3,null,["",""])),(e()(),Qs(16777216,null,null,1,null,uC)),ai(5,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,oC)),ai(7,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,aC)),ai(10,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,cC)),ai(12,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(13,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),qs(14,0,null,null,38,"div",[["id","regionDetails"]],null,null,null,null,null)),(e()(),qs(15,0,null,null,2,"div",[["id","svgBox"]],null,null,null,null,null)),(e()(),qs(16,0,null,null,1,":svg:svg",[["class","regionSVG"],["draggable","false"],["ondragstart","return false;"]],[[1,"height",0],[1,"width",0],[1,"viewBox",0]],null,null,null,null)),(e()(),qs(17,0,null,null,0,":svg:path",[],[[1,"fill",0],[1,"d",0],[1,"stroke",0],[1,"stroke-width",0]],null,null,null,null)),(e()(),qs(18,0,null,null,12,"div",[],null,null,null,null,null)),(e()(),qs(19,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(20,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(21,114688,null,0,$p,[],{name:[0,"name"]},null),(e()(),cr(22,null,[" ",""])),(e()(),qs(23,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(24,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(25,114688,null,0,$p,[],{name:[0,"name"]},null),(e()(),cr(26,null,[" ",""])),(e()(),qs(27,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(28,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(29,114688,null,0,$p,[],{name:[0,"name"]},null),(e()(),cr(30,null,[" ",""])),(e()(),Qs(16777216,null,null,1,null,hC)),ai(32,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,fC)),ai(34,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,SC)),ai(36,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,bC)),ai(38,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,TC)),ai(40,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,CC)),ai(42,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,IC)),ai(44,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,AC)),ai(46,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,_C)),ai(48,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,PC)),ai(50,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,xC)),ai(52,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,QC)),ai(54,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,5,0,l.getSelectedCountry().id===l.countries.PLAYER),e(n,7,0,l.isDev()),e(n,10,0,l.getSelectedCountry().id!==l.countries.PLAYER&&l.getSelectedCountry().id!==l.countries.NEUTRAL),e(n,12,0,l.getSelectedCountry().id===l.countries.PLAYER||l.getSelectedCountry().id===l.countries.NEUTRAL),e(n,21,0,"land"),e(n,25,0,"forest"),e(n,29,0,"mountains"),e(n,32,0,l.getSelectedRegion().spy>0&&l.getSelectedCountry().id!==l.countries.PLAYER),e(n,34,0,l.getSelectedRegion().spy>0&&l.getSelectedCountry().id!==l.countries.PLAYER),e(n,36,0,l.getSelectedCountry().id===l.countries.PLAYER),e(n,38,0,l.getSelectedCountry().id===l.countries.PLAYER),e(n,40,0,l.getSelectedRegion().spy>0&&l.getSelectedCountry().id!==l.countries.PLAYER),e(n,42,0,0===l.getSelectedRegion().spy&&l.getSelectedCountry().id!==l.countries.PLAYER&&l.getSelectedCountry().id!==l.countries.NEUTRAL),e(n,44,0,0===l.getSelectedRegion().spy&&l.getSelectedCountry().id!==l.countries.PLAYER&&l.getSelectedCountry().id!==l.countries.NEUTRAL),e(n,46,0,l.getSelectedRegion().spy>0||l.getSelectedRegion().watched||l.getSelectedCountry().id===l.countries.PLAYER||l.getSelectedCountry().id===l.countries.NEUTRAL),e(n,48,0,l.getSelectedRegion().spy>0||l.getSelectedRegion().watched||l.getSelectedCountry().id===l.countries.PLAYER||l.getSelectedCountry().id===l.countries.NEUTRAL),e(n,50,0,l.getSelectedRegion().spy>0||l.getSelectedRegion().watched||l.getSelectedCountry().id===l.countries.PLAYER||l.getSelectedCountry().id===l.countries.NEUTRAL),e(n,52,0,0===l.getSelectedRegion().spy&&!l.getSelectedRegion().watched&&l.getSelectedCountry().id!==l.countries.PLAYER&&l.getSelectedCountry().id!==l.countries.NEUTRAL),e(n,54,0,!l.selecting)}),(function(e,n){var l=n.component;e(n,3,0,l.getSelectedCountry().name),e(n,16,0,"72px","72px",l.prepareViewbox(l.getSelectedRegion().center)),e(n,17,0,l.getSelectedCountry().colour,l.getSelectedRegion().path,"black","2"),e(n,22,0,l.getSelectedRegion().land),e(n,26,0,l.getSelectedRegion().forest),e(n,30,0,l.getSelectedRegion().mountains)}))}function XC(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(1,null,["(",")"]))],null,(function(e,n){e(n,1,0,n.component.roundEffectiveSpeed())}))}function ZC(e){return gr(0,[(e()(),qs(0,0,null,null,5,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(2,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(3,null,[" "," "])),(e()(),Qs(16777216,null,null,1,null,XC)),ai(5,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,"speed","army"),e(n,5,0,l.getSelectedMission().getArmySpeed()!==l.getSelectedMission().getArmyEffectiveSpeed())}),(function(e,n){e(n,3,0,n.component.getSelectedMission().getArmySpeed())}))}function JC(e){return gr(0,[(e()(),qs(0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(2,114688,null,0,$p,[],{name:[0,"name"]},null),(e()(),cr(3,null,[" ",""]))],(function(e,n){e(n,2,0,"cargo")}),(function(e,n){e(n,3,0,n.component.getMissionCargo())}))}function eI(e){return gr(0,[(e()(),qs(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.cancel()&&t),t}),null,null)),(e()(),cr(-1,null,["cancel mission"]))],null,null)}function nI(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(1,null,["",": ",""]))],null,(function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit.troop),n.context.$implicit.size)}))}function lI(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(1,null,[""," fish"]))],null,(function(e,n){e(n,1,0,n.component.getSelectedMission().data)}))}function tI(e){return gr(0,[(e()(),qs(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(2,null,[""," meat"])),(e()(),qs(3,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(4,null,[""," fur"]))],null,(function(e,n){var l=n.component;e(n,2,0,l.getSelectedMission().data.meat),e(n,4,0,l.getSelectedMission().data.fur)}))}function iI(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(1,null,[""," coins"]))],null,(function(e,n){e(n,1,0,n.component.getSelectedMission().data)}))}function sI(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(1,null,[""," coins"]))],null,(function(e,n){e(n,1,0,n.component.getSelectedMission().data)}))}function rI(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(1,null,[""," cartography data "]))],null,(function(e,n){e(n,1,0,n.component.getSelectedMission().data)}))}function uI(e){return gr(0,[(e()(),qs(0,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,lI)),ai(2,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,tI)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,iI)),ai(6,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,sI)),ai(8,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,rI)),ai(10,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.getSelectedMission().mission===l.missions.FISHING),e(n,4,0,l.getSelectedMission().mission===l.missions.HUNTING),e(n,6,0,l.getSelectedMission().mission===l.missions.TREASURE),e(n,8,0,l.getSelectedMission().mission===l.missions.SEA_BATTLE),e(n,10,0,l.getSelectedMission().mission===l.missions.CARTOGRAPHY)}),null)}function oI(e){return gr(0,[(e()(),qs(0,0,null,null,21,"div",[["id","missionDetails"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"div",[["id","missionTitle"]],null,null,null,null,null)),(e()(),cr(2,null,["",""])),(e()(),qs(3,0,null,null,18,"div",[["id","missionBody"]],null,null,null,null,null)),(e()(),qs(4,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),qs(5,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(e()(),qs(6,0,null,null,10,"div",[["id","missionStats"]],null,null,null,null,null)),(e()(),qs(7,0,null,null,3,"div",[["id","missionStatus"]],null,null,null,null,null)),(e()(),cr(8,null,[" ",": "])),(e()(),qs(9,0,null,null,1,"app-progress-bar",[],null,null,null,AT,CT)),ai(10,638976,null,0,TT,[uf],{progress:[0,"progress"]},null),(e()(),Qs(16777216,null,null,1,null,ZC)),ai(12,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,JC)),ai(14,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,eI)),ai(16,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(17,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,nI)),ai(19,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),Qs(16777216,null,null,1,null,uI)),ai(21,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,10,0,l.getSelectedMission().getDisplayProgress()),e(n,12,0,l.getSelectedMission().mission!==l.missions.BUILD),e(n,14,0,l.getSelectedMission().getMissionType()===l.missionType.SEA),e(n,16,0,l.canCancel()),e(n,19,0,l.getSelectedMission().army.units),e(n,21,0,null!==l.getSelectedMission().data)}),(function(e,n){var l=n.component;e(n,2,0,l.getMissionName()),e(n,5,0,yt(1,"",l.getSelectedMission().getIconPath(),"")),e(n,8,0,l.getSelectedMission().getStatus())}))}function aI(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.fishing()&&t),t}),null,null)),(e()(),cr(-1,null,["Start fishing "]))],null,null)}function cI(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.hunting()&&t),t}),null,null)),(e()(),cr(-1,null,["Start hunting "]))],null,null)}function hI(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.treasure()&&t),t}),null,null)),(e()(),cr(-1,null,["Look for treasure "]))],null,null)}function dI(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.cartography()&&t),t}),null,null)),(e()(),cr(-1,null,["Gather cartography data "]))],null,null)}function gI(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.seaBattle()&&t),t}),null,null)),(e()(),cr(-1,null,["Attack pirates "]))],null,null)}function pI(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.seaBattle()&&t),t}),null,null)),(e()(),cr(-1,null,["Attack pirates base "]))],null,null)}function mI(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[["id","sizeDiv"]],null,null,null,null,null)),(e()(),cr(1,null,[" size: "," "]))],null,(function(e,n){e(n,1,0,n.component.getSelectedSeaEvent().amount)}))}function fI(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(1,null,[""," : ",""]))],null,(function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit.troop),n.context.$implicit.size)}))}function SI(e){return gr(0,[(e()(),qs(0,0,null,null,2,"div",[["id","seaEventRight"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,fI)),ai(2,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,2,0,n.component.getSelectedSeaEvent().data.units)}),null)}function EI(e){return gr(0,[(e()(),qs(0,0,null,null,22,"div",[["id","seaEventDetails"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"div",[["id","seaEventTitle"]],null,null,null,null,null)),(e()(),cr(2,null,["",""])),(e()(),qs(3,0,null,null,19,"div",[["id","seaEventBody"]],null,null,null,null,null)),(e()(),qs(4,0,null,null,14,"div",[["id","seaEventLeft"]],null,null,null,null,null)),(e()(),qs(5,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),qs(6,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,aI)),ai(8,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,cI)),ai(10,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,hI)),ai(12,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,dI)),ai(14,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,gI)),ai(16,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,pI)),ai(18,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,mI)),ai(20,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,SI)),ai(22,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,8,0,l.isSeaEnabled()&&l.hasSeaPath(0,l.getSelectedSeaEvent().parentId)&&l.getSelectedSeaEvent().type===l.seaEvents.FISH),e(n,10,0,l.isSeaEnabled()&&l.hasSeaPath(0,l.getSelectedSeaEvent().parentId)&&l.getSelectedSeaEvent().type===l.seaEvents.SHARK),e(n,12,0,l.isSeaEnabled()&&l.hasSeaPath(0,l.getSelectedSeaEvent().parentId)&&l.getSelectedSeaEvent().type===l.seaEvents.TREASURE),e(n,14,0,l.isSeaCartographyEnabled()&&l.hasSeaPath(0,l.getSelectedSeaEvent().parentId)&&l.getSelectedSeaEvent().type===l.seaEvents.CARTOGRAPHY),e(n,16,0,l.isSeaEnabled()&&l.hasSeaPath(0,l.getSelectedSeaEvent().parentId)&&l.getSelectedSeaEvent().type===l.seaEvents.PIRATES),e(n,18,0,l.isSeaEnabled()&&l.hasSeaPath(0,l.getSelectedSeaEvent().parentId)&&l.getSelectedSeaEvent().type===l.seaEvents.PIRATES_BASE),e(n,20,0,l.getSelectedSeaEvent().type!==l.seaEvents.WHIRLPOOL),e(n,22,0,l.getSelectedSeaEvent().data)}),(function(e,n){var l=n.component;e(n,2,0,l.getSeaEventName()),e(n,6,0,yt(1,"",l.getSeaEventIconPath(l.getSelectedSeaEvent().type),""))}))}function vI(e){return gr(0,[(e()(),qs(0,0,null,null,0,":svg:path",[],[[1,"fill",0],[1,"d",0],[1,"stroke",0],[1,"stroke-width",0]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.select(l,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&t),t}),null,null))],null,(function(e,n){e(n,0,0,n.parent.parent.context.$implicit.colour,n.parent.context.$implicit.path,"black","2")}))}function RI(e){return gr(0,[(e()(),qs(0,0,null,null,2,":svg:g",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.select(l,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&t),t}),null,null)),(e()(),qs(1,0,null,null,0,":svg:path",[],[[1,"fill",0],[1,"d",0],[1,"stroke",0],[1,"stroke-width",0]],null,null,null,null)),(e()(),qs(2,0,null,null,0,":svg:path",[],[[1,"fill",0],[1,"d",0]],null,null,null,null))],null,(function(e,n){e(n,1,0,n.parent.parent.context.$implicit.colour,n.parent.context.$implicit.path,"black","2"),e(n,2,0,"url(#diagonalHatch)",n.parent.context.$implicit.path)}))}function OI(e){return gr(0,[(e()(),qs(0,0,null,null,2,":svg:g",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,0,":svg:circle",[],[[1,"r",0],[1,"cx",0],[1,"cy",0],[1,"fill",0]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.select(l,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&t),t}),null,null)),(e()(),qs(2,0,null,null,0,":svg:image",[],[[1,"height",0],[1,"width",0],[1,"x",0],[1,"y",0],[1,":xlink:href",0]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.select(l,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&t),t}),null,null))],null,(function(e,n){e(n,1,0,12,n.parent.context.$implicit.center.x,n.parent.context.$implicit.center.y+1,n.component.worldService.getCountry(n.parent.context.$implicit.capital).colour),e(n,2,0,20,20,n.parent.context.$implicit.center.x-10,n.parent.context.$implicit.center.y-10,"assets/world/capital.svg")}))}function bI(e){return gr(0,[(e()(),qs(0,0,null,null,2,":svg:g",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,0,":svg:circle",[],[[1,"r",0],[1,"cx",0],[1,"cy",0],[1,"fill",0]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.select(l,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&t),t}),null,null)),(e()(),qs(2,0,null,null,0,":svg:image",[],[[1,"height",0],[1,"width",0],[1,"x",0],[1,"y",0],[1,":xlink:href",0]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.select(l,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&t),t}),null,null))],null,(function(e,n){e(n,1,0,6,n.parent.context.$implicit.center.x,n.parent.context.$implicit.center.y,n.parent.parent.context.$implicit.colour),e(n,2,0,10,10,n.parent.context.$implicit.center.x-5,n.parent.context.$implicit.center.y-5,"assets/army/recruit.svg")}))}function TI(e){return gr(0,[(e()(),qs(0,0,null,null,2,":svg:g",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,0,":svg:circle",[],[[1,"r",0],[1,"cx",0],[1,"cy",0],[1,"fill",0]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.select(l,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&t),t}),null,null)),(e()(),qs(2,0,null,null,0,":svg:image",[],[[1,"height",0],[1,"width",0],[1,"x",0],[1,"y",0],[1,":xlink:href",0]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.select(l,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&t),t}),null,null))],null,(function(e,n){e(n,1,0,6,n.parent.context.$implicit.center.x,n.parent.context.$implicit.center.y,n.parent.parent.context.$implicit.colour),e(n,2,0,10,10,n.parent.context.$implicit.center.x-5,n.parent.context.$implicit.center.y-5,"assets/army/mission/spy.svg")}))}function CI(e){return gr(0,[(e()(),qs(0,0,null,null,2,":svg:g",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,0,":svg:circle",[],[[1,"r",0],[1,"cx",0],[1,"cy",0],[1,"fill",0]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.select(l,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&t),t}),null,null)),(e()(),qs(2,0,null,null,0,":svg:image",[],[[1,"height",0],[1,"width",0],[1,"x",0],[1,"y",0],[1,":xlink:href",0]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.select(l,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&t),t}),null,null))],null,(function(e,n){e(n,1,0,6,n.parent.context.$implicit.center.x,n.parent.context.$implicit.center.y,n.parent.parent.context.$implicit.colour),e(n,2,0,10,10,n.parent.context.$implicit.center.x-5,n.parent.context.$implicit.center.y-5,"assets/world/roads.svg")}))}function II(e){return gr(0,[(e()(),qs(0,0,null,null,2,":svg:g",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,0,":svg:circle",[],[[1,"r",0],[1,"cx",0],[1,"cy",0],[1,"fill",0]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.select(l,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&t),t}),null,null)),(e()(),qs(2,0,null,null,0,":svg:image",[],[[1,"height",0],[1,"width",0],[1,"x",0],[1,"y",0],[1,":xlink:href",0]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.select(l,e.parent.parent.context.$implicit,e.parent.context.$implicit)&&t),t}),null,null))],null,(function(e,n){e(n,1,0,6,n.parent.context.$implicit.center.x,n.parent.context.$implicit.center.y,n.parent.parent.context.$implicit.colour),e(n,2,0,10,10,n.parent.context.$implicit.center.x-5,n.parent.context.$implicit.center.y-5,"assets/world/watchtower.svg")}))}function yI(e){return gr(0,[(e()(),qs(0,0,null,null,0,":svg:image",[["draggable","false"],["ondragstart","return false;"]],[[1,"height",0],[1,"width",0],[1,"x",0],[1,"y",0],[1,":xlink:href",0]],null,null,null,null))],null,(function(e,n){var l=n.component;e(n,0,0,20,20,l.getHarbour(n.parent.context.$implicit.id).CENTER.x-10,l.getHarbour(n.parent.context.$implicit.id).CENTER.y-10,"assets/sea/port.svg")}))}function AI(e){return gr(0,[(e()(),qs(0,0,null,null,16,":svg:g",[["class","region"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,vI)),ai(2,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,RI)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,OI)),ai(6,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,bI)),ai(8,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,TI)),ai(10,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,CI)),ai(12,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,II)),ai(14,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,yI)),ai(16,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,!l.getSelectedRegion()||n.context.$implicit.id!==l.getSelectedRegion().id),e(n,4,0,l.getSelectedRegion()&&n.context.$implicit.id===l.getSelectedRegion().id),e(n,6,0,0===l.radio&&void 0!==n.context.$implicit.capital);var t=1===l.radio&&n.context.$implicit.army.hasAny()&&(n.parent.context.$implicit.id===l.countries.PLAYER||n.parent.context.$implicit.id===l.countries.NEUTRAL||n.context.$implicit.spy>0);e(n,8,0,t),e(n,10,0,2===l.radio&&n.context.$implicit.spy>0),e(n,12,0,3===l.radio&&n.context.$implicit.roads&&(n.parent.context.$implicit.id===l.countries.PLAYER||n.parent.context.$implicit.id===l.countries.NEUTRAL||n.context.$implicit.spy>0)),e(n,14,0,4===l.radio&&n.context.$implicit.watchtower&&(n.parent.context.$implicit.id===l.countries.PLAYER||n.parent.context.$implicit.id===l.countries.NEUTRAL||n.context.$implicit.spy>0)),e(n,16,0,l.showHarbours&&n.context.$implicit.harbour)}),null)}function NI(e){return gr(0,[(e()(),qs(0,0,null,null,2,":svg:g",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,AI)),ai(2,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,2,0,n.context.$implicit.regions)}),null)}function _I(e){return gr(0,[(e()(),qs(0,0,null,null,0,":svg:circle",[],[[1,"cx",0],[1,"cy",0],[1,"r",0],[1,"fill",0],[1,"opacity",0],[1,"stroke-width",0]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.selectArea(e.parent.context.$implicit.id)&&t),t}),null,null))],null,(function(e,n){e(n,0,0,n.parent.context.$implicit.center.x,n.parent.context.$implicit.center.y,n.parent.context.$implicit.r,"red",.1,"1")}))}function wI(e){return gr(0,[(e()(),qs(0,0,null,null,1,":svg:g",[["class","seaEvent"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.selectSeaEvent(e.context.$implicit)&&t),t}),null,null)),(e()(),qs(1,0,null,null,0,":svg:image",[["draggable","false"],["ondragstart","return false;"]],[[1,"height",0],[1,"width",0],[1,"x",0],[1,"y",0],[1,":xlink:href",0]],null,null,null,null))],null,(function(e,n){e(n,1,0,20,20,n.context.$implicit.center.x-10,n.context.$implicit.center.y-10,n.component.getSeaEventIconPath(n.context.$implicit.type))}))}function PI(e){return gr(0,[(e()(),qs(0,0,null,null,4,":svg:g",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,_I)),ai(2,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,wI)),ai(4,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,2,0,n.context.$implicit.events.length>0&&(n.context.$implicit.events[0].type===l.seaEvents.PIRATES||n.context.$implicit.events[0].type===l.seaEvents.PIRATES_BASE)),e(n,4,0,n.context.$implicit.events)}),null)}function xI(e){return gr(0,[(e()(),qs(0,0,null,null,1,":svg:g",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,0,":svg:line",[],[[1,"x1",0],[1,"y1",0],[1,"x2",0],[1,"y2",0],[1,"stroke",0],[1,"stroke-dasharray",0],[1,"stroke-width",0]],null,null,null,null))],null,(function(e,n){e(n,1,0,n.context.$implicit.origin.x,n.context.$implicit.origin.y,n.context.$implicit.target.x,n.context.$implicit.target.y,"black","5,5","1")}))}function kI(e){return gr(0,[(e()(),qs(0,0,null,null,2,":svg:g",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,xI)),ai(2,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,2,0,n.parent.context.$implicit.routePaths)}),null)}function MI(e){return gr(0,[(e()(),qs(0,0,null,null,2,":svg:g",[["class","mission"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,kI)),ai(2,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.getSelectedMission()&&l.getSelectedMission()===n.context.$implicit&&l.getSelectedMission().ownerCountry.id===l.countries.PLAYER)}),null)}function DI(e){return gr(0,[(e()(),qs(0,0,null,null,2,":svg:g",[["class","mission"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,0,":svg:circle",[],[[1,"r",0],[1,"cx",0],[1,"cy",0],[1,"fill",0],[1,"stroke",0],[1,"stroke-width",0]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.selectMission(e.parent.context.$implicit)&&t),t}),null,null)),(e()(),qs(2,0,null,null,0,":svg:image",[["draggable","false"],["ondragstart","return false;"]],[[1,"height",0],[1,"width",0],[1,"x",0],[1,"y",0],[1,":xlink:href",0]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.selectMission(e.parent.context.$implicit)&&t),t}),null,null))],null,(function(e,n){var l=n.parent.context.$implicit.getOrigin().x+(n.parent.context.$implicit.getTarget().x-n.parent.context.$implicit.getOrigin().x)*n.parent.context.$implicit.getProgressPercentage(),t=n.parent.context.$implicit.getOrigin().y+(n.parent.context.$implicit.getTarget().y-n.parent.context.$implicit.getOrigin().y)*n.parent.context.$implicit.getProgressPercentage();e(n,1,0,8,l,t,"lightgrey","black","1");var i=n.parent.context.$implicit.getOrigin().x+(n.parent.context.$implicit.getTarget().x-n.parent.context.$implicit.getOrigin().x)*n.parent.context.$implicit.getProgressPercentage()-6,s=n.parent.context.$implicit.getOrigin().y+(n.parent.context.$implicit.getTarget().y-n.parent.context.$implicit.getOrigin().y)*n.parent.context.$implicit.getProgressPercentage()-6,r=n.parent.context.$implicit.getIconPath();e(n,2,0,12,12,i,s,r)}))}function LI(e){return gr(0,[(e()(),qs(0,0,null,null,3,":svg:g",[["class","computerMission"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,0,":svg:circle",[],[[1,"r",0],[1,"cx",0],[1,"cy",0],[1,"fill",0],[1,"stroke",0],[1,"stroke-width",0]],null,null,null,null)),(e()(),qs(2,0,null,null,0,":svg:circle",[],[[1,"r",0],[1,"cx",0],[1,"cy",0],[1,"fill",0],[1,"fill-opacity",0],[1,"stroke",0],[1,"stroke-width",0]],null,null,null,null)),(e()(),qs(3,0,null,null,0,":svg:image",[["draggable","false"],["ondragstart","return false;"]],[[1,"height",0],[1,"width",0],[1,"x",0],[1,"y",0],[1,":xlink:href",0]],null,null,null,null))],null,(function(e,n){var l=n.parent.context.$implicit.getOrigin().x+(n.parent.context.$implicit.getTarget().x-n.parent.context.$implicit.getOrigin().x)*n.parent.context.$implicit.getProgressPercentage(),t=n.parent.context.$implicit.getOrigin().y+(n.parent.context.$implicit.getTarget().y-n.parent.context.$implicit.getOrigin().y)*n.parent.context.$implicit.getProgressPercentage();e(n,1,0,8,l,t,"white","black","1");var i=n.parent.context.$implicit.getOrigin().x+(n.parent.context.$implicit.getTarget().x-n.parent.context.$implicit.getOrigin().x)*n.parent.context.$implicit.getProgressPercentage(),s=n.parent.context.$implicit.getOrigin().y+(n.parent.context.$implicit.getTarget().y-n.parent.context.$implicit.getOrigin().y)*n.parent.context.$implicit.getProgressPercentage();e(n,2,0,8,i,s,n.parent.context.$implicit.ownerCountry.colour,.8,"black","1");var r=n.parent.context.$implicit.getOrigin().x+(n.parent.context.$implicit.getTarget().x-n.parent.context.$implicit.getOrigin().x)*n.parent.context.$implicit.getProgressPercentage()-6,u=n.parent.context.$implicit.getOrigin().y+(n.parent.context.$implicit.getTarget().y-n.parent.context.$implicit.getOrigin().y)*n.parent.context.$implicit.getProgressPercentage()-6,o=n.parent.context.$implicit.getIconPath();e(n,3,0,12,12,r,u,o)}))}function FI(e){return gr(0,[(e()(),qs(0,0,null,null,4,":svg:g",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,DI)),ai(2,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,LI)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,n.context.$implicit.ownerCountry.id===l.countries.PLAYER),e(n,4,0,n.context.$implicit.ownerCountry.id!==l.countries.PLAYER)}),null)}function UI(e){return gr(0,[nr(671088640,1,{svgRef:0}),(e()(),qs(1,0,null,null,92,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),cr(-1,null,["World Map"])),(e()(),qs(4,0,null,null,9,"div",[["id","details"]],null,null,null,null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(6,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(7,{selecting:0}),(e()(),Qs(16777216,null,null,1,null,qC)),ai(9,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,oI)),ai(11,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,EI)),ai(13,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(14,0,[[1,0],["svg",1]],null,79,"div",[["id","svg"]],null,null,null,null,null)),(e()(),qs(15,0,null,null,0,"img",[["id","target"],["src","assets/world/target.svg"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.resetView()&&t),t}),null,null)),(e()(),qs(16,0,null,null,0,"img",[["id","arrowUp"],["src","assets/world/arrow_up.svg"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.moveDown()&&t),t}),null,null)),(e()(),qs(17,0,null,null,0,"img",[["id","arrowDown"],["src","assets/world/arrow_down.svg"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.moveUp()&&t),t}),null,null)),(e()(),qs(18,0,null,null,0,"img",[["id","arrowRight"],["src","assets/world/arrow_right.svg"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.moveLeft()&&t),t}),null,null)),(e()(),qs(19,0,null,null,0,"img",[["id","arrowLeft"],["src","assets/world/arrow_left.svg"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.moveRight()&&t),t}),null,null)),(e()(),qs(20,0,null,null,0,"img",[["id","plus"],["src","assets/world/plus.svg"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.zoomIn()&&t),t}),null,null)),(e()(),qs(21,0,null,null,0,"img",[["id","minus"],["src","assets/world/minus.svg"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.zoomOut()&&t),t}),null,null)),(e()(),qs(22,0,null,null,28,"div",[["id","options2"]],null,null,null,null,null)),(e()(),qs(23,0,null,null,1,"label",[["for","showRoads"]],null,null,null,null,null)),(e()(),cr(-1,null,["show roads"])),(e()(),qs(25,0,null,null,6,"input",[["id","showRoads"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,26)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,26).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,26)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,26)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,27).onChange()&&t),"blur"===n&&(t=!1!==qt(e,27).onTouched()&&t),"change"===n&&(t=!1!==i.updateMapDisplayOption()&&t),"ngModelChange"===n&&(t=!1!==(i.radio=l)&&t),t}),null,null)),ai(26,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(27,212992,null,0,mm,[gl,ol,pm,kn],{value:[0,"value"]},null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,mm]),ai(29,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(31,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(32,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(33,0,null,null,1,"label",[["for","showWatchtowers"]],null,null,null,null,null)),(e()(),cr(-1,null,["show watchtowers"])),(e()(),qs(35,0,null,null,6,"input",[["id","showWatchtowers"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,36)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,36).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,36)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,36)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,37).onChange()&&t),"blur"===n&&(t=!1!==qt(e,37).onTouched()&&t),"change"===n&&(t=!1!==i.updateMapDisplayOption()&&t),"ngModelChange"===n&&(t=!1!==(i.radio=l)&&t),t}),null,null)),ai(36,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(37,212992,null,0,mm,[gl,ol,pm,kn],{value:[0,"value"]},null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,mm]),ai(39,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(41,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(42,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(43,0,null,null,1,"label",[["for","showHarbours"]],null,null,null,null,null)),(e()(),cr(-1,null,["show harbours"])),(e()(),qs(45,0,null,null,5,"input",[["id","showHarbours"],["type","checkbox"]],[[8,"checked",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,46).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,46).onTouched()&&t),"change"===n&&(t=!1!==i.updateMapDisplayOption()&&t),"ngModelChange"===n&&(t=!1!==(i.showHarbours=l)&&t),t}),null,null)),ai(46,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(48,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(50,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(51,0,null,null,29,"div",[["id","options"]],null,null,null,null,null)),(e()(),qs(52,0,null,null,1,"label",[["for","showCapitals"]],null,null,null,null,null)),(e()(),cr(-1,null,["show capitals"])),(e()(),qs(54,0,null,null,6,"input",[["id","showCapitals"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,55)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,55).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,55)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,55)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,56).onChange()&&t),"blur"===n&&(t=!1!==qt(e,56).onTouched()&&t),"change"===n&&(t=!1!==i.updateMapDisplayOption()&&t),"ngModelChange"===n&&(t=!1!==(i.radio=l)&&t),t}),null,null)),ai(55,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(56,212992,null,0,mm,[gl,ol,pm,kn],{value:[0,"value"]},null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,mm]),ai(58,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(60,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(61,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(62,0,null,null,1,"label",[["for","showArmies"]],null,null,null,null,null)),(e()(),cr(-1,null,["show armies"])),(e()(),qs(64,0,null,null,6,"input",[["id","showArmies"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,65)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,65).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,65)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,65)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,66).onChange()&&t),"blur"===n&&(t=!1!==qt(e,66).onTouched()&&t),"change"===n&&(t=!1!==i.updateMapDisplayOption()&&t),"ngModelChange"===n&&(t=!1!==(i.radio=l)&&t),t}),null,null)),ai(65,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(66,212992,null,0,mm,[gl,ol,pm,kn],{value:[0,"value"]},null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,mm]),ai(68,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(70,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(71,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(72,0,null,null,1,"label",[["for","showSpies"]],null,null,null,null,null)),(e()(),cr(-1,null,["show spies"])),(e()(),qs(74,0,null,null,6,"input",[["id","showSpies"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,75)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,75).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,75)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,75)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,76).onChange()&&t),"blur"===n&&(t=!1!==qt(e,76).onTouched()&&t),"change"===n&&(t=!1!==i.updateMapDisplayOption()&&t),"ngModelChange"===n&&(t=!1!==(i.radio=l)&&t),t}),null,null)),ai(75,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(76,212992,null,0,mm,[gl,ol,pm,kn],{value:[0,"value"]},null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,mm]),ai(78,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(80,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(81,0,null,null,12,":svg:svg",[["id","mainMap"],["xmlns","http://www.w3.org/2000/svg"]],[[1,"viewBox",0]],null,null,null,null)),(e()(),qs(82,0,null,null,2,":svg:defs",[],null,null,null,null,null)),(e()(),qs(83,0,null,null,1,":svg:pattern",[["height","4"],["id","diagonalHatch"],["patternUnits","userSpaceOnUse"],["width","4"]],null,null,null,null,null)),(e()(),qs(84,0,null,null,0,":svg:path",[["d","M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2"],["style","stroke:black; stroke-width:0.5"]],null,null,null,null,null)),(e()(),qs(85,0,null,null,8,":svg:g",[],[[1,"transform",0]],null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,NI)),ai(87,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),Qs(16777216,null,null,1,null,PI)),ai(89,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),Qs(16777216,null,null,1,null,MI)),ai(91,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),Qs(16777216,null,null,1,null,FI)),ai(93,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component,t=e(n,7,0,l.selecting);e(n,6,0,t),e(n,9,0,l.getSelectedCountry()&&l.getSelectedRegion()),e(n,11,0,l.getSelectedMission()),e(n,13,0,l.getSelectedSeaEvent()),e(n,27,0,3),e(n,29,0,l.radio),e(n,37,0,4),e(n,39,0,l.radio),e(n,48,0,l.showHarbours),e(n,56,0,0),e(n,58,0,l.radio),e(n,66,0,1),e(n,68,0,l.radio),e(n,76,0,2),e(n,78,0,l.radio),e(n,87,0,l.getCountries()),e(n,89,0,l.getSeaAreas()),e(n,91,0,l.getMissions()),e(n,93,0,l.getMissions())}),(function(e,n){var l=n.component;e(n,25,0,qt(n,31).ngClassUntouched,qt(n,31).ngClassTouched,qt(n,31).ngClassPristine,qt(n,31).ngClassDirty,qt(n,31).ngClassValid,qt(n,31).ngClassInvalid,qt(n,31).ngClassPending),e(n,35,0,qt(n,41).ngClassUntouched,qt(n,41).ngClassTouched,qt(n,41).ngClassPristine,qt(n,41).ngClassDirty,qt(n,41).ngClassValid,qt(n,41).ngClassInvalid,qt(n,41).ngClassPending),e(n,45,0,l.getShowHarbours(),qt(n,50).ngClassUntouched,qt(n,50).ngClassTouched,qt(n,50).ngClassPristine,qt(n,50).ngClassDirty,qt(n,50).ngClassValid,qt(n,50).ngClassInvalid,qt(n,50).ngClassPending),e(n,54,0,qt(n,60).ngClassUntouched,qt(n,60).ngClassTouched,qt(n,60).ngClassPristine,qt(n,60).ngClassDirty,qt(n,60).ngClassValid,qt(n,60).ngClassInvalid,qt(n,60).ngClassPending),e(n,64,0,qt(n,70).ngClassUntouched,qt(n,70).ngClassTouched,qt(n,70).ngClassPristine,qt(n,70).ngClassDirty,qt(n,70).ngClassValid,qt(n,70).ngClassInvalid,qt(n,70).ngClassPending),e(n,74,0,qt(n,80).ngClassUntouched,qt(n,80).ngClassTouched,qt(n,80).ngClassPristine,qt(n,80).ngClassDirty,qt(n,80).ngClassValid,qt(n,80).ngClassInvalid,qt(n,80).ngClassPending),e(n,81,0,(0-674*l.getZoom())/2+" "+(0-674*l.getZoom())/2+" "+674*l.getZoom()+" "+464*l.getZoom()),e(n,85,0,"translate("+l.getX()+" "+l.getY()+")")}))}function HI(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-world",[],null,[[null,"keydown"],[null,"mousedown"],[null,"mousemove"],[null,"mouseup"],[null,"wheel"]],(function(e,n,l){var t=!0;return"keydown"===n&&(t=!1!==qt(e,1).handleKeyDown(l)&&t),"mousedown"===n&&(t=!1!==qt(e,1).dragStart(l)&&t),"mousemove"===n&&(t=!1!==qt(e,1).mousemove(l)&&t),"mouseup"===n&&(t=!1!==qt(e,1).dragEnd(l)&&t),"wheel"===n&&(t=!1!==qt(e,1).onScroll(l)&&t),t}),UI,rC)),ai(1,114688,null,0,sC,[sf,tC,Sf,yf,pf],null,null)],(function(e,n){e(n,1,0)}),null)}var GI=Ht("app-world",sC,HI,{selecting:"selecting"},{regionSelected:"regionSelected"},[]);class BI{constructor(e,n,l,t,i,s){this.navyService=e,this.worldService=n,this.armyService=l,this.modalService=t,this.gameService=i,this.router=s,this.troops=Pu,this.dismiss=!1}ngOnInit(){}getHarbourSpace(){return this.navyService.getHarbourSpace()}getMaxHarbourSpace(){return this.navyService.getMaxHarbourSpace()}getAvailableShips(e){return this.navyService.getAvailableShips(e)}getTotalShips(e){return this.navyService.getTotalShips(e)}getMissions(){return this.worldService.getPlayerSeaMissions()}selectMission(e){this.worldService.setSelectedMission(e),this.router.navigate(["/world"])}getTroopName(e){return Uu.prepareTroopName(e)}getCartographyData(){return this.navyService.getCartographyData()}getNavyPay(){return this.navyService.calculateNavyPay()}getPaydayCounter(){return this.navyService.getPaydayCounter()}startExpedition(){this.modalService.open(ju.MISSION),this.modalService.setMissionData(new iC(this.worldService.getDefaultOriginRegion(),this.worldService.getDefaultOriginRegionCountry().colour,null,null,null,null,Au.EXPEDITION))}isCartographerResearched(){return this.gameService.isEnabled(Iu.CARTOGRAPHER)}getShipsTypes(){return[Pu.BOAT,Pu.BRIGANTINE,Pu.GALLEON]}getShipIconPath(e){return"assets/sea/"+Uu.prepareTroopName(e).toLowerCase()+".svg"}getShipName(e){return Uu.prepareTroopName(e)}getShipStrength(e){return No.getTroop(e).STRENGTH}getShipDefense(e){return No.getTroop(e).DEFENSE}getShipSpeed(e){return No.getTroop(e).SPEED}getShipCargo(e){return No.getTroop(e).CARGO}getShipPay(e){return No.getTroop(e).PAY}changeDismiss(e){this.dismiss=e}tryToDismiss(e){this.dismiss&&this.navyService.dismiss(e,1)}}var WI=Jl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:.7%;height:100%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#categories[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;border:1px solid #000;height:91.5%;text-align:center}.category[_ngcontent-%COMP%]{text-align:center;-webkit-box-flex:0;flex:0 0 33%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;border:1px solid #000;-webkit-box-align:center;align-items:center}.title[_ngcontent-%COMP%]{padding:2px;width:100%;font-weight:bolder;font-size:.9em;margin-bottom:5px;display:block;border-bottom:1px solid #000}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}#missionsScroll[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;width:100%;overflow-y:auto;-webkit-box-align:center;align-items:center}.mission[_ngcontent-%COMP%]{padding:4px;border:1px solid #000;width:80%;cursor:pointer;margin:3px}.tooltipTitle[_ngcontent-%COMP%]{font-weight:700;padding:0 20px}#numbers[_ngcontent-%COMP%]{margin-top:-6px;padding:0;margin-bottom:5px}.number[_ngcontent-%COMP%]{border:1px solid #000;padding:2px 4px;background-color:var(--passive-colour);font-size:.75em;cursor:pointer}.active[_ngcontent-%COMP%], .number[_ngcontent-%COMP%]:hover{background-color:var(--active-colour)}.pointer[_ngcontent-%COMP%]{cursor:pointer}.marginTop[_ngcontent-%COMP%]{margin-top:30px}"]],data:{}});function VI(e){return gr(0,[(e()(),qs(0,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(2,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),cr(3,null,[" "," \xa0\xa0\xa0 "]))],(function(e,n){e(n,2,0,"sextant","sea","cartography data")}),(function(e,n){e(n,3,0,n.component.getCartographyData())}))}function zI(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[["class","number"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.changeDismiss(!0)&&t),t}),null,null)),(e()(),cr(-1,null,["decommission"]))],null,null)}function YI(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[["class","number active"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.changeDismiss(!1)&&t),t}),null,null)),(e()(),cr(-1,null,["decommission"]))],null,null)}function $I(e){return gr(0,[(e()(),qs(0,0,null,null,33,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,32,"div",[["class","icon tooltip"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,4,"img",[["appTooltip",""]],[[8,"src",4]],[[null,"click"],[null,"mousemove"]],(function(e,n,l){var t=!0,i=e.component;return"mousemove"===n&&(t=!1!==qt(e,6).onmousemove(l)&&t),"click"===n&&(t=!1!==i.tryToDismiss(e.context.$implicit)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(4,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(5,{pointer:0}),ai(6,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),cr(7,null,[" "," /"," "])),(e()(),qs(8,0,null,null,25,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),qs(9,0,null,null,1,"div",[["class","tooltipTitle"]],null,null,null,null,null)),(e()(),cr(10,null,["",""])),(e()(),qs(11,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),qs(12,0,null,null,1,"div",[["class","statsTitle"]],null,null,null,null,null)),(e()(),cr(-1,null,["Stats:"])),(e()(),qs(14,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(15,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(16,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(17,null,[": ",""])),(e()(),qs(18,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(19,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(20,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(21,null,[": ",""])),(e()(),qs(22,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(23,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(24,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(25,null,[": ",""])),(e()(),qs(26,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(27,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(28,114688,null,0,$p,[],{name:[0,"name"]},null),(e()(),cr(29,null,[": ",""])),(e()(),qs(30,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(31,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(32,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(33,null,[": ",""]))],(function(e,n){var l=e(n,5,0,n.component.dismiss);e(n,4,0,l),e(n,6,0,"ship-"+n.context.$implicit),e(n,16,0,"attack","army"),e(n,20,0,"defense","army"),e(n,24,0,"speed","army"),e(n,28,0,"cargo"),e(n,32,0,"coins","resources")}),(function(e,n){var l=n.component;e(n,2,0,yt(1,"",l.getShipIconPath(n.context.$implicit),"")),e(n,7,0,l.getAvailableShips(n.context.$implicit),l.getTotalShips(n.context.$implicit)),e(n,8,0,yt(1,"ship-",n.context.$implicit,"")),e(n,10,0,l.getShipName(n.context.$implicit)),e(n,17,0,l.getShipStrength(n.context.$implicit)),e(n,21,0,l.getShipDefense(n.context.$implicit)),e(n,25,0,l.getShipSpeed(n.context.$implicit)),e(n,29,0,l.getShipCargo(n.context.$implicit)),e(n,33,0,l.getShipPay(n.context.$implicit))}))}function KI(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(1,null,[" ",": "," "]))],null,(function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit.troop),n.context.$implicit.size)}))}function jI(e){return gr(0,[(e()(),qs(0,0,null,null,9,"div",[["appTooltip",""],["class","mission tooltip"]],null,[[null,"click"],[null,"mousemove"]],(function(e,n,l){var t=!0,i=e.component;return"mousemove"===n&&(t=!1!==qt(e,1).onmousemove(l)&&t),"click"===n&&(t=!1!==i.selectMission(e.context.$implicit)&&t),t}),null,null)),ai(1,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),cr(2,null,[" "," "])),(e()(),qs(3,0,null,null,6,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),cr(4,null,[" "," "])),(e()(),qs(5,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),cr(6,null,[" "," : ","% "])),ur(7,2),(e()(),Qs(16777216,null,null,1,null,KI)),ai(9,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,1,0,"mission-"+n.context.$implicit.id),e(n,9,0,n.context.$implicit.army.units)}),(function(e,n){var l=n.context.$implicit.getMissionName();e(n,2,0,l),e(n,3,0,yt(1,"mission-",n.context.$implicit.id,""));var t=n.context.$implicit.getMissionName();e(n,4,0,t);var i=n.context.$implicit.getStatus(),s=ql(n,6,1,e(n,7,0,qt(n.parent,0),n.context.$implicit.getDisplayProgress(),"0.0-0"));e(n,6,0,i,s)}))}function QI(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.startExpedition()&&t),t}),null,null)),(e()(),cr(-1,null,["EXPEDITION"]))],null,null)}function qI(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[["class","title marginTop"]],null,null,null,null,null)),(e()(),cr(-1,null,["Discovered land:"]))],null,null)}function XI(e){return gr(0,[ci(0,Pa,[Ki]),(e()(),qs(1,0,null,null,47,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),cr(-1,null,["Navy"])),(e()(),qs(4,0,null,null,8,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(5,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(6,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),cr(7,null,[" ","/"," \xa0\xa0 "])),(e()(),Qs(16777216,null,null,1,null,VI)),ai(9,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(10,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(11,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),cr(12,null,["\xa0"," in "," days "])),(e()(),qs(13,0,null,null,35,"div",[["id","categories"]],null,null,null,null,null)),(e()(),qs(14,0,null,null,9,"div",[["class","category"]],null,null,null,null,null)),(e()(),qs(15,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),cr(-1,null,["NAVY"])),(e()(),qs(17,0,null,null,4,"div",[["id","numbers"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,zI)),ai(19,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,YI)),ai(21,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,$I)),ai(23,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(24,0,null,null,5,"div",[["class","category"]],null,null,null,null,null)),(e()(),qs(25,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),cr(-1,null,["MISSIONS IN PROGRESS"])),(e()(),qs(27,0,null,null,2,"div",[["id","missionsScroll"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,jI)),ai(29,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(30,0,null,null,18,"div",[["class","category"]],null,null,null,null,null)),(e()(),qs(31,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),cr(-1,null,["OTHER"])),(e()(),Qs(16777216,null,null,1,null,QI)),ai(34,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,qI)),ai(36,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(37,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),qs(38,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(39,114688,null,0,$p,[],{name:[0,"name"]},null),(e()(),cr(40,null,["",""])),(e()(),qs(41,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),qs(42,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(43,114688,null,0,$p,[],{name:[0,"name"]},null),(e()(),cr(44,null,["",""])),(e()(),qs(45,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),qs(46,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(47,114688,null,0,$p,[],{name:[0,"name"]},null),(e()(),cr(48,null,["",""]))],(function(e,n){var l=n.component;e(n,6,0,"port","sea","Ships space"),e(n,9,0,l.isCartographerResearched()),e(n,11,0,"coins","resources","Navy upkeep (collected every 30 days)"),e(n,19,0,!l.dismiss),e(n,21,0,l.dismiss),e(n,23,0,l.getShipsTypes()),e(n,29,0,l.getMissions()),e(n,34,0,l.isCartographerResearched()),e(n,36,0,l.worldService.getTotalDiscovered()>0),e(n,39,0,"land"),e(n,43,0,"forest"),e(n,47,0,"mountains")}),(function(e,n){var l=n.component;e(n,7,0,l.getHarbourSpace(),l.getMaxHarbourSpace()),e(n,12,0,l.getNavyPay(),l.getPaydayCounter()+1),e(n,40,0,l.worldService.getDiscoveredLand()),e(n,44,0,l.worldService.getDiscoveredForest()),e(n,48,0,l.worldService.getDiscoveredMountains())}))}function ZI(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-navy",[],null,null,null,XI,WI)),ai(1,114688,null,0,BI,[lC,tC,lb,pf,Sf,up],null,null)],(function(e,n){e(n,1,0)}),null)}var JI=Ht("app-navy",BI,ZI,{},{},[]);let ey=(()=>{class e{constructor(e,n,l){this.servicesService=e,this.resourcesService=n,this.gameService=l,this.heritagePoints=0,this.spentHeritagePoints=0,this.xp=0,e.addService(Wu.HERITAGE,this)}getName(){return"HeritageService"}load(e){this.heritagePoints=void 0!==e.heritagePoints?e.heritagePoints:0,this.spentHeritagePoints=void 0!==e.spentHeritagePoints?e.spentHeritagePoints:0,this.xp=void 0!==e.xp?e.xp:0,this.heritagePoints>0&&this.gameService.enable(Iu.HERITAGE)}reset(e,n){e&&(this.heritagePoints=0,this.xp=0),this.heritagePoints>0&&this.gameService.enable(Iu.HERITAGE),this.spentHeritagePoints=0}save(){return{heritagePoints:this.heritagePoints,spentHeritagePoints:this.spentHeritagePoints,xp:this.xp}}increaseHeritagePoints(e){this.gameService.enable(Iu.HERITAGE),this.heritagePoints+=e}increaseXP(e){this.xp+=e}spendHeritagePoints(e){return e<=this.getAvailableHeritagePoints()&&(this.spentHeritagePoints+=e,!0)}hasHeritagePoints(e){return e<=this.heritagePoints-this.spentHeritagePoints}getHeritagePoints(){return this.heritagePoints}calculateHeritagePoints(e=!1){let n=this.resourcesService.getTotalPeople(),l=this.xp,t=20+2*this.heritagePoints,i=0;for(;n>=t;)i+=1,n-=t,t+=2;for(;n+l>=t;)i+=1,(n-=t)<0&&(l+=n),t+=2;return e&&(this.xp=l),(n-=50)<0&&(n=0),{hp:i,xp:n}}peopleToNextHeritagePoint(){let e=this.resourcesService.getTotalPeople()+this.xp,n=20+2*this.heritagePoints;for(;e>=n;)e-=n,n+=2;return n-e}getAvailableHeritagePoints(){return this.heritagePoints-this.spentHeritagePoints}getXP(){return this.xp}}return e.ngInjectableDef=ce({factory:function(){return new e(De(sf),De(yf),De(Sf))},token:e,providedIn:"root"}),e})();class ny{constructor(e,n,l){this.heritageService=e,this.landService=n,this.modalService=l,this.multiplier=1,this.selectedMode=0}ngOnInit(){}getHeritagePoints(){return this.heritageService.getHeritagePoints()}getAvailableHeritagePoints(){return this.heritageService.getAvailableHeritagePoints()}buyLand(){this.heritageService.spendHeritagePoints(this.multiplier)?this.landService.increaseLand(10*this.multiplier,!0):this.modalService.info("No enough Heritage Points!")}buyForest(){this.heritageService.spendHeritagePoints(this.multiplier)?this.landService.increaseForest(10*this.multiplier,!1):this.modalService.info("No enough Heritage Points!")}buyMountains(){this.heritageService.spendHeritagePoints(this.multiplier)?this.landService.increaseMountains(5*this.multiplier):this.modalService.info("No enough Heritage Points!")}addHeritagePoints(){this.heritageService.increaseHeritagePoints(10)}isDev(){return!go.production}getXP(){return this.heritageService.getXP()}getBuyButtonText(){return 0===this.selectedMode?"Buy "+10*this.multiplier+" land":1===this.selectedMode?"Buy "+10*this.multiplier+" forest":2===this.selectedMode?"Buy "+5*this.multiplier+" mountains":void 0}buy(){0===this.selectedMode?this.buyLand():1===this.selectedMode?this.buyForest():2===this.selectedMode&&this.buyMountains()}}var ly=Jl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:.5%;height:100%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#multiplier[_ngcontent-%COMP%]{width:5ch}#modes[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-pack:center;justify-content:center}.mode[_ngcontent-%COMP%]{display:-webkit-box;display:flex;cursor:pointer;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:150px;width:200px;border:1px solid #000;-webkit-box-align:center;align-items:center;margin-right:5px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box}.mode[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100px}.mode[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700}.mode[_ngcontent-%COMP%]   .effect[_ngcontent-%COMP%]{margin-top:4px;font-size:.8em}.selected[_ngcontent-%COMP%]{border:3px solid #000}"]],data:{}});function ty(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.addHeritagePoints()&&t),t}),null,null)),(e()(),cr(-1,null,["add"]))],null,null)}function iy(e){return gr(0,[(e()(),qs(0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),cr(1,null,["XP towards next heritage point: ",""])),(e()(),qs(2,0,null,null,0,"br",[],null,null,null,null,null))],null,(function(e,n){e(n,1,0,n.component.getXP())}))}function sy(e){return gr(0,[(e()(),qs(0,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),cr(1,null,["XP towards next heritage point: ",""])),(e()(),qs(2,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(3,0,null,null,0,"br",[],null,null,null,null,null))],null,(function(e,n){e(n,1,0,n.component.getXP())}))}function ry(e){return gr(0,[(e()(),qs(0,0,null,null,61,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["Heritage"])),(e()(),qs(4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),cr(5,null,[" Heritage points: ","/"," "])),(e()(),Qs(16777216,null,null,1,null,ty)),ai(7,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,iy)),ai(10,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(11,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),cr(-1,null,[" Heritage points can be used to buy more land or unlock researches. "])),(e()(),qs(13,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,sy)),ai(15,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),cr(-1,null,[" Heritage points can be used to buy more land or unlock research projects "])),(e()(),qs(17,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(18,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(19,0,null,null,1,"label",[["for","multiplier"]],null,null,null,null,null)),(e()(),cr(-1,null,["Spend "])),(e()(),qs(21,0,null,null,6,"input",[["id","multiplier"],["min","1"],["type","number"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,22)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,22).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,22)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,22)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,23).onChange(l.target.value)&&t),"input"===n&&(t=!1!==qt(e,23).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,23).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.multiplier=l)&&t),t}),null,null)),ai(22,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(23,16384,null,0,gm,[gl,ol],null,null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,gm]),ai(25,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(27,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(28,0,null,null,1,"label",[["for","multiplier"]],null,null,null,null,null)),(e()(),cr(-1,null,[" Heritage Points to"])),(e()(),qs(30,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.buy()&&t),t}),null,null)),(e()(),cr(31,null,["",""])),(e()(),qs(32,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(33,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(34,0,null,null,27,"div",[["id","modes"]],null,null,null,null,null)),(e()(),qs(35,0,null,null,8,"div",[["class","mode"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==(e.component.selectedMode=0)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(37,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(38,{selected:0}),(e()(),qs(39,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),cr(-1,null,["Land"])),(e()(),qs(41,0,null,null,0,"img",[["src","assets/land.svg"]],null,null,null,null,null)),(e()(),qs(42,0,null,null,1,"span",[["class","effect"]],null,null,null,null,null)),(e()(),cr(43,null,[""," land for "," HP"])),(e()(),qs(44,0,null,null,8,"div",[["class","mode"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==(e.component.selectedMode=1)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(46,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(47,{selected:0}),(e()(),qs(48,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),cr(-1,null,["Forest"])),(e()(),qs(50,0,null,null,0,"img",[["src","assets/forest.svg"]],null,null,null,null,null)),(e()(),qs(51,0,null,null,1,"span",[["class","effect"]],null,null,null,null,null)),(e()(),cr(52,null,[""," forest for "," HP"])),(e()(),qs(53,0,null,null,8,"div",[["class","mode"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==(e.component.selectedMode=2)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(55,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(56,{selected:0}),(e()(),qs(57,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),cr(-1,null,["Mountains"])),(e()(),qs(59,0,null,null,0,"img",[["src","assets/mountains.svg"]],null,null,null,null,null)),(e()(),qs(60,0,null,null,1,"span",[["class","effect"]],null,null,null,null,null)),(e()(),cr(61,null,[""," mountains for "," HP"]))],(function(e,n){var l=n.component;e(n,7,0,l.isDev()),e(n,10,0,l.getXP()>0),e(n,15,0,l.getXP()>0),e(n,25,0,l.multiplier);var t=e(n,38,0,0===l.selectedMode);e(n,37,0,"mode",t);var i=e(n,47,0,1===l.selectedMode);e(n,46,0,"mode",i);var s=e(n,56,0,2===l.selectedMode);e(n,55,0,"mode",s)}),(function(e,n){var l=n.component;e(n,5,0,l.getAvailableHeritagePoints(),l.getHeritagePoints()),e(n,21,0,yt(1,"",l.getAvailableHeritagePoints(),""),qt(n,27).ngClassUntouched,qt(n,27).ngClassTouched,qt(n,27).ngClassPristine,qt(n,27).ngClassDirty,qt(n,27).ngClassValid,qt(n,27).ngClassInvalid,qt(n,27).ngClassPending),e(n,31,0,l.getBuyButtonText()),e(n,43,0,10*l.multiplier,l.multiplier),e(n,52,0,10*l.multiplier,l.multiplier),e(n,61,0,5*l.multiplier,l.multiplier)}))}function uy(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-heritage",[],null,null,null,ry,ly)),ai(1,114688,null,0,ny,[ey,nR,pf],null,null)],(function(e,n){e(n,1,0)}),null)}var oy=Ht("app-heritage",ny,uy,{},{},[]);class ay{constructor(e){this.royalService=e,this.id=Math.random()}ngOnInit(){}getPerkName(){return Uu.preparePerkName(this.perk.perk)}unlock(){this.royalService.unlock(this.perk)}isAvailable(){return this.royalService.getRoyalPoints()>=this.perk.cost&&(0===this.perk.maxUsages||this.perk.usages<this.perk.maxUsages)}}var cy=Jl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #000;font-size:1.2em}#wrapperNotAvailable[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:3px;text-align:center;border:1px solid #57575a;cursor:initial;font-size:1.2em}#text[_ngcontent-%COMP%]{display:inline-block;position:relative;z-index:2}#titleGrey[_ngcontent-%COMP%]{display:inline-block;color:#57575a}.notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}.title[_ngcontent-%COMP%]{text-align:left}hr[_ngcontent-%COMP%]{border-color:#000}#progress[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background-color:var(--active-colour);z-index:1}app-icon[_ngcontent-%COMP%]{margin-top:-15px;height:17px}.perkTooltip[_ngcontent-%COMP%]{min-width:400px}"]],data:{}});function hy(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(1,null,[" Usages: ","/"," "]))],null,(function(e,n){var l=n.component;e(n,1,0,l.perk.usages,l.perk.maxUsages)}))}function dy(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(1,null,[" Usages: ","/unlimited "]))],null,(function(e,n){e(n,1,0,n.component.perk.usages)}))}function gy(e){return gr(0,[(e()(),qs(0,0,null,null,14,"div",[["appTooltip",""],["class","tooltip"],["id","wrapper"]],null,[[null,"click"],[null,"mousemove"]],(function(e,n,l){var t=!0,i=e.component;return"mousemove"===n&&(t=!1!==qt(e,1).onmousemove(l)&&t),"click"===n&&(t=!1!==i.unlock()&&t),t}),null,null)),ai(1,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),qs(2,0,null,null,2,"div",[["id","text"]],null,null,null,null,null)),(e()(),qs(3,0,null,null,1,"div",[["class","icon"]],null,null,null,null,null)),(e()(),cr(4,null,[" "," "])),(e()(),qs(5,0,null,null,9,"span",[["class","perkTooltip"]],[[8,"id",0]],null,null,null,null)),(e()(),qs(6,0,null,null,0,"div",[],[[8,"innerHTML",1]],null,null,null,null)),(e()(),qs(7,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(8,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),cr(9,null,[" Cost: "," RP "])),(e()(),qs(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,hy)),ai(12,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,dy)),ai(14,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,1,0,l.id),e(n,12,0,l.perk.maxUsages>0),e(n,14,0,0===l.perk.maxUsages)}),(function(e,n){var l=n.component;e(n,4,0,l.getPerkName()),e(n,5,0,yt(1,"",l.id,"")),e(n,6,0,l.perk.description),e(n,9,0,l.perk.cost)}))}function py(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(1,114688,null,0,$p,[],{name:[0,"name"]},null)],(function(e,n){e(n,1,0,"tick")}),null)}function my(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(1,null,[" Usages: ","/"," "]))],null,(function(e,n){var l=n.component;e(n,1,0,l.perk.usages,l.perk.maxUsages)}))}function fy(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(1,null,[" Usages: ","/unlimited "]))],null,(function(e,n){e(n,1,0,n.component.perk.usages)}))}function Sy(e){return gr(0,[(e()(),qs(0,0,null,null,16,"div",[["appTooltip",""],["class","tooltip"],["id","wrapperNotAvailable"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==qt(e,1).onmousemove(l)&&t),t}),null,null)),ai(1,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),qs(2,0,null,null,4,"div",[["id","titleGrey"]],null,null,null,null,null)),(e()(),qs(3,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,py)),ai(5,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),cr(6,null,[""," "])),(e()(),qs(7,0,null,null,9,"span",[["class","perkTooltip"]],[[8,"id",0]],null,null,null,null)),(e()(),qs(8,0,null,null,0,"div",[],[[8,"innerHTML",1]],null,null,null,null)),(e()(),qs(9,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(10,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),cr(11,null,[" Cost: "," RP "])),(e()(),qs(12,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,my)),ai(14,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,fy)),ai(16,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,1,0,l.id),e(n,5,0,l.perk.usages===l.perk.maxUsages&&l.perk.maxUsages>0),e(n,14,0,l.perk.maxUsages>0),e(n,16,0,0===l.perk.maxUsages)}),(function(e,n){var l=n.component;e(n,6,0,l.getPerkName()),e(n,7,0,yt(1,"",l.id,"")),e(n,8,0,l.perk.description),e(n,11,0,l.perk.cost)}))}function Ey(e){return gr(0,[(e()(),Qs(16777216,null,null,1,null,gy)),ai(1,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,Sy)),ai(3,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,1,0,l.isAvailable()),e(n,3,0,!l.isAvailable())}),null)}class vy{constructor(e,n){this.logService=e,this.royalService=n}ngOnInit(){}buyRoyalPoints(){this.royalService.buyRoyalPoints()}getRoyalPoints(){return this.royalService.getRoyalPoints()}getRoyalPerks(){return this.royalService.getRoyalPerks()}isGoldenFishCaught(){return this.royalService.isGoldenFishCaught()}isGoldenEggFound(){return this.royalService.isGoldenEggLaid()}isGoldenApplePicked(){return this.royalService.isGoldenApplePicked()}isGoldenFleeceFound(){return this.royalService.isGoldenFleeceFound()}getOneTimeUseRoyalPerks(){return this.royalService.getRoyalPerks().filter(e=>e.perk===Tu.MOTIVATION_SPEECH||e.perk===Tu.JESTER||e.perk===Tu.CALL_TO_ARMS||e.perk===Tu.ASTROLOGICAL_NOTE||e.perk===Tu.ROYAL_FESTIVAL||e.perk===Tu.ROYAL_RESERVE||e.perk===Tu.ANCIENT_SEA_MAPS||e.perk===Tu.HIRE_MERCENARIES||e.perk===Tu.HIRE_PIRATES||e.perk===Tu.ANCIENT_PROTECTION||e.perk===Tu.ROYAL_TRADITIONS)}getPermanentUseRoyalPerks(){return this.royalService.getRoyalPerks().filter(e=>e.perk!==Tu.MOTIVATION_SPEECH&&e.perk!==Tu.JESTER&&e.perk!==Tu.CALL_TO_ARMS&&e.perk!==Tu.ASTROLOGICAL_NOTE&&e.perk!==Tu.ROYAL_FESTIVAL&&e.perk!==Tu.ROYAL_RESERVE&&e.perk!==Tu.ANCIENT_SEA_MAPS&&e.perk!==Tu.HIRE_MERCENARIES&&e.perk!==Tu.HIRE_PIRATES&&e.perk!==Tu.ANCIENT_PROTECTION&&e.perk!==Tu.ROYAL_TRADITIONS)}}var Ry=Jl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{margin:5px;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}.bold[_ngcontent-%COMP%]{font-weight:600}app-royal-perk[_ngcontent-%COMP%]{font-size:1em;display:inline-block;width:30%;margin:4px 8px;cursor:pointer}#goldenItems[_ngcontent-%COMP%]{margin-top:10px}.groupTitle[_ngcontent-%COMP%]{font-weight:700;font-size:1.1em;text-align:center}"]],data:{}});function Oy(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-royal-perk",[],null,null,null,Ey,cy)),ai(1,114688,null,0,ay,[vf],{perk:[0,"perk"]},null)],(function(e,n){e(n,1,0,n.context.$implicit)}),null)}function by(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-royal-perk",[],null,null,null,Ey,cy)),ai(1,114688,null,0,ay,[vf],{perk:[0,"perk"]},null)],(function(e,n){e(n,1,0,n.context.$implicit)}),null)}function Ty(e){return gr(0,[(e()(),qs(0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(2,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null)],(function(e,n){e(n,2,0,"fish","resources","golden fish")}),null)}function Cy(e){return gr(0,[(e()(),qs(0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(2,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null)],(function(e,n){e(n,2,0,"egg","resources","golden egg")}),null)}function Iy(e){return gr(0,[(e()(),qs(0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(2,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null)],(function(e,n){e(n,2,0,"apple","resources","golden apple")}),null)}function yy(e){return gr(0,[(e()(),qs(0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(2,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null)],(function(e,n){e(n,2,0,"wool","resources","golden fleece")}),null)}function Ay(e){return gr(0,[(e()(),qs(0,0,null,null,35,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),cr(-1,null,["Royal perks"])),(e()(),qs(3,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(4,0,null,null,6,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["You have "])),(e()(),qs(6,0,null,null,1,"span",[["class","bold"]],null,null,null,null,null)),(e()(),cr(7,null,["",""])),(e()(),cr(-1,null,[" royal points."])),(e()(),qs(9,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),cr(-1,null,[" You can use them to acquire special upgrades."])),(e()(),qs(11,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),qs(12,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.buyRoyalPoints()&&t),t}),null,null)),(e()(),cr(-1,null,["Buy Royal points"])),(e()(),qs(14,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),qs(15,0,null,null,1,"div",[["class","groupTitle"]],null,null,null,null,null)),(e()(),cr(-1,null,["One time use perks"])),(e()(),Qs(16777216,null,null,1,null,Oy)),ai(18,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(19,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),qs(20,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),qs(21,0,null,null,1,"div",[["class","groupTitle"]],null,null,null,null,null)),(e()(),cr(-1,null,["Permanent perks"])),(e()(),Qs(16777216,null,null,1,null,by)),ai(24,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(25,0,null,null,10,"div",[["id","goldenItems"]],null,null,null,null,null)),(e()(),qs(26,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),cr(-1,null,["Golden items found:"])),(e()(),Qs(16777216,null,null,1,null,Ty)),ai(29,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,Cy)),ai(31,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,Iy)),ai(33,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,yy)),ai(35,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,18,0,l.getOneTimeUseRoyalPerks()),e(n,24,0,l.getPermanentUseRoyalPerks()),e(n,29,0,l.isGoldenFishCaught()),e(n,31,0,l.isGoldenEggFound()),e(n,33,0,l.isGoldenApplePicked()),e(n,35,0,l.isGoldenFleeceFound())}),(function(e,n){e(n,7,0,n.component.getRoyalPoints())}))}function Ny(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-royal",[],null,null,null,Ay,Ry)),ai(1,114688,null,0,vy,[df,vf],null,null)],(function(e,n){e(n,1,0)}),null)}var _y=Ht("app-royal",vy,Ny,{},{},[]),wy=["#wrapper[_ngcontent-%COMP%]{height:100%;max-height:100%;font-size:1em}#buttons[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{font-size:.9em;padding:7px 10px}#content[_ngcontent-%COMP%]{margin:.5%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:94%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#side[_ngcontent-%COMP%]{float:right;font-size:.9em;width:30%;text-align:center}#filters[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-pack:end;justify-content:flex-end}#side[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.8em;margin:0;padding:0;border:none;outline:0}.buildingsWrapper[_ngcontent-%COMP%]{height:84.9%}.buildings[_ngcontent-%COMP%]{display:-webkit-box;display:flex;flex-wrap:wrap;height:100%;border:2px solid #000;overflow-y:auto;align-content:flex-start}.buildings[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}#title[_ngcontent-%COMP%]{text-align:center;border:2px solid #000;border-bottom:none}.title[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;text-align:center;border:2px solid #000;border-bottom:none}.page[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:auto;text-align:center;border-right:2px solid #000;cursor:pointer}.activePage[_ngcontent-%COMP%]{background-color:var(--active-colour)}.page[_ngcontent-%COMP%]:last-of-type{border-right:none}.off[_ngcontent-%COMP%]{background-color:#555}.buildingRegularWrapper[_ngcontent-%COMP%]{display:-webkit-box;display:flex;flex-wrap:wrap;margin:.6%}.buildingDropWrapper[_ngcontent-%COMP%]{display:-webkit-box;display:flex;margin:.6%;cursor:move}.buildingDropWrapper[_ngcontent-%COMP%]   app-building[_ngcontent-%COMP%]{display:inline-block}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}#allControl[_ngcontent-%COMP%]{margin-left:auto;width:108px;display:inline-block}#allControl[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:4px}.dropdown[_ngcontent-%COMP%]{display:inline-block;position:relative}.dropdown[_ngcontent-%COMP%]:active{background-color:var(--passive-colour)}.dropdown-content[_ngcontent-%COMP%]{cursor:pointer;display:none;position:absolute;list-style:none;background-color:#f9f9f9;min-width:100px;top:5px;font-size:1.2em;margin-top:25px;padding:0;border:1px solid #000;z-index:1000}.dropdown-content[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:pointer}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-content[_ngcontent-%COMP%]{display:block}.dropdown-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background-color:var(--passive-colour);border:1px solid #000;padding:3px}.dropdown-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:var(--active-colour)}"];class Py{constructor(e,n,l,t){this.servicesService=e,this.resourcesService=n,this.effectsService=l,this.gameService=t,this.id=Math.random()}ngOnInit(){this.building.hasBuff()&&(this.buildingBuff=this.building.getBuff())}hasResource(e){return 0===this.resourcesService.hasResource(e.key,e.value,"Building buff",!0)}getResourceName(e){return Uu.prepareResourceName(e)}buff(){const e=this.servicesService.getModalService();if(this.building.hasBuff()&&this.buffsEnabled())if(this.building.isBuffed())e.info("This building is already buffed");else{const e=this.building.getBuff();this.resourcesService.decreaseResources(e.cost,"Building buff",!0)&&this.effectsService.addBuildingEffect(new Vu(e.name,this.building.getBuildingType(),e.effect,e.duration,this.building.id))}else e.info("This building cannot be buffed")}buffsEnabled(){return this.gameService.isEnabled(Iu.BUFFS)}}var xy=Jl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{cursor:pointer}img[_ngcontent-%COMP%]{height:24px;width:24px}hr[_ngcontent-%COMP%]{border-color:#000}.notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}"]],data:{}});function ky(e){return gr(0,[(e()(),qs(0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),cr(1,null,[""," "])),(e()(),qs(2,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(3,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){e(n,3,0,n.component.getResourceName(n.parent.context.$implicit.key),"resources")}),(function(e,n){e(n,1,0,n.parent.context.$implicit.value)}))}function My(e){return gr(0,[(e()(),qs(0,0,null,null,3,"div",[["class","notMet"]],null,null,null,null,null)),(e()(),cr(1,null,[""," "])),(e()(),qs(2,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(3,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){e(n,3,0,n.component.getResourceName(n.parent.context.$implicit.key),"resources")}),(function(e,n){e(n,1,0,n.parent.context.$implicit.value)}))}function Dy(e){return gr(0,[(e()(),qs(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,ky)),ai(2,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,My)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.hasResource(n.context.$implicit)),e(n,4,0,!l.hasResource(n.context.$implicit))}),null)}function Ly(e){return gr(0,[(e()(),qs(0,0,null,null,10,"div",[["appTooltip",""],["class","tooltip"],["id","buff"]],null,[[null,"click"],[null,"mousemove"]],(function(e,n,l){var t=!0,i=e.component;return"mousemove"===n&&(t=!1!==qt(e,1).onmousemove(l)&&t),"click"===n&&(t=!1!==i.buff()&&t),t}),null,null)),ai(1,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),qs(2,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/buff.svg"]],null,null,null,null,null)),(e()(),qs(3,0,null,null,7,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),cr(4,null,[" ",""])),(e()(),qs(5,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),cr(6,null,[" ","% buff for "," days "])),(e()(),qs(7,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,2,null,Dy)),ai(9,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),ci(0,_a,[Nl])],(function(e,n){var l=n.component;e(n,1,0,0-l.id),e(n,9,0,ql(n,9,0,qt(n,10).transform(l.buildingBuff.cost)))}),(function(e,n){var l=n.component;e(n,3,0,yt(1,"",0-l.id,"")),e(n,4,0,l.buildingBuff.name),e(n,6,0,l.buildingBuff.effect,l.buildingBuff.duration)}))}function Fy(e){return gr(0,[(e()(),qs(0,0,null,null,2,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,Ly)),ai(2,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.buffsEnabled()&&l.building.hasBuff()&&!l.building.isBuffed())}),null)}class Uy{constructor(e,n,l){this.resourcesService=e,this.landService=n,this.servicesService=l,this.id=Math.random()}ngOnInit(){}hasResource(e){return 0===this.resourcesService.hasResource(e.key,e.value,this.building.getName()+" upgrade",!0)}getResourceName(e){return Uu.prepareResourceName(e)}upgrade(){this.parentRegion.upgradeBuilding(this.building.getBuildingId())}getBuildingName(e){return Uu.prepareBuildingName(e)}}var Hy=Jl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{cursor:pointer}img[_ngcontent-%COMP%]{height:24px;width:24px}hr[_ngcontent-%COMP%]{border-color:#000}.notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}"]],data:{}});function Gy(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(1,null,["Upgrade to ",""]))],null,(function(e,n){var l=n.component;e(n,1,0,l.getBuildingName(l.building.getUpgradeSettings().NEW_BUILDING))}))}function By(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(1,null,["Upgrade to level ",""]))],null,(function(e,n){e(n,1,0,n.component.building.getBuildingLevel()+1)}))}function Wy(e){return gr(0,[(e()(),qs(0,0,null,null,6,"div",[],null,null,null,null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(2,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(3,{notMet:0}),(e()(),cr(4,null,[" ",""])),(e()(),qs(5,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(6,114688,null,0,$p,[],{name:[0,"name"]},null)],(function(e,n){var l=n.component,t=e(n,3,0,!l.landService.hasLand(l.building.getUpgradeSettings().SIZE));e(n,2,0,t),e(n,6,0,"land")}),(function(e,n){e(n,4,0,n.component.building.getUpgradeSettings().SIZE)}))}function Vy(e){return gr(0,[(e()(),qs(0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),cr(1,null,[""," "])),(e()(),qs(2,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(3,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){e(n,3,0,n.component.getResourceName(n.parent.context.$implicit.key),"resources")}),(function(e,n){e(n,1,0,n.parent.context.$implicit.value)}))}function zy(e){return gr(0,[(e()(),qs(0,0,null,null,3,"div",[["class","notMet"]],null,null,null,null,null)),(e()(),cr(1,null,[""," "])),(e()(),qs(2,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(3,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){e(n,3,0,n.component.getResourceName(n.parent.context.$implicit.key),"resources")}),(function(e,n){e(n,1,0,n.parent.context.$implicit.value)}))}function Yy(e){return gr(0,[(e()(),qs(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,Vy)),ai(2,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,zy)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.hasResource(n.context.$implicit)),e(n,4,0,!l.hasResource(n.context.$implicit))}),null)}function $y(e){return gr(0,[(e()(),qs(0,0,null,null,13,"div",[["appTooltip",""],["class","tooltip"],["id","upgrade"]],null,[[null,"click"],[null,"mousemove"]],(function(e,n,l){var t=!0,i=e.component;return"mousemove"===n&&(t=!1!==qt(e,1).onmousemove(l)&&t),"click"===n&&(t=!1!==i.upgrade()&&t),t}),null,null)),ai(1,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),qs(2,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/upgrade.svg"]],null,null,null,null,null)),(e()(),qs(3,0,null,null,10,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,Gy)),ai(5,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,By)),ai(7,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(8,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,Wy)),ai(10,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,2,null,Yy)),ai(12,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),ci(0,_a,[Nl])],(function(e,n){var l=n.component;e(n,1,0,0-l.id),e(n,5,0,l.building.getUpgradeSettings()&&l.building.getUpgradeSettings().NEW_BUILDING),e(n,7,0,l.building.getUpgradeSettings()&&void 0===l.building.getUpgradeSettings().NEW_BUILDING),e(n,10,0,l.building.getUpgradeSettings()&&l.building.getUpgradeSettings().SIZE),e(n,12,0,ql(n,12,0,qt(n,13).transform(l.building.getUpgradeCost())))}),(function(e,n){e(n,3,0,yt(1,"",0-n.component.id,""))}))}function Ky(e){return gr(0,[(e()(),qs(0,0,null,null,2,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,$y)),ai(2,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){e(n,2,0,n.component.building.hasUpgrade())}),null)}class jy{constructor(){}ngOnInit(){}isTextValue(e){return e===jS.TEXT}isButtonValue(e){return e===jS.BUTTON}isTwoButtonValue(e){return e===jS.TWO_BUTTON}isProgressValue(e){return e===jS.PROGRESS_BAR}isDropdownValue(e){return e===jS.DROPDOWN}isIconValue(e){return e===jS.ICON}isButtonCheckboxValue(e){return e===jS.BUTTON_CHECKBOX}isCheckboxValue(e){return e===jS.CHECKBOX}buildingCallback(e){this.building.callback(e)}}var Qy=Jl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{font-size:1.3em}.iconsLine[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.iconsLine[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:auto}.line[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:1px 4px}button[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{font-size:.9em}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}.icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:2px;-webkit-box-flex:0;flex:0 0 auto}"]],data:{}});function qy(e){return gr(0,[(e()(),qs(0,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,4,"span",[["class","icon"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null)),(e()(),qs(3,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(4,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),qs(5,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],(function(e,n){e(n,4,0,n.context.$implicit.name,n.context.$implicit.path)}),(function(e,n){e(n,2,0,n.context.$implicit.prefix),e(n,5,0,n.context.$implicit.suffix)}))}function Xy(e){return gr(0,[(e()(),qs(0,0,null,null,2,"span",[["class","line iconsLine"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,qy)),ai(2,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.building.getLine(l.line).getValue())}),null)}function Zy(e){return gr(0,[(e()(),qs(0,0,null,null,0,"span",[["class","line"]],[[8,"innerHTML",1]],null,null,null,null))],null,(function(e,n){var l=n.component;e(n,0,0,l.building.getLine(l.line).getValue())}))}function Jy(e){return gr(0,[(e()(),qs(0,0,null,null,2,"span",[["class","line"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==i.buildingCallback(i.building.getLine(i.line).getValue().callbackValue)&&t),t}),null,null)),(e()(),cr(2,null,[""," "]))],null,(function(e,n){var l=n.component;e(n,2,0,l.building.getLine(l.line).getValue().buttonText)}))}function eA(e){return gr(0,[(e()(),qs(0,0,null,null,10,"span",[["class","line"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==i.buildingCallback(i.building.getLine(i.line).getValue().callbackValue)&&t),t}),null,null)),(e()(),cr(2,null,[""," "])),(e()(),qs(3,0,null,null,7,"label",[],null,null,null,null,null)),(e()(),qs(4,0,null,null,5,"input",[["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,5).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,5).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.building.getLine(i.line).getValue().checkboxState=l)&&t),"click"===n&&(t=!1!==i.buildingCallback(i.building.getLine(i.line).getValue().checkboxCallbackValue)&&t),t}),null,null)),ai(5,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(7,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(9,16384,null,0,im,[[4,tm]],null,null),(e()(),cr(10,null,[""," "]))],(function(e,n){var l=n.component;e(n,7,0,l.building.getLine(l.line).getValue().checkboxState)}),(function(e,n){var l=n.component;e(n,2,0,l.building.getLine(l.line).getValue().buttonText),e(n,4,0,qt(n,9).ngClassUntouched,qt(n,9).ngClassTouched,qt(n,9).ngClassPristine,qt(n,9).ngClassDirty,qt(n,9).ngClassValid,qt(n,9).ngClassInvalid,qt(n,9).ngClassPending),e(n,10,0,l.building.getLine(l.line).getValue().checkboxLabel)}))}function nA(e){return gr(0,[(e()(),qs(0,0,null,null,8,"span",[["class","line"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,7,"label",[],null,null,null,null,null)),(e()(),qs(2,0,null,null,5,"input",[["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,3).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,3).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.building.getLine(i.line).getValue().checkboxState=l)&&t),"click"===n&&(t=!1!==i.buildingCallback(i.building.getLine(i.line).getValue().checkboxCallbackValue)&&t),t}),null,null)),ai(3,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(5,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(7,16384,null,0,im,[[4,tm]],null,null),(e()(),cr(8,null,[""," "]))],(function(e,n){var l=n.component;e(n,5,0,l.building.getLine(l.line).getValue().checkboxState)}),(function(e,n){var l=n.component;e(n,2,0,qt(n,7).ngClassUntouched,qt(n,7).ngClassTouched,qt(n,7).ngClassPristine,qt(n,7).ngClassDirty,qt(n,7).ngClassValid,qt(n,7).ngClassInvalid,qt(n,7).ngClassPending),e(n,8,0,l.building.getLine(l.line).getValue().checkboxLabel)}))}function lA(e){return gr(0,[(e()(),qs(0,0,null,null,5,"span",[["class","line"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==i.buildingCallback(i.building.getLine(i.line).getValue().callback1Value)&&t),t}),null,null)),(e()(),cr(2,null,["",""])),(e()(),qs(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null)),(e()(),qs(4,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==i.buildingCallback(i.building.getLine(i.line).getValue().callback2Value)&&t),t}),null,null)),(e()(),cr(5,null,["",""]))],null,(function(e,n){var l=n.component;e(n,2,0,l.building.getLine(l.line).getValue().button1Text),e(n,3,0,l.building.getLine(l.line).getValue().textBetween),e(n,5,0,l.building.getLine(l.line).getValue().button2Text)}))}function tA(e){return gr(0,[(e()(),qs(0,0,null,null,3,"option",[],null,null,null,null,null)),ai(1,147456,null,0,Rm,[ol,gl,[2,vm]],{value:[0,"value"]},null),ai(2,147456,null,0,Tm,[ol,gl,[8,null]],{value:[0,"value"]},null),(e()(),cr(3,null,["",""]))],(function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)}),(function(e,n){e(n,3,0,n.context.$implicit)}))}function iA(e){return gr(0,[(e()(),qs(0,0,null,null,8,"span",[["class","line"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,7,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,2).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,2).onTouched()&&t),"change"===n&&(t=!1!==i.buildingCallback(l)&&t),"ngModelChange"===n&&(t=!1!==(i.building.getLine(i.line).getValue().selected=l)&&t),t}),null,null)),ai(2,16384,null,0,vm,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[vm]),ai(4,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(6,16384,null,0,im,[[4,tm]],null,null),(e()(),Qs(16777216,null,null,1,null,tA)),ai(8,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,4,0,l.building.getLine(l.line).getValue().selected),e(n,8,0,l.building.getLine(l.line).getValue().values)}),(function(e,n){e(n,1,0,qt(n,6).ngClassUntouched,qt(n,6).ngClassTouched,qt(n,6).ngClassPristine,qt(n,6).ngClassDirty,qt(n,6).ngClassValid,qt(n,6).ngClassInvalid,qt(n,6).ngClassPending)}))}function sA(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-progress-bar",[],null,null,null,AT,CT)),ai(1,638976,null,0,TT,[uf],{progress:[0,"progress"],text:[1,"text"]},null)],(function(e,n){var l=n.component;e(n,1,0,l.building.getLine(l.line).getValue().value,l.building.getLine(l.line).getValue().label)}),null)}function rA(e){return gr(0,[(e()(),qs(0,0,null,null,2,"span",[["class","line"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,sA)),ai(2,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.building.getLine(l.line).getValue().value>=0)}),null)}function uA(e){return gr(0,[(e()(),qs(0,0,null,null,16,"span",[["id","wrapper"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,Xy)),ai(2,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,Zy)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,Jy)),ai(6,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,eA)),ai(8,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,nA)),ai(10,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,lA)),ai(12,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,iA)),ai(14,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,rA)),ai(16,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.isIconValue(l.building.getLine(l.line).getValueType())),e(n,4,0,l.isTextValue(l.building.getLine(l.line).getValueType())),e(n,6,0,l.isButtonValue(l.building.getLine(l.line).getValueType())),e(n,8,0,l.isButtonCheckboxValue(l.building.getLine(l.line).getValueType())),e(n,10,0,l.isCheckboxValue(l.building.getLine(l.line).getValueType())),e(n,12,0,l.isTwoButtonValue(l.building.getLine(l.line).getValueType())),e(n,14,0,l.isDropdownValue(l.building.getLine(l.line).getValueType())),e(n,16,0,l.isProgressValue(l.building.getLine(l.line).getValueType()))}),null)}function oA(e){return gr(0,[(e()(),Qs(16777216,null,null,1,null,uA)),ai(1,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,1,0,null!=l.line&&l.building)}),null)}class aA{constructor(e,n,l,t,i,s,r){this.modalService=e,this.servicesService=n,this.resourcesService=l,this.managementService=t,this.villageService=i,this.optionsService=s,this.logService=r,this.demolishMode=!1,this.combineMode=!1,this.splitMode=!1,this.arrangeMode=!1,this.lines=KS,this.id=Math.random(),this.lastEffectsDisplayValue=0,this.hasEffectsDisplayChanged=!1}ngOnInit(){}fitText(){if(this.centerRef){this.hasEffectsDisplayChanged=!1;const e=15,n=this.centerRef.nativeElement;let l=n.clientWidth,t=n.scrollWidth,i=parseInt(window.getComputedStyle(n,null).getPropertyValue("font-size"),10);if(t>l)i=(i=Math.ceil(i*l/t))>e?i=e:i-1,n.style.fontSize=i+"px";else for(;t===l&&i<e;)i=(i=Math.ceil(i)+1)>e?i=e:i,n.style.fontSize=i+"px",(t=n.scrollWidth)>(l=n.clientWidth)&&(n.style.fontSize=i-1+"px")}}stop(){this.building.isWorking()?this.building.stopProduction():this.building.startProduction()||this.modalService.info("Cannot unlock production of "+this.building.getName()+". Number of free workers: "+this.resourcesService.getPeople())}isStoppable(){return this.building.isStoppable()}isWorking(){return this.building.isWorking()}demolish(){if(void 0!==this.building.getMaxSize&&this.villageService.getPopulation()>this.villageService.getPopulationCap()-this.building.getMaxSize()){this.modalService.open(ju.CONFIRM),this.modalService.setModalText("You don't have enough housing space to move this building occupants.<br> People that won't find new home will leave the village<br>Do you still want to demolish this building?");const e=this.modalService.registerForConfirmation().subscribe(n=>{e.unsubscribe(),n&&this.building.prepareDemolish()&&this.parentRegion.demolish(this.building)})}else if(this.building.isUsedUp())this.building.prepareDemolish()&&this.parentRegion.demolish(this.building);else{this.modalService.setModalText("Are you sure you want to demolish "+this.building.getName()+"?"),this.modalService.open(ju.CONFIRM);const e=this.modalService.registerForConfirmation().subscribe(n=>{e.unsubscribe(),n&&this.building.prepareDemolish()&&this.parentRegion.demolish(this.building)})}}canCombine(){return this.parentRegion.canCombine(this.building)}combine(){this.parentRegion.combine(this.building)}split(){this.parentRegion.split(this.building)}areComplexWorkersEnabled(){return this.managementService.getComplexWorkers()}openWorkersManagement(e){e.ctrlKey?this.building.getWorkSettings().enabled?(this.building.getWorkSettings().enabled=!1,this.stop()):this.stop():e.shiftKey?this.building.getWorkSettings().enabled=!this.building.getWorkSettings().enabled:(this.modalService.open(ju.WORK_MANAGEMENT),this.modalService.setBuilding(this.building))}round(e){return e%1!=0?Uu.round(e,2):e}arrange(){this.parentRegion.move(this.building)}canMove(){return this.parentRegion.canMove(this.building)}getDisplayableEffectsValue(){const e=this.building.getDisplayableEffectsValue();return this.lastEffectsDisplayValue!==e&&(this.lastEffectsDisplayValue=e,this.hasEffectsDisplayChanged=!0),e}isTextFittingEnabled(){return this.optionsService.getOption(rf.AUTO_TEXT_FITTING)}ngAfterViewChecked(){this.hasEffectsDisplayChanged&&this.isTextFittingEnabled()&&this.fitText()}}var cA=Jl({encapsulation:0,styles:[["[_nghost-%COMP%]{height:15%;min-height:125px;width:10%;min-width:206px;border:1px solid #000;overflow:hidden}#wrapper[_ngcontent-%COMP%]{position:relative;height:100%;text-align:center;font-size:.7em;overflow:hidden}.usedUp[_ngcontent-%COMP%]{background-color:rgba(126,122,121,.6)}#arrange[_ngcontent-%COMP%], #combine[_ngcontent-%COMP%], #demolish[_ngcontent-%COMP%], #split[_ngcontent-%COMP%]{position:absolute;font-weight:600;font-size:2em;top:0;left:0;width:100%;height:100%;background-color:rgba(126,122,121,.7);-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;display:-webkit-box;display:flex;cursor:pointer}#demolishText[_ngcontent-%COMP%], .combineText[_ngcontent-%COMP%]{display:block}#nameBar[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;width:100%;height:24px;font-size:1.4em;font-weight:700;border-bottom:1px solid #000;white-space:nowrap}#left[_ngcontent-%COMP%], #right[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1 0 24px}#center[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1 0 152px;font-size:.8em;overflow:hidden;line-height:24px}.control[_ngcontent-%COMP%]{float:right;font-size:.6em;margin-right:2px;cursor:pointer}.control[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;height:24px}#lines[_ngcontent-%COMP%]{position:relative;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}app-progress-bar[_ngcontent-%COMP%]{display:block;height:18px}app-building-line[_ngcontent-%COMP%]{height:20px;display:block;margin-top:3px;-webkit-box-flex:1;flex:1 0 auto}img[_ngcontent-%COMP%]{height:24px}.details[_ngcontent-%COMP%]{float:left;font-size:.75em;margin-right:2px}.positiveEffects[_ngcontent-%COMP%]{font-size:.7em;color:var(--positive-colour)}.negativeEffects[_ngcontent-%COMP%]{font-size:.7em;color:var(--negative-colour)}.tooltipSpan[_ngcontent-%COMP%]{font-size:1.5em;font-weight:100;text-align:left}.tooltipSpan[_ngcontent-%COMP%]   #title[_ngcontent-%COMP%]{text-align:center}.tooltipSpan[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-color:#000}app-building-buff[_ngcontent-%COMP%]{position:absolute;right:0;top:0}app-building-upgrade[_ngcontent-%COMP%]{position:absolute;left:-2px;top:0}"]],data:{}});function hA(e){return gr(0,[(e()(),qs(0,0,null,null,7,"span",[["appTooltip",""],["class","details tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==qt(e,1).onmousemove(l)&&t),t}),null,null)),ai(1,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),qs(2,0,null,null,0,"img",[["alt","details"],["draggable","false"],["ondragstart","return false;"],["src","assets/details.svg"]],null,null,null,null,null)),(e()(),qs(3,0,null,null,4,"span",[["class","tooltipSpan"]],[[8,"id",0]],null,null,null,null)),(e()(),qs(4,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),cr(5,null,["",""])),(e()(),qs(6,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),qs(7,0,null,null,0,"div",[],[[8,"innerHTML",1]],null,null,null,null))],(function(e,n){e(n,1,0,n.component.id)}),(function(e,n){var l=n.component;e(n,3,0,yt(1,"",l.id,"")),e(n,5,0,l.building.getName()),e(n,7,0,l.building.getDetails())}))}function dA(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[["class","positiveEffects"]],null,null,null,null,null)),(e()(),cr(1,null,["(+","%)"]))],null,(function(e,n){var l=n.component;e(n,1,0,l.round(l.getDisplayableEffectsValue()))}))}function gA(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[["class","negativeEffects"]],null,null,null,null,null)),(e()(),cr(1,null,["(","%)"]))],null,(function(e,n){var l=n.component;e(n,1,0,l.round(l.getDisplayableEffectsValue()))}))}function pA(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[["class","control"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.stop()&&t),t}),null,null)),(e()(),qs(1,0,null,null,0,"img",[["alt","on"],["draggable","false"],["ondragstart","return false;"],["src","assets/gear.svg"],["title","disable"]],null,null,null,null,null))],null,null)}function mA(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[["class","control"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.stop()&&t),t}),null,null)),(e()(),qs(1,0,null,null,0,"img",[["alt","off"],["draggable","false"],["ondragstart","return false;"],["src","assets/gear_off.svg"],["title","enable"]],null,null,null,null,null))],null,null)}function fA(e){return gr(0,[(e()(),qs(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,pA)),ai(2,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,mA)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(0,null,null,0))],(function(e,n){var l=n.component;e(n,2,0,l.isStoppable()&&l.isWorking()),e(n,4,0,l.isStoppable()&&!l.isWorking())}),null)}function SA(e){return gr(0,[(e()(),qs(0,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/complex_management_on_on.svg"],["title","work settings"]],null,null,null,null,null))],null,null)}function EA(e){return gr(0,[(e()(),qs(0,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/complex_management_on_off.svg"],["title","work settings"]],null,null,null,null,null))],null,null)}function vA(e){return gr(0,[(e()(),qs(0,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/complex_management_off_on.svg"],["title","work settings"]],null,null,null,null,null))],null,null)}function RA(e){return gr(0,[(e()(),qs(0,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/complex_management_off_off.svg"],["title","work settings"]],null,null,null,null,null))],null,null)}function OA(e){return gr(0,[(e()(),qs(0,0,null,null,8,"span",[["class","control"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.openWorkersManagement(l)&&t),t}),null,null)),(e()(),Qs(16777216,null,null,1,null,SA)),ai(2,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,EA)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,vA)),ai(6,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,RA)),ai(8,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.building.getWorkSettings().enabled&&l.building.isWorking()),e(n,4,0,l.building.getWorkSettings().enabled&&!l.building.isWorking()),e(n,6,0,!l.building.getWorkSettings().enabled&&l.building.isWorking()),e(n,8,0,!l.building.getWorkSettings().enabled&&!l.building.isWorking())}),null)}function bA(e){return gr(0,[(e()(),qs(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,OA)),ai(2,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(0,null,null,0))],(function(e,n){e(n,2,0,n.component.isStoppable())}),null)}function TA(e){return gr(0,[(e()(),qs(0,0,null,null,2,"div",[["id","demolish"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.demolish()&&t),t}),null,null)),(e()(),qs(1,0,null,null,1,"span",[["id","demolishText"]],null,null,null,null,null)),(e()(),cr(-1,null,["Demolish"]))],null,null)}function CA(e){return gr(0,[(e()(),qs(0,0,null,null,2,"div",[["id","combine"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.combine()&&t),t}),null,null)),(e()(),qs(1,0,null,null,1,"span",[["class","combineText"]],null,null,null,null,null)),(e()(),cr(-1,null,["Combine"]))],null,null)}function IA(e){return gr(0,[(e()(),qs(0,0,null,null,2,"div",[["id","split"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.split()&&t),t}),null,null)),(e()(),qs(1,0,null,null,1,"span",[["class","combineText"]],null,null,null,null,null)),(e()(),cr(-1,null,["Split"]))],null,null)}function yA(e){return gr(0,[(e()(),qs(0,0,null,null,2,"div",[["id","arrange"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.arrange()&&t),t}),null,null)),(e()(),qs(1,0,null,null,1,"span",[["class","combineText"]],null,null,null,null,null)),(e()(),cr(-1,null,["Move"]))],null,null)}function AA(e){return gr(0,[nr(671088640,1,{centerRef:0}),(e()(),qs(1,0,null,null,39,"div",[["id","wrapper"]],null,null,null,null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(3,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(4,{usedUp:0}),(e()(),qs(5,0,null,null,14,"div",[["id","nameBar"]],null,null,null,null,null)),(e()(),qs(6,0,null,null,2,"div",[["id","left"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,hA)),ai(8,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(9,0,[[1,0],["center",1]],null,5,"div",[["id","center"]],null,null,null,null,null)),(e()(),cr(10,null,[""," "])),(e()(),Qs(16777216,null,null,1,null,dA)),ai(12,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,gA)),ai(14,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(15,0,null,null,4,"div",[["id","right"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,fA)),ai(17,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,bA)),ai(19,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(20,0,null,null,12,"div",[["id","lines"]],null,null,null,null,null)),(e()(),qs(21,0,null,null,1,"app-building-buff",[],null,null,null,Fy,xy)),ai(22,114688,null,0,Py,[sf,yf,Jv,Sf],{building:[0,"building"]},null),(e()(),qs(23,0,null,null,1,"app-building-upgrade",[],null,null,null,Ky,Hy)),ai(24,114688,null,0,Uy,[yf,nR,sf],{building:[0,"building"],parentRegion:[1,"parentRegion"]},null),(e()(),qs(25,0,null,null,1,"app-building-line",[],null,null,null,oA,Qy)),ai(26,114688,null,0,jy,[],{line:[0,"line"],building:[1,"building"]},null),(e()(),qs(27,0,null,null,1,"app-building-line",[],null,null,null,oA,Qy)),ai(28,114688,null,0,jy,[],{line:[0,"line"],building:[1,"building"]},null),(e()(),qs(29,0,null,null,1,"app-building-line",[],null,null,null,oA,Qy)),ai(30,114688,null,0,jy,[],{line:[0,"line"],building:[1,"building"]},null),(e()(),qs(31,0,null,null,1,"app-building-line",[],null,null,null,oA,Qy)),ai(32,114688,null,0,jy,[],{line:[0,"line"],building:[1,"building"]},null),(e()(),Qs(16777216,null,null,1,null,TA)),ai(34,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,CA)),ai(36,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,IA)),ai(38,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,yA)),ai(40,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component,t=e(n,4,0,l.building.isUsedUp());e(n,3,0,t),e(n,8,0,l.building.hasDetails()),e(n,12,0,l.getDisplayableEffectsValue()>0),e(n,14,0,l.getDisplayableEffectsValue()<0),e(n,17,0,!l.building.isComplexManagement()||l.building.isComplexManagement()&&!l.areComplexWorkersEnabled()),e(n,19,0,l.building.isComplexManagement()&&l.areComplexWorkersEnabled()),e(n,22,0,l.building),e(n,24,0,l.building,l.parentRegion),e(n,26,0,l.lines.FIRST,l.building),e(n,28,0,l.lines.SECOND,l.building),e(n,30,0,l.lines.THIRD,l.building),e(n,32,0,l.lines.FOURTH,l.building),e(n,34,0,l.demolishMode&&l.building.isDemolishable()),e(n,36,0,l.combineMode&&l.building.isCombinable()&&l.canCombine()),e(n,38,0,l.splitMode&&l.building.isSplittable()),e(n,40,0,l.arrangeMode&&l.canMove())}),(function(e,n){e(n,10,0,n.component.building.getName())}))}class NA{constructor(e,n){this.gameService=e,this.resourcesService=n}ngOnInit(){}isFortEnabled(){return this.gameService.isEnabled(Iu.FORT)}isFieldEnabled(){return this.gameService.isEnabled(Iu.FIELD)}isSeaEnabled(){return this.gameService.isEnabled(Iu.SEA)}isMountainsEnabled(){return this.gameService.isEnabled(Iu.MOUNTAINS)}isPlateauEnabled(){return this.gameService.isEnabled(Iu.PLATEAU)}getVillageStageName(){let e="Village";return Io.forEach(n=>{this.resourcesService.getPopulationCap()>=n.population&&(e=n.name)}),e}}var _A=Jl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:-webkit-box;display:flex;height:100%;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.entry[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:auto;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:100%;text-align:center;border-right:2px solid #000;cursor:pointer;text-decoration:none;color:#000;font-size:1em}.entry[_ngcontent-%COMP%]:last-of-type{border:none}.entry.active[_ngcontent-%COMP%]{background:var(--active-colour)}"]],data:{}});function wA(e){return gr(0,[(e()(),qs(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/regions/fort"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==qt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ai(1,671744,[[4,4]],0,ap,[up,qd,Bo],{routerLink:[0,"routerLink"]},null),ai(2,1720320,null,2,hp,[up,ol,gl,[2,op],[2,ap]],{routerLinkActive:[0,"routerLinkActive"]},null),nr(603979776,3,{links:1}),nr(603979776,4,{linksWithHrefs:1}),(e()(),cr(-1,null,["Fort"]))],(function(e,n){e(n,1,0,"/regions/fort"),e(n,2,0,"active")}),(function(e,n){e(n,0,0,qt(n,1).target,qt(n,1).href)}))}function PA(e){return gr(0,[(e()(),qs(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/regions/field"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==qt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ai(1,671744,[[8,4]],0,ap,[up,qd,Bo],{routerLink:[0,"routerLink"]},null),ai(2,1720320,null,2,hp,[up,ol,gl,[2,op],[2,ap]],{routerLinkActive:[0,"routerLinkActive"]},null),nr(603979776,7,{links:1}),nr(603979776,8,{linksWithHrefs:1}),(e()(),cr(-1,null,["Field"]))],(function(e,n){e(n,1,0,"/regions/field"),e(n,2,0,"active")}),(function(e,n){e(n,0,0,qt(n,1).target,qt(n,1).href)}))}function xA(e){return gr(0,[(e()(),qs(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/regions/mountains"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==qt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ai(1,671744,[[10,4]],0,ap,[up,qd,Bo],{routerLink:[0,"routerLink"]},null),ai(2,1720320,null,2,hp,[up,ol,gl,[2,op],[2,ap]],{routerLinkActive:[0,"routerLinkActive"]},null),nr(603979776,9,{links:1}),nr(603979776,10,{linksWithHrefs:1}),(e()(),cr(-1,null,["Mountains"]))],(function(e,n){e(n,1,0,"/regions/mountains"),e(n,2,0,"active")}),(function(e,n){e(n,0,0,qt(n,1).target,qt(n,1).href)}))}function kA(e){return gr(0,[(e()(),qs(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/regions/plateau"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==qt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ai(1,671744,[[12,4]],0,ap,[up,qd,Bo],{routerLink:[0,"routerLink"]},null),ai(2,1720320,null,2,hp,[up,ol,gl,[2,op],[2,ap]],{routerLinkActive:[0,"routerLinkActive"]},null),nr(603979776,11,{links:1}),nr(603979776,12,{linksWithHrefs:1}),(e()(),cr(-1,null,["Plateau"]))],(function(e,n){e(n,1,0,"/regions/plateau"),e(n,2,0,"active")}),(function(e,n){e(n,0,0,qt(n,1).target,qt(n,1).href)}))}function MA(e){return gr(0,[(e()(),qs(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/regions/sea"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==qt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ai(1,671744,[[14,4]],0,ap,[up,qd,Bo],{routerLink:[0,"routerLink"]},null),ai(2,1720320,null,2,hp,[up,ol,gl,[2,op],[2,ap]],{routerLinkActive:[0,"routerLinkActive"]},null),nr(603979776,13,{links:1}),nr(603979776,14,{linksWithHrefs:1}),(e()(),cr(-1,null,["Sea"]))],(function(e,n){e(n,1,0,"/regions/sea"),e(n,2,0,"active")}),(function(e,n){e(n,0,0,qt(n,1).target,qt(n,1).href)}))}function DA(e){return gr(0,[(e()(),qs(0,0,null,null,22,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/regions/village"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==qt(e,2).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ai(2,671744,[[2,4]],0,ap,[up,qd,Bo],{routerLink:[0,"routerLink"]},null),ai(3,1720320,null,2,hp,[up,ol,gl,[2,op],[2,ap]],{routerLinkActive:[0,"routerLinkActive"]},null),nr(603979776,1,{links:1}),nr(603979776,2,{linksWithHrefs:1}),(e()(),cr(6,null,["",""])),(e()(),Qs(16777216,null,null,1,null,wA)),ai(8,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(9,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/regions/forest"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==qt(e,10).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ai(10,671744,[[6,4]],0,ap,[up,qd,Bo],{routerLink:[0,"routerLink"]},null),ai(11,1720320,null,2,hp,[up,ol,gl,[2,op],[2,ap]],{routerLinkActive:[0,"routerLinkActive"]},null),nr(603979776,5,{links:1}),nr(603979776,6,{linksWithHrefs:1}),(e()(),cr(-1,null,["Forest"])),(e()(),Qs(16777216,null,null,1,null,PA)),ai(16,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,xA)),ai(18,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,kA)),ai(20,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,MA)),ai(22,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,"/regions/village"),e(n,3,0,"active"),e(n,8,0,l.isFortEnabled()),e(n,10,0,"/regions/forest"),e(n,11,0,"active"),e(n,16,0,l.isFieldEnabled()),e(n,18,0,l.isMountainsEnabled()),e(n,20,0,l.isPlateauEnabled()),e(n,22,0,l.isSeaEnabled())}),(function(e,n){var l=n.component;e(n,1,0,qt(n,2).target,qt(n,2).href),e(n,6,0,l.getVillageStageName()),e(n,9,0,qt(n,10).target,qt(n,10).href)}))}class LA{constructor(e){this.happinessService=e,this.id=Math.random()}ngOnInit(){}getHappiness(){return Uu.round(this.happinessService.getHappiness(),2)}getHappinessValue(){return this.happinessService.getHappiness()}getSum(){return this.happinessService.calculateDailyChange()}getSumText(){return Uu.round(this.getSum(),2)}getHappinessBonus(){return this.happinessService.getHappinessEffect()}}var FA=Jl({encapsulation:0,styles:[["[_nghost-%COMP%]{display:inline-block}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}.inline[_ngcontent-%COMP%]{display:inline-block}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}.center[_ngcontent-%COMP%]{text-align:center}.positiveColor[_ngcontent-%COMP%]{color:var(--positive-colour)}.negativeColor[_ngcontent-%COMP%]{color:var(--negative-colour)}"]],data:{}});function UA(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(1,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"],margin:[3,"margin"]},null)],(function(e,n){e(n,1,0,"angry","happiness","","0 0 0 4px")}),null)}function HA(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(1,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"],margin:[3,"margin"]},null)],(function(e,n){e(n,1,0,"sad","happiness","","0 0 0 4px")}),null)}function GA(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(1,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"],margin:[3,"margin"]},null)],(function(e,n){e(n,1,0,"neutral","happiness","","0 0 0 4px")}),null)}function BA(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(1,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"],margin:[3,"margin"]},null)],(function(e,n){e(n,1,0,"happy","happiness","","0 0 0 4px")}),null)}function WA(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(1,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"],margin:[3,"margin"]},null)],(function(e,n){e(n,1,0,"overjoyed","happiness","","0 0 0 4px")}),null)}function VA(e){return gr(0,[(e()(),qs(0,0,null,null,37,"div",[["appTooltip",""],["class","tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==qt(e,1).onmousemove(l)&&t),t}),null,null)),ai(1,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),qs(2,0,null,null,19,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),qs(3,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),qs(4,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(-1,null,["Happiness"])),(e()(),qs(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(7,0,null,null,7,"div",[["class","center"]],null,null,null,null,null)),(e()(),cr(-1,null,[" (bonus: "])),(e()(),qs(9,0,null,null,4,"div",[["class","inline"]],null,null,null,null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(11,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(12,{negativeColor:0,positiveColor:1}),(e()(),cr(13,null,["","%"])),(e()(),cr(-1,null,[") "])),(e()(),qs(15,0,null,null,6,"div",[["class","center inline"]],null,null,null,null,null)),(e()(),qs(16,0,null,null,4,"div",[["class","center inline"]],null,null,null,null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(18,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(19,{negativeColor:0,positiveColor:1}),(e()(),cr(20,null,["","%"])),(e()(),cr(-1,null,[" per day "])),(e()(),qs(22,0,null,null,15,"div",[["class","icon"],["id","wrapper"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,UA)),ai(24,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,HA)),ai(26,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,GA)),ai(28,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,BA)),ai(30,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,WA)),ai(32,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(33,0,null,null,4,"div",[["class","inline"]],null,null,null,null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(35,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(36,{negativeColor:0,positiveColor:1}),(e()(),cr(37,null,["","%"]))],(function(e,n){var l=n.component;e(n,1,0,"happiness-"+l.id);var t=e(n,12,0,l.getHappinessBonus()<0,l.getHappinessBonus()>0);e(n,11,0,"inline",t);var i=e(n,19,0,l.getSum()<0,l.getSum()>0);e(n,18,0,"center inline",i),e(n,24,0,l.getHappinessValue()>=0&&l.getHappinessValue()<=10),e(n,26,0,l.getHappinessValue()>10&&l.getHappinessValue()<=40),e(n,28,0,l.getHappinessValue()>40&&l.getHappinessValue()<=60),e(n,30,0,l.getHappinessValue()>60&&l.getHappinessValue()<=90),e(n,32,0,l.getHappinessValue()>90&&l.getHappinessValue()<=100);var s=e(n,36,0,l.getHappinessBonus()<=0,l.getHappinessBonus()>0);e(n,35,0,"inline",s)}),(function(e,n){var l=n.component;e(n,2,0,yt(1,"happiness-",l.id,"")),e(n,13,0,l.getHappinessBonus()),e(n,20,0,l.getSumText()),e(n,37,0,l.getHappiness())}))}class zA{constructor(e,n,l,t,i,s,r,u){this.modalService=e,this.landService=n,this.gameService=l,this.regionService=t,this.tutorialService=i,this.optionsService=s,this.changeDetectorRef=r,this.thisRegion=u,this.demolishMode=!1,this.arrangeMode=!1,this.combineMode=!1,this.splitMode=!1,this.filterBuilding=this.regionService.getFilterBuilding(),this.filterWorking=this.regionService.getFilterWorking(),this.currentPage=0,this.allBuildings=Ru.ALL,this.buildingStates=lR}ngOnInit(){this.tutorialService.checkRegionTutorial(this.thisRegion)}getUniqueBuildingsFromCurrentView(){const e=[];return this.regionService.buildings.forEach(n=>{e.includes(n.getBuildingType())||e.push(n.getBuildingType()),n.getBuildingType()!==Ru.CONSTRUCTION||e.includes(n.getConstructing())?n.getBuildingType()!==Ru.DECONSTRUCTION||e.includes(n.getDecontructing())||e.push(n.getDecontructing()):e.push(n.getConstructing())}),e}getBuildings(){const e=this.regionService.getBuildings().filter(e=>this.filterWorking===lR.ALL||this.filterWorking===lR.WORKING&&e.isWorking()||this.filterWorking===lR.IDLE&&!e.isWorking()&&e.isStoppable()).filter(e=>this.filterBuilding===Ru.ALL||e.getBuildingType()===Ru.CONSTRUCTION&&e.getConstructing()===this.filterBuilding||e.getBuildingType()===Ru.DECONSTRUCTION&&e.getDecontructing()===this.filterBuilding||e.getBuildingType()===this.filterBuilding);return 0!==e.length||this.filterBuilding===Ru.ALL||this.getUniqueBuildingsFromCurrentView().includes(this.filterBuilding)||(this.filterBuilding=Ru.ALL,this.regionService.setFilterBuildings(Ru.ALL)),e}getBuildingName(e){return Uu.prepareBuildingName(e)}updateFilter(e){this.filterBuilding=Ru[Ru[e.target.value]],this.regionService.setFilterBuildings(this.filterBuilding),this.currentPage=0}updateFilter2(e){this.filterWorking=Ru[Ru[e.target.value]],this.regionService.setFilterWorking(this.filterWorking),this.currentPage=0}openBuildModal(){this.demolishMode=!1,this.arrangeMode=!1,this.modalService.setRegion(this.thisRegion),this.modalService.open(ju.BUILD)}getUnemployed(){return this.regionService.getUnemployed()}getFreeLand(){return this.landService.getLand()}toggleDemolishMode(){this.demolishMode=!this.demolishMode,this.arrangeMode=!1,this.splitMode=!1,this.clearCombineMode()}toggleArrangeMode(){this.arrangeMode=!this.arrangeMode,this.demolishMode=!1,this.splitMode=!1,this.clearCombineMode()}toggleCombineMode(){this.combineMode=!this.combineMode,this.splitMode=!1,this.demolishMode=!1,this.arrangeMode=!1}toggleSplitMode(){this.splitMode=!this.splitMode,this.combineMode=!1,this.demolishMode=!1,this.arrangeMode=!1}clearCombineMode(){this.combineMode=!1,this.regionService.clearCombineMode()}isUrbanPlanningEnabled(){return this.gameService.isEnabled(Iu.URBAN_PLANNING)}hasCombinableBuildings(){return this.getBuildings().filter(e=>e.isCombinable()).length>1}hasSplittableBuildings(){return this.getBuildings().filter(e=>e.isSplittable()).length>=1}onKeydownHandler(e){this.demolishMode=!1,this.arrangeMode=!1,this.clearCombineMode()}enableAll(){this.getBuildings().filter(e=>e.isStoppable()).forEach(e=>{e.stopProduction(),e.startProduction()})}disableAll(){this.getBuildings().filter(e=>e.isStoppable()).forEach(e=>e.stopProduction())}isPagedViewEnabled(){return this.optionsService.getOption(rf.PAGED_VIEW)}getBuildingPerPage(){return this.optionsService.getOption(rf.BUILDINGS_PER_PAGE)}getPagesNumber(){let e=Math.ceil(this.getBuildings().length/this.getBuildingPerPage());return 0===e&&(e=1),Array.apply(null,Array(e)).map((function(e,n){return n}))}setPage(e){this.currentPage=e}getPagedBuildings(){const e=this.getBuildingPerPage();return this.getBuildings().slice(this.currentPage*e,this.currentPage*e+e)}autoSort(){this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to <b>auto sort</b> buildings?");const e=this.modalService.registerForConfirmation().subscribe(n=>{e.unsubscribe(),n&&this.regionService.autoSort()})}autoMerge(){this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to <b>auto merge</b> buildings?");const e=this.modalService.registerForConfirmation().subscribe(n=>{e.unsubscribe(),n&&this.regionService.autoMerge()})}}class YA extends zA{constructor(e,n,l,t,i,s,r,u,o,a){super(e,n,l,t,u,s,o,Du.VILLAGE),this.landService=n,this.villageService=t,this.resourcesService=i,this.managementService=r,this.router=a}getPopulation(){return this.villageService.getPopulation()}getPopulationCap(){return this.villageService.getPopulationCap()}getTakenLand(){return this.landService.getTakenLand()}getSick(){return this.resourcesService.getSick()}getSicknessName(e){return Uu.prepareSicknessName(e)}openHappinessManagement(){this.isManagementUnlocked()&&this.router.navigate(["/management/happiness"])}isManagementUnlocked(){return this.gameService.isEnabled(Iu.MANAGEMENT)}workshopsResearch(){this.villageService.getBuildings().filter(e=>e.getBuildingType()===Ru.WORKSHOP).forEach(e=>e.switchToResearch()),this.modalService.info("Workshops switched to researching")}workshopsCraft(){this.villageService.getBuildings().filter(e=>e.getBuildingType()===Ru.WORKSHOP).forEach(e=>e.switchToCrafting()),this.modalService.info("Workshops switched to crafting")}}var $A=Jl({encapsulation:0,styles:[wy,[".herbal[_ngcontent-%COMP%]{height:16px}.pointer[_ngcontent-%COMP%]{cursor:pointer}"]],data:{}});function KA(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleDemolishMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Demolish"]))],null,null)}function jA(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleDemolishMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Stop"]))],null,null)}function QA(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleArrangeMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Arrange"]))],null,null)}function qA(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleArrangeMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Stop"]))],null,null)}function XA(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleCombineMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Combine"]))],null,null)}function ZA(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleCombineMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Stop"]))],null,null)}function JA(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleSplitMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Split"]))],null,null)}function eN(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleSplitMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Stop"]))],null,null)}function nN(e){return gr(0,[(e()(),qs(0,0,null,null,3,"option",[],null,null,null,null,null)),ai(1,147456,null,0,Rm,[ol,gl,[2,vm]],{value:[0,"value"]},null),ai(2,147456,null,0,Tm,[ol,gl,[8,null]],{value:[0,"value"]},null),(e()(),cr(3,null,["",""]))],(function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)}),(function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))}))}function lN(e){return gr(0,[(e()(),qs(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),qs(1,0,null,null,0,"img",[["alt",""],["class","herbal"],["src","assets/resources/herbal_medicine.svg"]],null,null,null,null,null))],null,null)}function tN(e){return gr(0,[(e()(),qs(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),cr(1,null,[" ",". "," ","% "])),ur(2,2),(e()(),Qs(16777216,null,null,1,null,lN)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){e(n,4,0,n.context.$implicit.medicine>0)}),(function(e,n){var l=n.context.index+1,t=n.component.getSicknessName(n.context.$implicit.sickness),i=ql(n,1,2,e(n,2,0,qt(n.parent.parent,0),n.context.$implicit.progress,"0.0-0"));e(n,1,0,l,t,i)}))}function iN(e){return gr(0,[(e()(),qs(0,0,null,null,10,"span",[["appTooltip",""],["class","icon tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==qt(e,1).onmousemove(l)&&t),t}),null,null)),ai(1,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),qs(2,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(3,114688,null,0,$p,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),cr(4,null,[" "," "])),(e()(),qs(5,0,null,null,4,"span",[["id","sick"]],null,null,null,null,null)),(e()(),cr(6,null,[" Sick: "," "])),(e()(),qs(7,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,tN)),ai(9,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),cr(-1,null,[" \xa0\xa0\xa0 "]))],(function(e,n){var l=n.component;e(n,1,0,"sick"),e(n,3,0,"sick","","0 0 0 2px"),e(n,9,0,l.getSick())}),(function(e,n){var l=n.component;e(n,4,0,l.getSick().length),e(n,6,0,l.getSick().length)}))}function sN(e){return gr(0,[(e()(),qs(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-building",[],null,null,null,AA,cA)),ai(2,8503296,null,0,aA,[pf,sf,yf,nO,iR,uf,df],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.demolishMode,l.combineMode,l.splitMode,l.arrangeMode,n.context.$implicit,l.villageService)}),null)}function rN(e){return gr(0,[(e()(),qs(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["Buildings"])),(e()(),qs(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,sN)),ai(6,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,6,0,n.component.getBuildings())}),null)}function uN(e){return gr(0,[(e()(),qs(0,0,null,null,4,"span",[["class","page"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.setPage(e.context.$implicit)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(2,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(3,{activePage:0}),(e()(),cr(4,null,["page ",""]))],(function(e,n){var l=e(n,3,0,n.component.currentPage===n.context.$implicit);e(n,2,0,"page",l)}),(function(e,n){e(n,4,0,n.context.$implicit+1)}))}function oN(e){return gr(0,[(e()(),qs(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-building",[],null,null,null,AA,cA)),ai(2,8503296,null,0,aA,[pf,sf,yf,nO,iR,uf,df],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.demolishMode,l.combineMode,l.splitMode,l.arrangeMode,n.context.$implicit,l.villageService)}),null)}function aN(e){return gr(0,[(e()(),qs(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,uN)),ai(3,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,oN)),ai(6,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,3,0,l.getPagesNumber()),e(n,6,0,l.getPagedBuildings())}),null)}function cN(e){return gr(0,[ci(0,Pa,[Ki]),(e()(),qs(1,0,null,null,98,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),qs(3,0,null,null,1,"app-top-menu",[],null,null,null,DA,_A)),ai(4,114688,null,0,NA,[Sf,yf],null,null),(e()(),qs(5,0,null,null,94,"div",[["id","content"]],null,null,null,null,null)),(e()(),qs(6,0,null,null,64,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),qs(7,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.openBuildModal()&&t),t}),null,null)),(e()(),cr(-1,null,["Build"])),(e()(),Qs(16777216,null,null,1,null,KA)),ai(10,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,jA)),ai(12,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,QA)),ai(14,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,qA)),ai(16,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,XA)),ai(18,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,ZA)),ai(20,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,JA)),ai(22,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,eN)),ai(24,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(25,0,null,null,11,"button",[["class","dropdown"]],null,null,null,null,null)),(e()(),cr(-1,null,["Actions "])),(e()(),qs(27,0,null,null,0,"img",[["height","10px"],["src","assets/arrow_down.svg"]],null,null,null,null,null)),(e()(),qs(28,0,null,null,8,"ul",[["class","dropdown-content"]],null,null,null,null,null)),(e()(),qs(29,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.autoSort()&&t),t}),null,null)),(e()(),cr(-1,null,["Sort"])),(e()(),qs(31,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.autoMerge()&&t),t}),null,null)),(e()(),cr(-1,null,["Merge"])),(e()(),qs(33,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.workshopsResearch()&&t),t}),null,null)),(e()(),cr(-1,null,["Workshops research"])),(e()(),qs(35,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.workshopsCraft()&&t),t}),null,null)),(e()(),cr(-1,null,["Workshops craft"])),(e()(),qs(37,0,null,null,33,"div",[["id","side"]],null,null,null,null,null)),(e()(),cr(-1,null,[" Filter:"])),(e()(),qs(39,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(40,0,null,null,30,"div",[["id","filters"]],null,null,null,null,null)),(e()(),qs(41,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,42).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,42).onTouched()&&t),"change"===n&&(t=!1!==i.updateFilter(l)&&t),"ngModelChange"===n&&(t=!1!==(i.filterBuilding=l)&&t),t}),null,null)),ai(42,16384,null,0,vm,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[vm]),ai(44,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(46,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(47,0,null,null,3,"option",[],null,null,null,null,null)),ai(48,147456,null,0,Rm,[ol,gl,[2,vm]],{value:[0,"value"]},null),ai(49,147456,null,0,Tm,[ol,gl,[8,null]],{value:[0,"value"]},null),(e()(),cr(50,null,["",""])),(e()(),Qs(16777216,null,null,1,null,nN)),ai(52,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(53,0,null,null,17,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,54).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,54).onTouched()&&t),"change"===n&&(t=!1!==i.updateFilter2(l)&&t),"ngModelChange"===n&&(t=!1!==(i.filterWorking=l)&&t),t}),null,null)),ai(54,16384,null,0,vm,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[vm]),ai(56,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(58,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(59,0,null,null,3,"option",[],null,null,null,null,null)),ai(60,147456,null,0,Rm,[ol,gl,[2,vm]],{value:[0,"value"]},null),ai(61,147456,null,0,Tm,[ol,gl,[8,null]],{value:[0,"value"]},null),(e()(),cr(-1,null,["All"])),(e()(),qs(63,0,null,null,3,"option",[],null,null,null,null,null)),ai(64,147456,null,0,Rm,[ol,gl,[2,vm]],{value:[0,"value"]},null),ai(65,147456,null,0,Tm,[ol,gl,[8,null]],{value:[0,"value"]},null),(e()(),cr(-1,null,["Working"])),(e()(),qs(67,0,null,null,3,"option",[],null,null,null,null,null)),ai(68,147456,null,0,Rm,[ol,gl,[2,vm]],{value:[0,"value"]},null),ai(69,147456,null,0,Tm,[ol,gl,[8,null]],{value:[0,"value"]},null),(e()(),cr(-1,null,["Idle"])),(e()(),qs(71,0,null,null,24,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(72,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(73,114688,null,0,$p,[],{name:[0,"name"]},null),(e()(),cr(74,null,[" ","/"," \xa0\xa0 "])),(e()(),qs(75,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(76,114688,null,0,$p,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),cr(77,null,[" "," \xa0\xa0\xa0 "])),(e()(),Qs(16777216,null,null,1,null,iN)),ai(79,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(80,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(81,114688,null,0,$p,[],{name:[0,"name"]},null),(e()(),cr(82,null,[" "," \xa0\xa0\xa0 "])),(e()(),qs(83,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(84,114688,null,0,$p,[],{name:[0,"name"],title:[1,"title"]},null),(e()(),cr(85,null,["\xa0"," \xa0\xa0\xa0 "])),(e()(),qs(86,0,null,null,4,"app-happiness",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.openHappinessManagement()&&t),t}),VA,FA)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(88,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(89,{pointer:0}),ai(90,114688,null,0,LA,[bf],null,null),(e()(),qs(91,0,null,null,4,"div",[["id","allControl"]],null,null,null,null,null)),(e()(),qs(92,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.enableAll()&&t),t}),null,null)),(e()(),cr(-1,null,["all on"])),(e()(),qs(94,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.disableAll()&&t),t}),null,null)),(e()(),cr(-1,null,["all off"])),(e()(),Qs(16777216,null,null,1,null,rN)),ai(97,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,aN)),ai(99,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,4,0),e(n,10,0,!l.demolishMode),e(n,12,0,l.demolishMode),e(n,14,0,!l.arrangeMode&&l.getBuildings().length>1),e(n,16,0,l.arrangeMode),e(n,18,0,!l.combineMode&&l.isUrbanPlanningEnabled()&&l.hasCombinableBuildings()),e(n,20,0,l.combineMode),e(n,22,0,!l.splitMode&&l.isUrbanPlanningEnabled()&&l.hasSplittableBuildings()),e(n,24,0,l.splitMode),e(n,44,0,l.filterBuilding),e(n,48,0,l.allBuildings),e(n,49,0,l.allBuildings),e(n,52,0,l.getUniqueBuildingsFromCurrentView()),e(n,56,0,l.filterWorking),e(n,60,0,l.buildingStates.ALL),e(n,61,0,l.buildingStates.ALL),e(n,64,0,l.buildingStates.WORKING),e(n,65,0,l.buildingStates.WORKING),e(n,68,0,l.buildingStates.IDLE),e(n,69,0,l.buildingStates.IDLE),e(n,73,0,"population"),e(n,76,0,"hammer","Workers","0 0 0 2px"),e(n,79,0,l.getSick().length>0),e(n,81,0,"land"),e(n,84,0,"village","Village size");var t=e(n,89,0,l.isManagementUnlocked());e(n,88,0,t),e(n,90,0),e(n,97,0,!l.isPagedViewEnabled()),e(n,99,0,l.isPagedViewEnabled())}),(function(e,n){var l=n.component;e(n,41,0,qt(n,46).ngClassUntouched,qt(n,46).ngClassTouched,qt(n,46).ngClassPristine,qt(n,46).ngClassDirty,qt(n,46).ngClassValid,qt(n,46).ngClassInvalid,qt(n,46).ngClassPending),e(n,50,0,l.getBuildingName(l.allBuildings)),e(n,53,0,qt(n,58).ngClassUntouched,qt(n,58).ngClassTouched,qt(n,58).ngClassPristine,qt(n,58).ngClassDirty,qt(n,58).ngClassValid,qt(n,58).ngClassInvalid,qt(n,58).ngClassPending),e(n,74,0,l.getPopulation(),l.getPopulationCap()),e(n,77,0,l.getUnemployed()),e(n,82,0,l.getFreeLand()),e(n,85,0,l.getTakenLand())}))}function hN(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-village",[],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==qt(e,1).onKeydownHandler(l)&&t),t}),cN,$A)),ai(1,114688,null,0,YA,[pf,nR,Sf,iR,yf,uf,nO,mf,_n,up],null,null)],(function(e,n){e(n,1,0)}),null)}var dN=Ht("app-village",YA,hN,{},{},[]);class gN extends zA{constructor(e,n,l,t,i,s,r){super(e,n,l,i,t,s,r,Du.FORT),this.fortService=i}}var pN=Jl({encapsulation:0,styles:[wy,[""]],data:{}});function mN(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleDemolishMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Demolish"]))],null,null)}function fN(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleDemolishMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Stop"]))],null,null)}function SN(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleArrangeMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Arrange"]))],null,null)}function EN(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleArrangeMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Stop"]))],null,null)}function vN(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleCombineMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Combine"]))],null,null)}function RN(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleCombineMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Stop"]))],null,null)}function ON(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleSplitMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Split"]))],null,null)}function bN(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleSplitMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Stop"]))],null,null)}function TN(e){return gr(0,[(e()(),qs(0,0,null,null,3,"option",[],null,null,null,null,null)),ai(1,147456,null,0,Rm,[ol,gl,[2,vm]],{value:[0,"value"]},null),ai(2,147456,null,0,Tm,[ol,gl,[8,null]],{value:[0,"value"]},null),(e()(),cr(3,null,["",""]))],(function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)}),(function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))}))}function CN(e){return gr(0,[(e()(),qs(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-building",[],null,null,null,AA,cA)),ai(2,8503296,null,0,aA,[pf,sf,yf,nO,iR,uf,df],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.demolishMode,l.combineMode,l.splitMode,l.arrangeMode,n.context.$implicit,l.fortService)}),null)}function IN(e){return gr(0,[(e()(),qs(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["Buildings"])),(e()(),qs(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,CN)),ai(6,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,6,0,n.component.getBuildings())}),null)}function yN(e){return gr(0,[(e()(),qs(0,0,null,null,4,"span",[["class","page"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.setPage(e.context.$implicit)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(2,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(3,{activePage:0}),(e()(),cr(4,null,["page ",""]))],(function(e,n){var l=e(n,3,0,n.component.currentPage===n.context.$implicit);e(n,2,0,"page",l)}),(function(e,n){e(n,4,0,n.context.$implicit+1)}))}function AN(e){return gr(0,[(e()(),qs(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-building",[],null,null,null,AA,cA)),ai(2,8503296,null,0,aA,[pf,sf,yf,nO,iR,uf,df],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.demolishMode,l.combineMode,l.splitMode,l.arrangeMode,n.context.$implicit,l.fortService)}),null)}function NN(e){return gr(0,[(e()(),qs(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,yN)),ai(3,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,AN)),ai(6,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,3,0,l.getPagesNumber()),e(n,6,0,l.getPagedBuildings())}),null)}function _N(e){return gr(0,[(e()(),qs(0,0,null,null,79,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"app-top-menu",[],null,null,null,DA,_A)),ai(3,114688,null,0,NA,[Sf,yf],null,null),(e()(),qs(4,0,null,null,75,"div",[["id","content"]],null,null,null,null,null)),(e()(),qs(5,0,null,null,58,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),qs(6,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.openBuildModal()&&t),t}),null,null)),(e()(),cr(-1,null,["Build"])),(e()(),Qs(16777216,null,null,1,null,mN)),ai(9,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,fN)),ai(11,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,SN)),ai(13,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,EN)),ai(15,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,vN)),ai(17,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,RN)),ai(19,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,ON)),ai(21,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,bN)),ai(23,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(24,0,null,null,5,"button",[["class","dropdown"]],null,null,null,null,null)),(e()(),cr(-1,null,["Actions "])),(e()(),qs(26,0,null,null,0,"img",[["height","10px"],["src","assets/arrow_down.svg"]],null,null,null,null,null)),(e()(),qs(27,0,null,null,2,"ul",[["class","dropdown-content"]],null,null,null,null,null)),(e()(),qs(28,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.autoSort()&&t),t}),null,null)),(e()(),cr(-1,null,["Sort"])),(e()(),qs(30,0,null,null,33,"div",[["id","side"]],null,null,null,null,null)),(e()(),cr(-1,null,[" Filter:"])),(e()(),qs(32,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(33,0,null,null,30,"div",[["id","filters"]],null,null,null,null,null)),(e()(),qs(34,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,35).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,35).onTouched()&&t),"change"===n&&(t=!1!==i.updateFilter(l)&&t),"ngModelChange"===n&&(t=!1!==(i.filterBuilding=l)&&t),t}),null,null)),ai(35,16384,null,0,vm,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[vm]),ai(37,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(39,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(40,0,null,null,3,"option",[],null,null,null,null,null)),ai(41,147456,null,0,Rm,[ol,gl,[2,vm]],{value:[0,"value"]},null),ai(42,147456,null,0,Tm,[ol,gl,[8,null]],{value:[0,"value"]},null),(e()(),cr(43,null,["",""])),(e()(),Qs(16777216,null,null,1,null,TN)),ai(45,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(46,0,null,null,17,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,47).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,47).onTouched()&&t),"change"===n&&(t=!1!==i.updateFilter2(l)&&t),"ngModelChange"===n&&(t=!1!==(i.filterWorking=l)&&t),t}),null,null)),ai(47,16384,null,0,vm,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[vm]),ai(49,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(51,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(52,0,null,null,3,"option",[],null,null,null,null,null)),ai(53,147456,null,0,Rm,[ol,gl,[2,vm]],{value:[0,"value"]},null),ai(54,147456,null,0,Tm,[ol,gl,[8,null]],{value:[0,"value"]},null),(e()(),cr(-1,null,["All"])),(e()(),qs(56,0,null,null,3,"option",[],null,null,null,null,null)),ai(57,147456,null,0,Rm,[ol,gl,[2,vm]],{value:[0,"value"]},null),ai(58,147456,null,0,Tm,[ol,gl,[8,null]],{value:[0,"value"]},null),(e()(),cr(-1,null,["Working"])),(e()(),qs(60,0,null,null,3,"option",[],null,null,null,null,null)),ai(61,147456,null,0,Rm,[ol,gl,[2,vm]],{value:[0,"value"]},null),ai(62,147456,null,0,Tm,[ol,gl,[8,null]],{value:[0,"value"]},null),(e()(),cr(-1,null,["Idle"])),(e()(),qs(64,0,null,null,11,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(65,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(66,114688,null,0,$p,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),cr(67,null,[" "," \xa0\xa0\xa0 "])),(e()(),qs(68,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(69,114688,null,0,$p,[],{name:[0,"name"]},null),(e()(),cr(70,null,[" "," "])),(e()(),qs(71,0,null,null,4,"div",[["id","allControl"]],null,null,null,null,null)),(e()(),qs(72,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.enableAll()&&t),t}),null,null)),(e()(),cr(-1,null,["all on"])),(e()(),qs(74,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.disableAll()&&t),t}),null,null)),(e()(),cr(-1,null,["all off"])),(e()(),Qs(16777216,null,null,1,null,IN)),ai(77,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,NN)),ai(79,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,3,0),e(n,9,0,!l.demolishMode),e(n,11,0,l.demolishMode),e(n,13,0,!l.arrangeMode&&l.getBuildings().length>1),e(n,15,0,l.arrangeMode),e(n,17,0,!l.combineMode&&l.isUrbanPlanningEnabled()&&l.hasCombinableBuildings()),e(n,19,0,l.combineMode),e(n,21,0,!l.splitMode&&l.isUrbanPlanningEnabled()&&l.hasSplittableBuildings()),e(n,23,0,l.splitMode),e(n,37,0,l.filterBuilding),e(n,41,0,l.allBuildings),e(n,42,0,l.allBuildings),e(n,45,0,l.getUniqueBuildingsFromCurrentView()),e(n,49,0,l.filterWorking),e(n,53,0,l.buildingStates.ALL),e(n,54,0,l.buildingStates.ALL),e(n,57,0,l.buildingStates.WORKING),e(n,58,0,l.buildingStates.WORKING),e(n,61,0,l.buildingStates.IDLE),e(n,62,0,l.buildingStates.IDLE),e(n,66,0,"hammer","Workers","0 0 0 2px"),e(n,69,0,"land"),e(n,77,0,!l.isPagedViewEnabled()),e(n,79,0,l.isPagedViewEnabled())}),(function(e,n){var l=n.component;e(n,34,0,qt(n,39).ngClassUntouched,qt(n,39).ngClassTouched,qt(n,39).ngClassPristine,qt(n,39).ngClassDirty,qt(n,39).ngClassValid,qt(n,39).ngClassInvalid,qt(n,39).ngClassPending),e(n,43,0,l.getBuildingName(l.allBuildings)),e(n,46,0,qt(n,51).ngClassUntouched,qt(n,51).ngClassTouched,qt(n,51).ngClassPristine,qt(n,51).ngClassDirty,qt(n,51).ngClassValid,qt(n,51).ngClassInvalid,qt(n,51).ngClassPending),e(n,67,0,l.getUnemployed()),e(n,70,0,l.getFreeLand())}))}function wN(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-fort",[],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==qt(e,1).onKeydownHandler(l)&&t),t}),_N,pN)),ai(1,114688,null,0,gN,[pf,nR,Sf,mf,Eb,uf,_n],null,null)],(function(e,n){e(n,1,0)}),null)}var PN=Ht("app-fort",gN,wN,{},{},[]);let xN=(()=>{class e extends tR{constructor(e,n,l,t,i){super(n,e,l,i,t,Du.FOREST,Wu.FOREST)}init(){this.buildings.push(new lE(this.servicesService,this.idService.getNextId()).build()),this.buildings.push(new gE(this.servicesService,this.idService.getNextId()).build()),this.buildings.forEach(e=>this.landService.takeLand(e.getSize()))}}return e.ngInjectableDef=ce({factory:function(){return new e(De(yf),De(Zv),De(sf),De(fv),De(nR))},token:e,providedIn:"root"}),e})();class kN extends zA{constructor(e,n,l,t,i,s,r){super(e,n,l,i,t,s,r,Du.FOREST),this.forestService=i}getForestSize(){return this.landService.getForest()}}var MN=Jl({encapsulation:0,styles:[wy,[".critical[_ngcontent-%COMP%]{color:var(--negative-colour)}"]],data:{}});function DN(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleDemolishMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Demolish"]))],null,null)}function LN(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleDemolishMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Stop"]))],null,null)}function FN(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleArrangeMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Arrange"]))],null,null)}function UN(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleArrangeMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Stop"]))],null,null)}function HN(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleCombineMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Combine"]))],null,null)}function GN(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleCombineMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Stop"]))],null,null)}function BN(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleSplitMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Split"]))],null,null)}function WN(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleSplitMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Stop"]))],null,null)}function VN(e){return gr(0,[(e()(),qs(0,0,null,null,3,"option",[],null,null,null,null,null)),ai(1,147456,null,0,Rm,[ol,gl,[2,vm]],{value:[0,"value"]},null),ai(2,147456,null,0,Tm,[ol,gl,[8,null]],{value:[0,"value"]},null),(e()(),cr(3,null,["",""]))],(function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)}),(function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))}))}function zN(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(1,null,["",""]))],null,(function(e,n){e(n,1,0,n.component.getForestSize())}))}function YN(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[["class","critical"]],null,null,null,null,null)),(e()(),cr(1,null,["",""]))],null,(function(e,n){e(n,1,0,n.component.getForestSize())}))}function $N(e){return gr(0,[(e()(),qs(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-building",[],null,null,null,AA,cA)),ai(2,8503296,null,0,aA,[pf,sf,yf,nO,iR,uf,df],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.demolishMode,l.combineMode,l.splitMode,l.arrangeMode,n.context.$implicit,l.forestService)}),null)}function KN(e){return gr(0,[(e()(),qs(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["Buildings"])),(e()(),qs(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,$N)),ai(6,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,6,0,n.component.getBuildings())}),null)}function jN(e){return gr(0,[(e()(),qs(0,0,null,null,4,"span",[["class","page"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.setPage(e.context.$implicit)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(2,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(3,{activePage:0}),(e()(),cr(4,null,["page ",""]))],(function(e,n){var l=e(n,3,0,n.component.currentPage===n.context.$implicit);e(n,2,0,"page",l)}),(function(e,n){e(n,4,0,n.context.$implicit+1)}))}function QN(e){return gr(0,[(e()(),qs(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-building",[],null,null,null,AA,cA)),ai(2,8503296,null,0,aA,[pf,sf,yf,nO,iR,uf,df],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.demolishMode,l.combineMode,l.splitMode,l.arrangeMode,n.context.$implicit,l.forestService)}),null)}function qN(e){return gr(0,[(e()(),qs(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,jN)),ai(3,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,QN)),ai(6,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,3,0,l.getPagesNumber()),e(n,6,0,l.getPagedBuildings())}),null)}function XN(e){return gr(0,[(e()(),qs(0,0,null,null,86,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"app-top-menu",[],null,null,null,DA,_A)),ai(3,114688,null,0,NA,[Sf,yf],null,null),(e()(),qs(4,0,null,null,82,"div",[["id","content"]],null,null,null,null,null)),(e()(),qs(5,0,null,null,58,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),qs(6,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.openBuildModal()&&t),t}),null,null)),(e()(),cr(-1,null,["Build"])),(e()(),Qs(16777216,null,null,1,null,DN)),ai(9,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,LN)),ai(11,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,FN)),ai(13,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,UN)),ai(15,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,HN)),ai(17,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,GN)),ai(19,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,BN)),ai(21,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,WN)),ai(23,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(24,0,null,null,5,"button",[["class","dropdown"]],null,null,null,null,null)),(e()(),cr(-1,null,["Actions "])),(e()(),qs(26,0,null,null,0,"img",[["height","10px"],["src","assets/arrow_down.svg"]],null,null,null,null,null)),(e()(),qs(27,0,null,null,2,"ul",[["class","dropdown-content"]],null,null,null,null,null)),(e()(),qs(28,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.autoSort()&&t),t}),null,null)),(e()(),cr(-1,null,["Sort"])),(e()(),qs(30,0,null,null,33,"div",[["id","side"]],null,null,null,null,null)),(e()(),cr(-1,null,[" Filter:"])),(e()(),qs(32,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(33,0,null,null,30,"div",[["id","filters"]],null,null,null,null,null)),(e()(),qs(34,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,35).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,35).onTouched()&&t),"change"===n&&(t=!1!==i.updateFilter(l)&&t),"ngModelChange"===n&&(t=!1!==(i.filterBuilding=l)&&t),t}),null,null)),ai(35,16384,null,0,vm,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[vm]),ai(37,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(39,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(40,0,null,null,3,"option",[],null,null,null,null,null)),ai(41,147456,null,0,Rm,[ol,gl,[2,vm]],{value:[0,"value"]},null),ai(42,147456,null,0,Tm,[ol,gl,[8,null]],{value:[0,"value"]},null),(e()(),cr(43,null,["",""])),(e()(),Qs(16777216,null,null,1,null,VN)),ai(45,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(46,0,null,null,17,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,47).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,47).onTouched()&&t),"change"===n&&(t=!1!==i.updateFilter2(l)&&t),"ngModelChange"===n&&(t=!1!==(i.filterWorking=l)&&t),t}),null,null)),ai(47,16384,null,0,vm,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[vm]),ai(49,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(51,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(52,0,null,null,3,"option",[],null,null,null,null,null)),ai(53,147456,null,0,Rm,[ol,gl,[2,vm]],{value:[0,"value"]},null),ai(54,147456,null,0,Tm,[ol,gl,[8,null]],{value:[0,"value"]},null),(e()(),cr(-1,null,["All"])),(e()(),qs(56,0,null,null,3,"option",[],null,null,null,null,null)),ai(57,147456,null,0,Rm,[ol,gl,[2,vm]],{value:[0,"value"]},null),ai(58,147456,null,0,Tm,[ol,gl,[8,null]],{value:[0,"value"]},null),(e()(),cr(-1,null,["Working"])),(e()(),qs(60,0,null,null,3,"option",[],null,null,null,null,null)),ai(61,147456,null,0,Rm,[ol,gl,[2,vm]],{value:[0,"value"]},null),ai(62,147456,null,0,Tm,[ol,gl,[8,null]],{value:[0,"value"]},null),(e()(),cr(-1,null,["Idle"])),(e()(),qs(64,0,null,null,18,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(65,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(66,114688,null,0,$p,[],{name:[0,"name"]},null),(e()(),Qs(16777216,null,null,1,null,zN)),ai(68,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,YN)),ai(70,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),cr(-1,null,[" \xa0\xa0 "])),(e()(),qs(72,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(73,114688,null,0,$p,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),cr(74,null,[" "," \xa0\xa0\xa0 "])),(e()(),qs(75,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(76,114688,null,0,$p,[],{name:[0,"name"]},null),(e()(),cr(77,null,[" "," "])),(e()(),qs(78,0,null,null,4,"div",[["id","allControl"]],null,null,null,null,null)),(e()(),qs(79,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.enableAll()&&t),t}),null,null)),(e()(),cr(-1,null,["all on"])),(e()(),qs(81,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.disableAll()&&t),t}),null,null)),(e()(),cr(-1,null,["all off"])),(e()(),Qs(16777216,null,null,1,null,KN)),ai(84,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,qN)),ai(86,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,3,0),e(n,9,0,!l.demolishMode),e(n,11,0,l.demolishMode),e(n,13,0,!l.arrangeMode),e(n,15,0,l.arrangeMode),e(n,17,0,!l.combineMode&&l.isUrbanPlanningEnabled()&&l.hasCombinableBuildings()),e(n,19,0,l.combineMode),e(n,21,0,!l.splitMode&&l.isUrbanPlanningEnabled()&&l.hasSplittableBuildings()),e(n,23,0,l.splitMode),e(n,37,0,l.filterBuilding),e(n,41,0,l.allBuildings),e(n,42,0,l.allBuildings),e(n,45,0,l.getUniqueBuildingsFromCurrentView()),e(n,49,0,l.filterWorking),e(n,53,0,l.buildingStates.ALL),e(n,54,0,l.buildingStates.ALL),e(n,57,0,l.buildingStates.WORKING),e(n,58,0,l.buildingStates.WORKING),e(n,61,0,l.buildingStates.IDLE),e(n,62,0,l.buildingStates.IDLE),e(n,66,0,"forest"),e(n,68,0,l.getForestSize()>=400),e(n,70,0,l.getForestSize()<400),e(n,73,0,"hammer","Workers","0 0 0 2px"),e(n,76,0,"land"),e(n,84,0,!l.isPagedViewEnabled()),e(n,86,0,l.isPagedViewEnabled())}),(function(e,n){var l=n.component;e(n,34,0,qt(n,39).ngClassUntouched,qt(n,39).ngClassTouched,qt(n,39).ngClassPristine,qt(n,39).ngClassDirty,qt(n,39).ngClassValid,qt(n,39).ngClassInvalid,qt(n,39).ngClassPending),e(n,43,0,l.getBuildingName(l.allBuildings)),e(n,46,0,qt(n,51).ngClassUntouched,qt(n,51).ngClassTouched,qt(n,51).ngClassPristine,qt(n,51).ngClassDirty,qt(n,51).ngClassValid,qt(n,51).ngClassInvalid,qt(n,51).ngClassPending),e(n,74,0,l.getUnemployed()),e(n,77,0,l.getFreeLand())}))}function ZN(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-forest",[],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==qt(e,1).onKeydownHandler(l)&&t),t}),XN,MN)),ai(1,114688,null,0,kN,[pf,nR,Sf,mf,xN,uf,_n],null,null)],(function(e,n){e(n,1,0)}),null)}var JN=Ht("app-forest",kN,ZN,{},{},[]);let e_=(()=>{class e extends tR{constructor(e,n,l,t,i){super(n,e,l,i,t,Du.FIELD,Wu.FIELD)}}return e.ngInjectableDef=ce({factory:function(){return new e(De(yf),De(Zv),De(sf),De(fv),De(nR))},token:e,providedIn:"root"}),e})();class n_ extends zA{constructor(e,n,l,t,i,s,r){super(e,n,l,i,t,s,r,Du.FIELD),this.fieldService=i}}var l_=Jl({encapsulation:0,styles:[wy,[""]],data:{}});function t_(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleDemolishMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Demolish"]))],null,null)}function i_(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleDemolishMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Stop"]))],null,null)}function s_(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleArrangeMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Arrange"]))],null,null)}function r_(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleArrangeMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Stop"]))],null,null)}function u_(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleCombineMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Combine"]))],null,null)}function o_(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleCombineMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Stop"]))],null,null)}function a_(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleSplitMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Split"]))],null,null)}function c_(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleSplitMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Stop"]))],null,null)}function h_(e){return gr(0,[(e()(),qs(0,0,null,null,3,"option",[],null,null,null,null,null)),ai(1,147456,null,0,Rm,[ol,gl,[2,vm]],{value:[0,"value"]},null),ai(2,147456,null,0,Tm,[ol,gl,[8,null]],{value:[0,"value"]},null),(e()(),cr(3,null,["",""]))],(function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)}),(function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))}))}function d_(e){return gr(0,[(e()(),qs(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-building",[],null,null,null,AA,cA)),ai(2,8503296,null,0,aA,[pf,sf,yf,nO,iR,uf,df],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.demolishMode,l.combineMode,l.splitMode,l.arrangeMode,n.context.$implicit,l.fieldService)}),null)}function g_(e){return gr(0,[(e()(),qs(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["Buildings"])),(e()(),qs(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,d_)),ai(6,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,6,0,n.component.getBuildings())}),null)}function p_(e){return gr(0,[(e()(),qs(0,0,null,null,4,"span",[["class","page"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.setPage(e.context.$implicit)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(2,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(3,{activePage:0}),(e()(),cr(4,null,["page ",""]))],(function(e,n){var l=e(n,3,0,n.component.currentPage===n.context.$implicit);e(n,2,0,"page",l)}),(function(e,n){e(n,4,0,n.context.$implicit+1)}))}function m_(e){return gr(0,[(e()(),qs(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-building",[],null,null,null,AA,cA)),ai(2,8503296,null,0,aA,[pf,sf,yf,nO,iR,uf,df],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.demolishMode,l.combineMode,l.splitMode,l.arrangeMode,n.context.$implicit,l.fieldService)}),null)}function f_(e){return gr(0,[(e()(),qs(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,p_)),ai(3,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,m_)),ai(6,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,3,0,l.getPagesNumber()),e(n,6,0,l.getPagedBuildings())}),null)}function S_(e){return gr(0,[(e()(),qs(0,0,null,null,81,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"app-top-menu",[],null,null,null,DA,_A)),ai(3,114688,null,0,NA,[Sf,yf],null,null),(e()(),qs(4,0,null,null,77,"div",[["id","content"]],null,null,null,null,null)),(e()(),qs(5,0,null,null,60,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),qs(6,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.openBuildModal()&&t),t}),null,null)),(e()(),cr(-1,null,["Build"])),(e()(),Qs(16777216,null,null,1,null,t_)),ai(9,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,i_)),ai(11,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,s_)),ai(13,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,r_)),ai(15,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,u_)),ai(17,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,o_)),ai(19,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,a_)),ai(21,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,c_)),ai(23,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(24,0,null,null,7,"button",[["class","dropdown"]],null,null,null,null,null)),(e()(),cr(-1,null,["Actions "])),(e()(),qs(26,0,null,null,0,"img",[["height","10px"],["src","assets/arrow_down.svg"]],null,null,null,null,null)),(e()(),qs(27,0,null,null,4,"ul",[["class","dropdown-content"]],null,null,null,null,null)),(e()(),qs(28,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.autoSort()&&t),t}),null,null)),(e()(),cr(-1,null,["Sort"])),(e()(),qs(30,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.autoMerge()&&t),t}),null,null)),(e()(),cr(-1,null,["Merge"])),(e()(),qs(32,0,null,null,33,"div",[["id","side"]],null,null,null,null,null)),(e()(),cr(-1,null,[" Filter:"])),(e()(),qs(34,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(35,0,null,null,30,"div",[["id","filters"]],null,null,null,null,null)),(e()(),qs(36,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,37).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,37).onTouched()&&t),"change"===n&&(t=!1!==i.updateFilter(l)&&t),"ngModelChange"===n&&(t=!1!==(i.filterBuilding=l)&&t),t}),null,null)),ai(37,16384,null,0,vm,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[vm]),ai(39,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(41,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(42,0,null,null,3,"option",[],null,null,null,null,null)),ai(43,147456,null,0,Rm,[ol,gl,[2,vm]],{value:[0,"value"]},null),ai(44,147456,null,0,Tm,[ol,gl,[8,null]],{value:[0,"value"]},null),(e()(),cr(45,null,["",""])),(e()(),Qs(16777216,null,null,1,null,h_)),ai(47,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(48,0,null,null,17,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,49).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,49).onTouched()&&t),"change"===n&&(t=!1!==i.updateFilter2(l)&&t),"ngModelChange"===n&&(t=!1!==(i.filterWorking=l)&&t),t}),null,null)),ai(49,16384,null,0,vm,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[vm]),ai(51,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(53,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(54,0,null,null,3,"option",[],null,null,null,null,null)),ai(55,147456,null,0,Rm,[ol,gl,[2,vm]],{value:[0,"value"]},null),ai(56,147456,null,0,Tm,[ol,gl,[8,null]],{value:[0,"value"]},null),(e()(),cr(-1,null,["All"])),(e()(),qs(58,0,null,null,3,"option",[],null,null,null,null,null)),ai(59,147456,null,0,Rm,[ol,gl,[2,vm]],{value:[0,"value"]},null),ai(60,147456,null,0,Tm,[ol,gl,[8,null]],{value:[0,"value"]},null),(e()(),cr(-1,null,["Working"])),(e()(),qs(62,0,null,null,3,"option",[],null,null,null,null,null)),ai(63,147456,null,0,Rm,[ol,gl,[2,vm]],{value:[0,"value"]},null),ai(64,147456,null,0,Tm,[ol,gl,[8,null]],{value:[0,"value"]},null),(e()(),cr(-1,null,["Idle"])),(e()(),qs(66,0,null,null,11,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(67,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(68,114688,null,0,$p,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),cr(69,null,[" "," \xa0\xa0\xa0 "])),(e()(),qs(70,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(71,114688,null,0,$p,[],{name:[0,"name"]},null),(e()(),cr(72,null,[" "," "])),(e()(),qs(73,0,null,null,4,"div",[["id","allControl"]],null,null,null,null,null)),(e()(),qs(74,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.enableAll()&&t),t}),null,null)),(e()(),cr(-1,null,["all on"])),(e()(),qs(76,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.disableAll()&&t),t}),null,null)),(e()(),cr(-1,null,["all off"])),(e()(),Qs(16777216,null,null,1,null,g_)),ai(79,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,f_)),ai(81,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,3,0),e(n,9,0,!l.demolishMode),e(n,11,0,l.demolishMode),e(n,13,0,!l.arrangeMode&&l.getBuildings().length>1),e(n,15,0,l.arrangeMode),e(n,17,0,!l.combineMode&&l.isUrbanPlanningEnabled()&&l.hasCombinableBuildings()),e(n,19,0,l.combineMode),e(n,21,0,!l.splitMode&&l.isUrbanPlanningEnabled()&&l.hasSplittableBuildings()),e(n,23,0,l.splitMode),e(n,39,0,l.filterBuilding),e(n,43,0,l.allBuildings),e(n,44,0,l.allBuildings),e(n,47,0,l.getUniqueBuildingsFromCurrentView()),e(n,51,0,l.filterWorking),e(n,55,0,l.buildingStates.ALL),e(n,56,0,l.buildingStates.ALL),e(n,59,0,l.buildingStates.WORKING),e(n,60,0,l.buildingStates.WORKING),e(n,63,0,l.buildingStates.IDLE),e(n,64,0,l.buildingStates.IDLE),e(n,68,0,"hammer","Workers","0 0 0 2px"),e(n,71,0,"land"),e(n,79,0,!l.isPagedViewEnabled()),e(n,81,0,l.isPagedViewEnabled())}),(function(e,n){var l=n.component;e(n,36,0,qt(n,41).ngClassUntouched,qt(n,41).ngClassTouched,qt(n,41).ngClassPristine,qt(n,41).ngClassDirty,qt(n,41).ngClassValid,qt(n,41).ngClassInvalid,qt(n,41).ngClassPending),e(n,45,0,l.getBuildingName(l.allBuildings)),e(n,48,0,qt(n,53).ngClassUntouched,qt(n,53).ngClassTouched,qt(n,53).ngClassPristine,qt(n,53).ngClassDirty,qt(n,53).ngClassValid,qt(n,53).ngClassInvalid,qt(n,53).ngClassPending),e(n,69,0,l.getUnemployed()),e(n,72,0,l.getFreeLand())}))}function E_(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-field",[],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==qt(e,1).onKeydownHandler(l)&&t),t}),S_,l_)),ai(1,114688,null,0,n_,[pf,nR,Sf,mf,e_,uf,_n],null,null)],(function(e,n){e(n,1,0)}),null)}var v_=Ht("app-field",n_,E_,{},{},[]);let R_=(()=>{class e extends tR{constructor(e,n,l,t,i,s){super(n,e,l,i,t,Du.MOUNTAINS,Wu.MOUNTAINS),this.logService=s}addMeteorite(){let e=Yu.randomElement([{item:bu.STONE,chance:35},{item:bu.COPPER_ORE,chance:30},{item:bu.TIN_ORE,chance:20},{item:bu.GOLD_ORE,chance:5},{item:bu.SILVER_ORE,chance:5},{item:bu.IRON_ORE,chance:5}]);null===e&&(e=bu.STONE),this.buildings.push(new Lv(this.servicesService,this.idService.getNextId(),Yu.randomBetween(100,200),e)),this.logService.success("Old meteorite found in the mountains!")}}return e.ngInjectableDef=ce({factory:function(){return new e(De(yf),De(Zv),De(sf),De(fv),De(nR),De(df))},token:e,providedIn:"root"}),e})();class O_ extends zA{constructor(e,n,l,t,i,s,r){super(e,n,l,i,t,s,r,Du.MOUNTAINS),this.mountainsService=i}getMountains(){return this.landService.getMountains()}getCoal(){return this.landService.getOre(bu.COAL)}getGoldOre(){return this.landService.getOre(bu.GOLD_ORE)}getSilverOre(){return this.landService.getOre(bu.SILVER_ORE)}getCopperOre(){return this.landService.getOre(bu.COPPER_ORE)}getTinOre(){return this.landService.getOre(bu.TIN_ORE)}getIronOre(){return this.landService.getOre(bu.IRON_ORE)}}var b_=Jl({encapsulation:0,styles:[wy,[".deposit[_ngcontent-%COMP%]{display:-webkit-inline-box;display:inline-flex;font-size:.8em;height:24px;-webkit-box-align:center;align-items:center}"]],data:{}});function T_(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleDemolishMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Demolish"]))],null,null)}function C_(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleDemolishMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Stop"]))],null,null)}function I_(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleArrangeMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Arrange"]))],null,null)}function y_(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleArrangeMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Stop"]))],null,null)}function A_(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleCombineMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Combine"]))],null,null)}function N_(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleCombineMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Stop"]))],null,null)}function __(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleSplitMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Split"]))],null,null)}function w_(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleSplitMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Stop"]))],null,null)}function P_(e){return gr(0,[(e()(),qs(0,0,null,null,3,"option",[],null,null,null,null,null)),ai(1,147456,null,0,Rm,[ol,gl,[2,vm]],{value:[0,"value"]},null),ai(2,147456,null,0,Tm,[ol,gl,[8,null]],{value:[0,"value"]},null),(e()(),cr(3,null,["",""]))],(function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)}),(function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))}))}function x_(e){return gr(0,[(e()(),qs(0,0,null,null,4,"span",[["class","deposit"]],null,null,null,null,null)),(e()(),cr(-1,null,[" \xa0\xa0\xa0 "])),(e()(),qs(2,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(3,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),cr(4,null,[": "," "]))],(function(e,n){e(n,3,0,"coal","resources","coal deposit")}),(function(e,n){e(n,4,0,n.component.getCoal())}))}function k_(e){return gr(0,[(e()(),qs(0,0,null,null,4,"span",[["class","deposit"]],null,null,null,null,null)),(e()(),cr(-1,null,[" \xa0\xa0\xa0 "])),(e()(),qs(2,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(3,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),cr(4,null,[": "," "]))],(function(e,n){e(n,3,0,"gold_ore","resources","gold deposit")}),(function(e,n){e(n,4,0,n.component.getGoldOre())}))}function M_(e){return gr(0,[(e()(),qs(0,0,null,null,4,"span",[["class","deposit"]],null,null,null,null,null)),(e()(),cr(-1,null,[" \xa0\xa0\xa0 "])),(e()(),qs(2,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(3,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),cr(4,null,[": "," "]))],(function(e,n){e(n,3,0,"silver_ore","resources","silver deposit")}),(function(e,n){e(n,4,0,n.component.getSilverOre())}))}function D_(e){return gr(0,[(e()(),qs(0,0,null,null,4,"span",[["class","deposit"]],null,null,null,null,null)),(e()(),cr(-1,null,[" \xa0\xa0\xa0 "])),(e()(),qs(2,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(3,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),cr(4,null,[": "," "]))],(function(e,n){e(n,3,0,"copper_ore","resources","copper deposit")}),(function(e,n){e(n,4,0,n.component.getCopperOre())}))}function L_(e){return gr(0,[(e()(),qs(0,0,null,null,4,"span",[["class","deposit"]],null,null,null,null,null)),(e()(),cr(-1,null,[" \xa0\xa0\xa0 "])),(e()(),qs(2,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(3,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),cr(4,null,[": "," "]))],(function(e,n){e(n,3,0,"tin_ore","resources","tin deposit")}),(function(e,n){e(n,4,0,n.component.getTinOre())}))}function F_(e){return gr(0,[(e()(),qs(0,0,null,null,4,"span",[["class","deposit"]],null,null,null,null,null)),(e()(),cr(-1,null,[" \xa0\xa0\xa0 "])),(e()(),qs(2,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(3,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),cr(4,null,[": "," "]))],(function(e,n){e(n,3,0,"iron_ore","resources","iron deposit")}),(function(e,n){e(n,4,0,n.component.getIronOre())}))}function U_(e){return gr(0,[(e()(),qs(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-building",[],null,null,null,AA,cA)),ai(2,8503296,null,0,aA,[pf,sf,yf,nO,iR,uf,df],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.demolishMode,l.combineMode,l.splitMode,l.arrangeMode,n.context.$implicit,l.mountainsService)}),null)}function H_(e){return gr(0,[(e()(),qs(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["Buildings"])),(e()(),qs(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,U_)),ai(6,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,6,0,n.component.getBuildings())}),null)}function G_(e){return gr(0,[(e()(),qs(0,0,null,null,4,"span",[["class","page"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.setPage(e.context.$implicit)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(2,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(3,{activePage:0}),(e()(),cr(4,null,["page ",""]))],(function(e,n){var l=e(n,3,0,n.component.currentPage===n.context.$implicit);e(n,2,0,"page",l)}),(function(e,n){e(n,4,0,n.context.$implicit+1)}))}function B_(e){return gr(0,[(e()(),qs(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-building",[],null,null,null,AA,cA)),ai(2,8503296,null,0,aA,[pf,sf,yf,nO,iR,uf,df],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.demolishMode,l.combineMode,l.splitMode,l.arrangeMode,n.context.$implicit,l.mountainsService)}),null)}function W_(e){return gr(0,[(e()(),qs(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,G_)),ai(3,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,B_)),ai(6,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,3,0,l.getPagesNumber()),e(n,6,0,l.getPagedBuildings())}),null)}function V_(e){return gr(0,[(e()(),qs(0,0,null,null,94,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"app-top-menu",[],null,null,null,DA,_A)),ai(3,114688,null,0,NA,[Sf,yf],null,null),(e()(),qs(4,0,null,null,90,"div",[["id","content"]],null,null,null,null,null)),(e()(),qs(5,0,null,null,58,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),qs(6,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.openBuildModal()&&t),t}),null,null)),(e()(),cr(-1,null,["Build"])),(e()(),Qs(16777216,null,null,1,null,T_)),ai(9,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,C_)),ai(11,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,I_)),ai(13,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,y_)),ai(15,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,A_)),ai(17,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,N_)),ai(19,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,__)),ai(21,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,w_)),ai(23,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(24,0,null,null,5,"button",[["class","dropdown"]],null,null,null,null,null)),(e()(),cr(-1,null,["Actions "])),(e()(),qs(26,0,null,null,0,"img",[["height","10px"],["src","assets/arrow_down.svg"]],null,null,null,null,null)),(e()(),qs(27,0,null,null,2,"ul",[["class","dropdown-content"]],null,null,null,null,null)),(e()(),qs(28,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.autoSort()&&t),t}),null,null)),(e()(),cr(-1,null,["Sort"])),(e()(),qs(30,0,null,null,33,"div",[["id","side"]],null,null,null,null,null)),(e()(),cr(-1,null,[" Filter:"])),(e()(),qs(32,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(33,0,null,null,30,"div",[["id","filters"]],null,null,null,null,null)),(e()(),qs(34,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,35).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,35).onTouched()&&t),"change"===n&&(t=!1!==i.updateFilter(l)&&t),"ngModelChange"===n&&(t=!1!==(i.filterBuilding=l)&&t),t}),null,null)),ai(35,16384,null,0,vm,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[vm]),ai(37,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(39,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(40,0,null,null,3,"option",[],null,null,null,null,null)),ai(41,147456,null,0,Rm,[ol,gl,[2,vm]],{value:[0,"value"]},null),ai(42,147456,null,0,Tm,[ol,gl,[8,null]],{value:[0,"value"]},null),(e()(),cr(43,null,["",""])),(e()(),Qs(16777216,null,null,1,null,P_)),ai(45,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(46,0,null,null,17,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,47).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,47).onTouched()&&t),"change"===n&&(t=!1!==i.updateFilter2(l)&&t),"ngModelChange"===n&&(t=!1!==(i.filterWorking=l)&&t),t}),null,null)),ai(47,16384,null,0,vm,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[vm]),ai(49,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(51,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(52,0,null,null,3,"option",[],null,null,null,null,null)),ai(53,147456,null,0,Rm,[ol,gl,[2,vm]],{value:[0,"value"]},null),ai(54,147456,null,0,Tm,[ol,gl,[8,null]],{value:[0,"value"]},null),(e()(),cr(-1,null,["All"])),(e()(),qs(56,0,null,null,3,"option",[],null,null,null,null,null)),ai(57,147456,null,0,Rm,[ol,gl,[2,vm]],{value:[0,"value"]},null),ai(58,147456,null,0,Tm,[ol,gl,[8,null]],{value:[0,"value"]},null),(e()(),cr(-1,null,["Working"])),(e()(),qs(60,0,null,null,3,"option",[],null,null,null,null,null)),ai(61,147456,null,0,Rm,[ol,gl,[2,vm]],{value:[0,"value"]},null),ai(62,147456,null,0,Tm,[ol,gl,[8,null]],{value:[0,"value"]},null),(e()(),cr(-1,null,["Idle"])),(e()(),qs(64,0,null,null,26,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(65,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(66,114688,null,0,$p,[],{name:[0,"name"]},null),(e()(),cr(67,null,[" "," \xa0\xa0 "])),(e()(),qs(68,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(69,114688,null,0,$p,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),cr(70,null,[" "," \xa0\xa0\xa0 "])),(e()(),qs(71,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(72,114688,null,0,$p,[],{name:[0,"name"]},null),(e()(),cr(73,null,[" "," "])),(e()(),Qs(16777216,null,null,1,null,x_)),ai(75,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,k_)),ai(77,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,M_)),ai(79,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,D_)),ai(81,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,L_)),ai(83,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,F_)),ai(85,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(86,0,null,null,4,"div",[["id","allControl"]],null,null,null,null,null)),(e()(),qs(87,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.enableAll()&&t),t}),null,null)),(e()(),cr(-1,null,["all on"])),(e()(),qs(89,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.disableAll()&&t),t}),null,null)),(e()(),cr(-1,null,["all off"])),(e()(),Qs(16777216,null,null,1,null,H_)),ai(92,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,W_)),ai(94,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,3,0),e(n,9,0,!l.demolishMode),e(n,11,0,l.demolishMode),e(n,13,0,!l.arrangeMode&&l.getBuildings().length>1),e(n,15,0,l.arrangeMode),e(n,17,0,!l.combineMode&&l.isUrbanPlanningEnabled()&&l.hasCombinableBuildings()),e(n,19,0,l.combineMode),e(n,21,0,!l.splitMode&&l.isUrbanPlanningEnabled()&&l.hasSplittableBuildings()),e(n,23,0,l.splitMode),e(n,37,0,l.filterBuilding),e(n,41,0,l.allBuildings),e(n,42,0,l.allBuildings),e(n,45,0,l.getUniqueBuildingsFromCurrentView()),e(n,49,0,l.filterWorking),e(n,53,0,l.buildingStates.ALL),e(n,54,0,l.buildingStates.ALL),e(n,57,0,l.buildingStates.WORKING),e(n,58,0,l.buildingStates.WORKING),e(n,61,0,l.buildingStates.IDLE),e(n,62,0,l.buildingStates.IDLE),e(n,66,0,"mountains"),e(n,69,0,"hammer","Workers","0 0 0 2px"),e(n,72,0,"land"),e(n,75,0,l.getCoal()>0),e(n,77,0,l.getGoldOre()>0),e(n,79,0,l.getSilverOre()>0),e(n,81,0,l.getCopperOre()>0),e(n,83,0,l.getTinOre()>0),e(n,85,0,l.getIronOre()>0),e(n,92,0,!l.isPagedViewEnabled()),e(n,94,0,l.isPagedViewEnabled())}),(function(e,n){var l=n.component;e(n,34,0,qt(n,39).ngClassUntouched,qt(n,39).ngClassTouched,qt(n,39).ngClassPristine,qt(n,39).ngClassDirty,qt(n,39).ngClassValid,qt(n,39).ngClassInvalid,qt(n,39).ngClassPending),e(n,43,0,l.getBuildingName(l.allBuildings)),e(n,46,0,qt(n,51).ngClassUntouched,qt(n,51).ngClassTouched,qt(n,51).ngClassPristine,qt(n,51).ngClassDirty,qt(n,51).ngClassValid,qt(n,51).ngClassInvalid,qt(n,51).ngClassPending),e(n,67,0,l.getMountains()),e(n,70,0,l.getUnemployed()),e(n,73,0,l.getFreeLand())}))}function z_(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-mountains",[],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==qt(e,1).onKeydownHandler(l)&&t),t}),V_,b_)),ai(1,114688,null,0,O_,[pf,nR,Sf,mf,R_,uf,_n],null,null)],(function(e,n){e(n,1,0)}),null)}var Y_=Ht("app-mountains",O_,z_,{},{},[]);let $_=(()=>{class e extends tR{constructor(e,n,l,t,i,s){super(n,e,l,t,i,Du.PLATEAU,Wu.PLATEAU),this.gameService=s}reset(e,n){e?super.reset(e,n):n?this.buildings=[]:(this.buildings=this.buildings.filter(e=>e.isFinished()),this.buildings.length>0&&this.gameService.enable(Iu.PLATEAU),this.getBuildings().forEach(e=>e.verifyWonderEffects()))}}return e.ngInjectableDef=ce({factory:function(){return new e(De(yf),De(Zv),De(sf),De(nR),De(fv),De(Sf))},token:e,providedIn:"root"}),e})();class K_ extends zA{constructor(e,n,l,t,i,s,r,u){super(e,n,l,s,t,r,u,Du.PLATEAU),this.techService=i,this.plateauService=s}areWonderBuildingsResearched(){return!go.production||this.techService.isResearched(Cu.WONDER_BUILDINGS)}}var j_=Jl({encapsulation:0,styles:[wy,["#allControl[_ngcontent-%COMP%]{margin-left:auto;width:108px;display:inline-block}#allControl[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:4px}"]],data:{}});function Q_(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.openBuildModal()&&t),t}),null,null)),(e()(),cr(-1,null,["Build"]))],null,null)}function q_(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleArrangeMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Arrange"]))],null,null)}function X_(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleArrangeMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Stop"]))],null,null)}function Z_(e){return gr(0,[(e()(),qs(0,0,null,null,3,"option",[],null,null,null,null,null)),ai(1,147456,null,0,Rm,[ol,gl,[2,vm]],{value:[0,"value"]},null),ai(2,147456,null,0,Tm,[ol,gl,[8,null]],{value:[0,"value"]},null),(e()(),cr(3,null,["",""]))],(function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)}),(function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))}))}function J_(e){return gr(0,[(e()(),qs(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-building",[],null,null,null,AA,cA)),ai(2,8503296,null,0,aA,[pf,sf,yf,nO,iR,uf,df],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.demolishMode,l.combineMode,l.splitMode,l.arrangeMode,n.context.$implicit,l.plateauService)}),null)}function ew(e){return gr(0,[(e()(),qs(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["Buildings"])),(e()(),qs(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,J_)),ai(6,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,6,0,n.component.getBuildings())}),null)}function nw(e){return gr(0,[(e()(),qs(0,0,null,null,4,"span",[["class","page"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.setPage(e.context.$implicit)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(2,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(3,{activePage:0}),(e()(),cr(4,null,["page ",""]))],(function(e,n){var l=e(n,3,0,n.component.currentPage===n.context.$implicit);e(n,2,0,"page",l)}),(function(e,n){e(n,4,0,n.context.$implicit+1)}))}function lw(e){return gr(0,[(e()(),qs(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-building",[],null,null,null,AA,cA)),ai(2,8503296,null,0,aA,[pf,sf,yf,nO,iR,uf,df],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.demolishMode,l.combineMode,l.splitMode,l.arrangeMode,n.context.$implicit,l.plateauService)}),null)}function tw(e){return gr(0,[(e()(),qs(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,nw)),ai(3,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,lw)),ai(6,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,3,0,l.getPagesNumber()),e(n,6,0,l.getPagedBuildings())}),null)}function iw(e){return gr(0,[(e()(),qs(0,0,null,null,56,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"app-top-menu",[],null,null,null,DA,_A)),ai(3,114688,null,0,NA,[Sf,yf],null,null),(e()(),qs(4,0,null,null,52,"div",[["id","content"]],null,null,null,null,null)),(e()(),qs(5,0,null,null,40,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,Q_)),ai(7,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,q_)),ai(9,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,X_)),ai(11,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(12,0,null,null,33,"div",[["id","side"]],null,null,null,null,null)),(e()(),cr(-1,null,[" Filter:"])),(e()(),qs(14,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(15,0,null,null,30,"div",[["id","filters"]],null,null,null,null,null)),(e()(),qs(16,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,17).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,17).onTouched()&&t),"change"===n&&(t=!1!==i.updateFilter(l)&&t),"ngModelChange"===n&&(t=!1!==(i.filterBuilding=l)&&t),t}),null,null)),ai(17,16384,null,0,vm,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[vm]),ai(19,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(21,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(22,0,null,null,3,"option",[],null,null,null,null,null)),ai(23,147456,null,0,Rm,[ol,gl,[2,vm]],{value:[0,"value"]},null),ai(24,147456,null,0,Tm,[ol,gl,[8,null]],{value:[0,"value"]},null),(e()(),cr(25,null,["",""])),(e()(),Qs(16777216,null,null,1,null,Z_)),ai(27,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(28,0,null,null,17,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,29).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,29).onTouched()&&t),"change"===n&&(t=!1!==i.updateFilter2(l)&&t),"ngModelChange"===n&&(t=!1!==(i.filterWorking=l)&&t),t}),null,null)),ai(29,16384,null,0,vm,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[vm]),ai(31,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(33,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(34,0,null,null,3,"option",[],null,null,null,null,null)),ai(35,147456,null,0,Rm,[ol,gl,[2,vm]],{value:[0,"value"]},null),ai(36,147456,null,0,Tm,[ol,gl,[8,null]],{value:[0,"value"]},null),(e()(),cr(-1,null,["All"])),(e()(),qs(38,0,null,null,3,"option",[],null,null,null,null,null)),ai(39,147456,null,0,Rm,[ol,gl,[2,vm]],{value:[0,"value"]},null),ai(40,147456,null,0,Tm,[ol,gl,[8,null]],{value:[0,"value"]},null),(e()(),cr(-1,null,["Working"])),(e()(),qs(42,0,null,null,3,"option",[],null,null,null,null,null)),ai(43,147456,null,0,Rm,[ol,gl,[2,vm]],{value:[0,"value"]},null),ai(44,147456,null,0,Tm,[ol,gl,[8,null]],{value:[0,"value"]},null),(e()(),cr(-1,null,["Idle"])),(e()(),qs(46,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(47,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(48,114688,null,0,$p,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),cr(49,null,[" "," \xa0\xa0\xa0 "])),(e()(),qs(50,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(51,114688,null,0,$p,[],{name:[0,"name"]},null),(e()(),cr(52,null,[" "," "])),(e()(),Qs(16777216,null,null,1,null,ew)),ai(54,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,tw)),ai(56,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,3,0),e(n,7,0,l.areWonderBuildingsResearched()),e(n,9,0,!l.arrangeMode&&l.getBuildings().length>1),e(n,11,0,l.arrangeMode),e(n,19,0,l.filterBuilding),e(n,23,0,l.allBuildings),e(n,24,0,l.allBuildings),e(n,27,0,l.getUniqueBuildingsFromCurrentView()),e(n,31,0,l.filterWorking),e(n,35,0,l.buildingStates.ALL),e(n,36,0,l.buildingStates.ALL),e(n,39,0,l.buildingStates.WORKING),e(n,40,0,l.buildingStates.WORKING),e(n,43,0,l.buildingStates.IDLE),e(n,44,0,l.buildingStates.IDLE),e(n,48,0,"hammer","Workers","0 0 0 2px"),e(n,51,0,"land"),e(n,54,0,!l.isPagedViewEnabled()),e(n,56,0,l.isPagedViewEnabled())}),(function(e,n){var l=n.component;e(n,16,0,qt(n,21).ngClassUntouched,qt(n,21).ngClassTouched,qt(n,21).ngClassPristine,qt(n,21).ngClassDirty,qt(n,21).ngClassValid,qt(n,21).ngClassInvalid,qt(n,21).ngClassPending),e(n,25,0,l.getBuildingName(l.allBuildings)),e(n,28,0,qt(n,33).ngClassUntouched,qt(n,33).ngClassTouched,qt(n,33).ngClassPristine,qt(n,33).ngClassDirty,qt(n,33).ngClassValid,qt(n,33).ngClassInvalid,qt(n,33).ngClassPending),e(n,49,0,l.getUnemployed()),e(n,52,0,l.getFreeLand())}))}function sw(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-field",[],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==qt(e,1).onKeydownHandler(l)&&t),t}),iw,j_)),ai(1,114688,null,0,K_,[pf,nR,Sf,mf,SO,$_,uf,_n],null,null)],(function(e,n){e(n,1,0)}),null)}var rw=Ht("app-field",K_,sw,{},{},[]);class uw extends zA{constructor(e,n,l,t,i,s,r,u){super(e,n,l,i,t,s,r,Du.SEA),this.seaService=i,this.navyService=u}getHarbourSpace(){return this.navyService.getHarbourSpace()}getMaxHarbourSpace(){return this.navyService.getMaxHarbourSpace()}}var ow=Jl({encapsulation:0,styles:[wy,[""]],data:{}});function aw(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleDemolishMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Demolish"]))],null,null)}function cw(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleDemolishMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Stop"]))],null,null)}function hw(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleArrangeMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Arrange"]))],null,null)}function dw(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleArrangeMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Stop"]))],null,null)}function gw(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleCombineMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Combine"]))],null,null)}function pw(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleCombineMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Stop"]))],null,null)}function mw(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleSplitMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Split"]))],null,null)}function fw(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[["class","off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleSplitMode()&&t),t}),null,null)),(e()(),cr(-1,null,["Stop"]))],null,null)}function Sw(e){return gr(0,[(e()(),qs(0,0,null,null,3,"option",[],null,null,null,null,null)),ai(1,147456,null,0,Rm,[ol,gl,[2,vm]],{value:[0,"value"]},null),ai(2,147456,null,0,Tm,[ol,gl,[8,null]],{value:[0,"value"]},null),(e()(),cr(3,null,["",""]))],(function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)}),(function(e,n){e(n,3,0,n.component.getBuildingName(n.context.$implicit))}))}function Ew(e){return gr(0,[(e()(),qs(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-building",[],null,null,null,AA,cA)),ai(2,8503296,null,0,aA,[pf,sf,yf,nO,iR,uf,df],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.demolishMode,l.combineMode,l.splitMode,l.arrangeMode,n.context.$implicit,l.seaService)}),null)}function vw(e){return gr(0,[(e()(),qs(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["Buildings"])),(e()(),qs(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,Ew)),ai(6,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,6,0,n.component.getBuildings())}),null)}function Rw(e){return gr(0,[(e()(),qs(0,0,null,null,4,"span",[["class","page"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.setPage(e.context.$implicit)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(2,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(3,{activePage:0}),(e()(),cr(4,null,["page ",""]))],(function(e,n){var l=e(n,3,0,n.component.currentPage===n.context.$implicit);e(n,2,0,"page",l)}),(function(e,n){e(n,4,0,n.context.$implicit+1)}))}function Ow(e){return gr(0,[(e()(),qs(0,0,null,null,2,"span",[["class","buildingRegularWrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-building",[],null,null,null,AA,cA)),ai(2,8503296,null,0,aA,[pf,sf,yf,nO,iR,uf,df],{demolishMode:[0,"demolishMode"],combineMode:[1,"combineMode"],splitMode:[2,"splitMode"],arrangeMode:[3,"arrangeMode"],building:[4,"building"],parentRegion:[5,"parentRegion"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.demolishMode,l.combineMode,l.splitMode,l.arrangeMode,n.context.$implicit,l.seaService)}),null)}function bw(e){return gr(0,[(e()(),qs(0,0,null,null,6,"div",[["class","buildingsWrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,Rw)),ai(3,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(4,0,null,null,2,"div",[["class","buildings"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,Ow)),ai(6,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,3,0,l.getPagesNumber()),e(n,6,0,l.getPagedBuildings())}),null)}function Tw(e){return gr(0,[(e()(),qs(0,0,null,null,82,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"app-top-menu",[],null,null,null,DA,_A)),ai(3,114688,null,0,NA,[Sf,yf],null,null),(e()(),qs(4,0,null,null,78,"div",[["id","content"]],null,null,null,null,null)),(e()(),qs(5,0,null,null,58,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),qs(6,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.openBuildModal()&&t),t}),null,null)),(e()(),cr(-1,null,["Build"])),(e()(),Qs(16777216,null,null,1,null,aw)),ai(9,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,cw)),ai(11,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,hw)),ai(13,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,dw)),ai(15,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,gw)),ai(17,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,pw)),ai(19,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,mw)),ai(21,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,fw)),ai(23,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(24,0,null,null,5,"button",[["class","dropdown"]],null,null,null,null,null)),(e()(),cr(-1,null,["Actions "])),(e()(),qs(26,0,null,null,0,"img",[["height","10px"],["src","assets/arrow_down.svg"]],null,null,null,null,null)),(e()(),qs(27,0,null,null,2,"ul",[["class","dropdown-content"]],null,null,null,null,null)),(e()(),qs(28,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.autoSort()&&t),t}),null,null)),(e()(),cr(-1,null,["Sort"])),(e()(),qs(30,0,null,null,33,"div",[["id","side"]],null,null,null,null,null)),(e()(),cr(-1,null,[" Filter:"])),(e()(),qs(32,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(33,0,null,null,30,"div",[["id","filters"]],null,null,null,null,null)),(e()(),qs(34,0,null,null,11,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,35).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,35).onTouched()&&t),"change"===n&&(t=!1!==i.updateFilter(l)&&t),"ngModelChange"===n&&(t=!1!==(i.filterBuilding=l)&&t),t}),null,null)),ai(35,16384,null,0,vm,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[vm]),ai(37,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(39,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(40,0,null,null,3,"option",[],null,null,null,null,null)),ai(41,147456,null,0,Rm,[ol,gl,[2,vm]],{value:[0,"value"]},null),ai(42,147456,null,0,Tm,[ol,gl,[8,null]],{value:[0,"value"]},null),(e()(),cr(43,null,["",""])),(e()(),Qs(16777216,null,null,1,null,Sw)),ai(45,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(46,0,null,null,17,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,47).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,47).onTouched()&&t),"change"===n&&(t=!1!==i.updateFilter2(l)&&t),"ngModelChange"===n&&(t=!1!==(i.filterWorking=l)&&t),t}),null,null)),ai(47,16384,null,0,vm,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[vm]),ai(49,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(51,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(52,0,null,null,3,"option",[],null,null,null,null,null)),ai(53,147456,null,0,Rm,[ol,gl,[2,vm]],{value:[0,"value"]},null),ai(54,147456,null,0,Tm,[ol,gl,[8,null]],{value:[0,"value"]},null),(e()(),cr(-1,null,["All"])),(e()(),qs(56,0,null,null,3,"option",[],null,null,null,null,null)),ai(57,147456,null,0,Rm,[ol,gl,[2,vm]],{value:[0,"value"]},null),ai(58,147456,null,0,Tm,[ol,gl,[8,null]],{value:[0,"value"]},null),(e()(),cr(-1,null,["Working"])),(e()(),qs(60,0,null,null,3,"option",[],null,null,null,null,null)),ai(61,147456,null,0,Rm,[ol,gl,[2,vm]],{value:[0,"value"]},null),ai(62,147456,null,0,Tm,[ol,gl,[8,null]],{value:[0,"value"]},null),(e()(),cr(-1,null,["Idle"])),(e()(),qs(64,0,null,null,14,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(65,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(66,114688,null,0,$p,[],{name:[0,"name"],title:[1,"title"],margin:[2,"margin"]},null),(e()(),cr(67,null,[" "," \xa0\xa0\xa0 "])),(e()(),qs(68,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(69,114688,null,0,$p,[],{name:[0,"name"]},null),(e()(),cr(70,null,[" "," \xa0\xa0\xa0 "])),(e()(),qs(71,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(72,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(73,null,[" ","/"," "])),(e()(),qs(74,0,null,null,4,"div",[["id","allControl"]],null,null,null,null,null)),(e()(),qs(75,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.enableAll()&&t),t}),null,null)),(e()(),cr(-1,null,["all on"])),(e()(),qs(77,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.disableAll()&&t),t}),null,null)),(e()(),cr(-1,null,["all off"])),(e()(),Qs(16777216,null,null,1,null,vw)),ai(80,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,bw)),ai(82,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,3,0),e(n,9,0,!l.demolishMode),e(n,11,0,l.demolishMode),e(n,13,0,!l.arrangeMode&&l.getBuildings().length>1),e(n,15,0,l.arrangeMode),e(n,17,0,!l.combineMode&&l.isUrbanPlanningEnabled()&&l.hasCombinableBuildings()),e(n,19,0,l.combineMode),e(n,21,0,!l.splitMode&&l.isUrbanPlanningEnabled()&&l.hasSplittableBuildings()),e(n,23,0,l.splitMode),e(n,37,0,l.filterBuilding),e(n,41,0,l.allBuildings),e(n,42,0,l.allBuildings),e(n,45,0,l.getUniqueBuildingsFromCurrentView()),e(n,49,0,l.filterWorking),e(n,53,0,l.buildingStates.ALL),e(n,54,0,l.buildingStates.ALL),e(n,57,0,l.buildingStates.WORKING),e(n,58,0,l.buildingStates.WORKING),e(n,61,0,l.buildingStates.IDLE),e(n,62,0,l.buildingStates.IDLE),e(n,66,0,"hammer","Workers","0 0 0 2px"),e(n,69,0,"land"),e(n,72,0,"port","sea"),e(n,80,0,!l.isPagedViewEnabled()),e(n,82,0,l.isPagedViewEnabled())}),(function(e,n){var l=n.component;e(n,34,0,qt(n,39).ngClassUntouched,qt(n,39).ngClassTouched,qt(n,39).ngClassPristine,qt(n,39).ngClassDirty,qt(n,39).ngClassValid,qt(n,39).ngClassInvalid,qt(n,39).ngClassPending),e(n,43,0,l.getBuildingName(l.allBuildings)),e(n,46,0,qt(n,51).ngClassUntouched,qt(n,51).ngClassTouched,qt(n,51).ngClassPristine,qt(n,51).ngClassDirty,qt(n,51).ngClassValid,qt(n,51).ngClassInvalid,qt(n,51).ngClassPending),e(n,67,0,l.getUnemployed()),e(n,70,0,l.getFreeLand()),e(n,73,0,l.getHarbourSpace(),l.getMaxHarbourSpace())}))}function Cw(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-sea",[],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==qt(e,1).onKeydownHandler(l)&&t),t}),Tw,ow)),ai(1,114688,null,0,uw,[pf,nR,Sf,mf,nC,uf,_n,lC],null,null)],(function(e,n){e(n,1,0)}),null)}var Iw=Ht("app-sea",uw,Cw,{},{},[]);class yw{constructor(e){this.gameService=e}ngOnInit(){}isForestManagementEnabled(){return this.gameService.isEnabled(Iu.FORESTER)}}var Aw=Jl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:-webkit-box;display:flex;height:100%;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.entry[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:auto;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:100%;text-align:center;border-right:2px solid #000;cursor:pointer;text-decoration:none;color:#000;font-size:1em}.entry[_ngcontent-%COMP%]:last-of-type{border:none}.entry.active[_ngcontent-%COMP%]{background:var(--active-colour)}"]],data:{}});function Nw(e){return gr(0,[(e()(),qs(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/management/forestM"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==qt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ai(1,671744,[[8,4]],0,ap,[up,qd,Bo],{routerLink:[0,"routerLink"]},null),ai(2,1720320,null,2,hp,[up,ol,gl,[2,op],[2,ap]],{routerLinkActive:[0,"routerLinkActive"]},null),nr(603979776,7,{links:1}),nr(603979776,8,{linksWithHrefs:1}),(e()(),cr(-1,null,["Forest"]))],(function(e,n){e(n,1,0,"/management/forestM"),e(n,2,0,"active")}),(function(e,n){e(n,0,0,qt(n,1).target,qt(n,1).href)}))}function _w(e){return gr(0,[(e()(),qs(0,0,null,null,26,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/management/general"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==qt(e,2).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ai(2,671744,[[2,4]],0,ap,[up,qd,Bo],{routerLink:[0,"routerLink"]},null),ai(3,1720320,null,2,hp,[up,ol,gl,[2,op],[2,ap]],{routerLinkActive:[0,"routerLinkActive"]},null),nr(603979776,1,{links:1}),nr(603979776,2,{linksWithHrefs:1}),(e()(),cr(-1,null,["General"])),(e()(),qs(7,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/management/happiness"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==qt(e,8).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ai(8,671744,[[4,4]],0,ap,[up,qd,Bo],{routerLink:[0,"routerLink"]},null),ai(9,1720320,null,2,hp,[up,ol,gl,[2,op],[2,ap]],{routerLinkActive:[0,"routerLinkActive"]},null),nr(603979776,3,{links:1}),nr(603979776,4,{linksWithHrefs:1}),(e()(),cr(-1,null,["Happiness"])),(e()(),qs(13,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/management/effects"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==qt(e,14).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ai(14,671744,[[6,4]],0,ap,[up,qd,Bo],{routerLink:[0,"routerLink"]},null),ai(15,1720320,null,2,hp,[up,ol,gl,[2,op],[2,ap]],{routerLinkActive:[0,"routerLinkActive"]},null),nr(603979776,5,{links:1}),nr(603979776,6,{linksWithHrefs:1}),(e()(),cr(-1,null,["Effects"])),(e()(),Qs(16777216,null,null,1,null,Nw)),ai(20,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(21,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/management/summary"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==qt(e,22).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ai(22,671744,[[10,4]],0,ap,[up,qd,Bo],{routerLink:[0,"routerLink"]},null),ai(23,1720320,null,2,hp,[up,ol,gl,[2,op],[2,ap]],{routerLinkActive:[0,"routerLinkActive"]},null),nr(603979776,9,{links:1}),nr(603979776,10,{linksWithHrefs:1}),(e()(),cr(-1,null,["Summary"]))],(function(e,n){var l=n.component;e(n,2,0,"/management/general"),e(n,3,0,"active"),e(n,8,0,"/management/happiness"),e(n,9,0,"active"),e(n,14,0,"/management/effects"),e(n,15,0,"active"),e(n,20,0,l.isForestManagementEnabled()),e(n,22,0,"/management/summary"),e(n,23,0,"active")}),(function(e,n){e(n,1,0,qt(n,2).target,qt(n,2).href),e(n,7,0,qt(n,8).target,qt(n,8).href),e(n,13,0,qt(n,14).target,qt(n,14).href),e(n,21,0,qt(n,22).target,qt(n,22).href)}))}class ww{constructor(e,n,l){this.managementService=e,this.resourcesService=n,this.gameService=l}ngOnInit(){}getRations(){return this.managementService.getRations()}changeFoodValue(e){this.managementService.setRations(e.target.value)}changeClothesValue(e){this.managementService.setClothesRations(e.target.value)}changeAlcoholValue(e){this.managementService.setAlcoholRations(e.target.value)}getClothesRations(){return this.managementService.getClothesRations()}getAlcoholRations(){return this.managementService.getAlcoholRations()}updateFurClothes(){this.managementService.toggleFurClothes()}getFurClothes(){return this.managementService.getFurClothes()}updateFoodNutrition(){this.managementService.toggleFoodNutrition()}getFoodNutrition(){return this.managementService.getFoodNutrition()}updateComplexWorkers(){this.managementService.toggleComplexWorkers()}getComplexWorkers(){return this.managementService.getComplexWorkers()}isHREnabled(){return this.gameService.isEnabled(Iu.HUMAN_RESOURCES)}getSecondHeaderRow(){return this.managementService.getSecondHeaderRow()}updateSecondHeaderRow(){this.managementService.toggleSecondHeaderRow()}getShowFreeWorkers(){return this.managementService.getShowFreeWorkers()}updateShowFreeWorkers(){this.managementService.toggleShowFreeWorkers()}getShowPopulation(){return this.managementService.getShowPopulation()}updateShowPopulation(){this.managementService.toggleShowPopulation()}getFoodLines(){return this.managementService.getFoodPriority()}getResourceName(e){return Uu.prepareResourceName(e)}up(e,n){this.managementService.up(e,n)}down(e,n){this.managementService.down(e,n)}getShowResearchProgress(){return this.managementService.getShowResearchProgress()}updateShowResearchProgress(){this.managementService.toggleShowResearchProgress()}getShowFaith(){return this.managementService.getShowFaith()}updateShowFaith(){this.managementService.toggleShowFaith()}getShowHappiness(){return this.managementService.getShowHappiness()}updateShowHappiness(){this.managementService.toggleShowHappiness()}isFaithUnlocked(){return this.gameService.isEnabled(Iu.RELIGION)}getLogFiredWorkers(){return this.managementService.getLogFiredWorkers()}updateLogFiredWorkers(){this.managementService.toggleLogFiredWorkers()}getDefaultWorkshopResearch(){return this.managementService.getDefaultWorkshopResearch()}updateDefaultWorkshopResearch(){this.managementService.toggleDefaultWorkshopResearch()}getDefaultGathererFood(){return this.managementService.getDefaultGathererFood()}updateDefaultGathererFood(){this.managementService.toggleDefaultGathererFood()}getSwitchHunterFromTaming(){return this.managementService.getSwitchHunterFromTaming()}updateSwitchHunterFromTaming(){this.managementService.toggleSwitchHunterFromTaming()}getPlowInSummer(){return this.managementService.getPlowInSummer()}updatePlowInSummer(){this.managementService.togglePlowInSummer()}getLogAutoTrade(){return this.managementService.getLogAutoTrade()}updateLogAutoTrade(){this.managementService.toggleLogAutoTrade()}getShowRaw(){return this.managementService.getShowRaw()}updateShowRaw(){this.managementService.toggleShowRaw()}getShowProcessed(){return this.managementService.getShowProcessed()}updateShowProcessed(){this.managementService.toggleShowProcessed()}getShowFood(){return this.managementService.getShowFood()}updateShowFood(){this.managementService.toggleShowFood()}getShowTools(){return this.managementService.getShowTools()}updateShowTools(){this.managementService.toggleShowTools()}getLogSickness(){return this.managementService.getLogSickness()}updateLogSickness(){this.managementService.toggleLogSickness()}getLogMerchant(){return this.managementService.getLogMerchant()}updateLogMerchant(){this.managementService.toggleLogMerchant()}getTaxRate(){return this.managementService.getTaxRate()}changeTaxRate(e){this.managementService.setTaxRate(e.target.value)}isTaxUnlocked(){return this.gameService.isEnabled(Iu.TAX_COLLECTOR)}}var Pw=Jl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:99%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#content[_ngcontent-%COMP%]{margin:.5%;height:94%;overflow-y:auto}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}.label[_ngcontent-%COMP%]{display:inline-block;width:140px}.slidecontainer[_ngcontent-%COMP%]{display:inline-block;width:150px}.slider[_ngcontent-%COMP%]{-webkit-appearance:none;width:100%;height:10px;border-radius:5px;background:var(--passive-colour);outline:0;opacity:.7;-webkit-transition:opacity .2s;transition:opacity .2s}.slider[_ngcontent-%COMP%]:hover{opacity:1}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}app-icon[_ngcontent-%COMP%]{display:inline-block}#arrows[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.arrow[_ngcontent-%COMP%]{font-size:.7em;width:12px;display:inline-block}.priorityLine[_ngcontent-%COMP%]{height:34px}.entry[_ngcontent-%COMP%]{display:inline-block;margin:2px}.item[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}#index[_ngcontent-%COMP%]{display:inline-block;width:10px}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}"]],data:{}});function xw(e){return gr(0,[(e()(),qs(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"span",[["class","label"]],null,null,null,null,null)),(e()(),cr(2,null,["tax/donation: ","%"])),(e()(),qs(3,0,null,null,1,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),qs(4,0,null,null,0,"input",[["class","slider"],["max","5"],["min","0"],["type","range"],["value","0"]],[[8,"value",0]],[[null,"input"]],(function(e,n,l){var t=!0;return"input"===n&&(t=!1!==e.component.changeTaxRate(l)&&t),t}),null,null))],null,(function(e,n){var l=n.component;e(n,2,0,10*l.getTaxRate()),e(n,4,0,l.getTaxRate())}))}function kw(e){return gr(0,[(e()(),qs(0,0,null,null,3,null,null,null,null,null,null,null)),(e()(),qs(1,0,null,null,0,"input",[["id","workManagement"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateComplexWorkers()&&t),t}),null,null)),(e()(),qs(2,0,null,null,1,"label",[["for","workManagement"]],null,null,null,null,null)),(e()(),cr(-1,null,["Enable automated work management for some buildings"]))],null,(function(e,n){e(n,1,0,n.component.getComplexWorkers())}))}function Mw(e){return gr(0,[(e()(),qs(0,0,null,null,8,"div",[["class","entry"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,7,"span",[["class","item"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(3,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),qs(4,0,null,null,4,"span",[["id","arrows"]],null,null,null,null,null)),(e()(),qs(5,0,null,null,1,"button",[["class","arrow"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.up(e.context.$implicit,e.parent.context.index)&&t),t}),null,null)),(e()(),cr(-1,null,["\u2191"])),(e()(),qs(7,0,null,null,1,"button",[["class","arrow"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.down(e.context.$implicit,e.parent.context.index)&&t),t}),null,null)),(e()(),cr(-1,null,["\u2193"]))],(function(e,n){e(n,3,0,n.component.getResourceName(n.context.$implicit),"resources")}),null)}function Dw(e){return gr(0,[(e()(),qs(0,0,null,null,4,"div",[["class","priorityLine icon"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"span",[["id","index"]],null,null,null,null,null)),(e()(),cr(2,null,["",""])),(e()(),Qs(16777216,null,null,1,null,Mw)),ai(4,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,4,0,n.context.$implicit)}),(function(e,n){e(n,2,0,n.context.index+1)}))}function Lw(e){return gr(0,[(e()(),qs(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,0,"input",[["id","showFaith"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateShowFaith()&&t),t}),null,null)),(e()(),qs(2,0,null,null,1,"label",[["for","showFaith"]],null,null,null,null,null)),(e()(),cr(-1,null,["Show faith in the header"])),(e()(),qs(4,0,null,null,0,"br",[],null,null,null,null,null))],null,(function(e,n){e(n,1,0,n.component.getShowFaith())}))}function Fw(e){return gr(0,[(e()(),qs(0,0,null,null,120,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"app-management-top-menu",[],null,null,null,_w,Aw)),ai(3,114688,null,0,yw,[Sf],null,null),(e()(),qs(4,0,null,null,116,"div",[["id","content"]],null,null,null,null,null)),(e()(),qs(5,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),qs(6,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["General Management"])),(e()(),qs(8,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["Rations"])),(e()(),qs(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(11,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),qs(12,0,null,null,1,"span",[["class","label"]],null,null,null,null,null)),(e()(),cr(13,null,["food: ",""])),(e()(),qs(14,0,null,null,1,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),qs(15,0,null,null,0,"input",[["class","slider"],["max","4"],["min","1"],["type","range"],["value","2"]],[[8,"value",0]],[[null,"input"]],(function(e,n,l){var t=!0;return"input"===n&&(t=!1!==e.component.changeFoodValue(l)&&t),t}),null,null)),(e()(),qs(16,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),qs(17,0,null,null,1,"span",[["class","label"]],null,null,null,null,null)),(e()(),cr(18,null,["clothes: ",""])),(e()(),qs(19,0,null,null,1,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),qs(20,0,null,null,0,"input",[["class","slider"],["max","4"],["min","1"],["type","range"],["value","2"]],[[8,"value",0]],[[null,"input"]],(function(e,n,l){var t=!0;return"input"===n&&(t=!1!==e.component.changeClothesValue(l)&&t),t}),null,null)),(e()(),qs(21,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),qs(22,0,null,null,1,"span",[["class","label"]],null,null,null,null,null)),(e()(),cr(23,null,["alcohol: ",""])),(e()(),qs(24,0,null,null,1,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),qs(25,0,null,null,0,"input",[["class","slider"],["max","4"],["min","1"],["type","range"],["value","1"]],[[8,"value",0]],[[null,"input"]],(function(e,n,l){var t=!0;return"input"===n&&(t=!1!==e.component.changeAlcoholValue(l)&&t),t}),null,null)),(e()(),Qs(16777216,null,null,1,null,xw)),ai(27,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(28,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(29,0,null,null,0,"input",[["id","furClothes"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateFurClothes()&&t),t}),null,null)),(e()(),qs(30,0,null,null,1,"label",[["for","furClothes"]],null,null,null,null,null)),(e()(),cr(-1,null,["Allow fur when no clothes are available"])),(e()(),qs(32,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,kw)),ai(34,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(35,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(36,0,null,null,3,null,null,null,null,null,null,null)),(e()(),qs(37,0,null,null,0,"input",[["id","defaultWorkshopResearch"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateDefaultWorkshopResearch()&&t),t}),null,null)),(e()(),qs(38,0,null,null,1,"label",[["for","defaultWorkshopResearch"]],null,null,null,null,null)),(e()(),cr(-1,null,["Workshops start with research mode (on) or crafting (off)"])),(e()(),qs(40,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(41,0,null,null,3,null,null,null,null,null,null,null)),(e()(),qs(42,0,null,null,0,"input",[["id","defaultGathererFood"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateDefaultGathererFood()&&t),t}),null,null)),(e()(),qs(43,0,null,null,1,"label",[["for","defaultGathererFood"]],null,null,null,null,null)),(e()(),cr(-1,null,["Gatherers start with food mode (on) or resources (off)"])),(e()(),qs(45,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(46,0,null,null,3,null,null,null,null,null,null,null)),(e()(),qs(47,0,null,null,0,"input",[["id","switchHunterFromTaming"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateSwitchHunterFromTaming()&&t),t}),null,null)),(e()(),qs(48,0,null,null,1,"label",[["for","switchHunterFromTaming"]],null,null,null,null,null)),(e()(),cr(-1,null,["If enabled hunters won't stop taming animals even if pastures are full"])),(e()(),qs(50,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(51,0,null,null,3,null,null,null,null,null,null,null)),(e()(),qs(52,0,null,null,0,"input",[["id","plowInSummer"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updatePlowInSummer()&&t),t}),null,null)),(e()(),qs(53,0,null,null,1,"label",[["for","plowInSummer"]],null,null,null,null,null)),(e()(),cr(-1,null,["Allow fields to be plowed in summer"])),(e()(),qs(55,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),cr(-1,null,["food priority"])),(e()(),qs(57,0,null,null,2,"div",[["id","foodPriorityList"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,Dw)),ai(59,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(60,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),cr(-1,null,["Log management"])),(e()(),qs(62,0,null,null,0,"input",[["id","logMerchant"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateLogMerchant()&&t),t}),null,null)),(e()(),qs(63,0,null,null,1,"label",[["for","logMerchant"]],null,null,null,null,null)),(e()(),cr(-1,null,["Log message when a new merchant has arrived"])),(e()(),qs(65,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(66,0,null,null,0,"input",[["id","logFiredWorkers"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateLogFiredWorkers()&&t),t}),null,null)),(e()(),qs(67,0,null,null,1,"label",[["for","logFiredWorkers"]],null,null,null,null,null)),(e()(),cr(-1,null,["Log message when worker is removed from building"])),(e()(),qs(69,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(70,0,null,null,0,"input",[["id","logAutoTrade"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateLogAutoTrade()&&t),t}),null,null)),(e()(),qs(71,0,null,null,1,"label",[["for","logAutoTrade"]],null,null,null,null,null)),(e()(),cr(-1,null,["Log message when auto trade has been performed"])),(e()(),qs(73,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(74,0,null,null,0,"input",[["id","logSickness"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateLogSickness()&&t),t}),null,null)),(e()(),qs(75,0,null,null,1,"label",[["for","logSickness"]],null,null,null,null,null)),(e()(),cr(-1,null,["Log sickness related events"])),(e()(),qs(77,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(78,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),cr(-1,null,["Header management"])),(e()(),qs(80,0,null,null,0,"input",[["id","secondHeaderRow"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateSecondHeaderRow()&&t),t}),null,null)),(e()(),qs(81,0,null,null,1,"label",[["for","secondHeaderRow"]],null,null,null,null,null)),(e()(),cr(-1,null,["Display two rows in the header (resources will be displayed in second row)"])),(e()(),qs(83,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(84,0,null,null,0,"input",[["id","foodNutrition"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateFoodNutrition()&&t),t}),null,null)),(e()(),qs(85,0,null,null,1,"label",[["for","foodNutrition"]],null,null,null,null,null)),(e()(),cr(-1,null,["Show food nutrition in the header"])),(e()(),qs(87,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(88,0,null,null,0,"input",[["id","showRaw"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateShowRaw()&&t),t}),null,null)),(e()(),qs(89,0,null,null,1,"label",[["for","showRaw"]],null,null,null,null,null)),(e()(),cr(-1,null,["Show raw resources tooltip in the header"])),(e()(),qs(91,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(92,0,null,null,0,"input",[["id","showProcessed"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateShowProcessed()&&t),t}),null,null)),(e()(),qs(93,0,null,null,1,"label",[["for","showProcessed"]],null,null,null,null,null)),(e()(),cr(-1,null,["Show processed resources tooltip in the header"])),(e()(),qs(95,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(96,0,null,null,0,"input",[["id","showFood"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateShowFood()&&t),t}),null,null)),(e()(),qs(97,0,null,null,1,"label",[["for","showFood"]],null,null,null,null,null)),(e()(),cr(-1,null,["Show food resources tooltip in the header"])),(e()(),qs(99,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(100,0,null,null,0,"input",[["id","showTools"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateShowTools()&&t),t}),null,null)),(e()(),qs(101,0,null,null,1,"label",[["for","showTools"]],null,null,null,null,null)),(e()(),cr(-1,null,["Show tools resources tooltip in the header"])),(e()(),qs(103,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(104,0,null,null,0,"input",[["id","showPopulation"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateShowPopulation()&&t),t}),null,null)),(e()(),qs(105,0,null,null,1,"label",[["for","showPopulation"]],null,null,null,null,null)),(e()(),cr(-1,null,["Show population in the header"])),(e()(),qs(107,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(108,0,null,null,0,"input",[["id","showFreeWorkers"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateShowFreeWorkers()&&t),t}),null,null)),(e()(),qs(109,0,null,null,1,"label",[["for","showFreeWorkers"]],null,null,null,null,null)),(e()(),cr(-1,null,["Show free workers in the header"])),(e()(),qs(111,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(112,0,null,null,0,"input",[["id","showHappiness"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateShowHappiness()&&t),t}),null,null)),(e()(),qs(113,0,null,null,1,"label",[["for","showHappiness"]],null,null,null,null,null)),(e()(),cr(-1,null,["Show happiness in the header"])),(e()(),qs(115,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,Lw)),ai(117,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(118,0,null,null,0,"input",[["id","showResearchProgress"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.updateShowResearchProgress()&&t),t}),null,null)),(e()(),qs(119,0,null,null,1,"label",[["for","showResearchProgress"]],null,null,null,null,null)),(e()(),cr(-1,null,["Show research progress in the header"]))],(function(e,n){var l=n.component;e(n,3,0),e(n,27,0,l.isTaxUnlocked()),e(n,34,0,l.isHREnabled()),e(n,59,0,l.getFoodLines()),e(n,117,0,l.isFaithUnlocked())}),(function(e,n){var l=n.component;e(n,13,0,.5*l.getRations()),e(n,15,0,l.getRations()),e(n,18,0,l.getClothesRations()),e(n,20,0,l.getClothesRations()),e(n,23,0,l.getAlcoholRations()),e(n,25,0,l.getAlcoholRations()),e(n,29,0,l.getFurClothes()),e(n,37,0,l.getDefaultWorkshopResearch()),e(n,42,0,l.getDefaultGathererFood()),e(n,47,0,l.getSwitchHunterFromTaming()),e(n,52,0,l.getPlowInSummer()),e(n,62,0,l.getLogMerchant()),e(n,66,0,l.getLogFiredWorkers()),e(n,70,0,l.getLogAutoTrade()),e(n,74,0,l.getLogSickness()),e(n,80,0,l.getSecondHeaderRow()),e(n,84,0,l.getFoodNutrition()),e(n,88,0,l.getShowRaw()),e(n,92,0,l.getShowProcessed()),e(n,96,0,l.getShowFood()),e(n,100,0,l.getShowTools()),e(n,104,0,l.getShowPopulation()),e(n,108,0,l.getShowFreeWorkers()),e(n,112,0,l.getShowHappiness()),e(n,118,0,l.getShowResearchProgress())}))}function Uw(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-management",[],null,null,null,Fw,Pw)),ai(1,114688,null,0,ww,[nO,yf,Sf],null,null)],(function(e,n){e(n,1,0)}),null)}var Hw=Ht("app-management",ww,Uw,{},{},[]);class Gw{constructor(e,n){this.happinessService=e,this.modalService=n}ngOnInit(){}getSum(){return this.happinessService.calculateDailyChange()}getPositiveEffects(){return this.happinessService.getHappinessEffects().filter(e=>e.value>=0)}getNegativeEffects(){return this.happinessService.getHappinessEffects().filter(e=>e.value<0)}getEffectName(e){return Uu.prepareHappinessEffectName(e)}getSumText(){return Uu.round(this.getSum(),2)}getHappinessBonus(){return this.happinessService.getHappinessEffect()}openFestivalModal(){this.modalService.open(ju.FESTIVAL)}canStartFestival(){return void 0===this.happinessService.getHappinessEffectByEffect(Fu.FESTIVAL)}getShowDuration(){return this.happinessService.getShowDuration()}toggleShowDuration(){this.happinessService.toggleShowDuration()}}var Bw=Jl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:99%}#content[_ngcontent-%COMP%]{margin:.5%;height:90%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.5em;font-weight:800}.center[_ngcontent-%COMP%]{text-align:center}.headers[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;margin-bottom:10px}.headers[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 49%}#effects[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-pack:center;justify-content:center;height:78%}#positive[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;border-right:4px solid #000;font-size:1.5em;padding-right:10px;-webkit-box-flex:0;flex:0 0 49%;-webkit-box-align:start;align-items:flex-start;height:100%;overflow:auto;direction:rtl}.changeToRight[_ngcontent-%COMP%]{direction:ltr}#negative[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;font-size:1.5em;padding-left:10px;-webkit-box-flex:0;flex:0 0 49%;overflow:auto}.positiveValue[_ngcontent-%COMP%]{display:inline-block;width:30px;text-align:center;color:var(--positive-colour)}.negativeValue[_ngcontent-%COMP%]{display:inline-block;width:30px;text-align:center;color:var(--negative-colour)}.positiveColor[_ngcontent-%COMP%]{color:var(--positive-colour)}.negativeColor[_ngcontent-%COMP%]{color:var(--negative-colour)}.subtitle[_ngcontent-%COMP%]{font-size:1.2em;font-weight:bolder}.small[_ngcontent-%COMP%]{font-size:.7em}#festival[_ngcontent-%COMP%]{float:right}"]],data:{}});function Ww(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[["id","festival"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.openFestivalModal()&&t),t}),null,null)),(e()(),cr(-1,null,["Organize festival"]))],null,null)}function Vw(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[["class","small"]],null,null,null,null,null)),(e()(),cr(1,null,["(",")"]))],null,(function(e,n){e(n,1,0,n.parent.context.$implicit.duration)}))}function zw(e){return gr(0,[(e()(),qs(0,0,null,null,5,"div",[["class","changeToRight"]],null,null,null,null,null)),(e()(),cr(1,null,["",""])),(e()(),Qs(16777216,null,null,1,null,Vw)),ai(3,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(4,0,null,null,1,"span",[["class","positiveValue"]],null,null,null,null,null)),(e()(),cr(5,null,["",""]))],(function(e,n){e(n,3,0,n.component.getShowDuration()&&n.context.$implicit.duration>0)}),(function(e,n){e(n,1,0,n.component.getEffectName(n.context.$implicit.effect)),e(n,5,0,n.context.$implicit.value)}))}function Yw(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[["class","small"]],null,null,null,null,null)),(e()(),cr(1,null,["(",")"]))],null,(function(e,n){e(n,1,0,n.parent.context.$implicit.duration)}))}function $w(e){return gr(0,[(e()(),qs(0,0,null,null,5,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"span",[["class","negativeValue"]],null,null,null,null,null)),(e()(),cr(2,null,["",""])),(e()(),Qs(16777216,null,null,1,null,Yw)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),cr(5,null,[" ",""]))],(function(e,n){e(n,4,0,n.component.getShowDuration()&&n.context.$implicit.duration>0)}),(function(e,n){var l=n.component;e(n,2,0,n.context.$implicit.value),e(n,5,0,l.getEffectName(n.context.$implicit.effect))}))}function Kw(e){return gr(0,[(e()(),qs(0,0,null,null,43,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"app-management-top-menu",[],null,null,null,_w,Aw)),ai(3,114688,null,0,yw,[Sf],null,null),(e()(),qs(4,0,null,null,39,"div",[["id","content"]],null,null,null,null,null)),(e()(),qs(5,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),qs(6,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["Happiness"])),(e()(),qs(8,0,null,null,10,"div",[["class","center"]],null,null,null,null,null)),(e()(),qs(9,0,null,null,1,"app-happiness",[],null,null,null,VA,FA)),ai(10,114688,null,0,LA,[bf],null,null),(e()(),qs(11,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),cr(-1,null,[" (bonus: "])),(e()(),qs(13,0,null,null,4,"span",[],null,null,null,null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(15,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(16,{negativeColor:0,positiveColor:1}),(e()(),cr(17,null,[""," %"])),(e()(),cr(-1,null,[") "])),(e()(),qs(19,0,null,null,6,"div",[["class","center"]],null,null,null,null,null)),(e()(),qs(20,0,null,null,4,"span",[],null,null,null,null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(22,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(23,{negativeColor:0,positiveColor:1}),(e()(),cr(24,null,["","%"])),(e()(),cr(-1,null,[" per day "])),(e()(),qs(26,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(27,0,null,null,0,"input",[["id","showDuration"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==e.component.toggleShowDuration()&&t),t}),null,null)),(e()(),qs(28,0,null,null,1,"label",[["for","showDuration"]],null,null,null,null,null)),(e()(),cr(-1,null,["show duration in days"])),(e()(),Qs(16777216,null,null,1,null,Ww)),ai(31,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(32,0,null,null,4,"div",[["class","headers"]],null,null,null,null,null)),(e()(),qs(33,0,null,null,1,"span",[["class","center subtitle"]],null,null,null,null,null)),(e()(),cr(-1,null,["Positive Effects"])),(e()(),qs(35,0,null,null,1,"span",[["class","center subtitle"]],null,null,null,null,null)),(e()(),cr(-1,null,["Negative Effects"])),(e()(),qs(37,0,null,null,6,"div",[["id","effects"]],null,null,null,null,null)),(e()(),qs(38,0,null,null,2,"div",[["id","positive"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,zw)),ai(40,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(41,0,null,null,2,"div",[["id","negative"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,$w)),ai(43,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,3,0),e(n,10,0);var t=e(n,16,0,l.getHappinessBonus()<0,l.getHappinessBonus()>0);e(n,15,0,t);var i=e(n,23,0,l.getSum()<0,l.getSum()>0);e(n,22,0,i),e(n,31,0,l.canStartFestival()),e(n,40,0,l.getPositiveEffects()),e(n,43,0,l.getNegativeEffects())}),(function(e,n){var l=n.component;e(n,17,0,l.getHappinessBonus()),e(n,24,0,l.getSumText()),e(n,27,0,l.getShowDuration())}))}function jw(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-happiness-management",[],null,null,null,Kw,Bw)),ai(1,114688,null,0,Gw,[bf,pf],null,null)],(function(e,n){e(n,1,0)}),null)}var Qw=Ht("app-happiness-management",Gw,jw,{},{},[]);class qw{constructor(e){this.effectsService=e}ngOnInit(){}getBuildingsEffects(){return this.effectsService.getBuildingEffects().filter(e=>!e.isBuff()).sort((e,n)=>e.isPermanent()&&!n.isPermanent()?-1:e.isPermanent()&&n.isPermanent()?0:!e.isPermanent()&&n.isPermanent()?1:void 0)}getArmyEffects(){return this.effectsService.getArmyEffects()}getBuildingName(e){return Uu.prepareBuildingName(e)}getTroopName(e){return Uu.prepareTroopName(e)}getNatureEffects(){return this.effectsService.getNatureEffects()}}var Xw=Jl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:99%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#content[_ngcontent-%COMP%]{margin:.5%;height:94%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#buildingEffects[_ngcontent-%COMP%]{height:40%;border:1px solid #000}#armyEffects[_ngcontent-%COMP%]{height:33%;border:1px solid #000}#natureEffects[_ngcontent-%COMP%]{height:15%;border:1px solid #000}.rows[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;text-align:center;height:90.5%;overflow-y:auto}.natureRows[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;text-align:center;height:79%;overflow-y:auto}.row[_ngcontent-%COMP%]{display:-webkit-box;display:flex;border:1px solid #000;margin:3px}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{border-right:none}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){-webkit-box-flex:0;flex:0 0 7%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){-webkit-box-flex:0;flex:0 0 35%}.natureRow[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){-webkit-box-flex:0;flex:0 0 50%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){-webkit-box-flex:0;flex:0 0 30%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){-webkit-box-flex:0;flex:0 0 13%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5){-webkit-box-flex:0;flex:0 0 15%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:auto;border-right:1px solid #000}.headers[_ngcontent-%COMP%]{margin:3px 3px 0;display:-webkit-box;display:flex;width:98.3%;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;text-align:center;font-size:.9em}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border:1px solid #000;border-left:none}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-of-type{border-left:1px solid #000}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){-webkit-box-flex:0;flex:0 0 7%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){-webkit-box-flex:0;flex:0 0 35%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){-webkit-box-flex:0;flex:0 0 30%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){-webkit-box-flex:0;flex:0 0 13%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5){-webkit-box-flex:0;flex:0 0 15%}.natureHeaders[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){-webkit-box-flex:0;flex:0 0 50%}.positive[_ngcontent-%COMP%]{color:var(--positive-colour)}.negative[_ngcontent-%COMP%]{color:var(--negative-colour)}"]],data:{}});function Zw(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[["class","positive"]],null,null,null,null,null)),(e()(),cr(1,null,["+","% "]))],null,(function(e,n){e(n,1,0,n.parent.context.$implicit.effect)}))}function Jw(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[["class","negative"]],null,null,null,null,null)),(e()(),cr(1,null,["","% "]))],null,(function(e,n){e(n,1,0,n.parent.context.$implicit.effect)}))}function eP(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(1,null,[""," "]))],null,(function(e,n){e(n,1,0,n.parent.context.$implicit.duration)}))}function nP(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["permanent"]))],null,null)}function lP(e){return gr(0,[(e()(),qs(0,0,null,null,14,"div",[["class","row"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(2,null,["","."])),(e()(),qs(3,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(4,null,["",""])),(e()(),qs(5,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(6,null,["",""])),(e()(),Qs(16777216,null,null,1,null,Zw)),ai(8,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,Jw)),ai(10,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,eP)),ai(12,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,nP)),ai(14,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){e(n,8,0,n.context.$implicit.effect>=0),e(n,10,0,n.context.$implicit.effect<0),e(n,12,0,n.context.$implicit.duration>0),e(n,14,0,n.context.$implicit.duration<0)}),(function(e,n){var l=n.component;e(n,2,0,n.context.index+1),e(n,4,0,n.context.$implicit.name),e(n,6,0,l.getBuildingName(n.context.$implicit.building))}))}function tP(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[["class","positive"]],null,null,null,null,null)),(e()(),cr(1,null,["+","% "]))],null,(function(e,n){e(n,1,0,n.parent.context.$implicit.effect)}))}function iP(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[["class","negative"]],null,null,null,null,null)),(e()(),cr(1,null,["","% "]))],null,(function(e,n){e(n,1,0,n.parent.context.$implicit.effect)}))}function sP(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(1,null,[""," "]))],null,(function(e,n){e(n,1,0,n.parent.context.$implicit.duration)}))}function rP(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["permanent"]))],null,null)}function uP(e){return gr(0,[(e()(),qs(0,0,null,null,14,"div",[["class","row"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(2,null,["","."])),(e()(),qs(3,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(4,null,["",""])),(e()(),qs(5,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(6,null,["",""])),(e()(),Qs(16777216,null,null,1,null,tP)),ai(8,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,iP)),ai(10,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,sP)),ai(12,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,rP)),ai(14,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){e(n,8,0,n.context.$implicit.effect>=0),e(n,10,0,n.context.$implicit.effect<0),e(n,12,0,n.context.$implicit.duration>0),e(n,14,0,n.context.$implicit.duration<0)}),(function(e,n){var l=n.component;e(n,2,0,n.context.index+1),e(n,4,0,n.context.$implicit.name),e(n,6,0,l.getTroopName(n.context.$implicit.troop))}))}function oP(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[["class","positive"]],null,null,null,null,null)),(e()(),cr(1,null,["+","% "]))],null,(function(e,n){e(n,1,0,n.parent.context.$implicit.effect)}))}function aP(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[["class","negative"]],null,null,null,null,null)),(e()(),cr(1,null,["","% "]))],null,(function(e,n){e(n,1,0,n.parent.context.$implicit.effect)}))}function cP(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(1,null,[""," "]))],null,(function(e,n){e(n,1,0,n.parent.context.$implicit.duration)}))}function hP(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["permanent"]))],null,null)}function dP(e){return gr(0,[(e()(),qs(0,0,null,null,12,"div",[["class","row natureRow"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(2,null,["","."])),(e()(),qs(3,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(4,null,["",""])),(e()(),Qs(16777216,null,null,1,null,oP)),ai(6,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,aP)),ai(8,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,cP)),ai(10,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,hP)),ai(12,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){e(n,6,0,n.context.$implicit.effect>=0),e(n,8,0,n.context.$implicit.effect<0),e(n,10,0,n.context.$implicit.duration>0),e(n,12,0,n.context.$implicit.duration<0)}),(function(e,n){e(n,2,0,n.context.index+1),e(n,4,0,n.context.$implicit.name)}))}function gP(e){return gr(0,[(e()(),qs(0,0,null,null,56,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"app-management-top-menu",[],null,null,null,_w,Aw)),ai(3,114688,null,0,yw,[Sf],null,null),(e()(),qs(4,0,null,null,52,"div",[["id","content"]],null,null,null,null,null)),(e()(),qs(5,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),qs(6,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["Effects Management"])),(e()(),qs(8,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["Buildings effects"])),(e()(),qs(10,0,null,null,14,"div",[["id","buildingEffects"]],null,null,null,null,null)),(e()(),qs(11,0,null,null,10,"div",[["class","headers"]],null,null,null,null,null)),(e()(),qs(12,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["#"])),(e()(),qs(14,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["name"])),(e()(),qs(16,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["building"])),(e()(),qs(18,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["effect"])),(e()(),qs(20,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["duration"])),(e()(),qs(22,0,null,null,2,"div",[["class","rows"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,lP)),ai(24,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(25,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["Army effects"])),(e()(),qs(27,0,null,null,14,"div",[["id","armyEffects"]],null,null,null,null,null)),(e()(),qs(28,0,null,null,10,"div",[["class","headers"]],null,null,null,null,null)),(e()(),qs(29,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["#"])),(e()(),qs(31,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["name"])),(e()(),qs(33,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["troop"])),(e()(),qs(35,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["effect"])),(e()(),qs(37,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["duration"])),(e()(),qs(39,0,null,null,2,"div",[["class","rows"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,uP)),ai(41,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(42,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["Nature effects"])),(e()(),qs(44,0,null,null,12,"div",[["id","natureEffects"]],null,null,null,null,null)),(e()(),qs(45,0,null,null,8,"div",[["class","headers natureHeaders"]],null,null,null,null,null)),(e()(),qs(46,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["#"])),(e()(),qs(48,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["name"])),(e()(),qs(50,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["effect"])),(e()(),qs(52,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["duration"])),(e()(),qs(54,0,null,null,2,"div",[["class","natureRows"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,dP)),ai(56,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,3,0),e(n,24,0,l.getBuildingsEffects()),e(n,41,0,l.getArmyEffects()),e(n,56,0,l.getNatureEffects())}),null)}function pP(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-effects-management",[],null,null,null,gP,Xw)),ai(1,114688,null,0,qw,[Jv],null,null)],(function(e,n){e(n,1,0)}),null)}var mP=Ht("app-effects-management",qw,pP,{},{},[]);class fP{constructor(e){this.landService=e}ngOnInit(){}getForestSize(){return this.landService.getForest()}getLandSize(){return this.landService.getLand()}getForestOptions(){return this.landService.getForestOptions()}}var SP=Jl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:99%}#content[_ngcontent-%COMP%]{margin:.5%;height:94%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}.foresterLabel[_ngcontent-%COMP%]{display:inline-block;width:160px}input[type=number][_ngcontent-%COMP%]{width:6ch}"]],data:{}});function EP(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(1,null,["",""]))],null,(function(e,n){e(n,1,0,n.component.getForestSize())}))}function vP(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[["class","critical"]],null,null,null,null,null)),(e()(),cr(1,null,["",""]))],null,(function(e,n){e(n,1,0,n.component.getForestSize())}))}function RP(e){return gr(0,[(e()(),qs(0,0,null,null,65,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"app-management-top-menu",[],null,null,null,_w,Aw)),ai(3,114688,null,0,yw,[Sf],null,null),(e()(),qs(4,0,null,null,61,"div",[["id","content"]],null,null,null,null,null)),(e()(),qs(5,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),qs(6,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["Forest Management"])),(e()(),qs(8,0,null,null,10,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(9,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(10,114688,null,0,$p,[],{name:[0,"name"]},null),(e()(),Qs(16777216,null,null,1,null,EP)),ai(12,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,vP)),ai(14,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),cr(-1,null,[" \xa0\xa0 "])),(e()(),qs(16,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(17,114688,null,0,$p,[],{name:[0,"name"]},null),(e()(),cr(18,null,[" "," "])),(e()(),qs(19,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),cr(-1,null,[" Plant trees if:"])),(e()(),qs(21,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(22,0,null,null,5,"input",[["id","forest"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,23).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,23).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.getForestOptions().forestSizeRuleEnabled=l)&&t),t}),null,null)),ai(23,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(25,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(27,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(28,0,null,null,1,"label",[["class","foresterLabel"],["for","forest"]],null,null,null,null,null)),(e()(),cr(-1,null,["forest smaller than"])),(e()(),qs(30,0,null,null,6,"input",[["id","forestSize"],["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,31)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,31).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,31)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,31)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,32).onChange(l.target.value)&&t),"input"===n&&(t=!1!==qt(e,32).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,32).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.getForestOptions().forestSizeRule=l)&&t),t}),null,null)),ai(31,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(32,16384,null,0,gm,[gl,ol],null,null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,gm]),ai(34,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(36,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(37,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(38,0,null,null,5,"input",[["id","land"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,39).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,39).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.getForestOptions().landSizeRuleEnabled=l)&&t),t}),null,null)),ai(39,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(41,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(43,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(44,0,null,null,1,"label",[["class","foresterLabel"],["for","land"]],null,null,null,null,null)),(e()(),cr(-1,null,["free land bigger than"])),(e()(),qs(46,0,null,null,6,"input",[["id","landSize"],["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,47)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,47).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,47)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,47)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,48).onChange(l.target.value)&&t),"input"===n&&(t=!1!==qt(e,48).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,48).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.getForestOptions().landSizeRule=l)&&t),t}),null,null)),ai(47,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(48,16384,null,0,gm,[gl,ol],null,null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,gm]),ai(50,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(52,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(53,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(54,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),cr(-1,null,[" Cut trees if:"])),(e()(),qs(56,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(57,0,null,null,1,"label",[["for","forestSize2"]],null,null,null,null,null)),(e()(),cr(-1,null,["Forest bigger than "])),(e()(),qs(59,0,null,null,6,"input",[["id","forestSize2"],["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,60)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,60).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,60)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,60)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,61).onChange(l.target.value)&&t),"input"===n&&(t=!1!==qt(e,61).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,61).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.getForestOptions().forestSizeReserved=l)&&t),t}),null,null)),ai(60,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(61,16384,null,0,gm,[gl,ol],null,null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,gm]),ai(63,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(65,16384,null,0,im,[[4,tm]],null,null)],(function(e,n){var l=n.component;e(n,3,0),e(n,10,0,"forest"),e(n,12,0,l.getForestSize()>=400),e(n,14,0,l.getForestSize()<400),e(n,17,0,"land"),e(n,25,0,l.getForestOptions().forestSizeRuleEnabled),e(n,34,0,l.getForestOptions().forestSizeRule),e(n,41,0,l.getForestOptions().landSizeRuleEnabled),e(n,50,0,l.getForestOptions().landSizeRule),e(n,63,0,l.getForestOptions().forestSizeReserved)}),(function(e,n){e(n,18,0,n.component.getLandSize()),e(n,22,0,qt(n,27).ngClassUntouched,qt(n,27).ngClassTouched,qt(n,27).ngClassPristine,qt(n,27).ngClassDirty,qt(n,27).ngClassValid,qt(n,27).ngClassInvalid,qt(n,27).ngClassPending),e(n,30,0,qt(n,36).ngClassUntouched,qt(n,36).ngClassTouched,qt(n,36).ngClassPristine,qt(n,36).ngClassDirty,qt(n,36).ngClassValid,qt(n,36).ngClassInvalid,qt(n,36).ngClassPending),e(n,38,0,qt(n,43).ngClassUntouched,qt(n,43).ngClassTouched,qt(n,43).ngClassPristine,qt(n,43).ngClassDirty,qt(n,43).ngClassValid,qt(n,43).ngClassInvalid,qt(n,43).ngClassPending),e(n,46,0,qt(n,52).ngClassUntouched,qt(n,52).ngClassTouched,qt(n,52).ngClassPristine,qt(n,52).ngClassDirty,qt(n,52).ngClassValid,qt(n,52).ngClassInvalid,qt(n,52).ngClassPending),e(n,59,0,qt(n,65).ngClassUntouched,qt(n,65).ngClassTouched,qt(n,65).ngClassPristine,qt(n,65).ngClassDirty,qt(n,65).ngClassValid,qt(n,65).ngClassInvalid,qt(n,65).ngClassPending)}))}function OP(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-forest-management",[],null,null,null,RP,SP)),ai(1,114688,null,0,fP,[nR],null,null)],(function(e,n){e(n,1,0)}),null)}var bP=Ht("app-forest-management",fP,OP,{},{},[]);class TP{constructor(e,n){this.servicesService=e,this.gameService=n,this.region=Du.VILLAGE,this.sorting=0}ngOnInit(){}getBuildings(e){const n=[];return this.servicesService.getServiceByRegion(e).getBuildings().forEach(e=>{const l=n.find(n=>n.building===e.getBuildingType());l?(l.count+=1,l.size+=e.getSize(),e.isWorking()&&(l.working+=1)):n.push({building:e.getBuildingType(),count:1,size:e.getSize(),working:e.isWorking()?1:0})}),n.sort(0===this.sorting?(e,n)=>e.building-n.building:1===this.sorting?(e,n)=>n.count-e.count:(e,n)=>e.count-n.count)}getBuildingName(e){return Uu.prepareBuildingName(e)}getRegions(){const e=[Du.VILLAGE];return this.gameService.isEnabled(Iu.FORT)&&e.push(Du.FORT),e.push(Du.FOREST),this.gameService.isEnabled(Iu.FIELD)&&e.push(Du.FIELD),this.gameService.isEnabled(Iu.MOUNTAINS)&&e.push(Du.MOUNTAINS),this.gameService.isEnabled(Iu.PLATEAU)&&e.push(Du.PLATEAU),this.gameService.isEnabled(Iu.SEA)&&e.push(Du.SEA),e}getRegionName(e){return Uu.prepareRegionName(e)}}var CP=Jl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:99%}#top-menu[_ngcontent-%COMP%]{height:5%;margin:-2px;border:2px solid #000;overflow:hidden}#content[_ngcontent-%COMP%]{margin:.5%;height:94%}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}.headers[_ngcontent-%COMP%]{margin:3px 3px 0;display:-webkit-box;display:flex;width:98.3%;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;text-align:center;font-size:.9em;font-weight:700}.rows[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;text-align:center;height:90.5%;overflow-y:auto}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border:1px solid #000;border-left:none}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-of-type{border-left:1px solid #000}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){-webkit-box-flex:0;flex:0 0 7%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){-webkit-box-flex:0;flex:0 0 30%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){-webkit-box-flex:0;flex:0 0 15%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){-webkit-box-flex:0;flex:0 0 18%}.headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5), .headers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(6){-webkit-box-flex:0;flex:0 0 15%}.row[_ngcontent-%COMP%]{display:-webkit-box;display:flex;border:1px solid #000;margin:3px}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{border-right:none}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){-webkit-box-flex:0;flex:0 0 7%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){-webkit-box-flex:0;flex:0 0 30%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){-webkit-box-flex:0;flex:0 0 15%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){-webkit-box-flex:0;flex:0 0 18%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5), .row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(6){-webkit-box-flex:0;flex:0 0 15%}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:auto;border-right:1px solid #000}"]],data:{}});function IP(e){return gr(0,[(e()(),qs(0,0,null,null,3,"option",[],null,null,null,null,null)),ai(1,147456,null,0,Rm,[ol,gl,[2,vm]],{ngValue:[0,"ngValue"]},null),ai(2,147456,null,0,Tm,[ol,gl,[8,null]],{ngValue:[0,"ngValue"]},null),(e()(),cr(3,null,[" "," "]))],(function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)}),(function(e,n){e(n,3,0,n.component.getRegionName(n.context.$implicit))}))}function yP(e){return gr(0,[(e()(),qs(0,0,null,null,12,"div",[["class","row"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(2,null,["","."])),(e()(),qs(3,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(4,null,["",""])),(e()(),qs(5,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(6,null,["",""])),(e()(),qs(7,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(8,null,["",""])),(e()(),qs(9,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(10,null,["",""])),(e()(),qs(11,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(12,null,["",""]))],null,(function(e,n){var l=n.component;e(n,2,0,n.context.index+1),e(n,4,0,l.getBuildingName(n.context.$implicit.building)),e(n,6,0,n.context.$implicit.count),e(n,8,0,n.context.$implicit.size),e(n,10,0,n.context.$implicit.working),e(n,12,0,n.context.$implicit.count-n.context.$implicit.working)}))}function AP(e){return gr(0,[(e()(),qs(0,0,null,null,64,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,2,"div",[["id","top-menu"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"app-management-top-menu",[],null,null,null,_w,Aw)),ai(3,114688,null,0,yw,[Sf],null,null),(e()(),qs(4,0,null,null,60,"div",[["id","content"]],null,null,null,null,null)),(e()(),qs(5,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),qs(6,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["Summary page"])),(e()(),qs(8,0,null,null,6,"input",[["id","sortAlphabetically"],["name","sorting"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,9)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,9).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,9)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,9)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,10).onChange()&&t),"blur"===n&&(t=!1!==qt(e,10).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.sorting=l)&&t),t}),null,null)),ai(9,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(10,212992,null,0,mm,[gl,ol,pm,kn],{name:[0,"name"],value:[1,"value"]},null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,mm]),ai(12,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(14,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(15,0,null,null,1,"label",[["for","sortAlphabetically"]],null,null,null,null,null)),(e()(),cr(-1,null,["sort alphabetically"])),(e()(),qs(17,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(18,0,null,null,6,"input",[["id","sortByBiggest"],["name","sorting"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,19)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,19).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,19)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,19)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,20).onChange()&&t),"blur"===n&&(t=!1!==qt(e,20).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.sorting=l)&&t),t}),null,null)),ai(19,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(20,212992,null,0,mm,[gl,ol,pm,kn],{name:[0,"name"],value:[1,"value"]},null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,mm]),ai(22,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(24,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(25,0,null,null,1,"label",[["for","sortByBiggest"]],null,null,null,null,null)),(e()(),cr(-1,null,["sort by most buildings"])),(e()(),qs(27,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(28,0,null,null,6,"input",[["id","sortBySmallest"],["name","sorting"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,29)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,29).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,29)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,29)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,30).onChange()&&t),"blur"===n&&(t=!1!==qt(e,30).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.sorting=l)&&t),t}),null,null)),ai(29,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(30,212992,null,0,mm,[gl,ol,pm,kn],{name:[0,"name"],value:[1,"value"]},null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,mm]),ai(32,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(34,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(35,0,null,null,1,"label",[["for","sortBySmallest"]],null,null,null,null,null)),(e()(),cr(-1,null,["sort by least buildings"])),(e()(),qs(37,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(38,0,null,null,9,"h3",[],null,null,null,null,null)),(e()(),qs(39,0,null,null,7,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,40).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,40).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.region=l)&&t),t}),null,null)),ai(40,16384,null,0,vm,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[vm]),ai(42,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(44,16384,null,0,im,[[4,tm]],null,null),(e()(),Qs(16777216,null,null,1,null,IP)),ai(46,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),cr(-1,null,[" Buildings "])),(e()(),qs(48,0,null,null,16,"div",[["id","buildingEffects"]],null,null,null,null,null)),(e()(),qs(49,0,null,null,12,"div",[["class","headers"]],null,null,null,null,null)),(e()(),qs(50,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["#"])),(e()(),qs(52,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["building"])),(e()(),qs(54,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["count"])),(e()(),qs(56,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["total land"])),(e()(),qs(58,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["working"])),(e()(),qs(60,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["idle"])),(e()(),qs(62,0,null,null,2,"div",[["class","rows"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,yP)),ai(64,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,3,0),e(n,10,0,"sorting",0),e(n,12,0,"sorting",l.sorting),e(n,20,0,"sorting",1),e(n,22,0,"sorting",l.sorting),e(n,30,0,"sorting",2),e(n,32,0,"sorting",l.sorting),e(n,42,0,l.region),e(n,46,0,l.getRegions()),e(n,64,0,l.getBuildings(l.region))}),(function(e,n){e(n,8,0,qt(n,14).ngClassUntouched,qt(n,14).ngClassTouched,qt(n,14).ngClassPristine,qt(n,14).ngClassDirty,qt(n,14).ngClassValid,qt(n,14).ngClassInvalid,qt(n,14).ngClassPending),e(n,18,0,qt(n,24).ngClassUntouched,qt(n,24).ngClassTouched,qt(n,24).ngClassPristine,qt(n,24).ngClassDirty,qt(n,24).ngClassValid,qt(n,24).ngClassInvalid,qt(n,24).ngClassPending),e(n,28,0,qt(n,34).ngClassUntouched,qt(n,34).ngClassTouched,qt(n,34).ngClassPristine,qt(n,34).ngClassDirty,qt(n,34).ngClassValid,qt(n,34).ngClassInvalid,qt(n,34).ngClassPending),e(n,39,0,qt(n,44).ngClassUntouched,qt(n,44).ngClassTouched,qt(n,44).ngClassPristine,qt(n,44).ngClassDirty,qt(n,44).ngClassValid,qt(n,44).ngClassInvalid,qt(n,44).ngClassPending)}))}function NP(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-summary",[],null,null,null,AP,CP)),ai(1,114688,null,0,TP,[sf,Sf],null,null)],(function(e,n){e(n,1,0)}),null)}var _P=Ht("app-summary",TP,NP,{},{},[]);class wP{constructor(e,n,l){this.rd=e,this.el=n,this.modalService=l,this.param="",this.element=n.nativeElement}ngOnInit(){}ngAfterViewInit(){const e=this;this.id&&(document.body.appendChild(this.element),this.rd.listen(this.element,"click",n=>{const l=n.target;null===l.closest(".modal-body")&&"BUTTON"!==l.tagName&&"path"!==l.tagName&&"IMG"!==l.tagName&&"tutorial-modal"!==e.id&&(this.modalService.sendConfirmationResult(!1),this.modalService.sendCloseSignal(ju.ALL),e.close())}),this.modalService.add(this))}ngOnDestroy(){this.modalService.remove(this.id),this.element.remove()}open(){this.element.style.display="block",document.body.classList.add("modal-open")}openTutorialWindow(e){const n=this.element.querySelector(".modal-body");n.style.position="absolute",n.style.margin="0",n.style.width=e.width,n.style.top=e.top,n.style.left=e.left,this.element.style.display="block",document.body.classList.add("modal-open")}close(){this.element.style.display="none",document.body.classList.remove("modal-open")}onKeydownHandler(e){"tutorial-modal"!==this.id&&(this.modalService.sendConfirmationResult(!1),this.modalService.sendCloseSignal(ju.ALL),this.close())}}var PP=Jl({encapsulation:2,styles:[],data:{}});function xP(e){return gr(0,[nr(671088640,1,{body:1}),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:null,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:0}}],null,null)}class kP{constructor(e,n,l,t,i,s,r,u,o,a,c,h,d,g){this.buildingFactoryService=e,this.servicesService=n,this.modalService=l,this.logService=t,this.resourcesService=i,this.landService=s,this.villageService=r,this.fortService=u,this.fieldService=o,this.forestService=a,this.mountainsService=c,this.seaService=h,this.plateauService=d,this.gameService=g,this.filterText="",this.multiplier=1,this.buildings=new Map,this.regions=Du,this.buildings.set(Du.VILLAGE,[[new JS,[],0],[new eE,[Iu.HOUSE],0],[new vv,[Iu.LONGHOUSE],0],[new xv,[Iu.TUDOR_HOUSE],0],[new Kv,[Iu.SETTLEMENT],0],[new PE,[Iu.BAKERY],0],[new GE,[Iu.TAILOR],0],[new EE,[],0],[new Qv,[Iu.SCHOLARS_LAB],0],[new _v,[Iu.KITCHEN],0],[new Ev,[Iu.SPECIALISED_PRODUCTION],0],[new vE,[],0],[new sv,[Iu.MARKETPLACE],0],[new Xv,[Iu.TAX_COLLECTOR],1],[new YE,[Iu.TAVERN],1],[new TE,[Iu.SHRINE],1],[new uv,[Iu.CHURCH],1]]),this.buildings.set(Du.FOREST,[[new lE,[],0],[new Mv,[Iu.PRODUCTION_ZONES],0],[new gE,[],0],[new yv,[Iu.PRODUCTION_ZONES],0],[new bE,[Iu.HUNTER],0],[new FE,[Iu.TANNERY],0],[new sE,[Iu.FORESTER],0],[new aE,[Iu.SAWMILL],0],[new Ov,[Iu.PAPER_MILL],0]]),this.buildings.set(Du.FORT,[[new ME,[Iu.BARRACKS],0],[new LE,[Iu.BARRACKS],0],[new Rv,[Iu.BARRACKS],1],[new UE,[Iu.STOCKADE],1],[new WE,[Iu.WOODEN_TOWER],1],[new VE,[Iu.STONE_TOWER],1],[new mv,[Iu.STASH],3]]),this.buildings.set(Du.FIELD,[[new IE,[Iu.FARM],0],[new wE,[Iu.WINDMILL],0],[new AE,[Iu.FARM],0],[new _E,[Iu.FARM],0],[new XE,[Iu.PASTURE],0],[new JE,[Iu.BUTCHER],0],[new HE,[Iu.COTTON_MILL],0],[new BE,[Iu.BREWERY],0],[new Pv,[Iu.CLAY_PIT],0],[new zE,[Iu.WINERY],0],[new Av,[Iu.BARN],0]]),this.buildings.set(Du.MOUNTAINS,[[new mE,[],0],[new $E,[Iu.GEOLOGIST],0],[new KE,[],0],[new QE,[Iu.PIT_MINE],0],[new rv,[Iu.SMITHY],1],[new ev,[Iu.MINT],0],[new Tv,[Iu.DEEP_MINE],0]]),this.buildings.set(Du.PLATEAU,[[new iv,[],1],[new ov,[],1],[new av,[],1],[new cv,[],1],[new dv,[],1],[new gv,[],1],[new pv,[],1],[new hv,[],1]]),this.buildings.set(Du.SEA,[[new kE,[Iu.FISHERS_HUT],0],[new Fv,[Iu.BOAT_BUILDER],0],[new Wv,[Iu.BOAT_BUILDER],0],[new Uv,[Iu.HARBOUR],0],[new zv,[Iu.SHIPYARD],0],[new Gv,[Iu.LIGHTHOUSE],1],[new $v,[Iu.CARTOGRAPHER],0]])}ngOnInit(){this.clearFilterObservable.subscribe(e=>{this.filterText="",this.multiplier=1}),this.openEvent.subscribe(()=>{this.filterInputRef.nativeElement.focus()})}build(e){const n=this.getNumberToBuild(e);if(e.buildOnMountain()){if(!this.landService.hasMountains(e.getSize()*n))return this.modalService.info("Not enough mountains to build "+n+" "+e.getName()+"!<br>"+e.getSize()*n+" mountains required but only "+this.landService.getMountains()+" available"),void this.modalService.close(ju.BUILD)}else if(!this.landService.hasLand(e.getSize()*n))return this.modalService.info("Not enough empty land to build "+n+" "+e.getName()+"!<br>"+e.getSize()*n+" empty land required but only "+this.landService.getLand()+" available"),void this.modalService.close(ju.BUILD);if(this.resourcesService.decreaseResources(e.getCost(),"Construction",!0,n)){e.buildOnMountain()?this.landService.decreaseMountains(e.getSize()*n):this.landService.decreaseLand(e.getSize()*n);for(let l=0;l<n;l++)switch(this.region){case Du.VILLAGE:this.villageService.createConstruction(new tE(this.servicesService,this.servicesService.getIdService().getNextId(),Du.VILLAGE,e.getBuildingType(),e.getComplexity(),e.getSize()).build());break;case Du.FORT:this.fortService.createConstruction(new tE(this.servicesService,this.servicesService.getIdService().getNextId(),Du.FORT,e.getBuildingType(),e.getComplexity(),e.getSize()).build());break;case Du.FOREST:this.forestService.createConstruction(new tE(this.servicesService,this.servicesService.getIdService().getNextId(),Du.FOREST,e.getBuildingType(),e.getComplexity(),e.getSize()).build());break;case Du.FIELD:this.fieldService.createConstruction(new tE(this.servicesService,this.servicesService.getIdService().getNextId(),Du.FIELD,e.getBuildingType(),e.getComplexity(),e.getSize()).build());break;case Du.MOUNTAINS:this.mountainsService.createConstruction(new tE(this.servicesService,this.servicesService.getIdService().getNextId(),Du.MOUNTAINS,e.getBuildingType(),e.getComplexity(),e.getSize()).build());break;case Du.SEA:this.seaService.createConstruction(new tE(this.servicesService,this.servicesService.getIdService().getNextId(),Du.SEA,e.getBuildingType(),e.getComplexity(),e.getSize()).build());break;case Du.PLATEAU:this.plateauService.createConstruction(new tE(this.servicesService,this.servicesService.getIdService().getNextId(),Du.PLATEAU,e.getBuildingType(),e.getComplexity(),e.getSize()).build())}this.modalService.close(ju.BUILD)}else this.modalService.close(ju.BUILD)}ngOnChanges(e){this.regionString=Du[this.region]}checkBuilding(e,n){let l=!0;return e[1].forEach(e=>{this.gameService.isEnabled(e)||(l=!1)}),e[2]>0&&e[2]<=this.servicesService.getServiceByRegion(n).getBuildings().filter(n=>n.getBuildingType()===e[0].getBuildingType()||n.getBuildingType()===Ru.CONSTRUCTION&&n.getConstructing()===e[0].getBuildingType()).length&&(l=!1),l}hasResource(e,n=1){return 0===this.resourcesService.hasResource(e.key,e.value*n,"Construction",!0)}getResourceName(e){return Uu.prepareResourceName(e)}getBuildingCostEntries(e){return e.getCost()}getBuildingForRegion(e){if(this.buildings&&this.buildings.get(e)){let n=this.buildings.get(e).filter(n=>this.checkBuilding(n,e)).map(e=>e[0]);if(e===Du.PLATEAU){if(this.gameService.getAbdicationLevel()<this.servicesService.getServiceByRegion(e).getBuildings().length)return[];this.gameService.getAbdicationLevel()<7&&(n=n.filter(e=>e.getBuildingType()!==Ru.ASCENSION_TEMPLE))}return null!==this.filterText&&this.filterText.length>0?n.filter(e=>e.getName().toLowerCase().includes(this.filterText.toLowerCase())):n}}isCostMet(e){let n=!0;const l=this.getNumberToBuild(e);return Array.from(e.getCost().entries()).forEach(e=>{0!==this.resourcesService.hasResource(e[0],e[1]*l,"Construction",!0)&&(n=!1)}),n&&(n=e.buildOnMountain()?this.hasMountains(e.getSize()*l):this.hasLand(e.getSize()*l)),n}hasLand(e){return this.landService.hasLand(e)}hasMountains(e){return this.landService.getMountains()>=e}getLimit(e,n){const l=this.buildings.get(e).find(e=>e[0].getBuildingType()===n);return l?l[2]:0}hasInputOutputDescription(e){return this.getBuildingSettings(e).INPUT_RESOURCES}getBuildingSettings(e){return yo.getBuilding(e)}hasCanProduceDescription(e){return this.getBuildingSettings(e).CAN_PRODUCE}getNumberToBuild(e){const n=this.buildings.get(this.region).find(n=>n[0].getBuildingType()===e.getBuildingType());if(0===n[2])return this.multiplier;{const e=this.servicesService.getServiceByRegion(this.region).getBuildings().filter(e=>e.getBuildingType()===n[0].getBuildingType()||e.getBuildingType()===Ru.CONSTRUCTION&&e.getConstructing()===n[0].getBuildingType()).length;return n[2]-e<this.multiplier?n[2]-e:this.multiplier}}}var MP=Jl({encapsulation:0,styles:[[".notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.5em;margin-bottom:10px}#filters[_ngcontent-%COMP%]{display:inline-block;width:100%;margin-bottom:5px;border-bottom:2px solid #000}#filters[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-block}#buildings[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:stretch;align-items:stretch;overflow-y:scroll;height:540px}.building[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;text-align:center;border:1px solid #000;margin-bottom:10px}.buildingTitle[_ngcontent-%COMP%]{font-weight:600;background-color:var(--active-colour);border-bottom:1px solid #000}.buildingSecondRow[_ngcontent-%COMP%]{display:-webkit-box;display:flex;width:100%;border-right:1px solid #000;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.buildButton[_ngcontent-%COMP%]{width:30%}.buildButtonNotAvailable[_ngcontent-%COMP%]{width:30%;cursor:not-allowed}.details[_ngcontent-%COMP%]{width:100%;text-align:center}.resourceIcon[_ngcontent-%COMP%]{height:20px;width:20px;vertical-align:middle}#description[_ngcontent-%COMP%]{margin-bottom:10px}.icon[_ngcontent-%COMP%]{display:-webkit-inline-box;display:inline-flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;margin-right:10px}.subTitle[_ngcontent-%COMP%]{font-size:1em;font-weight:700}.productionDescription[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;margin-bottom:5px}.productionDescription[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:5px}#actions[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}#multiplierInput[_ngcontent-%COMP%]{width:5ch}#multiplierReset[_ngcontent-%COMP%]{padding:2px}"]],data:{}});function DP(e){return gr(0,[(e()(),qs(0,0,null,null,10,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["\xa0Number of buildings: "])),(e()(),qs(2,0,null,null,6,"input",[["id","multiplierInput"],["min","1"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,3)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,3).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,3)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,3)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,4).onChange(l.target.value)&&t),"input"===n&&(t=!1!==qt(e,4).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,4).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.multiplier=l)&&t),t}),null,null)),ai(3,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(4,16384,null,0,gm,[gl,ol],null,null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,gm]),ai(6,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(8,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(9,0,null,null,1,"button",[["id","multiplierReset"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==(e.component.multiplier=1)&&t),t}),null,null)),(e()(),cr(-1,null,["reset"]))],(function(e,n){e(n,6,0,n.component.multiplier)}),(function(e,n){e(n,2,0,qt(n,8).ngClassUntouched,qt(n,8).ngClassTouched,qt(n,8).ngClassPristine,qt(n,8).ngClassDirty,qt(n,8).ngClassValid,qt(n,8).ngClassInvalid,qt(n,8).ngClassPending)}))}function LP(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(1,null,["",""]))],null,(function(e,n){var l=n.component,t=" (limit: "+l.getLimit(l.region,n.parent.context.$implicit.getBuildingType())+" building)";e(n,1,0,t)}))}function FP(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(1,null,["",""]))],null,(function(e,n){var l=n.component,t=" (limit: "+l.getLimit(l.region,n.parent.context.$implicit.getBuildingType())+" buildings)";e(n,1,0,t)}))}function UP(e){return gr(0,[(e()(),qs(0,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),cr(1,null,[" "," "])),(e()(),qs(2,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(3,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){e(n,3,0,n.component.getResourceName(n.context.$implicit.resource),"resources")}),(function(e,n){e(n,1,0,n.context.$implicit.amount)}))}function HP(e){return gr(0,[(e()(),qs(0,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),cr(1,null,[" "," "])),(e()(),qs(2,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(3,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){e(n,3,0,n.component.getResourceName(n.context.$implicit.resource),"resources")}),(function(e,n){e(n,1,0,n.context.$implicit.amount)}))}function GP(e){return gr(0,[(e()(),qs(0,0,null,null,12,"div",[["class","productionDescription"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"span",[["class","subTitle"]],null,null,null,null,null)),(e()(),cr(-1,null,["production input:"])),(e()(),qs(4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,UP)),ai(6,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(7,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),qs(8,0,null,null,1,"span",[["class","subTitle"]],null,null,null,null,null)),(e()(),cr(-1,null,["production output:"])),(e()(),qs(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,HP)),ai(12,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component,t=l.getBuildingSettings(n.parent.context.$implicit.getBuildingType()).INPUT_RESOURCES;e(n,6,0,t);var i=l.getBuildingSettings(n.parent.context.$implicit.getBuildingType()).OUTPUT_RESOURCES;e(n,12,0,i)}),null)}function BP(e){return gr(0,[(e()(),qs(0,0,null,null,2,"span",[["class","icon"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(2,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){e(n,2,0,n.component.getResourceName(n.context.$implicit),"resources")}),null)}function WP(e){return gr(0,[(e()(),qs(0,0,null,null,6,"div",[["class","productionDescription"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"span",[["class","subTitle"]],null,null,null,null,null)),(e()(),cr(-1,null,["can produce:"])),(e()(),qs(4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,BP)),ai(6,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component.getBuildingSettings(n.parent.context.$implicit.getBuildingType()).CAN_PRODUCE;e(n,6,0,l)}),null)}function VP(e){return gr(0,[(e()(),qs(0,0,null,null,8,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,7,"span",[["class","icon"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,4,"span",[],null,null,null,null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(4,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(5,{notMet:0}),(e()(),cr(6,null,["",""])),(e()(),qs(7,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(8,114688,null,0,$p,[],{name:[0,"name"]},null)],(function(e,n){var l=n.component,t=e(n,5,0,!l.hasLand(n.parent.context.$implicit.getSize()*l.getNumberToBuild(n.parent.context.$implicit)));e(n,4,0,t),e(n,8,0,"land")}),(function(e,n){var l=n.component,t=n.parent.context.$implicit.getSize()*l.getNumberToBuild(n.parent.context.$implicit);e(n,6,0,t)}))}function zP(e){return gr(0,[(e()(),qs(0,0,null,null,8,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,7,"span",[["class","icon"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,4,"span",[],null,null,null,null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(4,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(5,{notMet:0}),(e()(),cr(6,null,["",""])),(e()(),qs(7,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(8,114688,null,0,$p,[],{name:[0,"name"]},null)],(function(e,n){var l=n.component,t=e(n,5,0,!l.hasMountains(n.parent.context.$implicit.getSize()*l.getNumberToBuild(n.parent.context.$implicit)));e(n,4,0,t),e(n,8,0,"mountains")}),(function(e,n){var l=n.component,t=n.parent.context.$implicit.getSize()*l.getNumberToBuild(n.parent.context.$implicit);e(n,6,0,t)}))}function YP(e){return gr(0,[(e()(),qs(0,0,null,null,8,"span",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,7,"span",[["class","icon"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,4,"span",[],null,null,null,null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(4,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(5,{notMet:0}),(e()(),cr(6,null,["",""])),(e()(),qs(7,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(8,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){var l=n.component,t=e(n,5,0,!l.hasResource(n.context.$implicit,l.getNumberToBuild(n.parent.context.$implicit)));e(n,4,0,t),e(n,8,0,l.getResourceName(n.context.$implicit.key),"resources")}),(function(e,n){e(n,6,0,n.context.$implicit.value*n.component.getNumberToBuild(n.parent.context.$implicit))}))}function $P(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[["class","buildButton"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.build(e.parent.context.$implicit)&&t),t}),null,null)),(e()(),cr(1,null,["Build ",""]))],null,(function(e,n){e(n,1,0,n.component.getNumberToBuild(n.parent.context.$implicit))}))}function KP(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[["class","buildButtonNotAvailable"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.build(e.parent.context.$implicit)&&t),t}),null,null)),(e()(),cr(1,null,["Build ",""]))],null,(function(e,n){e(n,1,0,n.component.getNumberToBuild(n.parent.context.$implicit))}))}function jP(e){return gr(0,[(e()(),qs(0,0,null,null,26,"div",[["class","building"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,21,"div",[["class","buildingSecondRow"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,5,"span",[["class","buildingTitle"]],null,null,null,null,null)),(e()(),cr(3,null,[""," "])),(e()(),Qs(16777216,null,null,1,null,LP)),ai(5,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,FP)),ai(7,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(8,0,null,null,14,"div",[["class","details"]],null,null,null,null,null)),(e()(),qs(9,0,null,null,0,"div",[["id","description"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,GP)),ai(11,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,WP)),ai(13,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(14,0,null,null,1,"div",[["class","subTitle"]],null,null,null,null,null)),(e()(),cr(-1,null,["cost:"])),(e()(),Qs(16777216,null,null,1,null,VP)),ai(17,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,zP)),ai(19,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,2,null,YP)),ai(21,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),ci(0,_a,[Nl]),(e()(),Qs(16777216,null,null,1,null,$P)),ai(24,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,KP)),ai(26,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component,t=1===l.getLimit(l.region,n.context.$implicit.getBuildingType());e(n,5,0,t);var i=l.getLimit(l.region,n.context.$implicit.getBuildingType())>1;e(n,7,0,i);var s=l.hasInputOutputDescription(n.context.$implicit.getBuildingType());e(n,11,0,s);var r=l.hasCanProduceDescription(n.context.$implicit.getBuildingType());e(n,13,0,r);var u=!n.context.$implicit.buildOnMountain();e(n,17,0,u);var o=n.context.$implicit.buildOnMountain();e(n,19,0,o),e(n,21,0,ql(n,21,0,qt(n,22).transform(l.getBuildingCostEntries(n.context.$implicit)))),e(n,24,0,l.isCostMet(n.context.$implicit)),e(n,26,0,!l.isCostMet(n.context.$implicit))}),(function(e,n){var l=n.context.$implicit.getName();e(n,3,0,l);var t=n.context.$implicit.getDescription();e(n,9,0,t)}))}function QP(e){return gr(0,[ci(0,Na,[]),nr(671088640,1,{filterInputRef:0}),(e()(),qs(2,0,null,null,16,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),qs(3,0,null,null,2,"div",[["id","title"]],null,null,null,null,null)),(e()(),cr(4,null,[" "," buildings "])),ur(5,1),(e()(),qs(6,0,null,null,9,"span",[["id","filters"]],null,null,null,null,null)),(e()(),cr(-1,null,["Search: "])),(e()(),qs(8,0,[[1,0],["filterInput",1]],null,5,"input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,9)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,9).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,9)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,9)._compositionEnd(l.target.value)&&t),"ngModelChange"===n&&(t=!1!==(i.filterText=l)&&t),t}),null,null)),ai(9,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),hi(1024,null,qp,(function(e){return[e]}),[Jp]),ai(11,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(13,16384,null,0,im,[[4,tm]],null,null),(e()(),Qs(16777216,null,null,1,null,DP)),ai(15,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(16,0,null,null,2,"div",[["id","buildings"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,jP)),ai(18,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,11,0,l.filterText),e(n,15,0,l.region!==l.regions.PLATEAU),e(n,18,0,l.getBuildingForRegion(l.region))}),(function(e,n){var l=n.component,t=ql(n,4,0,e(n,5,0,qt(n,0),l.regionString));e(n,4,0,t),e(n,8,0,qt(n,13).ngClassUntouched,qt(n,13).ngClassTouched,qt(n,13).ngClassPristine,qt(n,13).ngClassDirty,qt(n,13).ngClassValid,qt(n,13).ngClassInvalid,qt(n,13).ngClassPending)}))}class qP{constructor(e){this.modalService=e,this.constructionOpenEventEmitter=new Di,this.clearFilterSubject=new I,this.modalService.registerForRegion().subscribe(e=>{this.region=e,this.clearFilterSubject.next()}),this.modalService.registerForOnOpen().subscribe(e=>{e===ju.BUILD&&(this.bodyRef.nativeElement.scrollTop=0,this.constructionOpenEventEmitter.next())})}ngOnInit(){}}var XP=Jl({encapsulation:0,styles:[[""]],data:{}});function ZP(e){return gr(0,[nr(671088640,1,{bodyRef:0}),(e()(),qs(1,0,null,null,6,"app-modal",[["id","build-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==qt(e,2).onKeydownHandler(l)&&t),t}),xP,PP)),ai(2,4440064,null,0,wP,[gl,ol,pf],{id:[0,"id"]},null),(e()(),qs(3,0,null,0,3,"div",[["class","modal"]],null,null,null,null,null)),(e()(),qs(4,0,[[1,0],["body",1]],null,2,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),qs(5,0,null,null,1,"app-construction",[],null,null,null,QP,MP)),ai(6,638976,null,0,kP,[Zv,sf,pf,df,yf,nR,iR,Eb,e_,xN,R_,nC,$_,Sf],{region:[0,"region"],clearFilterObservable:[1,"clearFilterObservable"],openEvent:[2,"openEvent"]},null),(e()(),qs(7,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,2,0,"build-modal"),e(n,6,0,l.region,l.clearFilterSubject.asObservable(),l.constructionOpenEventEmitter.asObservable())}),null)}let JP=(()=>{class e{constructor(e,n,l,t,i,s,r){this.servicesService=e,this.calendarService=n,this.logService=l,this.idService=t,this.mountainService=i,this.resourcesService=s,this.villageService=r,this.gameService=null,this.gameService=e.getGameService(),n.registerForDayChange().subscribe(e=>{this.checkEvents()})}checkEvents(){Object.values(Lo).forEach(e=>{let n=!0;if(e.PREREQUISITES.forEach(e=>{this.gameService.isEnabled(e)||(n=!1)}),n&&Yu.chance(e.CHANCE)){this.logService.customLog(e.LOG.MESSAGE,e.LOG.LOG_TYPE);const n=Yu.randomBetween(e.MIN_POWER,e.MAX_POWER);switch(e.EVENT){case Qu.METEORITE:{let e=Yu.randomElement([{item:bu.STONE,chance:35},{item:bu.COPPER_ORE,chance:30},{item:bu.TIN_ORE,chance:20},{item:bu.GOLD_ORE,chance:5},{item:bu.SILVER_ORE,chance:5},{item:bu.IRON_ORE,chance:5}]);null===e&&(e=bu.STONE),this.mountainService.buildings.push(new Lv(this.servicesService,this.idService.getNextId(),n,e));break}case Qu.SMALL_REFUGEE:case Qu.MEDIUM_REFUGEE:this.addVillagers(n)}}})}addVillagers(e){this.servicesService.getVillageService().addVillagers(e)}}return e.ngInjectableDef=ce({factory:function(){return new e(De(sf),De(hf),De(df),De(fv),De(R_),De(yf),De(iR))},token:e,providedIn:"root"}),e})();class ex{constructor(e,n){this.message=e,this.fullError=n}}let nx=(()=>{class e{constructor(e,n,l,t,i,s,r,u,o,a,c,h,d,g,p,m,f,S,E,v,R){this.logService=e,this.villageService=n,this.fortService=l,this.fieldService=t,this.mountainsService=i,this.plateauService=s,this.seaService=r,this.forestService=u,this.calendarService=o,this.landService=a,this.techService=c,this.weatherService=h,this.resourcesService=d,this.gameService=g,this.effectsService=p,this.armyService=m,this.happinessService=f,this.worldService=S,this.servicesService=E,this.navyService=v,this.eventService=R,this.tickerState=0,this.lastTick=0,this.paused=!1,this.ticking=!1,this.resolution=So,E.addService(Wu.TICKER,this),this.tickSubject=new I,this.interval=setInterval(()=>this.tick(),this.resolution)}tick(){if(!this.ticking){this.ticking=!0;const n=Math.floor(Date.now()/this.resolution);if(this.tickerState>=0){this.lastTick=n;try{this.calendarService.tick(n),this.effectsService.tick(n),this.weatherService.tick(n),this.happinessService.tick(n),this.landService.tick(n),this.resourcesService.tick(n),this.gameService.tick(n),this.villageService.tick(n),this.fortService.tick(n),this.fieldService.tick(n),this.mountainsService.tick(n),this.plateauService.tick(n),this.seaService.tick(n),this.forestService.tick(n),this.armyService.tick(n),this.navyService.tick(n),this.worldService.tick(n)}catch(e){this.logService.warning("Game paused due to the internal error: "+e.name),this.logService.errorReport(new ex("Game paused due to the internal error: "+e.name,e.name+": "+e.message+"\n"+e.stack)),console.error(e),this.pause()}}this.ticking=!1}}stop(){return this.tickerState-=1,this.lastTick}start(){this.tickerState+=1,this.tickerState>0&&(this.tickerState=0)}forceStart(){this.tickerState=0}clearTicker(){clearInterval(this.interval)}initTicker(){this.interval=setInterval(()=>this.tick(),this.resolution)}pause(){this.stop(),this.paused=!0}resume(){this.forceStart(),this.paused=!1}isPaused(){return this.paused}}return e.ngInjectableDef=ce({factory:function(){return new e(De(df),De(iR),De(Eb),De(e_),De(R_),De($_),De(nC),De(xN),De(hf),De(nR),De(SO),De(oT),De(yf),De(Sf),De(Jv),De(lb),De(bf),De(tC),De(sf),De(lC),De(JP))},token:e,providedIn:"root"}),e})();class lx{}class tx{}class ix{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(e=>{const n=e.indexOf(":");if(n>0){const l=e.slice(0,n),t=l.toLowerCase(),i=e.slice(n+1).trim();this.maybeSetNormalizedName(l,t),this.headers.has(t)?this.headers.get(t).push(i):this.headers.set(t,[i])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(n=>{let l=e[n];const t=n.toLowerCase();"string"==typeof l&&(l=[l]),l.length>0&&(this.headers.set(t,l),this.maybeSetNormalizedName(n,t))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof ix?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){const n=new ix;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof ix?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){const n=e.name.toLowerCase();switch(e.op){case"a":case"s":let l=e.value;if("string"==typeof l&&(l=[l]),0===l.length)return;this.maybeSetNormalizedName(e.name,n);const t=("a"===e.op?this.headers.get(n):void 0)||[];t.push(...l),this.headers.set(n,t);break;case"d":const i=e.value;if(i){let e=this.headers.get(n);if(!e)return;0===(e=e.filter(e=>-1===i.indexOf(e))).length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,e)}else this.headers.delete(n),this.normalizedNames.delete(n)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}}class sx{encodeKey(e){return rx(e)}encodeValue(e){return rx(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}function rx(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class ux{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new sx,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(e,n){const l=new Map;return e.length>0&&e.split("&").forEach(e=>{const t=e.indexOf("="),[i,s]=-1==t?[n.decodeKey(e),""]:[n.decodeKey(e.slice(0,t)),n.decodeValue(e.slice(t+1))],r=l.get(i)||[];r.push(s),l.set(i,r)}),l}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{const l=e.fromObject[n];this.map.set(n,Array.isArray(l)?l:[l])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const n=this.encoder.encodeKey(e);return this.map.get(e).map(e=>n+"="+this.encoder.encodeValue(e)).join("&")}).join("&")}clone(e){const n=new ux({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat([e]),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const n=("a"===e.op?this.map.get(e.param):void 0)||[];n.push(e.value),this.map.set(e.param,n);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let n=this.map.get(e.param)||[];const l=n.indexOf(e.value);-1!==l&&n.splice(l,1),n.length>0?this.map.set(e.param,n):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}function ox(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function ax(e){return"undefined"!=typeof Blob&&e instanceof Blob}function cx(e){return"undefined"!=typeof FormData&&e instanceof FormData}class hx{constructor(e,n,l,t){let i;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||t?(this.body=void 0!==l?l:null,i=t):i=l,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new ix),this.params){const e=this.params.toString();if(0===e.length)this.urlWithParams=n;else{const l=n.indexOf("?");this.urlWithParams=n+(-1===l?"?":l<n.length-1?"&":"")+e}}else this.params=new ux,this.urlWithParams=n}serializeBody(){return null===this.body?null:ox(this.body)||ax(this.body)||cx(this.body)||"string"==typeof this.body?this.body:this.body instanceof ux?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body?null:cx(this.body)?null:ax(this.body)?this.body.type||null:ox(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ux?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(e={}){const n=e.method||this.method,l=e.url||this.url,t=e.responseType||this.responseType,i=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,r=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let u=e.headers||this.headers,o=e.params||this.params;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce((n,l)=>n.set(l,e.setHeaders[l]),u)),e.setParams&&(o=Object.keys(e.setParams).reduce((n,l)=>n.set(l,e.setParams[l]),o)),new hx(n,l,i,{params:o,headers:u,reportProgress:r,responseType:t,withCredentials:s})}}const dx=function(){var e={Sent:0,UploadProgress:1,ResponseHeader:2,DownloadProgress:3,Response:4,User:5};return e[e.Sent]="Sent",e[e.UploadProgress]="UploadProgress",e[e.ResponseHeader]="ResponseHeader",e[e.DownloadProgress]="DownloadProgress",e[e.Response]="Response",e[e.User]="User",e}();class gx{constructor(e,n=200,l="OK"){this.headers=e.headers||new ix,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||l,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class px extends gx{constructor(e={}){super(e),this.type=dx.ResponseHeader}clone(e={}){return new px({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class mx extends gx{constructor(e={}){super(e),this.type=dx.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new mx({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class fx extends gx{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Sx(e,n){return{body:n,headers:e.headers,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let Ex=(()=>(class{constructor(e){this.handler=e}request(e,n,l={}){let t;if(e instanceof hx)t=e;else{let i=void 0;i=l.headers instanceof ix?l.headers:new ix(l.headers);let s=void 0;l.params&&(s=l.params instanceof ux?l.params:new ux({fromObject:l.params})),t=new hx(e,n,void 0!==l.body?l.body:null,{headers:i,params:s,reportProgress:l.reportProgress,responseType:l.responseType||"json",withCredentials:l.withCredentials})}const i=Fa(t).pipe(Ic(e=>this.handler.handle(e)));if(e instanceof hx||"events"===l.observe)return i;const s=i.pipe(Ka(e=>e instanceof mx));switch(l.observe||"body"){case"body":switch(t.responseType){case"arraybuffer":return s.pipe(F(e=>{if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body}));case"blob":return s.pipe(F(e=>{if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body}));case"text":return s.pipe(F(e=>{if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body}));case"json":default:return s.pipe(F(e=>e.body))}case"response":return s;default:throw new Error(`Unreachable: unhandled observe type ${l.observe}}`)}}delete(e,n={}){return this.request("DELETE",e,n)}get(e,n={}){return this.request("GET",e,n)}head(e,n={}){return this.request("HEAD",e,n)}jsonp(e,n){return this.request("JSONP",e,{params:(new ux).append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,n={}){return this.request("OPTIONS",e,n)}patch(e,n,l={}){return this.request("PATCH",e,Sx(l,n))}post(e,n,l={}){return this.request("POST",e,Sx(l,n))}put(e,n,l={}){return this.request("PUT",e,Sx(l,n))}}))();class vx{constructor(e,n){this.next=e,this.interceptor=n}handle(e){return this.interceptor.intercept(e,this.next)}}const Rx=new be("HTTP_INTERCEPTORS");let Ox=(()=>(class{intercept(e,n){return n.handle(e)}}))();const bx=/^\)\]\}',?\n/;class Tx{}let Cx=(()=>(class{constructor(){}build(){return new XMLHttpRequest}}))(),Ix=(()=>(class{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new R(n=>{const l=this.xhrFactory.build();if(l.open(e.method,e.urlWithParams),e.withCredentials&&(l.withCredentials=!0),e.headers.forEach((e,n)=>l.setRequestHeader(e,n.join(","))),e.headers.has("Accept")||l.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const n=e.detectContentTypeHeader();null!==n&&l.setRequestHeader("Content-Type",n)}if(e.responseType){const n=e.responseType.toLowerCase();l.responseType="json"!==n?n:"text"}const t=e.serializeBody();let i=null;const s=()=>{if(null!==i)return i;const n=1223===l.status?204:l.status,t=l.statusText||"OK",s=new ix(l.getAllResponseHeaders()),r=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(l)||e.url;return i=new px({headers:s,status:n,statusText:t,url:r})},r=()=>{let{headers:t,status:i,statusText:r,url:u}=s(),o=null;204!==i&&(o=void 0===l.response?l.responseText:l.response),0===i&&(i=o?200:0);let a=i>=200&&i<300;if("json"===e.responseType&&"string"==typeof o){const e=o;o=o.replace(bx,"");try{o=""!==o?JSON.parse(o):null}catch(c){o=e,a&&(a=!1,o={error:c,text:o})}}a?(n.next(new mx({body:o,headers:t,status:i,statusText:r,url:u||void 0})),n.complete()):n.error(new fx({error:o,headers:t,status:i,statusText:r,url:u||void 0}))},u=e=>{const{url:t}=s(),i=new fx({error:e,status:l.status||0,statusText:l.statusText||"Unknown Error",url:t||void 0});n.error(i)};let o=!1;const a=t=>{o||(n.next(s()),o=!0);let i={type:dx.DownloadProgress,loaded:t.loaded};t.lengthComputable&&(i.total=t.total),"text"===e.responseType&&l.responseText&&(i.partialText=l.responseText),n.next(i)},c=e=>{let l={type:dx.UploadProgress,loaded:e.loaded};e.lengthComputable&&(l.total=e.total),n.next(l)};return l.addEventListener("load",r),l.addEventListener("error",u),e.reportProgress&&(l.addEventListener("progress",a),null!==t&&l.upload&&l.upload.addEventListener("progress",c)),l.send(t),n.next({type:dx.Sent}),()=>{l.removeEventListener("error",u),l.removeEventListener("load",r),e.reportProgress&&(l.removeEventListener("progress",a),null!==t&&l.upload&&l.upload.removeEventListener("progress",c)),l.abort()}})}}))();const yx=new be("XSRF_COOKIE_NAME"),Ax=new be("XSRF_HEADER_NAME");class Nx{}let _x=(()=>(class{constructor(e,n,l){this.doc=e,this.platform=n,this.cookieName=l,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=oa(e,this.cookieName),this.lastCookieString=e),this.lastToken}}))(),wx=(()=>(class{constructor(e,n){this.tokenService=e,this.headerName=n}intercept(e,n){const l=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||l.startsWith("http://")||l.startsWith("https://"))return n.handle(e);const t=this.tokenService.getToken();return null===t||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,t)})),n.handle(e)}}))(),Px=(()=>(class{constructor(e,n){this.backend=e,this.injector=n,this.chain=null}handle(e){if(null===this.chain){const e=this.injector.get(Rx,[]);this.chain=e.reduceRight((e,n)=>new vx(e,n),this.backend)}return this.chain.handle(e)}}))(),xx=(()=>{class e{static disable(){return{ngModule:e,providers:[{provide:wx,useClass:Ox}]}}static withOptions(n={}){return{ngModule:e,providers:[n.cookieName?{provide:yx,useValue:n.cookieName}:[],n.headerName?{provide:Ax,useValue:n.headerName}:[]]}}}return e})(),kx=(()=>(class{}))();const Mx=(()=>{function e(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return e.prototype=Object.create(Error.prototype),e})();class Dx{constructor(e,n,l,t){this.waitFor=e,this.absoluteTimeout=n,this.withObservable=l,this.scheduler=t}call(e,n){return n.subscribe(new Lx(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))}}class Lx extends L{constructor(e,n,l,t,i){super(e),this.absoluteTimeout=n,this.waitFor=l,this.withObservable=t,this.scheduler=i,this.action=null,this.scheduleTimeout()}static dispatchTimeout(e){const{withObservable:n}=e;e._unsubscribeAndRecycle(),e.add(D(e,n))}scheduleTimeout(){const{action:e}=this;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(Lx.dispatchTimeout,this.waitFor,this))}_next(e){this.absoluteTimeout||this.scheduleTimeout(),super._next(e)}_unsubscribe(){this.action=null,this.scheduler=null,this.withObservable=null}}function Fx(e,n=Jf){return function(e,n,l=Jf){return t=>{let i=function(e){return e instanceof Date&&!isNaN(+e)}(e),s=i?+e-l.now():Math.abs(e);return t.lift(new Dx(s,i,n,l))}}(e,uS(new Mx),n)}let Ux=(()=>{class e{constructor(e,n,l){this.http=e,this.logService=n,this.modalService=l,this.serverUrl="https://villagerkings.com/api/"}cloudSave(e,n,l,t,i){const s={headers:(new ix).append("Content-Type","application/json").append("Access-Control-Allow-Origin","*")},r={};return r.userId=e,r.gameAuthToken=n,r.save=l,r.day=t,r.year=i,this.http.post(this.serverUrl+"save",r,s).pipe(Fx(15e3),oc(e=>this.handleError(e)))}cloudLoad(e,n){const l={headers:(new ix).append("Content-Type","application/json").append("Access-Control-Allow-Origin","*"),observe:"response",responseType:"text"},t={};return t.userId=e,t.gameAuthToken=n,this.http.post(this.serverUrl+"load",t,l).pipe(Fx(15e3),oc(e=>this.handleError(e)))}cloudCheck(e=!1,n,l){const t={headers:(new ix).append("Content-Type","application/json").append("Access-Control-Allow-Origin","*"),observe:"response"},i={};return i.userId=n,i.gameAuthToken=l,this.http.post(this.serverUrl+"hasSave",i,t).pipe(Fx(5e3),oc(n=>this.handleError(n,!e)))}handleError(e,n=!0){return e instanceof fx?401===e.status?(n?this.modalService.info("Couldn't authorize server call via Kongregate API"):this.logService.warning("Couldn't authorize server call via Kongregate API"),Va):(console.log("error",e),e.error instanceof ErrorEvent?console.error("An error occurred:",e.error.message):console.error(`Backend returned code ${e.status}`),n&&this.modalService.info("Something bad happened; please try again later."),uS("Something bad happened; please try again later.")):e instanceof Mx?(n?this.modalService.info("Server request has timed out"):this.logService.warning("Server request has timed out"),Va):void 0}}return e.ngInjectableDef=ce({factory:function(){return new e(De(Ex),De(df),De(pf))},token:e,providedIn:"root"}),e})(),Hx=(()=>{class e{constructor(e,n,l,t,i,s,r,u,o,a,c,h,d,g,p,m,f,S,E,v,R,O,b,T,C,I,y,A,N,_,w,P,x,k,M){this.router=e,this.tickerService=n,this.gameService=l,this.modalService=t,this.optionsService=i,this.logService=s,this.villageService=r,this.forestService=u,this.resourcesService=o,this.landService=a,this.mountainsService=c,this.calendarService=h,this.royalService=d,this.techService=g,this.religionService=p,this.craftingService=m,this.recipeService=f,this.fieldService=S,this.plateauService=E,this.seaService=v,this.fortService=R,this.effectsService=O,this.armyService=b,this.happinessService=T,this.managementService=C,this.marketService=I,this.weatherService=y,this.idService=A,this.heritageService=N,this.tutorialService=_,this.worldService=w,this.kongregateService=P,this.serverService=x,this.navyService=k,this.saveName=go.saveName,this.saveVersion=go.saveVersion,M.addService(Wu.SERIALIZER,this),this.autoSaveStatus=this.optionsService.getOption(rf.AUTO_SAVE_STATUS),this.autoSavePeriod=this.optionsService.getOption(rf.AUTO_SAVE_PERIOD),this.optionsSubscription||(this.optionsSubscription=this.optionsService.registerForOptionsChange().subscribe(()=>this.changeOptions())),this.saveInterval=setInterval(()=>{this.initSave(),this.logService.autoSave()},this.autoSavePeriod)}changeOptions(){const e=this.optionsService.getOption(rf.AUTO_SAVE_STATUS),n=this.optionsService.getOption(rf.AUTO_SAVE_PERIOD);this.autoSaveStatus===e&&this.autoSavePeriod===n||(this.autoSaveStatus=e,this.autoSavePeriod=n,clearInterval(this.saveInterval),this.autoSaveStatus&&(this.saveInterval=setInterval(()=>{this.initSave(),this.logService.autoSave()},1e3*this.autoSavePeriod*60)))}initSave(){this.tickerService.stop(),localStorage.setItem(this.saveName,this.prepareBase64()),this.tickerService.start()}prepareBase64(){this.tickerService.stop();const e=btoa(JSON.stringify({saveVersion:this.saveVersion,heritage:this.heritageService.save(),id:this.idService,options:this.optionsService.save(),tutorial:this.tutorialService.save(),resources:this.resourcesService.save(),village:this.villageService.save(),fort:this.fortService.save(),forest:this.forestService.save(),field:this.fieldService.save(),mountains:this.mountainsService.save(),plateau:this.plateauService.save(),sea:this.seaService.save(),land:this.landService.save(),calendar:this.calendarService.save(),game:this.gameService.save(),royal:this.royalService.save(),tech:this.techService.save(),religion:this.religionService.save(),crafting:this.craftingService.save(),recipe:this.recipeService.save(),effects:this.effectsService.save(),army:this.armyService.save(),world:this.worldService.save(),happiness:this.happinessService.save(),management:this.managementService.save(),market:this.marketService.save(),navy:this.navyService.save(),weather:this.weatherService.save(),logs:this.logService.save()}));return this.tickerService.start(),e}initLoad(){if(this.tickerService.stop(),null===localStorage.getItem(this.saveName))return this.modalService.info("There is no any save file to load."),void this.tickerService.start();let e;try{e=JSON.parse(atob(localStorage.getItem(this.saveName)))}catch(n){return this.modalService.info("Save data is corrupted! Loading failed."),void this.tickerService.start()}this.loadSave(e),this.tickerService.start(),this.logService.log("loaded")}hasSave(){return null!=localStorage.getItem(this.saveName)}import(e){let n;this.tickerService.stop();try{n=JSON.parse(atob(e))}catch(l){return this.modalService.info("Import file is not valid or corrupted! Import failed."),void this.tickerService.start()}this.loadSave(n),localStorage.setItem(this.saveName,e),this.tickerService.start(),this.logService.log("save imported")}hardReset(){this.reset(!0),localStorage.removeItem(this.saveName)}ascensionReset(){this.reset(!1,!0)}reset(e,n=!1){this.tickerService.stop(),this.tickerService.clearTicker(),localStorage.removeItem(this.saveName),this.tutorialService.reset(e,n),this.calendarService.reset(e,n),this.gameService.reset(e,n),this.idService.reset(e,n),this.weatherService.reset(e,n),this.effectsService.reset(e,n),this.resourcesService.reset(e,n),this.landService.reset(e,n),this.navyService.reset(e,n),this.villageService.reset(e,n),this.fortService.reset(e,n),this.forestService.reset(e,n),this.fieldService.reset(e,n),this.mountainsService.reset(e,n),this.plateauService.reset(e,n),this.seaService.reset(e,n),this.optionsService.reset(e,n),this.techService.reset(e,n),this.religionService.reset(e,n),this.craftingService.reset(e,n),this.recipeService.reset(e,n),this.armyService.reset(e,n),this.worldService.reset(e,n),this.happinessService.reset(e,n),this.managementService.reset(e,n),this.marketService.reset(e,n),this.heritageService.reset(e,n),this.logService.reset(e,n),this.royalService.reset(e,n),this.initSave(),this.tickerService.initTicker(),this.tickerService.start(),this.router.navigate(["/village"])}loadSave(e){switch(e.saveVersion){case Ou.DEV:case Ou.V1_0_0:this.loadDevVersion(e);break;default:const n="Corrupted save file (unknown save version). Loading is not possible";return this.logService.log(n),void console.error(n)}}loadDevVersion(e){this.saveVersion=e.saveVersion,this.safeLoad(this.idService,e.id),this.safeLoad(this.optionsService,e.options),this.safeLoad(this.logService,e.logs),this.safeLoad(this.effectsService,e.effects),this.safeLoad(this.resourcesService,e.resources),this.safeLoad(this.villageService,e.village),this.safeLoad(this.fortService,e.fort),this.safeLoad(this.forestService,e.forest),this.safeLoad(this.fieldService,e.field),this.safeLoad(this.mountainsService,e.mountains),this.safeLoad(this.plateauService,e.plateau),this.safeLoad(this.seaService,e.sea),this.safeLoad(this.landService,e.land),this.safeLoad(this.calendarService,e.calendar),this.safeLoad(this.gameService,e.game),this.safeLoad(this.royalService,e.royal),this.safeLoad(this.recipeService,e.recipe),this.safeLoad(this.techService,e.tech),this.safeLoad(this.religionService,e.religion),this.safeLoad(this.craftingService,e.crafting),this.safeLoad(this.armyService,e.army),this.safeLoad(this.worldService,e.world),this.safeLoad(this.navyService,e.navy),this.safeLoad(this.happinessService,e.happiness),this.safeLoad(this.managementService,e.management),this.safeLoad(this.marketService,e.market),this.safeLoad(this.weatherService,e.weather),this.safeLoad(this.heritageService,e.heritage),this.safeLoad(this.tutorialService,e.tutorial)}safeLoad(e,n){try{e.load(void 0!==n?n:{})}catch(l){e!==this.royalService&&(this.logService.errorReport(new ex("Error ("+l.name+") while loading "+e.getName()+"! It will reset to default values",l.name+": "+l.message+"\n"+l.stack)),console.error(l),e.reset(!0,!0))}}abdicate(e,n){this.reset(!1,!1),this.tickerService.stop(),this.tickerService.clearTicker(),e&&(this.landService.reset(!1,!1),this.worldService.reset(!0,!1)),this.tickerService.initTicker(),this.tickerService.start()}getTimestamp(){return(new Date).getTime()}cloudSave(e,n,l){if(this.kongregateService.isGuest()&&!en())this.modalService.info("You must be logged into kongregate to use cloud save");else{this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to upload save to cloud? Current cloud save will be overridden");const t=this.modalService.registerForConfirmation().subscribe(i=>{if(t.unsubscribe(),i){l.timestamp=this.getTimestamp(),e.status=!0,this.tickerService.stop();const t=this.prepareBase64(),i=this.calendarService.getDay(),s=this.calendarService.getYear();this.tickerService.start(),en()?this.serverService.cloudSave(392444,"93ba2bd2f335d13f4c9a66447ae22d3db04670c596fd87b6e6424f870d9504b1",t,i,s).subscribe(e=>{this.logService.success("saved to cloud"),this.modalService.info("Saved to cloud!"),n.day=i,n.year=s}).add(()=>{e.status=!1}):this.serverService.cloudSave(this.kongregateService.getUserId(),this.kongregateService.getGameAuthToken(),t,i,s).subscribe(e=>{this.logService.success("saved to cloud"),this.modalService.info("Saved to cloud!"),n.day=i,n.year=s}).add(()=>{e.status=!1})}})}}cloudLoad(e,n){if(this.kongregateService.isGuest()&&!en())this.modalService.info("You must be logged into kongregate to use cloud save");else{this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to download cloud save? Current game progress will be overridden");const l=this.modalService.registerForConfirmation().subscribe(t=>{l.unsubscribe(),t&&(n.timestamp=this.getTimestamp(),e.status=!0,en()?this.serverService.cloudLoad(392444,"93ba2bd2f335d13f4c9a66447ae22d3db04670c596fd87b6e6424f870d9504b1").subscribe(e=>{204===e.status?this.modalService.info("There is no save file available on the server"):(this.import(e.body),this.modalService.info("Loaded save file from cloud"))}).add(()=>{e.status=!1}):this.serverService.cloudLoad(this.kongregateService.getUserId(),this.kongregateService.getGameAuthToken()).subscribe(e=>{204===e.status?this.modalService.info("There is no save file available on the server"):(this.import(e.body),this.modalService.info("Loaded save file from cloud"))}).add(()=>{e.status=!1}))})}}cloudCheck(e=!1,n,l,t){this.kongregateService.isGuest()&&!en()?e||this.modalService.info("You must be logged into kongregate to use cloud save"):(t.timestamp=this.getTimestamp(),n.status=!0,en()?this.serverService.cloudCheck(e,392444,"93ba2bd2f335d13f4c9a66447ae22d3db04670c596fd87b6e6424f870d9504b1").subscribe(e=>{204===e.status?l.day=-1:(l.day=e.body.day,l.year=e.body.year)},()=>{l.day=-1}).add(()=>{n.status=!1}):this.serverService.cloudCheck(e,this.kongregateService.getUserId(),this.kongregateService.getGameAuthToken()).subscribe(e=>{204===e.status?l.day=-1:(l.day=e.body.day,l.year=e.body.year)},()=>{l.day=-1}).add(()=>{n.status=!1}))}}return e.ngInjectableDef=ce({factory:function(){return new e(De(up),De(nx),De(Sf),De(pf),De(uf),De(df),De(iR),De(xN),De(yf),De(nR),De(R_),De(hf),De(vf),De(SO),De(Gb),De($S),De(Wf),De(e_),De($_),De(nC),De(Eb),De(Jv),De(lb),De(bf),De(nO),De(lO),De(oT),De(fv),De(ey),De(mf),De(tC),De(Rf),De(Ux),De(lC),De(sf))},token:e,providedIn:"root"}),e})();class Gx{constructor(e,n,l,t,i){this.modalService=e,this.serializerService=n,this.heritageService=l,this.servicesService=t,this.gameService=i,this.resetWorld=!1,this.resetHeritage=!1,e.registerForOnOpen().subscribe(e=>{e===ju.ABDICATION&&(this.resetWorld=!1,this.resetHeritage=!1)}),e.registerForCloseModal().subscribe(e=>{e!==ju.ABDICATION&&e!==ju.ALL||this.modalService.sendAbdicationResult(!1)})}ngOnInit(){}abdicate(){this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to abdicate?");const e=this.modalService.registerForConfirmation().subscribe(n=>{e.unsubscribe(),n&&(this.modalService.sendAbdicationResult(!0),this.servicesService.getService(Wu.PLATEAU).getBuildings().forEach(e=>{e.getBuildingType()!==Ru.CONSTRUCTION&&e.forceAbdicate()}),this.serializerService.abdicate(this.resetWorld,this.resetHeritage),this.modalService.close(ju.ABDICATION))})}cancel(){this.modalService.sendAbdicationResult(!1),this.modalService.close(ju.ABDICATION)}calculateHeritagePoints(){return this.heritageService.calculateHeritagePoints()}peopleToNextHeritagePoint(){return this.heritageService.peopleToNextHeritagePoint()}getStartYear(){return this.gameService.getGameStartedYear()}}var Bx=Jl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;font-size:1.2em}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;width:100%}button[_ngcontent-%COMP%]{border:1px solid #000;color:#000;padding:1% 2%;text-align:center;text-decoration:none;display:inline-block;font-size:1em;margin:.5%}"]],data:{}});function Wx(e){return gr(0,[(e()(),qs(0,0,null,null,43,"app-modal",[["id","abdication-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==qt(e,1).onKeydownHandler(l)&&t),t}),xP,PP)),ai(1,4440064,null,0,wP,[gl,ol,pf],{id:[0,"id"]},null),(e()(),qs(2,0,null,0,40,"div",[["class","modal"]],null,null,null,null,null)),(e()(),qs(3,0,null,null,39,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),qs(4,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),cr(-1,null,["Abdication"])),(e()(),qs(6,0,null,null,31,"div",[],null,null,null,null,null)),(e()(),cr(-1,null,[" Are you sure you want to soft reset your progress? "])),(e()(),qs(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),cr(-1,null,[" You will start from the beginning and all progress except for:"])),(e()(),qs(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(11,0,null,null,6,"ul",[],null,null,null,null,null)),(e()(),qs(12,0,null,null,1,"li",[],null,null,null,null,null)),(e()(),cr(-1,null,["Royal Points"])),(e()(),qs(14,0,null,null,1,"li",[],null,null,null,null,null)),(e()(),cr(-1,null,["Heritage Points"])),(e()(),qs(16,0,null,null,1,"li",[],null,null,null,null,null)),(e()(),cr(-1,null,["Wonder buildings and their effects"])),(e()(),cr(-1,null,[" will be deleted."])),(e()(),qs(19,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(20,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),cr(21,null,[" You will be awarded "," Heritage Points and "," xp towards next point "])),(e()(),qs(22,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),cr(23,null,[" ("," more people/xp needed for the next point)"])),(e()(),qs(24,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(25,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),cr(26,null,[" You reign since the start of year "," "])),(e()(),qs(27,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(28,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(29,0,null,null,5,"input",[["id","resetWorld"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,30).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,30).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.resetWorld=l)&&t),t}),null,null)),ai(30,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(32,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(34,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(35,0,null,null,1,"label",[["for","resetWorld"]],null,null,null,null,null)),(e()(),cr(-1,null,["reset world map progress"])),(e()(),qs(37,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(38,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),qs(39,0,null,null,1,"button",[["id","hardReset"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.abdicate()&&t),t}),null,null)),(e()(),cr(-1,null,["ABDICATE"])),(e()(),qs(41,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.cancel()&&t),t}),null,null)),(e()(),cr(-1,null,["CANCEL"])),(e()(),qs(43,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,1,0,"abdication-modal"),e(n,32,0,l.resetWorld)}),(function(e,n){var l=n.component;e(n,21,0,l.calculateHeritagePoints().hp,l.calculateHeritagePoints().xp),e(n,23,0,l.peopleToNextHeritagePoint()),e(n,26,0,l.getStartYear()),e(n,29,0,qt(n,34).ngClassUntouched,qt(n,34).ngClassTouched,qt(n,34).ngClassPristine,qt(n,34).ngClassDirty,qt(n,34).ngClassValid,qt(n,34).ngClassInvalid,qt(n,34).ngClassPending)}))}class Vx{constructor(e){this.modalService=e,this.selectedMode=0}ngOnInit(){}ok(){this.modalService.close(ju.ASCENSION)}canAscend(){return!0}ascend(){this.canAscend()&&this.modalService.close(ju.ASCENSION)}onKeydownHandler(e){"none"!==document.getElementById("ascension-modal").style.display&&(e.preventDefault(),this.ok())}}var zx=Jl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;font-size:1.2em;max-width:750px;margin:100px auto auto}.lineBreak[_ngcontent-%COMP%]{display:block}#modes[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;margin-bottom:10px}.mode[_ngcontent-%COMP%]{display:-webkit-box;display:flex;cursor:pointer;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:150px;width:200px;border:1px solid #000;-webkit-box-align:center;align-items:center;margin-right:5px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box}.mode[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100px}.mode[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700}.mode[_ngcontent-%COMP%]   .effect[_ngcontent-%COMP%]{font-size:.8em}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px;white-space:nowrap}.disabled[_ngcontent-%COMP%]{color:#5a5a5a}.selected[_ngcontent-%COMP%]{border:3px solid #000}"]],data:{}});function Yx(e){return gr(0,[(e()(),qs(0,0,null,null,55,"app-modal",[["id","ascension-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==qt(e,1).onKeydownHandler(l)&&t),t}),xP,PP)),ai(1,4440064,null,0,wP,[gl,ol,pf],{id:[0,"id"]},null),(e()(),qs(2,0,null,0,52,"div",[["class","modal"]],null,null,null,null,null)),(e()(),qs(3,0,null,null,51,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),qs(4,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),cr(-1,null,["Ascension"])),(e()(),qs(6,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),cr(-1,null,[" Are you sure you want to ascend into a new world? "])),(e()(),qs(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(9,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(10,0,null,null,5,"div",[],null,null,null,null,null)),(e()(),cr(-1,null,[" You will start from the beginning and all progress except for"])),(e()(),qs(12,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),cr(-1,null,[" royal points, heritage points and permanent royal upgrades will be deleted "])),(e()(),qs(14,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(15,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(16,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(-1,null,["What world do you choose:"])),(e()(),qs(18,0,null,null,27,"div",[["id","modes"]],null,null,null,null,null)),(e()(),qs(19,0,null,null,8,"div",[["class","mode"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==(e.component.selectedMode=0)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(21,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(22,{selected:0}),(e()(),qs(23,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),cr(-1,null,["Winter"])),(e()(),qs(25,0,null,null,0,"img",[["src","assets/weather/snow.svg"]],null,null,null,null,null)),(e()(),qs(26,0,null,null,1,"span",[["class","effect"]],null,null,null,null,null)),(e()(),cr(-1,null,["cold severity +5%"])),(e()(),qs(28,0,null,null,8,"div",[["class","mode"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==(e.component.selectedMode=1)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(30,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(31,{selected:0}),(e()(),qs(32,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),cr(-1,null,["War"])),(e()(),qs(34,0,null,null,0,"img",[["src","assets/army/recruit.svg"]],null,null,null,null,null)),(e()(),qs(35,0,null,null,1,"span",[["class","effect"]],null,null,null,null,null)),(e()(),cr(-1,null,["enemy difficulty +5%"])),(e()(),qs(37,0,null,null,8,"div",[["class","mode"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==(e.component.selectedMode=2)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(39,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(40,{selected:0}),(e()(),qs(41,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),cr(-1,null,["Hunger"])),(e()(),qs(43,0,null,null,0,"img",[["src","assets/resources/food.svg"]],null,null,null,null,null)),(e()(),qs(44,0,null,null,1,"span",[["class","effect"]],null,null,null,null,null)),(e()(),cr(-1,null,["food consumption +5%"])),(e()(),qs(46,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(47,0,null,null,7,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),qs(48,0,null,null,4,"button",[],null,null,null,null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(50,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(51,{disabled:0}),(e()(),cr(-1,null,["ASCEND"])),(e()(),qs(53,0,null,null,1,"button",[],null,null,null,null,null)),(e()(),cr(-1,null,["TURN BACK"])),(e()(),qs(55,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,1,0,"ascension-modal");var t=e(n,22,0,0===l.selectedMode);e(n,21,0,"mode",t);var i=e(n,31,0,1===l.selectedMode);e(n,30,0,"mode",i);var s=e(n,40,0,2===l.selectedMode);e(n,39,0,"mode",s);var r=e(n,51,0,!l.canAscend());e(n,50,0,r)}),null)}class $x{constructor(e,n){this.modalService=e,this.worldService=n,this.modalService.registerForFightReport().subscribe(e=>this.fightReport=e)}ngOnInit(){}ok(){this.fightReport=null,this.modalService.close(ju.FIGHT_REPORT)}getAttackerName(){return this.fightReport.attacker===ku.PLAYER?this.worldService.getPlayerCountry().name:Uu.prepareCountryName(this.fightReport.attacker)}getDefenderName(){return this.fightReport.defender===ku.PLAYER?this.worldService.getPlayerCountry().name:Uu.prepareCountryName(this.fightReport.defender)}getTroopName(e){return Uu.prepareTroopName(e)}round(e){return Uu.round(e,1)}}var Kx=Jl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;font-size:1.2em}#title[_ngcontent-%COMP%]{font-weight:700}#reportBody[_ngcontent-%COMP%]{width:100%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;overflow-y:auto}.section[_ngcontent-%COMP%]{width:80%;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;text-align:center;border-bottom:2px solid #000}.section[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 50%;-webkit-box-align:center;align-items:center}#skirmishes[_ngcontent-%COMP%]{width:80%;text-align:center}.sectionFull[_ngcontent-%COMP%]{width:100%;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;text-align:center;border-bottom:2px solid #000}.sectionEnd[_ngcontent-%COMP%]{width:80%;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;text-align:center;border-bottom:2px solid #000}.sectionEnd[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 100%}.sectionFull[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(1){-webkit-box-flex:0;flex:0 0 45%;-webkit-box-align:center;align-items:center}.sectionFull[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(2){-webkit-box-flex:0;flex:0 0 10%;-webkit-box-align:center;align-items:center}.sectionFull[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(3){-webkit-box-flex:0;flex:0 0 45%;-webkit-box-align:center;align-items:center}.section[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child{border-right:2px solid #000}.section[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:last-child{padding-bottom:10px}.won[_ngcontent-%COMP%]{color:var(--positive-colour)}.lost[_ngcontent-%COMP%]{color:var(--negative-colour)}.attdefIcon[_ngcontent-%COMP%]{height:15px}"]],data:{}});function jx(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(1,null,["army size bonus: ",""]))],null,(function(e,n){e(n,1,0,n.component.fightReport.attackerArmySizeBonus)}))}function Qx(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(1,null,["",": ",""]))],null,(function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit.troop),n.context.$implicit.size)}))}function qx(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(1,null,["army size bonus: ",""]))],null,(function(e,n){e(n,1,0,n.component.fightReport.defenderArmySizeBonus)}))}function Xx(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(1,null,["",": ",""]))],null,(function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit.troop),n.context.$implicit.size)}))}function Zx(e){return gr(0,[(e()(),qs(0,0,null,null,21,"div",[["id","skirmishes"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(2,null,["Skirmish ",""])),(e()(),qs(3,0,null,null,18,"div",[["class","sectionFull"]],null,null,null,null,null)),(e()(),qs(4,0,null,null,8,"span",[],null,null,null,null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(6,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(7,{won:0,lost:1}),(e()(),cr(8,null,[""," "])),(e()(),qs(9,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["("])),(e()(),qs(11,0,null,null,0,"img",[["class","attdefIcon"],["src","assets/army/attack.svg"]],null,null,null,null,null)),(e()(),cr(12,null,["",")"])),(e()(),qs(13,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["vs"])),(e()(),qs(15,0,null,null,6,"span",[],null,null,null,null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(17,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(18,{won:0,lost:1}),(e()(),cr(19,null,[""," ("])),(e()(),qs(20,0,null,null,0,"img",[["class","attdefIcon"],["src","assets/army/defense.svg"]],null,null,null,null,null)),(e()(),cr(21,null,["",")"]))],(function(e,n){var l=e(n,7,0,n.context.$implicit.result,!n.context.$implicit.result);e(n,6,0,l);var t=e(n,18,0,!n.context.$implicit.result,n.context.$implicit.result);e(n,17,0,t)}),(function(e,n){var l=n.component;e(n,2,0,n.context.index+1),e(n,8,0,l.getTroopName(n.context.$implicit.attackerTroop)),e(n,12,0,l.round(n.context.$implicit.attack)),e(n,19,0,l.getTroopName(n.context.$implicit.defenderTroop)),e(n,21,0,l.round(n.context.$implicit.defense))}))}function Jx(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(1,null,["",""]))],null,(function(e,n){e(n,1,0,n.component.getAttackerName())}))}function ek(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(1,null,["",""]))],null,(function(e,n){e(n,1,0,n.component.getDefenderName())}))}function nk(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(1,null,["",": ",""]))],null,(function(e,n){e(n,1,0,n.component.getTroopName(n.context.$implicit.troop),n.context.$implicit.size)}))}function lk(e){return gr(0,[(e()(),qs(0,0,null,null,50,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),cr(-1,null,["Fight Report"])),(e()(),qs(3,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(4,null,["",""])),(e()(),qs(5,0,null,null,14,"div",[["class","section"]],null,null,null,null,null)),(e()(),qs(6,0,null,null,6,"div",[],null,null,null,null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(8,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(9,{won:0,lost:1}),(e()(),cr(-1,null,["ATTACKER"])),(e()(),qs(11,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),cr(12,null,[""," "])),(e()(),qs(13,0,null,null,6,"div",[],null,null,null,null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(15,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(16,{won:0,lost:1}),(e()(),cr(-1,null,["DEFENDER"])),(e()(),qs(18,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),cr(19,null,[""," "])),(e()(),qs(20,0,null,null,28,"div",[["id","reportBody"]],null,null,null,null,null)),(e()(),qs(21,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(-1,null,["Armies"])),(e()(),qs(23,0,null,null,12,"div",[["class","section"]],null,null,null,null,null)),(e()(),qs(24,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,jx)),ai(26,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,Qx)),ai(28,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(29,0,null,null,6,"div",[],null,null,null,null,null)),(e()(),qs(30,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(31,null,["defense: ",""])),(e()(),Qs(16777216,null,null,1,null,qx)),ai(33,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,Xx)),ai(35,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),Qs(16777216,null,null,1,null,Zx)),ai(37,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(38,0,null,null,6,"div",[],null,null,null,null,null)),(e()(),cr(-1,null,["Winner army ("])),(e()(),Qs(16777216,null,null,1,null,Jx)),ai(41,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,ek)),ai(43,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),cr(-1,null,[") "])),(e()(),qs(45,0,null,null,3,"div",[["class","sectionEnd"]],null,null,null,null,null)),(e()(),qs(46,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,nk)),ai(48,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(49,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.ok()&&t),t}),null,null)),(e()(),cr(-1,null,["close"]))],(function(e,n){var l=n.component,t=e(n,9,0,l.fightReport.result,!l.fightReport.result);e(n,8,0,t);var i=e(n,16,0,!l.fightReport.result,l.fightReport.result);e(n,15,0,i),e(n,26,0,l.fightReport.attackerArmySizeBonus>0),e(n,28,0,l.fightReport.attackerArmy.units),e(n,33,0,l.fightReport.defenderArmySizeBonus>0),e(n,35,0,l.fightReport.defenderArmy.units),e(n,37,0,l.fightReport.skirmish),e(n,41,0,l.fightReport.result),e(n,43,0,!l.fightReport.result),e(n,48,0,l.fightReport.armyAfterFight.units)}),(function(e,n){var l=n.component;e(n,4,0,l.fightReport.message),e(n,12,0,l.getAttackerName()),e(n,19,0,l.getDefenderName()),e(n,31,0,l.fightReport.defense)}))}function tk(e){return gr(0,[(e()(),qs(0,0,null,null,5,"app-modal",[["id","fight-report-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==qt(e,1).onKeydownHandler(l)&&t),t}),xP,PP)),ai(1,4440064,null,0,wP,[gl,ol,pf],{id:[0,"id"]},null),(e()(),qs(2,0,null,0,2,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,lk)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(5,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,1,0,"fight-report-modal"),e(n,4,0,l.fightReport)}),null)}class ik{constructor(e,n){this.serializerService=e,this.modalService=n,this.exportTextArea=null,this.showMessage=!1,this.modalService.registerForOnOpen().subscribe(e=>{e===ju.EXPORT&&this.export()})}ngOnInit(){}export(){this.exportTextArea=this.serializerService.prepareBase64()}copy(){const e=this.exportTextArea,n=document.createElement("textarea");n.id="txt",n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.opacity="0",n.value=e,document.body.appendChild(n),n.select();try{if(document.execCommand("copy"))return this.showMessage=!0,setTimeout(()=>this.showMessage=!1,1500),!0}catch(l){console.error(gf.ERROR_1)}finally{document.body.removeChild(n)}return!1}}var sk=Jl({encapsulation:0,styles:[["#export-area[_ngcontent-%COMP%]{width:100%;resize:none}.modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;width:100%}#title[_ngcontent-%COMP%]{font-weight:800;margin-bottom:10px}"]],data:{}});function rk(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(-1,null,["copied..."]))],null,null)}function uk(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,0,"br",[],null,null,null,null,null))],null,null)}function ok(e){return gr(0,[(e()(),qs(0,0,null,null,17,"app-modal",[["id","export-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==qt(e,1).onKeydownHandler(l)&&t),t}),xP,PP)),ai(1,4440064,null,0,wP,[gl,ol,pf],{id:[0,"id"]},null),(e()(),qs(2,0,null,0,14,"div",[["class","modal"]],null,null,null,null,null)),(e()(),qs(3,0,null,null,13,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),qs(4,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),cr(-1,null,["Export save"])),(e()(),qs(6,0,null,null,1,"textarea",[["id","export-area"],["placeholder","Your save will be generated here..."],["readonly",""],["rows","20"]],null,null,null,null,null)),(e()(),cr(7,null,["",""])),(e()(),qs(8,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),qs(9,0,null,null,1,"button",[["id","import-button"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.export()&&t),t}),null,null)),(e()(),cr(-1,null,["Update"])),(e()(),qs(11,0,null,null,1,"button",[["id","copy-button"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.copy()&&t),t}),null,null)),(e()(),cr(-1,null,["Copy to clipboard"])),(e()(),Qs(16777216,null,null,1,null,rk)),ai(14,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,uk)),ai(16,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(17,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,1,0,"export-modal"),e(n,14,0,l.showMessage),e(n,16,0,!l.showMessage)}),(function(e,n){e(n,7,0,n.component.exportTextArea)}))}class ak{constructor(e,n){this.serializerService=e,this.modalService=n}ngOnInit(){}import(){this.serializerService.import(this.importTextArea),this.importTextArea="",this.modalService.close(ju.IMPORT)}}var ck=Jl({encapsulation:0,styles:[["#import-area[_ngcontent-%COMP%]{width:100%;resize:none}.modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}#title[_ngcontent-%COMP%]{font-weight:800;margin-bottom:10px}"]],data:{}});function hk(e){return gr(0,[(e()(),qs(0,0,null,null,14,"app-modal",[["id","import-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==qt(e,1).onKeydownHandler(l)&&t),t}),xP,PP)),ai(1,4440064,null,0,wP,[gl,ol,pf],{id:[0,"id"]},null),(e()(),qs(2,0,null,0,11,"div",[["class","modal"]],null,null,null,null,null)),(e()(),qs(3,0,null,null,10,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),qs(4,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),cr(-1,null,["Import save"])),(e()(),qs(6,0,null,null,5,"textarea",[["id","import-area"],["placeholder","Paste your save here..."],["rows","20"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,7)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,7).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,7)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,7)._compositionEnd(l.target.value)&&t),"ngModelChange"===n&&(t=!1!==(i.importTextArea=l)&&t),t}),null,null)),ai(7,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),hi(1024,null,qp,(function(e){return[e]}),[Jp]),ai(9,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(11,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(12,0,null,null,1,"button",[["id","import-button"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.import()&&t),t}),null,null)),(e()(),cr(-1,null,["Import"])),(e()(),qs(14,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,1,0,"import-modal"),e(n,9,0,l.importTextArea)}),(function(e,n){e(n,6,0,qt(n,11).ngClassUntouched,qt(n,11).ngClassTouched,qt(n,11).ngClassPristine,qt(n,11).ngClassDirty,qt(n,11).ngClassValid,qt(n,11).ngClassInvalid,qt(n,11).ngClassPending)}))}class dk{constructor(e,n){this.modalService=e,this.serializerService=n}ngOnInit(){}hardReset(){this.serializerService.hardReset(),this.modalService.close(ju.HARD_RESET)}cancel(){this.modalService.close(ju.HARD_RESET)}}var gk=Jl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;font-size:1.2em}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;width:100%}button[_ngcontent-%COMP%]{border:2px solid #000;color:#000;padding:1% 2%;text-align:center;text-decoration:none;display:inline-block;font-size:1em;margin:.5%}#hardReset[_ngcontent-%COMP%]{background-color:#5f0000;color:#fff}"]],data:{}});function pk(e){return gr(0,[(e()(),qs(0,0,null,null,19,"app-modal",[["id","hard-reset-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==qt(e,1).onKeydownHandler(l)&&t),t}),xP,PP)),ai(1,4440064,null,0,wP,[gl,ol,pf],{id:[0,"id"]},null),(e()(),qs(2,0,null,0,16,"div",[["class","modal"]],null,null,null,null,null)),(e()(),qs(3,0,null,null,15,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),qs(4,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),cr(-1,null,["Hard Reset"])),(e()(),qs(6,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),cr(-1,null,[" Are you sure you want to hard reset your progress? "])),(e()(),qs(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),cr(-1,null,[" This will remove ALL progress and saved game (except settings and tutorial state). "])),(e()(),qs(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),cr(-1,null,[" You will still be able to load game from exported save. "])),(e()(),qs(12,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),cr(-1,null,[" This should only be done if you have backup save or want to start from the beginning. "])),(e()(),qs(14,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),qs(15,0,null,null,1,"button",[["id","hardReset"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.hardReset()&&t),t}),null,null)),(e()(),cr(-1,null,["HARD RESET"])),(e()(),qs(17,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.cancel()&&t),t}),null,null)),(e()(),cr(-1,null,["CANCEL"])),(e()(),qs(19,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){e(n,1,0,"hard-reset-modal")}),null)}class mk{constructor(e,n,l){this.optionsService=e,this.servicesService=n,this.modalService=l,this.selection=0,this.lastServerAction={timestamp:0},this.saveFileMetadata={day:-1,year:-1},this.savingLoader={status:!1},this.loadingLoader={status:!1},this.checkLoader={status:!1},this.positiveColour=this.optionsService.getOption(rf.POSITIVE_COLOUR),this.negativeColour=this.optionsService.getOption(rf.NEGATIVE_COLOUR),this.playerColour=this.optionsService.getOption(rf.PLAYER_COLOUR),this.AIDiffs=Xu,l.registerForOnOpen().subscribe(e=>{e===ju.OPTIONS&&(this.checkSave(!0),this.lastServerAction.timestamp=0)})}ngOnInit(){this.optionsSubscription||(this.optionsSubscription=this.optionsService.registerForOptionsChange().subscribe(()=>this.initOptions())),this.initOptions()}initOptions(){this.autoSaveStatus=this.optionsService.getOption(rf.AUTO_SAVE_STATUS),this.autoSavePeriod=this.optionsService.getOption(rf.AUTO_SAVE_PERIOD),this.metricStatus=this.optionsService.getOption(rf.METRIC),this.saveLogs=this.optionsService.getOption(rf.SAVE_LOGS),this.pauseOnInit=this.optionsService.getOption(rf.PAUSE_ON_INIT),this.keepReservationSettingsOnReset=this.optionsService.getOption(rf.KEEP_RESERVATION_SETTINGS_ON_RESET),this.keepManagementSettingsOnReset=this.optionsService.getOption(rf.KEEP_MANAGEMENT_SETTINGS_ON_RESET),this.keepAutoTradeOnReset=this.optionsService.getOption(rf.KEEP_AUTO_TRADE_ON_RESET),this.soundMaster=this.optionsService.getOption(rf.SOUND_MASTER),this.soundMasterVolume=this.optionsService.getOption(rf.SOUND_MASTER_VOLUME),this.soundMusic=this.optionsService.getOption(rf.SOUND_MUSIC),this.soundMusicVolume=this.optionsService.getOption(rf.SOUND_MUSIC_VOLUME),this.soundEffects=this.optionsService.getOption(rf.SOUND_EFFECTS),this.soundEffectsVolume=this.optionsService.getOption(rf.SOUND_EFFECTS_VOLUME),this.soundEffectMarket=this.optionsService.getOption(rf.SOUND_EFFECT_MARKET),this.soundEffectResearch=this.optionsService.getOption(rf.SOUND_EFFECT_RESEARCH),this.soundEffectInvasion=this.optionsService.getOption(rf.SOUND_EFFECT_INVASION),this.soundEffectSeason=this.optionsService.getOption(rf.SOUND_EFFECT_SEASON),this.visualProgressBars=this.optionsService.getOption(rf.VISUAL_PROGRESS_BARS),this.autoTextFitting=this.optionsService.getOption(rf.AUTO_TEXT_FITTING),this.pagedView=this.optionsService.getOption(rf.PAGED_VIEW),this.buildingsPerPage=this.optionsService.getOption(rf.BUILDINGS_PER_PAGE),this.positiveColour=this.optionsService.getOption(rf.POSITIVE_COLOUR),this.negativeColour=this.optionsService.getOption(rf.NEGATIVE_COLOUR),this.playerColour=this.optionsService.getOption(rf.PLAYER_COLOUR),this.AIDifficulty=this.optionsService.getOption(rf.AI_DIFFICULTY)}close(){this.modalService.close(ju.OPTIONS)}updateOptions(){this.optionsService.setOptions([{option:rf.AUTO_SAVE_STATUS,value:this.autoSaveStatus},{option:rf.AUTO_SAVE_PERIOD,value:this.autoSavePeriod},{option:rf.METRIC,value:this.metricStatus},{option:rf.SAVE_LOGS,value:this.saveLogs},{option:rf.PAUSE_ON_INIT,value:this.pauseOnInit},{option:rf.KEEP_RESERVATION_SETTINGS_ON_RESET,value:this.keepReservationSettingsOnReset},{option:rf.KEEP_MANAGEMENT_SETTINGS_ON_RESET,value:this.keepManagementSettingsOnReset},{option:rf.KEEP_AUTO_TRADE_ON_RESET,value:this.keepAutoTradeOnReset},{option:rf.SOUND_MASTER,value:this.soundMaster},{option:rf.SOUND_MASTER_VOLUME,value:this.soundMasterVolume},{option:rf.SOUND_MUSIC,value:this.soundMusic},{option:rf.SOUND_MUSIC_VOLUME,value:this.soundMusicVolume},{option:rf.SOUND_EFFECTS,value:this.soundEffects},{option:rf.SOUND_EFFECTS_VOLUME,value:this.soundEffectsVolume},{option:rf.SOUND_EFFECT_MARKET,value:this.soundEffectMarket},{option:rf.SOUND_EFFECT_RESEARCH,value:this.soundEffectResearch},{option:rf.SOUND_EFFECT_INVASION,value:this.soundEffectInvasion},{option:rf.SOUND_EFFECT_SEASON,value:this.soundEffectSeason},{option:rf.VISUAL_PROGRESS_BARS,value:this.visualProgressBars},{option:rf.AUTO_TEXT_FITTING,value:this.autoTextFitting},{option:rf.PAGED_VIEW,value:this.pagedView},{option:rf.BUILDINGS_PER_PAGE,value:this.buildingsPerPage},{option:rf.POSITIVE_COLOUR,value:this.positiveColour},{option:rf.NEGATIVE_COLOUR,value:this.negativeColour},{option:rf.PLAYER_COLOUR,value:this.playerColour},{option:rf.AI_DIFFICULTY,value:this.AIDifficulty}])}updateSaveOption(){this.autoSavePeriod=Number(this.autoSavePeriod),this.autoSavePeriod<1&&(this.autoSavePeriod=1),this.autoSavePeriod%1!=0&&(this.autoSavePeriod=Math.floor(this.autoSavePeriod)),this.autoSavePeriod>60&&(this.autoSavePeriod=60),this.updateOptions()}setPositiveColour(){this.optionsService.setPositiveColour(this.positiveColour)}setNegativeColour(){this.optionsService.setNegativeColour(this.negativeColour)}setPlayerColour(){this.optionsService.setPlayerColour(this.playerColour)}resetPositiveColour(){this.positiveColour=Oo.POSITIVE_COLOUR,this.setPositiveColour()}resetNegativeColour(){this.negativeColour=Oo.NEGATIVE_COLOUR,this.setNegativeColour()}resetPlayerColour(){this.playerColour=Oo.PLAYER_COLOUR,this.setPlayerColour()}resetAll(){this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to reset all settings (in all tabs) to default values?");const e=this.modalService.registerForConfirmation().subscribe(n=>{e.unsubscribe(),n&&this.optionsService.init()})}getTimestamp(){return(new Date).getTime()}cloudSave(){this.getTimestamp()-this.lastServerAction.timestamp>15e3?this.servicesService.getService(Wu.SERIALIZER).cloudSave(this.savingLoader,this.saveFileMetadata,this.lastServerAction):this.modalService.info("You must wait for "+(15-Math.ceil((this.getTimestamp()-this.lastServerAction.timestamp)/1e3))+"s before next cloud save")}cloudLoad(){this.getTimestamp()-this.lastServerAction.timestamp>15e3?this.servicesService.getService(Wu.SERIALIZER).cloudLoad(this.loadingLoader,this.lastServerAction):this.modalService.info("You must wait for "+(15-Math.ceil((this.getTimestamp()-this.lastServerAction.timestamp)/1e3))+"s before next cloud load")}checkSave(e=!1){e||this.getTimestamp()-this.lastServerAction.timestamp>5e3?this.servicesService.getService(Wu.SERIALIZER).cloudCheck(e,this.checkLoader,this.saveFileMetadata,this.lastServerAction):this.modalService.info("You must wait for "+(5-Math.ceil((this.getTimestamp()-this.lastServerAction.timestamp)/1e3))+"s before next save lookup")}getSoundMasterVolume(){return this.optionsService.getOption(rf.SOUND_MASTER_VOLUME)}changeSoundMasterVolume(e){this.soundMasterVolume=e.target.value,this.updateOptions()}getSoundMusicVolume(){return this.optionsService.getOption(rf.SOUND_MUSIC_VOLUME)}changeSoundMusicVolume(e){this.soundMusicVolume=e.target.value,this.updateOptions()}getSoundEffectsVolume(){return this.optionsService.getOption(rf.SOUND_EFFECTS_VOLUME)}changeSoundEffectsVolume(e){this.soundEffectsVolume=e.target.value,this.updateOptions()}isKongregate(){return go.target===ho.DEV||go.target===ho.KONGREGATE}}var fk=Jl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{text-align:center;font-size:1.2em}#title[_ngcontent-%COMP%]{text-align:center;font-weight:800;display:inline-block}.options[_ngcontent-%COMP%]{text-align:left}#autoSavePeriod[_ngcontent-%COMP%]{width:4ch;text-align:right}.slidecontainer[_ngcontent-%COMP%]{display:inline-block;width:150px}.slider[_ngcontent-%COMP%]{-webkit-appearance:none;width:100%;height:10px;border-radius:5px;background:var(--passive-colour);outline:0;opacity:.7;-webkit-transition:opacity .2s;transition:opacity .2s}.slider[_ngcontent-%COMP%]:hover{opacity:1}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}.soundVolumeLabel[_ngcontent-%COMP%]{display:inline-block;width:250px}#buildingPerPage[_ngcontent-%COMP%]{width:5ch}#sections[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;width:100%}#sections[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:10px;font-size:1.2em;background-color:var(--passive-colour);border:1px solid #000;cursor:pointer}#sections[_ngcontent-%COMP%] > div.x[_ngcontent-%COMP%]{background-color:var(--active-colour)}#refresh[_ngcontent-%COMP%]{padding:4px 4px 0;-webkit-box-align:center;align-items:center}#refreshIMG[_ngcontent-%COMP%]{height:20px}"]],data:{}});function Sk(e){return gr(0,[(e()(),qs(0,0,null,null,0,"div",[["class","loader"]],null,null,null,null,null))],null,null)}function Ek(e){return gr(0,[(e()(),qs(0,0,null,null,0,"div",[["class","loader"]],null,null,null,null,null))],null,null)}function vk(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["No save file on the server"]))],null,null)}function Rk(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(1,null,["save for day: ",", year: ",""]))],null,(function(e,n){var l=n.component;e(n,1,0,l.saveFileMetadata.day,l.saveFileMetadata.year)}))}function Ok(e){return gr(0,[(e()(),qs(0,0,null,null,0,"img",[["id","refreshIMG"],["src","assets/refresh.svg"]],null,null,null,null,null))],null,null)}function bk(e){return gr(0,[(e()(),qs(0,0,null,null,0,"div",[["class","loader"]],null,null,null,null,null))],null,null)}function Tk(e){return gr(0,[(e()(),qs(0,0,null,null,21,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(-1,null,["Cloud saving"])),(e()(),qs(3,0,null,null,3,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.cloudSave()&&t),t}),null,null)),(e()(),cr(-1,null,[" Cloud save "])),(e()(),Qs(16777216,null,null,1,null,Sk)),ai(6,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(7,0,null,null,3,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.cloudLoad()&&t),t}),null,null)),(e()(),cr(-1,null,[" Cloud load "])),(e()(),Qs(16777216,null,null,1,null,Ek)),ai(10,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(11,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,vk)),ai(13,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,Rk)),ai(15,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(16,0,null,null,4,"button",[["id","refresh"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.checkSave()&&t),t}),null,null)),(e()(),Qs(16777216,null,null,1,null,Ok)),ai(18,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,bk)),ai(20,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(21,0,null,null,0,"br",[],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,6,0,l.savingLoader.status),e(n,10,0,l.loadingLoader.status),e(n,13,0,l.saveFileMetadata.day<0),e(n,15,0,l.saveFileMetadata.day>0),e(n,18,0,!l.checkLoader.status),e(n,20,0,l.checkLoader.status)}),null)}function Ck(e){return gr(0,[(e()(),qs(0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),cr(-1,null,[" Cloud save is currently only available at "])),(e()(),qs(2,0,null,null,1,"a",[["href","https://www.kongregate.com/games/Xamer/villager-kings"]],null,null,null,null,null)),(e()(),cr(-1,null,["Kongregate Villager Kings"]))],null,null)}function Ik(e){return gr(0,[(e()(),qs(0,0,null,null,82,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),cr(-1,null,["Game options"])),(e()(),Qs(16777216,null,null,1,null,Tk)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,Ck)),ai(6,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(7,0,null,null,75,"div",[["class","options"]],null,null,null,null,null)),(e()(),qs(8,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),cr(-1,null,["Game options"])),(e()(),qs(10,0,null,null,5,"input",[["id","autoSaveStatus"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,11).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,11).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.autoSaveStatus=l)&&t),t}),null,null)),ai(11,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(13,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(15,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(16,0,null,null,1,"label",[["for","autoSaveStatus"]],null,null,null,null,null)),(e()(),cr(-1,null,["auto save on/off "])),(e()(),qs(18,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(19,0,null,null,6,"input",[["id","autoSavePeriod"],["max","60"],["min","1"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,20)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,20).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,20)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,20)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,21).onChange(l.target.value)&&t),"input"===n&&(t=!1!==qt(e,21).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,21).onTouched()&&t),"change"===n&&(t=!1!==i.updateSaveOption()&&t),"ngModelChange"===n&&(t=!1!==(i.autoSavePeriod=l)&&t),t}),null,null)),ai(20,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(21,16384,null,0,gm,[gl,ol],null,null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,gm]),ai(23,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(25,16384,null,0,im,[[4,tm]],null,null),(e()(),cr(-1,null,[" minutes "])),(e()(),qs(27,0,null,null,1,"label",[["for","autoSavePeriod"]],null,null,null,null,null)),(e()(),cr(-1,null,["auto save period "])),(e()(),qs(29,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(30,0,null,null,5,"input",[["id","metricStatus"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,31).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,31).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.metricStatus=l)&&t),t}),null,null)),ai(31,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(33,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(35,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(36,0,null,null,1,"label",[["for","metricStatus"]],null,null,null,null,null)),(e()(),cr(-1,null,["use metric units"])),(e()(),qs(38,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(39,0,null,null,5,"input",[["id","saveLogsStatus"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,40).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,40).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.saveLogs=l)&&t),t}),null,null)),ai(40,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(42,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(44,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(45,0,null,null,1,"label",[["for","saveLogsStatus"]],null,null,null,null,null)),(e()(),cr(-1,null,["save logs (up to 100 entries)"])),(e()(),qs(47,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(48,0,null,null,5,"input",[["id","pauseOnInit"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,49).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,49).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.pauseOnInit=l)&&t),t}),null,null)),ai(49,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(51,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(53,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(54,0,null,null,1,"label",[["for","pauseOnInit"]],null,null,null,null,null)),(e()(),cr(-1,null,["pause the game on page refresh"])),(e()(),qs(56,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(57,0,null,null,5,"input",[["id","keepReservationSettings"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,58).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,58).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.keepReservationSettingsOnReset=l)&&t),t}),null,null)),ai(58,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(60,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(62,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(63,0,null,null,1,"label",[["for","keepReservationSettings"]],null,null,null,null,null)),(e()(),cr(-1,null,["Keep reservation settings active over resets and abdications"])),(e()(),qs(65,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(66,0,null,null,5,"input",[["id","keepManagementSettings"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,67).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,67).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.keepManagementSettingsOnReset=l)&&t),t}),null,null)),ai(67,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(69,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(71,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(72,0,null,null,1,"label",[["for","keepManagementSettings"]],null,null,null,null,null)),(e()(),cr(-1,null,["Keep management settings over resets and abdications"])),(e()(),qs(74,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(75,0,null,null,5,"input",[["id","keepAutoTradeOnReset"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,76).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,76).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.keepAutoTradeOnReset=l)&&t),t}),null,null)),ai(76,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(78,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(80,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(81,0,null,null,1,"label",[["for","keepAutoTradeOnReset"]],null,null,null,null,null)),(e()(),cr(-1,null,["Keep auto trade enabled after resets and abdications"]))],(function(e,n){var l=n.component;e(n,4,0,l.isKongregate()),e(n,6,0,!l.isKongregate()),e(n,13,0,l.autoSaveStatus),e(n,23,0,l.autoSavePeriod),e(n,33,0,l.metricStatus),e(n,42,0,l.saveLogs),e(n,51,0,l.pauseOnInit),e(n,60,0,l.keepReservationSettingsOnReset),e(n,69,0,l.keepManagementSettingsOnReset),e(n,78,0,l.keepAutoTradeOnReset)}),(function(e,n){e(n,10,0,qt(n,15).ngClassUntouched,qt(n,15).ngClassTouched,qt(n,15).ngClassPristine,qt(n,15).ngClassDirty,qt(n,15).ngClassValid,qt(n,15).ngClassInvalid,qt(n,15).ngClassPending),e(n,19,0,qt(n,25).ngClassUntouched,qt(n,25).ngClassTouched,qt(n,25).ngClassPristine,qt(n,25).ngClassDirty,qt(n,25).ngClassValid,qt(n,25).ngClassInvalid,qt(n,25).ngClassPending),e(n,30,0,qt(n,35).ngClassUntouched,qt(n,35).ngClassTouched,qt(n,35).ngClassPristine,qt(n,35).ngClassDirty,qt(n,35).ngClassValid,qt(n,35).ngClassInvalid,qt(n,35).ngClassPending),e(n,39,0,qt(n,44).ngClassUntouched,qt(n,44).ngClassTouched,qt(n,44).ngClassPristine,qt(n,44).ngClassDirty,qt(n,44).ngClassValid,qt(n,44).ngClassInvalid,qt(n,44).ngClassPending),e(n,48,0,qt(n,53).ngClassUntouched,qt(n,53).ngClassTouched,qt(n,53).ngClassPristine,qt(n,53).ngClassDirty,qt(n,53).ngClassValid,qt(n,53).ngClassInvalid,qt(n,53).ngClassPending),e(n,57,0,qt(n,62).ngClassUntouched,qt(n,62).ngClassTouched,qt(n,62).ngClassPristine,qt(n,62).ngClassDirty,qt(n,62).ngClassValid,qt(n,62).ngClassInvalid,qt(n,62).ngClassPending),e(n,66,0,qt(n,71).ngClassUntouched,qt(n,71).ngClassTouched,qt(n,71).ngClassPristine,qt(n,71).ngClassDirty,qt(n,71).ngClassValid,qt(n,71).ngClassInvalid,qt(n,71).ngClassPending),e(n,75,0,qt(n,80).ngClassUntouched,qt(n,80).ngClassTouched,qt(n,80).ngClassPristine,qt(n,80).ngClassDirty,qt(n,80).ngClassValid,qt(n,80).ngClassInvalid,qt(n,80).ngClassPending)}))}function yk(e){return gr(0,[(e()(),qs(0,0,null,null,85,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),cr(-1,null,["Sound"])),(e()(),qs(3,0,null,null,82,"div",[["class","options"]],null,null,null,null,null)),(e()(),qs(4,0,null,null,1,"h5",[],null,null,null,null,null)),(e()(),cr(-1,null,["Master"])),(e()(),qs(6,0,null,null,5,"input",[["id","soundMaster"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,7).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,7).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.soundMaster=l)&&t),t}),null,null)),ai(7,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(9,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(11,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(12,0,null,null,1,"label",[["for","soundMaster"]],null,null,null,null,null)),(e()(),cr(-1,null,["master sound on/off"])),(e()(),qs(14,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(15,0,null,null,1,"label",[["class","soundVolumeLabel"],["for","soundMasterVolume"]],null,null,null,null,null)),(e()(),cr(16,null,["master sound volume ","% "])),(e()(),qs(17,0,null,null,1,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),qs(18,0,null,null,0,"input",[["class","slider"],["id","soundMasterVolume"],["max","100"],["min","0"],["type","range"],["value","100"]],[[8,"value",0]],[[null,"input"]],(function(e,n,l){var t=!0;return"input"===n&&(t=!1!==e.component.changeSoundMasterVolume(l)&&t),t}),null,null)),(e()(),qs(19,0,null,null,1,"h5",[],null,null,null,null,null)),(e()(),cr(-1,null,["Music"])),(e()(),qs(21,0,null,null,5,"input",[["id","soundMusic"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,22).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,22).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.soundMusic=l)&&t),t}),null,null)),ai(22,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(24,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(26,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(27,0,null,null,1,"label",[["for","soundMusic"]],null,null,null,null,null)),(e()(),cr(-1,null,["music on/off"])),(e()(),qs(29,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(30,0,null,null,1,"label",[["class","soundVolumeLabel"],["for","soundMusicVolume"]],null,null,null,null,null)),(e()(),cr(31,null,["music sound volume ","% "])),(e()(),qs(32,0,null,null,1,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),qs(33,0,null,null,0,"input",[["class","slider"],["id","soundMusicVolume"],["max","100"],["min","0"],["type","range"],["value","100"]],[[8,"value",0]],[[null,"input"]],(function(e,n,l){var t=!0;return"input"===n&&(t=!1!==e.component.changeSoundMusicVolume(l)&&t),t}),null,null)),(e()(),qs(34,0,null,null,1,"h5",[],null,null,null,null,null)),(e()(),cr(-1,null,["Effects"])),(e()(),qs(36,0,null,null,5,"input",[["id","soundEffects"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,37).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,37).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.soundEffects=l)&&t),t}),null,null)),ai(37,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(39,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(41,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(42,0,null,null,1,"label",[["for","soundEffects"]],null,null,null,null,null)),(e()(),cr(-1,null,["effects on/off"])),(e()(),qs(44,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(45,0,null,null,1,"label",[["class","soundVolumeLabel"],["for","soundEffectsVolume"]],null,null,null,null,null)),(e()(),cr(46,null,["effects sound volume ","% "])),(e()(),qs(47,0,null,null,1,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),qs(48,0,null,null,0,"input",[["class","slider"],["id","soundEffectsVolume"],["max","100"],["min","0"],["type","range"],["value","100"]],[[8,"value",0]],[[null,"input"]],(function(e,n,l){var t=!0;return"input"===n&&(t=!1!==e.component.changeSoundEffectsVolume(l)&&t),t}),null,null)),(e()(),qs(49,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(50,0,null,null,5,"input",[["id","soundEffectMarket"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,51).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,51).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.soundEffectMarket=l)&&t),t}),null,null)),ai(51,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(53,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(55,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(56,0,null,null,1,"label",[["for","soundEffectMarket"]],null,null,null,null,null)),(e()(),cr(-1,null,["Play sound when merchant arrives"])),(e()(),qs(58,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(59,0,null,null,5,"input",[["id","soundEffectResearch"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,60).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,60).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.soundEffectResearch=l)&&t),t}),null,null)),ai(60,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(62,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(64,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(65,0,null,null,1,"label",[["for","soundEffectResearch"]],null,null,null,null,null)),(e()(),cr(-1,null,["Play sound when research is finished"])),(e()(),qs(67,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(68,0,null,null,5,"input",[["id","soundEffectInvasion"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,69).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,69).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.soundEffectInvasion=l)&&t),t}),null,null)),ai(69,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(71,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(73,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(74,0,null,null,1,"label",[["for","soundEffectInvasion"]],null,null,null,null,null)),(e()(),cr(-1,null,["Play sound when invasion is coming"])),(e()(),qs(76,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(77,0,null,null,5,"input",[["id","soundEffectSeason"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,78).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,78).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.soundEffectSeason=l)&&t),t}),null,null)),ai(78,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(80,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(82,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(83,0,null,null,1,"label",[["for","soundEffectSeason"]],null,null,null,null,null)),(e()(),cr(-1,null,["Play sound when season change"])),(e()(),qs(85,0,null,null,0,"br",[],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,9,0,l.soundMaster),e(n,24,0,l.soundMusic),e(n,39,0,l.soundEffects),e(n,53,0,l.soundEffectMarket),e(n,62,0,l.soundEffectResearch),e(n,71,0,l.soundEffectInvasion),e(n,80,0,l.soundEffectSeason)}),(function(e,n){var l=n.component;e(n,6,0,qt(n,11).ngClassUntouched,qt(n,11).ngClassTouched,qt(n,11).ngClassPristine,qt(n,11).ngClassDirty,qt(n,11).ngClassValid,qt(n,11).ngClassInvalid,qt(n,11).ngClassPending),e(n,16,0,l.getSoundMasterVolume()),e(n,18,0,l.getSoundMasterVolume()),e(n,21,0,qt(n,26).ngClassUntouched,qt(n,26).ngClassTouched,qt(n,26).ngClassPristine,qt(n,26).ngClassDirty,qt(n,26).ngClassValid,qt(n,26).ngClassInvalid,qt(n,26).ngClassPending),e(n,31,0,l.getSoundMusicVolume()),e(n,33,0,l.getSoundMusicVolume()),e(n,36,0,qt(n,41).ngClassUntouched,qt(n,41).ngClassTouched,qt(n,41).ngClassPristine,qt(n,41).ngClassDirty,qt(n,41).ngClassValid,qt(n,41).ngClassInvalid,qt(n,41).ngClassPending),e(n,46,0,l.getSoundEffectsVolume()),e(n,48,0,l.getSoundEffectsVolume()),e(n,50,0,qt(n,55).ngClassUntouched,qt(n,55).ngClassTouched,qt(n,55).ngClassPristine,qt(n,55).ngClassDirty,qt(n,55).ngClassValid,qt(n,55).ngClassInvalid,qt(n,55).ngClassPending),e(n,59,0,qt(n,64).ngClassUntouched,qt(n,64).ngClassTouched,qt(n,64).ngClassPristine,qt(n,64).ngClassDirty,qt(n,64).ngClassValid,qt(n,64).ngClassInvalid,qt(n,64).ngClassPending),e(n,68,0,qt(n,73).ngClassUntouched,qt(n,73).ngClassTouched,qt(n,73).ngClassPristine,qt(n,73).ngClassDirty,qt(n,73).ngClassValid,qt(n,73).ngClassInvalid,qt(n,73).ngClassPending),e(n,77,0,qt(n,82).ngClassUntouched,qt(n,82).ngClassTouched,qt(n,82).ngClassPristine,qt(n,82).ngClassDirty,qt(n,82).ngClassValid,qt(n,82).ngClassInvalid,qt(n,82).ngClassPending)}))}function Ak(e){return gr(0,[(e()(),qs(0,0,null,null,34,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),cr(-1,null,["Game difficulty"])),(e()(),qs(3,0,null,null,31,"div",[["class","options"]],null,null,null,null,null)),(e()(),qs(4,0,null,null,1,"h5",[],null,null,null,null,null)),(e()(),cr(-1,null,["AI strength"])),(e()(),qs(6,0,null,null,6,"input",[["id","AIeasy"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,7)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,7).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,7)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,7)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,8).onChange()&&t),"blur"===n&&(t=!1!==qt(e,8).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.AIDifficulty=l)&&t),t}),null,null)),ai(7,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(8,212992,null,0,mm,[gl,ol,pm,kn],{value:[0,"value"]},null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,mm]),ai(10,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(12,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(13,0,null,null,1,"label",[["for","AIeasy"]],null,null,null,null,null)),(e()(),cr(-1,null,["Easy"])),(e()(),qs(15,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(16,0,null,null,6,"input",[["id","AImedium"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,17)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,17).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,17)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,17)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,18).onChange()&&t),"blur"===n&&(t=!1!==qt(e,18).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.AIDifficulty=l)&&t),t}),null,null)),ai(17,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(18,212992,null,0,mm,[gl,ol,pm,kn],{value:[0,"value"]},null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,mm]),ai(20,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(22,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(23,0,null,null,1,"label",[["for","AImedium"]],null,null,null,null,null)),(e()(),cr(-1,null,["Medium"])),(e()(),qs(25,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(26,0,null,null,6,"input",[["id","AIhard"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,27)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,27).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,27)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,27)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,28).onChange()&&t),"blur"===n&&(t=!1!==qt(e,28).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.AIDifficulty=l)&&t),t}),null,null)),ai(27,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(28,212992,null,0,mm,[gl,ol,pm,kn],{value:[0,"value"]},null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,mm]),ai(30,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(32,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(33,0,null,null,1,"label",[["for","AIhard"]],null,null,null,null,null)),(e()(),cr(-1,null,["Hard"]))],(function(e,n){var l=n.component;e(n,8,0,l.AIDiffs.EASY),e(n,10,0,l.AIDifficulty),e(n,18,0,l.AIDiffs.MEDIUM),e(n,20,0,l.AIDifficulty),e(n,28,0,l.AIDiffs.HARD),e(n,30,0,l.AIDifficulty)}),(function(e,n){e(n,6,0,qt(n,12).ngClassUntouched,qt(n,12).ngClassTouched,qt(n,12).ngClassPristine,qt(n,12).ngClassDirty,qt(n,12).ngClassValid,qt(n,12).ngClassInvalid,qt(n,12).ngClassPending),e(n,16,0,qt(n,22).ngClassUntouched,qt(n,22).ngClassTouched,qt(n,22).ngClassPristine,qt(n,22).ngClassDirty,qt(n,22).ngClassValid,qt(n,22).ngClassInvalid,qt(n,22).ngClassPending),e(n,26,0,qt(n,32).ngClassUntouched,qt(n,32).ngClassTouched,qt(n,32).ngClassPristine,qt(n,32).ngClassDirty,qt(n,32).ngClassValid,qt(n,32).ngClassInvalid,qt(n,32).ngClassPending)}))}function Nk(e){return gr(0,[(e()(),qs(0,0,null,null,40,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),cr(-1,null,["Performance options"])),(e()(),qs(3,0,null,null,37,"div",[["class","options"]],null,null,null,null,null)),(e()(),qs(4,0,null,null,5,"input",[["id","pagedView"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,5).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,5).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.pagedView=l)&&t),t}),null,null)),ai(5,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(7,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(9,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(10,0,null,null,1,"label",[["for","pagedView"]],null,null,null,null,null)),(e()(),cr(-1,null,["Display buildings in pages instead of all at once"])),(e()(),qs(12,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(13,0,null,null,6,"input",[["id","buildingPerPage"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,14)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,14).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,14)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,14)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,15).onChange(l.target.value)&&t),"input"===n&&(t=!1!==qt(e,15).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,15).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.buildingsPerPage=l)&&t),t}),null,null)),ai(14,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(15,16384,null,0,gm,[gl,ol],null,null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,gm]),ai(17,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(19,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(20,0,null,null,1,"label",[["for","buildingPerPage"]],null,null,null,null,null)),(e()(),cr(-1,null,["Number of buildings on one page"])),(e()(),qs(22,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(23,0,null,null,5,"input",[["id","visualProgressBars"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,24).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,24).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.visualProgressBars=l)&&t),t}),null,null)),ai(24,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(26,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(28,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(29,0,null,null,1,"label",[["for","visualProgressBars"]],null,null,null,null,null)),(e()(),cr(-1,null,["Display moving progress bars (on) or just text (off)"])),(e()(),qs(31,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(32,0,null,null,5,"input",[["id","autoTextFitting"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,33).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,33).onTouched()&&t),"change"===n&&(t=!1!==i.updateOptions()&&t),"ngModelChange"===n&&(t=!1!==(i.autoTextFitting=l)&&t),t}),null,null)),ai(33,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(35,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(37,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(38,0,null,null,1,"label",[["for","autoTextFitting"]],null,null,null,null,null)),(e()(),cr(-1,null,["Buildings names and effect font size will be automatically recalculated on change"])),(e()(),qs(40,0,null,null,0,"br",[],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,7,0,l.pagedView),e(n,17,0,l.buildingsPerPage),e(n,26,0,l.visualProgressBars),e(n,35,0,l.autoTextFitting)}),(function(e,n){e(n,4,0,qt(n,9).ngClassUntouched,qt(n,9).ngClassTouched,qt(n,9).ngClassPristine,qt(n,9).ngClassDirty,qt(n,9).ngClassValid,qt(n,9).ngClassInvalid,qt(n,9).ngClassPending),e(n,13,0,qt(n,19).ngClassUntouched,qt(n,19).ngClassTouched,qt(n,19).ngClassPristine,qt(n,19).ngClassDirty,qt(n,19).ngClassValid,qt(n,19).ngClassInvalid,qt(n,19).ngClassPending),e(n,23,0,qt(n,28).ngClassUntouched,qt(n,28).ngClassTouched,qt(n,28).ngClassPristine,qt(n,28).ngClassDirty,qt(n,28).ngClassValid,qt(n,28).ngClassInvalid,qt(n,28).ngClassPending),e(n,32,0,qt(n,37).ngClassUntouched,qt(n,37).ngClassTouched,qt(n,37).ngClassPristine,qt(n,37).ngClassDirty,qt(n,37).ngClassValid,qt(n,37).ngClassInvalid,qt(n,37).ngClassPending)}))}function _k(e){return gr(0,[(e()(),qs(0,0,null,null,36,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),cr(-1,null,["Display options"])),(e()(),qs(3,0,null,null,33,"div",[["class","options"]],null,null,null,null,null)),(e()(),qs(4,0,null,null,5,"input",[["id","positiveColour"],["type","color"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,5)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,5).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,5)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,5)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==i.setPositiveColour()&&t),"ngModelChange"===n&&(t=!1!==(i.positiveColour=l)&&t),t}),null,null)),ai(5,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),hi(1024,null,qp,(function(e){return[e]}),[Jp]),ai(7,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(9,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(10,0,null,null,1,"label",[["for","positiveColour"]],null,null,null,null,null)),(e()(),cr(-1,null,["Font colour for positive effects"])),(e()(),qs(12,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.resetPositiveColour()&&t),t}),null,null)),(e()(),cr(-1,null,["reset to default"])),(e()(),qs(14,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(15,0,null,null,5,"input",[["id","negativeColour"],["type","color"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,16)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,16).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,16)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,16)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==i.setNegativeColour()&&t),"ngModelChange"===n&&(t=!1!==(i.negativeColour=l)&&t),t}),null,null)),ai(16,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),hi(1024,null,qp,(function(e){return[e]}),[Jp]),ai(18,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(20,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(21,0,null,null,1,"label",[["for","negativeColour"]],null,null,null,null,null)),(e()(),cr(-1,null,["Font colour for negative effects"])),(e()(),qs(23,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.resetNegativeColour()&&t),t}),null,null)),(e()(),cr(-1,null,["reset to default"])),(e()(),qs(25,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(26,0,null,null,5,"input",[["id","playerColour"],["type","color"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,27)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,27).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,27)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,27)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==i.setPlayerColour()&&t),"ngModelChange"===n&&(t=!1!==(i.playerColour=l)&&t),t}),null,null)),ai(27,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),hi(1024,null,qp,(function(e){return[e]}),[Jp]),ai(29,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(31,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(32,0,null,null,1,"label",[["for","playerColour"]],null,null,null,null,null)),(e()(),cr(-1,null,["World map player regions colour"])),(e()(),qs(34,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.resetPlayerColour()&&t),t}),null,null)),(e()(),cr(-1,null,["reset to default"])),(e()(),qs(36,0,null,null,0,"br",[],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,7,0,l.positiveColour),e(n,18,0,l.negativeColour),e(n,29,0,l.playerColour)}),(function(e,n){e(n,4,0,qt(n,9).ngClassUntouched,qt(n,9).ngClassTouched,qt(n,9).ngClassPristine,qt(n,9).ngClassDirty,qt(n,9).ngClassValid,qt(n,9).ngClassInvalid,qt(n,9).ngClassPending),e(n,15,0,qt(n,20).ngClassUntouched,qt(n,20).ngClassTouched,qt(n,20).ngClassPristine,qt(n,20).ngClassDirty,qt(n,20).ngClassValid,qt(n,20).ngClassInvalid,qt(n,20).ngClassPending),e(n,26,0,qt(n,31).ngClassUntouched,qt(n,31).ngClassTouched,qt(n,31).ngClassPristine,qt(n,31).ngClassDirty,qt(n,31).ngClassValid,qt(n,31).ngClassInvalid,qt(n,31).ngClassPending)}))}function wk(e){return gr(0,[(e()(),qs(0,0,null,null,49,"app-modal",[["id","options-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==qt(e,1).onKeydownHandler(l)&&t),t}),xP,PP)),ai(1,4440064,null,0,wP,[gl,ol,pf],{id:[0,"id"]},null),(e()(),qs(2,0,null,0,46,"div",[["class","modal"]],null,null,null,null,null)),(e()(),qs(3,0,null,null,45,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),qs(4,0,null,null,25,"div",[["id","sections"]],null,null,null,null,null)),(e()(),qs(5,0,null,null,4,"div",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==(e.component.selection=0)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(7,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(8,{x:0}),(e()(),cr(-1,null,["General"])),(e()(),qs(10,0,null,null,4,"div",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==(e.component.selection=1)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(12,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(13,{x:0}),(e()(),cr(-1,null,["Sound"])),(e()(),qs(15,0,null,null,4,"div",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==(e.component.selection=2)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(17,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(18,{x:0}),(e()(),cr(-1,null,["Difficulty"])),(e()(),qs(20,0,null,null,4,"div",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==(e.component.selection=3)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(22,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(23,{x:0}),(e()(),cr(-1,null,["Performance"])),(e()(),qs(25,0,null,null,4,"div",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==(e.component.selection=4)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(27,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(28,{x:0}),(e()(),cr(-1,null,["Display"])),(e()(),Qs(16777216,null,null,1,null,Ik)),ai(31,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,yk)),ai(33,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,Ak)),ai(35,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,Nk)),ai(37,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,_k)),ai(39,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(40,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(41,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(42,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(43,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.resetAll()&&t),t}),null,null)),(e()(),cr(-1,null,["RESET ALL SETTINGS"])),(e()(),qs(45,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(46,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(47,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.close()&&t),t}),null,null)),(e()(),cr(-1,null,["Close"])),(e()(),qs(49,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,1,0,"options-modal");var t=e(n,8,0,0===l.selection);e(n,7,0,t);var i=e(n,13,0,1===l.selection);e(n,12,0,i);var s=e(n,18,0,2===l.selection);e(n,17,0,s);var r=e(n,23,0,3===l.selection);e(n,22,0,r);var u=e(n,28,0,4===l.selection);e(n,27,0,u),e(n,31,0,0===l.selection),e(n,33,0,1===l.selection),e(n,35,0,2===l.selection),e(n,37,0,3===l.selection),e(n,39,0,4===l.selection)}),null)}class Pk{constructor(e,n,l){this.kongregateService=e,this.royalService=n,this.modalService=l}ngOnInit(){}ok(){this.modalService.close(ju.ROYAL)}buy(e){go.production?this.kongregateService.buyItem(e):(this.royalService.increaseRoyalPoints(Number(e.replace("rp_pack",""))),this.modalService.close(ju.ROYAL))}isKongregate(){return go.target===ho.DEV||go.target===ho.KONGREGATE}}var xk=Jl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}.kred[_ngcontent-%COMP%]{width:30px;height:30px;vertical-align:middle}.value[_ngcontent-%COMP%]{margin-top:5px}.entry[_ngcontent-%COMP%]{width:50%;text-align:center}#close[_ngcontent-%COMP%]{margin-top:15px}"]],data:{}});function kk(e){return gr(0,[(e()(),qs(0,0,null,null,27,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["Choose how many Royal Points you would like to buy:"])),(e()(),qs(3,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(4,0,null,null,5,"div",[["class","entry"]],null,null,null,null,null)),(e()(),qs(5,0,null,null,2,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.buy("rp_pack10")&&t),t}),null,null)),(e()(),cr(-1,null,["10 "])),(e()(),qs(7,0,null,null,0,"img",[["alt","Kreds"],["class","kred"],["src","assets/kred.png"]],null,null,null,null,null)),(e()(),qs(8,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,[" 10 Royal points"])),(e()(),qs(10,0,null,null,5,"div",[["class","entry"]],null,null,null,null,null)),(e()(),qs(11,0,null,null,2,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.buy("rp_pack20")&&t),t}),null,null)),(e()(),cr(-1,null,["20 "])),(e()(),qs(13,0,null,null,0,"img",[["alt","Kreds"],["class","kred"],["src","assets/kred.png"]],null,null,null,null,null)),(e()(),qs(14,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,[" 20 Royal points"])),(e()(),qs(16,0,null,null,5,"div",[["class","entry"]],null,null,null,null,null)),(e()(),qs(17,0,null,null,2,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.buy("rp_pack55")&&t),t}),null,null)),(e()(),cr(-1,null,["50 "])),(e()(),qs(19,0,null,null,0,"img",[["alt","Kreds"],["class","kred"],["src","assets/kred.png"]],null,null,null,null,null)),(e()(),qs(20,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,[" 55 Royal points"])),(e()(),qs(22,0,null,null,5,"div",[["class","entry"]],null,null,null,null,null)),(e()(),qs(23,0,null,null,2,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.buy("rp_pack125")&&t),t}),null,null)),(e()(),cr(-1,null,["100 "])),(e()(),qs(25,0,null,null,0,"img",[["alt","Kreds"],["class","kred"],["src","assets/kred.png"]],null,null,null,null,null)),(e()(),qs(26,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,[" 125 Royal points"]))],null,null)}function Mk(e){return gr(0,[(e()(),qs(0,0,null,null,6,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["Buying Royal Points is currently possible only at "])),(e()(),qs(3,0,null,null,1,"a",[["href","https://www.kongregate.com/games/Xamer/villager-kings"]],null,null,null,null,null)),(e()(),cr(-1,null,["Kongregate Villager Kings"])),(e()(),qs(5,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),cr(-1,null,[" You can still find Royal Points through playing the game or buying on Kongregate and moving your save file here. "]))],null,null)}function Dk(e){return gr(0,[(e()(),qs(0,0,null,null,10,"app-modal",[["id","royal-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==qt(e,1).onKeydownHandler(l)&&t),t}),xP,PP)),ai(1,4440064,null,0,wP,[gl,ol,pf],{id:[0,"id"]},null),(e()(),qs(2,0,null,0,7,"div",[["class","modal"]],null,null,null,null,null)),(e()(),qs(3,0,null,null,6,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,kk)),ai(5,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,Mk)),ai(7,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(8,0,null,null,1,"button",[["id","close"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.ok()&&t),t}),null,null)),(e()(),cr(-1,null,["CLOSE"])),(e()(),qs(10,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,1,0,"royal-modal"),e(n,5,0,l.isKongregate()),e(n,7,0,!l.isKongregate())}),null)}class Lk{constructor(e,n,l,t,i){this.servicesService=e,this.modalService=n,this.idService=l,this.resourcesService=t,this.worldService=i,this.colonistsHolder=0,this.troopsHolder=new Array(Object.values(Pu).length).fill(0),this.expeditionDistance=1,this.discoveredLand=0,this.cannotStartReason="",this.missions=Au,this.resources=bu,n.registerForMissionData().subscribe(e=>{this.missionData=e,this.troopsHolder=new Array(Object.values(Pu).length).fill(0),this.colonistsHolder=0,this.discoveredLand=this.worldService.getTotalDiscovered(),this.expeditionDistance=this.calculateMaxDistance(),this.cannotStartReason=""})}ngOnInit(){}closeModal(){this.modalService.close(ju.MISSION),this.missionData=null}conquer(){const e=this.worldService.findPath(this.missionData.originRegion.id,this.missionData.targetRegion.id,ku.PLAYER),n=new JO([]);this.getTroops(Au.CONQUER).forEach(e=>{this.troopsHolder[e]>0&&(n.addTroop(e,this.troopsHolder[e]),this.missionData.originRegion.army.removeTroop(e,this.troopsHolder[e]))}),this.worldService.addMission(new FT(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),n,e)),this.closeModal()}colonize(){if(this.resourcesService.removeRecruit(this.colonistsHolder)){const e=this.worldService.findPath(0,this.missionData.targetRegion.id,ku.PLAYER);this.worldService.addMission(new LT(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),new JO([new ZO(Pu.COLONIST,this.colonistsHolder)]),e)),this.closeModal()}else this.modalService.info("Not enough villagers")}plunder(){const e=this.worldService.findPath(this.missionData.originRegion.id,this.missionData.targetRegion.id,ku.PLAYER),n=new JO([]);this.getTroops(Au.PLUNDER).forEach(e=>{this.troopsHolder[e]>0&&(n.addTroop(e,this.troopsHolder[e]),this.missionData.originRegion.army.removeTroop(e,this.troopsHolder[e]))}),this.worldService.addMission(new HT(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),n,e)),this.closeModal()}move(){const e=this.worldService.findPath(this.missionData.originRegion.id,this.missionData.targetRegion.id,ku.PLAYER),n=new JO([]);this.getTroops(Au.MOVE).forEach(e=>{this.troopsHolder[e]>0&&(n.addTroop(e,this.troopsHolder[e]),this.missionData.originRegion.army.removeTroop(e,this.troopsHolder[e]))}),this.worldService.addMission(new UT(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),n,e)),this.closeModal()}spy(){const e=this.worldService.findPath(this.missionData.originRegion.id,this.missionData.targetRegion.id,ku.SPECIAL);this.worldService.addMission(new GT(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),new JO([new ZO(Pu.SPY,this.troopsHolder[Pu.SPY])]),e)),this.missionData.originRegion.army.removeTroop(Pu.SPY,this.troopsHolder[Pu.SPY]),this.closeModal()}seaMove(){const e=this.worldService.findSeaPath(this.missionData.originRegion.id,this.missionData.targetRegion.id),n=new JO([]);this.getTroops(Au.SEA_MOVE).forEach(e=>{this.troopsHolder[e]>0&&(n.addTroop(e,this.troopsHolder[e]),e===Pu.BOAT||e===Pu.BRIGANTINE||e===Pu.GALLEON?this.missionData.originRegion.navy.removeTroop(e,this.troopsHolder[e]):this.missionData.originRegion.army.removeTroop(e,this.troopsHolder[e]))}),this.worldService.addMission(new XT(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),n,e)),this.closeModal()}seaPlunder(){const e=this.worldService.findSeaPath(this.missionData.originRegion.id,this.missionData.targetRegion.id),n=new JO([]);this.getTroops(Au.SEA_PLUNDER).forEach(e=>{this.troopsHolder[e]>0&&(n.addTroop(e,this.troopsHolder[e]),e===Pu.BOAT||e===Pu.BRIGANTINE||e===Pu.GALLEON?this.missionData.originRegion.navy.removeTroop(e,this.troopsHolder[e]):this.missionData.originRegion.army.removeTroop(e,this.troopsHolder[e]))}),this.worldService.addMission(new qT(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),n,e)),this.closeModal()}seaConquer(){const e=this.worldService.findSeaPath(this.missionData.originRegion.id,this.missionData.targetRegion.id),n=new JO([]);this.getTroops(Au.SEA_CONQUER).forEach(e=>{this.troopsHolder[e]>0&&(n.addTroop(e,this.troopsHolder[e]),e===Pu.BOAT||e===Pu.BRIGANTINE||e===Pu.GALLEON?this.missionData.originRegion.navy.removeTroop(e,this.troopsHolder[e]):this.missionData.originRegion.army.removeTroop(e,this.troopsHolder[e]))}),this.worldService.addMission(new QT(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),n,e)),this.closeModal()}fishing(){const e=this.worldService.findSeaPath(this.missionData.originRegion.id,this.missionData.targetSeaEvent.parentId),n=new JO([]);this.getTroops(Au.FISHING).forEach(e=>{this.troopsHolder[e]>0&&(n.addTroop(e,this.troopsHolder[e]),e!==Pu.BOAT&&e!==Pu.BRIGANTINE&&e!==Pu.GALLEON||this.missionData.originRegion.navy.removeTroop(e,this.troopsHolder[e]))}),this.worldService.addMission(new VT(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),n,e)),this.closeModal()}hunting(){const e=this.worldService.findSeaPath(this.missionData.originRegion.id,this.missionData.targetSeaEvent.parentId),n=new JO([]);this.getTroops(Au.HUNTING).forEach(e=>{this.troopsHolder[e]>0&&(n.addTroop(e,this.troopsHolder[e]),e!==Pu.BOAT&&e!==Pu.BRIGANTINE&&e!==Pu.GALLEON||this.missionData.originRegion.navy.removeTroop(e,this.troopsHolder[e]))}),this.worldService.addMission(new zT(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),n,e)),this.closeModal()}treasure(){const e=this.worldService.findSeaPath(this.missionData.originRegion.id,this.missionData.targetSeaEvent.parentId),n=new JO([]);this.getTroops(Au.TREASURE).forEach(e=>{this.troopsHolder[e]>0&&(n.addTroop(e,this.troopsHolder[e]),e!==Pu.BOAT&&e!==Pu.BRIGANTINE&&e!==Pu.GALLEON||this.missionData.originRegion.navy.removeTroop(e,this.troopsHolder[e]))}),this.worldService.addMission(new YT(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),n,e)),this.closeModal()}cartography(){const e=this.worldService.findSeaPath(this.missionData.originRegion.id,this.missionData.targetSeaEvent.parentId),n=new JO([]);this.getTroops(Au.CARTOGRAPHY).forEach(e=>{this.troopsHolder[e]>0&&(n.addTroop(e,this.troopsHolder[e]),e!==Pu.BOAT&&e!==Pu.BRIGANTINE&&e!==Pu.GALLEON||this.missionData.originRegion.navy.removeTroop(e,this.troopsHolder[e]))}),this.worldService.addMission(new KT(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),n,e)),this.closeModal()}seaBattle(){const e=this.worldService.findSeaPath(this.missionData.originRegion.id,this.missionData.targetSeaEvent.parentId),n=new JO([]);this.getTroops(Au.SEA_BATTLE).forEach(e=>{this.troopsHolder[e]>0&&(n.addTroop(e,this.troopsHolder[e]),e!==Pu.BOAT&&e!==Pu.BRIGANTINE&&e!==Pu.GALLEON||this.missionData.originRegion.navy.removeTroop(e,this.troopsHolder[e]))}),this.worldService.addMission(new jT(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),n,e)),this.closeModal()}expedition(){const e=this.worldService.findSeaPath(this.missionData.originRegion.id,-9999),n=new JO([]);this.getTroops(Au.EXPEDITION).forEach(e=>{this.troopsHolder[e]>0&&(n.addTroop(e,this.troopsHolder[e]),e===Pu.BOAT||e===Pu.BRIGANTINE||e===Pu.GALLEON?this.missionData.originRegion.navy.removeTroop(e,this.troopsHolder[e]):this.missionData.originRegion.army.removeTroop(e,this.troopsHolder[e]))});const l=new $T(this.servicesService,this.idService.getNextId(),this.worldService.getPlayerCountry(),n,e);l.data=this.calculateExpeditionChance(),this.worldService.addMission(l),this.closeModal()}prepareViewbox(e){return e.x-65+" "+(e.y-65)+" 130 130"}isMissionAllowed(e){if(this.missionData.missionType===Au.EXPEDITION&&e===Au.EXPEDITION)return!0;if(this.missionData.targetRegionCountry)if(this.missionData.targetRegionCountry===ku.PLAYER){if(e===Au.MOVE||e===Au.SEA_MOVE&&this.isSeaAvailable())return!0}else if(this.missionData.targetRegionCountry===ku.NEUTRAL){if(e===Au.MOVE||e===Au.COLONIZE||e===Au.SEA_MOVE&&this.isSeaAvailable())return!0}else{if(e===Au.SPY)return!0;if((e===Au.PLUNDER||e===Au.CONQUER)&&this.hasPath())return!0;if((e===Au.SEA_PLUNDER||e===Au.SEA_CONQUER)&&this.hasSeaPath())return!0}else if(this.missionData.targetSeaEvent&&(this.missionData.targetSeaEvent.type===Lu.FISH&&e===Au.FISHING||this.missionData.targetSeaEvent.type===Lu.SHARK&&e===Au.HUNTING||this.missionData.targetSeaEvent.type===Lu.TREASURE&&e===Au.TREASURE||this.missionData.targetSeaEvent.type===Lu.CARTOGRAPHY&&e===Au.CARTOGRAPHY||this.missionData.targetSeaEvent.type===Lu.PIRATES&&e===Au.SEA_BATTLE||this.missionData.targetSeaEvent.type===Lu.PIRATES_BASE&&e===Au.SEA_BATTLE))return!0;return!1}hasPath(){return!!(this.missionData.originRegion&&this.missionData.targetRegion&&this.worldService.findPath(this.missionData.originRegion.id,this.missionData.targetRegion.id,ku.PLAYER,!0))}hasSeaPath(){return!!(this.missionData.originRegion&&this.missionData.targetRegion&&this.worldService.findSeaPath(this.missionData.originRegion.id,this.missionData.targetRegion.id,!0))}changeMission(e){this.missionData.missionType=e,e===Au.COLONIZE&&(this.missionData.originRegion=this.worldService.getRegion(0),this.missionData.originRegionColour=this.worldService.getPlayerCountry().colour)}start(){if(this.canStart()){switch(this.missionData.missionType===Au.EXPEDITION?this.getMissionCost(this.missionData.missionType).forEach(e=>{this.resourcesService.decreaseResource(e.resource,e.amount*this.getUnitsNumber()*this.expeditionDistance,"Mission",!0)}):this.getMissionCost(this.missionData.missionType).forEach(e=>{this.resourcesService.decreaseResource(e.resource,e.amount*this.getUnitsNumber(),"Mission",!0)}),this.missionData.missionType===Au.EXPEDITION&&this.resourcesService.decreaseResource(bu.MAP,1,"Mission",!0),this.missionData.missionType){case Au.MOVE:this.move();break;case Au.PLUNDER:this.plunder();break;case Au.CONQUER:this.conquer();break;case Au.COLONIZE:this.colonize();break;case Au.SPY:this.spy();break;case Au.SEA_MOVE:this.seaMove();break;case Au.SEA_PLUNDER:this.seaPlunder();break;case Au.SEA_CONQUER:this.seaConquer();break;case Au.FISHING:this.fishing();break;case Au.HUNTING:this.hunting();break;case Au.TREASURE:this.treasure();break;case Au.CARTOGRAPHY:this.cartography();break;case Au.SEA_BATTLE:this.seaBattle();break;case Au.EXPEDITION:this.expedition()}this.troopsHolder=new Array(Object.values(Pu).length).fill(0),this.colonistsHolder=0}}getTroopName(e){return Uu.prepareTroopName(e)}getTroops(e){return e===Au.MOVE?[Pu.SPY,Pu.MILITIA,Pu.SPEARMAN,Pu.ARCHER,Pu.SWORDSMAN,Pu.LIGHT_CAVALRY,Pu.HORSE_ARCHER]:e===Au.SEA_MOVE?[Pu.MILITIA,Pu.SPEARMAN,Pu.ARCHER,Pu.SWORDSMAN,Pu.LIGHT_CAVALRY,Pu.HORSE_ARCHER,Pu.BOAT,Pu.BRIGANTINE,Pu.GALLEON]:e===Au.SEA_PLUNDER||e===Au.SEA_CONQUER||e===Au.EXPEDITION?[Pu.SPEARMAN,Pu.ARCHER,Pu.SWORDSMAN,Pu.LIGHT_CAVALRY,Pu.HORSE_ARCHER,Pu.BOAT,Pu.BRIGANTINE,Pu.GALLEON]:e===Au.FISHING||e===Au.HUNTING||e===Au.TREASURE||e===Au.CARTOGRAPHY||e===Au.SEA_BATTLE?[Pu.BOAT,Pu.BRIGANTINE,Pu.GALLEON]:[Pu.SPEARMAN,Pu.ARCHER,Pu.SWORDSMAN,Pu.LIGHT_CAVALRY,Pu.HORSE_ARCHER]}getSpyUnits(){return[Pu.SPY]}getTroop(e){return e!==Pu.BOAT&&e!==Pu.BRIGANTINE&&e!==Pu.GALLEON?this.missionData.originRegion.army.units.find(n=>n.troop===e)||new ZO(e,0):this.missionData.originRegion.navy.units.find(n=>n.troop===e)||new ZO(e,0)}changeOrigin(){if(this.missionData.missionType!==Au.COLONIZE){this.modalService.open(ju.WORLD),this.modalService.setRegionSelection(!0);const e=this.modalService.registerForReturnRegion().subscribe(n=>{e.unsubscribe(),null!==n&&(this.missionData.originRegionColour=this.worldService.getCountryByRegionId(n.id).colour,this.missionData.originRegion=n,this.troopsHolder=new Array(Object.values(Pu).length).fill(0))})}else this.modalService.info("Cannot change origin region for colonization mission")}changeTarget(){this.modalService.open(ju.WORLD),this.modalService.setRegionSelection(!1);const e=this.modalService.registerForReturnRegion().subscribe(n=>{if(e.unsubscribe(),null!==n){const e=this.worldService.getCountryByRegionId(n.id);this.missionData.targetRegionColour=e.colour,this.missionData.targetRegionCountry=e.id,this.missionData.targetRegion=n,e.id===ku.PLAYER||e.id===ku.NEUTRAL?this.isMissionAllowed(this.missionData.missionType)||(this.missionData.missionType=Au.MOVE):this.isMissionAllowed(this.missionData.missionType)||(this.missionData.missionType=Au.PLUNDER,this.troopsHolder[Pu.MILITIA]=0)}})}canStart(){let e=!1;if(this.missionData.originRegion&&this.missionData.targetRegion&&this.missionData.originRegion!==this.missionData.targetRegion?this.missionData.missionType===Au.SPY&&this.troopsHolder[Pu.SPY]>0?e=!0:this.missionData.missionType===Au.COLONIZE?e=this.colonistsHolder>0:this.anyTroops()&&(e=!0):this.missionData.originRegion&&this.missionData.targetSeaEvent?this.anyTroops()&&(e=!0):this.missionData.originRegion&&this.missionData.missionType===Au.EXPEDITION&&this.anyTroops()&&(e=!0),this.missionData.missionType===Au.FISHING||this.missionData.missionType===Au.HUNTING||this.missionData.missionType===Au.TREASURE||this.missionData.missionType===Au.CARTOGRAPHY||this.missionData.missionType===Au.SEA_BATTLE)this.worldService.findSeaPath(this.missionData.originRegion.id,this.missionData.targetSeaEvent.parentId,!0)||(e=!1,this.cannotStartReason="no sea path available");else if(this.missionData.originRegion&&this.missionData.targetRegion&&this.missionData.originRegion!==this.missionData.targetRegion&&this.missionData.missionType===Au.SEA_MOVE||this.missionData.missionType===Au.SEA_PLUNDER||this.missionData.missionType===Au.SEA_CONQUER||this.missionData.missionType===Au.EXPEDITION)this.missionData.missionType===Au.EXPEDITION?(this.worldService.findSeaPath(this.missionData.originRegion.id,-9999,!0)||(e=!1,this.cannotStartReason="no sea path available"),this.hasResource(bu.MAP,1)||(e=!1,this.cannotStartReason="missing map resource"),this.calculateExpeditionChance()<=0&&(e=!1,this.cannotStartReason="expedition chance too low"),this.calculateExpeditionLand()<=0&&(e=!1,this.cannotStartReason="estimated land from expedition too low")):this.worldService.findSeaPath(this.missionData.originRegion.id,this.missionData.targetRegion.id,!0)||(e=!1,this.cannotStartReason="no sea path available"),e&&0===this.getNavyCapacity()&&(e=!1,this.cannotStartReason="not enough cargo capacity"),e&&this.getCargoUtilization()>this.getNavyCapacity()&&(e=!1,this.cannotStartReason="not enough cargo capacity");else if(e&&(this.worldService.findPath(this.missionData.originRegion.id,this.missionData.targetRegion.id,ku.PLAYER,!0)||(e=!1,this.cannotStartReason="no land path available")),e)for(let n=0;n<this.troopsHolder.length;n++)this.troopsHolder[n]>0&&(void 0===this.missionData.originRegion.army.getUnit(n)||this.missionData.originRegion.army.getUnit(n).size<this.troopsHolder[n])&&(e=!1,this.cannotStartReason="not enough troops available");return e&&(this.missionData.missionType!==Au.EXPEDITION?this.getMissionCost(this.missionData.missionType).forEach(n=>{this.hasResource(n.resource,n.amount*this.getUnitsNumber())||(e=!1,this.cannotStartReason="not enough resources")}):this.getMissionCost(this.missionData.missionType).forEach(n=>{this.hasResource(n.resource,n.amount*this.getUnitsNumber()*this.expeditionDistance)||(e=!1,this.cannotStartReason="not enough resources")})),e}anyTroops(){let e=!1;return this.troopsHolder.forEach(n=>{n>0&&(e=!0)}),e}getFreeWorkers(){return this.resourcesService.getPeople()<20?this.resourcesService.getPeople():20}getMissionCost(e){return No.getMission(e).COST}getResourceName(e){return Uu.prepareResourceName(e)}getUnitsNumber(){let e=0;if(this.missionData.missionType===Au.COLONIZE)e=this.colonistsHolder;else for(let n=0;n<this.troopsHolder.length-1;n++)n!==Pu.BOAT&&n!==Pu.BRIGANTINE&&n!==Pu.GALLEON&&(e+=this.troopsHolder[n]);return e}hasResource(e,n){return 0===this.resourcesService.hasResource(e,n,"Mission",!0)}getUnitsStrength(){let e=0;for(let n=0;n<this.troopsHolder.length;n++)this.troopsHolder[n]>0&&(this.missionData.missionType===Au.SEA_MOVE||this.missionData.missionType===Au.SEA_PLUNDER||this.missionData.missionType===Au.SEA_CONQUER?n!==Pu.BOAT&&n!==Pu.BRIGANTINE&&n!==Pu.GALLEON&&(e+=No.getTroop(n).STRENGTH*this.troopsHolder[n]):e+=No.getTroop(n).STRENGTH*this.troopsHolder[n]);return e}getUnitsDefense(){let e=0;for(let n=0;n<this.troopsHolder.length;n++)this.troopsHolder[n]>0&&(this.missionData.missionType===Au.SEA_MOVE||this.missionData.missionType===Au.SEA_PLUNDER||this.missionData.missionType===Au.SEA_CONQUER?n!==Pu.BOAT&&n!==Pu.BRIGANTINE&&n!==Pu.GALLEON&&(e+=No.getTroop(n).DEFENSE*this.troopsHolder[n]):e+=No.getTroop(n).DEFENSE*this.troopsHolder[n]);return e}getMissionName(){return void 0!==this.missionData.missionType?Uu.prepareMissionName(this.missionData.missionType):"no mission"}getUnitsSpeed(){let e=0;for(let n=0;n<this.troopsHolder.length;n++)this.troopsHolder[n]>0&&(0===e&&(e=No.getTroop(n).SPEED),No.getTroop(n).SPEED<e&&(e=No.getTroop(n).SPEED));return e}getSeaUnitsSpeed(){let e=0;for(let n=0;n<this.troopsHolder.length;n++)this.troopsHolder[n]>0&&(n===Pu.BOAT||n===Pu.BRIGANTINE||n===Pu.GALLEON)&&(0===e&&(e=No.getTroop(n).SPEED),No.getTroop(n).SPEED<e&&(e=No.getTroop(n).SPEED));return e}selectAll(){this.getTroops(this.missionData.missionType).forEach(e=>{this.troopsHolder[e]=this.getTroop(e).size})}clearAll(){for(let e=0;e<this.troopsHolder.length;e++)this.troopsHolder[e]=0}isSeaAvailable(){return this.missionData.originRegion.neighbours.includes(-1)&&this.missionData.targetRegion.neighbours.includes(-1)}isSeaLandMission(){return this.missionData.missionType===Au.SEA_MOVE||this.missionData.missionType===Au.SEA_PLUNDER||this.missionData.missionType===Au.SEA_CONQUER||this.missionData.missionType===Au.EXPEDITION}getCargoUtilization(){let e=0;for(let l=0;l<this.troopsHolder.length-1;l++)l!==Pu.ALL&&l!==Pu.BOAT&&l!==Pu.BRIGANTINE&&l!==Pu.GALLEON&&this.troopsHolder[l]>0&&(e+=this.troopsHolder[l]*No.getTroop(l).SIZE);let n=0;return this.missionData.missionType===Au.EXPEDITION&&this.getUnitsNumber()>0&&this.expeditionDistance>0&&(this.getMissionCost(this.missionData.missionType).forEach(e=>{n+=e.amount*this.getUnitsNumber()*this.expeditionDistance}),e+=Math.ceil(n/1e3)),e}getNavyCapacity(){let e=0;for(let n=0;n<this.troopsHolder.length-1;n++)n!==Pu.BOAT&&n!==Pu.BRIGANTINE&&n!==Pu.GALLEON||this.troopsHolder[n]>0&&(e+=this.troopsHolder[n]*No.getTroop(n).CARGO);return e}calculateExpeditionChance(){return this.discoveredLand=this.worldService.getTotalDiscovered(),Math.max(this.expeditionDistance-this.discoveredLand,0)}calculateMaxDistance(){return this.discoveredLand=this.worldService.getTotalDiscovered(),this.discoveredLand+100}calculateExpeditionLand(){let e=0;for(let n=0;n<this.troopsHolder.length-1;n++)n!==Pu.ALL&&n!==Pu.BOAT&&n!==Pu.BRIGANTINE&&n!==Pu.GALLEON&&this.troopsHolder[n]>0&&(e+=this.troopsHolder[n]*(No.getTroop(n).STRENGTH+No.getTroop(n).DEFENSE));return e}}var Fk=Jl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;font-size:1.2em}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#regions[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.region[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;padding:10px}.regionSVG[_ngcontent-%COMP%]{border:1px solid #000}.center[_ngcontent-%COMP%]{text-align:center}#missions[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.mission[_ngcontent-%COMP%]{height:50px;width:50px;border:1px solid #000;padding:5px;margin:10px;opacity:.3;cursor:pointer}.selectedMission[_ngcontent-%COMP%]{opacity:1;cursor:initial}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px}.slidecontainer[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;margin-top:3px;width:300px}.slider[_ngcontent-%COMP%]{-webkit-appearance:none;width:100%;height:10px;border-radius:5px;background:var(--passive-colour);outline:0;opacity:.7;-webkit-transition:opacity .2s;transition:opacity .2s}.slider[_ngcontent-%COMP%]:hover{opacity:1}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}.armyInput[_ngcontent-%COMP%]{width:5ch}#distanceInput[_ngcontent-%COMP%]{width:8ch}.troopLabel[_ngcontent-%COMP%]{display:inline-block;width:150px}.inactive[_ngcontent-%COMP%]{color:#5f5f5f}.inactive[_ngcontent-%COMP%]:hover{cursor:initial}.inactive[_ngcontent-%COMP%]:active{background-color:var(--passive-colour)}#secondHalf[_ngcontent-%COMP%]{font-size:.7em;padding-bottom:10px}#costs[_ngcontent-%COMP%]{text-align:center}#costList[_ngcontent-%COMP%], #totalCostList[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-pack:center;justify-content:center}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;margin-right:3px}.notAvailable[_ngcontent-%COMP%]{color:var(--negative-colour)}#bottomSection[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-pack:center;justify-content:center;margin-top:10px}#bottomSection[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding:10px}.stats[_ngcontent-%COMP%]{text-align:center}#startButton[_ngcontent-%COMP%]{white-space:nowrap}.seaIcon[_ngcontent-%COMP%]{height:50px;width:50px}.rejectionReason[_ngcontent-%COMP%]{color:var(--negative-colour);font-size:.6em}"]],data:{}});function Uk(e){return gr(0,[(e()(),qs(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,":svg:svg",[["class","regionSVG"]],[[1,"height",0],[1,"width",0],[1,"viewBox",0]],null,null,null,null)),(e()(),qs(2,0,null,null,0,":svg:path",[],[[1,"fill",0],[1,"d",0],[1,"stroke",0],[1,"stroke-width",0]],null,null,null,null))],null,(function(e,n){var l=n.component;e(n,1,0,"80px","80px",l.prepareViewbox(l.missionData.originRegion.center)),e(n,2,0,l.missionData.originRegionColour,l.missionData.originRegion.path,"black","2")}))}function Hk(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,0,":svg:svg",[["class","regionSVG"]],[[1,"height",0],[1,"width",0]],null,null,null,null))],null,(function(e,n){e(n,1,0,"80px","80px")}))}function Gk(e){return gr(0,[(e()(),qs(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,":svg:svg",[["class","regionSVG"]],[[1,"height",0],[1,"width",0],[1,"viewBox",0]],null,null,null,null)),(e()(),qs(2,0,null,null,0,":svg:path",[],[[1,"fill",0],[1,"d",0],[1,"stroke",0],[1,"stroke-width",0]],null,null,null,null))],null,(function(e,n){var l=n.component;e(n,1,0,"80px","80px",l.prepareViewbox(l.missionData.targetRegion.center)),e(n,2,0,l.missionData.targetRegionColour,l.missionData.targetRegion.path,"black","2")}))}function Bk(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,0,":svg:svg",[["class","regionSVG"]],[[1,"height",0],[1,"width",0]],null,null,null,null))],null,(function(e,n){e(n,1,0,"80px","80px")}))}function Wk(e){return gr(0,[(e()(),qs(0,0,null,null,8,"div",[["class","region"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"span",[["class","center"]],null,null,null,null,null)),(e()(),cr(-1,null,["target"])),(e()(),Qs(16777216,null,null,1,null,Gk)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,Bk)),ai(6,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(7,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.changeTarget()&&t),t}),null,null)),(e()(),cr(-1,null,["change"]))],(function(e,n){var l=n.component;e(n,4,0,l.missionData.targetRegion),e(n,6,0,!l.missionData.targetRegion)}),null)}function Vk(e){return gr(0,[(e()(),qs(0,0,null,null,4,"div",[["class","mission"]],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==i.changeMission(i.missions.COLONIZE)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(2,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(3,{selectedMission:0}),(e()(),qs(4,0,null,null,0,"img",[["src","assets/army/mission/colonize.svg"]],null,null,null,null,null))],(function(e,n){var l=n.component,t=e(n,3,0,l.missionData.missionType===l.missions.COLONIZE);e(n,2,0,"mission",t)}),null)}function zk(e){return gr(0,[(e()(),qs(0,0,null,null,4,"div",[["class","mission"]],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==i.changeMission(i.missions.MOVE)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(2,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(3,{selectedMission:0}),(e()(),qs(4,0,null,null,0,"img",[["src","assets/army/mission/move.svg"]],null,null,null,null,null))],(function(e,n){var l=n.component,t=e(n,3,0,l.missionData.missionType===l.missions.MOVE);e(n,2,0,"mission",t)}),null)}function Yk(e){return gr(0,[(e()(),qs(0,0,null,null,4,"div",[["class","mission"]],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==i.changeMission(i.missions.SPY)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(2,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(3,{selectedMission:0}),(e()(),qs(4,0,null,null,0,"img",[["src","assets/army/mission/spy.svg"]],null,null,null,null,null))],(function(e,n){var l=n.component,t=e(n,3,0,l.missionData.missionType===l.missions.SPY);e(n,2,0,"mission",t)}),null)}function $k(e){return gr(0,[(e()(),qs(0,0,null,null,4,"div",[["class","mission"]],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==i.changeMission(i.missions.PLUNDER)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(2,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(3,{selectedMission:0}),(e()(),qs(4,0,null,null,0,"img",[["src","assets/army/mission/plunder.svg"]],null,null,null,null,null))],(function(e,n){var l=n.component,t=e(n,3,0,l.missionData.missionType===l.missions.PLUNDER);e(n,2,0,"mission",t)}),null)}function Kk(e){return gr(0,[(e()(),qs(0,0,null,null,4,"div",[["class","mission"]],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==i.changeMission(i.missions.CONQUER)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(2,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(3,{selectedMission:0}),(e()(),qs(4,0,null,null,0,"img",[["src","assets/army/mission/conquer.svg"]],null,null,null,null,null))],(function(e,n){var l=n.component,t=e(n,3,0,l.missionData.missionType===l.missions.CONQUER);e(n,2,0,"mission",t)}),null)}function jk(e){return gr(0,[(e()(),qs(0,0,null,null,4,"div",[["class","mission"]],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==i.changeMission(i.missions.SEA_MOVE)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(2,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(3,{selectedMission:0}),(e()(),qs(4,0,null,null,0,"img",[["src","assets/army/mission/sea_move.svg"]],null,null,null,null,null))],(function(e,n){var l=n.component,t=e(n,3,0,l.missionData.missionType===l.missions.SEA_MOVE);e(n,2,0,"mission",t)}),null)}function Qk(e){return gr(0,[(e()(),qs(0,0,null,null,4,"div",[["class","mission"]],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==i.changeMission(i.missions.SEA_PLUNDER)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(2,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(3,{selectedMission:0}),(e()(),qs(4,0,null,null,0,"img",[["src","assets/army/mission/sea_plunder.svg"]],null,null,null,null,null))],(function(e,n){var l=n.component,t=e(n,3,0,l.missionData.missionType===l.missions.SEA_PLUNDER);e(n,2,0,"mission",t)}),null)}function qk(e){return gr(0,[(e()(),qs(0,0,null,null,4,"div",[["class","mission"]],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==i.changeMission(i.missions.SEA_CONQUER)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(2,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(3,{selectedMission:0}),(e()(),qs(4,0,null,null,0,"img",[["src","assets/army/mission/sea_conquer.svg"]],null,null,null,null,null))],(function(e,n){var l=n.component,t=e(n,3,0,l.missionData.missionType===l.missions.SEA_CONQUER);e(n,2,0,"mission",t)}),null)}function Xk(e){return gr(0,[(e()(),qs(0,0,null,null,4,"div",[["class","mission"]],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==i.changeMission(i.missions.FISHING)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(2,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(3,{selectedMission:0}),(e()(),qs(4,0,null,null,0,"img",[["class","seaIcon"],["src","assets/sea/fish.svg"]],null,null,null,null,null))],(function(e,n){var l=n.component,t=e(n,3,0,l.missionData.missionType===l.missions.FISHING);e(n,2,0,"mission",t)}),null)}function Zk(e){return gr(0,[(e()(),qs(0,0,null,null,4,"div",[["class","mission"]],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==i.changeMission(i.missions.HUNTING)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(2,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(3,{selectedMission:0}),(e()(),qs(4,0,null,null,0,"img",[["class","seaIcon"],["src","assets/sea/shark.svg"]],null,null,null,null,null))],(function(e,n){var l=n.component,t=e(n,3,0,l.missionData.missionType===l.missions.HUNTING);e(n,2,0,"mission",t)}),null)}function Jk(e){return gr(0,[(e()(),qs(0,0,null,null,4,"div",[["class","mission"]],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==i.changeMission(i.missions.TREASURE)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(2,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(3,{selectedMission:0}),(e()(),qs(4,0,null,null,0,"img",[["class","seaIcon"],["src","assets/sea/treasure.svg"]],null,null,null,null,null))],(function(e,n){var l=n.component,t=e(n,3,0,l.missionData.missionType===l.missions.TREASURE);e(n,2,0,"mission",t)}),null)}function eM(e){return gr(0,[(e()(),qs(0,0,null,null,4,"div",[["class","mission"]],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==i.changeMission(i.missions.CARTOGRAPHY)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(2,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(3,{selectedMission:0}),(e()(),qs(4,0,null,null,0,"img",[["class","seaIcon"],["src","assets/sea/sextant.svg"]],null,null,null,null,null))],(function(e,n){var l=n.component,t=e(n,3,0,l.missionData.missionType===l.missions.CARTOGRAPHY);e(n,2,0,"mission",t)}),null)}function nM(e){return gr(0,[(e()(),qs(0,0,null,null,4,"div",[["class","mission"]],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==i.changeMission(i.missions.SEA_BATTLE)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(2,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(3,{selectedMission:0}),(e()(),qs(4,0,null,null,0,"img",[["class","seaIcon"],["src","assets/sea/pirate_flag.svg"]],null,null,null,null,null))],(function(e,n){var l=n.component,t=e(n,3,0,l.missionData.missionType===l.missions.SEA_BATTLE);e(n,2,0,"mission",t)}),null)}function lM(e){return gr(0,[(e()(),qs(0,0,null,null,4,"div",[["class","mission"]],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==i.changeMission(i.missions.EXPEDITION)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(2,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(3,{selectedMission:0}),(e()(),qs(4,0,null,null,0,"img",[["class","seaIcon"],["src","assets/resources/map.svg"]],null,null,null,null,null))],(function(e,n){var l=n.component,t=e(n,3,0,l.missionData.missionType===l.missions.EXPEDITION);e(n,2,0,"mission",t)}),null)}function tM(e){return gr(0,[(e()(),qs(0,0,null,null,21,"span",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"span",[["class","troopLabel"]],null,null,null,null,null)),(e()(),cr(2,null,["",":"])),(e()(),qs(3,0,null,null,6,"input",[["class","armyInput"],["min","0"],["type","number"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,4)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,4).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,4)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,4)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,5).onChange(l.target.value)&&t),"input"===n&&(t=!1!==qt(e,5).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,5).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.troopsHolder[e.parent.context.$implicit]=l)&&t),t}),null,null)),ai(4,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(5,16384,null,0,gm,[gl,ol],null,null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,gm]),ai(7,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(9,16384,null,0,im,[[4,tm]],null,null),(e()(),cr(10,null,["/"," "])),(e()(),qs(11,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(12,0,null,null,9,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),cr(-1,null,[" 0 "])),(e()(),qs(14,0,null,null,6,"input",[["class","slider"],["min","0"],["type","range"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,15)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,15).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,15)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,15)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,16).onChange(l.target.value)&&t),"input"===n&&(t=!1!==qt(e,16).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,16).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.troopsHolder[e.parent.context.$implicit]=l)&&t),t}),null,null)),ai(15,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(16,16384,null,0,fm,[gl,ol],null,null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,fm]),ai(18,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(20,16384,null,0,im,[[4,tm]],null,null),(e()(),cr(21,null,[" "," "]))],(function(e,n){var l=n.component;e(n,7,0,l.troopsHolder[n.parent.context.$implicit]),e(n,18,0,l.troopsHolder[n.parent.context.$implicit])}),(function(e,n){var l=n.component;e(n,2,0,l.getTroopName(n.parent.context.$implicit)),e(n,3,0,yt(1,"",l.getTroop(n.parent.context.$implicit).size,""),qt(n,9).ngClassUntouched,qt(n,9).ngClassTouched,qt(n,9).ngClassPristine,qt(n,9).ngClassDirty,qt(n,9).ngClassValid,qt(n,9).ngClassInvalid,qt(n,9).ngClassPending),e(n,10,0,l.getTroop(n.parent.context.$implicit).size),e(n,14,0,yt(1,"",l.getTroop(n.parent.context.$implicit).size,""),qt(n,20).ngClassUntouched,qt(n,20).ngClassTouched,qt(n,20).ngClassPristine,qt(n,20).ngClassDirty,qt(n,20).ngClassValid,qt(n,20).ngClassInvalid,qt(n,20).ngClassPending),e(n,21,0,l.getTroop(n.parent.context.$implicit).size)}))}function iM(e){return gr(0,[(e()(),qs(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,tM)),ai(2,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){e(n,2,0,n.component.getTroop(n.context.$implicit).size>0)}),null)}function sM(e){return gr(0,[(e()(),qs(0,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.clearAll()&&t),t}),null,null)),(e()(),cr(-1,null,["clear all"])),(e()(),qs(4,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.selectAll()&&t),t}),null,null)),(e()(),cr(-1,null,["select all"])),(e()(),Qs(16777216,null,null,1,null,iM)),ai(7,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,7,0,l.getTroops(l.missionData.missionType))}),null)}function rM(e){return gr(0,[(e()(),qs(0,0,null,null,21,"span",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"span",[["class","troopLabel"]],null,null,null,null,null)),(e()(),cr(2,null,["",":"])),(e()(),qs(3,0,null,null,6,"input",[["class","armyInput"],["min","0"],["type","number"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,4)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,4).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,4)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,4)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,5).onChange(l.target.value)&&t),"input"===n&&(t=!1!==qt(e,5).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,5).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.troopsHolder[e.parent.context.$implicit]=l)&&t),t}),null,null)),ai(4,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(5,16384,null,0,gm,[gl,ol],null,null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,gm]),ai(7,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(9,16384,null,0,im,[[4,tm]],null,null),(e()(),cr(10,null,["/"," "])),(e()(),qs(11,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(12,0,null,null,9,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),cr(-1,null,[" 0 "])),(e()(),qs(14,0,null,null,6,"input",[["class","slider"],["min","0"],["type","range"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,15)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,15).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,15)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,15)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,16).onChange(l.target.value)&&t),"input"===n&&(t=!1!==qt(e,16).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,16).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.troopsHolder[e.parent.context.$implicit]=l)&&t),t}),null,null)),ai(15,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(16,16384,null,0,fm,[gl,ol],null,null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,fm]),ai(18,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(20,16384,null,0,im,[[4,tm]],null,null),(e()(),cr(21,null,[" "," "]))],(function(e,n){var l=n.component;e(n,7,0,l.troopsHolder[n.parent.context.$implicit]),e(n,18,0,l.troopsHolder[n.parent.context.$implicit])}),(function(e,n){var l=n.component;e(n,2,0,l.getTroopName(n.parent.context.$implicit)),e(n,3,0,yt(1,"",l.getTroop(n.parent.context.$implicit).size,""),qt(n,9).ngClassUntouched,qt(n,9).ngClassTouched,qt(n,9).ngClassPristine,qt(n,9).ngClassDirty,qt(n,9).ngClassValid,qt(n,9).ngClassInvalid,qt(n,9).ngClassPending),e(n,10,0,l.getTroop(n.parent.context.$implicit).size),e(n,14,0,yt(1,"",l.getTroop(n.parent.context.$implicit).size,""),qt(n,20).ngClassUntouched,qt(n,20).ngClassTouched,qt(n,20).ngClassPristine,qt(n,20).ngClassDirty,qt(n,20).ngClassValid,qt(n,20).ngClassInvalid,qt(n,20).ngClassPending),e(n,21,0,l.getTroop(n.parent.context.$implicit).size)}))}function uM(e){return gr(0,[(e()(),qs(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,rM)),ai(2,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){e(n,2,0,n.component.getTroop(n.context.$implicit).size>0)}),null)}function oM(e){return gr(0,[(e()(),qs(0,0,null,null,17,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.clearAll()&&t),t}),null,null)),(e()(),cr(-1,null,["clear all"])),(e()(),qs(4,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.selectAll()&&t),t}),null,null)),(e()(),cr(-1,null,["select all"])),(e()(),Qs(16777216,null,null,1,null,uM)),ai(7,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(8,0,null,null,9,"div",[],null,null,null,null,null)),(e()(),qs(9,0,null,null,1,"label",[["for","distanceInput"]],null,null,null,null,null)),(e()(),cr(-1,null,["distance: "])),(e()(),qs(11,0,null,null,6,"input",[["id","distanceInput"],["type","number"]],[[8,"min",0],[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,12)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,12).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,12)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,12)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,13).onChange(l.target.value)&&t),"input"===n&&(t=!1!==qt(e,13).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,13).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.expeditionDistance=l)&&t),t}),null,null)),ai(12,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(13,16384,null,0,gm,[gl,ol],null,null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,gm]),ai(15,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(17,16384,null,0,im,[[4,tm]],null,null)],(function(e,n){var l=n.component;e(n,7,0,l.getTroops(l.missionData.missionType)),e(n,15,0,l.expeditionDistance)}),(function(e,n){var l=n.component;e(n,11,0,yt(1,"",l.discoveredLand+10,""),yt(1,"",l.calculateMaxDistance(),""),qt(n,17).ngClassUntouched,qt(n,17).ngClassTouched,qt(n,17).ngClassPristine,qt(n,17).ngClassDirty,qt(n,17).ngClassValid,qt(n,17).ngClassInvalid,qt(n,17).ngClassPending)}))}function aM(e){return gr(0,[(e()(),qs(0,0,null,null,21,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"span",[["class","troopLabel"]],null,null,null,null,null)),(e()(),cr(-1,null,["Colonist:"])),(e()(),qs(3,0,null,null,6,"input",[["class","armyInput"],["min","0"],["type","number"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,4)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,4).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,4)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,4)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,5).onChange(l.target.value)&&t),"input"===n&&(t=!1!==qt(e,5).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,5).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.colonistsHolder=l)&&t),t}),null,null)),ai(4,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(5,16384,null,0,gm,[gl,ol],null,null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,gm]),ai(7,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(9,16384,null,0,im,[[4,tm]],null,null),(e()(),cr(10,null,["/",""])),(e()(),qs(11,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(12,0,null,null,9,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),cr(-1,null,[" 0 "])),(e()(),qs(14,0,null,null,6,"input",[["class","slider"],["min","0"],["type","range"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,15)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,15).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,15)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,15)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,16).onChange(l.target.value)&&t),"input"===n&&(t=!1!==qt(e,16).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,16).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.colonistsHolder=l)&&t),t}),null,null)),ai(15,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(16,16384,null,0,fm,[gl,ol],null,null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,fm]),ai(18,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(20,16384,null,0,im,[[4,tm]],null,null),(e()(),cr(21,null,[" "," "]))],(function(e,n){var l=n.component;e(n,7,0,l.colonistsHolder),e(n,18,0,l.colonistsHolder)}),(function(e,n){var l=n.component;e(n,3,0,yt(1,"",l.getFreeWorkers(),""),qt(n,9).ngClassUntouched,qt(n,9).ngClassTouched,qt(n,9).ngClassPristine,qt(n,9).ngClassDirty,qt(n,9).ngClassValid,qt(n,9).ngClassInvalid,qt(n,9).ngClassPending),e(n,10,0,l.getFreeWorkers()),e(n,14,0,yt(1,"",l.getFreeWorkers(),""),qt(n,20).ngClassUntouched,qt(n,20).ngClassTouched,qt(n,20).ngClassPristine,qt(n,20).ngClassDirty,qt(n,20).ngClassValid,qt(n,20).ngClassInvalid,qt(n,20).ngClassPending),e(n,21,0,l.getFreeWorkers())}))}function cM(e){return gr(0,[(e()(),qs(0,0,null,null,21,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"span",[["class","troopLabel"]],null,null,null,null,null)),(e()(),cr(2,null,["",":"])),(e()(),qs(3,0,null,null,6,"input",[["class","armyInput"],["min","0"],["type","number"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,4)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,4).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,4)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,4)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,5).onChange(l.target.value)&&t),"input"===n&&(t=!1!==qt(e,5).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,5).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.troopsHolder[e.context.$implicit]=l)&&t),t}),null,null)),ai(4,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(5,16384,null,0,gm,[gl,ol],null,null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,gm]),ai(7,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(9,16384,null,0,im,[[4,tm]],null,null),(e()(),cr(10,null,["/"," "])),(e()(),qs(11,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(12,0,null,null,9,"div",[["class","slidecontainer"]],null,null,null,null,null)),(e()(),cr(-1,null,[" 0 "])),(e()(),qs(14,0,null,null,6,"input",[["class","slider"],["min","0"],["type","range"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,15)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,15).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,15)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,15)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,16).onChange(l.target.value)&&t),"input"===n&&(t=!1!==qt(e,16).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,16).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.troopsHolder[e.context.$implicit]=l)&&t),t}),null,null)),ai(15,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(16,16384,null,0,fm,[gl,ol],null,null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,fm]),ai(18,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(20,16384,null,0,im,[[4,tm]],null,null),(e()(),cr(21,null,[" "," "]))],(function(e,n){var l=n.component;e(n,7,0,l.troopsHolder[n.context.$implicit]),e(n,18,0,l.troopsHolder[n.context.$implicit])}),(function(e,n){var l=n.component;e(n,2,0,l.getTroopName(n.context.$implicit)),e(n,3,0,yt(1,"",l.getTroop(n.context.$implicit).size,""),qt(n,9).ngClassUntouched,qt(n,9).ngClassTouched,qt(n,9).ngClassPristine,qt(n,9).ngClassDirty,qt(n,9).ngClassValid,qt(n,9).ngClassInvalid,qt(n,9).ngClassPending),e(n,10,0,l.getTroop(n.context.$implicit).size),e(n,14,0,yt(1,"",l.getTroop(n.context.$implicit).size,""),qt(n,20).ngClassUntouched,qt(n,20).ngClassTouched,qt(n,20).ngClassPristine,qt(n,20).ngClassDirty,qt(n,20).ngClassValid,qt(n,20).ngClassInvalid,qt(n,20).ngClassPending),e(n,21,0,l.getTroop(n.context.$implicit).size)}))}function hM(e){return gr(0,[(e()(),qs(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,cM)),ai(2,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,2,0,n.component.getSpyUnits())}),null)}function dM(e){return gr(0,[(e()(),qs(0,0,null,null,6,"div",[["class","stats"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["Stats"])),(e()(),qs(3,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(4,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(5,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(6,null,[" ","% success chance "]))],(function(e,n){e(n,5,0,"colonize","army/mission")}),(function(e,n){e(n,6,0,5*n.component.colonistsHolder)}))}function gM(e){return gr(0,[(e()(),qs(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(2,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(3,null,[" "," "]))],(function(e,n){e(n,2,0,n.component.getResourceName(n.context.$implicit.resource),"resources")}),(function(e,n){e(n,3,0,n.context.$implicit.amount)}))}function pM(e){return gr(0,[(e()(),qs(0,0,null,null,7,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(2,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),qs(3,0,null,null,4,"span",[],null,null,null,null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(5,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(6,{notAvailable:0}),(e()(),cr(7,null,[" "," "]))],(function(e,n){var l=n.component;e(n,2,0,l.getResourceName(n.context.$implicit.resource),"resources");var t=e(n,6,0,!l.hasResource(n.context.$implicit.resource,n.context.$implicit.amount*l.getUnitsNumber()));e(n,5,0,t)}),(function(e,n){e(n,7,0,n.context.$implicit.amount*n.component.getUnitsNumber())}))}function mM(e){return gr(0,[(e()(),qs(0,0,null,null,11,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["Cost per person"])),(e()(),qs(3,0,null,null,3,"div",[["id","costList"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,gM)),ai(5,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(7,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["Total cost"])),(e()(),qs(9,0,null,null,2,"div",[["id","totalCostList"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,pM)),ai(11,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,5,0,l.getMissionCost(l.missionData.missionType)),e(n,11,0,l.getMissionCost(l.missionData.missionType))}),null)}function fM(e){return gr(0,[(e()(),qs(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(2,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(3,null,[" "," "]))],(function(e,n){e(n,2,0,n.component.getResourceName(n.context.$implicit.resource),"resources")}),(function(e,n){e(n,3,0,n.context.$implicit.amount*n.component.expeditionDistance)}))}function SM(e){return gr(0,[(e()(),qs(0,0,null,null,7,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(2,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),qs(3,0,null,null,4,"span",[],null,null,null,null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(5,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(6,{notAvailable:0}),(e()(),cr(7,null,[" "," "]))],(function(e,n){var l=n.component;e(n,2,0,l.getResourceName(n.context.$implicit.resource),"resources");var t=e(n,6,0,!l.hasResource(n.context.$implicit.resource,n.context.$implicit.amount*l.getUnitsNumber()*l.expeditionDistance));e(n,5,0,t)}),(function(e,n){var l=n.component;e(n,7,0,n.context.$implicit.amount*l.getUnitsNumber()*l.expeditionDistance)}))}function EM(e){return gr(0,[(e()(),qs(0,0,null,null,19,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["Cost per person"])),(e()(),qs(3,0,null,null,3,"div",[["id","costList"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,fM)),ai(5,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(7,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["Total cost"])),(e()(),qs(9,0,null,null,10,"div",[["id","totalCostList"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,SM)),ai(11,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(12,0,null,null,7,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(13,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(14,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),qs(15,0,null,null,4,"span",[],null,null,null,null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(17,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(18,{notAvailable:0}),(e()(),cr(-1,null,[" 1 "]))],(function(e,n){var l=n.component;e(n,5,0,l.getMissionCost(l.missionData.missionType)),e(n,11,0,l.getMissionCost(l.missionData.missionType)),e(n,14,0,"map","resources");var t=e(n,18,0,!l.hasResource(l.resources.MAP,1));e(n,17,0,t)}),null)}function vM(e){return gr(0,[(e()(),qs(0,0,null,null,7,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(2,114688,null,0,$p,[],{name:[0,"name"]},null),(e()(),qs(3,0,null,null,4,"span",[],null,null,null,null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(5,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(6,{notAvailable:0}),(e()(),cr(7,null,[""," /",""]))],(function(e,n){var l=n.component;e(n,2,0,"cargo");var t=e(n,6,0,l.getCargoUtilization()>l.getNavyCapacity());e(n,5,0,t)}),(function(e,n){var l=n.component;e(n,7,0,l.getCargoUtilization(),l.getNavyCapacity())}))}function RM(e){return gr(0,[(e()(),qs(0,0,null,null,24,"div",[["class","stats"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["Stats"])),(e()(),qs(3,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(4,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(5,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(6,null,[" ","% success chance "])),(e()(),qs(7,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(8,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(9,114688,null,0,$p,[],{name:[0,"name"]},null),(e()(),cr(10,null,[" ~"," estimated land "])),(e()(),qs(11,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(12,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(13,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(14,null,[" "," "])),(e()(),qs(15,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(16,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(17,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(18,null,[" "," "])),(e()(),qs(19,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(20,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(21,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(22,null,[" "," "])),(e()(),Qs(16777216,null,null,1,null,vM)),ai(24,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,5,0,"map","resources"),e(n,9,0,"land"),e(n,13,0,"attack","army"),e(n,17,0,"defense","army"),e(n,21,0,"speed","army"),e(n,24,0,l.isSeaLandMission())}),(function(e,n){var l=n.component;e(n,6,0,l.calculateExpeditionChance()),e(n,10,0,l.calculateExpeditionLand()),e(n,14,0,l.getUnitsStrength()),e(n,18,0,l.getUnitsDefense()),e(n,22,0,l.getSeaUnitsSpeed())}))}function OM(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(1,null,["",""]))],null,(function(e,n){e(n,1,0,n.component.getSeaUnitsSpeed())}))}function bM(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(1,null,["",""]))],null,(function(e,n){e(n,1,0,n.component.getUnitsSpeed())}))}function TM(e){return gr(0,[(e()(),qs(0,0,null,null,7,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(2,114688,null,0,$p,[],{name:[0,"name"]},null),(e()(),qs(3,0,null,null,4,"span",[],null,null,null,null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(5,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(6,{notAvailable:0}),(e()(),cr(7,null,[""," /",""]))],(function(e,n){var l=n.component;e(n,2,0,"cargo");var t=e(n,6,0,l.getCargoUtilization()>l.getNavyCapacity());e(n,5,0,t)}),(function(e,n){var l=n.component;e(n,7,0,l.getCargoUtilization(),l.getNavyCapacity())}))}function CM(e){return gr(0,[(e()(),qs(0,0,null,null,19,"div",[["class","stats"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["Stats"])),(e()(),qs(3,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(4,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(5,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(6,null,[" "," "])),(e()(),qs(7,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(8,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(9,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(10,null,[" "," "])),(e()(),qs(11,0,null,null,6,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(12,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(13,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),Qs(16777216,null,null,1,null,OM)),ai(15,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,bM)),ai(17,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,TM)),ai(19,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,5,0,"attack","army"),e(n,9,0,"defense","army"),e(n,13,0,"speed","army"),e(n,15,0,l.isSeaLandMission()),e(n,17,0,!l.isSeaLandMission()),e(n,19,0,l.isSeaLandMission())}),(function(e,n){var l=n.component;e(n,6,0,l.getUnitsStrength()),e(n,10,0,l.getUnitsDefense())}))}function IM(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[["class","rejectionReason"]],null,null,null,null,null)),(e()(),cr(1,null,[" "," "]))],null,(function(e,n){e(n,1,0,n.component.cannotStartReason)}))}function yM(e){return gr(0,[(e()(),qs(0,0,null,null,74,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),cr(-1,null,["New mission"])),(e()(),qs(3,0,null,null,11,"div",[["id","regions"]],null,null,null,null,null)),(e()(),qs(4,0,null,null,8,"div",[["class","region"]],null,null,null,null,null)),(e()(),qs(5,0,null,null,1,"span",[["class","center"]],null,null,null,null,null)),(e()(),cr(-1,null,["origin"])),(e()(),Qs(16777216,null,null,1,null,Uk)),ai(8,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,Hk)),ai(10,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(11,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.changeOrigin()&&t),t}),null,null)),(e()(),cr(-1,null,["change"])),(e()(),Qs(16777216,null,null,1,null,Wk)),ai(14,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(15,0,null,null,28,"div",[["id","missions"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,Vk)),ai(17,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,zk)),ai(19,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,Yk)),ai(21,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,$k)),ai(23,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,Kk)),ai(25,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,jk)),ai(27,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,Qk)),ai(29,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,qk)),ai(31,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,Xk)),ai(33,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,Zk)),ai(35,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,Jk)),ai(37,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,eM)),ai(39,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,nM)),ai(41,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,lM)),ai(43,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(44,0,null,null,20,"div",[["id","secondHalf"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,sM)),ai(46,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,oM)),ai(48,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,aM)),ai(50,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,hM)),ai(52,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(53,0,null,null,11,"div",[["id","bottomSection"]],null,null,null,null,null)),(e()(),qs(54,0,null,null,6,"div",[["id","costs"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,dM)),ai(56,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,mM)),ai(58,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,EM)),ai(60,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,RM)),ai(62,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,CM)),ai(64,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,IM)),ai(66,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(67,0,null,null,7,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),qs(68,0,null,null,4,"button",[["id","startButton"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.start()&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(70,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(71,{inactive:0}),(e()(),cr(72,null,["",""])),(e()(),qs(73,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.closeModal()&&t),t}),null,null)),(e()(),cr(-1,null,["Cancel"]))],(function(e,n){var l=n.component;e(n,8,0,l.missionData.originRegion),e(n,10,0,!l.missionData.originRegion),e(n,14,0,!l.missionData.targetSeaEvent&&l.missionData.missionType!==l.missions.EXPEDITION),e(n,17,0,l.isMissionAllowed(l.missions.COLONIZE)),e(n,19,0,l.isMissionAllowed(l.missions.MOVE)),e(n,21,0,l.isMissionAllowed(l.missions.SPY)),e(n,23,0,l.isMissionAllowed(l.missions.PLUNDER)),e(n,25,0,l.isMissionAllowed(l.missions.CONQUER)),e(n,27,0,l.isMissionAllowed(l.missions.SEA_MOVE)),e(n,29,0,l.isMissionAllowed(l.missions.SEA_PLUNDER)),e(n,31,0,l.isMissionAllowed(l.missions.SEA_CONQUER)),e(n,33,0,l.isMissionAllowed(l.missions.FISHING)),e(n,35,0,l.isMissionAllowed(l.missions.HUNTING)),e(n,37,0,l.isMissionAllowed(l.missions.TREASURE)),e(n,39,0,l.isMissionAllowed(l.missions.CARTOGRAPHY)),e(n,41,0,l.isMissionAllowed(l.missions.SEA_BATTLE)),e(n,43,0,l.isMissionAllowed(l.missions.EXPEDITION)),e(n,46,0,l.missionData.originRegion&&l.missionData.missionType!==l.missions.SPY&&l.missionData.missionType!==l.missions.COLONIZE&&l.missionData.missionType!==l.missions.EXPEDITION),e(n,48,0,l.missionData.originRegion&&l.missionData.missionType===l.missions.EXPEDITION),e(n,50,0,l.missionData.originRegion&&l.missionData.missionType===l.missions.COLONIZE),e(n,52,0,l.missionData.originRegion&&l.missionData.missionType===l.missions.SPY),e(n,56,0,l.missionData.missionType===l.missions.COLONIZE),e(n,58,0,l.missionData.missionType!==l.missions.EXPEDITION),e(n,60,0,l.missionData.missionType===l.missions.EXPEDITION),e(n,62,0,l.missionData.missionType===l.missions.EXPEDITION),e(n,64,0,l.missionData.missionType!==l.missions.COLONIZE&&l.missionData.missionType!==l.missions.EXPEDITION),e(n,66,0,!l.canStart());var t=e(n,71,0,!l.canStart());e(n,70,0,t)}),(function(e,n){e(n,72,0,n.component.getMissionName())}))}function AM(e){return gr(0,[(e()(),qs(0,0,null,null,5,"app-modal",[["id","mission-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==qt(e,1).onKeydownHandler(l)&&t),t}),xP,PP)),ai(1,4440064,null,0,wP,[gl,ol,pf],{id:[0,"id"]},null),(e()(),qs(2,0,null,0,2,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,yM)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(5,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,1,0,"mission-modal"),e(n,4,0,l.missionData)}),null)}class NM{constructor(e,n,l,t){this.modalService=e,this.happinessService=n,this.resourceService=l,this.gameService=t,this.food=1,this.clothes=0,this.beer=0,this.wine=0,this.jewelry=0,this.duration=1,this.happiness=5,e.registerForOnOpen().subscribe(e=>{e===ju.FESTIVAL&&(this.food=Math.ceil(5*this.resourceService.getTotalPeople()/2),this.clothes=0,this.beer=0,this.wine=0,this.jewelry=0,this.happiness=1,this.duration=5)})}ngOnInit(){}onKeydownHandler(e){"none"!==document.getElementById("festival-modal").style.display&&(e.preventDefault(),this.modalService.close(ju.FESTIVAL))}closeModal(){this.modalService.close(ju.FESTIVAL)}startFestival(){this.canStart(!0)&&(this.getCost().forEach(e=>{this.resourceService.decreaseResource(e.resource,e.amount,"Festival",!0)}),this.happinessService.addHappinessEffect(0,Fu.FESTIVAL,this.happiness,this.duration),this.modalService.close(ju.FESTIVAL))}getDuration(){return this.duration}getPoints(){return Math.floor((2*this.food+500*this.clothes+125*this.wine+75*this.beer+300*this.jewelry*25)/this.resourceService.getTotalPeople())}getHappiness(){return this.happiness}getCost(){const e=[];return this.food>0&&e.push({resource:bu.FOOD,amount:this.food}),this.clothes>0&&e.push({resource:bu.CLOTHES,amount:this.clothes}),this.beer>0&&e.push({resource:bu.BEER,amount:this.beer}),this.wine>0&&e.push({resource:bu.WINE,amount:this.wine}),this.jewelry>0&&e.push({resource:bu.JEWELRY,amount:this.jewelry}),e}getMaxHappinessThreshold(){return this.gameService.isEnabled(Iu.JEWELRY)||this.resourceService.getResource(bu.JEWELRY).isVisible()?20:this.gameService.isEnabled(Iu.ALCOHOL)?15:this.gameService.isEnabled(Iu.TAILOR)?10:4}canStart(e=!1){if(this.calculateStats(),this.happiness<1)return e&&this.modalService.info("Happiness must be at least 1"),!1;if(this.duration<1)return e&&this.modalService.info("Duration must be at least 1"),!1;let n=!0;return this.getCost().forEach(e=>{n&&(n=0===this.resourceService.hasResource(e.resource,e.amount,"Festival",!0))}),!n&&e&&this.modalService.info("Not enough resources!"),n}getResourceName(e){return Uu.prepareResourceName(e)}getNutrition(){return this.resourceService.getFoodValue("Festival",!0)}getMaxClothes(){return this.resourceService.getResource(bu.CLOTHES).amount}getMaxWine(){return this.resourceService.getResource(bu.WINE).amount}getMaxBeer(){return this.resourceService.getResource(bu.BEER).amount}getMaxJewelry(){return this.resourceService.getResource(bu.JEWELRY).amount}isClothesEnabled(){return this.gameService.isEnabled(Iu.TAILOR)}isAlcoholEnabled(){return this.gameService.isEnabled(Iu.ALCOHOL)}isJewelryEnabled(){return this.gameService.isEnabled(Iu.JEWELRY)||this.resourceService.getResource(bu.JEWELRY).isVisible()}calculateStats(){this.duration=Math.floor(this.getPoints()/this.happiness)}hasResource(e,n){return 0===this.resourceService.hasResource(e,n,"Festival",!0)}}var _M=Jl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;font-size:1.2em;max-width:750px;margin:160px auto auto}#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;font-weight:800}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px;white-space:nowrap}.slidecontainer[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;margin-top:3px;width:300px}.slider[_ngcontent-%COMP%]{-webkit-appearance:none;width:100%;height:10px;border-radius:5px;background:var(--passive-colour);outline:0;opacity:.7;-webkit-transition:opacity .2s;transition:opacity .2s}.slider[_ngcontent-%COMP%]:hover{opacity:1}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:15px;height:15px;border-radius:50%;background:var(--active-colour);cursor:pointer}.label[_ngcontent-%COMP%]{display:inline-block;width:150px}.input[_ngcontent-%COMP%]{width:10ch}.inactive[_ngcontent-%COMP%]{color:#5f5f5f}.iconsLine[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;margin-right:7px}hr[_ngcontent-%COMP%]{border-color:#000;width:50%}.notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}"]],data:{}});function wM(e){return gr(0,[(e()(),qs(0,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"span",[["class","label"]],null,null,null,null,null)),(e()(),cr(-1,null,["Clothes"])),(e()(),qs(3,0,null,null,6,"input",[["class","input"],["min","0"],["type","number"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"ngModelChange"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,4)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,4).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,4)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,4)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,5).onChange(l.target.value)&&t),"input"===n&&(t=!1!==qt(e,5).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,5).onTouched()&&t),"input"===n&&(t=!1!==i.calculateStats()&&t),"ngModelChange"===n&&(t=!1!==(i.clothes=l)&&t),t}),null,null)),ai(4,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(5,16384,null,0,gm,[gl,ol],null,null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,gm]),ai(7,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(9,16384,null,0,im,[[4,tm]],null,null),(e()(),cr(10,null,["/"," "]))],(function(e,n){e(n,7,0,n.component.clothes)}),(function(e,n){var l=n.component;e(n,3,0,yt(1,"",l.getMaxClothes(),""),qt(n,9).ngClassUntouched,qt(n,9).ngClassTouched,qt(n,9).ngClassPristine,qt(n,9).ngClassDirty,qt(n,9).ngClassValid,qt(n,9).ngClassInvalid,qt(n,9).ngClassPending),e(n,10,0,l.getMaxClothes())}))}function PM(e){return gr(0,[(e()(),qs(0,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"span",[["class","label"]],null,null,null,null,null)),(e()(),cr(-1,null,["Beer"])),(e()(),qs(3,0,null,null,6,"input",[["class","input"],["min","0"],["type","number"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"ngModelChange"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,4)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,4).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,4)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,4)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,5).onChange(l.target.value)&&t),"input"===n&&(t=!1!==qt(e,5).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,5).onTouched()&&t),"input"===n&&(t=!1!==i.calculateStats()&&t),"ngModelChange"===n&&(t=!1!==(i.beer=l)&&t),t}),null,null)),ai(4,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(5,16384,null,0,gm,[gl,ol],null,null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,gm]),ai(7,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(9,16384,null,0,im,[[4,tm]],null,null),(e()(),cr(10,null,["/"," "]))],(function(e,n){e(n,7,0,n.component.beer)}),(function(e,n){var l=n.component;e(n,3,0,yt(1,"",l.getMaxBeer(),""),qt(n,9).ngClassUntouched,qt(n,9).ngClassTouched,qt(n,9).ngClassPristine,qt(n,9).ngClassDirty,qt(n,9).ngClassValid,qt(n,9).ngClassInvalid,qt(n,9).ngClassPending),e(n,10,0,l.getMaxBeer())}))}function xM(e){return gr(0,[(e()(),qs(0,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"span",[["class","label"]],null,null,null,null,null)),(e()(),cr(-1,null,["Wine"])),(e()(),qs(3,0,null,null,6,"input",[["class","input"],["min","0"],["type","number"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"ngModelChange"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,4)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,4).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,4)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,4)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,5).onChange(l.target.value)&&t),"input"===n&&(t=!1!==qt(e,5).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,5).onTouched()&&t),"input"===n&&(t=!1!==i.calculateStats()&&t),"ngModelChange"===n&&(t=!1!==(i.wine=l)&&t),t}),null,null)),ai(4,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(5,16384,null,0,gm,[gl,ol],null,null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,gm]),ai(7,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(9,16384,null,0,im,[[4,tm]],null,null),(e()(),cr(10,null,["/"," "]))],(function(e,n){e(n,7,0,n.component.wine)}),(function(e,n){var l=n.component;e(n,3,0,yt(1,"",l.getMaxWine(),""),qt(n,9).ngClassUntouched,qt(n,9).ngClassTouched,qt(n,9).ngClassPristine,qt(n,9).ngClassDirty,qt(n,9).ngClassValid,qt(n,9).ngClassInvalid,qt(n,9).ngClassPending),e(n,10,0,l.getMaxWine())}))}function kM(e){return gr(0,[(e()(),qs(0,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"span",[["class","label"]],null,null,null,null,null)),(e()(),cr(-1,null,["Jewelry"])),(e()(),qs(3,0,null,null,6,"input",[["class","input"],["min","0"],["type","number"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"ngModelChange"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,4)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,4).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,4)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,4)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,5).onChange(l.target.value)&&t),"input"===n&&(t=!1!==qt(e,5).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,5).onTouched()&&t),"input"===n&&(t=!1!==i.calculateStats()&&t),"ngModelChange"===n&&(t=!1!==(i.jewelry=l)&&t),t}),null,null)),ai(4,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(5,16384,null,0,gm,[gl,ol],null,null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,gm]),ai(7,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(9,16384,null,0,im,[[4,tm]],null,null),(e()(),cr(10,null,["/"," "]))],(function(e,n){e(n,7,0,n.component.jewelry)}),(function(e,n){var l=n.component;e(n,3,0,yt(1,"",l.getMaxJewelry(),""),qt(n,9).ngClassUntouched,qt(n,9).ngClassTouched,qt(n,9).ngClassPristine,qt(n,9).ngClassDirty,qt(n,9).ngClassValid,qt(n,9).ngClassInvalid,qt(n,9).ngClassPending),e(n,10,0,l.getMaxJewelry())}))}function MM(e){return gr(0,[(e()(),qs(0,0,null,null,8,"span",[["class","icon"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(2,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),cr(-1,null,[" \xa0"])),(e()(),qs(4,0,null,null,4,"span",[],null,null,null,null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(6,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(7,{notMet:0}),(e()(),cr(8,null,["",""]))],(function(e,n){var l=n.component;e(n,2,0,l.getResourceName(n.context.$implicit.resource),"resources",l.getResourceName(n.context.$implicit.resource));var t=e(n,7,0,!l.hasResource(n.context.$implicit.resource,n.context.$implicit.amount));e(n,6,0,t)}),(function(e,n){e(n,8,0,n.context.$implicit.amount)}))}function DM(e){return gr(0,[(e()(),qs(0,0,null,null,47,"app-modal",[["id","festival-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==qt(e,1).onKeydownHandler(l)&&t),t}),xP,PP)),ai(1,4440064,null,0,wP,[gl,ol,pf],{id:[0,"id"]},null),(e()(),qs(2,0,null,0,44,"div",[["class","modal"]],null,null,null,null,null)),(e()(),qs(3,0,null,null,43,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),qs(4,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),cr(-1,null,["Festival preparations"])),(e()(),qs(6,0,null,null,1,"span",[["id","text"]],null,null,null,null,null)),(e()(),cr(-1,null,["\xa0"])),(e()(),qs(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(9,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),qs(10,0,null,null,1,"span",[["class","label"]],null,null,null,null,null)),(e()(),cr(-1,null,["Food"])),(e()(),qs(12,0,null,null,6,"input",[["class","input"],["min","1"],["type","number"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"ngModelChange"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,13)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,13).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,13)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,13)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,14).onChange(l.target.value)&&t),"input"===n&&(t=!1!==qt(e,14).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,14).onTouched()&&t),"input"===n&&(t=!1!==i.calculateStats()&&t),"ngModelChange"===n&&(t=!1!==(i.food=l)&&t),t}),null,null)),ai(13,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(14,16384,null,0,gm,[gl,ol],null,null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,gm]),ai(16,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(18,16384,null,0,im,[[4,tm]],null,null),(e()(),cr(19,null,["/"," "])),(e()(),Qs(16777216,null,null,1,null,wM)),ai(21,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,PM)),ai(23,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,xM)),ai(25,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,kM)),ai(27,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(28,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),qs(29,0,null,null,3,"div",[["id","costList"]],null,null,null,null,null)),(e()(),qs(30,0,null,null,2,"div",[["class","iconsLine"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,MM)),ai(32,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(33,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(34,null,["Festival Points: ",""])),(e()(),qs(35,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(36,null,["Festival happiness: ",""])),(e()(),qs(37,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(38,null,["Festival duration: "," days"])),(e()(),qs(39,0,null,null,7,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),qs(40,0,null,null,4,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.startFestival()&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(42,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(43,{inactive:0}),(e()(),cr(-1,null,["Start festival"])),(e()(),qs(45,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.closeModal()&&t),t}),null,null)),(e()(),cr(-1,null,["Cancel"])),(e()(),qs(47,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,1,0,"festival-modal"),e(n,16,0,l.food),e(n,21,0,l.isClothesEnabled()),e(n,23,0,l.isAlcoholEnabled()),e(n,25,0,l.isAlcoholEnabled()),e(n,27,0,l.isJewelryEnabled()),e(n,32,0,l.getCost());var t=e(n,43,0,!l.canStart());e(n,42,0,t)}),(function(e,n){var l=n.component;e(n,12,0,yt(1,"",l.getNutrition(),""),qt(n,18).ngClassUntouched,qt(n,18).ngClassTouched,qt(n,18).ngClassPristine,qt(n,18).ngClassDirty,qt(n,18).ngClassValid,qt(n,18).ngClassInvalid,qt(n,18).ngClassPending),e(n,19,0,l.getNutrition()),e(n,34,0,l.getPoints()),e(n,36,0,l.getHappiness()),e(n,38,0,l.getDuration())}))}class LM{constructor(e,n){this.modalService=e,this.resourcesService=n}ngOnInit(){this.modalService.registerForValue().subscribe(e=>{e&&void 0!==e.id&&(this.offer=e,this.value=this.offer.amount,this.inputRef&&(this.inputRef.nativeElement.style.width=this.value.toString().length+1+"ch"))})}ok(){this.checkValue(this.value),this.modalService.sendValueInput(Number(this.value)),this.modalService.close(ju.MARKET),this.offer=null}cancel(){this.modalService.sendValueInput(null),this.offer=null,this.modalService.close(ju.MARKET)}onKeydownHandler(e){"none"!==document.getElementById("market-modal").style.display&&(e.preventDefault(),this.ok())}getResourceName(e){return bu[e]}calculatePrice(){let e=this.value;return this.offer.amount<e&&(e=this.offer.amount),this.offer.buy?Math.ceil(e/this.offer.amount*this.offer.price):Math.floor(e/this.offer.amount*this.offer.price)}checkValue(e){if(e&&!isNaN(e)){if(this.offer.amount>=e)return!0;this.inputRef.nativeElement.value=this.offer.amount,this.value=this.offer.amount}return!1}getResourceAmount(){return this.resourcesService.getResource(this.offer.resource).amount}getResourceLimit(){return this.resourcesService.getResource(this.offer.resource).limit}}var FM=Jl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;font-size:1.2em}#title[_ngcontent-%COMP%]{font-size:1.5em;margin-bottom:5px}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}#input[_ngcontent-%COMP%]{display:inline-block;width:3ch;font-size:1em}app-icon[_ngcontent-%COMP%]{display:inline-block;margin:0 3px}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}"]],data:{}});function UM(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["buy"]))],null,null)}function HM(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["sell"]))],null,null)}function GM(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["BUY"]))],null,null)}function BM(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["SELL"]))],null,null)}function WM(e){return gr(0,[(e()(),qs(0,0,null,null,35,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),cr(-1,null,["Market offer"])),(e()(),qs(3,0,null,null,9,"span",[["class","icon"],["id","text"]],null,null,null,null,null)),(e()(),cr(-1,null,["How many "])),(e()(),qs(5,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(6,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(7,null,["(","/",") would you like to "])),(e()(),Qs(16777216,null,null,1,null,UM)),ai(9,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,HM)),ai(11,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),cr(-1,null,["?"])),(e()(),qs(13,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(14,0,null,null,12,"span",[["class","icon"]],null,null,null,null,null)),(e()(),qs(15,0,[[1,0],["input",1]],null,5,"input",[["id","input"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,16)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,16).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,16)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,16)._compositionEnd(l.target.value)&&t),"ngModelChange"===n&&(t=!1!==i.checkValue(l)&&t),"ngModelChange"===n&&(t=!1!==(i.value=l)&&t),t}),null,null)),ai(16,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),hi(1024,null,qp,(function(e){return[e]}),[Jp]),ai(18,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(20,16384,null,0,im,[[4,tm]],null,null),(e()(),cr(21,null,["/"," "])),(e()(),qs(22,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(23,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(24,null,[" for "," "])),(e()(),qs(25,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(26,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),qs(27,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(28,0,null,null,7,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),qs(29,0,null,null,4,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.ok()&&t),t}),null,null)),(e()(),Qs(16777216,null,null,1,null,GM)),ai(31,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,BM)),ai(33,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(34,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.cancel()&&t),t}),null,null)),(e()(),cr(-1,null,["CANCEL"]))],(function(e,n){var l=n.component;e(n,6,0,l.getResourceName(l.offer.resource),"resources"),e(n,9,0,l.offer.buy),e(n,11,0,!l.offer.buy),e(n,18,0,l.value),e(n,23,0,l.getResourceName(l.offer.resource),"resources"),e(n,26,0,"coins","resources"),e(n,31,0,l.offer.buy),e(n,33,0,!l.offer.buy)}),(function(e,n){var l=n.component;e(n,7,0,l.getResourceAmount(),l.getResourceLimit()),e(n,15,0,qt(n,20).ngClassUntouched,qt(n,20).ngClassTouched,qt(n,20).ngClassPristine,qt(n,20).ngClassDirty,qt(n,20).ngClassValid,qt(n,20).ngClassInvalid,qt(n,20).ngClassPending),e(n,21,0,l.offer.amount),e(n,24,0,l.calculatePrice())}))}function VM(e){return gr(0,[nr(671088640,1,{inputRef:0}),(e()(),qs(1,0,null,null,5,"app-modal",[["id","market-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==qt(e,2).onKeydownHandler(l)&&t),t}),xP,PP)),ai(2,4440064,null,0,wP,[gl,ol,pf],{id:[0,"id"]},null),(e()(),qs(3,0,null,0,2,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,WM)),ai(5,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(6,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,2,0,"market-modal"),e(n,5,0,l.offer)}),null)}class zM{constructor(e,n,l){this.servicesService=e,this.modalService=n,this.resourcesService=l,this.modalService.registerForBuilding().subscribe(e=>{this.building=e,setTimeout((function(){const e=window.document.getElementsByClassName("textInput").item(0);e&&e.select()}),10)})}ngOnInit(){}ok(){this.modalService.close(ju.WORK_MANAGEMENT)}cancel(){this.modalService.close(ju.WORK_MANAGEMENT)}stop(){this.building.isWorking()?this.building.stopProduction():this.building.startProduction()||this.modalService.info("Cannot unlock production of "+this.building.getName()+". Number of free workers: "+this.resourcesService.getPeople())}getBuildingName(){return Uu.prepareBuildingName(this.building.getBuildingType())}getResourceName(e){return Uu.prepareResourceName(e)}getResource(e){return this.resourcesService.getResource(e)}onKeydownHandler(){"none"!==document.getElementById("work-management-modal").style.display&&(event.preventDefault(),this.ok())}isCoins(e){return e===bu.COINS}applyToAll(){const e=yo.getBuildingRegion(this.building.getBuildingType());this.servicesService.getServiceByRegion(e).getBuildings().filter(e=>e.getBuildingType()===this.building.getBuildingType()).forEach(e=>e.setWorkSettings(rE.clone(this.building.getWorkSettings())))}}var YM=Jl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{text-align:center;font-size:1.2em}input[_ngcontent-%COMP%]:not([type]), input[type=text][_ngcontent-%COMP%]{width:5ch}#rules[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}#input[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 50%;border-right:1px solid #000}#output[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 50%}.seasonalRule[_ngcontent-%COMP%]{margin-right:10px}"]],data:{}});function $M(e){return gr(0,[(e()(),qs(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),cr(-1,null,[" working"]))],null,null)}function KM(e){return gr(0,[(e()(),qs(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),cr(-1,null,[" not working"]))],null,null)}function jM(e){return gr(0,[(e()(),qs(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.stop()&&t),t}),null,null)),(e()(),cr(-1,null,["Hire worker"]))],null,null)}function QM(e){return gr(0,[(e()(),qs(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.stop()&&t),t}),null,null)),(e()(),cr(-1,null,["Fire worker"]))],null,null)}function qM(e){return gr(0,[(e()(),qs(0,0,null,null,8,"div",[["id","customRule"]],null,null,null,null,null)),(e()(),cr(1,null,[" "," "])),(e()(),qs(2,0,null,null,5,"input",[["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,3).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,3).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.building.getWorkSettings().customRuleEnabled=l)&&t),t}),null,null)),ai(3,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(5,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(7,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(8,0,null,null,0,"br",[],null,null,null,null,null))],(function(e,n){e(n,5,0,n.component.building.getWorkSettings().customRuleEnabled)}),(function(e,n){e(n,1,0,n.component.building.getWorkSettings().customRuleText),e(n,2,0,qt(n,7).ngClassUntouched,qt(n,7).ngClassTouched,qt(n,7).ngClassPristine,qt(n,7).ngClassDirty,qt(n,7).ngClassValid,qt(n,7).ngClassInvalid,qt(n,7).ngClassPending)}))}function XM(e){return gr(0,[(e()(),qs(0,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(2,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(-1,null,[" > "])),(e()(),qs(4,0,null,null,5,"input",[["class","textInput"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0;return"input"===n&&(t=!1!==qt(e,5)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,5).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,5)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,5)._compositionEnd(l.target.value)&&t),"ngModelChange"===n&&(t=!1!==(e.context.$implicit[1]=l)&&t),t}),null,null)),ai(5,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),hi(1024,null,qp,(function(e){return[e]}),[Jp]),ai(7,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(9,16384,null,0,im,[[4,tm]],null,null),(e()(),cr(10,null,[" ( ","/"," ) "]))],(function(e,n){e(n,2,0,n.component.getResourceName(n.context.$implicit[0]),"resources"),e(n,7,0,n.context.$implicit[1])}),(function(e,n){var l=n.component;e(n,4,0,qt(n,9).ngClassUntouched,qt(n,9).ngClassTouched,qt(n,9).ngClassPristine,qt(n,9).ngClassDirty,qt(n,9).ngClassValid,qt(n,9).ngClassInvalid,qt(n,9).ngClassPending),e(n,10,0,l.getResource(n.context.$implicit[0]).amount,l.getResource(n.context.$implicit[0]).limit)}))}function ZM(e){return gr(0,[(e()(),qs(0,0,null,null,3,"div",[["id","input"]],null,null,null,null,null)),(e()(),cr(-1,null,[" Input resources: "])),(e()(),Qs(16777216,null,null,1,null,XM)),ai(3,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,3,0,n.component.building.getWorkSettings().inputSettings)}),null)}function JM(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["\u221e"]))],null,null)}function eD(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(1,null,["",""]))],null,(function(e,n){e(n,1,0,n.component.getResource(n.parent.context.$implicit[0]).limit)}))}function nD(e){return gr(0,[(e()(),qs(0,0,null,null,7,"span",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,5,"input",[["class","textInput"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0;return"input"===n&&(t=!1!==qt(e,2)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,2).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,2)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,2)._compositionEnd(l.target.value)&&t),"ngModelChange"===n&&(t=!1!==(e.parent.context.$implicit[1]=l)&&t),t}),null,null)),ai(2,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),hi(1024,null,qp,(function(e){return[e]}),[Jp]),ai(4,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(6,16384,null,0,im,[[4,tm]],null,null),(e()(),cr(7,null,[" (",""]))],(function(e,n){e(n,4,0,n.parent.context.$implicit[1])}),(function(e,n){var l=n.component;e(n,1,0,qt(n,6).ngClassUntouched,qt(n,6).ngClassTouched,qt(n,6).ngClassPristine,qt(n,6).ngClassDirty,qt(n,6).ngClassValid,qt(n,6).ngClassInvalid,qt(n,6).ngClassPending),e(n,7,0,l.getResource(n.parent.context.$implicit[0]).amount)}))}function lD(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["\u221e"]))],null,null)}function tD(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(1,null,["",""]))],null,(function(e,n){e(n,1,0,n.component.getResource(n.parent.context.$implicit[0]).limit)}))}function iD(e){return gr(0,[(e()(),qs(0,0,null,null,23,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(2,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(-1,null,[" < "])),(e()(),Qs(16777216,null,null,1,null,JM)),ai(5,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,eD)),ai(7,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,nD)),ai(9,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),cr(-1,null,[" / "])),(e()(),Qs(16777216,null,null,1,null,lD)),ai(12,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,tD)),ai(14,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),cr(-1,null,[") "])),(e()(),qs(16,0,null,null,5,"input",[["id","full"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==qt(e,17).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,17).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(e.context.$implicit[2]=l)&&t),t}),null,null)),ai(17,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(19,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(21,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(22,0,null,null,1,"label",[["for","full"]],null,null,null,null,null)),(e()(),cr(-1,null,["full"]))],(function(e,n){var l=n.component;e(n,2,0,l.getResourceName(n.context.$implicit[0]),"resources"),e(n,5,0,n.context.$implicit[2]&&l.isCoins(n.context.$implicit[0])),e(n,7,0,n.context.$implicit[2]&&!l.isCoins(n.context.$implicit[0])),e(n,9,0,!n.context.$implicit[2]),e(n,12,0,l.isCoins(n.context.$implicit[0])),e(n,14,0,!l.isCoins(n.context.$implicit[0])),e(n,19,0,n.context.$implicit[2])}),(function(e,n){e(n,16,0,qt(n,21).ngClassUntouched,qt(n,21).ngClassTouched,qt(n,21).ngClassPristine,qt(n,21).ngClassDirty,qt(n,21).ngClassValid,qt(n,21).ngClassInvalid,qt(n,21).ngClassPending)}))}function sD(e){return gr(0,[(e()(),qs(0,0,null,null,3,"div",[["id","output"]],null,null,null,null,null)),(e()(),cr(-1,null,[" Output resources: "])),(e()(),Qs(16777216,null,null,1,null,iD)),ai(3,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,3,0,n.component.building.getWorkSettings().outputSettings)}),null)}function rD(e){return gr(0,[(e()(),qs(0,0,null,null,79,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),cr(2,null,[""," work management"])),(e()(),qs(3,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),cr(-1,null,[" status: "])),(e()(),Qs(16777216,null,null,1,null,$M)),ai(7,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,KM)),ai(9,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,jM)),ai(11,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,QM)),ai(13,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(14,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),cr(-1,null,[" work management on/off "])),(e()(),qs(16,0,null,null,5,"input",[["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,17).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,17).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.building.getWorkSettings().enabled=l)&&t),t}),null,null)),ai(17,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(19,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(21,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(22,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(23,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(24,0,null,null,40,"div",[["id","seasonalRules"]],null,null,null,null,null)),(e()(),qs(25,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),cr(-1,null,["Seasonal rules"])),(e()(),qs(27,0,null,null,8,"span",[["class","seasonalRule"]],null,null,null,null,null)),(e()(),qs(28,0,null,null,1,"label",[["for","spring"]],null,null,null,null,null)),(e()(),cr(-1,null,["Spring"])),(e()(),qs(30,0,null,null,5,"input",[["id","spring"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,31).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,31).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.building.getWorkSettings().seasons[0]=l)&&t),t}),null,null)),ai(31,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(33,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(35,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(36,0,null,null,8,"span",[["class","seasonalRule"]],null,null,null,null,null)),(e()(),qs(37,0,null,null,1,"label",[["for","summer"]],null,null,null,null,null)),(e()(),cr(-1,null,["Summer"])),(e()(),qs(39,0,null,null,5,"input",[["id","summer"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,40).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,40).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.building.getWorkSettings().seasons[1]=l)&&t),t}),null,null)),ai(40,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(42,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(44,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(45,0,null,null,8,"span",[["class","seasonalRule"]],null,null,null,null,null)),(e()(),qs(46,0,null,null,1,"label",[["for","autumn"]],null,null,null,null,null)),(e()(),cr(-1,null,["Autumn"])),(e()(),qs(48,0,null,null,5,"input",[["id","autumn"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,49).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,49).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.building.getWorkSettings().seasons[2]=l)&&t),t}),null,null)),ai(49,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(51,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(53,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(54,0,null,null,8,"span",[["class","seasonalRule"]],null,null,null,null,null)),(e()(),qs(55,0,null,null,1,"label",[["for","winter"]],null,null,null,null,null)),(e()(),cr(-1,null,["Winter"])),(e()(),qs(57,0,null,null,5,"input",[["id","winter"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,58).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,58).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.building.getWorkSettings().seasons[3]=l)&&t),t}),null,null)),ai(58,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(60,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(62,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(63,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(64,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,qM)),ai(66,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(67,0,null,null,5,"div",[["id","rules"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,ZM)),ai(69,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(70,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,sD)),ai(72,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(73,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(74,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(75,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),qs(76,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.applyToAll()&&t),t}),null,null)),(e()(),cr(-1,null,["Apply to all buildings of this type"])),(e()(),qs(78,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.ok()&&t),t}),null,null)),(e()(),cr(-1,null,["Close"]))],(function(e,n){var l=n.component;e(n,7,0,l.building.isWorking()),e(n,9,0,!l.building.isWorking()),e(n,11,0,!l.building.getWorkSettings().enabled&&!l.building.isWorking()),e(n,13,0,!l.building.getWorkSettings().enabled&&l.building.isWorking()),e(n,19,0,l.building.getWorkSettings().enabled),e(n,33,0,l.building.getWorkSettings().seasons[0]),e(n,42,0,l.building.getWorkSettings().seasons[1]),e(n,51,0,l.building.getWorkSettings().seasons[2]),e(n,60,0,l.building.getWorkSettings().seasons[3]),e(n,66,0,l.building.getWorkSettings().hasCustomRule),e(n,69,0,l.building.getWorkSettings().inputSettings),e(n,72,0,l.building.getWorkSettings().outputSettings)}),(function(e,n){e(n,2,0,n.component.getBuildingName()),e(n,16,0,qt(n,21).ngClassUntouched,qt(n,21).ngClassTouched,qt(n,21).ngClassPristine,qt(n,21).ngClassDirty,qt(n,21).ngClassValid,qt(n,21).ngClassInvalid,qt(n,21).ngClassPending),e(n,30,0,qt(n,35).ngClassUntouched,qt(n,35).ngClassTouched,qt(n,35).ngClassPristine,qt(n,35).ngClassDirty,qt(n,35).ngClassValid,qt(n,35).ngClassInvalid,qt(n,35).ngClassPending),e(n,39,0,qt(n,44).ngClassUntouched,qt(n,44).ngClassTouched,qt(n,44).ngClassPristine,qt(n,44).ngClassDirty,qt(n,44).ngClassValid,qt(n,44).ngClassInvalid,qt(n,44).ngClassPending),e(n,48,0,qt(n,53).ngClassUntouched,qt(n,53).ngClassTouched,qt(n,53).ngClassPristine,qt(n,53).ngClassDirty,qt(n,53).ngClassValid,qt(n,53).ngClassInvalid,qt(n,53).ngClassPending),e(n,57,0,qt(n,62).ngClassUntouched,qt(n,62).ngClassTouched,qt(n,62).ngClassPristine,qt(n,62).ngClassDirty,qt(n,62).ngClassValid,qt(n,62).ngClassInvalid,qt(n,62).ngClassPending)}))}function uD(e){return gr(0,[(e()(),qs(0,0,null,null,5,"app-modal",[["id","work-management-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==qt(e,1).onKeydownHandler(l)&&t),t}),xP,PP)),ai(1,4440064,null,0,wP,[gl,ol,pf],{id:[0,"id"]},null),(e()(),qs(2,0,null,0,2,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,rD)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(5,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,1,0,"work-management-modal"),e(n,4,0,l.building)}),null)}class oD{constructor(e,n,l,t){this.modalService=e,this.tutorialService=n,this.tickerService=l,this.text="",this.tutorialStages=[],this.currentStep=1,this.modalService.registerForTutorial().subscribe(e=>{this.tutorialStages=e,this.currentStep=1,t.destroyed||t.detectChanges()})}ngOnInit(){}ngAfterViewInit(){this.tutorialService.enableTutorials()}ok(){this.currentStep+=1,this.modalService.openTutorialModal(this.tutorialStages[this.currentStep-1].position)}skip(){this.modalService.open(ju.CONFIRM),this.modalService.setModalText("Are you sure you want to skip tutorial?<br>You can always start it again from the top right settings menu");const e=this.modalService.registerForConfirmation().subscribe(n=>{e.unsubscribe(),n&&(this.modalService.sendTutorialResponse(-1),this.tickerService.start(),this.modalService.close(ju.TUTORIAL))})}finish(){this.modalService.sendTutorialResponse(1),this.tickerService.start(),this.modalService.close(ju.TUTORIAL)}}var aD=Jl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}.space[_ngcontent-%COMP%]{height:20px}"]],data:{}});function cD(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.ok()&&t),t}),null,null)),(e()(),cr(-1,null,["NEXT"]))],null,null)}function hD(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.finish()&&t),t}),null,null)),(e()(),cr(-1,null,["FINISH"]))],null,null)}function dD(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.skip()&&t),t}),null,null)),(e()(),cr(-1,null,["SKIP TUTORIAL"]))],null,null)}function gD(e){return gr(0,[(e()(),qs(0,0,null,null,12,null,null,null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),cr(2,null,["Tutorial ",""])),(e()(),qs(3,0,null,null,0,"div",[["class","space"]],null,null,null,null,null)),(e()(),qs(4,0,null,null,0,"span",[["id","text"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),qs(5,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(6,0,null,null,0,"div",[["class","space"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,cD)),ai(8,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,hD)),ai(10,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,dD)),ai(12,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(0,null,null,0))],(function(e,n){var l=n.component;e(n,8,0,l.currentStep<l.tutorialStages.length),e(n,10,0,l.currentStep===l.tutorialStages.length),e(n,12,0,l.currentStep!==l.tutorialStages.length)}),(function(e,n){var l=n.component;e(n,2,0,l.currentStep+"/"+l.tutorialStages.length),e(n,4,0,l.tutorialStages[l.currentStep-1].text)}))}function pD(e){return gr(0,[(e()(),qs(0,0,null,null,6,"app-modal",[["id","tutorial-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==qt(e,1).onKeydownHandler(l)&&t),t}),xP,PP)),ai(1,4440064,null,0,wP,[gl,ol,pf],{id:[0,"id"]},null),(e()(),qs(2,0,null,0,3,"div",[["class","modal"]],null,null,null,null,null)),(e()(),qs(3,0,null,null,2,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,gD)),ai(5,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(6,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,1,0,"tutorial-modal"),e(n,5,0,l.tutorialStages.length>0)}),null)}class mD{constructor(e){this.modalService=e,this.messageNumber=ff.length,this.modalService.registerForCloseModal().subscribe(e=>this.messageNumber=ff.length),this.modalService.registerForOnOpen().subscribe(e=>{e!==ju.CHANGELOG&&e!==ju.ALL||(this.textRef.nativeElement.scrollTop=0)})}ngOnInit(){}ok(){this.modalService.close(ju.CHANGELOG)}hasPrevious(){return this.messageNumber>1}previous(){this.messageNumber>1&&(this.messageNumber-=1)}hasNext(){return this.messageNumber<ff.length}next(){this.messageNumber<ff.length&&(this.messageNumber+=1)}onKeydownHandler(e){"none"!==document.getElementById("changelog-modal").style.display&&(e.preventDefault(),this.ok())}getChange(){return ff[this.messageNumber-1]}}var fD=Jl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}#buttons[_ngcontent-%COMP%]{width:50%;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 33%}#header[_ngcontent-%COMP%]{font-size:1.5em;font-weight:700;margin-bottom:10px}#text[_ngcontent-%COMP%]{font-size:1.2em;overflow-y:auto}#text[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:0}button[disabled][_ngcontent-%COMP%]{color:#5a5a5a}button[disabled][_ngcontent-%COMP%]:active{background-color:var(--passive-colour);cursor:default}button[disabled][_ngcontent-%COMP%]:hover{cursor:default}"]],data:{}});function SD(e){return gr(0,[nr(671088640,1,{textRef:0}),(e()(),qs(1,0,null,null,14,"app-modal",[["id","changelog-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==qt(e,2).onKeydownHandler(l)&&t),t}),xP,PP)),ai(2,4440064,null,0,wP,[gl,ol,pf],{id:[0,"id"]},null),(e()(),qs(3,0,null,0,11,"div",[["class","modal"]],null,null,null,null,null)),(e()(),qs(4,0,null,null,10,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),qs(5,0,null,null,0,"span",[["id","header"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),qs(6,0,[[1,0],["text",1]],null,0,"div",[["id","text"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),qs(7,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(8,0,null,null,6,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),qs(9,0,null,null,1,"button",[],[[8,"disabled",0]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.previous()&&t),t}),null,null)),(e()(),cr(-1,null,["PREVIOUS"])),(e()(),qs(11,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.ok()&&t),t}),null,null)),(e()(),cr(-1,null,["CLOSE"])),(e()(),qs(13,0,null,null,1,"button",[],[[8,"disabled",0]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.next()&&t),t}),null,null)),(e()(),cr(-1,null,["NEXT"])),(e()(),qs(15,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){e(n,2,0,"changelog-modal")}),(function(e,n){var l=n.component;e(n,5,0,l.getChange().VERSION),e(n,6,0,l.getChange().MESSAGE),e(n,9,0,!l.hasPrevious()),e(n,13,0,!l.hasNext())}))}class ED{constructor(e){this.modalService=e,this.modalService.registerForResourceOptions().subscribe(e=>{this.resourceOptions=ef.clone(e),setTimeout((function(){window.document.getElementById("reserved").select()}),10)}),this.modalService.registerForCloseModal().subscribe(e=>{e!==ju.RESOURCE_MANAGEMENT&&e!==ju.ALL||this.modalService.sendResourceOptionsResponse(null)})}ngOnInit(){}ok(){this.modalService.sendResourceOptionsResponse(this.resourceOptions),this.modalService.close(ju.RESOURCE_MANAGEMENT)}cancel(){this.modalService.sendResourceOptionsResponse(null),this.modalService.close(ju.RESOURCE_MANAGEMENT)}onKeydownHandler(e){"none"!==document.getElementById("resource-management-modal").style.display&&(e.preventDefault(),this.ok())}getResourceName(){return Uu.prepareResourceName(this.resourceOptions.resource)}reset(){this.resourceOptions=new ef(this.resourceOptions.resource)}}var vD=Jl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}#title[_ngcontent-%COMP%]{font-size:1.3em;font-weight:700;margin-bottom:20px}input[type=number][_ngcontent-%COMP%]{width:6ch}#exceptions[_ngcontent-%COMP%]{width:100%;text-align:center}.subTitle[_ngcontent-%COMP%]{padding-top:10px;text-align:center}.entry[_ngcontent-%COMP%]{text-align:center}.exceptionEntry[_ngcontent-%COMP%]{display:inline-block;text-align:center;border:1px solid #000;min-width:100px;min-height:50px;padding:4px 4px 0;margin:5px}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}.hidden[_ngcontent-%COMP%]{visibility:hidden}.tradeLabel[_ngcontent-%COMP%]{display:inline-block;width:200px}"]],data:{}});function RD(e){return gr(0,[(e()(),qs(0,0,null,null,34,"div",[["class","exceptionEntry"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,7,"label",[],[[8,"htmlFor",0]],null,null,null,null)),(e()(),cr(2,null,["",""])),(e()(),qs(3,0,null,null,5,"input",[["type","checkbox"]],[[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==qt(e,4).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,4).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(e.context.$implicit.enabled=l)&&t),t}),null,null)),ai(4,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(6,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(8,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(9,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(10,0,null,null,9,"input",[["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var t=!0;return"input"===n&&(t=!1!==qt(e,11)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,11).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,11)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,11)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,12).onChange(l.target.value)&&t),"input"===n&&(t=!1!==qt(e,12).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,12).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(e.context.$implicit.reserved=l)&&t),t}),null,null)),ai(11,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(12,16384,null,0,gm,[gl,ol],null,null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,gm]),ai(14,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(16,16384,null,0,im,[[4,tm]],null,null),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(18,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(19,{hidden:0}),(e()(),qs(20,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(21,0,null,null,4,"label",[["for","percent"]],null,null,null,null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(23,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(24,{hidden:0}),(e()(),cr(-1,null,["reserve %"])),(e()(),qs(26,0,null,null,8,"input",[["id","percent"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0;return"change"===n&&(t=!1!==qt(e,27).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,27).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(e.context.$implicit.reservedPercent=l)&&t),t}),null,null)),ai(27,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(29,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(31,16384,null,0,im,[[4,tm]],null,null),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(33,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(34,{hidden:0})],(function(e,n){e(n,6,0,n.context.$implicit.enabled),e(n,14,0,n.context.$implicit.reserved);var l=e(n,19,0,!n.context.$implicit.enabled);e(n,18,0,l);var t=e(n,24,0,!n.context.$implicit.enabled);e(n,23,0,t),e(n,29,0,n.context.$implicit.reservedPercent);var i=e(n,34,0,!n.context.$implicit.enabled);e(n,33,0,i)}),(function(e,n){e(n,1,0,yt(1,"",n.context.$implicit.name,"")),e(n,2,0,n.context.$implicit.name),e(n,3,0,yt(1,"",n.context.$implicit.name,""),qt(n,8).ngClassUntouched,qt(n,8).ngClassTouched,qt(n,8).ngClassPristine,qt(n,8).ngClassDirty,qt(n,8).ngClassValid,qt(n,8).ngClassInvalid,qt(n,8).ngClassPending),e(n,10,0,qt(n,16).ngClassUntouched,qt(n,16).ngClassTouched,qt(n,16).ngClassPristine,qt(n,16).ngClassDirty,qt(n,16).ngClassValid,qt(n,16).ngClassInvalid,qt(n,16).ngClassPending),e(n,26,0,qt(n,31).ngClassUntouched,qt(n,31).ngClassTouched,qt(n,31).ngClassPristine,qt(n,31).ngClassDirty,qt(n,31).ngClassValid,qt(n,31).ngClassInvalid,qt(n,31).ngClassPending)}))}function OD(e){return gr(0,[(e()(),qs(0,0,null,null,123,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),cr(2,null,[""," management"])),(e()(),qs(3,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(5,0,null,null,19,"span",[["class","entry"]],null,null,null,null,null)),(e()(),qs(6,0,null,null,1,"label",[["for","reserved"]],null,null,null,null,null)),(e()(),cr(-1,null,["reserved amount: "])),(e()(),qs(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(9,0,null,null,6,"input",[["id","reserved"],["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,10)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,10).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,10)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,10)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,11).onChange(l.target.value)&&t),"input"===n&&(t=!1!==qt(e,11).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,11).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.resourceOptions.reserve=l)&&t),t}),null,null)),ai(10,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(11,16384,null,0,gm,[gl,ol],null,null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,gm]),ai(13,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(15,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(16,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(17,0,null,null,1,"label",[["for","mainPercent"]],null,null,null,null,null)),(e()(),cr(-1,null,["reserve %"])),(e()(),qs(19,0,null,null,5,"input",[["id","mainPercent"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,20).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,20).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.resourceOptions.reservePercent=l)&&t),t}),null,null)),ai(20,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(22,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(24,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(25,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(26,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(27,0,null,null,3,"span",[["class","subTitle"]],null,null,null,null,null)),(e()(),cr(-1,null,["Exceptions:"])),(e()(),qs(29,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),cr(-1,null,[" (will use it's own limit number if enabled)"])),(e()(),qs(31,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(32,0,null,null,2,"div",[["id","exceptions"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,RD)),ai(34,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(35,0,null,null,3,"div",[["class","subTitle"]],null,null,null,null,null)),(e()(),cr(-1,null,["Auto trade settings"])),(e()(),qs(37,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),cr(-1,null,["Auto trade will try to buy/sell until you have the specified amount of resource"])),(e()(),qs(39,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(40,0,null,null,76,"div",[],null,null,null,null,null)),(e()(),qs(41,0,null,null,1,"label",[["class","tradeLabel"],["for","autoSellEnabled"]],null,null,null,null,null)),(e()(),cr(-1,null,["Auto sell enabled"])),(e()(),qs(43,0,null,null,5,"input",[["id","autoSellEnabled"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,44).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,44).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.resourceOptions.autoTrade.autoSellEnabled=l)&&t),t}),null,null)),ai(44,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(46,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(48,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(49,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(50,0,null,null,17,"span",[],null,null,null,null,null)),(e()(),qs(51,0,null,null,1,"label",[["class","tradeLabel"],["for","autoSellAmount"]],null,null,null,null,null)),(e()(),cr(-1,null,["continuous sell limit"])),(e()(),qs(53,0,null,null,6,"input",[["id","autoSellAmount"],["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,54)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,54).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,54)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,54)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,55).onChange(l.target.value)&&t),"input"===n&&(t=!1!==qt(e,55).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,55).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.resourceOptions.autoTrade.autoSellAmount=l)&&t),t}),null,null)),ai(54,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(55,16384,null,0,gm,[gl,ol],null,null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,gm]),ai(57,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(59,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(60,0,null,null,5,"input",[["id","autoSellPercentage"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,61).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,61).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.resourceOptions.autoTrade.autoSellPercentage=l)&&t),t}),null,null)),ai(61,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(63,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(65,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(66,0,null,null,1,"label",[["for","autoSellPercentage"]],null,null,null,null,null)),(e()(),cr(-1,null,["%"])),(e()(),qs(68,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(69,0,null,null,1,"label",[["class","tradeLabel"],["for","autoSellOrder"]],null,null,null,null,null)),(e()(),cr(-1,null,["Fixed one time sell amount"])),(e()(),qs(71,0,null,null,6,"input",[["id","autoSellOrder"],["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,72)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,72).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,72)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,72)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,73).onChange(l.target.value)&&t),"input"===n&&(t=!1!==qt(e,73).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,73).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.resourceOptions.autoTrade.autoSellOrder=l)&&t),t}),null,null)),ai(72,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(73,16384,null,0,gm,[gl,ol],null,null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,gm]),ai(75,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(77,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(78,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(79,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(80,0,null,null,1,"label",[["class","tradeLabel"],["for","autoBuyEnabled"]],null,null,null,null,null)),(e()(),cr(-1,null,["Auto buy enabled"])),(e()(),qs(82,0,null,null,5,"input",[["id","autoBuyEnabled"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,83).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,83).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.resourceOptions.autoTrade.autoBuyEnabled=l)&&t),t}),null,null)),ai(83,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(85,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(87,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(88,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(89,0,null,null,17,"span",[],null,null,null,null,null)),(e()(),qs(90,0,null,null,1,"label",[["class","tradeLabel"],["for","autoBuyAmount"]],null,null,null,null,null)),(e()(),cr(-1,null,["continuous buy limit"])),(e()(),qs(92,0,null,null,6,"input",[["id","autoBuyAmount"],["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,93)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,93).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,93)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,93)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,94).onChange(l.target.value)&&t),"input"===n&&(t=!1!==qt(e,94).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,94).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.resourceOptions.autoTrade.autoBuyAmount=l)&&t),t}),null,null)),ai(93,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(94,16384,null,0,gm,[gl,ol],null,null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,gm]),ai(96,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(98,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(99,0,null,null,5,"input",[["id","autoBuyPercentage"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==qt(e,100).onChange(l.target.checked)&&t),"blur"===n&&(t=!1!==qt(e,100).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.resourceOptions.autoTrade.autoBuyPercentage=l)&&t),t}),null,null)),ai(100,16384,null,0,Xp,[gl,ol],null,null),hi(1024,null,qp,(function(e){return[e]}),[Xp]),ai(102,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(104,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(105,0,null,null,1,"label",[["for","autoBuyPercentage"]],null,null,null,null,null)),(e()(),cr(-1,null,["%"])),(e()(),qs(107,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(108,0,null,null,1,"label",[["class","tradeLabel"],["for","autoBuyOrder"]],null,null,null,null,null)),(e()(),cr(-1,null,["Fixed one time buy amount"])),(e()(),qs(110,0,null,null,6,"input",[["id","autoBuyOrder"],["min","0"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,111)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,111).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,111)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,111)._compositionEnd(l.target.value)&&t),"change"===n&&(t=!1!==qt(e,112).onChange(l.target.value)&&t),"input"===n&&(t=!1!==qt(e,112).onChange(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,112).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.resourceOptions.autoTrade.autoBuyOrder=l)&&t),t}),null,null)),ai(111,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),ai(112,16384,null,0,gm,[gl,ol],null,null),hi(1024,null,qp,(function(e,n){return[e,n]}),[Jp,gm]),ai(114,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(116,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(117,0,null,null,6,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),qs(118,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.ok()&&t),t}),null,null)),(e()(),cr(-1,null,["SAVE"])),(e()(),qs(120,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.cancel()&&t),t}),null,null)),(e()(),cr(-1,null,["CANCEL"])),(e()(),qs(122,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.reset()&&t),t}),null,null)),(e()(),cr(-1,null,["RESET"]))],(function(e,n){var l=n.component;e(n,13,0,l.resourceOptions.reserve),e(n,22,0,l.resourceOptions.reservePercent),e(n,34,0,l.resourceOptions.consumers),e(n,46,0,l.resourceOptions.autoTrade.autoSellEnabled),e(n,57,0,l.resourceOptions.autoTrade.autoSellAmount),e(n,63,0,l.resourceOptions.autoTrade.autoSellPercentage),e(n,75,0,l.resourceOptions.autoTrade.autoSellOrder),e(n,85,0,l.resourceOptions.autoTrade.autoBuyEnabled),e(n,96,0,l.resourceOptions.autoTrade.autoBuyAmount),e(n,102,0,l.resourceOptions.autoTrade.autoBuyPercentage),e(n,114,0,l.resourceOptions.autoTrade.autoBuyOrder)}),(function(e,n){e(n,2,0,n.component.getResourceName()),e(n,9,0,qt(n,15).ngClassUntouched,qt(n,15).ngClassTouched,qt(n,15).ngClassPristine,qt(n,15).ngClassDirty,qt(n,15).ngClassValid,qt(n,15).ngClassInvalid,qt(n,15).ngClassPending),e(n,19,0,qt(n,24).ngClassUntouched,qt(n,24).ngClassTouched,qt(n,24).ngClassPristine,qt(n,24).ngClassDirty,qt(n,24).ngClassValid,qt(n,24).ngClassInvalid,qt(n,24).ngClassPending),e(n,43,0,qt(n,48).ngClassUntouched,qt(n,48).ngClassTouched,qt(n,48).ngClassPristine,qt(n,48).ngClassDirty,qt(n,48).ngClassValid,qt(n,48).ngClassInvalid,qt(n,48).ngClassPending),e(n,53,0,qt(n,59).ngClassUntouched,qt(n,59).ngClassTouched,qt(n,59).ngClassPristine,qt(n,59).ngClassDirty,qt(n,59).ngClassValid,qt(n,59).ngClassInvalid,qt(n,59).ngClassPending),e(n,60,0,qt(n,65).ngClassUntouched,qt(n,65).ngClassTouched,qt(n,65).ngClassPristine,qt(n,65).ngClassDirty,qt(n,65).ngClassValid,qt(n,65).ngClassInvalid,qt(n,65).ngClassPending),e(n,71,0,qt(n,77).ngClassUntouched,qt(n,77).ngClassTouched,qt(n,77).ngClassPristine,qt(n,77).ngClassDirty,qt(n,77).ngClassValid,qt(n,77).ngClassInvalid,qt(n,77).ngClassPending),e(n,82,0,qt(n,87).ngClassUntouched,qt(n,87).ngClassTouched,qt(n,87).ngClassPristine,qt(n,87).ngClassDirty,qt(n,87).ngClassValid,qt(n,87).ngClassInvalid,qt(n,87).ngClassPending),e(n,92,0,qt(n,98).ngClassUntouched,qt(n,98).ngClassTouched,qt(n,98).ngClassPristine,qt(n,98).ngClassDirty,qt(n,98).ngClassValid,qt(n,98).ngClassInvalid,qt(n,98).ngClassPending),e(n,99,0,qt(n,104).ngClassUntouched,qt(n,104).ngClassTouched,qt(n,104).ngClassPristine,qt(n,104).ngClassDirty,qt(n,104).ngClassValid,qt(n,104).ngClassInvalid,qt(n,104).ngClassPending),e(n,110,0,qt(n,116).ngClassUntouched,qt(n,116).ngClassTouched,qt(n,116).ngClassPristine,qt(n,116).ngClassDirty,qt(n,116).ngClassValid,qt(n,116).ngClassInvalid,qt(n,116).ngClassPending)}))}function bD(e){return gr(0,[(e()(),qs(0,0,null,null,5,"app-modal",[["id","resource-management-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==qt(e,1).onKeydownHandler(l)&&t),t}),xP,PP)),ai(1,4440064,null,0,wP,[gl,ol,pf],{id:[0,"id"]},null),(e()(),qs(2,0,null,0,2,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,OD)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(5,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,1,0,"resource-management-modal"),e(n,4,0,l.resourceOptions)}),null)}class TD{constructor(e,n){this.modalService=e,this.recipeService=n,this.selectedRecipeId=-1,this.modalService.registerForCloseModal().subscribe(e=>{e!==ju.RECIPE&&e!==ju.ALL||(this.selectedRecipeId=-1,this.modalService.sendValueInput(null))}),this.modalService.registerForValue().subscribe(e=>{this.selectedRecipeId=e})}ngOnInit(){}ok(){this.modalService.sendValueInput(this.selectedRecipeId),this.modalService.close(ju.RECIPE)}cancel(){this.modalService.sendValueInput(null),this.modalService.close(ju.RECIPE)}onKeydownHandler(e){"none"!==document.getElementById("recipe-modal").style.display&&(e.preventDefault(),this.ok())}getRecipes(){return this.recipeService.getRecipes()}choose(e){this.selectedRecipeId=e.id}}var CD=Jl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}app-recipe[_ngcontent-%COMP%]{font-size:.8em;display:inline-block;width:110px;margin:4px 8px;cursor:pointer}.recipe[_ngcontent-%COMP%]{display:inline-block}.selected[_ngcontent-%COMP%]{border:2px solid #000}"]],data:{}});function ID(e){return gr(0,[(e()(),qs(0,0,null,null,5,"div",[["class","recipe"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,4,"app-recipe",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.choose(e.context.$implicit)&&t),t}),AR,rR)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(3,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(4,{selected:0}),ai(5,114688,null,0,sR,[$S,yf,iR],{recipe:[0,"recipe"]},null)],(function(e,n){var l=e(n,4,0,n.context.$implicit.id===n.component.selectedRecipeId);e(n,3,0,l),e(n,5,0,n.context.$implicit)}),null)}function yD(e){return gr(0,[(e()(),qs(0,0,null,null,15,"app-modal",[["id","recipe-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==qt(e,1).onKeydownHandler(l)&&t),t}),xP,PP)),ai(1,4440064,null,0,wP,[gl,ol,pf],{id:[0,"id"]},null),(e()(),qs(2,0,null,0,12,"div",[["class","modal"]],null,null,null,null,null)),(e()(),qs(3,0,null,null,11,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),qs(4,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["Choose recipe"])),(e()(),qs(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(7,0,null,null,2,"div",[["id","recipes"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,ID)),ai(9,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(10,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),qs(11,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.ok()&&t),t}),null,null)),(e()(),cr(-1,null,["CONFIRM"])),(e()(),qs(13,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.cancel()&&t),t}),null,null)),(e()(),cr(-1,null,["CANCEL"])),(e()(),qs(15,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,1,0,"recipe-modal"),e(n,9,0,l.getRecipes())}),null)}class AD{constructor(e,n){this.modalService=e,this.worldService=n,this.on=!1,this.selectOrigin=!0,this.modalService.registerForRegionSelectionOrder().subscribe(e=>{this.selectOrigin=e,this.on=!0})}ngOnInit(){}select(){if(this.canSelect()){const e=this.worldService.getSelectedRegion();this.modalService.setReturnRegion(e),this.modalService.close(ju.WORLD),this.on=!1}else this.modalService.info("Only your and neutral regions can be selected as origin")}cancel(){this.modalService.setReturnRegion(null),this.modalService.close(ju.WORLD),this.on=!1}canSelect(){if(!this.on)return!1;{const e=this.worldService.getSelectedCountry();if(e)return!(this.selectOrigin&&e.id!==ku.PLAYER&&e.id!==ku.NEUTRAL)}}}var ND=Jl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{height:660px;max-height:660px;margin:20px;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}app-world[_ngcontent-%COMP%]{display:inline-block;height:90%;width:90%}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px;margin-right:4px}.inactive[_ngcontent-%COMP%]{color:#5f5f5f}.inactive[_ngcontent-%COMP%]:hover{cursor:initial}"]],data:{}});function _D(e){return gr(0,[(e()(),qs(0,0,null,null,14,"app-modal",[["id","world-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==qt(e,1).onKeydownHandler(l)&&t),t}),xP,PP)),ai(1,4440064,null,0,wP,[gl,ol,pf],{id:[0,"id"]},null),(e()(),qs(2,0,null,0,11,"div",[["class","modal"]],null,null,null,null,null)),(e()(),qs(3,0,null,null,10,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),qs(4,0,null,null,1,"app-world",[],null,[[null,"keydown"],[null,"mousedown"],[null,"mousemove"],[null,"mouseup"],[null,"wheel"]],(function(e,n,l){var t=!0;return"keydown"===n&&(t=!1!==qt(e,5).handleKeyDown(l)&&t),"mousedown"===n&&(t=!1!==qt(e,5).dragStart(l)&&t),"mousemove"===n&&(t=!1!==qt(e,5).mousemove(l)&&t),"mouseup"===n&&(t=!1!==qt(e,5).dragEnd(l)&&t),"wheel"===n&&(t=!1!==qt(e,5).onScroll(l)&&t),t}),UI,rC)),ai(5,114688,null,0,sC,[sf,tC,Sf,yf,pf],{selecting:[0,"selecting"]},null),(e()(),qs(6,0,null,null,7,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),qs(7,0,null,null,4,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.select()&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(9,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(10,{inactive:0}),(e()(),cr(-1,null,["Select"])),(e()(),qs(12,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.cancel()&&t),t}),null,null)),(e()(),cr(-1,null,["Cancel"])),(e()(),qs(14,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,1,0,"world-modal"),e(n,5,0,!0);var t=e(n,10,0,!l.canSelect());e(n,9,0,t)}),null)}class wD{constructor(e,n,l,t){this.modalService=e,this.resourcesService=n,this.gameService=l,this.worldService=t,this.defensesCost=[[{resource:bu.LOG,amount:50}],[{resource:bu.LOG,amount:50},{resource:bu.PLANK,amount:30}],[{resource:bu.LOG,amount:50},{resource:bu.CUT_STONE,amount:30}],[{resource:bu.LOG,amount:80},{resource:bu.CUT_STONE,amount:50}],[{resource:bu.LOG,amount:80},{resource:bu.PLANK,amount:40},{resource:bu.CUT_STONE,amount:40}],[{resource:bu.LOG,amount:100},{resource:bu.PLANK,amount:60},{resource:bu.CUT_STONE,amount:60}],[{resource:bu.LOG,amount:100},{resource:bu.PLANK,amount:80},{resource:bu.CUT_STONE,amount:80}]],this.modalService.registerForWorldRegion().subscribe(e=>{this.region=e})}ngOnInit(){}isCostMet(e){let n=!0;return this.getBuildingCost(e).forEach(e=>{0!==this.resourcesService.hasResource(e.resource,e.amount,"Region construction",!0)&&(n=!1)}),n}buildBuilding(e){this.getBuildingCost(e).forEach(e=>{this.resourcesService.decreaseResource(e.resource,e.amount,"Region construction",!0)}),this.worldService.buildRegionBuilding(e.REGION_BUILDING),this.region=null,this.modalService.close(ju.WORLD_BUILD)}hasResource(e){return 0===this.resourcesService.hasResource(e.resource,e.amount,"Region construction",!0)}getResourceName(e){return Uu.prepareResourceName(e)}buildWallNotAvailable(){this.modalService.info("Not enough resources")}getBuildings(){let e=[];return this.region.defense<7&&e.push(Mo.REGION_BUILDINGS.DEFENSES),!this.region.roads&&this.gameService.isEnabled(Iu.LOGISTICS)&&e.push(Mo.REGION_BUILDINGS.ROADS),!this.region.watchtower&&this.gameService.isEnabled(Iu.WOODEN_TOWER)&&e.push(Mo.REGION_BUILDINGS.WATCHTOWER),this.gameService.isEnabled(Iu.WOODEN_TOWER)&&(void 0===this.region.army.getUnit(Pu.GUARD_TOWER)||this.region.army.getUnit(Pu.GUARD_TOWER).size<5)&&e.push(Mo.REGION_BUILDINGS.GUARD_TOWER),this.gameService.isEnabled(Iu.HARBOUR)&&!this.region.harbour&&this.region.neighbours.includes(-1)&&e.push(Mo.REGION_BUILDINGS.HARBOUR),e}getBuildingCost(e){return e.REGION_BUILDING===Zu.DEFENSES?this.defensesCost[this.region.defense]:e.COST}}var PD=Jl({encapsulation:0,styles:[["#title[_ngcontent-%COMP%]{text-align:center;font-size:1.3em}.building[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;text-align:center;border:1px solid #000;margin-bottom:10px}.buildingTitle[_ngcontent-%COMP%]{font-weight:600;background-color:var(--active-colour);border-bottom:1px solid #000}.buildingSecondRow[_ngcontent-%COMP%]{display:-webkit-box;display:flex;width:100%;border-right:1px solid #000;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.details[_ngcontent-%COMP%]{width:100%;text-align:center}.resourceIcon[_ngcontent-%COMP%]{height:20px;width:20px;vertical-align:middle}.description[_ngcontent-%COMP%]{margin-bottom:10px}.icon[_ngcontent-%COMP%]{display:-webkit-inline-box;display:inline-flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;margin-right:10px}.buildButton[_ngcontent-%COMP%]{width:30%}.buildButtonNotAvailable[_ngcontent-%COMP%]{width:30%;cursor:not-allowed}.notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}"]],data:{}});function xD(e){return gr(0,[(e()(),qs(0,0,null,null,8,"span",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,7,"span",[["class","icon"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,4,"span",[],null,null,null,null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(4,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(5,{notMet:0}),(e()(),cr(6,null,["",""])),(e()(),qs(7,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(8,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){var l=n.component,t=e(n,5,0,!l.hasResource(n.context.$implicit));e(n,4,0,t),e(n,8,0,l.getResourceName(n.context.$implicit.resource),"resources")}),(function(e,n){e(n,6,0,n.context.$implicit.amount)}))}function kD(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[["class","buildButton"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.buildBuilding(e.parent.context.$implicit)&&t),t}),null,null)),(e()(),cr(-1,null,["Build "]))],null,null)}function MD(e){return gr(0,[(e()(),qs(0,0,null,null,1,"button",[["class","buildButtonNotAvailable"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.buildWallNotAvailable()&&t),t}),null,null)),(e()(),cr(-1,null,["Build "]))],null,null)}function DD(e){return gr(0,[(e()(),qs(0,0,null,null,13,"div",[["class","building"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,8,"div",[["class","buildingSecondRow"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"span",[["class","buildingTitle"]],null,null,null,null,null)),(e()(),cr(3,null,[""," "])),(e()(),qs(4,0,null,null,5,"div",[["class","details"]],null,null,null,null,null)),(e()(),qs(5,0,null,null,0,"div",[["id","description"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),qs(6,0,null,null,1,"div",[["class","subTitle"]],null,null,null,null,null)),(e()(),cr(-1,null,["cost:"])),(e()(),Qs(16777216,null,null,1,null,xD)),ai(9,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),Qs(16777216,null,null,1,null,kD)),ai(11,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,MD)),ai(13,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,9,0,l.getBuildingCost(n.context.$implicit)),e(n,11,0,l.isCostMet(n.context.$implicit)),e(n,13,0,!l.isCostMet(n.context.$implicit))}),(function(e,n){e(n,3,0,n.context.$implicit.NAME),e(n,5,0,n.context.$implicit.DESCRIPTION)}))}function LD(e){return gr(0,[(e()(),qs(0,0,null,null,5,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"div",[["id","title"]],null,null,null,null,null)),(e()(),cr(-1,null,["Region construction"])),(e()(),qs(3,0,null,null,2,"div",[["id","buildings"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,DD)),ai(5,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,5,0,n.component.getBuildings())}),null)}function FD(e){return gr(0,[(e()(),qs(0,0,null,null,5,"app-modal",[["id","world-build-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==qt(e,1).onKeydownHandler(l)&&t),t}),xP,PP)),ai(1,4440064,null,0,wP,[gl,ol,pf],{id:[0,"id"]},null),(e()(),qs(2,0,null,0,2,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,LD)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(5,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,1,0,"world-build-modal"),e(n,4,0,l.region)}),null)}class UD{constructor(e){this.modalService=e,this.text="",this.value=""}ngOnInit(){this.modalService.registerForText().subscribe(e=>{this.text=e,this.inputRef.nativeElement.select()}),this.modalService.registerForValue().subscribe(e=>this.value=e)}ok(){this.modalService.sendValueInput(this.value),this.modalService.close(ju.INPUT)}cancel(){this.modalService.sendValueInput(null),this.modalService.close(ju.INPUT)}onKeydownHandler(e){"none"!==document.getElementById("input-modal").style.display&&(e.preventDefault(),this.ok())}}var HD=Jl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}"]],data:{}});function GD(e){return gr(0,[nr(402653184,1,{inputRef:0}),(e()(),qs(1,0,null,null,18,"app-modal",[["id","input-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==qt(e,2).onKeydownHandler(l)&&t),t}),xP,PP)),ai(2,4440064,null,0,wP,[gl,ol,pf],{id:[0,"id"]},null),(e()(),qs(3,0,null,0,15,"div",[["class","modal"]],null,null,null,null,null)),(e()(),qs(4,0,null,null,14,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),qs(5,0,null,null,0,"span",[["id","text"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),qs(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(7,0,[[1,0],["input",1]],null,5,"input",[["id","input"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var t=!0,i=e.component;return"input"===n&&(t=!1!==qt(e,8)._handleInput(l.target.value)&&t),"blur"===n&&(t=!1!==qt(e,8).onTouched()&&t),"compositionstart"===n&&(t=!1!==qt(e,8)._compositionStart()&&t),"compositionend"===n&&(t=!1!==qt(e,8)._compositionEnd(l.target.value)&&t),"ngModelChange"===n&&(t=!1!==(i.value=l)&&t),t}),null,null)),ai(8,16384,null,0,Jp,[gl,ol,[2,Zp]],null,null),hi(1024,null,qp,(function(e){return[e]}),[Jp]),ai(10,671744,null,0,Qm,[[8,null],[8,null],[8,null],[6,qp]],{model:[0,"model"]},{update:"ngModelChange"}),hi(2048,null,tm,null,[Qm]),ai(12,16384,null,0,im,[[4,tm]],null,null),(e()(),qs(13,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(14,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),qs(15,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.ok()&&t),t}),null,null)),(e()(),cr(-1,null,["CONFIRM"])),(e()(),qs(17,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.cancel()&&t),t}),null,null)),(e()(),cr(-1,null,["CANCEL"])),(e()(),qs(19,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,2,0,"input-modal"),e(n,10,0,l.value)}),(function(e,n){e(n,5,0,n.component.text),e(n,7,0,qt(n,12).ngClassUntouched,qt(n,12).ngClassTouched,qt(n,12).ngClassPristine,qt(n,12).ngClassDirty,qt(n,12).ngClassValid,qt(n,12).ngClassInvalid,qt(n,12).ngClassPending)}))}class BD{constructor(e,n,l,t){this.modalService=e,this.heritageService=n,this.gameService=l,this.techService=t,this.modalService.registerForTech().subscribe(e=>{this.tech=e})}ngOnInit(){}ok(){this.hasQueueSpace()?this.modalService.sendConfirmationResult(!0):this.modalService.sendConfirmationResult(!1),this.tech=null,this.modalService.close(ju.RESEARCH_UNLOCK)}cancel(){this.modalService.sendConfirmationResult(!1),this.tech=null,this.modalService.close(ju.RESEARCH_UNLOCK)}onKeydownHandler(e){"none"!==document.getElementById("research-unlock-modal").style.display&&(e.preventDefault(),this.ok())}hasQueueSpace(){return this.techService.hasQueueSpace()}requiredHeritagePoints(){let e=0,n=10*this.tech.getRequiredResearchPoints();return Array.from(this.tech.getCost()).forEach(e=>{n+=e[0]===bu.FOOD?Math.ceil(e[1]/50):Ao.getResource(e[0]).TRADE_VALUE*e[1]}),n>0&&(e+=Math.ceil(n/100)),e}hasHeritagePoints(){return this.heritageService.hasHeritagePoints(this.requiredHeritagePoints())}unlockWithHeritage(){this.meetsPrerequisites()?this.heritageService.spendHeritagePoints(this.requiredHeritagePoints())?this.techService.finishTech(this.tech.getTech()):this.modalService.info("Not enough Heritage Points"):this.modalService.info("Prerequisites not met"),this.modalService.sendConfirmationResult(!1),this.tech=null,this.modalService.close(ju.RESEARCH_UNLOCK)}isHeritageUnlocked(){return this.gameService.isEnabled(Iu.HERITAGE)}getHeritagePoints(){return this.heritageService.getAvailableHeritagePoints()}getHeritageCap(){return this.heritageService.getHeritagePoints()}meetsPrerequisites(){let e=!0;const n=this.techService.getTechDone();return this.tech.getPrerequisites().forEach(l=>{e&&(n.includes(l)||(e=!1))}),this.tech.getFlagPrerequisites().forEach(n=>{this.gameService.isEnabled(n)||e&&(e=!1)}),e}}var WD=Jl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;max-width:750px;margin:200px auto auto}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}.center[_ngcontent-%COMP%]{text-align:center}.disabled[_ngcontent-%COMP%]{color:#5a5a5a}"]],data:{}});function VD(e){return gr(0,[(e()(),qs(0,0,null,null,7,"div",[["class","center"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,0,"span",[["id","text"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),qs(2,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(3,0,null,null,4,"div",[["class","buttons"]],null,null,null,null,null)),(e()(),qs(4,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.ok()&&t),t}),null,null)),(e()(),cr(-1,null,["YES"])),(e()(),qs(6,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.cancel()&&t),t}),null,null)),(e()(),cr(-1,null,["NO"]))],null,(function(e,n){e(n,1,0,"Are you sure you want to start researching "+n.component.tech.getTechName()+"?")}))}function zD(e){return gr(0,[(e()(),qs(0,0,null,null,2,"div",[["class","center"]],null,null,null,null,null)),(e()(),cr(-1,null,[" Research queue is full "])),(e()(),qs(2,0,null,null,0,"br",[],null,null,null,null,null))],null,null)}function YD(e){return gr(0,[(e()(),qs(0,0,null,null,8,"div",[["class","center"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),cr(2,null,[" Unlock with Heritage Points (","/",") "])),(e()(),qs(3,0,null,null,5,"div",[["class","buttons"]],null,null,null,null,null)),(e()(),qs(4,0,null,null,4,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.unlockWithHeritage()&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(6,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(7,{disabled:0}),(e()(),cr(8,null,["unlock for "," HP"]))],(function(e,n){var l=n.component,t=e(n,7,0,!l.hasHeritagePoints()||!l.meetsPrerequisites());e(n,6,0,t)}),(function(e,n){var l=n.component;e(n,2,0,l.getHeritagePoints(),l.getHeritageCap()),e(n,8,0,l.requiredHeritagePoints())}))}function $D(e){return gr(0,[(e()(),qs(0,0,null,null,6,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,VD)),ai(2,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,zD)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,YD)),ai(6,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.hasQueueSpace()),e(n,4,0,!l.hasQueueSpace()),e(n,6,0,l.isHeritageUnlocked())}),null)}function KD(e){return gr(0,[(e()(),qs(0,0,null,null,5,"app-modal",[["id","research-unlock-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==qt(e,1).onKeydownHandler(l)&&t),t}),xP,PP)),ai(1,4440064,null,0,wP,[gl,ol,pf],{id:[0,"id"]},null),(e()(),qs(2,0,null,0,2,"div",[["class","modal"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,$D)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(5,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,1,0,"research-unlock-modal"),e(n,4,0,l.tech)}),null)}class jD{constructor(e,n,l,t){this.modalService=e,this.resourcesService=n,this.gameService=l,this.navyService=t,this.selectedShip=Pu.BOAT,this.troops=Pu,this.limitToBoat=!1,e.registerForShipyardLimitBoat().subscribe(e=>{this.limitToBoat=e,this.selectedShip=Pu.BOAT})}ngOnInit(){}onKeydownHandler(e){"none"!==document.getElementById("shipyard-modal").style.display&&(e.preventDefault(),this.cancel())}build(){if(this.hasPort())if(this.hasResources()){if(!(this.resourcesService.getPeople()>=this.getShipStats().CREW))return void this.modalService.info("Not enough sailors!");this.resourcesService.removeRecruit(this.getShipStats().CREW),this.getCost().forEach(e=>{this.resourcesService.decreaseResource(e.resource,e.amount,"ship construction",!0)}),this.modalService.sendValueInput(this.selectedShip),this.modalService.close(ju.SHIPYARD)}else this.modalService.info("Not enough resources!");else this.modalService.info("Not enough port space!")}cancel(){this.modalService.close(ju.SHIPYARD)}hasResources(){let e=!0;return this.getCost().forEach(n=>{e&&(e=this.hasResource(n.resource,n.amount))}),e}hasResource(e,n){return 0===this.resourcesService.hasResource(e,n,"ship construction",!0)}getCost(){return No.getTroop(this.selectedShip).COST}getResourceName(e){return Uu.prepareResourceName(e)}getShipStats(){return No.getTroop(this.selectedShip)}hasPort(){return this.navyService.getFreeHarbourSpace()>=this.getShipStats().SIZE}hasPeople(){return this.resourcesService.getPeople()>=this.getShipStats().CREW}isBrigantineUnlocked(){return this.gameService.isEnabled(Iu.BRIGANTINE)}isGalleonUnlocked(){return this.gameService.isEnabled(Iu.GALLEON)}}var QD=Jl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;font-size:1.2em;max-width:750px;margin:100px auto auto}.lineBreak[_ngcontent-%COMP%]{display:block}#modes[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;margin-bottom:10px}.mode[_ngcontent-%COMP%]{display:-webkit-box;display:flex;cursor:pointer;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:150px;width:200px;border:1px solid #000;-webkit-box-align:center;align-items:center;margin-right:5px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box}.mode[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100px}.mode[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700}.mode[_ngcontent-%COMP%]   .effect[_ngcontent-%COMP%]{font-size:.8em}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;margin-top:10px}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px;white-space:nowrap}.disabled[_ngcontent-%COMP%]{color:#5a5a5a}.selected[_ngcontent-%COMP%]{border:3px solid #000}.notMet[_ngcontent-%COMP%]{color:var(--negative-colour)}#costList[_ngcontent-%COMP%], #stats[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-pack:center;justify-content:center}.center[_ngcontent-%COMP%]{text-align:center}h5[_ngcontent-%COMP%]{margin-bottom:5px}.icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;margin-right:10px}"]],data:{}});function qD(e){return gr(0,[(e()(),qs(0,0,null,null,6,"div",[["class","mode"]],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==(i.selectedShip=i.troops.BRIGANTINE)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(2,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(3,{selected:0}),(e()(),qs(4,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),cr(-1,null,["Brigantine"])),(e()(),qs(6,0,null,null,0,"img",[["src","assets/sea/brigantine.svg"]],null,null,null,null,null))],(function(e,n){var l=n.component,t=e(n,3,0,l.selectedShip===l.troops.BRIGANTINE);e(n,2,0,"mode",t)}),null)}function XD(e){return gr(0,[(e()(),qs(0,0,null,null,6,"div",[["class","mode"]],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==(i.selectedShip=i.troops.GALLEON)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(2,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(3,{selected:0}),(e()(),qs(4,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),cr(-1,null,["Galleon"])),(e()(),qs(6,0,null,null,0,"img",[["src","assets/sea/galleon.svg"]],null,null,null,null,null))],(function(e,n){var l=n.component,t=e(n,3,0,l.selectedShip===l.troops.GALLEON);e(n,2,0,"mode",t)}),null)}function ZD(e){return gr(0,[(e()(),qs(0,0,null,null,7,"div",[],null,null,null,null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(2,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(3,{notMet:0}),(e()(),qs(4,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),cr(5,null,[""," "])),(e()(),qs(6,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(7,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){var l=n.component,t=e(n,3,0,!l.hasResource(n.context.$implicit.resource,n.context.$implicit.amount));e(n,2,0,t),e(n,7,0,l.getResourceName(n.context.$implicit.resource),"resources")}),(function(e,n){e(n,5,0,n.context.$implicit.amount)}))}function JD(e){return gr(0,[(e()(),qs(0,0,null,null,50,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"h5",[["class","center"]],null,null,null,null,null)),(e()(),cr(-1,null,["Cost"])),(e()(),qs(3,0,null,null,16,"div",[["id","costList"]],null,null,null,null,null)),(e()(),qs(4,0,null,null,6,"span",[["class","icon"]],null,null,null,null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(6,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(7,{notMet:0}),(e()(),cr(8,null,[""," "])),(e()(),qs(9,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(10,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),qs(11,0,null,null,6,"span",[["class","icon"]],null,null,null,null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(13,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(14,{notMet:0}),(e()(),cr(15,null,[""," "])),(e()(),qs(16,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(17,114688,null,0,$p,[],{name:[0,"name"],title:[1,"title"]},null),(e()(),Qs(16777216,null,null,1,null,ZD)),ai(19,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),qs(20,0,null,null,1,"h5",[["class","center"]],null,null,null,null,null)),(e()(),cr(-1,null,["Stats"])),(e()(),qs(22,0,null,null,28,"div",[["id","stats"]],null,null,null,null,null)),(e()(),qs(23,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),cr(24,null,[""," "])),(e()(),qs(25,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(26,114688,null,0,$p,[],{name:[0,"name"]},null),(e()(),qs(27,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),cr(28,null,[""," "])),(e()(),qs(29,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(30,114688,null,0,$p,[],{name:[0,"name"]},null),(e()(),qs(31,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),cr(32,null,[""," "])),(e()(),qs(33,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(34,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),qs(35,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),cr(36,null,[""," "])),(e()(),qs(37,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(38,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),qs(39,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),cr(40,null,[""," "])),(e()(),qs(41,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(42,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),qs(43,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),cr(44,null,[""," "])),(e()(),qs(45,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(46,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),qs(47,0,null,null,3,"span",[["class","icon"]],null,null,null,null,null)),(e()(),cr(48,null,[""," "])),(e()(),qs(49,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(50,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null)],(function(e,n){var l=n.component,t=e(n,7,0,!l.hasPort());e(n,6,0,"icon",t),e(n,10,0,"port","sea","port space");var i=e(n,14,0,!l.hasPeople());e(n,13,0,"icon",i),e(n,17,0,"hammer","sailors"),e(n,19,0,l.getCost()),e(n,26,0,"size"),e(n,30,0,"cargo"),e(n,34,0,"speed","army"),e(n,38,0,"speed","army"),e(n,42,0,"coins","resources"),e(n,46,0,"attack","army"),e(n,50,0,"defense","army")}),(function(e,n){var l=n.component;e(n,8,0,l.getShipStats().SIZE),e(n,15,0,l.getShipStats().CREW),e(n,24,0,l.getShipStats().SIZE),e(n,28,0,l.getShipStats().CARGO),e(n,32,0,l.getShipStats().SPEED),e(n,36,0,l.getShipStats().SPEED),e(n,40,0,l.getShipStats().PAY),e(n,44,0,l.getShipStats().STRENGTH),e(n,48,0,l.getShipStats().DEFENSE)}))}function eL(e){return gr(0,[(e()(),qs(0,0,null,null,29,"app-modal",[["id","shipyard-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==qt(e,1).onKeydownHandler(l)&&t),t}),xP,PP)),ai(1,4440064,null,0,wP,[gl,ol,pf],{id:[0,"id"]},null),(e()(),qs(2,0,null,0,26,"div",[["class","modal"]],null,null,null,null,null)),(e()(),qs(3,0,null,null,25,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),qs(4,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),cr(-1,null,["Select ship to build"])),(e()(),qs(6,0,null,null,11,"div",[["id","modes"]],null,null,null,null,null)),(e()(),qs(7,0,null,null,6,"div",[["class","mode"]],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(t=!1!==(i.selectedShip=i.troops.BOAT)&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(9,278528,null,0,da,[aa],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),or(10,{selected:0}),(e()(),qs(11,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),cr(-1,null,["Boat"])),(e()(),qs(13,0,null,null,0,"img",[["src","assets/sea/boat.svg"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,qD)),ai(15,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,XD)),ai(17,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(18,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,JD)),ai(20,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(21,0,null,null,7,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),qs(22,0,null,null,4,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.build()&&t),t}),null,null)),hi(512,null,aa,ca,[Al,Nl,ol,gl]),ai(24,278528,null,0,da,[aa],{ngClass:[0,"ngClass"]},null),or(25,{disabled:0}),(e()(),cr(-1,null,["BUILD"])),(e()(),qs(27,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.cancel()&&t),t}),null,null)),(e()(),cr(-1,null,["CANCEL"])),(e()(),qs(29,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,1,0,"shipyard-modal");var t=e(n,10,0,l.selectedShip===l.troops.BOAT);e(n,9,0,"mode",t),e(n,15,0,!l.limitToBoat&&l.isBrigantineUnlocked()),e(n,17,0,!l.limitToBoat&&l.isGalleonUnlocked()),e(n,20,0,l.selectedShip);var i=e(n,25,0,!l.hasPort()||!l.hasPeople()||!l.hasResources());e(n,24,0,i)}),null)}class nL{constructor(e){this.modalService=e,this.errorReport=null,this.modalService.registerForErrorReport().subscribe(e=>this.errorReport=e),this.modalService.registerForCloseModal().subscribe(e=>{e===ju.ERROR&&(this.errorReport=null)})}ngOnInit(){}ok(){this.modalService.close(ju.ERROR)}onKeydownHandler(e){"none"!==document.getElementById("error-modal").style.display&&(e.preventDefault(),this.ok())}}var lL=Jl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;font-size:1.2em}#title[_ngcontent-%COMP%]{font-weight:700}#wrapper[_ngcontent-%COMP%]{width:100%;text-align:center}#errorBox[_ngcontent-%COMP%]{width:100%;resize:none}"]],data:{}});function tL(e){return gr(0,[(e()(),qs(0,0,null,null,10,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(3,null,["",""])),(e()(),qs(4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(5,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(6,0,null,null,1,"label",[["for","errorBox"]],null,null,null,null,null)),(e()(),cr(-1,null,["Full error:"])),(e()(),qs(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(9,0,null,null,1,"textarea",[["id","errorBox"],["readonly",""],["rows","20"]],null,null,null,null,null)),(e()(),cr(10,null,["",""]))],null,(function(e,n){var l=n.component;e(n,3,0,l.errorReport.message),e(n,10,0,l.errorReport.fullError)}))}function iL(e){return gr(0,[(e()(),qs(0,0,null,null,11,"app-modal",[["id","error-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==qt(e,1).onKeydownHandler(l)&&t),t}),xP,PP)),ai(1,4440064,null,0,wP,[gl,ol,pf],{id:[0,"id"]},null),(e()(),qs(2,0,null,0,8,"div",[["class","modal"]],null,null,null,null,null)),(e()(),qs(3,0,null,null,7,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),qs(4,0,null,null,1,"span",[["id","title"]],null,null,null,null,null)),(e()(),cr(-1,null,["Error report"])),(e()(),Qs(16777216,null,null,1,null,tL)),ai(7,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(9,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.ok()&&t),t}),null,null)),(e()(),cr(-1,null,["OK"])),(e()(),qs(11,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){var l=n.component;e(n,1,0,"error-modal"),e(n,7,0,l.errorReport)}),null)}class sL{constructor(e){this.modalService=e,this.modalService.registerForText().subscribe(e=>this.text=e)}ngOnInit(){}ok(){this.modalService.sendConfirmationResult(!0),this.modalService.close(ju.CONFIRM)}cancel(){this.modalService.sendConfirmationResult(!1),this.modalService.close(ju.CONFIRM)}onKeydownHandler(e){"none"!==document.getElementById("confirm-modal").style.display&&(e.preventDefault(),this.ok())}}var rL=Jl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;max-width:750px;margin:200px auto auto}#buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}#buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:5px}"]],data:{}});function uL(e){return gr(0,[(e()(),qs(0,0,null,null,11,"app-modal",[["id","confirm-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==qt(e,1).onKeydownHandler(l)&&t),t}),xP,PP)),ai(1,4440064,null,0,wP,[gl,ol,pf],{id:[0,"id"]},null),(e()(),qs(2,0,null,0,8,"div",[["class","modal"]],null,null,null,null,null)),(e()(),qs(3,0,null,null,7,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),qs(4,0,null,null,0,"span",[["id","text"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),qs(5,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(6,0,null,null,4,"div",[["id","buttons"]],null,null,null,null,null)),(e()(),qs(7,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.ok()&&t),t}),null,null)),(e()(),cr(-1,null,["YES"])),(e()(),qs(9,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.cancel()&&t),t}),null,null)),(e()(),cr(-1,null,["NO"])),(e()(),qs(11,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){e(n,1,0,"confirm-modal")}),(function(e,n){e(n,4,0,n.component.text)}))}class oL{constructor(e){this.modalService=e,this.text="",this.modalService.registerForText().subscribe(e=>this.text=e)}ngOnInit(){}ok(){this.modalService.close(ju.INFO)}onKeydownHandler(e){"none"!==document.getElementById("info-modal").style.display&&(e.preventDefault(),this.ok())}}var aL=Jl({encapsulation:0,styles:[[".modal-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;font-size:1.2em;max-width:750px;margin:200px auto auto}"]],data:{}});function cL(e){return gr(0,[(e()(),qs(0,0,null,null,8,"app-modal",[["id","info-modal"]],null,[["document","keydown.escape"]],(function(e,n,l){var t=!0;return"document:keydown.escape"===n&&(t=!1!==qt(e,1).onKeydownHandler(l)&&t),t}),xP,PP)),ai(1,4440064,null,0,wP,[gl,ol,pf],{id:[0,"id"]},null),(e()(),qs(2,0,null,0,5,"div",[["class","modal"]],null,null,null,null,null)),(e()(),qs(3,0,null,null,4,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),qs(4,0,null,null,0,"span",[["id","text"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),qs(5,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(6,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.ok()&&t),t}),null,null)),(e()(),cr(-1,null,["OK"])),(e()(),qs(8,0,null,0,0,"div",[["class","modal-background"]],null,null,null,null,null))],(function(e,n){e(n,1,0,"info-modal")}),(function(e,n){e(n,4,0,n.component.text)}))}class hL{constructor(){}ngOnInit(){}}var dL=Jl({encapsulation:0,styles:[[""]],data:{}});function gL(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-build-modal",[],null,null,null,ZP,XP)),ai(1,114688,null,0,qP,[pf],null,null),(e()(),qs(2,0,null,null,1,"app-abdication-modal",[],null,null,null,Wx,Bx)),ai(3,114688,null,0,Gx,[pf,Hx,ey,sf,Sf],null,null),(e()(),qs(4,0,null,null,1,"app-ascension-modal",[],null,[["document","keydown.enter"]],(function(e,n,l){var t=!0;return"document:keydown.enter"===n&&(t=!1!==qt(e,5).onKeydownHandler(l)&&t),t}),Yx,zx)),ai(5,114688,null,0,Vx,[pf],null,null),(e()(),qs(6,0,null,null,1,"app-fight-report-modal",[],null,null,null,tk,Kx)),ai(7,114688,null,0,$x,[pf,tC],null,null),(e()(),qs(8,0,null,null,1,"app-export-modal",[],null,null,null,ok,sk)),ai(9,114688,null,0,ik,[Hx,pf],null,null),(e()(),qs(10,0,null,null,1,"app-import-modal",[],null,null,null,hk,ck)),ai(11,114688,null,0,ak,[Hx,pf],null,null),(e()(),qs(12,0,null,null,1,"app-hard-reset-modal",[],null,null,null,pk,gk)),ai(13,114688,null,0,dk,[pf,Hx],null,null),(e()(),qs(14,0,null,null,1,"app-options-modal",[],null,null,null,wk,fk)),ai(15,114688,null,0,mk,[uf,sf,pf],null,null),(e()(),qs(16,0,null,null,1,"app-royal-modal",[],null,null,null,Dk,xk)),ai(17,114688,null,0,Pk,[Rf,vf,pf],null,null),(e()(),qs(18,0,null,null,1,"app-mission-modal",[],null,null,null,AM,Fk)),ai(19,114688,null,0,Lk,[sf,pf,fv,yf,tC],null,null),(e()(),qs(20,0,null,null,1,"app-festival-modal",[],null,[["document","keydown.enter"]],(function(e,n,l){var t=!0;return"document:keydown.enter"===n&&(t=!1!==qt(e,21).onKeydownHandler(l)&&t),t}),DM,_M)),ai(21,114688,null,0,NM,[pf,bf,yf,Sf],null,null),(e()(),qs(22,0,null,null,1,"app-market-modal",[],null,[["document","keydown.enter"]],(function(e,n,l){var t=!0;return"document:keydown.enter"===n&&(t=!1!==qt(e,23).onKeydownHandler(l)&&t),t}),VM,FM)),ai(23,114688,null,0,LM,[pf,yf],null,null),(e()(),qs(24,0,null,null,1,"app-work-management-modal",[],null,[["document","keydown.enter"]],(function(e,n,l){var t=!0;return"document:keydown.enter"===n&&(t=!1!==qt(e,25).onKeydownHandler(l)&&t),t}),uD,YM)),ai(25,114688,null,0,zM,[sf,pf,yf],null,null),(e()(),qs(26,0,null,null,1,"app-tutorial-modal",[],null,null,null,pD,aD)),ai(27,4308992,null,0,oD,[pf,mf,nx,_n],null,null),(e()(),qs(28,0,null,null,1,"app-changelog-modal",[],null,[["document","keydown.enter"]],(function(e,n,l){var t=!0;return"document:keydown.enter"===n&&(t=!1!==qt(e,29).onKeydownHandler(l)&&t),t}),SD,fD)),ai(29,114688,null,0,mD,[pf],null,null),(e()(),qs(30,0,null,null,1,"app-resource-management-modal",[],null,[["document","keydown.enter"]],(function(e,n,l){var t=!0;return"document:keydown.enter"===n&&(t=!1!==qt(e,31).onKeydownHandler(l)&&t),t}),bD,vD)),ai(31,114688,null,0,ED,[pf],null,null),(e()(),qs(32,0,null,null,1,"app-recipe-modal",[],null,[["document","keydown.enter"]],(function(e,n,l){var t=!0;return"document:keydown.enter"===n&&(t=!1!==qt(e,33).onKeydownHandler(l)&&t),t}),yD,CD)),ai(33,114688,null,0,TD,[pf,Wf],null,null),(e()(),qs(34,0,null,null,1,"app-world-modal",[],null,null,null,_D,ND)),ai(35,114688,null,0,AD,[pf,tC],null,null),(e()(),qs(36,0,null,null,1,"app-world-build-modal",[],null,null,null,FD,PD)),ai(37,114688,null,0,wD,[pf,yf,Sf,tC],null,null),(e()(),qs(38,0,null,null,1,"app-input-modal",[],null,[["document","keydown.enter"]],(function(e,n,l){var t=!0;return"document:keydown.enter"===n&&(t=!1!==qt(e,39).onKeydownHandler(l)&&t),t}),GD,HD)),ai(39,114688,null,0,UD,[pf],null,null),(e()(),qs(40,0,null,null,1,"app-research-unlock-modal",[],null,[["document","keydown.enter"]],(function(e,n,l){var t=!0;return"document:keydown.enter"===n&&(t=!1!==qt(e,41).onKeydownHandler(l)&&t),t}),KD,WD)),ai(41,114688,null,0,BD,[pf,ey,Sf,SO],null,null),(e()(),qs(42,0,null,null,1,"app-shipyard-modal",[],null,[["document","keydown.enter"]],(function(e,n,l){var t=!0;return"document:keydown.enter"===n&&(t=!1!==qt(e,43).onKeydownHandler(l)&&t),t}),eL,QD)),ai(43,114688,null,0,jD,[pf,yf,Sf,lC],null,null),(e()(),qs(44,0,null,null,1,"app-error-modal",[],null,[["document","keydown.enter"]],(function(e,n,l){var t=!0;return"document:keydown.enter"===n&&(t=!1!==qt(e,45).onKeydownHandler(l)&&t),t}),iL,lL)),ai(45,114688,null,0,nL,[pf],null,null),(e()(),qs(46,0,null,null,1,"app-confirm-modal",[],null,[["document","keydown.enter"]],(function(e,n,l){var t=!0;return"document:keydown.enter"===n&&(t=!1!==qt(e,47).onKeydownHandler(l)&&t),t}),uL,rL)),ai(47,114688,null,0,sL,[pf],null,null),(e()(),qs(48,0,null,null,1,"app-info-modal",[],null,[["document","keydown.enter"]],(function(e,n,l){var t=!0;return"document:keydown.enter"===n&&(t=!1!==qt(e,49).onKeydownHandler(l)&&t),t}),cL,aL)),ai(49,114688,null,0,oL,[pf],null,null)],(function(e,n){e(n,1,0),e(n,3,0),e(n,5,0),e(n,7,0),e(n,9,0),e(n,11,0),e(n,13,0),e(n,15,0),e(n,17,0),e(n,19,0),e(n,21,0),e(n,23,0),e(n,25,0),e(n,27,0),e(n,29,0),e(n,31,0),e(n,33,0),e(n,35,0),e(n,37,0),e(n,39,0),e(n,41,0),e(n,43,0),e(n,45,0),e(n,47,0),e(n,49,0)}),null)}class pL{constructor(e){this.calendarService=e}ngOnInit(){}getDay(){return this.calendarService.getDay()}getYear(){return this.calendarService.getYear()}getSeason(){return of[this.calendarService.getSeason()].toLowerCase()}polarToCartesian(e,n,l,t){const i=(t-90)*Math.PI/180;return{x:e+l*Math.cos(i),y:n+l*Math.sin(i)}}describeArc(e,n,l,t,i){360===i&&(i=359.9);const s=this.polarToCartesian(e,n,l,i),r=this.polarToCartesian(e,n,l,t);return["M",s.x,s.y,"A",l,l,0,i-t<=180?"0":"1",0,r.x,r.y,"L",e,n,"L",s.x,s.y].join(" ")}getTickNumber(){return this.calendarService.getTickInDay()-1}}var mL=Jl({encapsulation:0,styles:[[".progress-circle[_ngcontent-%COMP%]{margin-bottom:-2px}"]],data:{}});function fL(e){return gr(0,[(e()(),qs(0,0,null,null,5,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),cr(1,null,[" day: "," "])),(e()(),qs(2,0,null,null,2,":svg:svg",[["class","progress-circle"],["height","22px"],["width","23px"]],null,null,null,null,null)),(e()(),qs(3,0,null,null,0,":svg:circle",[["cx","11"],["cy","11"],["fill","transparent"],["r","10"],["stroke","black"],["stroke-width","1.5"]],null,null,null,null,null)),(e()(),qs(4,0,null,null,0,":svg:path",[],[[1,"d",0]],null,null,null,null)),(e()(),cr(5,null,[" year: "," ","\n"]))],null,(function(e,n){var l=n.component;e(n,1,0,l.getDay()),e(n,4,0,l.describeArc(11,11,8,0,36*l.getTickNumber())),e(n,5,0,l.getYear(),l.getSeason())}))}class SL{constructor(e,n,l,t,i,s,r,u,o,a,c,h,d,g){this.serializerService=e,this.servicesService=n,this.logService=l,this.modalService=t,this.resourcesService=i,this.weatherService=s,this.optionsService=r,this.gameService=u,this.tickerService=o,this.tutorialService=a,this.techService=c,this.religionService=h,this.router=d,this.managementService=g,this.metric=this.optionsService.getOption(rf.METRIC),this.optionsSubscription||(this.optionsSubscription=this.optionsService.registerForOptionsChange().subscribe(()=>this.metric=this.optionsService.getOption(rf.METRIC)))}ngOnInit(){this.resources=this.resourcesService.getResources(),this.resourcesService.registerForResourcesChange().subscribe(e=>{this.resources=e})}getResourcesValues(){return Array.from(this.resources.values())}save(){this.serializerService.initSave(),this.logService.log("saved")}load(){this.serializerService.initLoad()}import(){this.modalService.open(ju.IMPORT)}export(){this.modalService.open(ju.EXPORT)}hardReset(){this.modalService.open(ju.HARD_RESET)}options(){this.modalService.open(ju.OPTIONS)}getTemperature(){return this.weatherService.getCurrentTemperature()}getWeather(){return this.weatherService.getCurrentWeather()}getWeatherName(){return Hu[this.getWeather()].toLowerCase()}calendarEnabled(){return this.gameService.isEnabled(Iu.CALENDAR)}softReset(){this.modalService.open(ju.ABDICATION)}isNotCoins(e){return e.resource!==bu.COINS}resetTutorials(){this.tutorialService.resetTutorials()}pause(){this.tickerService.pause()}resume(){this.tickerService.resume()}isPaused(){return this.tickerService.isPaused()}getResourceDescription(e){let n="";return e.hasResourceType(_u.CONSUMABLE)&&(n+="nutrition: "+Ao.getResource(e.resource).POWER),e.hasResourceType(_u.FUEL)&&(n+="heating energy: "+Ao.getResource(e.resource).POWER),""!==n?"<hr>"+n:n}getResourceConsumers(e){let n="",l="<b>used by:</b><br>";const t=this.resourcesService.getResourceUses(e.resource),i=[];t&&(t.slice().forEach(e=>{const n=i.find(n=>n[0]===e.userName);n?n[1]+=e.value:i.push([e.userName,e.value])}),i.sort((e,n)=>e[0].localeCompare(n[0])).forEach(e=>{l+=e[0]+": "+e[1]+"<br>"})),"<b>used by:</b><br>"!==l&&(n+="<hr>"+l),l="<b>produced by:</b><br>";const s=this.resourcesService.getResourceProductions(e.resource),r=[];return s&&(s.slice().forEach(e=>{const n=r.find(n=>n[0]===e.producerName);n?n[1]+=e.value:r.push([e.producerName,e.value])}),r.sort((e,n)=>e[0].localeCompare(n[0])).forEach(e=>{l+=e[0]+": "+e[1]+"<br>"})),"<b>produced by:</b><br>"!==l&&(n+="<hr>"+l),n}showCurrentTutorial(){this.tutorialService.showCurrentViewTutorial()}getFoodValue(){return this.resourcesService.getFoodValue("Village")}isFoodNutritionEnabled(){return this.managementService.getFoodNutrition()}getConsumableResources(){return this.resourcesService.getResourcesByType(_u.CONSUMABLE).filter(e=>e.isVisible())}getDailyNutritionUsage(){return 5*(this.resourcesService.getTotalPeople()-1)*this.managementService.getRations()}getAverageDailyNutritionProduction(){return this.resourcesService.getAverageNutritionProduction()}getRations(){return.5*this.managementService.getRations()}isHeaderTwoLines(){return this.managementService.getSecondHeaderRow()}showFreeWorkers(){return this.managementService.getShowFreeWorkers()}getFreeWorkers(){return this.resourcesService.getPeople()}showPopulation(){return this.managementService.getShowPopulation()}getPopulation(){return this.resourcesService.getTotalPeople()+"/"+this.resourcesService.getPopulationCap()}isManagementResearched(){return this.gameService.isEnabled(Iu.MANAGEMENT)}showResearchProgress(){return this.managementService.getShowResearchProgress()}getResearchProgress(){const e=this.techService.getCurrentResearch();return e?Uu.prepareTechName(e.getTech())+": "+e.getResearchPoints()+"/"+e.getRequiredResearchPoints():"no research"}showFaith(){return this.managementService.getShowFaith()}showHappiness(){return this.managementService.getShowHappiness()}getFaith(){return this.religionService.getFaith()+"/"+this.religionService.getFaithCap()}isFaithUnlocked(){return this.gameService.isEnabled(Iu.RELIGION)}isRawEnabled(){return this.managementService.getShowRaw()}geRawResources(){return this.resourcesService.getResourcesByType(_u.RAW).filter(e=>e.isVisible())}isProcessedEnabled(){return this.managementService.getShowProcessed()}geProcessedResources(){return this.resourcesService.getResourcesByType(_u.PROCESSED).filter(e=>e.isVisible())}isFoodEnabled(){return this.managementService.getShowFood()}geFoodResources(){return this.resourcesService.getResourcesByType(_u.FOOD).filter(e=>e.isVisible())}isToolsEnabled(){return this.managementService.getShowTools()}geToolsResources(){return this.resourcesService.getResourcesByType(_u.TOOLS).filter(e=>e.isVisible())}openHappiness(){this.router.navigate(["/management/happiness"])}}var EL=Jl({encapsulation:0,styles:[["#wrapperTwoLines[_ngcontent-%COMP%]{font-size:1em;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:100%;-webkit-box-align:center;align-items:center}#wrapperOneLine[_ngcontent-%COMP%]{font-size:1em;display:-webkit-box;display:flex;height:100%;-webkit-box-align:center;align-items:center}.line[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;height:50%;width:100%}button[_ngcontent-%COMP%]{width:100%;margin:0;padding:0}.highlighted[_ngcontent-%COMP%], app-calendar[_ngcontent-%COMP%]{display:inline-block}#cog[_ngcontent-%COMP%]{float:right;margin-top:-2px;height:30px;width:30px}#cog[_ngcontent-%COMP%]:hover{cursor:pointer}.dropdown[_ngcontent-%COMP%]{position:absolute;right:4px;display:inline-block}.dropdown-content[_ngcontent-%COMP%]{cursor:pointer;display:none;position:absolute;list-style:none;background-color:#f9f9f9;min-width:150px;right:0;font-size:1.2em;margin-top:25px;padding:0;border:1px solid #000;z-index:1000}.dropdown-content[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:pointer}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-content[_ngcontent-%COMP%]{display:block}.dropdown-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background-color:var(--passive-colour);border:1px solid #000;padding:3px}.dropdown-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:var(--active-colour)}#temp[_ngcontent-%COMP%]{padding-top:2px;padding-left:5px}.full[_ngcontent-%COMP%]{font-weight:600}app-calendar[_ngcontent-%COMP%]{display:inline-block;font-size:1.1em}#right[_ngcontent-%COMP%]{position:absolute;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;font-size:1.1em;margin-top:2px;right:40px}app-icon[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 auto;margin-right:3px}#weather[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 auto}.icon[_ngcontent-%COMP%]{font-size:1.1em;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}hr[_ngcontent-%COMP%]{border-color:#000}.center[_ngcontent-%COMP%]{text-align:center}app-happiness[_ngcontent-%COMP%]{cursor:pointer}"]],data:{}});function vL(e){return gr(0,[(e()(),qs(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(2,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(3,null,["","/"," "]))],(function(e,n){var l=n.context.$implicit.getName();e(n,2,0,l,"resources")}),(function(e,n){e(n,3,0,n.context.$implicit.amount,n.context.$implicit.limit)}))}function RL(e){return gr(0,[(e()(),qs(0,0,null,null,18,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==qt(e,1).onmousemove(l)&&t),t}),null,null)),ai(1,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),qs(2,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(3,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),cr(4,null,["\xa0"," "])),(e()(),qs(5,0,null,null,13,"span",[["id","nutTolltip"]],null,null,null,null,null)),(e()(),cr(-1,null,[" Total food nutrition"])),(e()(),qs(7,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(8,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),cr(9,null,[" Rations: ",""])),(e()(),qs(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),cr(11,null,[" Daily consumption: ",""])),(e()(),qs(12,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),cr(13,null,[" Average daily production: ",""])),ur(14,2),(e()(),qs(15,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(16,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,vL)),ai(18,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,1,0,"nutTolltip"),e(n,3,0,"food","resources",""),e(n,18,0,l.getConsumableResources())}),(function(e,n){var l=n.component;e(n,4,0,l.getFoodValue()),e(n,9,0,l.getRations()),e(n,11,0,l.getDailyNutritionUsage());var t=ql(n,13,0,e(n,14,0,qt(n.parent.parent,0),l.getAverageDailyNutritionProduction(),"0.0-0"));e(n,13,0,t)}))}function OL(e){return gr(0,[(e()(),qs(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(2,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(3,null,["","/"," "]))],(function(e,n){var l=n.context.$implicit.getName();e(n,2,0,l,"resources")}),(function(e,n){e(n,3,0,n.context.$implicit.amount,n.context.$implicit.limit)}))}function bL(e){return gr(0,[(e()(),qs(0,0,null,null,5,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==qt(e,1).onmousemove(l)&&t),t}),null,null)),ai(1,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),cr(-1,null,[" \xa0RAW "])),(e()(),qs(3,0,null,null,2,"span",[["id","rawTolltip"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,OL)),ai(5,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,1,0,"rawTolltip"),e(n,5,0,l.geRawResources())}),null)}function TL(e){return gr(0,[(e()(),qs(0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(2,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(3,null,["","/"," "]))],(function(e,n){var l=n.parent.context.$implicit.getName();e(n,2,0,l,"resources")}),(function(e,n){e(n,3,0,n.parent.context.$implicit.amount,n.parent.context.$implicit.limit)}))}function CL(e){return gr(0,[(e()(),qs(0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(2,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(3,null,[""," "]))],(function(e,n){var l=n.parent.context.$implicit.getName();e(n,2,0,l,"resources")}),(function(e,n){e(n,3,0,n.parent.context.$implicit.amount)}))}function IL(e){return gr(0,[(e()(),qs(0,0,null,null,4,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,TL)),ai(2,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,CL)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.isNotCoins(n.context.$implicit)),e(n,4,0,!l.isNotCoins(n.context.$implicit))}),null)}function yL(e){return gr(0,[(e()(),qs(0,0,null,null,5,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==qt(e,1).onmousemove(l)&&t),t}),null,null)),ai(1,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),cr(-1,null,[" \xa0PROCESSED "])),(e()(),qs(3,0,null,null,2,"span",[["id","processedTolltip"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,IL)),ai(5,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,1,0,"processedTolltip"),e(n,5,0,l.geProcessedResources())}),null)}function AL(e){return gr(0,[(e()(),qs(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(2,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(3,null,["","/"," "]))],(function(e,n){var l=n.context.$implicit.getName();e(n,2,0,l,"resources")}),(function(e,n){e(n,3,0,n.context.$implicit.amount,n.context.$implicit.limit)}))}function NL(e){return gr(0,[(e()(),qs(0,0,null,null,5,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==qt(e,1).onmousemove(l)&&t),t}),null,null)),ai(1,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),cr(-1,null,[" \xa0FOOD "])),(e()(),qs(3,0,null,null,2,"span",[["id","foodTolltip"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,AL)),ai(5,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,1,0,"foodTolltip"),e(n,5,0,l.geFoodResources())}),null)}function _L(e){return gr(0,[(e()(),qs(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(2,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(3,null,["","/"," "]))],(function(e,n){var l=n.context.$implicit.getName();e(n,2,0,l,"resources")}),(function(e,n){e(n,3,0,n.context.$implicit.amount,n.context.$implicit.limit)}))}function wL(e){return gr(0,[(e()(),qs(0,0,null,null,5,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==qt(e,1).onmousemove(l)&&t),t}),null,null)),ai(1,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),cr(-1,null,[" \xa0TOOLS "])),(e()(),qs(3,0,null,null,2,"span",[["id","toolsTolltip"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,_L)),ai(5,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,1,0,"toolsTolltip"),e(n,5,0,l.geToolsResources())}),null)}function PL(e){return gr(0,[(e()(),qs(0,0,null,null,6,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==qt(e,1).onmousemove(l)&&t),t}),null,null)),ai(1,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),qs(2,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(3,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),cr(4,null,["\xa0"," "])),(e()(),qs(5,0,null,null,1,"span",[["id","nutTolltip"]],null,null,null,null,null)),(e()(),cr(-1,null,[" Total food nutrition "]))],(function(e,n){e(n,1,0,"nutTolltip"),e(n,3,0,"food","resources","")}),(function(e,n){e(n,4,0,n.component.getFoodValue())}))}function xL(e){return gr(0,[(e()(),qs(0,0,null,null,3,"div",[["class","highlighted icon"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(2,114688,null,0,$p,[],{name:[0,"name"]},null),(e()(),cr(3,null,[" "," "]))],(function(e,n){e(n,2,0,"population")}),(function(e,n){e(n,3,0,n.component.getPopulation())}))}function kL(e){return gr(0,[(e()(),qs(0,0,null,null,3,"div",[["class","highlighted icon"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(2,114688,null,0,$p,[],{name:[0,"name"],title:[1,"title"]},null),(e()(),cr(3,null,[" "," "]))],(function(e,n){e(n,2,0,"hammer","Workers")}),(function(e,n){e(n,3,0,n.component.getFreeWorkers())}))}function ML(e){return gr(0,[(e()(),qs(0,0,null,null,3,"div",[["class","highlighted icon"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-happiness",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.openHappiness()&&t),t}),VA,FA)),ai(2,114688,null,0,LA,[bf],null,null),(e()(),cr(-1,null,[" \xa0 "]))],(function(e,n){e(n,2,0)}),null)}function DL(e){return gr(0,[(e()(),qs(0,0,null,null,3,"div",[["class","highlighted icon"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(2,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),cr(3,null,[" "," \xa0 "]))],(function(e,n){e(n,2,0,"faith","religion","Faith")}),(function(e,n){e(n,3,0,n.component.getFaith())}))}function LL(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[["class","highlighted icon"]],null,null,null,null,null)),(e()(),cr(1,null,[" "," "]))],null,(function(e,n){e(n,1,0,n.component.getResearchProgress())}))}function FL(e){return gr(0,[(e()(),qs(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),cr(1,null,["","/",""]))],null,(function(e,n){var l=n.parent.parent.context.$implicit.getAmount(),t=n.parent.parent.context.$implicit.getLimit();e(n,1,0,l,t)}))}function UL(e){return gr(0,[(e()(),qs(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),cr(1,null,["","/",""]))],null,(function(e,n){var l=n.parent.parent.context.$implicit.getAmount(),t=n.parent.parent.context.$implicit.getLimit();e(n,1,0,l,t)}))}function HL(e){return gr(0,[(e()(),qs(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),cr(1,null,["",""]))],null,(function(e,n){var l=n.parent.parent.context.$implicit.getAmount();e(n,1,0,l)}))}function GL(e){return gr(0,[(e()(),qs(0,0,null,null,16,"span",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,15,"span",[["appTooltip",""],["class","icon tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==qt(e,2).onmousemove(l)&&t),t}),null,null)),ai(2,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),qs(3,0,null,null,4,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),qs(4,0,null,null,1,"div",[["class","center"]],null,null,null,null,null)),(e()(),cr(5,null,["",""])),(e()(),qs(6,0,null,null,0,"div",[["class","center"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),qs(7,0,null,null,0,"div",[["class","center"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),qs(8,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(9,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),Qs(16777216,null,null,1,null,FL)),ai(11,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,UL)),ai(13,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,HL)),ai(15,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),cr(-1,null,[" \xa0"]))],(function(e,n){var l=n.component;e(n,2,0,1e5*n.parent.context.$implicit.resource);var t=n.parent.context.$implicit.getName();e(n,9,0,t,"resources","");var i=n.parent.context.$implicit.getAmount()===n.parent.context.$implicit.getLimit();e(n,11,0,i);var s=l.isNotCoins(n.parent.context.$implicit)&&n.parent.context.$implicit.getAmount()!==n.parent.context.$implicit.getLimit();e(n,13,0,s),e(n,15,0,!l.isNotCoins(n.parent.context.$implicit))}),(function(e,n){var l=n.component;e(n,3,0,yt(1,"",1e5*n.parent.context.$implicit.resource,"")),e(n,5,0,n.parent.context.$implicit.name),e(n,6,0,l.getResourceDescription(n.parent.context.$implicit)),e(n,7,0,l.getResourceConsumers(n.parent.context.$implicit))}))}function BL(e){return gr(0,[(e()(),qs(0,0,null,null,2,"div",[["class","highlighted"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,GL)),ai(2,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){e(n,2,0,n.context.$implicit.visible&&n.context.$implicit.highlighted)}),null)}function WL(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-calendar",[],null,null,null,fL,mL)),ai(1,114688,null,0,pL,[hf],null,null)],(function(e,n){e(n,1,0)}),null)}function VL(e){return gr(0,[(e()(),qs(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),cr(-1,null,["\xb0C"]))],null,null)}function zL(e){return gr(0,[(e()(),qs(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),cr(-1,null,["\xb0F"]))],null,null)}function YL(e){return gr(0,[(e()(),qs(0,0,null,null,0,"img",[["alt","settings"],["draggable","false"],["id","cog"],["src","assets/settings.svg"]],null,null,null,null,null))],null,null)}function $L(e){return gr(0,[(e()(),qs(0,0,null,null,0,"img",[["alt","settings"],["draggable","false"],["id","cog"],["src","assets/pause.svg"]],null,null,null,null,null))],null,null)}function KL(e){return gr(0,[(e()(),qs(0,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.pause()&&t),t}),null,null)),(e()(),cr(-1,null,["pause game"]))],null,null)}function jL(e){return gr(0,[(e()(),qs(0,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.resume()&&t),t}),null,null)),(e()(),cr(-1,null,["resume game"]))],null,null)}function QL(e){return gr(0,[(e()(),qs(0,0,null,null,70,"div",[["id","wrapperOneLine"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,RL)),ai(2,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,bL)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,yL)),ai(6,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,NL)),ai(8,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,wL)),ai(10,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,PL)),ai(12,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,xL)),ai(14,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),cr(-1,null,[" \xa0 "])),(e()(),Qs(16777216,null,null,1,null,kL)),ai(17,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),cr(-1,null,[" \xa0 "])),(e()(),Qs(16777216,null,null,1,null,ML)),ai(20,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,DL)),ai(22,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,LL)),ai(24,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),cr(-1,null,[" \xa0 "])),(e()(),Qs(16777216,null,null,1,null,BL)),ai(27,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null),(e()(),cr(-1,null,[" \xa0 "])),(e()(),qs(29,0,null,null,13,"div",[["id","right"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,WL)),ai(31,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(32,0,null,null,10,"span",[["class","icon"],["id","weather"]],null,null,null,null,null)),(e()(),cr(-1,null,[" \xa0 "])),(e()(),qs(34,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(35,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),qs(36,0,null,null,6,null,null,null,null,null,null,null)),(e()(),cr(37,null,[""," "])),ur(38,2),(e()(),Qs(16777216,null,null,1,null,VL)),ai(40,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,zL)),ai(42,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(43,0,null,null,27,"div",[["class","dropdown"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,YL)),ai(45,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,$L)),ai(47,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(48,0,null,null,22,"ul",[["class","dropdown-content"]],null,null,null,null,null)),(e()(),qs(49,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.options()&&t),t}),null,null)),(e()(),cr(-1,null,["options"])),(e()(),qs(51,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.save()&&t),t}),null,null)),(e()(),cr(-1,null,["save"])),(e()(),qs(53,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.load()&&t),t}),null,null)),(e()(),cr(-1,null,["load"])),(e()(),qs(55,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.import()&&t),t}),null,null)),(e()(),cr(-1,null,["import"])),(e()(),qs(57,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.export()&&t),t}),null,null)),(e()(),cr(-1,null,["export"])),(e()(),Qs(16777216,null,null,1,null,KL)),ai(60,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,jL)),ai(62,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(63,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.showCurrentTutorial()&&t),t}),null,null)),(e()(),cr(-1,null,["show current tab tutorial"])),(e()(),qs(65,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.resetTutorials()&&t),t}),null,null)),(e()(),cr(-1,null,["reset tutorials"])),(e()(),qs(67,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.softReset()&&t),t}),null,null)),(e()(),cr(-1,null,["abdicate"])),(e()(),qs(69,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.hardReset()&&t),t}),null,null)),(e()(),cr(-1,null,["hard reset"]))],(function(e,n){var l=n.component;e(n,2,0,l.isFoodNutritionEnabled()&&l.isManagementResearched()),e(n,4,0,l.isRawEnabled()&&l.isManagementResearched()),e(n,6,0,l.isProcessedEnabled()&&l.isManagementResearched()),e(n,8,0,l.isFoodEnabled()&&l.isManagementResearched()),e(n,10,0,l.isToolsEnabled()&&l.isManagementResearched()),e(n,12,0,l.isFoodNutritionEnabled()&&!l.isManagementResearched()),e(n,14,0,l.showPopulation()),e(n,17,0,l.showFreeWorkers()),e(n,20,0,l.showHappiness()&&l.isManagementResearched()),e(n,22,0,l.showFaith()&&l.isFaithUnlocked()),e(n,24,0,l.showResearchProgress()),e(n,27,0,l.getResourcesValues()),e(n,31,0,l.calendarEnabled()),e(n,35,0,l.getWeatherName(),"weather"),e(n,40,0,l.metric),e(n,42,0,!l.metric),e(n,45,0,!l.isPaused()),e(n,47,0,l.isPaused()),e(n,60,0,!l.isPaused()),e(n,62,0,l.isPaused())}),(function(e,n){var l=n.component,t=ql(n,37,0,e(n,38,0,qt(n.parent,0),l.getTemperature(),"0.0-1"));e(n,37,0,t)}))}function qL(e){return gr(0,[(e()(),qs(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(2,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(3,null,["","/"," "]))],(function(e,n){var l=n.context.$implicit.getName();e(n,2,0,l,"resources")}),(function(e,n){e(n,3,0,n.context.$implicit.amount,n.context.$implicit.limit)}))}function XL(e){return gr(0,[(e()(),qs(0,0,null,null,18,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==qt(e,1).onmousemove(l)&&t),t}),null,null)),ai(1,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),qs(2,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(3,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),cr(4,null,["\xa0"," "])),(e()(),qs(5,0,null,null,13,"span",[["id","nutTolltip"]],null,null,null,null,null)),(e()(),cr(-1,null,[" Nutrition"])),(e()(),qs(7,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(8,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),cr(9,null,[" Rations: ",""])),(e()(),qs(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),cr(11,null,[" Daily consumption: ",""])),(e()(),qs(12,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),cr(13,null,[" Average daily production: ",""])),ur(14,2),(e()(),qs(15,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),qs(16,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,qL)),ai(18,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,1,0,"nutTolltip"),e(n,3,0,"food","resources",""),e(n,18,0,l.getConsumableResources())}),(function(e,n){var l=n.component;e(n,4,0,l.getFoodValue()),e(n,9,0,l.getRations()),e(n,11,0,l.getDailyNutritionUsage());var t=ql(n,13,0,e(n,14,0,qt(n.parent.parent,0),l.getAverageDailyNutritionProduction(),"0.0-0"));e(n,13,0,t)}))}function ZL(e){return gr(0,[(e()(),qs(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(2,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(3,null,["","/"," "]))],(function(e,n){var l=n.context.$implicit.getName();e(n,2,0,l,"resources")}),(function(e,n){e(n,3,0,n.context.$implicit.amount,n.context.$implicit.limit)}))}function JL(e){return gr(0,[(e()(),qs(0,0,null,null,5,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==qt(e,1).onmousemove(l)&&t),t}),null,null)),ai(1,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),cr(-1,null,[" \xa0RAW "])),(e()(),qs(3,0,null,null,2,"span",[["id","rawTolltip"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,ZL)),ai(5,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,1,0,"rawTolltip"),e(n,5,0,l.geRawResources())}),null)}function eF(e){return gr(0,[(e()(),qs(0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(2,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(3,null,["","/"," "]))],(function(e,n){var l=n.parent.context.$implicit.getName();e(n,2,0,l,"resources")}),(function(e,n){e(n,3,0,n.parent.context.$implicit.amount,n.parent.context.$implicit.limit)}))}function nF(e){return gr(0,[(e()(),qs(0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(2,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(3,null,[""," "]))],(function(e,n){var l=n.parent.context.$implicit.getName();e(n,2,0,l,"resources")}),(function(e,n){e(n,3,0,n.parent.context.$implicit.amount)}))}function lF(e){return gr(0,[(e()(),qs(0,0,null,null,4,"div",[["class","icon"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,eF)),ai(2,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,nF)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,2,0,l.isNotCoins(n.context.$implicit)),e(n,4,0,!l.isNotCoins(n.context.$implicit))}),null)}function tF(e){return gr(0,[(e()(),qs(0,0,null,null,5,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==qt(e,1).onmousemove(l)&&t),t}),null,null)),ai(1,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),cr(-1,null,[" \xa0PROCESSED "])),(e()(),qs(3,0,null,null,2,"span",[["id","processedTolltip"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,lF)),ai(5,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,1,0,"processedTolltip"),e(n,5,0,l.geProcessedResources())}),null)}function iF(e){return gr(0,[(e()(),qs(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(2,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(3,null,["","/"," "]))],(function(e,n){var l=n.context.$implicit.getName();e(n,2,0,l,"resources")}),(function(e,n){e(n,3,0,n.context.$implicit.amount,n.context.$implicit.limit)}))}function sF(e){return gr(0,[(e()(),qs(0,0,null,null,5,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==qt(e,1).onmousemove(l)&&t),t}),null,null)),ai(1,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),cr(-1,null,[" \xa0FOOD "])),(e()(),qs(3,0,null,null,2,"span",[["id","foodTolltip"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,iF)),ai(5,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,1,0,"foodTolltip"),e(n,5,0,l.geFoodResources())}),null)}function rF(e){return gr(0,[(e()(),qs(0,0,null,null,3,"div",[["class","icon"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(2,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),cr(3,null,["","/"," "]))],(function(e,n){var l=n.context.$implicit.getName();e(n,2,0,l,"resources")}),(function(e,n){e(n,3,0,n.context.$implicit.amount,n.context.$implicit.limit)}))}function uF(e){return gr(0,[(e()(),qs(0,0,null,null,5,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==qt(e,1).onmousemove(l)&&t),t}),null,null)),ai(1,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),cr(-1,null,[" \xa0TOOLS "])),(e()(),qs(3,0,null,null,2,"span",[["id","toolsTolltip"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,rF)),ai(5,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,1,0,"toolsTolltip"),e(n,5,0,l.geToolsResources())}),null)}function oF(e){return gr(0,[(e()(),qs(0,0,null,null,6,"div",[["appTooltip",""],["class","highlighted icon tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==qt(e,1).onmousemove(l)&&t),t}),null,null)),ai(1,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),qs(2,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(3,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),cr(4,null,["\xa0"," "])),(e()(),qs(5,0,null,null,1,"span",[["id","nutTolltip"]],null,null,null,null,null)),(e()(),cr(-1,null,[" Total food nutrition "]))],(function(e,n){e(n,1,0,"nutTolltip"),e(n,3,0,"food","resources","")}),(function(e,n){e(n,4,0,n.component.getFoodValue())}))}function aF(e){return gr(0,[(e()(),qs(0,0,null,null,3,"div",[["class","highlighted icon"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(2,114688,null,0,$p,[],{name:[0,"name"]},null),(e()(),cr(3,null,[" "," "]))],(function(e,n){e(n,2,0,"population")}),(function(e,n){e(n,3,0,n.component.getPopulation())}))}function cF(e){return gr(0,[(e()(),qs(0,0,null,null,3,"div",[["class","highlighted icon"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(2,114688,null,0,$p,[],{name:[0,"name"],title:[1,"title"]},null),(e()(),cr(3,null,[" "," "]))],(function(e,n){e(n,2,0,"hammer","Workers")}),(function(e,n){e(n,3,0,n.component.getFreeWorkers())}))}function hF(e){return gr(0,[(e()(),qs(0,0,null,null,3,"div",[["class","highlighted icon"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-happiness",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.openHappiness()&&t),t}),VA,FA)),ai(2,114688,null,0,LA,[bf],null,null),(e()(),cr(-1,null,[" \xa0 "]))],(function(e,n){e(n,2,0)}),null)}function dF(e){return gr(0,[(e()(),qs(0,0,null,null,3,"div",[["class","highlighted icon"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(2,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),cr(3,null,[" "," \xa0 "]))],(function(e,n){e(n,2,0,"faith","religion","Faith")}),(function(e,n){e(n,3,0,n.component.getFaith())}))}function gF(e){return gr(0,[(e()(),qs(0,0,null,null,1,"div",[["class","highlighted icon"]],null,null,null,null,null)),(e()(),cr(1,null,[" "," "]))],null,(function(e,n){e(n,1,0,n.component.getResearchProgress())}))}function pF(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-calendar",[],null,null,null,fL,mL)),ai(1,114688,null,0,pL,[hf],null,null)],(function(e,n){e(n,1,0)}),null)}function mF(e){return gr(0,[(e()(),qs(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),cr(-1,null,["\xb0C"]))],null,null)}function fF(e){return gr(0,[(e()(),qs(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),cr(-1,null,["\xb0F"]))],null,null)}function SF(e){return gr(0,[(e()(),qs(0,0,null,null,0,"img",[["alt","settings"],["draggable","false"],["id","cog"],["ondragstart","return false;"],["src","assets/settings.svg"]],null,null,null,null,null))],null,null)}function EF(e){return gr(0,[(e()(),qs(0,0,null,null,0,"img",[["alt","settings"],["draggable","false"],["id","cog"],["ondragstart","return false;"],["src","assets/pause.svg"]],null,null,null,null,null))],null,null)}function vF(e){return gr(0,[(e()(),qs(0,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.pause()&&t),t}),null,null)),(e()(),cr(-1,null,["pause game"]))],null,null)}function RF(e){return gr(0,[(e()(),qs(0,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.resume()&&t),t}),null,null)),(e()(),cr(-1,null,["resume game"]))],null,null)}function OF(e){return gr(0,[(e()(),qs(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),cr(1,null,["","/",""]))],null,(function(e,n){var l=n.parent.parent.context.$implicit.getAmount(),t=n.parent.parent.context.$implicit.getLimit();e(n,1,0,l,t)}))}function bF(e){return gr(0,[(e()(),qs(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),cr(1,null,["","/",""]))],null,(function(e,n){var l=n.parent.parent.context.$implicit.getAmount(),t=n.parent.parent.context.$implicit.getLimit();e(n,1,0,l,t)}))}function TF(e){return gr(0,[(e()(),qs(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),cr(1,null,["",""]))],null,(function(e,n){var l=n.parent.parent.context.$implicit.getAmount();e(n,1,0,l)}))}function CF(e){return gr(0,[(e()(),qs(0,0,null,null,16,"span",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,15,"span",[["appTooltip",""],["class","icon tooltip"]],null,[[null,"mousemove"]],(function(e,n,l){var t=!0;return"mousemove"===n&&(t=!1!==qt(e,2).onmousemove(l)&&t),t}),null,null)),ai(2,16384,null,0,Yp,[],{elementId:[0,"elementId"]},null),(e()(),qs(3,0,null,null,4,"span",[],[[8,"id",0]],null,null,null,null)),(e()(),qs(4,0,null,null,1,"div",[["class","center"]],null,null,null,null,null)),(e()(),cr(5,null,["",""])),(e()(),qs(6,0,null,null,0,"div",[["class","center"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),qs(7,0,null,null,0,"div",[["class","center"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),qs(8,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(9,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"],title:[2,"title"]},null),(e()(),Qs(16777216,null,null,1,null,OF)),ai(11,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,bF)),ai(13,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,TF)),ai(15,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),cr(-1,null,[" \xa0"]))],(function(e,n){var l=n.component;e(n,2,0,1e5*n.parent.context.$implicit.resource);var t=n.parent.context.$implicit.getName();e(n,9,0,t,"resources","");var i=n.parent.context.$implicit.getAmount()===n.parent.context.$implicit.getLimit();e(n,11,0,i);var s=l.isNotCoins(n.parent.context.$implicit)&&n.parent.context.$implicit.getAmount()!==n.parent.context.$implicit.getLimit();e(n,13,0,s),e(n,15,0,!l.isNotCoins(n.parent.context.$implicit))}),(function(e,n){var l=n.component;e(n,3,0,yt(1,"",1e5*n.parent.context.$implicit.resource,"")),e(n,5,0,n.parent.context.$implicit.name),e(n,6,0,l.getResourceDescription(n.parent.context.$implicit)),e(n,7,0,l.getResourceConsumers(n.parent.context.$implicit))}))}function IF(e){return gr(0,[(e()(),qs(0,0,null,null,2,"div",[["class","highlighted"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,CF)),ai(2,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){e(n,2,0,n.context.$implicit.visible&&n.context.$implicit.highlighted)}),null)}function yF(e){return gr(0,[(e()(),qs(0,0,null,null,71,"div",[["id","wrapperTwoLines"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,67,"div",[["class","line"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,XL)),ai(3,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,JL)),ai(5,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,tF)),ai(7,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,sF)),ai(9,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,uF)),ai(11,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,oF)),ai(13,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,aF)),ai(15,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),cr(-1,null,[" \xa0 "])),(e()(),Qs(16777216,null,null,1,null,cF)),ai(18,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),cr(-1,null,[" \xa0 "])),(e()(),Qs(16777216,null,null,1,null,hF)),ai(21,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,dF)),ai(23,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,gF)),ai(25,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),cr(-1,null,[" \xa0 "])),(e()(),qs(27,0,null,null,13,"div",[["id","right"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,pF)),ai(29,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(30,0,null,null,10,"span",[["class","icon"],["id","weather"]],null,null,null,null,null)),(e()(),cr(-1,null,[" \xa0 "])),(e()(),qs(32,0,null,null,1,"app-icon",[],null,null,null,jp,Kp)),ai(33,114688,null,0,$p,[],{name:[0,"name"],path:[1,"path"]},null),(e()(),qs(34,0,null,null,6,null,null,null,null,null,null,null)),(e()(),cr(35,null,[""," "])),ur(36,2),(e()(),Qs(16777216,null,null,1,null,mF)),ai(38,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,fF)),ai(40,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(41,0,null,null,27,"div",[["class","dropdown"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,SF)),ai(43,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,EF)),ai(45,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(46,0,null,null,22,"ul",[["class","dropdown-content"]],null,null,null,null,null)),(e()(),qs(47,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.options()&&t),t}),null,null)),(e()(),cr(-1,null,["options"])),(e()(),qs(49,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.save()&&t),t}),null,null)),(e()(),cr(-1,null,["save"])),(e()(),qs(51,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.load()&&t),t}),null,null)),(e()(),cr(-1,null,["load"])),(e()(),qs(53,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.import()&&t),t}),null,null)),(e()(),cr(-1,null,["import"])),(e()(),qs(55,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.export()&&t),t}),null,null)),(e()(),cr(-1,null,["export"])),(e()(),Qs(16777216,null,null,1,null,vF)),ai(58,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,RF)),ai(60,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(61,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.showCurrentTutorial()&&t),t}),null,null)),(e()(),cr(-1,null,["show current tab tutorial"])),(e()(),qs(63,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.resetTutorials()&&t),t}),null,null)),(e()(),cr(-1,null,["reset tutorials"])),(e()(),qs(65,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.softReset()&&t),t}),null,null)),(e()(),cr(-1,null,["abdicate"])),(e()(),qs(67,0,null,null,1,"li",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.hardReset()&&t),t}),null,null)),(e()(),cr(-1,null,["hard reset"])),(e()(),qs(69,0,null,null,2,"div",[["class","line"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,IF)),ai(71,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var l=n.component;e(n,3,0,l.isFoodNutritionEnabled()&&l.isManagementResearched()),e(n,5,0,l.isRawEnabled()&&l.isManagementResearched()),e(n,7,0,l.isProcessedEnabled()&&l.isManagementResearched()),e(n,9,0,l.isFoodEnabled()&&l.isManagementResearched()),e(n,11,0,l.isToolsEnabled()&&l.isManagementResearched()),e(n,13,0,l.isFoodNutritionEnabled()&&!l.isManagementResearched()),e(n,15,0,l.showPopulation()),e(n,18,0,l.showFreeWorkers()),e(n,21,0,l.showHappiness()&&l.isManagementResearched()),e(n,23,0,l.showFaith()&&l.isFaithUnlocked()),e(n,25,0,l.showResearchProgress()),e(n,29,0,l.calendarEnabled()),e(n,33,0,l.getWeatherName(),"weather"),e(n,38,0,l.metric),e(n,40,0,!l.metric),e(n,43,0,!l.isPaused()),e(n,45,0,l.isPaused()),e(n,58,0,!l.isPaused()),e(n,60,0,l.isPaused()),e(n,71,0,l.getResourcesValues())}),(function(e,n){var l=n.component,t=ql(n,35,0,e(n,36,0,qt(n.parent,0),l.getTemperature(),"0.0-1"));e(n,35,0,t)}))}function AF(e){return gr(0,[ci(0,Pa,[Ki]),nr(671088640,1,{line1Ref:0}),nr(671088640,2,{line22Ref:0}),(e()(),Qs(16777216,null,null,1,null,QL)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,yF)),ai(6,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,4,0,!l.isHeaderTwoLines()),e(n,6,0,l.isHeaderTwoLines())}),null)}class NF{constructor(e,n,l){this.gameService=e,this.resourcesService=n,this.router=l}ngOnInit(){}isWeatherEnabled(){return this.gameService.isEnabled(Iu.WEATHER)}isMarketEnabled(){return this.gameService.isEnabled(Iu.MARKET)}isManagementEnabled(){return this.gameService.isEnabled(Iu.MANAGEMENT)}isResearchEnabled(){return this.gameService.isEnabled(Iu.RESEARCH)}isArmyEnabled(){return this.gameService.isEnabled(Iu.ARMY)}isReligionEnabled(){return this.gameService.isEnabled(Iu.RELIGION)}isCraftingEnabled(){return this.gameService.isEnabled(Iu.CRAFTING)}isHeritageUnlocked(){return this.gameService.isEnabled(Iu.HERITAGE)}isCartographyEnabled(){return this.gameService.isEnabled(Iu.CARTOGRAPHY)}isDev(){return!go.production}isInRegions(){return this.router.url.includes("/regions/")}isNavyEnabled(){return this.gameService.isEnabled(Iu.NAVY)}getVillageStageName(){let e="Village";return Io.forEach(n=>{this.resourcesService.getPopulationCap()>=n.population&&(e=n.name)}),e}}var _F=Jl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:-webkit-box;display:flex;height:100%;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.entry[_ngcontent-%COMP%]{padding:0;margin:0;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:5%;text-align:center;border-bottom:2px solid #000;cursor:pointer;text-decoration:none;color:#000;font-size:1em}.entry2[_ngcontent-%COMP%]{padding:0;margin:0;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:10%;text-align:center;border:none;cursor:pointer;text-decoration:none;color:#000;font-size:1em}.entry3[_ngcontent-%COMP%]{padding:0;margin:0;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:50%;text-align:center;border-top:2px solid #000;cursor:pointer;text-decoration:none;color:#000;font-size:1em}.entry3[_ngcontent-%COMP%]:last-of-type{border-bottom:none}.entry[_ngcontent-%COMP%]:first-of-type{cursor:default}.empty[_ngcontent-%COMP%]{padding:0;margin:0;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:50%;text-align:center;text-decoration:none;color:#000;font-size:1em;cursor:default}.entry.active[_ngcontent-%COMP%], .entry3.active[_ngcontent-%COMP%]{background:var(--active-colour);text-decoration:none}.end[_ngcontent-%COMP%]{margin-top:auto;border:none}"]],data:{}});function wF(e){return gr(0,[(e()(),qs(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/regions"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==qt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ai(1,671744,[[2,4]],0,ap,[up,qd,Bo],{routerLink:[0,"routerLink"]},null),ai(2,1720320,null,2,hp,[up,ol,gl,[2,op],[2,ap]],{routerLinkActive:[0,"routerLinkActive"]},null),nr(603979776,1,{links:1}),nr(603979776,2,{linksWithHrefs:1}),(e()(),cr(5,null,["",""]))],(function(e,n){e(n,1,0,"/regions"),e(n,2,0,"active")}),(function(e,n){var l=n.component;e(n,0,0,qt(n,1).target,qt(n,1).href),e(n,5,0,l.getVillageStageName())}))}function PF(e){return gr(0,[(e()(),qs(0,0,null,null,2,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/regions/village"]],[[2,"active",null],[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==qt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ai(1,671744,null,0,ap,[up,qd,Bo],{routerLink:[0,"routerLink"]},null),(e()(),cr(2,null,["",""]))],(function(e,n){e(n,1,0,"/regions/village")}),(function(e,n){var l=n.component;e(n,0,0,!0,qt(n,1).target,qt(n,1).href),e(n,2,0,l.getVillageStageName())}))}function xF(e){return gr(0,[(e()(),qs(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/management"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==qt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ai(1,671744,[[6,4]],0,ap,[up,qd,Bo],{routerLink:[0,"routerLink"]},null),ai(2,1720320,null,2,hp,[up,ol,gl,[2,op],[2,ap]],{routerLinkActive:[0,"routerLinkActive"]},null),nr(603979776,5,{links:1}),nr(603979776,6,{linksWithHrefs:1}),(e()(),cr(-1,null,["Management"]))],(function(e,n){e(n,1,0,"/management"),e(n,2,0,"active")}),(function(e,n){e(n,0,0,qt(n,1).target,qt(n,1).href)}))}function kF(e){return gr(0,[(e()(),qs(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/crafting"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==qt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ai(1,671744,[[8,4]],0,ap,[up,qd,Bo],{routerLink:[0,"routerLink"]},null),ai(2,1720320,null,2,hp,[up,ol,gl,[2,op],[2,ap]],{routerLinkActive:[0,"routerLinkActive"]},null),nr(603979776,7,{links:1}),nr(603979776,8,{linksWithHrefs:1}),(e()(),cr(-1,null,["Crafting"]))],(function(e,n){e(n,1,0,"/crafting"),e(n,2,0,"active")}),(function(e,n){e(n,0,0,qt(n,1).target,qt(n,1).href)}))}function MF(e){return gr(0,[(e()(),qs(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/research"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==qt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ai(1,671744,[[10,4]],0,ap,[up,qd,Bo],{routerLink:[0,"routerLink"]},null),ai(2,1720320,null,2,hp,[up,ol,gl,[2,op],[2,ap]],{routerLinkActive:[0,"routerLinkActive"]},null),nr(603979776,9,{links:1}),nr(603979776,10,{linksWithHrefs:1}),(e()(),cr(-1,null,["Research"]))],(function(e,n){e(n,1,0,"/research"),e(n,2,0,"active")}),(function(e,n){e(n,0,0,qt(n,1).target,qt(n,1).href)}))}function DF(e){return gr(0,[(e()(),qs(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/market"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==qt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ai(1,671744,[[12,4]],0,ap,[up,qd,Bo],{routerLink:[0,"routerLink"]},null),ai(2,1720320,null,2,hp,[up,ol,gl,[2,op],[2,ap]],{routerLinkActive:[0,"routerLinkActive"]},null),nr(603979776,11,{links:1}),nr(603979776,12,{linksWithHrefs:1}),(e()(),cr(-1,null,["Market"]))],(function(e,n){e(n,1,0,"/market"),e(n,2,0,"active")}),(function(e,n){e(n,0,0,qt(n,1).target,qt(n,1).href)}))}function LF(e){return gr(0,[(e()(),qs(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/army"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==qt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ai(1,671744,[[14,4]],0,ap,[up,qd,Bo],{routerLink:[0,"routerLink"]},null),ai(2,1720320,null,2,hp,[up,ol,gl,[2,op],[2,ap]],{routerLinkActive:[0,"routerLinkActive"]},null),nr(603979776,13,{links:1}),nr(603979776,14,{linksWithHrefs:1}),(e()(),cr(-1,null,["Army"]))],(function(e,n){e(n,1,0,"/army"),e(n,2,0,"active")}),(function(e,n){e(n,0,0,qt(n,1).target,qt(n,1).href)}))}function FF(e){return gr(0,[(e()(),qs(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/religion"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==qt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ai(1,671744,[[16,4]],0,ap,[up,qd,Bo],{routerLink:[0,"routerLink"]},null),ai(2,1720320,null,2,hp,[up,ol,gl,[2,op],[2,ap]],{routerLinkActive:[0,"routerLinkActive"]},null),nr(603979776,15,{links:1}),nr(603979776,16,{linksWithHrefs:1}),(e()(),cr(-1,null,["Religion"]))],(function(e,n){e(n,1,0,"/religion"),e(n,2,0,"active")}),(function(e,n){e(n,0,0,qt(n,1).target,qt(n,1).href)}))}function UF(e){return gr(0,[(e()(),qs(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/weather"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==qt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ai(1,671744,[[18,4]],0,ap,[up,qd,Bo],{routerLink:[0,"routerLink"]},null),ai(2,1720320,null,2,hp,[up,ol,gl,[2,op],[2,ap]],{routerLinkActive:[0,"routerLinkActive"]},null),nr(603979776,17,{links:1}),nr(603979776,18,{linksWithHrefs:1}),(e()(),cr(-1,null,["Weather"]))],(function(e,n){e(n,1,0,"/weather"),e(n,2,0,"active")}),(function(e,n){e(n,0,0,qt(n,1).target,qt(n,1).href)}))}function HF(e){return gr(0,[(e()(),qs(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/world"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==qt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ai(1,671744,[[20,4]],0,ap,[up,qd,Bo],{routerLink:[0,"routerLink"]},null),ai(2,1720320,null,2,hp,[up,ol,gl,[2,op],[2,ap]],{routerLinkActive:[0,"routerLinkActive"]},null),nr(603979776,19,{links:1}),nr(603979776,20,{linksWithHrefs:1}),(e()(),cr(-1,null,["World Map"]))],(function(e,n){e(n,1,0,"/world"),e(n,2,0,"active")}),(function(e,n){e(n,0,0,qt(n,1).target,qt(n,1).href)}))}function GF(e){return gr(0,[(e()(),qs(0,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/navy"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==qt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ai(1,671744,[[22,4]],0,ap,[up,qd,Bo],{routerLink:[0,"routerLink"]},null),ai(2,1720320,null,2,hp,[up,ol,gl,[2,op],[2,ap]],{routerLinkActive:[0,"routerLinkActive"]},null),nr(603979776,21,{links:1}),nr(603979776,22,{linksWithHrefs:1}),(e()(),cr(-1,null,["Navy"]))],(function(e,n){e(n,1,0,"/navy"),e(n,2,0,"active")}),(function(e,n){e(n,0,0,qt(n,1).target,qt(n,1).href)}))}function BF(e){return gr(0,[(e()(),qs(0,0,null,null,5,"a",[["class","entry3"],["draggable","false"],["ondragstart","return false;"],["routerLink","/heritage"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==qt(e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ai(1,671744,[[24,4]],0,ap,[up,qd,Bo],{routerLink:[0,"routerLink"]},null),ai(2,1720320,null,2,hp,[up,ol,gl,[2,op],[2,ap]],{routerLinkActive:[0,"routerLinkActive"]},null),nr(603979776,23,{links:1}),nr(603979776,24,{linksWithHrefs:1}),(e()(),cr(-1,null,["Heritage"]))],(function(e,n){e(n,1,0,"/heritage"),e(n,2,0,"active")}),(function(e,n){e(n,0,0,qt(n,1).target,qt(n,1).href)}))}function WF(e){return gr(0,[(e()(),qs(0,0,null,null,0,"a",[["class","empty"],["draggable","false"],["ondragstart","return false;"]],null,null,null,null,null))],null,null)}function VF(e){return gr(0,[(e()(),qs(0,0,null,null,40,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,0,"a",[["class","entry"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,wF)),ai(3,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,PF)),ai(5,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(6,0,null,null,5,"a",[["class","entry"],["draggable","false"],["ondragstart","return false;"],["routerLink","/resources"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==qt(e,7).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ai(7,671744,[[4,4]],0,ap,[up,qd,Bo],{routerLink:[0,"routerLink"]},null),ai(8,1720320,null,2,hp,[up,ol,gl,[2,op],[2,ap]],{routerLinkActive:[0,"routerLinkActive"]},null),nr(603979776,3,{links:1}),nr(603979776,4,{linksWithHrefs:1}),(e()(),cr(-1,null,["Resources"])),(e()(),Qs(16777216,null,null,1,null,xF)),ai(13,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,kF)),ai(15,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,MF)),ai(17,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,DF)),ai(19,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,LF)),ai(21,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,FF)),ai(23,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,UF)),ai(25,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,HF)),ai(27,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,GF)),ai(29,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(30,0,null,null,10,"div",[["class","entry2 end"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,BF)),ai(32,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,WF)),ai(34,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(35,0,null,null,5,"a",[["class","entry3"],["draggable","false"],["ondragstart","return false;"],["routerLink","/royal"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==qt(e,36).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t}),null,null)),ai(36,671744,[[26,4]],0,ap,[up,qd,Bo],{routerLink:[0,"routerLink"]},null),ai(37,1720320,null,2,hp,[up,ol,gl,[2,op],[2,ap]],{routerLinkActive:[0,"routerLinkActive"]},null),nr(603979776,25,{links:1}),nr(603979776,26,{linksWithHrefs:1}),(e()(),cr(-1,null,["Royal perks"]))],(function(e,n){var l=n.component;e(n,3,0,!l.isInRegions()),e(n,5,0,l.isInRegions()),e(n,7,0,"/resources"),e(n,8,0,"active"),e(n,13,0,l.isManagementEnabled()),e(n,15,0,l.isCraftingEnabled()),e(n,17,0,l.isResearchEnabled()),e(n,19,0,l.isMarketEnabled()),e(n,21,0,l.isArmyEnabled()),e(n,23,0,l.isReligionEnabled()),e(n,25,0,l.isWeatherEnabled()),e(n,27,0,l.isCartographyEnabled()),e(n,29,0,l.isNavyEnabled()),e(n,32,0,l.isHeritageUnlocked()),e(n,34,0,!l.isHeritageUnlocked()),e(n,36,0,"/royal"),e(n,37,0,"active")}),(function(e,n){e(n,6,0,qt(n,7).target,qt(n,7).href),e(n,35,0,qt(n,36).target,qt(n,36).href)}))}class zF{constructor(e,n,l){this.logService=e,this.changeDetectorRef=n,this.modalService=l,this.entries=[],this.logEntryTypes=qu}ngOnInit(){this.logService.registerForLogs().subscribe(()=>{this.entries=this.logService.getEntries(),this.scrollToBottom()}),this.entries=this.logService.getEntries(),this.scrollToBottom()}clearLogs(){this.logService.clearEntries()}scrollToBottom(){const e=this.scrollRef.nativeElement,n=e.scrollHeight-e.clientHeight<=e.scrollTop+25;this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges(),n&&(e.scrollTop=e.scrollHeight)}showFightReport(e){this.modalService.open(ju.FIGHT_REPORT),this.modalService.setFightReport(e)}showErrorReport(e){this.modalService.open(ju.ERROR),this.modalService.setModalErrorReport(e)}}var YF=Jl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:100%;max-height:100%}#clear-button[_ngcontent-%COMP%]{float:right}#log[_ngcontent-%COMP%]{height:100%;overflow-y:scroll;font-size:.8em}.title[_ngcontent-%COMP%]{border-bottom:1px solid #000;text-align:center;font-weight:700;font-size:1.1em}#title-text[_ngcontent-%COMP%]{display:inline-block;margin-left:20px;margin-top:3px}ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}li[_ngcontent-%COMP%]{padding-left:.5%;padding-bottom:.4%}.date[_ngcontent-%COMP%]{font-weight:bolder}.warning[_ngcontent-%COMP%]{color:var(--negative-colour)}.success[_ngcontent-%COMP%]{color:var(--positive-colour)}.mystical[_ngcontent-%COMP%]{color:#00008b}#log[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:1px;margin-left:2px}"]],data:{}});function $F(e){return gr(0,[(e()(),qs(0,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"span",[["class","date"]],null,null,null,null,null)),(e()(),cr(2,null,["day ",":"])),(e()(),qs(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit.day),e(n,3,0," "+n.parent.context.$implicit.message)}))}function KF(e){return gr(0,[(e()(),qs(0,0,null,null,3,"span",[["class","success"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"span",[["class","date"]],null,null,null,null,null)),(e()(),cr(2,null,["day ",":"])),(e()(),qs(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit.day),e(n,3,0," "+n.parent.context.$implicit.message)}))}function jF(e){return gr(0,[(e()(),qs(0,0,null,null,3,"span",[["class","warning"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"span",[["class","date"]],null,null,null,null,null)),(e()(),cr(2,null,["day ",":"])),(e()(),qs(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit.day),e(n,3,0," "+n.parent.context.$implicit.message)}))}function QF(e){return gr(0,[(e()(),qs(0,0,null,null,3,"span",[["class","mystical"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"span",[["class","date"]],null,null,null,null,null)),(e()(),cr(2,null,["day ",":"])),(e()(),qs(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit.day),e(n,3,0," "+n.parent.context.$implicit.message)}))}function qF(e){return gr(0,[(e()(),qs(0,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"span",[["class","date"]],null,null,null,null,null)),(e()(),cr(2,null,["day ",":"])),(e()(),qs(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null)),(e()(),qs(4,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.showFightReport(e.parent.context.$implicit.data)&&t),t}),null,null)),(e()(),cr(-1,null,["report"]))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit.day),e(n,3,0," "+n.parent.context.$implicit.message)}))}function XF(e){return gr(0,[(e()(),qs(0,0,null,null,5,"span",[["class","warning"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"span",[["class","date"]],null,null,null,null,null)),(e()(),cr(2,null,["day ",":"])),(e()(),qs(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null)),(e()(),qs(4,0,null,null,1,"button",[],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.showErrorReport(e.parent.context.$implicit.data)&&t),t}),null,null)),(e()(),cr(-1,null,["report"]))],null,(function(e,n){e(n,2,0,n.parent.context.$implicit.day),e(n,3,0," "+n.parent.context.$implicit.message)}))}function ZF(e){return gr(0,[(e()(),qs(0,0,null,null,14,"li",[],null,null,null,null,null)),(e()(),qs(1,0,null,null,13,"div",[],null,null,null,null,null)),ai(2,16384,null,0,Ra,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),Qs(16777216,null,null,1,null,$F)),ai(4,278528,null,0,Oa,[Ml,xl,Ra],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),Qs(16777216,null,null,1,null,KF)),ai(6,278528,null,0,Oa,[Ml,xl,Ra],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),Qs(16777216,null,null,1,null,jF)),ai(8,278528,null,0,Oa,[Ml,xl,Ra],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),Qs(16777216,null,null,1,null,QF)),ai(10,278528,null,0,Oa,[Ml,xl,Ra],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),Qs(16777216,null,null,1,null,qF)),ai(12,278528,null,0,Oa,[Ml,xl,Ra],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),Qs(16777216,null,null,1,null,XF)),ai(14,278528,null,0,Oa,[Ml,xl,Ra],{ngSwitchCase:[0,"ngSwitchCase"]},null)],(function(e,n){var l=n.component;e(n,2,0,n.context.$implicit.type),e(n,4,0,l.logEntryTypes.LOG),e(n,6,0,l.logEntryTypes.SUCCESS),e(n,8,0,l.logEntryTypes.WARNING),e(n,10,0,l.logEntryTypes.MYSTICAL),e(n,12,0,l.logEntryTypes.FIGHT_REPORT),e(n,14,0,l.logEntryTypes.ERROR)}),null)}function JF(e){return gr(0,[nr(402653184,1,{scrollRef:0}),(e()(),qs(1,0,null,null,9,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,4,"div",[["class","title"]],null,null,null,null,null)),(e()(),qs(3,0,null,null,1,"span",[["id","title-text"]],null,null,null,null,null)),(e()(),cr(-1,null,["Log"])),(e()(),qs(5,0,null,null,1,"button",[["id","clear-button"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.clearLogs()&&t),t}),null,null)),(e()(),cr(-1,null,["clear"])),(e()(),qs(7,0,[[1,0],["scroll",1]],null,3,"div",[["id","log"]],null,null,null,null,null)),(e()(),qs(8,0,null,null,2,"ul",[],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,ZF)),ai(10,278528,null,0,pa,[Ml,xl,Al],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,10,0,n.component.entries)}),null)}class eU{constructor(e,n,l){this.gameService=e,this.tickerService=n,this.optionsService=l,this.gameName=go.gameName,this.version=go.versionString}ngOnInit(){}showDevNotes(){this.gameService.showDevNotes()}getSound(){return this.optionsService.getOption(rf.SOUND_MASTER)}toggleSound(){this.optionsService.setOption(rf.SOUND_MASTER,!this.optionsService.getOption(rf.SOUND_MASTER))}isPaused(){return this.tickerService.isPaused()}pause(){this.tickerService.pause()}resume(){this.tickerService.resume()}}var nU=Jl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{height:100%;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;font-size:1.2em}.first[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 4%;height:30px}.second[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 4%;height:30px;-webkit-box-align:center;align-items:center;vertical-align:center}.second[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:24px}#center[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 84%;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}#wiki[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 4%;-webkit-box-pack:end;justify-content:flex-end;margin-top:5px}a[_ngcontent-%COMP%]{text-decoration:none;color:#000}#dev[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 4%;height:30px;-webkit-box-pack:end;justify-content:flex-end}img[_ngcontent-%COMP%]{width:30px;cursor:pointer}"]],data:{}});function lU(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[["class","first"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/sound_on.svg"],["title","turn master sounds off"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleSound()&&t),t}),null,null))],null,null)}function tU(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[["class","first"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/sound_off.svg"],["title","turn master sound on"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.toggleSound()&&t),t}),null,null))],null,null)}function iU(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[["class","second"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/pause2.svg"],["title","pause"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.pause()&&t),t}),null,null))],null,null)}function sU(e){return gr(0,[(e()(),qs(0,0,null,null,1,"span",[["class","second"]],null,null,null,null,null)),(e()(),qs(1,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/play.svg"],["title","play"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.resume()&&t),t}),null,null))],null,null)}function rU(e){return gr(0,[(e()(),qs(0,0,null,null,16,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),Qs(16777216,null,null,1,null,lU)),ai(2,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,tU)),ai(4,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,iU)),ai(6,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,sU)),ai(8,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),qs(9,0,null,null,2,"div",[["id","center"]],null,null,null,null,null)),(e()(),qs(10,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),cr(11,null,[""," v",""])),(e()(),qs(12,0,null,null,2,"span",[["id","wiki"]],null,null,null,null,null)),(e()(),qs(13,0,null,null,1,"a",[["href","http://wiki.villagerkings.com"],["rel","noopener noreferrer"],["target","_blank"]],null,null,null,null,null)),(e()(),cr(-1,null,["wiki"])),(e()(),qs(15,0,null,null,1,"span",[["id","dev"]],null,null,null,null,null)),(e()(),qs(16,0,null,null,0,"img",[["draggable","false"],["ondragstart","return false;"],["src","assets/dev.svg"],["title","dev notes"]],null,[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.showDevNotes()&&t),t}),null,null))],(function(e,n){var l=n.component;e(n,2,0,l.getSound()),e(n,4,0,!l.getSound()),e(n,6,0,!l.isPaused()),e(n,8,0,l.isPaused())}),(function(e,n){var l=n.component;e(n,11,0,l.gameName,l.version)}))}class uU{constructor(e,n,l,t,i,s,r,u,o,a,c,h,d,g,p,m,f){this.gameService=e,this.randomService=n,this.optionsService=l,this.tickerService=t,this.serializerService=i,this.resourceService=s,this.techService=r,this.logService=u,this.seaService=o,this.mountainsService=a,this.fortService=c,this.forestService=h,this.fieldService=d,this.managementService=g,this.villageService=p,this.soundService=m,this.router=f,e.registerForHeaderRowsChange().subscribe(e=>{e&&this.wrapperRef?this.wrapperRef.nativeElement.style.gridTemplateRows="8% auto 4%":!e&&this.wrapperRef&&(this.wrapperRef.nativeElement.style.gridTemplateRows="4% auto 4%")})}ngOnInit(){this.serializerService.hasSave()?this.serializerService.initLoad():this.initGame(),this.managementService.getSecondHeaderRow()&&this.wrapperRef&&(this.wrapperRef.nativeElement.style.gridTemplateRows="8% auto 4%"),this.tickerService.start(),this.optionsService.getOption(rf.PAUSE_ON_INIT)&&(this.logService.warning("Game paused on start (settings option)"),this.tickerService.pause()),this.soundService.playMusic()}initGame(){this.gameService.init(),this.optionsService.init(),this.resourceService.init(),this.villageService.init(),this.fortService.init(),this.forestService.init(),this.fieldService.init(),this.mountainsService.init(),this.seaService.init()}exitSave(e){this.serializerService.initSave()}pause(e){if("VillagerKings"===e.target.id)switch(e.key){case"p":"VillagerKings"===e.target.id&&(this.tickerService.isPaused()?this.tickerService.resume():this.tickerService.pause());break;case"m":this.gameService.isEnabled(Iu.CARTOGRAPHY)&&this.router.navigate(["/world"])}}}var oU=Jl({encapsulation:0,styles:[["#wrapper[_ngcontent-%COMP%]{position:relative;display:grid;height:100%;max-height:100%;grid-template-columns:11% auto 20%;grid-template-rows:4% auto 4%;border:1px solid #000;background:var(--background-clour);background-image:url(old_parchment.85c5af81bf778b941dfc.jpg);background-size:100% 100%}#footer[_ngcontent-%COMP%], #header[_ngcontent-%COMP%]{grid-column-start:1;grid-column-end:4;border:1px solid #000;overflow:hidden}#left-menu[_ngcontent-%COMP%]{grid-column-start:1;grid-column-end:2;border:1px solid #000;overflow:hidden}#center[_ngcontent-%COMP%]{grid-column-start:2;grid-column-end:3;border:1px solid #000;overflow:hidden}#screen[_ngcontent-%COMP%]{height:100%}#right-menu[_ngcontent-%COMP%]{grid-column-start:3;grid-column-end:4;border:1px solid #000;overflow:hidden}.asset[_ngcontent-%COMP%]{display:none}"]],data:{}});function aU(e){return gr(0,[nr(402653184,1,{wrapperRef:0}),(e()(),qs(1,0,[[1,0],["wrap",1]],null,135,"div",[["id","wrapper"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/buff.svg"]],null,null,null,null,null)),(e()(),qs(3,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/complex_management_off_off.svg"]],null,null,null,null,null)),(e()(),qs(4,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/complex_management_off_on.svg"]],null,null,null,null,null)),(e()(),qs(5,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/complex_management_on_off.svg"]],null,null,null,null,null)),(e()(),qs(6,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/complex_management_on_on.svg"]],null,null,null,null,null)),(e()(),qs(7,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/details.svg"]],null,null,null,null,null)),(e()(),qs(8,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/dev.svg"]],null,null,null,null,null)),(e()(),qs(9,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/eye.svg"]],null,null,null,null,null)),(e()(),qs(10,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/foresight.svg"]],null,null,null,null,null)),(e()(),qs(11,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/forest.svg"]],null,null,null,null,null)),(e()(),qs(12,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/gear.svg"]],null,null,null,null,null)),(e()(),qs(13,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/gear_off.svg"]],null,null,null,null,null)),(e()(),qs(14,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/hammer.svg"]],null,null,null,null,null)),(e()(),qs(15,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/kred.png"]],null,null,null,null,null)),(e()(),qs(16,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/land.svg"]],null,null,null,null,null)),(e()(),qs(17,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/manage.svg"]],null,null,null,null,null)),(e()(),qs(18,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/mountains.svg"]],null,null,null,null,null)),(e()(),qs(19,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/pause.svg"]],null,null,null,null,null)),(e()(),qs(20,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/pause2.svg"]],null,null,null,null,null)),(e()(),qs(21,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/play.svg"]],null,null,null,null,null)),(e()(),qs(22,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/population.svg"]],null,null,null,null,null)),(e()(),qs(23,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/question_mark.svg"]],null,null,null,null,null)),(e()(),qs(24,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/settings.svg"]],null,null,null,null,null)),(e()(),qs(25,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/sound_off.svg"]],null,null,null,null,null)),(e()(),qs(26,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/sound_on.svg"]],null,null,null,null,null)),(e()(),qs(27,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/stop.svg"]],null,null,null,null,null)),(e()(),qs(28,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/tick.svg"]],null,null,null,null,null)),(e()(),qs(29,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/time.svg"]],null,null,null,null,null)),(e()(),qs(30,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/trade.svg"]],null,null,null,null,null)),(e()(),qs(31,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/upgrade.svg"]],null,null,null,null,null)),(e()(),qs(32,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/village.svg"]],null,null,null,null,null)),(e()(),qs(33,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/religion/faith.svg"]],null,null,null,null,null)),(e()(),qs(34,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/religion/faith_shield.svg"]],null,null,null,null,null)),(e()(),qs(35,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/weather/clouds.svg"]],null,null,null,null,null)),(e()(),qs(36,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/weather/rain.svg"]],null,null,null,null,null)),(e()(),qs(37,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/weather/snow.svg"]],null,null,null,null,null)),(e()(),qs(38,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/weather/storm.svg"]],null,null,null,null,null)),(e()(),qs(39,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/weather/sun.svg"]],null,null,null,null,null)),(e()(),qs(40,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/weather/wind.svg"]],null,null,null,null,null)),(e()(),qs(41,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/army/attack.svg"]],null,null,null,null,null)),(e()(),qs(42,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/army/barracks.svg"]],null,null,null,null,null)),(e()(),qs(43,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/army/defense.svg"]],null,null,null,null,null)),(e()(),qs(44,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/army/invasion.svg"]],null,null,null,null,null)),(e()(),qs(45,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/army/recruit.svg"]],null,null,null,null,null)),(e()(),qs(46,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/happiness/angry.svg"]],null,null,null,null,null)),(e()(),qs(47,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/happiness/happy.svg"]],null,null,null,null,null)),(e()(),qs(48,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/happiness/neutral.svg"]],null,null,null,null,null)),(e()(),qs(49,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/happiness/overjoyed.svg"]],null,null,null,null,null)),(e()(),qs(50,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/happiness/sad.svg"]],null,null,null,null,null)),(e()(),qs(51,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/apple.svg"]],null,null,null,null,null)),(e()(),qs(52,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/barley.svg"]],null,null,null,null,null)),(e()(),qs(53,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/beer.svg"]],null,null,null,null,null)),(e()(),qs(54,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/berry.svg"]],null,null,null,null,null)),(e()(),qs(55,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/bow.svg"]],null,null,null,null,null)),(e()(),qs(56,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/bread.svg"]],null,null,null,null,null)),(e()(),qs(57,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/brick.svg"]],null,null,null,null,null)),(e()(),qs(58,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/bronze.svg"]],null,null,null,null,null)),(e()(),qs(59,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/brushwood.svg"]],null,null,null,null,null)),(e()(),qs(60,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/cheese.svg"]],null,null,null,null,null)),(e()(),qs(61,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/chicken.svg"]],null,null,null,null,null)),(e()(),qs(62,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/clay.svg"]],null,null,null,null,null)),(e()(),qs(63,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/clothes.svg"]],null,null,null,null,null)),(e()(),qs(64,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/coal.svg"]],null,null,null,null,null)),(e()(),qs(65,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/coins.svg"]],null,null,null,null,null)),(e()(),qs(66,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/cooked_fish.svg"]],null,null,null,null,null)),(e()(),qs(67,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/cooked_meat.svg"]],null,null,null,null,null)),(e()(),qs(68,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/copper.svg"]],null,null,null,null,null)),(e()(),qs(69,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/copper_ore.svg"]],null,null,null,null,null)),(e()(),qs(70,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/cotton.svg"]],null,null,null,null,null)),(e()(),qs(71,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/cow.svg"]],null,null,null,null,null)),(e()(),qs(72,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/cut_stone.svg"]],null,null,null,null,null)),(e()(),qs(73,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/egg.svg"]],null,null,null,null,null)),(e()(),qs(74,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/fabric.svg"]],null,null,null,null,null)),(e()(),qs(75,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/fish.svg"]],null,null,null,null,null)),(e()(),qs(76,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/flour.svg"]],null,null,null,null,null)),(e()(),qs(77,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/food.svg"]],null,null,null,null,null)),(e()(),qs(78,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/fuel.svg"]],null,null,null,null,null)),(e()(),qs(79,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/fur.svg"]],null,null,null,null,null)),(e()(),qs(80,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/gold.svg"]],null,null,null,null,null)),(e()(),qs(81,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/gold_ore.svg"]],null,null,null,null,null)),(e()(),qs(82,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/grape.svg"]],null,null,null,null,null)),(e()(),qs(83,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/hay.svg"]],null,null,null,null,null)),(e()(),qs(84,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/hop.svg"]],null,null,null,null,null)),(e()(),qs(85,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/horse.svg"]],null,null,null,null,null)),(e()(),qs(86,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/iron.svg"]],null,null,null,null,null)),(e()(),qs(87,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/iron_ore.svg"]],null,null,null,null,null)),(e()(),qs(88,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/leather.svg"]],null,null,null,null,null)),(e()(),qs(89,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/leather_armor.svg"]],null,null,null,null,null)),(e()(),qs(90,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/light_armor.svg"]],null,null,null,null,null)),(e()(),qs(91,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/heavy_armor.svg"]],null,null,null,null,null)),(e()(),qs(92,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/log.svg"]],null,null,null,null,null)),(e()(),qs(93,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/meat.svg"]],null,null,null,null,null)),(e()(),qs(94,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/meat_soup.svg"]],null,null,null,null,null)),(e()(),qs(95,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/milk.svg"]],null,null,null,null,null)),(e()(),qs(96,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/mushroom.svg"]],null,null,null,null,null)),(e()(),qs(97,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/nails.svg"]],null,null,null,null,null)),(e()(),qs(98,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/omelette.svg"]],null,null,null,null,null)),(e()(),qs(99,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/pig.svg"]],null,null,null,null,null)),(e()(),qs(100,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/plank.svg"]],null,null,null,null,null)),(e()(),qs(101,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/pottery.svg"]],null,null,null,null,null)),(e()(),qs(102,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/sheep.svg"]],null,null,null,null,null)),(e()(),qs(103,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/silver.svg"]],null,null,null,null,null)),(e()(),qs(104,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/silver_ore.svg"]],null,null,null,null,null)),(e()(),qs(105,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/steel.svg"]],null,null,null,null,null)),(e()(),qs(106,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/stone.svg"]],null,null,null,null,null)),(e()(),qs(107,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/axe.svg"]],null,null,null,null,null)),(e()(),qs(108,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/hammer.svg"]],null,null,null,null,null)),(e()(),qs(109,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/pickaxe.svg"]],null,null,null,null,null)),(e()(),qs(110,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/pie.svg"]],null,null,null,null,null)),(e()(),qs(111,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/shovel.svg"]],null,null,null,null,null)),(e()(),qs(112,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/spear.svg"]],null,null,null,null,null)),(e()(),qs(113,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/sword.svg"]],null,null,null,null,null)),(e()(),qs(114,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/tin.svg"]],null,null,null,null,null)),(e()(),qs(115,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/tin_ore.svg"]],null,null,null,null,null)),(e()(),qs(116,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/vegetable_soup.svg"]],null,null,null,null,null)),(e()(),qs(117,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/wheat.svg"]],null,null,null,null,null)),(e()(),qs(118,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/wine.svg"]],null,null,null,null,null)),(e()(),qs(119,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/shield.svg"]],null,null,null,null,null)),(e()(),qs(120,0,null,null,0,"img",[["alt",""],["class","asset"],["src","assets/resources/wool.svg"]],null,null,null,null,null)),(e()(),qs(121,0,null,null,2,"div",[["id","header"]],null,null,null,null,null)),(e()(),qs(122,0,null,null,1,"app-header",[],null,null,null,AF,EL)),ai(123,114688,null,0,SL,[Hx,sf,df,pf,yf,oT,uf,Sf,nx,mf,SO,Gb,up,nO],null,null),(e()(),qs(124,0,null,null,2,"div",[["id","left-menu"]],null,null,null,null,null)),(e()(),qs(125,0,null,null,1,"app-left-menu",[],null,null,null,VF,_F)),ai(126,114688,null,0,NF,[Sf,yf,up],null,null),(e()(),qs(127,0,null,null,3,"div",[["id","center"]],null,null,null,null,null)),(e()(),qs(128,0,null,null,2,"div",[["id","screen"]],null,null,null,null,null)),(e()(),qs(129,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),ai(130,212992,null,0,pp,[gp,Ml,il,[8,null],_n],null,null),(e()(),qs(131,0,null,null,2,"div",[["id","right-menu"]],null,null,null,null,null)),(e()(),qs(132,0,null,null,1,"app-log",[],null,null,null,JF,YF)),ai(133,114688,null,0,zF,[df,_n,pf],null,null),(e()(),qs(134,0,null,null,2,"div",[["id","footer"]],null,null,null,null,null)),(e()(),qs(135,0,null,null,1,"app-footer",[],null,null,null,rU,nU)),ai(136,114688,null,0,eU,[Sf,nx,uf],null,null)],(function(e,n){e(n,123,0),e(n,126,0),e(n,130,0),e(n,133,0),e(n,136,0)}),null)}var cU=Jl({encapsulation:0,styles:[["#IEwrapper[_ngcontent-%COMP%]{border:1px solid #000;background:#919191;font-size:3em;height:100%;max-height:100%;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}#IEwrapper[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center}"]],data:{}});function hU(e){return gr(0,[(e()(),qs(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),qs(1,0,null,null,1,"app-modals",[],null,null,null,gL,dL)),ai(2,114688,null,0,hL,[],null,null),(e()(),qs(3,0,null,null,1,"app-game",[],null,[["window","beforeunload"],["document","keydown"]],(function(e,n,l){var t=!0;return"window:beforeunload"===n&&(t=!1!==qt(e,4).exitSave(l)&&t),"document:keydown"===n&&(t=!1!==qt(e,4).pause(l)&&t),t}),aU,oU)),ai(4,114688,null,0,uU,[Sf,Yu,uf,nx,Hx,yf,SO,df,nC,R_,Eb,xN,e_,nO,iR,cf,up],null,null)],(function(e,n){e(n,2,0),e(n,4,0)}),null)}function dU(e){return gr(0,[(e()(),qs(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),qs(1,0,null,null,6,"div",[["id","IEwrapper"]],null,null,null,null,null)),(e()(),qs(2,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),cr(-1,null,["Internet Explorer is not supported."])),(e()(),qs(4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),cr(-1,null,["Please use Firefox, Chrome, Safari"])),(e()(),qs(6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),cr(-1,null,["or Edge."]))],null,null)}function gU(e){return gr(0,[(e()(),Qs(16777216,null,null,1,null,hU)),ai(1,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null),(e()(),Qs(16777216,null,null,1,null,dU)),ai(3,16384,null,0,fa,[Ml,xl],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,1,0,!l.isIE()),e(n,3,0,l.isIE())}),null)}function pU(e){return gr(0,[(e()(),qs(0,0,null,null,1,"app-root",[],null,[["document","contextmenu"]],(function(e,n,l){var t=!0;return"document:contextmenu"===n&&(t=!1!==qt(e,1).catchContextMenu(l)&&t),t}),gU,cU)),ai(1,49152,null,0,Uo,[],null,null)],null,null)}var mU=Ht("app-root",Uo,pU,{},{},[]);class fU{}class SU{}const EU="*";function vU(e,n=null){return{type:2,steps:e,options:n}}function RU(e){return{type:6,styles:e,offset:null}}function OU(e){Promise.resolve(null).then(e)}class bU{constructor(e=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=e+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){OU(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){}setPosition(e){}getPosition(){return 0}triggerCallback(e){const n="start"==e?this._onStartFns:this._onDoneFns;n.forEach(e=>e()),n.length=0}}class TU{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let n=0,l=0,t=0;const i=this.players.length;0==i?OU(()=>this._onFinish()):this.players.forEach(e=>{e.onDone(()=>{++n==i&&this._onFinish()}),e.onDestroy(()=>{++l==i&&this._onDestroy()}),e.onStart(()=>{++t==i&&this._onStart()})}),this.totalTime=this.players.reduce((e,n)=>Math.max(e,n.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const n=e*this.totalTime;this.players.forEach(e=>{const l=e.totalTime?Math.min(1,n/e.totalTime):1;e.setPosition(l)})}getPosition(){let e=0;return this.players.forEach(n=>{const l=n.getPosition();e=Math.min(l,e)}),e}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const n="start"==e?this._onStartFns:this._onDoneFns;n.forEach(e=>e()),n.length=0}}const CU="!";function IU(){return"undefined"!=typeof process}function yU(e){switch(e.length){case 0:return new bU;case 1:return e[0];default:return new TU(e)}}function AU(e,n,l,t,i={},s={}){const r=[],u=[];let o=-1,a=null;if(t.forEach(e=>{const l=e.offset,t=l==o,c=t&&a||{};Object.keys(e).forEach(l=>{let t=l,u=e[l];if("offset"!==l)switch(t=n.normalizePropertyName(t,r),u){case CU:u=i[l];break;case EU:u=s[l];break;default:u=n.normalizeStyleValue(l,t,u,r)}c[t]=u}),t||u.push(c),a=c,o=l}),r.length){const e="\n - ";throw new Error(`Unable to animate due to the following errors:${e}${r.join(e)}`)}return u}function NU(e,n,l,t){switch(n){case"start":e.onStart(()=>t(l&&_U(l,"start",e)));break;case"done":e.onDone(()=>t(l&&_U(l,"done",e)));break;case"destroy":e.onDestroy(()=>t(l&&_U(l,"destroy",e)))}}function _U(e,n,l){const t=l.totalTime,i=wU(e.element,e.triggerName,e.fromState,e.toState,n||e.phaseName,null==t?e.totalTime:t,!!l.disabled),s=e._data;return null!=s&&(i._data=s),i}function wU(e,n,l,t,i="",s=0,r){return{element:e,triggerName:n,fromState:l,toState:t,phaseName:i,totalTime:s,disabled:!!r}}function PU(e,n,l){let t;return e instanceof Map?(t=e.get(n))||e.set(n,t=l):(t=e[n])||(t=e[n]=l),t}function xU(e){const n=e.indexOf(":");return[e.substring(1,n),e.substr(n+1)]}let kU=(e,n)=>!1,MU=(e,n)=>!1,DU=(e,n,l)=>[];const LU=IU();(LU||"undefined"!=typeof Element)&&(kU=(e,n)=>e.contains(n),MU=(()=>{if(LU||Element.prototype.matches)return(e,n)=>e.matches(n);{const e=Element.prototype,n=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;return n?(e,l)=>n.apply(e,[l]):MU}})(),DU=(e,n,l)=>{let t=[];if(l)t.push(...e.querySelectorAll(n));else{const l=e.querySelector(n);l&&t.push(l)}return t});let FU=null,UU=!1;const HU=MU,GU=kU,BU=DU;let WU=(()=>(class{validateStyleProperty(e){return function(e){FU||(FU=("undefined"!=typeof document?document.body:null)||{},UU=!!FU.style&&"WebkitAppearance"in FU.style);let n=!0;return FU.style&&!function(e){return"ebkit"==e.substring(1,6)}(e)&&!(n=e in FU.style)&&UU&&(n="Webkit"+e.charAt(0).toUpperCase()+e.substr(1)in FU.style),n}(e)}matchesElement(e,n){return HU(e,n)}containsElement(e,n){return GU(e,n)}query(e,n,l){return BU(e,n,l)}computeStyle(e,n,l){return l||""}animate(e,n,l,t,i,s=[],r){return new bU(l,t)}}))(),VU=(()=>{class e{}return e.NOOP=new WU,e})();const zU=1e3,YU="{{",$U="ng-enter",KU="ng-leave",jU="ng-trigger",QU=".ng-trigger",qU="ng-animating",XU=".ng-animating";function ZU(e){if("number"==typeof e)return e;const n=e.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:JU(parseFloat(n[1]),n[2])}function JU(e,n){switch(n){case"s":return e*zU;default:return e}}function eH(e,n,l){return e.hasOwnProperty("duration")?e:function(e,n,l){let t,i=0,s="";if("string"==typeof e){const l=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===l)return n.push(`The provided timing value "${e}" is invalid.`),{duration:0,delay:0,easing:""};t=JU(parseFloat(l[1]),l[2]);const r=l[3];null!=r&&(i=JU(parseFloat(r),l[4]));const u=l[5];u&&(s=u)}else t=e;if(!l){let l=!1,s=n.length;t<0&&(n.push("Duration values below 0 are not allowed for this animation step."),l=!0),i<0&&(n.push("Delay values below 0 are not allowed for this animation step."),l=!0),l&&n.splice(s,0,`The provided timing value "${e}" is invalid.`)}return{duration:t,delay:i,easing:s}}(e,n,l)}function nH(e,n={}){return Object.keys(e).forEach(l=>{n[l]=e[l]}),n}function lH(e,n,l={}){if(n)for(let t in e)l[t]=e[t];else nH(e,l);return l}function tH(e,n,l){return l?n+":"+l+";":""}function iH(e){let n="";for(let l=0;l<e.style.length;l++){const t=e.style.item(l);n+=tH(0,t,e.style.getPropertyValue(t))}for(const l in e.style)e.style.hasOwnProperty(l)&&!l.startsWith("_")&&(n+=tH(0,l.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e.style[l]));e.setAttribute("style",n)}function sH(e,n,l){e.style&&(Object.keys(n).forEach(t=>{const i=gH(t);l&&!l.hasOwnProperty(t)&&(l[t]=e.style[i]),e.style[i]=n[t]}),IU()&&iH(e))}function rH(e,n){e.style&&(Object.keys(n).forEach(n=>{const l=gH(n);e.style[l]=""}),IU()&&iH(e))}function uH(e){return Array.isArray(e)?1==e.length?e[0]:vU(e):e}const oH=new RegExp(`${YU}\\s*(.+?)\\s*}}`,"g");function aH(e){let n=[];if("string"==typeof e){const l=e.toString();let t;for(;t=oH.exec(l);)n.push(t[1]);oH.lastIndex=0}return n}function cH(e,n,l){const t=e.toString(),i=t.replace(oH,(e,t)=>{let i=n[t];return n.hasOwnProperty(t)||(l.push(`Please provide a value for the animation param ${t}`),i=""),i.toString()});return i==t?e:i}function hH(e){const n=[];let l=e.next();for(;!l.done;)n.push(l.value),l=e.next();return n}const dH=/-+([a-z0-9])/g;function gH(e){return e.replace(dH,(...e)=>e[1].toUpperCase())}function pH(e,n,l){switch(n.type){case 7:return e.visitTrigger(n,l);case 0:return e.visitState(n,l);case 1:return e.visitTransition(n,l);case 2:return e.visitSequence(n,l);case 3:return e.visitGroup(n,l);case 4:return e.visitAnimate(n,l);case 5:return e.visitKeyframes(n,l);case 6:return e.visitStyle(n,l);case 8:return e.visitReference(n,l);case 9:return e.visitAnimateChild(n,l);case 10:return e.visitAnimateRef(n,l);case 11:return e.visitQuery(n,l);case 12:return e.visitStagger(n,l);default:throw new Error(`Unable to resolve animation metadata node #${n.type}`)}}const mH="*";function fH(e,n){const l=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(e=>(function(e,n,l){if(":"==e[0]){const t=function(e,n){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,n)=>parseFloat(n)>parseFloat(e);case":decrement":return(e,n)=>parseFloat(n)<parseFloat(e);default:return n.push(`The transition alias value "${e}" is not supported`),"* => *"}}(e,l);if("function"==typeof t)return void n.push(t);e=t}const t=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==t||t.length<4)return l.push(`The provided transition expression "${e}" is not supported`),n;const i=t[1],s=t[2],r=t[3];n.push(vH(i,r)),"<"!=s[0]||i==mH&&r==mH||n.push(vH(r,i))})(e,l,n)):l.push(e),l}const SH=new Set(["true","1"]),EH=new Set(["false","0"]);function vH(e,n){const l=SH.has(e)||EH.has(e),t=SH.has(n)||EH.has(n);return(i,s)=>{let r=e==mH||e==i,u=n==mH||n==s;return!r&&l&&"boolean"==typeof i&&(r=i?SH.has(e):EH.has(e)),!u&&t&&"boolean"==typeof s&&(u=s?SH.has(n):EH.has(n)),r&&u}}const RH=":self",OH=new RegExp(`s*${RH}s*,?`,"g");function bH(e,n,l){return new CH(e).build(n,l)}const TH="";class CH{constructor(e){this._driver=e}build(e,n){const l=new IH(n);return this._resetContextStyleTimingState(l),pH(this,uH(e),l)}_resetContextStyleTimingState(e){e.currentQuerySelector=TH,e.collectedStyles={},e.collectedStyles[TH]={},e.currentTime=0}visitTrigger(e,n){let l=n.queryCount=0,t=n.depCount=0;const i=[],s=[];return"@"==e.name.charAt(0)&&n.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(e=>{if(this._resetContextStyleTimingState(n),0==e.type){const l=e,t=l.name;t.toString().split(/\s*,\s*/).forEach(e=>{l.name=e,i.push(this.visitState(l,n))}),l.name=t}else if(1==e.type){const i=this.visitTransition(e,n);l+=i.queryCount,t+=i.depCount,s.push(i)}else n.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:i,transitions:s,queryCount:l,depCount:t,options:null}}visitState(e,n){const l=this.visitStyle(e.styles,n),t=e.options&&e.options.params||null;if(l.containsDynamicStyles){const i=new Set,s=t||{};if(l.styles.forEach(e=>{if(yH(e)){const n=e;Object.keys(n).forEach(e=>{aH(n[e]).forEach(e=>{s.hasOwnProperty(e)||i.add(e)})})}}),i.size){const l=hH(i.values());n.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${l.join(", ")}`)}}return{type:0,name:e.name,style:l,options:t?{params:t}:null}}visitTransition(e,n){n.queryCount=0,n.depCount=0;const l=pH(this,uH(e.animation),n);return{type:1,matchers:fH(e.expr,n.errors),animation:l,queryCount:n.queryCount,depCount:n.depCount,options:AH(e.options)}}visitSequence(e,n){return{type:2,steps:e.steps.map(e=>pH(this,e,n)),options:AH(e.options)}}visitGroup(e,n){const l=n.currentTime;let t=0;const i=e.steps.map(e=>{n.currentTime=l;const i=pH(this,e,n);return t=Math.max(t,n.currentTime),i});return n.currentTime=t,{type:3,steps:i,options:AH(e.options)}}visitAnimate(e,n){const l=function(e,n){let l=null;if(e.hasOwnProperty("duration"))l=e;else if("number"==typeof e)return NH(eH(e,n).duration,0,"");const t=e;if(t.split(/\s+/).some(e=>"{"==e.charAt(0)&&"{"==e.charAt(1))){const e=NH(0,0,"");return e.dynamic=!0,e.strValue=t,e}return NH((l=l||eH(t,n)).duration,l.delay,l.easing)}(e.timings,n.errors);let t;n.currentAnimateTimings=l;let i=e.styles?e.styles:RU({});if(5==i.type)t=this.visitKeyframes(i,n);else{let i=e.styles,s=!1;if(!i){s=!0;const e={};l.easing&&(e.easing=l.easing),i=RU(e)}n.currentTime+=l.duration+l.delay;const r=this.visitStyle(i,n);r.isEmptyStep=s,t=r}return n.currentAnimateTimings=null,{type:4,timings:l,style:t,options:null}}visitStyle(e,n){const l=this._makeStyleAst(e,n);return this._validateStyleAst(l,n),l}_makeStyleAst(e,n){const l=[];Array.isArray(e.styles)?e.styles.forEach(e=>{"string"==typeof e?e==EU?l.push(e):n.errors.push(`The provided style string value ${e} is not allowed.`):l.push(e)}):l.push(e.styles);let t=!1,i=null;return l.forEach(e=>{if(yH(e)){const n=e,l=n.easing;if(l&&(i=l,delete n.easing),!t)for(let e in n)if(n[e].toString().indexOf(YU)>=0){t=!0;break}}}),{type:6,styles:l,easing:i,offset:e.offset,containsDynamicStyles:t,options:null}}_validateStyleAst(e,n){const l=n.currentAnimateTimings;let t=n.currentTime,i=n.currentTime;l&&i>0&&(i-=l.duration+l.delay),e.styles.forEach(e=>{"string"!=typeof e&&Object.keys(e).forEach(l=>{if(!this._driver.validateStyleProperty(l))return void n.errors.push(`The provided animation property "${l}" is not a supported CSS property for animations`);const s=n.collectedStyles[n.currentQuerySelector],r=s[l];let u=!0;r&&(i!=t&&i>=r.startTime&&t<=r.endTime&&(n.errors.push(`The CSS property "${l}" that exists between the times of "${r.startTime}ms" and "${r.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${t}ms"`),u=!1),i=r.startTime),u&&(s[l]={startTime:i,endTime:t}),n.options&&function(e,n,l){const t=n.params||{},i=aH(e);i.length&&i.forEach(e=>{t.hasOwnProperty(e)||l.push(`Unable to resolve the local animation param ${e} in the given list of values`)})}(e[l],n.options,n.errors)})})}visitKeyframes(e,n){const l={type:5,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push("keyframes() must be placed inside of a call to animate()"),l;let t=0;const i=[];let s=!1,r=!1,u=0;const o=e.steps.map(e=>{const l=this._makeStyleAst(e,n);let o=null!=l.offset?l.offset:function(e){if("string"==typeof e)return null;let n=null;if(Array.isArray(e))e.forEach(e=>{if(yH(e)&&e.hasOwnProperty("offset")){const l=e;n=parseFloat(l.offset),delete l.offset}});else if(yH(e)&&e.hasOwnProperty("offset")){const l=e;n=parseFloat(l.offset),delete l.offset}return n}(l.styles),a=0;return null!=o&&(t++,a=l.offset=o),r=r||a<0||a>1,s=s||a<u,u=a,i.push(a),l});r&&n.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),s&&n.errors.push("Please ensure that all keyframe offsets are in order");const a=e.steps.length;let c=0;t>0&&t<a?n.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==t&&(c=1/(a-1));const h=a-1,d=n.currentTime,g=n.currentAnimateTimings,p=g.duration;return o.forEach((e,t)=>{const s=c>0?t==h?1:c*t:i[t],r=s*p;n.currentTime=d+g.delay+r,g.duration=r,this._validateStyleAst(e,n),e.offset=s,l.styles.push(e)}),l}visitReference(e,n){return{type:8,animation:pH(this,uH(e.animation),n),options:AH(e.options)}}visitAnimateChild(e,n){return n.depCount++,{type:9,options:AH(e.options)}}visitAnimateRef(e,n){return{type:10,animation:this.visitReference(e.animation,n),options:AH(e.options)}}visitQuery(e,n){const l=n.currentQuerySelector,t=e.options||{};n.queryCount++,n.currentQuery=e;const[i,s]=function(e){const n=!!e.split(/\s*,\s*/).find(e=>e==RH);return n&&(e=e.replace(OH,"")),[e=e.replace(/@\*/g,QU).replace(/@\w+/g,e=>QU+"-"+e.substr(1)).replace(/:animating/g,XU),n]}(e.selector);n.currentQuerySelector=l.length?l+" "+i:i,PU(n.collectedStyles,n.currentQuerySelector,{});const r=pH(this,uH(e.animation),n);return n.currentQuery=null,n.currentQuerySelector=l,{type:11,selector:i,limit:t.limit||0,optional:!!t.optional,includeSelf:s,animation:r,originalSelector:e.selector,options:AH(e.options)}}visitStagger(e,n){n.currentQuery||n.errors.push("stagger() can only be used inside of query()");const l="full"===e.timings?{duration:0,delay:0,easing:"full"}:eH(e.timings,n.errors,!0);return{type:12,animation:pH(this,uH(e.animation),n),timings:l,options:null}}}class IH{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function yH(e){return!Array.isArray(e)&&"object"==typeof e}function AH(e){var n;return e?(e=nH(e)).params&&(e.params=(n=e.params)?nH(n):null):e={},e}function NH(e,n,l){return{duration:e,delay:n,easing:l}}function _H(e,n,l,t,i,s,r=null,u=!1){return{type:1,element:e,keyframes:n,preStyleProps:l,postStyleProps:t,duration:i,delay:s,totalTime:i+s,easing:r,subTimeline:u}}class wH{constructor(){this._map=new Map}consume(e){let n=this._map.get(e);return n?this._map.delete(e):n=[],n}append(e,n){let l=this._map.get(e);l||this._map.set(e,l=[]),l.push(...n)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const PH=1,xH=new RegExp(":enter","g"),kH=new RegExp(":leave","g");function MH(e,n,l,t,i,s={},r={},u,o,a=[]){return(new DH).buildKeyframes(e,n,l,t,i,s,r,u,o,a)}class DH{buildKeyframes(e,n,l,t,i,s,r,u,o,a=[]){o=o||new wH;const c=new FH(e,n,o,t,i,a,[]);c.options=u,c.currentTimeline.setStyles([s],null,c.errors,u),pH(this,l,c);const h=c.timelines.filter(e=>e.containsAnimation());if(h.length&&Object.keys(r).length){const e=h[h.length-1];e.allowOnlyTimelineStyles()||e.setStyles([r],null,c.errors,u)}return h.length?h.map(e=>e.buildKeyframes()):[_H(n,[],[],[],0,0,"",!1)]}visitTrigger(e,n){}visitState(e,n){}visitTransition(e,n){}visitAnimateChild(e,n){const l=n.subInstructions.consume(n.element);if(l){const t=n.createSubContext(e.options),i=n.currentTimeline.currentTime,s=this._visitSubInstructions(l,t,t.options);i!=s&&n.transformIntoNewTimeline(s)}n.previousNode=e}visitAnimateRef(e,n){const l=n.createSubContext(e.options);l.transformIntoNewTimeline(),this.visitReference(e.animation,l),n.transformIntoNewTimeline(l.currentTimeline.currentTime),n.previousNode=e}_visitSubInstructions(e,n,l){let t=n.currentTimeline.currentTime;const i=null!=l.duration?ZU(l.duration):null,s=null!=l.delay?ZU(l.delay):null;return 0!==i&&e.forEach(e=>{const l=n.appendInstructionToTimeline(e,i,s);t=Math.max(t,l.duration+l.delay)}),t}visitReference(e,n){n.updateOptions(e.options,!0),pH(this,e.animation,n),n.previousNode=e}visitSequence(e,n){const l=n.subContextCount;let t=n;const i=e.options;if(i&&(i.params||i.delay)&&((t=n.createSubContext(i)).transformIntoNewTimeline(),null!=i.delay)){6==t.previousNode.type&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=LH);const e=ZU(i.delay);t.delayNextStep(e)}e.steps.length&&(e.steps.forEach(e=>pH(this,e,t)),t.currentTimeline.applyStylesToKeyframe(),t.subContextCount>l&&t.transformIntoNewTimeline()),n.previousNode=e}visitGroup(e,n){const l=[];let t=n.currentTimeline.currentTime;const i=e.options&&e.options.delay?ZU(e.options.delay):0;e.steps.forEach(s=>{const r=n.createSubContext(e.options);i&&r.delayNextStep(i),pH(this,s,r),t=Math.max(t,r.currentTimeline.currentTime),l.push(r.currentTimeline)}),l.forEach(e=>n.currentTimeline.mergeTimelineCollectedStyles(e)),n.transformIntoNewTimeline(t),n.previousNode=e}_visitTiming(e,n){if(e.dynamic){const l=e.strValue;return eH(n.params?cH(l,n.params,n.errors):l,n.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,n){const l=n.currentAnimateTimings=this._visitTiming(e.timings,n),t=n.currentTimeline;l.delay&&(n.incrementTime(l.delay),t.snapshotCurrentStyles());const i=e.style;5==i.type?this.visitKeyframes(i,n):(n.incrementTime(l.duration),this.visitStyle(i,n),t.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=e}visitStyle(e,n){const l=n.currentTimeline,t=n.currentAnimateTimings;!t&&l.getCurrentStyleProperties().length&&l.forwardFrame();const i=t&&t.easing||e.easing;e.isEmptyStep?l.applyEmptyStep(i):l.setStyles(e.styles,i,n.errors,n.options),n.previousNode=e}visitKeyframes(e,n){const l=n.currentAnimateTimings,t=n.currentTimeline.duration,i=l.duration,s=n.createSubContext().currentTimeline;s.easing=l.easing,e.styles.forEach(e=>{s.forwardTime((e.offset||0)*i),s.setStyles(e.styles,e.easing,n.errors,n.options),s.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(s),n.transformIntoNewTimeline(t+i),n.previousNode=e}visitQuery(e,n){const l=n.currentTimeline.currentTime,t=e.options||{},i=t.delay?ZU(t.delay):0;i&&(6===n.previousNode.type||0==l&&n.currentTimeline.getCurrentStyleProperties().length)&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=LH);let s=l;const r=n.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!t.optional,n.errors);n.currentQueryTotal=r.length;let u=null;r.forEach((l,t)=>{n.currentQueryIndex=t;const r=n.createSubContext(e.options,l);i&&r.delayNextStep(i),l===n.element&&(u=r.currentTimeline),pH(this,e.animation,r),r.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,r.currentTimeline.currentTime)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(s),u&&(n.currentTimeline.mergeTimelineCollectedStyles(u),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=e}visitStagger(e,n){const l=n.parentContext,t=n.currentTimeline,i=e.timings,s=Math.abs(i.duration),r=s*(n.currentQueryTotal-1);let u=s*n.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":u=r-u;break;case"full":u=l.currentStaggerTime}const o=n.currentTimeline;u&&o.delayNextStep(u);const a=o.currentTime;pH(this,e.animation,n),n.previousNode=e,l.currentStaggerTime=t.currentTime-a+(t.startTime-l.currentTimeline.startTime)}}const LH={};class FH{constructor(e,n,l,t,i,s,r,u){this._driver=e,this.element=n,this.subInstructions=l,this._enterClassName=t,this._leaveClassName=i,this.errors=s,this.timelines=r,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=LH,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new UH(this._driver,n,0),r.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,n){if(!e)return;const l=e;let t=this.options;null!=l.duration&&(t.duration=ZU(l.duration)),null!=l.delay&&(t.delay=ZU(l.delay));const i=l.params;if(i){let e=t.params;e||(e=this.options.params={}),Object.keys(i).forEach(l=>{n&&e.hasOwnProperty(l)||(e[l]=cH(i[l],e,this.errors))})}}_copyOptions(){const e={};if(this.options){const n=this.options.params;if(n){const l=e.params={};Object.keys(n).forEach(e=>{l[e]=n[e]})}}return e}createSubContext(e=null,n,l){const t=n||this.element,i=new FH(this._driver,t,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(t,l||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(e),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(e){return this.previousNode=LH,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,n,l){const t={duration:null!=n?n:e.duration,delay:this.currentTimeline.currentTime+(null!=l?l:0)+e.delay,easing:""},i=new HH(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,t,e.stretchStartingKeyframe);return this.timelines.push(i),t}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,n,l,t,i,s){let r=[];if(t&&r.push(this.element),e.length>0){e=(e=e.replace(xH,"."+this._enterClassName)).replace(kH,"."+this._leaveClassName);let n=this._driver.query(this.element,e,1!=l);0!==l&&(n=l<0?n.slice(n.length+l,n.length):n.slice(0,l)),r.push(...n)}return i||0!=r.length||s.push(`\`query("${n}")\` returned zero elements. (Use \`query("${n}", { optional: true })\` if you wish to allow this.)`),r}}class UH{constructor(e,n,l,t){this._driver=e,this.element=n,this.startTime=l,this._elementTimelineStylesLookup=t,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const n=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||n?(this.forwardTime(this.currentTime+e),n&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,n){return this.applyStylesToKeyframe(),new UH(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=PH,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,n){this._localTimelineStyles[e]=n,this._globalTimelineStyles[e]=n,this._styleSummary[e]={time:this.currentTime,value:n}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||EU,this._currentKeyframe[e]=EU}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,n,l,t){n&&(this._previousKeyframe.easing=n);const i=t&&t.params||{},s=function(e,n){const l={};let t;return e.forEach(e=>{"*"===e?(t=t||Object.keys(n)).forEach(e=>{l[e]=EU}):lH(e,!1,l)}),l}(e,this._globalTimelineStyles);Object.keys(s).forEach(e=>{const n=cH(s[e],i,l);this._pendingStyles[e]=n,this._localTimelineStyles.hasOwnProperty(e)||(this._backFill[e]=this._globalTimelineStyles.hasOwnProperty(e)?this._globalTimelineStyles[e]:EU),this._updateStyle(e,n)})}applyStylesToKeyframe(){const e=this._pendingStyles,n=Object.keys(e);0!=n.length&&(this._pendingStyles={},n.forEach(n=>{this._currentKeyframe[n]=e[n]}),Object.keys(this._localTimelineStyles).forEach(e=>{this._currentKeyframe.hasOwnProperty(e)||(this._currentKeyframe[e]=this._localTimelineStyles[e])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const n=this._localTimelineStyles[e];this._pendingStyles[e]=n,this._updateStyle(e,n)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let n in this._currentKeyframe)e.push(n);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(n=>{const l=this._styleSummary[n],t=e._styleSummary[n];(!l||t.time>l.time)&&this._updateStyle(n,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,n=new Set,l=1===this._keyframes.size&&0===this.duration;let t=[];this._keyframes.forEach((i,s)=>{const r=lH(i,!0);Object.keys(r).forEach(l=>{const t=r[l];t==CU?e.add(l):t==EU&&n.add(l)}),l||(r.offset=s/this.duration),t.push(r)});const i=e.size?hH(e.values()):[],s=n.size?hH(n.values()):[];if(l){const e=t[0],n=nH(e);e.offset=0,n.offset=1,t=[e,n]}return _H(this.element,t,i,s,this.duration,this.startTime,this.easing,!1)}}class HH extends UH{constructor(e,n,l,t,i,s,r=!1){super(e,n,s.delay),this.element=n,this.keyframes=l,this.preStyleProps=t,this.postStyleProps=i,this._stretchStartingKeyframe=r,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:n,duration:l,easing:t}=this.timings;if(this._stretchStartingKeyframe&&n){const i=[],s=l+n,r=n/s,u=lH(e[0],!1);u.offset=0,i.push(u);const o=lH(e[0],!1);o.offset=GH(r),i.push(o);const a=e.length-1;for(let t=1;t<=a;t++){let r=lH(e[t],!1);r.offset=GH((n+r.offset*l)/s),i.push(r)}l=s,n=0,t="",e=i}return _H(this.element,e,this.preStyleProps,this.postStyleProps,l,n,t,!0)}}function GH(e,n=3){const l=Math.pow(10,n-1);return Math.round(e*l)/l}class BH{}class WH extends BH{normalizePropertyName(e,n){return gH(e)}normalizeStyleValue(e,n,l,t){let i="";const s=l.toString().trim();if(VH[n]&&0!==l&&"0"!==l)if("number"==typeof l)i="px";else{const n=l.match(/^[+-]?[\d\.]+([a-z]*)$/);n&&0==n[1].length&&t.push(`Please provide a CSS unit value for ${e}:${l}`)}return s+i}}const VH=(()=>(function(e){const n={};return e.forEach(e=>n[e]=!0),n})("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function zH(e,n,l,t,i,s,r,u,o,a,c,h,d){return{type:0,element:e,triggerName:n,isRemovalTransition:i,fromState:l,fromStyles:s,toState:t,toStyles:r,timelines:u,queriedElements:o,preStyleProps:a,postStyleProps:c,totalTime:h,errors:d}}const YH={};class $H{constructor(e,n,l){this._triggerName=e,this.ast=n,this._stateStyles=l}match(e,n,l,t){return function(e,n,l,t,i){return e.some(e=>e(n,l,t,i))}(this.ast.matchers,e,n,l,t)}buildStyles(e,n,l){const t=this._stateStyles["*"],i=this._stateStyles[e],s=t?t.buildStyles(n,l):{};return i?i.buildStyles(n,l):s}build(e,n,l,t,i,s,r,u,o,a){const c=[],h=this.ast.options&&this.ast.options.params||YH,d=this.buildStyles(l,r&&r.params||YH,c),g=u&&u.params||YH,p=this.buildStyles(t,g,c),m=new Set,f=new Map,S=new Map,E="void"===t,v={params:Object.assign({},h,g)},R=a?[]:MH(e,n,this.ast.animation,i,s,d,p,v,o,c);let O=0;if(R.forEach(e=>{O=Math.max(e.duration+e.delay,O)}),c.length)return zH(n,this._triggerName,l,t,E,d,p,[],[],f,S,O,c);R.forEach(e=>{const l=e.element,t=PU(f,l,{});e.preStyleProps.forEach(e=>t[e]=!0);const i=PU(S,l,{});e.postStyleProps.forEach(e=>i[e]=!0),l!==n&&m.add(l)});const b=hH(m.values());return zH(n,this._triggerName,l,t,E,d,p,R,b,f,S,O)}}class KH{constructor(e,n){this.styles=e,this.defaultParams=n}buildStyles(e,n){const l={},t=nH(this.defaultParams);return Object.keys(e).forEach(n=>{const l=e[n];null!=l&&(t[n]=l)}),this.styles.styles.forEach(e=>{if("string"!=typeof e){const i=e;Object.keys(i).forEach(e=>{let s=i[e];s.length>1&&(s=cH(s,t,n)),l[e]=s})}}),l}}class jH{constructor(e,n){this.name=e,this.ast=n,this.transitionFactories=[],this.states={},n.states.forEach(e=>{this.states[e.name]=new KH(e.style,e.options&&e.options.params||{})}),QH(this.states,"true","1"),QH(this.states,"false","0"),n.transitions.forEach(n=>{this.transitionFactories.push(new $H(e,n,this.states))}),this.fallbackTransition=new $H(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[(e,n)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,n,l,t){return this.transitionFactories.find(i=>i.match(e,n,l,t))||null}matchStyles(e,n,l){return this.fallbackTransition.buildStyles(e,n,l)}}function QH(e,n,l){e.hasOwnProperty(n)?e.hasOwnProperty(l)||(e[l]=e[n]):e.hasOwnProperty(l)&&(e[n]=e[l])}const qH=new wH;class XH{constructor(e,n,l){this.bodyNode=e,this._driver=n,this._normalizer=l,this._animations={},this._playersById={},this.players=[]}register(e,n){const l=[],t=bH(this._driver,n,l);if(l.length)throw new Error(`Unable to build the animation due to the following errors: ${l.join("\n")}`);this._animations[e]=t}_buildPlayer(e,n,l){const t=e.element,i=AU(0,this._normalizer,0,e.keyframes,n,l);return this._driver.animate(t,i,e.duration,e.delay,e.easing,[],!0)}create(e,n,l={}){const t=[],i=this._animations[e];let s;const r=new Map;if(i?(s=MH(this._driver,n,i,$U,KU,{},{},l,qH,t)).forEach(e=>{const n=PU(r,e.element,{});e.postStyleProps.forEach(e=>n[e]=null)}):(t.push("The requested animation doesn't exist or has already been destroyed"),s=[]),t.length)throw new Error(`Unable to create the animation due to the following errors: ${t.join("\n")}`);r.forEach((e,n)=>{Object.keys(e).forEach(l=>{e[l]=this._driver.computeStyle(n,l,EU)})});const u=yU(s.map(e=>{const n=r.get(e.element);return this._buildPlayer(e,{},n)}));return this._playersById[e]=u,u.onDestroy(()=>this.destroy(e)),this.players.push(u),u}destroy(e){const n=this._getPlayer(e);n.destroy(),delete this._playersById[e];const l=this.players.indexOf(n);l>=0&&this.players.splice(l,1)}_getPlayer(e){const n=this._playersById[e];if(!n)throw new Error(`Unable to find the timeline player referenced by ${e}`);return n}listen(e,n,l,t){const i=wU(n,"","","");return NU(this._getPlayer(e),l,i,t),()=>{}}command(e,n,l,t){if("register"==l)return void this.register(e,t[0]);if("create"==l)return void this.create(e,n,t[0]||{});const i=this._getPlayer(e);switch(l){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(t[0]));break;case"destroy":this.destroy(e)}}}const ZH="ng-animate-queued",JH=".ng-animate-queued",eG="ng-animate-disabled",nG=".ng-animate-disabled",lG="ng-star-inserted",tG=".ng-star-inserted",iG=[],sG={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},rG={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},uG="__ng_removed";class oG{constructor(e,n=""){this.namespaceId=n;const l=e&&e.hasOwnProperty("value");if(this.value=null!=(t=l?e.value:e)?t:null,l){const n=nH(e);delete n.value,this.options=n}else this.options={};var t;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const n=e.params;if(n){const e=this.options.params;Object.keys(n).forEach(l=>{null==e[l]&&(e[l]=n[l])})}}}const aG="void",cG=new oG(aG);class hG{constructor(e,n,l){this.id=e,this.hostElement=n,this._engine=l,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,vG(n,this._hostClassName)}listen(e,n,l,t){if(!this._triggers.hasOwnProperty(n))throw new Error(`Unable to listen on the animation trigger event "${l}" because the animation trigger "${n}" doesn't exist!`);if(null==l||0==l.length)throw new Error(`Unable to listen on the animation trigger "${n}" because the provided event is undefined!`);if("start"!=(i=l)&&"done"!=i)throw new Error(`The provided animation trigger event "${l}" for the animation trigger "${n}" is not supported!`);var i;const s=PU(this._elementListeners,e,[]),r={name:n,phase:l,callback:t};s.push(r);const u=PU(this._engine.statesByElement,e,{});return u.hasOwnProperty(n)||(vG(e,jU),vG(e,jU+"-"+n),u[n]=cG),()=>{this._engine.afterFlush(()=>{const e=s.indexOf(r);e>=0&&s.splice(e,1),this._triggers[n]||delete u[n]})}}register(e,n){return!this._triggers[e]&&(this._triggers[e]=n,!0)}_getTrigger(e){const n=this._triggers[e];if(!n)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return n}trigger(e,n,l,t=!0){const i=this._getTrigger(n),s=new gG(this.id,n,e);let r=this._engine.statesByElement.get(e);r||(vG(e,jU),vG(e,jU+"-"+n),this._engine.statesByElement.set(e,r={}));let u=r[n];const o=new oG(l,this.id);if(!(l&&l.hasOwnProperty("value"))&&u&&o.absorbOptions(u.options),r[n]=o,u||(u=cG),o.value!==aG&&u.value===o.value){if(!function(e,n){const l=Object.keys(e),t=Object.keys(n);if(l.length!=t.length)return!1;for(let i=0;i<l.length;i++){const t=l[i];if(!n.hasOwnProperty(t)||e[t]!==n[t])return!1}return!0}(u.params,o.params)){const n=[],l=i.matchStyles(u.value,u.params,n),t=i.matchStyles(o.value,o.params,n);n.length?this._engine.reportError(n):this._engine.afterFlush(()=>{rH(e,l),sH(e,t)})}return}const a=PU(this._engine.playersByElement,e,[]);a.forEach(e=>{e.namespaceId==this.id&&e.triggerName==n&&e.queued&&e.destroy()});let c=i.matchTransition(u.value,o.value,e,o.params),h=!1;if(!c){if(!t)return;c=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:n,transition:c,fromState:u,toState:o,player:s,isFallbackTransition:h}),h||(vG(e,ZH),s.onStart(()=>{RG(e,ZH)})),s.onDone(()=>{let n=this.players.indexOf(s);n>=0&&this.players.splice(n,1);const l=this._engine.playersByElement.get(e);if(l){let e=l.indexOf(s);e>=0&&l.splice(e,1)}}),this.players.push(s),a.push(s),s}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((n,l)=>{delete n[e]}),this._elementListeners.forEach((n,l)=>{this._elementListeners.set(l,n.filter(n=>n.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const n=this._engine.playersByElement.get(e);n&&(n.forEach(e=>e.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,n,l=!1){this._engine.driver.query(e,QU,!0).forEach(e=>{if(e[uG])return;const l=this._engine.fetchNamespacesByElement(e);l.size?l.forEach(l=>l.triggerLeaveAnimation(e,n,!1,!0)):this.clearElementCache(e)})}triggerLeaveAnimation(e,n,l,t){const i=this._engine.statesByElement.get(e);if(i){const s=[];if(Object.keys(i).forEach(n=>{if(this._triggers[n]){const l=this.trigger(e,n,aG,t);l&&s.push(l)}}),s.length)return this._engine.markElementAsRemoved(this.id,e,!0,n),l&&yU(s).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const n=this._elementListeners.get(e);if(n){const l=new Set;n.forEach(n=>{const t=n.name;if(l.has(t))return;l.add(t);const i=this._triggers[t].fallbackTransition,s=this._engine.statesByElement.get(e)[t]||cG,r=new oG(aG),u=new gG(this.id,t,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:i,fromState:s,toState:r,player:u,isFallbackTransition:!0})})}}removeNode(e,n){const l=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,n,!0),this.triggerLeaveAnimation(e,n,!0))return;let t=!1;if(l.totalAnimations){const n=l.players.length?l.playersByQueriedElement.get(e):[];if(n&&n.length)t=!0;else{let n=e;for(;n=n.parentNode;)if(l.statesByElement.get(n)){t=!0;break}}}this.prepareLeaveAnimationListeners(e),t?l.markElementAsRemoved(this.id,e,!1,n):(l.afterFlush(()=>this.clearElementCache(e)),l.destroyInnerAnimations(e),l._onRemovalComplete(e,n))}insertNode(e,n){vG(e,this._hostClassName)}drainQueuedTransitions(e){const n=[];return this._queue.forEach(l=>{const t=l.player;if(t.destroyed)return;const i=l.element,s=this._elementListeners.get(i);s&&s.forEach(n=>{if(n.name==l.triggerName){const t=wU(i,l.triggerName,l.fromState.value,l.toState.value);t._data=e,NU(l.player,n.phase,t,n.callback)}}),t.markedForDestroy?this._engine.afterFlush(()=>{t.destroy()}):n.push(l)}),this._queue=[],n.sort((e,n)=>{const l=e.transition.ast.depCount,t=n.transition.ast.depCount;return 0==l||0==t?l-t:this._engine.driver.containsElement(e.element,n.element)?1:-1})}destroy(e){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let n=!1;return this._elementListeners.has(e)&&(n=!0),!!this._queue.find(n=>n.element===e)||n}}class dG{constructor(e,n,l){this.bodyNode=e,this.driver=n,this._normalizer=l,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(e,n)=>{}}_onRemovalComplete(e,n){this.onRemovalComplete(e,n)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(n=>{n.players.forEach(n=>{n.queued&&e.push(n)})}),e}createNamespace(e,n){const l=new hG(e,n,this);return n.parentNode?this._balanceNamespaceList(l,n):(this.newHostElements.set(n,l),this.collectEnterElement(n)),this._namespaceLookup[e]=l}_balanceNamespaceList(e,n){const l=this._namespaceList.length-1;if(l>=0){let t=!1;for(let i=l;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,n)){this._namespaceList.splice(i+1,0,e),t=!0;break}t||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(n,e),e}register(e,n){let l=this._namespaceLookup[e];return l||(l=this.createNamespace(e,n)),l}registerTrigger(e,n,l){let t=this._namespaceLookup[e];t&&t.register(n,l)&&this.totalAnimations++}destroy(e,n){if(!e)return;const l=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(l.hostElement),delete this._namespaceLookup[e];const n=this._namespaceList.indexOf(l);n>=0&&this._namespaceList.splice(n,1)}),this.afterFlushAnimationsDone(()=>l.destroy(n))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const n=new Set,l=this.statesByElement.get(e);if(l){const e=Object.keys(l);for(let t=0;t<e.length;t++){const i=l[e[t]].namespaceId;if(i){const e=this._fetchNamespace(i);e&&n.add(e)}}}return n}trigger(e,n,l,t){if(pG(n)){const i=this._fetchNamespace(e);if(i)return i.trigger(n,l,t),!0}return!1}insertNode(e,n,l,t){if(!pG(n))return;const i=n[uG];if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const e=this.collectedLeaveElements.indexOf(n);e>=0&&this.collectedLeaveElements.splice(e,1)}if(e){const t=this._fetchNamespace(e);t&&t.insertNode(n,l)}t&&this.collectEnterElement(n)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,n){n?this.disabledNodes.has(e)||(this.disabledNodes.add(e),vG(e,eG)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),RG(e,eG))}removeNode(e,n,l,t){if(pG(n)){const i=e?this._fetchNamespace(e):null;if(i?i.removeNode(n,t):this.markElementAsRemoved(e,n,!1,t),l){const l=this.namespacesByHostElement.get(n);l&&l.id!==e&&l.removeNode(n,t)}}else this._onRemovalComplete(n,t)}markElementAsRemoved(e,n,l,t){this.collectedLeaveElements.push(n),n[uG]={namespaceId:e,setForRemoval:t,hasAnimation:l,removedBeforeQueried:!1}}listen(e,n,l,t,i){return pG(n)?this._fetchNamespace(e).listen(n,l,t,i):()=>{}}_buildInstruction(e,n,l,t,i){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,l,t,e.fromState.options,e.toState.options,n,i)}destroyInnerAnimations(e){let n=this.driver.query(e,QU,!0);n.forEach(e=>this.destroyActiveAnimationsForElement(e)),0!=this.playersByQueriedElement.size&&(n=this.driver.query(e,XU,!0)).forEach(e=>this.finishActiveQueriedAnimationOnElement(e))}destroyActiveAnimationsForElement(e){const n=this.playersByElement.get(e);n&&n.forEach(e=>{e.queued?e.markedForDestroy=!0:e.destroy()})}finishActiveQueriedAnimationOnElement(e){const n=this.playersByQueriedElement.get(e);n&&n.forEach(e=>e.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return yU(this.players).onDone(()=>e());e()})}processLeaveNode(e){const n=e[uG];if(n&&n.setForRemoval){if(e[uG]=sG,n.namespaceId){this.destroyInnerAnimations(e);const l=this._fetchNamespace(n.namespaceId);l&&l.clearElementCache(e)}this._onRemovalComplete(e,n.setForRemoval)}this.driver.matchesElement(e,nG)&&this.markElementAsDisabled(e,!1),this.driver.query(e,nG,!0).forEach(e=>{this.markElementAsDisabled(e,!1)})}flush(e=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((e,n)=>this._balanceNamespaceList(e,n)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let l=0;l<this.collectedEnterElements.length;l++)vG(this.collectedEnterElements[l],lG);if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const l=[];try{n=this._flushAnimations(l,e)}finally{for(let e=0;e<l.length;e++)l[e]()}}else for(let l=0;l<this.collectedLeaveElements.length;l++)this.processLeaveNode(this.collectedLeaveElements[l]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(e=>e()),this._flushFns=[],this._whenQuietFns.length){const e=this._whenQuietFns;this._whenQuietFns=[],n.length?yU(n).onDone(()=>{e.forEach(e=>e())}):e.forEach(e=>e())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,n){const l=new wH,t=[],i=new Map,s=[],r=new Map,u=new Map,o=new Map,a=new Set;this.disabledNodes.forEach(e=>{a.add(e);const n=this.driver.query(e,JH,!0);for(let l=0;l<n.length;l++)a.add(n[l])});const c=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=SG(h,this.collectedEnterElements),g=new Map;let p=0;d.forEach((e,n)=>{const l=$U+p++;g.set(n,l),e.forEach(e=>vG(e,l))});const m=[],f=new Set,S=new Set;for(let w=0;w<this.collectedLeaveElements.length;w++){const e=this.collectedLeaveElements[w],n=e[uG];n&&n.setForRemoval&&(m.push(e),f.add(e),n.hasAnimation?this.driver.query(e,tG,!0).forEach(e=>f.add(e)):S.add(e))}const E=new Map,v=SG(h,Array.from(f));v.forEach((e,n)=>{const l=KU+p++;E.set(n,l),e.forEach(e=>vG(e,l))}),e.push(()=>{d.forEach((e,n)=>{const l=g.get(n);e.forEach(e=>RG(e,l))}),v.forEach((e,n)=>{const l=E.get(n);e.forEach(e=>RG(e,l))}),m.forEach(e=>{this.processLeaveNode(e)})});const R=[],O=[];for(let w=this._namespaceList.length-1;w>=0;w--)this._namespaceList[w].drainQueuedTransitions(n).forEach(e=>{const n=e.player,i=e.element;if(R.push(n),this.collectedEnterElements.length){const e=i[uG];if(e&&e.setForMove)return void n.destroy()}const a=!c||!this.driver.containsElement(c,i),h=E.get(i),d=g.get(i),p=this._buildInstruction(e,l,d,h,a);if(!p.errors||!p.errors.length)return a?(n.onStart(()=>rH(i,p.fromStyles)),n.onDestroy(()=>sH(i,p.toStyles)),void t.push(n)):e.isFallbackTransition?(n.onStart(()=>rH(i,p.fromStyles)),n.onDestroy(()=>sH(i,p.toStyles)),void t.push(n)):(p.timelines.forEach(e=>e.stretchStartingKeyframe=!0),l.append(i,p.timelines),s.push({instruction:p,player:n,element:i}),p.queriedElements.forEach(e=>PU(r,e,[]).push(n)),p.preStyleProps.forEach((e,n)=>{const l=Object.keys(e);if(l.length){let e=u.get(n);e||u.set(n,e=new Set),l.forEach(n=>e.add(n))}}),void p.postStyleProps.forEach((e,n)=>{const l=Object.keys(e);let t=o.get(n);t||o.set(n,t=new Set),l.forEach(e=>t.add(e))}));O.push(p)});if(O.length){const e=[];O.forEach(n=>{e.push(`@${n.triggerName} has failed due to:\n`),n.errors.forEach(n=>e.push(`- ${n}\n`))}),R.forEach(e=>e.destroy()),this.reportError(e)}const b=new Map,T=new Map;s.forEach(e=>{const n=e.element;l.has(n)&&(T.set(n,n),this._beforeAnimationBuild(e.player.namespaceId,e.instruction,b))}),t.forEach(e=>{const n=e.element;this._getPreviousPlayers(n,!1,e.namespaceId,e.triggerName,null).forEach(e=>{PU(b,n,[]).push(e),e.destroy()})});const C=m.filter(e=>bG(e,u,o)),I=new Map;fG(I,this.driver,S,o,EU).forEach(e=>{bG(e,u,o)&&C.push(e)});const y=new Map;d.forEach((e,n)=>{fG(y,this.driver,new Set(e),u,CU)}),C.forEach(e=>{const n=I.get(e),l=y.get(e);I.set(e,Object.assign({},n,l))});const A=[],N=[],_={};s.forEach(e=>{const{element:n,player:s,instruction:r}=e;if(l.has(n)){if(a.has(n))return s.onDestroy(()=>sH(n,r.toStyles)),s.disabled=!0,s.overrideTotalTime(r.totalTime),void t.push(s);let e=_;if(T.size>1){let l=n;const t=[];for(;l=l.parentNode;){const n=T.get(l);if(n){e=n;break}t.push(l)}t.forEach(n=>T.set(n,e))}const l=this._buildAnimation(s.namespaceId,r,b,i,y,I);if(s.setRealPlayer(l),e===_)A.push(s);else{const n=this.playersByElement.get(e);n&&n.length&&(s.parentPlayer=yU(n)),t.push(s)}}else rH(n,r.fromStyles),s.onDestroy(()=>sH(n,r.toStyles)),N.push(s),a.has(n)&&t.push(s)}),N.forEach(e=>{const n=i.get(e.element);if(n&&n.length){const l=yU(n);e.setRealPlayer(l)}}),t.forEach(e=>{e.parentPlayer?e.syncPlayerEvents(e.parentPlayer):e.destroy()});for(let w=0;w<m.length;w++){const e=m[w],n=e[uG];if(RG(e,KU),n&&n.hasAnimation)continue;let l=[];if(r.size){let n=r.get(e);n&&n.length&&l.push(...n);let t=this.driver.query(e,XU,!0);for(let e=0;e<t.length;e++){let n=r.get(t[e]);n&&n.length&&l.push(...n)}}const t=l.filter(e=>!e.destroyed);t.length?OG(this,e,t):this.processLeaveNode(e)}return m.length=0,A.forEach(e=>{this.players.push(e),e.onDone(()=>{e.destroy();const n=this.players.indexOf(e);this.players.splice(n,1)}),e.play()}),A}elementContainsData(e,n){let l=!1;const t=n[uG];return t&&t.setForRemoval&&(l=!0),this.playersByElement.has(n)&&(l=!0),this.playersByQueriedElement.has(n)&&(l=!0),this.statesByElement.has(n)&&(l=!0),this._fetchNamespace(e).elementContainsData(n)||l}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,n,l,t,i){let s=[];if(n){const n=this.playersByQueriedElement.get(e);n&&(s=n)}else{const n=this.playersByElement.get(e);if(n){const e=!i||i==aG;n.forEach(n=>{n.queued||(e||n.triggerName==t)&&s.push(n)})}}return(l||t)&&(s=s.filter(e=>!(l&&l!=e.namespaceId||t&&t!=e.triggerName))),s}_beforeAnimationBuild(e,n,l){const t=n.element,i=n.isRemovalTransition?void 0:e,s=n.isRemovalTransition?void 0:n.triggerName;for(const r of n.timelines){const e=r.element,u=e!==t,o=PU(l,e,[]);this._getPreviousPlayers(e,u,i,s,n.toState).forEach(e=>{const n=e.getRealPlayer();n.beforeDestroy&&n.beforeDestroy(),e.destroy(),o.push(e)})}rH(t,n.fromStyles)}_buildAnimation(e,n,l,t,i,s){const r=n.triggerName,u=n.element,o=[],a=new Set,c=new Set,h=n.timelines.map(n=>{const h=n.element;a.add(h);const d=h[uG];if(d&&d.removedBeforeQueried)return new bU(n.duration,n.delay);const g=h!==u,p=function(e){const n=[];return function e(n,l){for(let t=0;t<n.length;t++){const i=n[t];i instanceof TU?e(i.players,l):l.push(i)}}(e,n),n}((l.get(h)||iG).map(e=>e.getRealPlayer())).filter(e=>!!e.element&&e.element===h),m=i.get(h),f=s.get(h),S=AU(0,this._normalizer,0,n.keyframes,m,f),E=this._buildPlayer(n,S,p);if(n.subTimeline&&t&&c.add(h),g){const n=new gG(e,r,h);n.setRealPlayer(E),o.push(n)}return E});o.forEach(e=>{PU(this.playersByQueriedElement,e.element,[]).push(e),e.onDone(()=>(function(e,n,l){let t;if(e instanceof Map){if(t=e.get(n)){if(t.length){const e=t.indexOf(l);t.splice(e,1)}0==t.length&&e.delete(n)}}else if(t=e[n]){if(t.length){const e=t.indexOf(l);t.splice(e,1)}0==t.length&&delete e[n]}return t})(this.playersByQueriedElement,e.element,e))}),a.forEach(e=>vG(e,qU));const d=yU(h);return d.onDestroy(()=>{a.forEach(e=>RG(e,qU)),sH(u,n.toStyles)}),c.forEach(e=>{PU(t,e,[]).push(d)}),d}_buildPlayer(e,n,l){return n.length>0?this.driver.animate(e.element,n,e.duration,e.delay,e.easing,l):new bU(e.duration,e.delay)}}class gG{constructor(e,n,l){this.namespaceId=e,this.triggerName=n,this.element=l,this._player=new bU,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(n=>{this._queuedCallbacks[n].forEach(l=>NU(e,n,void 0,l))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const n=this._player;n.triggerCallback&&e.onStart(()=>n.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,n){PU(this._queuedCallbacks,e,[]).push(n)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const n=this._player;n.triggerCallback&&n.triggerCallback(e)}}function pG(e){return e&&1===e.nodeType}function mG(e,n){const l=e.style.display;return e.style.display=null!=n?n:"none",l}function fG(e,n,l,t,i){const s=[];l.forEach(e=>s.push(mG(e)));const r=[];t.forEach((l,t)=>{const s={};l.forEach(e=>{const l=s[e]=n.computeStyle(t,e,i);l&&0!=l.length||(t[uG]=rG,r.push(t))}),e.set(t,s)});let u=0;return l.forEach(e=>mG(e,s[u++])),r}function SG(e,n){const l=new Map;if(e.forEach(e=>l.set(e,[])),0==n.length)return l;const t=new Set(n),i=new Map;return n.forEach(e=>{const n=function e(n){if(!n)return 1;let s=i.get(n);if(s)return s;const r=n.parentNode;return s=l.has(r)?r:t.has(r)?1:e(r),i.set(n,s),s}(e);1!==n&&l.get(n).push(e)}),l}const EG="$$classes";function vG(e,n){if(e.classList)e.classList.add(n);else{let l=e[EG];l||(l=e[EG]={}),l[n]=!0}}function RG(e,n){if(e.classList)e.classList.remove(n);else{let l=e[EG];l&&delete l[n]}}function OG(e,n,l){yU(l).onDone(()=>e.processLeaveNode(n))}function bG(e,n,l){const t=l.get(e);if(!t)return!1;let i=n.get(e);return i?t.forEach(e=>i.add(e)):n.set(e,t),l.delete(e),!0}class TG{constructor(e,n,l){this.bodyNode=e,this._driver=n,this._triggerCache={},this.onRemovalComplete=(e,n)=>{},this._transitionEngine=new dG(e,n,l),this._timelineEngine=new XH(e,n,l),this._transitionEngine.onRemovalComplete=(e,n)=>this.onRemovalComplete(e,n)}registerTrigger(e,n,l,t,i){const s=e+"-"+t;let r=this._triggerCache[s];if(!r){const e=[],n=bH(this._driver,i,e);if(e.length)throw new Error(`The animation trigger "${t}" has failed to build due to the following errors:\n - ${e.join("\n - ")}`);r=function(e,n){return new jH(e,n)}(t,n),this._triggerCache[s]=r}this._transitionEngine.registerTrigger(n,t,r)}register(e,n){this._transitionEngine.register(e,n)}destroy(e,n){this._transitionEngine.destroy(e,n)}onInsert(e,n,l,t){this._transitionEngine.insertNode(e,n,l,t)}onRemove(e,n,l,t){this._transitionEngine.removeNode(e,n,t||!1,l)}disableAnimations(e,n){this._transitionEngine.markElementAsDisabled(e,n)}process(e,n,l,t){if("@"==l.charAt(0)){const[e,i]=xU(l);this._timelineEngine.command(e,n,i,t)}else this._transitionEngine.trigger(e,n,l,t)}listen(e,n,l,t,i){if("@"==l.charAt(0)){const[e,t]=xU(l);return this._timelineEngine.listen(e,n,t,i)}return this._transitionEngine.listen(e,n,l,t,i)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let CG=(()=>(class extends fU{constructor(e,n){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(n.body,{id:"0",encapsulation:Ve.None,styles:[],data:{animation:[]}})}build(e){const n=this._nextAnimationId.toString();this._nextAnimationId++;const l=Array.isArray(e)?vU(e):e;return AG(this._renderer,null,n,"register",[l]),new IG(n,this._renderer)}}))();class IG extends SU{constructor(e,n){super(),this._id=e,this._renderer=n}create(e,n){return new yG(this._id,e,n||{},this._renderer)}}class yG{constructor(e,n,l,t){this.id=e,this.element=n,this._renderer=t,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",l)}_listen(e,n){return this._renderer.listen(this.element,`@@${this.id}:${e}`,n)}_command(e,...n){return AG(this._renderer,this.element,this.id,e,n)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(e){this._command("setPosition",e)}getPosition(){return 0}}function AG(e,n,l,t,i){return e.setProperty(n,`@@${l}:${t}`,i)}const NG="@",_G="@.disabled";let wG=(()=>(class{constructor(e,n,l){this.delegate=e,this.engine=n,this._zone=l,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=(e,n)=>{n&&n.parentNode(e)&&n.removeChild(e.parentNode,e)}}createRenderer(e,n){const l=this.delegate.createRenderer(e,n);if(!(e&&n&&n.data&&n.data.animation)){let e=this._rendererCache.get(l);return e||(e=new PG("",l,this.engine),this._rendererCache.set(l,e)),e}const t=n.id,i=n.id+"-"+this._currentId;return this._currentId++,this.engine.register(i,e),n.data.animation.forEach(n=>this.engine.registerTrigger(t,i,e,n.name,n)),new xG(this,i,l,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,n,l){e>=0&&e<this._microtaskId?this._zone.run(()=>n(l)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(e=>{const[n,l]=e;n(l)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,l]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}))();class PG{constructor(e,n,l){this.namespaceId=e,this.delegate=n,this.engine=l,this.destroyNode=this.delegate.destroyNode?e=>n.destroyNode(e):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,n){this.delegate.appendChild(e,n),this.engine.onInsert(this.namespaceId,n,e,!1)}insertBefore(e,n,l){this.delegate.insertBefore(e,n,l),this.engine.onInsert(this.namespaceId,n,e,!0)}removeChild(e,n,l){this.engine.onRemove(this.namespaceId,n,this.delegate,l)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,l,t){this.delegate.setAttribute(e,n,l,t)}removeAttribute(e,n,l){this.delegate.removeAttribute(e,n,l)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,l,t){this.delegate.setStyle(e,n,l,t)}removeStyle(e,n,l){this.delegate.removeStyle(e,n,l)}setProperty(e,n,l){n.charAt(0)==NG&&n==_G?this.disableAnimations(e,!!l):this.delegate.setProperty(e,n,l)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,l){return this.delegate.listen(e,n,l)}disableAnimations(e,n){this.engine.disableAnimations(e,n)}}class xG extends PG{constructor(e,n,l,t){super(n,l,t),this.factory=e,this.namespaceId=n}setProperty(e,n,l){n.charAt(0)==NG?"."==n.charAt(1)&&n==_G?this.disableAnimations(e,l=void 0===l||!!l):this.engine.process(this.namespaceId,e,n.substr(1),l):this.delegate.setProperty(e,n,l)}listen(e,n,l){if(n.charAt(0)==NG){const t=function(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(e);let i=n.substr(1),s="";return i.charAt(0)!=NG&&([i,s]=function(e){const n=e.indexOf(".");return[e.substring(0,n),e.substr(n+1)]}(i)),this.engine.listen(this.namespaceId,t,i,s,e=>{this.factory.scheduleListenerCallback(e._data||-1,l,e)})}return this.delegate.listen(e,n,l)}}let kG=(()=>(class extends TG{constructor(e,n,l){super(e.body,n,l)}}))();function MG(){return new WH}function DG(e,n,l){return new wG(e,n,l)}const LG=new be("AnimationModuleType");let FG=(()=>(class{}))(),UG=(()=>{class e{constructor(e,n){this.gameService=e,this.router=n,this.lastRegion=Du.VILLAGE}canActivate(e,n){switch(e.routeConfig.path){case"redirect":const e="/regions/"+Du[this.lastRegion].toLowerCase();return this.router.navigate([e],{skipLocationChange:!1}),!1;case"crafting":return!!this.gameService.isEnabled(Iu.CRAFTING)||(this.goToError(),!1);case"market":return!!this.gameService.isEnabled(Iu.MARKET)||(this.goToError(),!1);case"research":return!!this.gameService.isEnabled(Iu.RESEARCH)||(this.goToError(),!1);case"army":return!!this.gameService.isEnabled(Iu.ARMY)||(this.goToError(),!1);case"religion":return!!this.gameService.isEnabled(Iu.RELIGION)||(this.goToError(),!1);case"weather":return!!this.gameService.isEnabled(Iu.WEATHER)||(this.goToError(),!1);case"world":return!!this.gameService.isEnabled(Iu.CARTOGRAPHY)||(this.goToError(),!1);case"navy":return!!this.gameService.isEnabled(Iu.NAVY)||(this.goToError(),!1);case"heritage":return!!this.gameService.isEnabled(Iu.HERITAGE)||(this.goToError(),!1);case"village":return this.lastRegion=Du.VILLAGE,!0;case"forest":return this.lastRegion=Du.FOREST,!0;case"mountains":return this.gameService.isEnabled(Iu.MOUNTAINS)?(this.lastRegion=Du.MOUNTAINS,!0):(this.goToError(),!1);case"fort":return this.gameService.isEnabled(Iu.FORT)?(this.lastRegion=Du.FORT,!0):(this.goToError(),!1);case"sea":return this.gameService.isEnabled(Iu.SEA)?(this.lastRegion=Du.SEA,!0):(this.goToError(),!1);case"field":return this.gameService.isEnabled(Iu.FIELD)?(this.lastRegion=Du.FIELD,!0):(this.goToError(),!1);case"plateau":return this.gameService.isEnabled(Iu.PLATEAU)?(this.lastRegion=Du.PLATEAU,!0):(this.goToError(),!1);default:return!1}}goToError(){this.router.navigate(["/404"],{skipLocationChange:!0})}}return e.ngInjectableDef=ce({factory:function(){return new e(De(Sf),De(up))},token:e,providedIn:"root"}),e})();class HG{constructor(){this.handlers={}}shouldDetach(e){return e.routeConfig&&("village"===e.routeConfig.path||"fort"===e.routeConfig.path||"forest"===e.routeConfig.path||"field"===e.routeConfig.path||"mountains"===e.routeConfig.path||"plateau"===e.routeConfig.path||"sea"===e.routeConfig.path)}store(e,n){this.handlers[e.routeConfig.path]=n}shouldAttach(e){return!!e.routeConfig&&!!this.handlers[e.routeConfig.path]}retrieve(e){return e.routeConfig?this.handlers[e.routeConfig.path]:null}shouldReuseRoute(e,n){return!1}}class GG{}var BG=Eu(Fo,[Uo],(function(e){return function(e){const n={},l=[];let t=!1;for(let i=0;i<e.length;i++){const s=e[i];s.token===Pn&&!0===s.value&&(t=!0),1073741824&s.flags&&l.push(s.token),s.index=i,n[Ql(s.token)]=s}return{factory:null,providersByKey:n,providers:e,modules:l,isRoot:t}}([xt(512,il,sl,[[8,[Hp,zp,Hf,VR,JR,pO,XO,Ub,uT,bT,GI,JI,oy,_y,dN,PN,JN,v_,Y_,rw,Iw,Hw,Qw,mP,bP,_P,mU]],[3,il],He]),xt(4608,pm,pm,[]),xt(5120,Ki,$s,[[3,Ki]]),xt(4608,ra,ua,[Ki,[2,sa]]),xt(5120,yi,Ks,[hs]),xt(5120,Gi,Bi,[]),xt(5120,Al,zs,[]),xt(5120,Nl,Ys,[]),xt(4608,Ph,xh,[ka]),xt(6144,Cn,null,[Ph]),xt(4608,Ch,yh,[]),xt(5120,Xc,(function(e,n,l,t,i,s,r,u){return[new bh(e,n,l),new wh(t),new Ah(i,s,r,u)]}),[ka,hs,zi,ka,ka,Ch,$i,[2,Ih]]),xt(4608,Zc,Zc,[Xc,hs]),xt(135680,nh,nh,[ka]),xt(4608,oh,oh,[Zc,nh,Gi]),xt(4608,VU,WU,[]),xt(5120,BH,MG,[]),xt(4608,TG,kG,[ka,VU,BH]),xt(5120,hl,DG,[oh,TG,hs]),xt(6144,eh,null,[nh]),xt(4608,Es,Es,[hs]),xt(5120,qd,Pp,[up]),xt(4608,Ep,Ep,[]),xt(6144,fp,null,[Ep]),xt(135680,vp,vp,[up,xs,ls,kn,fp]),xt(4608,Sp,Sp,[]),xt(5120,Rp,yp,[up,Da,Op]),xt(5120,Dp,Mp,[xp]),xt(5120,Yi,(function(e){return[e]}),[Dp]),xt(4608,fU,CG,[hl,ka]),xt(4608,DS,DS,[ka,hs,cS,kS]),xt(4608,Nx,_x,[ka,zi,yx]),xt(4608,wx,wx,[Nx,Ax]),xt(5120,Rx,(function(e){return[e]}),[wx]),xt(4608,Cx,Cx,[]),xt(6144,Tx,null,[Cx]),xt(4608,Ix,Ix,[Tx]),xt(6144,tx,null,[Ix]),xt(4608,lx,Px,[tx,kn]),xt(4608,Ex,Ex,[lx]),xt(4608,yf,yf,[df,sf,Sf,pf,uf,bf,hf,Rf]),xt(1073742336,qm,qm,[]),xt(1073742336,Xm,Xm,[]),xt(1073742336,xa,xa,[]),xt(1024,Xe,Gh,[]),xt(1024,Is,(function(){return[Cp()]}),[]),xt(512,xp,xp,[kn]),xt(1024,Ui,(function(e,n){return[(l=e,jc("probe",qc),jc("coreTokens",Object.assign({},Qc,(l||[]).reduce((e,n)=>(e[n.name]=n.token,e),{}))),()=>qc),kp(n)];var l}),[[2,Is],xp]),xt(512,Hi,Hi,[[2,Ui]]),xt(131584,ws,ws,[hs,$i,kn,Xe,il,Hi]),xt(1073742336,js,js,[ws]),xt(1073742336,Bh,Bh,[[3,Bh]]),xt(1024,bp,Np,[[3,up]]),xt(512,Nd,_d,[]),xt(512,gp,gp,[]),xt(256,Op,{},[]),xt(1024,Bo,Ap,[Ho,[2,Wo],Op]),xt(512,Vo,Vo,[Bo,Ho]),xt(512,ls,ls,[]),xt(512,xs,Ds,[ls,[2,ks]]),xt(1024,ep,(function(){return[[{path:"",redirectTo:"regions/redirect",pathMatch:"full"},{path:"404",component:Gp,pathMatch:"full"},{path:"resources",component:Af},{path:"crafting",children:[{path:"",redirectTo:"crafting",pathMatch:"full"},{path:"crafting",component:MR,canActivate:[UG]},{path:"cooking",component:zR}]},{path:"market",component:tO,canActivate:[UG]},{path:"research",component:UO,canActivate:[UG]},{path:"army",component:vb,canActivate:[UG]},{path:"religion",component:$b,canActivate:[UG]},{path:"weather",component:aT,canActivate:[UG]},{path:"world",component:sC,canActivate:[UG]},{path:"navy",component:BI,canActivate:[UG]},{path:"heritage",component:ny,canActivate:[UG]},{path:"royal",component:vy},{path:"regions",children:[{path:"",redirectTo:"redirect",pathMatch:"full"},{path:"redirect",component:YA,canActivate:[UG]},{path:"village",component:YA,canActivate:[UG]},{path:"fort",component:gN,canActivate:[UG]},{path:"forest",component:kN,canActivate:[UG]},{path:"field",component:n_,canActivate:[UG]},{path:"mountains",component:O_,canActivate:[UG]},{path:"plateau",component:K_,canActivate:[UG]},{path:"sea",component:uw,canActivate:[UG]}]},{path:"management",children:[{path:"",redirectTo:"general",pathMatch:"full"},{path:"general",component:ww},{path:"happiness",component:Gw},{path:"effects",component:qw},{path:"forestM",component:fP},{path:"summary",component:TP}]},{path:"**",redirectTo:"regions/village",pathMatch:"full"}]]}),[]),xt(512,Zg,HG,[]),xt(1024,up,wp,[ws,Nd,gp,Vo,kn,xs,ls,ep,Op,[2,lp],[2,Zg]]),xt(1073742336,Ip,Ip,[[2,bp],[2,up]]),xt(1073742336,GG,GG,[]),xt(1073742336,FG,FG,[]),xt(1073742336,zS,zS,[]),xt(1073742336,xx,xx,[]),xt(1073742336,kx,kx,[]),xt(1073742336,Fo,Fo,[]),xt(256,Pn,!0,[]),xt(256,LG,"NoopAnimations",[]),xt(256,yx,"XSRF-TOKEN",[]),xt(256,Ax,"X-XSRF-TOKEN",[])])}));go.production&&function(){if(Je)throw new Error("Cannot enable prod mode after platform setup.");Ze=!1}(),Hh().bootstrapModuleFactory(BG).catch(e=>console.log(e))}},[[0,0]]]);